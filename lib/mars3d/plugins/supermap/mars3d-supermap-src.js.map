{"version":3,"file":"mars3d-supermap-src.js","sources":["../../../../src/plugins/mars3d-supermap/S3MLayer.js","../../../../src/plugins/mars3d-supermap/SmImgLayer.js","../../../../src/plugins/mars3d-supermap/SmMvtLayer.js"],"sourcesContent":["import * as mars3d from \"mars3d\"\nconst Cesium = mars3d.Cesium\n\nconst BaseLayer = mars3d.layer.BaseLayer\n\n/**\n * 超图S3M三维模型图层,\n * 【需要引入  mars3d-supermap 插件库】\n *\n * @param {Object} [options] 参数对象，包括以下：\n * @param {String} options.url supermap的S3M服务地址,示例：\"url\": \"http://www.supermapol.com/realspace/services/3D-Olympic/rest/realspace\"\n * @param {String} [options.layername] 指定图层名称,未指定时，打开iserver场景服务下所有图层\n * @param {String} [options.sceneName] 工作空间中有多个场景，需要指定场景名称；设置为undefined，默认打开第一个\n * @param {Object} [options.s3mOptions] [S3M支持的参数]{@link http://support.supermap.com.cn:8090/webgl/docs/Documentation/S3MTilesLayer.html?classFilter=S3MTilesLayer} ,示例： {\"selectEnabled\":false},\n * @param {Object} [options.position] 模型新的中心点位置（移动模型）\n * @param {Number} options.position.alt 获取或设置底部高程。（单位：米）\n *\n * @param {String|Number} [options.id = uuid()] 图层id标识\n * @param {String|Number} [options.pid = -1] 图层父级的id，一般图层管理中使用\n * @param {String} [options.name = ''] 图层名称\n * @param {Boolean} [options.show = true] 图层是否显示\n * @param {BaseClass|Boolean} [options.eventParent]  指定的事件冒泡对象，默认为map对象，false时不冒泡\n * @param {Object} [options.center] 图层自定义定位视角 {@link Map#setCameraView}\n * @param {Number} options.center.lng 经度值, 180 - 180\n * @param {Number} options.center.lat 纬度值, -90 - 90\n * @param {Number} [options.center.alt] 高度值\n * @param {Number} [options.center.heading] 方向角度值，绕垂直于地心的轴旋转角度, 0-360\n * @param {Number} [options.center.pitch] 俯仰角度值，绕纬度线旋转角度, 0-360\n * @param {Number} [options.center.roll] 翻滚角度值，绕经度线旋转角度, 0-360\n * @param {Boolean} [options.flyTo] 加载完成数据后是否自动飞行定位到数据所在的区域。\n * @export\n * @class S3MLayer\n * @extends {BaseLayer}\n */\nexport class S3MLayer extends BaseLayer {\n  /**\n   * 模型对应的Cesium.S3MTilesLayer图层组\n   * @type {Object[]}\n   * @readonly\n   * @see http://support.supermap.com.cn:8090/webgl/docs/Documentation/S3MTilesLayer.html\n   */\n  get layer() {\n    return this._layerArr\n  }\n\n  /**\n   * 设置S3M图层本身支持的参数\n   * @type {Object}\n   * @see [S3M支持的参数]{@link http://support.supermap.com.cn:8090/webgl/docs/Documentation/S3MTilesLayer.html?classFilter=S3MTilesLayer}\n   */\n  get s3mOptions() {\n    return this.options.s3mOptions\n  }\n\n  set s3mOptions(value) {\n    for (const key in value) {\n      let val = value[key]\n      this.options.s3mOptions[key] = val\n\n      if (key === \"transparentBackColor\") {\n        // 去黑边，与offset互斥，注意别配置offset\n        val = Cesium.Color.fromCssColorString(val)\n      } else if (key === \"transparentBackColorTolerance\") {\n        val = Number(val)\n      }\n\n      for (let i = 0; i < this._layerArr.length; i++) {\n        const layer = this._layerArr[i]\n        if (layer == null) {\n          continue\n        }\n        layer[key] = val\n      }\n    }\n  }\n\n  _showHook(show) {\n    this.eachLayer((layer) => {\n      layer.visible = show // 不同超图版本，有的是visible，有的是show\n      layer.show = show\n    }, this)\n  }\n\n  /**\n   * 对象添加到地图前创建一些对象的钩子方法，\n   * 只会调用一次\n   * @return {void}  无\n   * @private\n   */\n  _mountedHook() {\n    if (!this._map.scene.open) {\n      throw new Error(\"请引入 超图版本Cesium库 或 超图S3M插件 \")\n    }\n\n    // 场景添加S3M图层服务\n    let promise\n    if (this.options.layername) {\n      promise = this._map.scene.addS3MTilesLayerByScp(this.options.url, {\n        name: this.options.layername,\n        autoSetVie: this.options.flyTo,\n        cullEnabled: this.options.cullEnabled\n      })\n    } else {\n      promise = this._map.scene.open(this.options.url, this.options.sceneName, {\n        autoSetVie: this.options.flyTo\n      })\n    }\n\n    promise.then(\n      (smLayer) => {\n        if (Array.isArray(smLayer)) {\n          this._layerArr = smLayer\n        } else {\n          this._layerArr = [smLayer]\n        }\n\n        for (let i = 0; i < this._layerArr.length; i++) {\n          const layer = this._layerArr[i]\n          if (!layer) {\n            continue\n          }\n          try {\n            this._initModelItem(layer)\n          } catch (e) {\n            mars3d.Log.logError(\"s3m图层初始化出错\", e)\n          }\n        }\n\n        this._showHook(this.show)\n\n        if (this.options.flyTo) {\n          this.flyToByAnimationEnd()\n        }\n        this._readyPromise.resolve(this)\n        this.fire(mars3d.EventType.load, { layers: this._layerArr })\n      },\n      (error) => {\n        this._readyPromise.reject(error)\n      }\n    )\n\n    // this._map.viewer.pickEvent.addEventListener(function (feature) {\n    //   debugger;\n    // });\n  }\n\n  // 对单个s3m图层处理\n  _initModelItem(layer) {\n    // 图层参数合并\n    if (this.options.s3mOptions) {\n      for (const key in this.options.s3mOptions) {\n        const val = this.options.s3mOptions[key]\n\n        if (key === \"transparentBackColor\") {\n          layer[key] = Cesium.Color.fromCssColorString(val) // 去黑边\n        } else if (key === \"transparentBackColorTolerance\") {\n          layer[key] = Number(val)\n        } else {\n          layer[key] = val\n        }\n      }\n    }\n\n    // 选中颜色\n    if (this.options.highlight) {\n      layer.selectedColor = mars3d.Util.getColorByStyle(this.options.highlight)\n    }\n\n    // 高度调整\n    if (this.options?.position?.alt) {\n      layer.style3D.altitudeMode = Cesium.HeightReference.NONE\n      layer.style3D.bottomAltitude = this.options.position.alt\n      if (layer.refresh) {\n        layer.refresh() // 设置风格后需刷新\n      }\n    }\n  }\n\n  /**\n   * 对象添加到地图上的创建钩子方法，\n   * 每次add时都会调用\n   * @return {void}  无\n   * @private\n   */\n  _addedHook() {\n    this._showHook(this.show)\n  }\n\n  /**\n   * 对象从地图上移除的创建钩子方法，\n   * 每次remove时都会调用\n   * @return {void}  无\n   * @private\n   */\n  _removedHook() {\n    this._showHook(false)\n  }\n\n  /**\n   * 遍历每一个子图层并将其作为参数传递给回调函数\n   *\n   * @param {Function} method 回调方法\n   * @param {Object} context  侦听器的上下文(this关键字将指向的对象)。\n   * @return {GroupLayer} 当前对象本身,可以链式调用\n   */\n  eachLayer(method, context) {\n    if (!this._layerArr) {\n      return\n    }\n    this._layerArr.forEach((layer) => {\n      method.call(context, layer)\n    })\n    return this\n  }\n\n  /**\n   * 设置透明度\n   * @param {Number} value 透明度\n   * @return {void}  无\n   */\n  setOpacity(value) {\n    this.eachLayer((layer) => {\n      layer.style3D.fillForeColor.alpha = value\n    }, this)\n  }\n\n  // 定位至数据区域\n  flyTo(options = {}) {\n    if (this.options.center) {\n      this._map.setCameraView(this.options.center, options)\n    } else if (this.options.extent) {\n      this._map.flyToExtent(this.options.extent, options)\n    }\n  }\n}\nmars3d.layer.S3MLayer = S3MLayer\n\n// 注册下\nmars3d.LayerUtil.register(\"supermap_s3m\", S3MLayer)\n","import * as mars3d from \"mars3d\"\nconst Cesium = mars3d.Cesium\n\nconst BaseTileLayer = mars3d.layer.BaseTileLayer\n\n/**\n * 超图影像瓦片服务图层,\n * 【需要引入  mars3d-supermap 插件库】\n *\n * @param {Object} [options] 参数对象，包括以下：\n * @param {String} options.url supermap的影像服务地址\n * @param {String|String[]} [options.subdomains] URL模板中用于 {s} 占位符的子域。 如果此参数是单个字符串，则字符串中的每个字符都是一个子域。如果是 一个数组，数组中的每个元素都是一个子域。\n * @param {String} [options.tileFormat] 影像图片格式，默认为png。\n * @param {Boolean} [options.transparent=true] 设置请求的地图服务的参数是否为transparent。\n * @param {String|Cesium.Color} [options.transparentBackColor] 设置影像透明色。\n * @param {Number} [options.transparentBackColorTolerance] 去黑边,设置影像透明色容限，取值范围为0.0~1.0。0.0表示完全透明，1.0表示完全不透明。\n * @param {String} [options.cacheKey] 影像的三维缓存密钥。\n *\n * @param {Number} [options.minimumLevel=0] 瓦片所支持的最低层级，如果数据没有第0层，该参数必须配置,当地图小于该级别时，平台不去请求服务数据。\n * @param {Number} [options.maximumLevel] 瓦片所支持的最大层级,大于该层级时会显示上一层拉伸后的瓦片，当地图大于该级别时，平台不去请求服务数据。\n * @param {Number} [options.minimumTerrainLevel] 展示影像图层的最小地形细节级别，小于该级别时，平台不显示影像数据。\n * @param {Number} [options.maximumTerrainLevel] 展示影像图层的最大地形细节级别，大于该级别时，平台不显示影像数据。\n * @param {Object} [options.rectangle] 瓦片数据的矩形区域范围\n * @param {Number} options.rectangle.xmin 最小经度值, -180 至 180\n * @param {Number} options.rectangle.xmax 最大纬度值, -180 至 180\n * @param {Number} options.rectangle.ymin 最小纬度值, -90 至 90\n * @param {Number} options.rectangle.ymax 最大纬度值, -90 至 90\n * @param {Number[]} [options.bbox] bbox规范的瓦片数据的矩形区域范围,与rectangle二选一即可。\n * @param {Number} [options.zIndex] 控制图层的叠加层次，默认按加载的顺序进行叠加，但也可以自定义叠加顺序，数字大的在上面(只对同类型图层间有效)。\n * @param {CRS} [options.crs=CRS.EPSG:3857] 瓦片数据的坐标系信息，默认为墨卡托投影\n * @param {ChinaCRS} [options.chinaCRS] 标识瓦片的国内坐标系（用于自动纠偏或加偏），自动将瓦片转为map对应的chinaCRS类型坐标系。\n *\n * @param {String} [options.proxy] 加载资源时要使用的代理服务url。\n * @param {Object} [options.templateValues] 一个对象，用于替换Url中的模板值的键/值对\n * @param {Object} [options.queryParameters] 一个对象，其中包含在检索资源时将发送的查询参数。比如：queryParameters: {'access_token': '123-435-456-000'},\n * @param {Object} [options.headers] 一个对象，将发送的其他HTTP标头。比如：headers: { 'X-My-Header': 'valueOfHeader' },\n * @param {Boolean} [options.enablePickFeatures=true] 如果为true，则 {@link UrlTemplateImageryProvider#pickFeatures} 请求 pickFeaturesUrl 并尝试解释响应中包含的功能。\n *        如果为 false{@link UrlTemplateImageryProvider#pickFeatures} 会立即返回未定义（表示没有可拾取的内容） 功能）而无需与服务器通信。如果您知道数据，则将此属性设置为false 源不支持选择功能，或者您不希望该提供程序的功能可供选择。注意 可以通过修改 {@link UriTemplateImageryProvider#enablePickFeatures}来动态覆盖 属性。\n * @param {Cesium.GetFeatureInfoFormat[]} [options.getFeatureInfoFormats] 在某处获取功能信息的格式 调用 {@link UrlTemplateImageryProvider#pickFeatures} 的特定位置。如果这 参数未指定，功能选择已禁用。\n *\n * @param {Number} [options.opacity = 1.0] 透明度，取值范围：0.0-1.0。\n * @param {Number|Function} [options.alpha=1.0] 同opacity。\n * @param {Number|Function} [options.nightAlpha=1.0] 当 enableLighting 为 true 时 ，在地球的夜晚区域的透明度，取值范围：0.0-1.0。\n * @param {Number|Function} [options.dayAlpha=1.0]  当 enableLighting 为 true 时，在地球的白天区域的透明度，取值范围：0.0-1.0。\n * @param {Number|Function} [options.brightness=1.0] 亮度\n * @param {Number|Function} [options.contrast=1.0] 对比度。 1.0使用未修改的图像颜色，小于1.0会降低对比度，而大于1.0则会提高对比度。\n * @param {Number|Function} [options.hue=0.0] 色调。 0.0 时未修改的图像颜色。\n * @param {Number|Function} [options.saturation=1.0] 饱和度。 1.0使用未修改的图像颜色，小于1.0会降低饱和度，而大于1.0则会增加饱和度。\n * @param {Number|Function} [options.gamma=1.0] 伽马校正值。 1.0使用未修改的图像颜色。\n * @param {Number} [options.maximumAnisotropy=maximum supported] 使用的最大各向异性水平 用于纹理过滤。如果未指定此参数，则支持最大各向异性 将使用WebGL堆栈。较大的值可使影像在水平方向上看起来更好 视图。\n * @param {Cesium.Rectangle} [options.cutoutRectangle] 制图矩形，用于裁剪此ImageryLayer的一部分。\n * @param {Cesium.Color} [options.colorToAlpha]  用作Alpha的颜色。\n * @param {Number} [options.colorToAlphaThreshold=0.004] 颜色到Alpha的阈值。\n * @param {Boolean} [options.hasAlphaChannel=true] 如果此图像提供者提供的图像为真 包括一个Alpha通道；否则为假。如果此属性为false，则为Alpha通道，如果 目前，将被忽略。如果此属性为true，则任何没有Alpha通道的图像都将 它们的alpha随处可见。当此属性为false时，内存使用情况 和纹理上传时间可能会减少。\n * @param {Number} [options.tileWidth=256] 图像图块的像素宽度。\n * @param {Number} [options.tileHeight=256] 图像图块的像素高度。\n * @param {Object} [options.customTags] 允许替换网址模板中的自定义关键字。该对象必须具有字符串作为键，并且必须具有值。\n *\n * @param {String|Number} [options.id = uuid()] 图层id标识\n * @param {String|Number} [options.pid = -1] 图层父级的id，一般图层管理中使用\n * @param {String} [options.name = ''] 图层名称\n * @param {Boolean} [options.show = true] 图层是否显示\n * @param {BaseClass|Boolean} [options.eventParent]  指定的事件冒泡对象，默认为map对象，false时不冒泡\n * @param {Object} [options.center] 图层自定义定位视角 {@link Map#setCameraView}\n * @param {Number} options.center.lng 经度值, 180 - 180\n * @param {Number} options.center.lat 纬度值, -90 - 90\n * @param {Number} [options.center.alt] 高度值\n * @param {Number} [options.center.heading] 方向角度值，绕垂直于地心的轴旋转角度, 0-360\n * @param {Number} [options.center.pitch] 俯仰角度值，绕纬度线旋转角度, 0-360\n * @param {Number} [options.center.roll] 翻滚角度值，绕经度线旋转角度, 0-360\n * @param {Boolean} [options.flyTo] 加载完成数据后是否自动飞行定位到数据所在的区域。\n * @export\n * @class SmImgLayer\n * @extends {BaseTileLayer}\n *\n * @see http://support.supermap.com.cn:8090/webgl/docs/Documentation/SuperMapImageryProvider.html?classFilter=SuperMapImageryProvider\n */\nexport class SmImgLayer extends BaseTileLayer {\n  // 构建ImageryProvider\n  _createImageryProvider(options) {\n    return createImageryProvider(options)\n  }\n\n  // 添加时\n  _addedHook() {\n    super._addedHook()\n\n    if (Cesium.defined(this.options.transparentBackColor)) {\n      this._imageryLayer.transparentBackColor = mars3d.Util.getCesiumColor(this.options.transparentBackColor)\n      this._imageryLayer.transparentBackColorTolerance = this.options.transparentBackColorTolerance // 去黑边\n    }\n  }\n}\nfunction createImageryProvider(options) {\n  options = mars3d.LayerUtil.converOptions(options)\n\n  if (options.url instanceof Cesium.Resource) {\n    options.url = options.url.url\n  }\n\n  if (Cesium.defined(options.transparentBackColor)) {\n    delete options.transparentBackColor\n    delete options.transparentBackColorTolerance\n  }\n  return new Cesium.SuperMapImageryProvider(options)\n}\n\n/**\n * 创建用于图层的 ImageryProvider对象\n *\n * @param {Object} options Provider参数，同图层构造参数。\n * @return {Cesium.ImageryProvider} ImageryProvider类\n * @function\n */\nSmImgLayer.createImageryProvider = createImageryProvider\n\nmars3d.layer.SmImgLayer = SmImgLayer\n\n// 注册下\nconst layerType = \"supermap_img\"\nmars3d.LayerUtil.register(layerType, SmImgLayer)\nmars3d.LayerUtil.registerImageryProvider(layerType, createImageryProvider)\n","import * as mars3d from \"mars3d\"\nconst Cesium = mars3d.Cesium\n\nconst BaseLayer = mars3d.layer.BaseLayer\n\n/**\n * 超图MVT矢量瓦片图层,\n * 【需要引入  mars3d-supermap 插件库】\n *\n * @param {Object} [options] 参数对象，包括以下：\n * @param {String} options.url 适用于通过SuperMap桌面软件生成mvt数据,经iServer发布为rest风格的地图服务，只需提供服务地址。\n * @param {String} options.layer 图层名称,适用于第三方发布的WMTS服务。\n * @param {Number} [options.canvasWidth] 用来绘制矢量的纹理边长。默认是512，越大越精细，越小性能越高。\n * @param {String} [options.format='mvt'] 适用于第三方发布的WMTS服务。\n * @param {Object} [options.mapboxStyle] 使用的mapBox风格。\n * @param {Object} [options.多个参数] 参考[supermap官方API]{@link http://support.supermap.com.cn:8090/webgl/docs/Documentation/Scene.html#addVectorTilesLayer}\n *\n *\n * @param {String|Number} [options.id = uuid()] 图层id标识\n * @param {String|Number} [options.pid = -1] 图层父级的id，一般图层管理中使用\n * @param {String} [options.name = ''] 图层名称\n * @param {Boolean} [options.show = true] 图层是否显示\n * @param {BaseClass|Boolean} [options.eventParent]  指定的事件冒泡对象，默认为map对象，false时不冒泡\n * @param {Object} [options.center] 图层自定义定位视角 {@link Map#setCameraView}\n * @param {Number} options.center.lng 经度值, 180 - 180\n * @param {Number} options.center.lat 纬度值, -90 - 90\n * @param {Number} [options.center.alt] 高度值\n * @param {Number} [options.center.heading] 方向角度值，绕垂直于地心的轴旋转角度, 0-360\n * @param {Number} [options.center.pitch] 俯仰角度值，绕纬度线旋转角度, 0-360\n * @param {Number} [options.center.roll] 翻滚角度值，绕经度线旋转角度, 0-360\n * @param {Boolean} [options.flyTo] 加载完成数据后是否自动飞行定位到数据所在的区域。\n * @export\n * @class SmMvtLayer\n * @extends {BaseLayer}\n */\nexport class SmMvtLayer extends BaseLayer {\n  /**\n   * 对应的supermap图层 Cesium.VectorTilesLayer\n   * @type {*}\n   * @readonly\n   * @see http://support.supermap.com.cn:8090/webgl/docs/Documentation/VectorTilesLayer.html\n   */\n  get layer() {\n    return this._mvtLayer\n  }\n\n  /**\n   * 对象添加到地图前创建一些对象的钩子方法，\n   * 只会调用一次\n   * @return {void}  无\n   * @private\n   */\n  _mountedHook() {\n    // options参考API文档：http://support.supermap.com.cn:8090/webgl/docs/Documentation/Scene.html\n    this._mvtLayer = this._map.scene.addVectorTilesMap(this.options)\n    this._mvtLayer.readyPromise.then(function (data) {\n      // setPaintProperty(layerId, name, value, options)\n      // for(var layerId in that.options.style){\n      //     that._mvtLayer.setPaintProperty(layerId, \"fill-color\", \"rgba(255,0,0,0.8)\");\n      // }\n    })\n\n    const scene = this._map.scene\n    const handler = new Cesium.ScreenSpaceEventHandler(scene.canvas)\n    handler.setInputAction((event) => {\n      if (!this.show) {\n        return\n      }\n\n      const position = mars3d.PointUtil.getCurrentMousePosition(scene, event.position)\n\n      // 查询出相交图层的feature\n      const features = this._mvtLayer.queryRenderedFeatures([position], {\n        // layers: [selectLayer.id]\n      })\n\n      // eslint-disable-next-line array-callback-return\n      const filter = features.reduce((memo, result) => {\n        const attr = result.feature.properties\n        if (!attr) {\n          // eslint-disable-next-line array-callback-return\n          return\n        }\n\n        const content = mars3d.Util.getPopupForConfig(this.options, attr)\n        const item = {\n          data: attr,\n          event: event\n        }\n        this._map.openPopup(position, content, item)\n      })\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\n\n    this.handler = handler\n  }\n\n  /**\n   * 对象添加到地图上的创建钩子方法，\n   * 每次add时都会调用\n   * @return {void}  无\n   * @private\n   */\n  _addedHook() {\n    this._mvtLayer.show = true\n    // this._mvtLayer.refresh();\n  }\n\n  /**\n   * 对象从地图上移除的创建钩子方法，\n   * 每次remove时都会调用\n   * @return {void}  无\n   * @private\n   */\n  _removedHook() {\n    if (this._mvtLayer) {\n      this._mvtLayer.show = false\n    }\n  }\n\n  /**\n   * 设置透明度\n   * @param {Number} value 透明度\n   * @return {void}  无\n   */\n  setOpacity(value) {\n    if (this._mvtLayer) {\n      this._mvtLayer.alpha = parseFloat(value)\n    }\n  }\n\n  // 定位至数据区域\n  flyTo(options = {}) {\n    if (this.options.center) {\n      this._map.setCameraView(this.options.center, options)\n    } else if (this.options.extent) {\n      this._map.flyToExtent(this.options.extent, options)\n    } else if (this._mvtLayer) {\n      this._map.camera.flyTo({\n        ...options,\n        destination: this._mvtLayer.rectangle\n      })\n    }\n  }\n}\nmars3d.layer.SmMvtLayer = SmMvtLayer\n\n// 注册下\nmars3d.LayerUtil.register(\"supermap_mvt\", SmMvtLayer)\n"],"names":["Cesium","mars3d","BaseLayer"],"mappings":"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"}