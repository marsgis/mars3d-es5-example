/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.7.12
 * 编译日期：2024-05-06 21:30:43
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
	typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
	(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';var _0x261057=_0x1de7;(function(_0x575673,_0x57c72d){var _0x27b933={_0x23f2bb:0x170,_0x33e9e0:0x127,_0x1c989d:0x114,_0x2c1b66:0x167,_0x2b9067:0x173,_0x178d33:0x119,_0x1b1ec2:0x16d,_0x1b6ff3:0xe6,_0x5a7577:0x122},_0x521cb3=_0x1de7,_0xd354b2=_0x575673();while(!![]){try{var _0x76924a=-parseInt(_0x521cb3(_0x27b933._0x23f2bb))/0x1*(-parseInt(_0x521cb3(0x15c))/0x2)+-parseInt(_0x521cb3(_0x27b933._0x33e9e0))/0x3*(-parseInt(_0x521cb3(_0x27b933._0x1c989d))/0x4)+parseInt(_0x521cb3(_0x27b933._0x2c1b66))/0x5*(-parseInt(_0x521cb3(0xe2))/0x6)+-parseInt(_0x521cb3(_0x27b933._0x2b9067))/0x7+-parseInt(_0x521cb3(_0x27b933._0x178d33))/0x8+parseInt(_0x521cb3(_0x27b933._0x1b1ec2))/0x9*(-parseInt(_0x521cb3(0x165))/0xa)+parseInt(_0x521cb3(_0x27b933._0x1b6ff3))/0xb*(parseInt(_0x521cb3(_0x27b933._0x5a7577))/0xc);if(_0x76924a===_0x57c72d)break;else _0xd354b2['push'](_0xd354b2['shift']());}catch(_0x484658){_0xd354b2['push'](_0xd354b2['shift']());}}}(_0x46a4,0x579d4));function _interopNamespace(_0x3c2b61){var _0x5c7cc3={_0xca8b7f:0x11c},_0x288d7d=_0x1de7;if(_0x3c2b61&&_0x3c2b61['__esModule'])return _0x3c2b61;var _0x526b4a=Object['create'](null);return _0x3c2b61&&Object[_0x288d7d(0x107)](_0x3c2b61)['forEach'](function(_0xb2eaf9){var _0x20705a=_0x288d7d;if(_0xb2eaf9!=='default'){var _0x5bbe2f=Object[_0x20705a(_0x5c7cc3._0xca8b7f)](_0x3c2b61,_0xb2eaf9);Object['defineProperty'](_0x526b4a,_0xb2eaf9,_0x5bbe2f['get']?_0x5bbe2f:{'enumerable':!![],'get':function(){return _0x3c2b61[_0xb2eaf9];}});}}),_0x526b4a['default']=_0x3c2b61,_0x526b4a;}function _mergeNamespaces(_0x365c40,_0x231906){var _0x47bdd5={_0x435e3f:0xf1};return _0x231906['forEach'](function(_0x33f046){var _0x5ef9a9={_0x4fe0ba:0x11c},_0x3c739b=_0x1de7;_0x33f046&&typeof _0x33f046!==_0x3c739b(0x154)&&!Array[_0x3c739b(_0x47bdd5._0x435e3f)](_0x33f046)&&Object['keys'](_0x33f046)[_0x3c739b(0x174)](function(_0x517976){var _0x4b7b37=_0x3c739b;if(_0x517976!=='default'&&!(_0x517976 in _0x365c40)){var _0x4c9a2f=Object[_0x4b7b37(_0x5ef9a9._0x4fe0ba)](_0x33f046,_0x517976);Object['defineProperty'](_0x365c40,_0x517976,_0x4c9a2f['get']?_0x4c9a2f:{'enumerable':!![],'get':function(){return _0x33f046[_0x517976];}});}});}),_0x365c40;}var mars3d__namespace=_interopNamespace(mars3d),commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!==_0x261057(0xf9)?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{},heatmap$1={'exports':{}};(function(_0x469038){(function(_0x443675,_0x4fce9d,_0x23d0c4){_0x469038['exports']?_0x469038['exports']=_0x23d0c4():_0x4fce9d[_0x443675]=_0x23d0c4();}('h337',commonjsGlobal,function(){var _0x437251={_0x1c7b62:0x120},_0x4eceff={_0x5b6ec3:0x164},_0x5a0bd4={_0x3771df:0x148},_0xdd0017={_0x1731c3:0x120},_0x54a7e0={_0x279a0f:0x14b,_0x47a803:0x138},_0x390815={_0x4712a5:0x120,_0x2f06b5:0x172,_0x13fb5c:0x11f},_0x2fd2c2={_0x485c9d:0x12f,_0x319da3:0x104},_0x396063={_0x53b8f7:0x124,_0x35731a:0x160,_0x410147:0x160},_0x42a2ef={_0x57a868:0x133,_0x4b7f13:0x15a,_0x1c31d3:0x15f},_0x3fd2f2={_0x2a3a98:0xe9},_0x4456a6={_0x45ee38:0x140},_0x12755c={_0x5dc8e0:0x146,_0x245856:0x176,_0x3d003d:0x144,_0xea5133:0xed},_0x536e18={_0x3a3c1a:0x149,_0x30a92e:0x139},_0x3133bc={_0x14830b:0x15d},_0x2b0a33={_0x5650f3:0x14b},_0x16c0e={_0x109537:0xf2},_0x46aa3a={_0xe0c5f5:0xf2,_0x543a43:0x16e},_0x6a4713=_0x1de7,_0x5469c0={'defaultRadius':0x28,'defaultRenderer':'canvas2d','defaultGradient':{0.25:_0x6a4713(0x126),0.55:'rgb(0,255,0)',0.85:'yellow',0x1:'rgb(255,0,0)'},'defaultMaxOpacity':0x1,'defaultMinOpacity':0x0,'defaultBlur':0.85,'defaultXField':'x','defaultYField':'y','defaultValueField':'value','plugins':{}},_0x428338=function _0x5a9b5f(){var _0x18533f={_0x481fd4:0x166,_0x1d1b26:0x10d,_0x131f25:0xf2},_0x4d20c6={_0x46c1f2:0x104},_0x45bd03={_0x3bb6d0:0xeb},_0x5b51a7=_0x6a4713,_0x3fb51a=function _0x1eec5d(_0x37351c){var _0x523c35=_0x1de7;this['_coordinator']={},this['_data']=[],this['_radi']=[],this['_min']=0xa,this['_max']=0x1,this['_xField']=_0x37351c['xField']||_0x37351c['defaultXField'],this[_0x523c35(0x12a)]=_0x37351c['yField']||_0x37351c['defaultYField'],this[_0x523c35(_0x45bd03._0x3bb6d0)]=_0x37351c[_0x523c35(0x134)]||_0x37351c['defaultValueField'],_0x37351c['radius']&&(this['_cfgRadius']=_0x37351c['radius']);},_0x1ee61c=_0x5469c0[_0x5b51a7(_0x3133bc._0x14830b)];return _0x3fb51a['prototype']={'_organiseData':function(_0x5c4a60,_0x34bd05){var _0x4dc91e=_0x5b51a7,_0x524811=_0x5c4a60[this['_xField']],_0x1d2cd7=_0x5c4a60[this['_yField']],_0x10ea7b=this['_radi'],_0xa8d5ba=this['_data'],_0xc409de=this[_0x4dc91e(_0x46aa3a._0xe0c5f5)],_0x1cc704=this['_min'],_0x367774=_0x5c4a60[this['_valueField']]||0x1,_0x1537b7=_0x5c4a60[_0x4dc91e(_0x46aa3a._0x543a43)]||this['_cfgRadius']||_0x1ee61c;!_0xa8d5ba[_0x524811]&&(_0xa8d5ba[_0x524811]=[],_0x10ea7b[_0x524811]=[]);!_0xa8d5ba[_0x524811][_0x1d2cd7]?(_0xa8d5ba[_0x524811][_0x1d2cd7]=_0x367774,_0x10ea7b[_0x524811][_0x1d2cd7]=_0x1537b7):_0xa8d5ba[_0x524811][_0x1d2cd7]+=_0x367774;var _0x1d5d5b=_0xa8d5ba[_0x524811][_0x1d2cd7];if(_0x1d5d5b>_0xc409de)return!_0x34bd05?this[_0x4dc91e(_0x46aa3a._0xe0c5f5)]=_0x1d5d5b:this['setDataMax'](_0x1d5d5b),![];else return _0x1d5d5b<_0x1cc704?(!_0x34bd05?this['_min']=_0x1d5d5b:this[_0x4dc91e(0x136)](_0x1d5d5b),![]):{'x':_0x524811,'y':_0x1d2cd7,'value':_0x367774,'radius':_0x1537b7,'min':_0x1cc704,'max':_0xc409de};},'_unOrganizeData':function(){var _0x44f0c2=_0x5b51a7,_0x44098c=[],_0x5a9d4b=this['_data'],_0x30eee0=this['_radi'];for(var _0x1a7786 in _0x5a9d4b){for(var _0x597fc7 in _0x5a9d4b[_0x1a7786]){_0x44098c['push']({'x':_0x1a7786,'y':_0x597fc7,'radius':_0x30eee0[_0x1a7786][_0x597fc7],'value':_0x5a9d4b[_0x1a7786][_0x597fc7]});}}return{'min':this[_0x44f0c2(_0x4d20c6._0x46c1f2)],'max':this['_max'],'data':_0x44098c};},'_onExtremaChange':function(){var _0x276faf=_0x5b51a7;this['_coordinator']['emit']('extremachange',{'min':this[_0x276faf(0x104)],'max':this[_0x276faf(_0x16c0e._0x109537)]});},'addData':function(){var _0x4110e7=_0x5b51a7;if(arguments[0x0][_0x4110e7(_0x18533f._0x481fd4)]>0x0){var _0x57e846=arguments[0x0],_0x11e720=_0x57e846['length'];while(_0x11e720--){this[_0x4110e7(0xe4)]['call'](this,_0x57e846[_0x11e720]);}}else{var _0x578b90=this['_organiseData'](arguments[0x0],!![]);_0x578b90&&(this['_data']['length']===0x0&&(this['_min']=this['_max']=_0x578b90['value']),this['_coordinator'][_0x4110e7(_0x18533f._0x1d1b26)]('renderpartial',{'min':this[_0x4110e7(0x104)],'max':this[_0x4110e7(_0x18533f._0x131f25)],'data':[_0x578b90]}));}return this;},'setData':function(_0x4cfb72){var _0x11c24c=_0x5b51a7,_0xb38024=_0x4cfb72['data'],_0xed4626=_0xb38024[_0x11c24c(0x166)];this['_data']=[],this['_radi']=[];for(var _0x39de89=0x0;_0x39de89<_0xed4626;_0x39de89++){this['_organiseData'](_0xb38024[_0x39de89],![]);}return this['_max']=_0x4cfb72['max'],this[_0x11c24c(0x104)]=_0x4cfb72['min']||0x0,this['_onExtremaChange'](),this['_coordinator'][_0x11c24c(0x10d)]('renderall',this[_0x11c24c(0x106)]()),this;},'removeData':function(){},'setDataMax':function(_0x186179){var _0x4b9faf=_0x5b51a7;return this['_max']=_0x186179,this['_onExtremaChange'](),this[_0x4b9faf(_0x2b0a33._0x5650f3)]['emit']('renderall',this['_getInternalData']()),this;},'setDataMin':function(_0x7318dc){return this['_min']=_0x7318dc,this['_onExtremaChange'](),this['_coordinator']['emit']('renderall',this['_getInternalData']()),this;},'setCoordinator':function(_0x579507){var _0x89a806=_0x5b51a7;this[_0x89a806(0x14b)]=_0x579507;},'_getInternalData':function(){return{'max':this['_max'],'min':this['_min'],'data':this['_data'],'radi':this['_radi']};},'getData':function(){return this['_unOrganizeData']();}},_0x3fb51a;}(),_0x271f09=function _0x43256a(){var _0x562923={_0x409b67:0x102,_0x45db50:0x105},_0x19327a={_0x7cebba:0x145},_0x1b4fd6={_0x49523e:0x144},_0x18bb9e={_0x127ea1:0x115},_0x28e869={_0x265e5c:0x146,_0x34d55c:0x10a},_0x33d1e0=function(_0x337ed2){var _0x32c84d=_0x1de7,_0x683a94=_0x337ed2['gradient']||_0x337ed2['defaultGradient'],_0x46b9c5=document[_0x32c84d(0xec)]('canvas'),_0x404622=_0x46b9c5[_0x32c84d(0x11e)]('2d',{'willReadFrequently':!![]});_0x46b9c5['width']=0x100,_0x46b9c5['height']=0x1;var _0x38eec9=_0x404622[_0x32c84d(_0x536e18._0x3a3c1a)](0x0,0x0,0x100,0x1);for(var _0xdc7f54 in _0x683a94){_0x38eec9['addColorStop'](_0xdc7f54,_0x683a94[_0xdc7f54]);}return _0x404622[_0x32c84d(_0x536e18._0x30a92e)]=_0x38eec9,_0x404622['fillRect'](0x0,0x0,0x100,0x1),_0x404622['getImageData'](0x0,0x0,0x100,0x1)[_0x32c84d(0x115)];},_0x100bcd=function(_0x46835c,_0x315c37){var _0x23bf86=_0x1de7,_0x3d64ef=document['createElement'](_0x23bf86(_0x28e869._0x265e5c)),_0x346c2b=_0x3d64ef['getContext']('2d',{'willReadFrequently':!![]}),_0xd08494=_0x46835c,_0x4c559a=_0x46835c;_0x3d64ef['width']=_0x3d64ef['height']=_0x46835c*0x2;if(_0x315c37==0x1)_0x346c2b['beginPath'](),_0x346c2b[_0x23bf86(_0x28e869._0x34d55c)](_0xd08494,_0x4c559a,_0x46835c,0x0,0x2*Math['PI'],![]),_0x346c2b['fillStyle']='rgba(0,0,0,1)',_0x346c2b['fill']();else{var _0x4ec417=_0x346c2b['createRadialGradient'](_0xd08494,_0x4c559a,_0x46835c*_0x315c37,_0xd08494,_0x4c559a,_0x46835c);_0x4ec417['addColorStop'](0x0,'rgba(0,0,0,1)'),_0x4ec417['addColorStop'](0x1,'rgba(0,0,0,0)'),_0x346c2b['fillStyle']=_0x4ec417,_0x346c2b['fillRect'](0x0,0x0,0x2*_0x46835c,0x2*_0x46835c);}return _0x3d64ef;},_0x5b9cf7=function(_0x2f45be){var _0x379e7a=_0x1de7,_0x5deef5=[],_0x3cd8a5=_0x2f45be['min'],_0x14feb9=_0x2f45be['max'],_0xef6c90=_0x2f45be['radi'],_0x2f45be=_0x2f45be['data'],_0x2d2f98=Object[_0x379e7a(0x107)](_0x2f45be),_0x4ee741=_0x2d2f98['length'];while(_0x4ee741--){var _0x7a46f4=_0x2d2f98[_0x4ee741],_0x2d25cd=Object['keys'](_0x2f45be[_0x7a46f4]),_0x5dcb81=_0x2d25cd['length'];while(_0x5dcb81--){var _0x5d5846=_0x2d25cd[_0x5dcb81],_0x37628b=_0x2f45be[_0x7a46f4][_0x5d5846],_0x1892f7=_0xef6c90[_0x7a46f4][_0x5d5846];_0x5deef5['push']({'x':_0x7a46f4,'y':_0x5d5846,'value':_0x37628b,'radius':_0x1892f7});}}return{'min':_0x3cd8a5,'max':_0x14feb9,'data':_0x5deef5};};function _0x33412f(_0x59028e){var _0x2cf7dc=_0x1de7,_0xfe0786=_0x59028e['container'],_0xa44064=this['shadowCanvas']=document['createElement']('canvas'),_0x5d23b6=this['canvas']=_0x59028e['canvas']||document['createElement'](_0x2cf7dc(_0x12755c._0x5dc8e0));this[_0x2cf7dc(0x160)]=[0x2710,0x2710,0x0,0x0];var _0xae6094=getComputedStyle(_0x59028e['container'])||{};_0x5d23b6[_0x2cf7dc(_0x12755c._0x245856)]='heatmap-canvas',this['_width']=_0x5d23b6[_0x2cf7dc(0x144)]=_0xa44064['width']=_0x59028e['width']||+_0xae6094[_0x2cf7dc(_0x12755c._0x3d003d)]['replace'](/px/,''),this[_0x2cf7dc(0x168)]=_0x5d23b6['height']=_0xa44064['height']=_0x59028e['height']||+_0xae6094[_0x2cf7dc(_0x12755c._0xea5133)]['replace'](/px/,''),this['shadowCtx']=_0xa44064['getContext']('2d',{'willReadFrequently':!![]}),this['ctx']=_0x5d23b6['getContext']('2d',{'willReadFrequently':!![]}),_0x5d23b6['style']['cssText']=_0xa44064['style']['cssText']='position:absolute;left:0;top:0;',_0xfe0786['style'][_0x2cf7dc(0x16b)]='relative',_0xfe0786['appendChild'](_0x5d23b6),this['_palette']=_0x33d1e0(_0x59028e),this['_templates']={},this['_setStyles'](_0x59028e);}return _0x33412f['prototype']={'renderPartial':function(_0x41df2e){var _0x38cfc2=_0x1de7;_0x41df2e[_0x38cfc2(_0x18bb9e._0x127ea1)]['length']>0x0&&(this['_drawAlpha'](_0x41df2e),this['_colorize']());},'renderAll':function(_0x23e4fa){var _0x3a6b55=_0x1de7;this['_clear'](),_0x23e4fa[_0x3a6b55(0x115)]['length']>0x0&&(this['_drawAlpha'](_0x5b9cf7(_0x23e4fa)),this[_0x3a6b55(_0x4456a6._0x45ee38)]());},'_updateGradient':function(_0x3e6d24){this['_palette']=_0x33d1e0(_0x3e6d24);},'updateConfig':function(_0x4b1016){var _0x2a970a=_0x1de7;_0x4b1016['gradient']&&this['_updateGradient'](_0x4b1016),this[_0x2a970a(_0x3fd2f2._0x2a3a98)](_0x4b1016);},'setDimensions':function(_0x45f06b,_0x4b2d38){var _0x39133b=_0x1de7;this['_width']=_0x45f06b,this['_height']=_0x4b2d38,this[_0x39133b(0x146)][_0x39133b(_0x1b4fd6._0x49523e)]=this[_0x39133b(0x15a)]['width']=_0x45f06b,this[_0x39133b(0x146)]['height']=this['shadowCanvas']['height']=_0x4b2d38;},'_clear':function(){var _0x30a38d=_0x1de7;this['shadowCtx']['clearRect'](0x0,0x0,this[_0x30a38d(_0x19327a._0x7cebba)],this['_height']),this[_0x30a38d(0x108)][_0x30a38d(0x143)](0x0,0x0,this['_width'],this[_0x30a38d(0x168)]);},'_setStyles':function(_0x57f93f){var _0x457b24=_0x1de7;this['_blur']=_0x57f93f['blur']==0x0?0x0:_0x57f93f[_0x457b24(_0x42a2ef._0x57a868)]||_0x57f93f['defaultBlur'],_0x57f93f['backgroundColor']&&(this[_0x457b24(0x146)]['style']['backgroundColor']=_0x57f93f['backgroundColor']),this['_width']=this['canvas']['width']=this[_0x457b24(_0x42a2ef._0x4b7f13)]['width']=_0x57f93f['width']||this['_width'],this['_height']=this['canvas']['height']=this[_0x457b24(_0x42a2ef._0x4b7f13)][_0x457b24(0xed)]=_0x57f93f[_0x457b24(0xed)]||this['_height'],this[_0x457b24(_0x42a2ef._0x1c31d3)]=(_0x57f93f['opacity']||0x0)*0xff,this['_maxOpacity']=(_0x57f93f['maxOpacity']||_0x57f93f[_0x457b24(0x156)])*0xff,this[_0x457b24(0x102)]=(_0x57f93f['minOpacity']||_0x57f93f['defaultMinOpacity'])*0xff,this['_useGradientOpacity']=!!_0x57f93f['useGradientOpacity'];},'_drawAlpha':function(_0x5e39bf){var _0x50772a=_0x1de7,_0x2d75ab=this['_min']=_0x5e39bf[_0x50772a(_0x396063._0x53b8f7)],_0x10802c=this['_max']=_0x5e39bf['max'],_0x5e39bf=_0x5e39bf[_0x50772a(0x115)]||[],_0x306009=_0x5e39bf['length'],_0x5cd84c=0x1-this[_0x50772a(0xf8)];while(_0x306009--){var _0x339efc=_0x5e39bf[_0x306009],_0xc1c6d4=_0x339efc['x'],_0x526634=_0x339efc['y'],_0x4f9210=_0x339efc['radius'],_0x1331ba=Math['min'](_0x339efc['value'],_0x10802c),_0x504a87=_0xc1c6d4-_0x4f9210,_0x33b5ee=_0x526634-_0x4f9210,_0x448c93=this['shadowCtx'],_0x1567aa;!this['_templates'][_0x4f9210]?this['_templates'][_0x4f9210]=_0x1567aa=_0x100bcd(_0x4f9210,_0x5cd84c):_0x1567aa=this['_templates'][_0x4f9210];var _0x5db7de=(_0x1331ba-_0x2d75ab)/(_0x10802c-_0x2d75ab);_0x448c93['globalAlpha']=_0x5db7de<0.01?0.01:_0x5db7de,_0x448c93['drawImage'](_0x1567aa,_0x504a87,_0x33b5ee),_0x504a87<this['_renderBoundaries'][0x0]&&(this['_renderBoundaries'][0x0]=_0x504a87),_0x33b5ee<this[_0x50772a(_0x396063._0x35731a)][0x1]&&(this[_0x50772a(_0x396063._0x410147)][0x1]=_0x33b5ee),_0x504a87+0x2*_0x4f9210>this['_renderBoundaries'][0x2]&&(this['_renderBoundaries'][0x2]=_0x504a87+0x2*_0x4f9210),_0x33b5ee+0x2*_0x4f9210>this['_renderBoundaries'][0x3]&&(this['_renderBoundaries'][0x3]=_0x33b5ee+0x2*_0x4f9210);}},'_colorize':function(){var _0x155295=_0x1de7,_0x41c503=this['_renderBoundaries'][0x0],_0x19cbc9=this['_renderBoundaries'][0x1],_0xa3e92b=this['_renderBoundaries'][0x2]-_0x41c503,_0x56475b=this['_renderBoundaries'][0x3]-_0x19cbc9,_0x14aead=this['_width'],_0x1a4e59=this['_height'],_0x270a60=this['_opacity'],_0x30a5a5=this['_maxOpacity'],_0xe4438f=this[_0x155295(_0x562923._0x409b67)],_0xdc69bb=this[_0x155295(_0x562923._0x45db50)];_0x41c503<0x0&&(_0x41c503=0x0);_0x19cbc9<0x0&&(_0x19cbc9=0x0);_0x41c503+_0xa3e92b>_0x14aead&&(_0xa3e92b=_0x14aead-_0x41c503);_0x19cbc9+_0x56475b>_0x1a4e59&&(_0x56475b=_0x1a4e59-_0x19cbc9);var _0x17d87e=this['shadowCtx']['getImageData'](_0x41c503,_0x19cbc9,_0xa3e92b,_0x56475b),_0x1487ee=_0x17d87e[_0x155295(0x115)],_0x34748d=_0x1487ee[_0x155295(0x166)],_0x5bf818=this['_palette'];for(var _0x4e2f56=0x3;_0x4e2f56<_0x34748d;_0x4e2f56+=0x4){var _0x309c1a=_0x1487ee[_0x4e2f56],_0x130463=_0x309c1a*0x4;if(!_0x130463)continue;var _0x47f6b8;_0x270a60>0x0?_0x47f6b8=_0x270a60:_0x309c1a<_0x30a5a5?_0x309c1a<_0xe4438f?_0x47f6b8=_0xe4438f:_0x47f6b8=_0x309c1a:_0x47f6b8=_0x30a5a5,_0x1487ee[_0x4e2f56-0x3]=_0x5bf818[_0x130463],_0x1487ee[_0x4e2f56-0x2]=_0x5bf818[_0x130463+0x1],_0x1487ee[_0x4e2f56-0x1]=_0x5bf818[_0x130463+0x2],_0x1487ee[_0x4e2f56]=_0xdc69bb?_0x5bf818[_0x130463+0x3]:_0x47f6b8;}this['ctx']['putImageData'](_0x17d87e,_0x41c503,_0x19cbc9),this['_renderBoundaries']=[0x3e8,0x3e8,0x0,0x0];},'getValueAt':function(_0x5dcebf){var _0xfca3e=_0x1de7,_0x3b13c9,_0x1b966c=this[_0xfca3e(_0x2fd2c2._0x485c9d)],_0x4d7c68=_0x1b966c['getImageData'](_0x5dcebf['x'],_0x5dcebf['y'],0x1,0x1),_0x58d4b3=_0x4d7c68['data'][0x3],_0x18c63b=this[_0xfca3e(0xf2)],_0x1f3a2a=this[_0xfca3e(_0x2fd2c2._0x319da3)];return _0x3b13c9=Math['abs'](_0x18c63b-_0x1f3a2a)*(_0x58d4b3/0xff)>>0x0,_0x3b13c9;},'getDataURL':function(){return this['canvas']['toDataURL']();}},_0x33412f;}(),_0x236096=function _0x26aeef(){var _0x4d315b=![];return _0x5469c0['defaultRenderer']==='canvas2d'&&(_0x4d315b=_0x271f09),_0x4d315b;}(),_0xd0b0ed={'merge':function(){var _0x475045={},_0x5e208a=arguments['length'];for(var _0x4c8f87=0x0;_0x4c8f87<_0x5e208a;_0x4c8f87++){var _0x285378=arguments[_0x4c8f87];for(var _0x462b5a in _0x285378){_0x475045[_0x462b5a]=_0x285378[_0x462b5a];}}return _0x475045;}},_0x1ba5dd=function _0x3936b5(){var _0xf71928={_0x369777:0x13f},_0x5bf9a0={_0x395f5a:0x14d,_0x28bc98:0x164,_0x5a711d:0x14b,_0x57a35:0x106},_0x1f0aef={_0x5abf60:0x120,_0x570bec:0x132},_0x2b274e=function _0x30df44(){function _0x3dd8ca(){this['cStore']={};}return _0x3dd8ca['prototype']={'on':function(_0x2faed8,_0x51148e,_0x27eda2){var _0x454247=this['cStore'];!_0x454247[_0x2faed8]&&(_0x454247[_0x2faed8]=[]),_0x454247[_0x2faed8]['push'](function(_0xfa80e6){return _0x51148e['call'](_0x27eda2,_0xfa80e6);});},'emit':function(_0x3586cf,_0x453869){var _0x506c88=this['cStore'];if(_0x506c88[_0x3586cf]){var _0x32826d=_0x506c88[_0x3586cf]['length'];for(var _0x1a368e=0x0;_0x1a368e<_0x32826d;_0x1a368e++){var _0x3d3970=_0x506c88[_0x3586cf][_0x1a368e];_0x3d3970(_0x453869);}}}},_0x3dd8ca;}(),_0x4dac47=function(_0x1e1913){var _0x33dc01=_0x1de7,_0x1809f9=_0x1e1913['_renderer'],_0x217c4c=_0x1e1913['_coordinator'],_0x16f397=_0x1e1913[_0x33dc01(_0x390815._0x4712a5)];_0x217c4c['on'](_0x33dc01(0x152),_0x1809f9['renderPartial'],_0x1809f9),_0x217c4c['on'](_0x33dc01(_0x390815._0x2f06b5),_0x1809f9[_0x33dc01(_0x390815._0x13fb5c)],_0x1809f9),_0x217c4c['on'](_0x33dc01(0x13c),function(_0x544b49){var _0xb928cc=_0x33dc01;_0x1e1913['_config']['onExtremaChange']&&_0x1e1913['_config']['onExtremaChange']({'min':_0x544b49['min'],'max':_0x544b49['max'],'gradient':_0x1e1913['_config']['gradient']||_0x1e1913[_0xb928cc(0x14d)][_0xb928cc(0x100)]});}),_0x16f397['setCoordinator'](_0x217c4c);};function _0x5516d7(){var _0x2eead1=_0x1de7,_0x5c845c=this[_0x2eead1(0x14d)]=_0xd0b0ed['merge'](_0x5469c0,arguments[0x0]||{});this[_0x2eead1(_0x54a7e0._0x279a0f)]=new _0x2b274e();if(_0x5c845c[_0x2eead1(_0x54a7e0._0x47a803)]){var _0x5192c=_0x5c845c['plugin'];if(!_0x5469c0['plugins'][_0x5192c])throw new Error('Plugin\x20\x27'+_0x5192c+'\x27\x20not\x20found.\x20Maybe\x20it\x20was\x20not\x20registered.');else{var _0x5bf475=_0x5469c0[_0x2eead1(0x116)][_0x5192c];this['_renderer']=new _0x5bf475[(_0x2eead1(0xf7))](_0x5c845c),this[_0x2eead1(0x120)]=new _0x5bf475['store'](_0x5c845c);}}else this['_renderer']=new _0x236096(_0x5c845c),this['_store']=new _0x428338(_0x5c845c);_0x4dac47(this);}return _0x5516d7['prototype']={'addData':function(){var _0x22f865=_0x1de7;return this['_store'][_0x22f865(0xe4)]['apply'](this['_store'],arguments),this;},'removeData':function(){var _0x2250f8=_0x1de7;return this[_0x2250f8(_0x1f0aef._0x5abf60)]['removeData']&&this['_store'][_0x2250f8(_0x1f0aef._0x570bec)]['apply'](this['_store'],arguments),this;},'setData':function(){var _0x39685b=_0x1de7;return this[_0x39685b(_0xdd0017._0x1731c3)]['setData']['apply'](this['_store'],arguments),this;},'setDataMax':function(){var _0x35001a=_0x1de7;return this['_store']['setDataMax'][_0x35001a(_0x5a0bd4._0x3771df)](this['_store'],arguments),this;},'setDataMin':function(){var _0x63d7bd=_0x1de7;return this['_store']['setDataMin'][_0x63d7bd(0x148)](this['_store'],arguments),this;},'configure':function(_0x2b321b){var _0x49fc5e=_0x1de7;return this[_0x49fc5e(0x14d)]=_0xd0b0ed[_0x49fc5e(0x175)](this[_0x49fc5e(_0x5bf9a0._0x395f5a)],_0x2b321b),this[_0x49fc5e(_0x5bf9a0._0x28bc98)]['updateConfig'](this['_config']),this[_0x49fc5e(_0x5bf9a0._0x5a711d)]['emit']('renderall',this['_store'][_0x49fc5e(_0x5bf9a0._0x57a35)]()),this;},'repaint':function(){var _0x3bf086=_0x1de7;return this['_coordinator']['emit'](_0x3bf086(0x172),this['_store']['_getInternalData']()),this;},'getData':function(){var _0x13a26a=_0x1de7;return this['_store'][_0x13a26a(_0xf71928._0x369777)]();},'getDataURL':function(){var _0x2543d4=_0x1de7;return this[_0x2543d4(_0x4eceff._0x5b6ec3)][_0x2543d4(0x14f)]();},'getValueAt':function(_0x1b660b){var _0x3cddcc=_0x1de7;if(this[_0x3cddcc(_0x437251._0x1c7b62)]['getValueAt'])return this[_0x3cddcc(_0x437251._0x1c7b62)]['getValueAt'](_0x1b660b);else return this['_renderer']['getValueAt']?this['_renderer']['getValueAt'](_0x1b660b):null;}},_0x5516d7;}(),_0x5deaa3={'create':function(_0xc1a682){return new _0x1ba5dd(_0xc1a682);},'register':function(_0xe54316,_0x590150){var _0x9cf16b=_0x6a4713;_0x5469c0[_0x9cf16b(0x116)][_0xe54316]=_0x590150;}};return _0x5deaa3;}));}(heatmap$1));var heatmap=heatmap$1[_0x261057(0xf4)],h337=_mergeNamespaces({'__proto__':null,'default':heatmap},[heatmap$1['exports']]),HeatMaterial=_0x261057(0x17a);if(!heatmap$1['exports']['create'])throw new Error(_0x261057(0x162));function _0x1de7(_0x347658,_0x346549){var _0x46a440=_0x46a4();return _0x1de7=function(_0x1de7b4,_0x379c36){_0x1de7b4=_0x1de7b4-0xe2;var _0x24a548=_0x46a440[_0x1de7b4];if(_0x1de7['ncLQUq']===undefined){var _0x438364=function(_0x3c2b61){var _0x526b4a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0xb2eaf9='',_0x5bbe2f='';for(var _0x365c40=0x0,_0x231906,_0x33f046,_0x517976=0x0;_0x33f046=_0x3c2b61['charAt'](_0x517976++);~_0x33f046&&(_0x231906=_0x365c40%0x4?_0x231906*0x40+_0x33f046:_0x33f046,_0x365c40++%0x4)?_0xb2eaf9+=String['fromCharCode'](0xff&_0x231906>>(-0x2*_0x365c40&0x6)):0x0){_0x33f046=_0x526b4a['indexOf'](_0x33f046);}for(var _0x4c9a2f=0x0,_0x469038=_0xb2eaf9['length'];_0x4c9a2f<_0x469038;_0x4c9a2f++){_0x5bbe2f+='%'+('00'+_0xb2eaf9['charCodeAt'](_0x4c9a2f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5bbe2f);};_0x1de7['bNXsGp']=_0x438364,_0x347658=arguments,_0x1de7['ncLQUq']=!![];}var _0x5874e5=_0x46a440[0x0],_0xaa1df2=_0x1de7b4+_0x5874e5,_0x4dd795=_0x347658[_0xaa1df2];return!_0x4dd795?(_0x24a548=_0x1de7['bNXsGp'](_0x24a548),_0x347658[_0xaa1df2]=_0x24a548):_0x24a548=_0x4dd795,_0x24a548;},_0x1de7(_0x347658,_0x346549);}function _0x46a4(){var _0x4da3c5=['tgf5zxjvDgLS','zgvMyxvSDe1HEe9WywnPDhK','q2vZAxvT','y2XPzw50sgvPz2H0','x2HLyxq','C2HHzg93q2fUDMfZ','CMvTB3zLtgf5zxi','mJa2mJC4wvffsxzz','zgvMyxvSDfjHzgL1CW','x2XHC3rFBujVDw5KCW','x29WywnPDhK','x3jLBMrLCKjVDw5KyxjPzxm','Eg1PBG','6k+35BYv5ywLigHLyxrTyxaUANmG5BQtia','ChG7','x3jLBMrLCMvY','mZbdv3LoDNe','BgvUz3rO','mJe1A1HovM1N','x2HLAwDODa','y3jLyxrL','Bg9UBgf0mM1LCMnHDg9Y','Cg9ZAxrPB24','s0vfua','otKYnZu0C1zqtvzb','CMfKAxvZ','rvbtrZOZodu3','m2f1EhzNAW','Aw4GDMvJmYbWB3nPDgLVBJnesgLNAdSkicbPBIb2zwmZihbVC2L0Aw9Um0rmB3C7cIaGAw4GDMvJmIbZDdSkicbPBIbMBg9HDcbIyxrJAeLKoWOGihvUAwzVCM0GC2fTCgXLCJjeigj1BxbnyxbFmZSkicbVDxqGDMvJmYb2x3bVC2L0Aw9Utum7cIaGB3v0ihzLyZmGDL9WB3nPDgLVBKvdoWOGig91Dcb2zwmYihzFC3q7cGOGihzVAwqGBwfPBIGPcIaGEWOGicaGDMvJncbWid0Gy3PTx2nVBxb1DgvqB3nPDgLVBIGPoWOGicaGDL9WB3nPDgLVBK1did0GCg9ZAxrPB24ZreHPz2GGkYbWB3nPDgLVBJnetg93oWOGicaGDL9WB3nPDgLVBKvdid0Gkgn6Bv9TB2rLBfzPzxDszwXHDgL2zvrVrxLLicOGCcKUEhL6oWOGicaGDL9ZDca9ihn0oWOGicaGDMvJncbJB2XVCIa9ihrLEhr1CMuOyNvTCe1HCf8Zlcb2x3n0ktSkicaGigzSB2f0ignLBNrLCKj1BxaGpsbKAxn0yw5JzsH2zwmZkdaUmcKSy29SB3iUCMDIktSkicaGihzLyZmGDxbeAxiGpsbUB3jTywXPEMuODL9WB3nPDgLVBK1dlNH5EIK7cIaGicb2zwmZigrPC1bVCYa9ihvWrgLYicOGy2vUDgvYqNvTCcaQia','CMvUzgvYywXS','mJqWmtmZnLr4sLHAzW','zM9YrwfJAa','BwvYz2u','y2XHC3noyw1L','C2v0ug9ZAxrPB25Z','y29VCMrPBMf0zxm','u3rLBMnPBez1BMn0Aw9U','Dw5PzM9YBsbZyw1WBgvYmKqGAw1Hz2u7cGPJEM1FBwf0zxjPywWGy3PTx2DLDe1HDgvYAwfSkgn6Bv9TyxrLCMLHBeLUChv0ig1HDgvYAwfSsw5WDxqPihSkicbJEM1FBwf0zxjPywWGBwf0zxjPywWGpsbJEM1Fz2v0rgvMyxvSDe1HDgvYAwfSkg1HDgvYAwfSsw5WDxqPoWOGihzLyZiGC3qGpsbTyxrLCMLHBeLUChv0lNn0oWOGihzLyZqGy29SB3jjBwfNzsa9ihrLEhr1CMuOAw1Hz2uSihn0ktSkicbPzIHJB2XVCKLTywDLlNjNyIa9psb2zwmZkdeUmcKGFhWGy29SB3jjBwfNzs5Yz2iGpt0GDMvJmYGWlJaPksb7cIaGicbKAxnJyxjKoWOGih0kicbTyxrLCMLHBc5KAwzMDxnLid0Gy29SB3jjBwfNzs5Yz2i7cIaGBwf0zxjPywWUywXWAgeGpsbJB2XVCKLTywDLlMe7cIaGCMv0DxjUig1HDgvYAwfSoWP9cG','Ew1HEa','q29SB3i','CMvNAxn0zxi','ndG2mtjmyMDUB3K','Aw1Hz2u','ywrKrgf0yq','Bwf4','nZGZmLPSDuzPqG','z3jHCgHPyW','uKvqtefdrq','x3nLDfn0EwXLCW','zMX5vg9cEufUAw1HDgLVBKvUza','x3zHBhvLrMLLBgq','y3jLyxrLrwXLBwvUDa','AgvPz2H0','z2v0uMvJDgfUz2XL','C3r5Bgu','x2DYyxbOAwm','AxnbCNjHEq','x21HEa','Bgf0','zxHWB3j0CW','y29WEunHBNzHCW','Ew1PBG','CMvUzgvYzxi','x2jSDxi','Dw5KzwzPBMvK','yxjJuMfKAxvZu2nHBgu','tg5Ntgf0ug9PBNq','Bwf4q2fUDMfZu2L6zq','x2XHC3rFAgvHDerHDge','C2HVDW','AxngB3jTyxq','zgvMyxvSDeDYywrPzw50','B3b0Aw9UCW','x21PBK9WywnPDhK','oWOGicaGCcaRpxzLyZqOzgLZug9ZldaUmcK7cIaGicbNBf9qB3nPDgLVBIa9ign6Bv9TB2rLBfzPzxDqCM9Qzwn0Aw9UuMvSyxrPDMvuB0v5zsaQiha7cIaGFqO','x21PBG','x3vZzuDYywrPzw50t3bHy2L0Eq','x2DLDeLUDgvYBMfSrgf0yq','A2v5CW','y3r4','AgvHDfn0EwXL','yxjJ','u3rLBMnPBe9WzxjHDgLVBG','CMDIkdiXnIWYmtySmJe2kq','zw1PDa','x3nJywXL','ywrKtgf5zxi','yxjJrgLYzwn0Aw9U','x3vWzgf0zvbVC2L0Aw9UC0HVB2S','DMfSDwu','Cg9ZAxrPB25Z','ndC4meLct1fREa','zgf0yq','CgX1z2LUCW','AgvHDa','x21cB3vUzhnnyxG','mJy5mtKYmeT6AvDktW','Bg5N','BwLUq2fUDMfZu2L6zq','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','Dg9bCNjHEq','z2v0q29UDgv4Da','CMvUzgvYqwXS','x3n0B3jL','sw1Hz2vmyxLLCG','mtqWodHksuvywKO','uMvJDgfUz2XL','BwLU','x2nVBNrHAw5LCG','CMDIkdaSmcWYntuP','mtqZn2TzCg1lsW','x3nLDe9WDgLVBNniB29R','quXxqvLt','x3LgAwvSza','CgfYC2u','x3bVC2L0Aw9UCW','Aw1Hz2uVCg5N','Dw5PzM9YBxm','C2HHzg93q3r4','CMDIysG','zNjVBurLz3jLzxm','CMvTB3zLrgf0yq','yMX1CG','DMfSDwvgAwvSza','x19LC01VzhvSzq','C2v0rgf0yu1PBG','Bgf5zxi','CgX1z2LU','zMLSBfn0EwXL','y29UzMLNDxjL','x2nYzwf0zuDYyxbOAwm','zxH0CMvTywnOyw5Nzq','x2fKzgvKsg9VAW','x3jLy3rHBMDSzq','z2v0rgf0yq','x2nVBg9YAxPL','BwvYy2f0B3iYBg9UBgf0','x21HCa','y2XLyxjszwn0','D2LKDgG','x3DPzhrO','y2fUDMfZ','ug9PBNruCMfUCW','yxbWBhK','y3jLyxrLtgLUzwfYr3jHzgLLBNq','Dg9eyxrHvvjm','x2nVB3jKAw5HDg9Y','rwXSAxbZB2LKu3vYzMfJzufWCgvHCMfUy2u','x2nVBMzPzW','ywjZ','z2v0rgf0yvvsta','y2XLyxi','y3nZvgv4Da','CMvUzgvYCgfYDgLHBa','x2XHEwvY','C3rYAw5N'];_0x46a4=function(){return _0x4da3c5;};return _0x46a4();}const Cesium=mars3d__namespace[_0x261057(0x157)],BaseLayer=mars3d__namespace['layer']['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:'green',0.8:'yellow',0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance']['VERTEX_FORMAT']};class HeatLayer extends BaseLayer{constructor(_0x5636e1={}){var _0x8cc15c={_0x42c420:0x101,_0xe0c027:0x11b,_0x1ba687:0x158,_0x16c9f2:0x11b,_0x45479f:0x109},_0x5022bc=_0x261057;super(_0x5636e1),this[_0x5022bc(0x101)]['maxCanvasSize']=this['options']['maxCanvasSize']??document['body']['clientWidth'],this[_0x5022bc(_0x8cc15c._0x42c420)]['maxCanvasSize']=Math[_0x5022bc(0x124)](this[_0x5022bc(0x101)]['maxCanvasSize'],0x1388),this[_0x5022bc(0x101)][_0x5022bc(_0x8cc15c._0xe0c027)]=this['options']['minCanvasSize']??document['body'][_0x5022bc(_0x8cc15c._0x1ba687)],this['options']['minCanvasSize']=Math['max'](this[_0x5022bc(_0x8cc15c._0x42c420)][_0x5022bc(_0x8cc15c._0x16c9f2)],0x2bc),this['options']['heatStyle']={...DEF_HEATSTYLE,...this['options'][_0x5022bc(_0x8cc15c._0x45479f)]},this['options']['style']={...DEF_STYLE,...this['options']['style']};}get['layer'](){return this['_layer'];}get['heatStyle'](){var _0x1a780b=_0x261057;return this[_0x1a780b(0x101)]['heatStyle'];}set[_0x261057(0x109)](_0x3cdcd4){var _0x41f548={_0x5cf75c:0x109},_0x5a22db=_0x261057;this['options']['heatStyle']=mars3d__namespace['Util'][_0x5a22db(0x175)](this['options'][_0x5a22db(_0x41f548._0x5cf75c)],_0x3cdcd4),this['_heat']&&(this[_0x5a22db(0x159)]['configure'](this[_0x5a22db(0x101)]['heatStyle']),this['_updatePositionsHook'](!![]));}get[_0x261057(0xef)](){return this['options']['style'];}set[_0x261057(0xef)](_0x7ed057){var _0x5d5b20={_0x510197:0x101,_0x5b42e4:0xef},_0xed91f3=_0x261057;this['options']['style']=mars3d__namespace['Util'][_0xed91f3(0x175)](this[_0xed91f3(_0x5d5b20._0x510197)][_0xed91f3(_0x5d5b20._0x5b42e4)],_0x7ed057);}get[_0x261057(0x113)](){var _0xb45ccf={_0x2c52b8:0x12c},_0xf8d056=_0x261057;return this[_0xf8d056(_0xb45ccf._0x2c52b8)];}set['positions'](_0x3e45db){this['setPositions'](_0x3e45db);}get[_0x261057(0x178)](){const _0x2aab42=[];return this['points']['forEach'](_0x1e49ae=>{var _0x562e93=_0x1de7;_0x2aab42['push'](_0x1e49ae[_0x562e93(0x11d)]());}),_0x2aab42;}get['rectangle'](){return this['_rectangle'];}[_0x261057(0x128)](_0x3008f9,_0x28eb47){var _0x51a0eb=_0x261057;_0x3008f9['positions']&&(this['positions']=_0x3008f9[_0x51a0eb(0x113)]);}['_mountedHook'](){var _0x258321={_0x17af55:0xef,_0x1d9a4e:0x153,_0x474a7e:0x121},_0x4c2eb1=_0x261057;this[_0x4c2eb1(_0x258321._0x17af55)]['type']==='image'?this[_0x4c2eb1(_0x258321._0x1d9a4e)]=new mars3d__namespace['layer'][(_0x4c2eb1(_0x258321._0x474a7e))]({'crs':_0x4c2eb1(0x16f),'private':!![]}):this['_layer']=new mars3d__namespace['layer']['GraphicLayer']({'private':!![]});}[_0x261057(0x13d)](){var _0x1d8e36={_0xee9758:0x113,_0x347db0:0x101,_0x422842:0xea},_0x17181e=_0x261057;this[_0x17181e(0x142)][_0x17181e(0x10f)](this[_0x17181e(0x153)]),this['_container']=mars3d__namespace['DomUtil']['create']('div','mars3d-heatmap\x20mars3d-hideDiv',this['_map']['container']),this['options'][_0x17181e(_0x1d8e36._0xee9758)]&&(this['positions']=this[_0x17181e(0x101)]['positions']),this[_0x17181e(_0x1d8e36._0x347db0)]['flyTo']&&this[_0x17181e(_0x1d8e36._0x422842)]();}['_removedHook'](){var _0x2f8563={_0x595462:0x142,_0x10c580:0x15b},_0x512c16=_0x261057;this['_container']&&(mars3d__namespace['DomUtil']['remove'](this[_0x512c16(0x125)]),delete this[_0x512c16(0x125)]),this[_0x512c16(0x150)](),this[_0x512c16(_0x2f8563._0x595462)][_0x512c16(_0x2f8563._0x10c580)](this['_layer']);}['addPosition'](_0x734445,_0x4bac1d){this['_positions']=this['_positions']||[],this['_positions']['push'](_0x734445),this['_updatePositionsHook'](_0x4bac1d);}[_0x261057(0x177)](_0x5fd504,_0x5e56fb){var _0x2f0b99={_0x1e9b20:0x111},_0x4de358=_0x261057;this[_0x4de358(0x12c)]=_0x5fd504,this[_0x4de358(_0x2f0b99._0x1e9b20)](_0x5e56fb);}['clear'](){var _0x5276b4={_0x4330ff:0xf0},_0x3c9530=_0x261057;this[_0x3c9530(_0x5276b4._0x4330ff)]&&(this['_layer']['removeGraphic'](this[_0x3c9530(_0x5276b4._0x4330ff)],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer']['removeGraphic'](this['_graphic2'],!![]),delete this['_graphic2']);}['_updatePositionsHook'](_0xaea93){var _0x1b39d3={_0x336e01:0xfe,_0xccf02c:0xe3,_0x47a24e:0x14a,_0x580d81:0x12d,_0x101b90:0x13e,_0x2c8a14:0xf0,_0x4865a0:0x12e},_0x2df202=_0x261057;if(!this[_0x2df202(_0x1b39d3._0x336e01)]||!this['_map']||!this['positions']||this['positions']['length']===0x0)return this;const _0xf377df=this['_getHeatCanvas']();if(this['style']['type']===_0x2df202(_0x1b39d3._0xccf02c))this['_layer']['setOptions']({'url':_0xf377df[_0x2df202(_0x1b39d3._0x47a24e)](_0x2df202(_0x1b39d3._0x580d81),0x1),'rectangle':this[_0x2df202(_0x1b39d3._0x101b90)],'opacity':this[_0x2df202(0xef)]['opacity']});else this['style'][_0x2df202(0x10a)]?this[_0x2df202(_0x1b39d3._0x2c8a14)]&&_0xaea93?(this[_0x2df202(0xf0)]['uniforms'][_0x2df202(_0x1b39d3._0xccf02c)]=_0xf377df,this['_graphic'][_0x2df202(_0x1b39d3._0x4865a0)]['bumpMap']=this['_getArcHeatCanvas'](),this['_graphic2']&&(this['_graphic2']['uniforms']['image']=_0xf377df,this['_graphic2']['uniforms']['bumpMap']=this['_graphic']['uniforms']['bumpMap'])):this['_createArcGraphic'](_0xf377df):this['_graphic']&&_0xaea93?this['_graphic']['uniforms'][_0x2df202(0xe3)]=_0xf377df:this['_createGraphic'](_0xf377df);return this;}[_0x261057(0x13b)](_0x5e56dd){var _0x5e6748={_0x3cbc80:0xf0},_0x127001=_0x261057;this['clear'](),this['_graphic']=new mars3d__namespace[(_0x127001(0xe7))]['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':mars3d__namespace['MaterialUtil']['createMaterial'](mars3d__namespace['MaterialType']['Image2'],{'image':_0x5e56dd}),'flat':!![]})}),this['_layer']['addGraphic'](this[_0x127001(_0x5e6748._0x3cbc80)]);}['_createArcGraphic'](_0x5e34b5){var _0x1f0a22={_0x59d17c:0x150,_0x17b07a:0x10b,_0x1e2620:0x179,_0x3f8a73:0xed,_0xafa03f:0x13e,_0x488b14:0x17c,_0x532f84:0x110,_0x5e7d31:0xef,_0x104324:0x101},_0x52827c=_0x261057;this[_0x52827c(_0x1f0a22._0x59d17c)]();const _0x20b0b3=Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction']['ALWAYS'],'frontOperation':{'fail':Cesium[_0x52827c(_0x1f0a22._0x17b07a)]['KEEP'],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium['StencilOperation'][_0x52827c(0xe8)]},'backFunction':Cesium[_0x52827c(_0x1f0a22._0x1e2620)][_0x52827c(0x129)],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation'][_0x52827c(0x16c)],'zPass':Cesium['StencilOperation']['REPLACE']},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState']['ALPHA_BLEND']}),_0x59a6ab=Math['floor'](this['style']['diffHeight']??this[_0x52827c(0x118)]*0.02)+0.1;this['style']['diffHeight']&&delete this['style']['diffHeight'];const _0x136648=(this['style']['splitNum'],0x64);let _0x53547f=Math['max'](this[_0x52827c(0x13e)][_0x52827c(_0x1f0a22._0x3f8a73)],this[_0x52827c(_0x1f0a22._0xafa03f)]['width']);this['style']['granularity']=_0x53547f/=_0x136648;const _0x29bfc1=new Cesium['Material']({'fabric':{'uniforms':{'image':_0x5e34b5,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium[(_0x52827c(_0x1f0a22._0x488b14))](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x4783f8=this['style'][_0x52827c(_0x1f0a22._0x532f84)]||0x1;this[_0x52827c(0xf0)]=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium[(_0x52827c(0x14c))]({'flat':!![],'aboveGround':!![],'renderState':_0x20b0b3,'material':_0x29bfc1,'vertexShaderSource':getVertexShaderSource(_0x59a6ab*_0x4783f8)})}),this['_layer']['addGraphic'](this['_graphic']),this[_0x52827c(_0x1f0a22._0x5e7d31)]['arcDirection']===0x0&&(this['_graphic2']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this[_0x52827c(_0x1f0a22._0x104324)],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x20b0b3,'material':_0x29bfc1,'vertexShaderSource':getVertexShaderSource(-_0x59a6ab)})}),this['_layer']['addGraphic'](this['_graphic2']));}[_0x261057(0xee)](_0x47a892){var _0x2fc7d8={_0x1b4e83:0xff},_0x2f4d52=_0x261057;return _0x47a892!==null&&_0x47a892!==void 0x0&&_0x47a892[_0x2f4d52(_0x2fc7d8._0x1b4e83)]&&this['_rectangle']?mars3d__namespace['PolyUtil']['formatRectangle'](this[_0x2f4d52(0x13e)]):this['_rectangle'];}['_getHeatCanvas'](){var _0xa615db={_0x45808c:0x101,_0x14703f:0x161,_0x1ca7b9:0x124,_0x598707:0x101,_0x1e6882:0x11b,_0x477444:0x161,_0x41c04a:0xe5,_0x4f1516:0xf6,_0x6a69b4:0xe5,_0xaf44ed:0x131,_0x28ab03:0xfd,_0xd6e9e7:0xf6,_0x4130f9:0x109,_0x49894e:0x13a,_0x28fc05:0x159,_0x21edc3:0x164},_0x545f91={_0x32a7a8:0xf3,_0x11d96a:0x17b},_0x246a2b={_0x1bcd62:0xfb,_0x4ee5f9:0x12b,_0x4734b2:0x11a},_0x44d225=_0x261057;const _0xd4aa61=this['_positions'],_0x161027=[];let _0x4aeb48,_0x2811d3,_0x292ae9,_0x45523a;_0xd4aa61['forEach'](_0x5339dd=>{var _0x3e2f6d=_0x1de7;const _0x1da626=mars3d__namespace[_0x3e2f6d(_0x246a2b._0x1bcd62)][_0x3e2f6d(_0x246a2b._0x4ee5f9)](_0x5339dd);if(!_0x1da626)return;_0x1da626['value']=_0x5339dd[_0x3e2f6d(0x112)]||0x1,!this['options']['rectangle']&&(_0x4aeb48===undefined?(_0x4aeb48=_0x1da626[_0x3e2f6d(_0x246a2b._0x4734b2)],_0x2811d3=_0x1da626['lng'],_0x292ae9=_0x1da626['lat'],_0x45523a=_0x1da626['lat']):(_0x4aeb48=Math['min'](_0x4aeb48,_0x1da626['lng']),_0x2811d3=Math['max'](_0x2811d3,_0x1da626['lng']),_0x292ae9=Math['min'](_0x292ae9,_0x1da626['lat']),_0x45523a=Math['max'](_0x45523a,_0x1da626['lat']))),_0x161027['push'](_0x1da626);});_0x4aeb48===_0x2811d3&&(_0x4aeb48-=0.000001,_0x2811d3+=0.000001);_0x292ae9===_0x45523a&&(_0x292ae9-=0.000001,_0x45523a+=0.000001);let _0x178ed3=this[_0x44d225(_0xa615db._0x45808c)]['rectangle']||{'xmin':_0x4aeb48,'xmax':_0x2811d3,'ymin':_0x292ae9,'ymax':_0x45523a};const _0x50b638=getMercatorBounds(_0x178ed3),_0x333446=Math['abs'](_0x50b638['xmax']-_0x50b638[_0x44d225(_0xa615db._0x14703f)]),_0x1c937e=Math[_0x44d225(0x14e)](_0x50b638['ymax']-_0x50b638['ymin']),_0x509e60=Math['max'](_0x333446,_0x1c937e),_0x350107=Math[_0x44d225(_0xa615db._0x1ca7b9)](_0x333446,_0x1c937e);this['_mBoundsMax']=_0x509e60;let _0xf181dd=0x1;if(_0x509e60>this['options']['maxCanvasSize'])_0xf181dd=_0x509e60/this['options'][_0x44d225(0xfc)],_0x350107/_0xf181dd<this[_0x44d225(_0xa615db._0x598707)][_0x44d225(_0xa615db._0x1e6882)]&&(_0xf181dd=_0x350107/this[_0x44d225(0x101)][_0x44d225(0x11b)]);else _0x350107<this[_0x44d225(0x101)][_0x44d225(0x11b)]&&(_0xf181dd=_0x350107/this['options']['minCanvasSize'],_0x509e60/_0xf181dd>this['options']['maxCanvasSize']&&(_0xf181dd=_0x509e60/this['options']['maxCanvasSize']));const _0x40d8b0=this['heatStyle']['radius']*1.5,_0x252b6b=_0x333446/_0xf181dd+_0x40d8b0*0x2,_0x4d6bc9=_0x1c937e/_0xf181dd+_0x40d8b0*0x2,_0xf2ac12=_0x40d8b0*_0xf181dd;_0x50b638[_0x44d225(_0xa615db._0x477444)]-=_0xf2ac12,_0x50b638['ymin']-=_0xf2ac12,_0x50b638['xmax']+=_0xf2ac12,_0x50b638['ymax']+=_0xf2ac12,_0x50b638['xmin']=Math[_0x44d225(_0xa615db._0x41c04a)](_0x50b638['xmin'],-20037508.34),_0x50b638['xmax']=Math[_0x44d225(0x124)](_0x50b638['xmax'],20037508.34),_0x50b638[_0x44d225(_0xa615db._0x4f1516)]=Math[_0x44d225(_0xa615db._0x6a69b4)](_0x50b638['ymin'],-20037508.34),_0x50b638[_0x44d225(0x17b)]=Math[_0x44d225(0x124)](_0x50b638[_0x44d225(0x17b)],20037508.34),this['_scale']=_0xf181dd,_0x178ed3=geLatLngBounds(_0x50b638),this['_rectangle']=Cesium[_0x44d225(0x123)][_0x44d225(_0xa615db._0xaf44ed)](_0x178ed3['xmin'],_0x178ed3['ymin'],_0x178ed3['xmax'],_0x178ed3['ymax']);let _0x43eeeb=_0x161027[0x0][_0x44d225(0x112)]??0x1,_0x5cab6a=_0x161027[0x0][_0x44d225(0x112)]??0x0;const _0x4132a6=[];_0x161027['forEach'](_0x5108cf=>{var _0x512fbe=_0x44d225;const _0xf75ba4=mars3d__namespace[_0x512fbe(0x147)][_0x512fbe(0x16a)]([_0x5108cf[_0x512fbe(0x11a)],_0x5108cf[_0x512fbe(_0x545f91._0x32a7a8)]]),_0x2c15fb=_0x5108cf['value']||0x1,_0x5c29f5=Math['round']((_0xf75ba4[0x0]-_0x50b638['xmin'])/_0xf181dd),_0x34d37c=Math['round']((_0x50b638[_0x512fbe(_0x545f91._0x11d96a)]-_0xf75ba4[0x1])/_0xf181dd);_0x43eeeb=Math['max'](_0x43eeeb,_0x2c15fb),_0x5cab6a=Math['min'](_0x5cab6a,_0x2c15fb),_0x4132a6['push']({'x':_0x5c29f5,'y':_0x34d37c,'value':_0x2c15fb});});const _0x36ce98={'min':this[_0x44d225(0x101)]['min']??_0x5cab6a,'max':this['options']['max']??_0x43eeeb,'data':_0x4132a6};this[_0x44d225(_0xa615db._0x28ab03)]=_0x36ce98;if(!this['_last_mBounds']||_0x50b638[_0x44d225(0x161)]!==this['_last_mBounds'][_0x44d225(0x161)]||_0x50b638[_0x44d225(_0xa615db._0xd6e9e7)]!==this[_0x44d225(0x15e)]['ymin']||_0x50b638['xmax']!==this['_last_mBounds']['xmax']||_0x50b638['ymax']!==this['_last_mBounds']['ymax']){this[_0x44d225(0x15e)]=_0x50b638,this['_container']['style'][_0x44d225(0x151)]='width:'+_0x252b6b+'px;height:'+_0x4d6bc9+_0x44d225(0x163);const _0x1524da={...this[_0x44d225(_0xa615db._0x4130f9)],'container':this['_container']};!this['_heat']?this['_heat']=heatmap$1['exports'][_0x44d225(0x169)](_0x1524da):this['_heat'][_0x44d225(_0xa615db._0x49894e)](_0x1524da);}this['_heat']['setData'](_0x36ce98);const _0x2a232b=mars3d__namespace['DomUtil']['copyCanvas'](this[_0x44d225(_0xa615db._0x28fc05)][_0x44d225(_0xa615db._0x21edc3)]['canvas']);return _0x2a232b;}['_getArcHeatCanvas'](){var _0x11cffb={_0x515dee:0x159,_0x435010:0xfa,_0x313969:0x133,_0x7edac2:0xef,_0x340421:0x109},_0x1f4723=_0x261057;this[_0x1f4723(_0x11cffb._0x515dee)][_0x1f4723(0x13a)]({'radius':this['heatStyle']['radius']*this['style'][_0x1f4723(_0x11cffb._0x435010)],'blur':this['heatStyle'][_0x1f4723(_0x11cffb._0x313969)]*this[_0x1f4723(_0x11cffb._0x7edac2)]['arcBlurScale'],'gradient':this['heatStyle']['gradientArc']||{0.25:'rgb(0,0,0)',0.55:'rgb(140,140,140)',0.85:_0x1f4723(0x10c),0x1:'rgb(255,255,255)'}});const _0x199006=mars3d__namespace['DomUtil'][_0x1f4723(0xf5)](this['_heat']['_renderer']['canvas']);return this[_0x1f4723(_0x11cffb._0x515dee)]['configure'](this['options'][_0x1f4723(_0x11cffb._0x340421)]),_0x199006;}['getPointData'](_0x5cecd4){var _0x488ba4={_0x241825:0x147,_0xaab642:0x10e,_0x4e5b84:0x10e,_0x2e695d:0x159,_0x2b8123:0x130},_0x59838a=_0x261057;const _0x2dab83=mars3d__namespace[_0x59838a(0xfb)][_0x59838a(0x12b)](_0x5cecd4);if(!_0x2dab83)return{};const _0x3556a2=mars3d__namespace[_0x59838a(_0x488ba4._0x241825)]['lonlat2mercator']([_0x2dab83['lng'],_0x2dab83['lat']]),_0x4abd2d=this['_last_mBounds'],_0x566c82=Math['round']((_0x3556a2[0x0]-_0x4abd2d['xmin'])/this[_0x59838a(_0x488ba4._0xaab642)]),_0x5492b2=Math['round']((_0x4abd2d['ymax']-_0x3556a2[0x1])/this[_0x59838a(_0x488ba4._0x4e5b84)]),_0x527570=this[_0x59838a(0x159)]['getValueAt']({'x':_0x566c82,'y':_0x5492b2}),_0x9a2e7c=this[_0x59838a(_0x488ba4._0x2e695d)]['_renderer'][_0x59838a(0x108)]['getImageData'](_0x566c82-0x1,_0x5492b2-0x1,0x1,0x1)['data'];return{'x':_0x566c82,'y':_0x5492b2,'value':_0x527570,'color':_0x59838a(_0x488ba4._0x2b8123)+_0x9a2e7c[0x0]+','+_0x9a2e7c[0x1]+','+_0x9a2e7c[0x2]+','+_0x9a2e7c[0x3]+')'};}}mars3d__namespace[_0x261057(0x155)][_0x261057(0x17d)](_0x261057(0x117),HeatLayer),mars3d__namespace[_0x261057(0x137)]['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337;function getMercatorBounds(_0x51bac4){var _0x667799=_0x261057;const _0xaf203b=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x51bac4['xmin'],_0x51bac4[_0x667799(0xf6)]]),_0x3fc95f=mars3d__namespace[_0x667799(0x147)]['lonlat2mercator']([_0x51bac4['xmax'],_0x51bac4['ymax']]);return{'xmin':_0xaf203b[0x0],'ymin':_0xaf203b[0x1],'xmax':_0x3fc95f[0x0],'ymax':_0x3fc95f[0x1]};}function geLatLngBounds(_0x214c2a){var _0x45c832={_0x5745af:0x147,_0xadb163:0x141},_0x281948=_0x261057;const _0x370f5d=mars3d__namespace[_0x281948(_0x45c832._0x5745af)][_0x281948(_0x45c832._0xadb163)]([_0x214c2a['xmin'],_0x214c2a['ymin']]),_0x16b300=mars3d__namespace[_0x281948(0x147)]['mercator2lonlat']([_0x214c2a['xmax'],_0x214c2a['ymax']]);return{'xmin':_0x370f5d[0x0],'ymin':_0x370f5d[0x1],'xmax':_0x16b300[0x0],'ymax':_0x16b300[0x1]};}function getVertexShaderSource(_0x5286f0){var _0x137eef=_0x261057;return _0x137eef(0x171)+_0x5286f0+_0x137eef(0x103);}exports['HeatLayer']=HeatLayer,Object['defineProperty'](exports,_0x261057(0x135),{'value':!![]});
}));
