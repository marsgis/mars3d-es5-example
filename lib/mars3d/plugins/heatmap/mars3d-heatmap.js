/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.7.5
 * 编译日期：2024-03-05 20:02:24
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
	typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
	(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';var _0x4a6172=_0x4bf6;(function(_0x4eea5a,_0x3fc34d){var _0x14bed3={_0x87c5ff:0x142,_0x10cb3a:0xdc,_0x4a2ee0:0x116,_0x2fc445:0xd1,_0x35334a:0x12e},_0x1414cc=_0x4bf6,_0x44deb4=_0x4eea5a();while(!![]){try{var _0x458746=parseInt(_0x1414cc(0xee))/0x1+-parseInt(_0x1414cc(0x14b))/0x2*(parseInt(_0x1414cc(_0x14bed3._0x87c5ff))/0x3)+parseInt(_0x1414cc(0xed))/0x4+parseInt(_0x1414cc(_0x14bed3._0x10cb3a))/0x5+-parseInt(_0x1414cc(0xd6))/0x6+parseInt(_0x1414cc(_0x14bed3._0x4a2ee0))/0x7+-parseInt(_0x1414cc(_0x14bed3._0x2fc445))/0x8*(parseInt(_0x1414cc(_0x14bed3._0x35334a))/0x9);if(_0x458746===_0x3fc34d)break;else _0x44deb4['push'](_0x44deb4['shift']());}catch(_0x7871c){_0x44deb4['push'](_0x44deb4['shift']());}}}(_0x99ec,0x5dcf8));function _interopNamespace(_0x384eec){if(_0x384eec&&_0x384eec['__esModule'])return _0x384eec;var _0x5a9810=Object['create'](null);return _0x384eec&&Object['keys'](_0x384eec)['forEach'](function(_0x2dddc1){if(_0x2dddc1!=='default'){var _0x1d13bc=Object['getOwnPropertyDescriptor'](_0x384eec,_0x2dddc1);Object['defineProperty'](_0x5a9810,_0x2dddc1,_0x1d13bc['get']?_0x1d13bc:{'enumerable':!![],'get':function(){return _0x384eec[_0x2dddc1];}});}}),_0x5a9810['default']=_0x384eec,_0x5a9810;}function _mergeNamespaces(_0x22d793,_0x4c13e1){var _0x279d9e={_0x4c4e79:0xda},_0x15525a={_0x93fe1b:0xc5},_0x9977db=_0x4bf6;return _0x4c13e1[_0x9977db(_0x279d9e._0x4c4e79)](function(_0x491f8c){var _0x2ac754=_0x9977db;_0x491f8c&&typeof _0x491f8c!=='string'&&!Array['isArray'](_0x491f8c)&&Object['keys'](_0x491f8c)[_0x2ac754(0xda)](function(_0x14371b){var _0x52b086=_0x2ac754;if(_0x14371b!=='default'&&!(_0x14371b in _0x22d793)){var _0x126852=Object['getOwnPropertyDescriptor'](_0x491f8c,_0x14371b);Object[_0x52b086(_0x15525a._0x93fe1b)](_0x22d793,_0x14371b,_0x126852['get']?_0x126852:{'enumerable':!![],'get':function(){return _0x491f8c[_0x14371b];}});}});}),_0x22d793;}var mars3d__namespace=_interopNamespace(mars3d),commonjsGlobal=typeof globalThis!==_0x4a6172(0x14a)?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!==_0x4a6172(0x14a)?self:{},heatmap$1={'exports':{}};(function(_0x5677bb){var _0x2e0839={_0x163e84:0xc7},_0x524d8c={_0x3853b4:0xfc};(function(_0x238f21,_0x3f49ed,_0x22ab91){var _0x21c513=_0x4bf6;_0x5677bb[_0x21c513(_0x524d8c._0x3853b4)]?_0x5677bb['exports']=_0x22ab91():_0x3f49ed[_0x238f21]=_0x22ab91();}('h337',commonjsGlobal,function(){var _0x2feb87={_0x48f37f:0x133,_0x598970:0xf6},_0x3129d2={_0x20b241:0x12f},_0x4a776c={_0x380df1:0xea},_0x342314={_0x117af3:0x112,_0xb8f6d:0x105},_0x5eb29a={_0x475859:0x138,_0x2dd7a3:0x13c},_0x14f9c0={_0x40f6f5:0x13b},_0x2a1ab1={_0x5e134a:0x134,_0x1c0d57:0xfe,_0x3daf7f:0x10e},_0x3bb2e8={_0x546f65:0xc6},_0x5ce537={_0x2da31e:0x13f,_0x35c5de:0x11f},_0x4a617e={_0x439fb0:0xe0,_0x20d9c7:0x135},_0x594071={_0x32305d:0xc6},_0x519b85={_0xbbef56:0xe4},_0x42c930=_0x4bf6,_0x270332={'defaultRadius':0x28,'defaultRenderer':'canvas2d','defaultGradient':{0.25:_0x42c930(0xdf),0.55:'rgb(0,255,0)',0.85:_0x42c930(0x123),0x1:'rgb(255,0,0)'},'defaultMaxOpacity':0x1,'defaultMinOpacity':0x0,'defaultBlur':0.85,'defaultXField':'x','defaultYField':'y','defaultValueField':_0x42c930(_0x2e0839._0x163e84),'plugins':{}},_0x29fb82=function _0x934d30(){var _0x4ac665={_0x15c841:0xc6,_0x15ae92:0x11f},_0x4f5c59={_0x1deec7:0x135,_0x1d563c:0xe8},_0x6170cc={_0x5a10f2:0x12d,_0x3da36d:0xe8},_0x4be955=_0x42c930,_0x7a05ab=function _0x4b09b8(_0x53f185){var _0x2512df=_0x4bf6;this['_coordinator']={},this['_data']=[],this['_radi']=[],this['_min']=0xa,this[_0x2512df(0xc6)]=0x1,this['_xField']=_0x53f185['xField']||_0x53f185['defaultXField'],this['_yField']=_0x53f185['yField']||_0x53f185['defaultYField'],this['_valueField']=_0x53f185[_0x2512df(_0x6170cc._0x5a10f2)]||_0x53f185['defaultValueField'],_0x53f185[_0x2512df(_0x6170cc._0x3da36d)]&&(this[_0x2512df(0xe6)]=_0x53f185['radius']);},_0x478f97=_0x270332[_0x4be955(0x110)];return _0x7a05ab['prototype']={'_organiseData':function(_0x5837bf,_0x237c6d){var _0x4d7fb5=_0x4be955,_0x3aaec3=_0x5837bf[this['_xField']],_0x1b6855=_0x5837bf[this['_yField']],_0xcb3302=this['_radi'],_0x4ab07e=this[_0x4d7fb5(_0x4f5c59._0x1deec7)],_0x2c7205=this['_max'],_0x1e8506=this['_min'],_0x5d34b1=_0x5837bf[this['_valueField']]||0x1,_0x558c83=_0x5837bf[_0x4d7fb5(_0x4f5c59._0x1d563c)]||this['_cfgRadius']||_0x478f97;!_0x4ab07e[_0x3aaec3]&&(_0x4ab07e[_0x3aaec3]=[],_0xcb3302[_0x3aaec3]=[]);!_0x4ab07e[_0x3aaec3][_0x1b6855]?(_0x4ab07e[_0x3aaec3][_0x1b6855]=_0x5d34b1,_0xcb3302[_0x3aaec3][_0x1b6855]=_0x558c83):_0x4ab07e[_0x3aaec3][_0x1b6855]+=_0x5d34b1;var _0xc7a12b=_0x4ab07e[_0x3aaec3][_0x1b6855];if(_0xc7a12b>_0x2c7205)return!_0x237c6d?this['_max']=_0xc7a12b:this['setDataMax'](_0xc7a12b),![];else return _0xc7a12b<_0x1e8506?(!_0x237c6d?this['_min']=_0xc7a12b:this['setDataMin'](_0xc7a12b),![]):{'x':_0x3aaec3,'y':_0x1b6855,'value':_0x5d34b1,'radius':_0x558c83,'min':_0x1e8506,'max':_0x2c7205};},'_unOrganizeData':function(){var _0x26edf5=_0x4be955,_0x5c02b2=[],_0x577400=this['_data'],_0x3dab15=this['_radi'];for(var _0x1d3297 in _0x577400){for(var _0x40d044 in _0x577400[_0x1d3297]){_0x5c02b2['push']({'x':_0x1d3297,'y':_0x40d044,'radius':_0x3dab15[_0x1d3297][_0x40d044],'value':_0x577400[_0x1d3297][_0x40d044]});}}return{'min':this[_0x26edf5(0xcd)],'max':this['_max'],'data':_0x5c02b2};},'_onExtremaChange':function(){var _0x4ea5d8=_0x4be955;this['_coordinator'][_0x4ea5d8(_0x519b85._0xbbef56)]('extremachange',{'min':this['_min'],'max':this['_max']});},'addData':function(){var _0x1d4f62=_0x4be955;if(arguments[0x0]['length']>0x0){var _0x37d1cf=arguments[0x0],_0x296af8=_0x37d1cf['length'];while(_0x296af8--){this['addData']['call'](this,_0x37d1cf[_0x296af8]);}}else{var _0xc255c6=this['_organiseData'](arguments[0x0],!![]);_0xc255c6&&(this['_data'][_0x1d4f62(0xe0)]===0x0&&(this['_min']=this[_0x1d4f62(_0x594071._0x32305d)]=_0xc255c6['value']),this['_coordinator'][_0x1d4f62(0xe4)]('renderpartial',{'min':this['_min'],'max':this[_0x1d4f62(_0x594071._0x32305d)],'data':[_0xc255c6]}));}return this;},'setData':function(_0x6e5d22){var _0x4e7206=_0x4be955,_0x971dd5=_0x6e5d22['data'],_0x55f037=_0x971dd5[_0x4e7206(_0x4a617e._0x439fb0)];this[_0x4e7206(_0x4a617e._0x20d9c7)]=[],this[_0x4e7206(0x13d)]=[];for(var _0x2b5562=0x0;_0x2b5562<_0x55f037;_0x2b5562++){this['_organiseData'](_0x971dd5[_0x2b5562],![]);}return this['_max']=_0x6e5d22['max'],this['_min']=_0x6e5d22['min']||0x0,this['_onExtremaChange'](),this['_coordinator']['emit']('renderall',this['_getInternalData']()),this;},'removeData':function(){},'setDataMax':function(_0x59f28a){var _0x484e46=_0x4be955;return this[_0x484e46(_0x4ac665._0x15c841)]=_0x59f28a,this[_0x484e46(0x11a)](),this['_coordinator']['emit'](_0x484e46(0x13f),this[_0x484e46(_0x4ac665._0x15ae92)]()),this;},'setDataMin':function(_0x482764){var _0x278c30=_0x4be955;return this[_0x278c30(0xcd)]=_0x482764,this['_onExtremaChange'](),this['_coordinator'][_0x278c30(0xe4)](_0x278c30(_0x5ce537._0x2da31e),this[_0x278c30(_0x5ce537._0x35c5de)]()),this;},'setCoordinator':function(_0x543642){var _0x29bc6f=_0x4be955;this[_0x29bc6f(0x108)]=_0x543642;},'_getInternalData':function(){var _0x330eb4=_0x4be955;return{'max':this[_0x330eb4(_0x3bb2e8._0x546f65)],'min':this['_min'],'data':this[_0x330eb4(0x135)],'radi':this[_0x330eb4(0x13d)]};},'getData':function(){return this['_unOrganizeData']();}},_0x7a05ab;}(),_0x4c8203=function _0x2887d3(){var _0x4d7be5={_0x3fd47d:0x145,_0x257be3:0xd4,_0x4e054d:0x148,_0x212b39:0x128},_0x38b804={_0x505e21:0x134,_0x5ca2f8:0x148},_0x2e1b6c={_0x473814:0xf2},_0x52a560={_0x3cfa5d:0x120},_0x33c522={_0x16ec03:0x121,_0x1b5858:0xd4,_0x3c6218:0xd4,_0x8b81a7:0xf0,_0x1d2caa:0x152},_0x2b03d5={_0x3741c5:0x138,_0x2920cf:0xd5,_0x1818c4:0xea,_0x38e8e9:0x139},_0x37627c={_0x3e6bc9:0xef,_0xd64f8c:0x11d,_0x1c2bec:0x14f,_0x31bbaf:0x10e},_0x446144=function(_0x72ed67){var _0x528901=_0x4bf6,_0x5de0ae=_0x72ed67['gradient']||_0x72ed67[_0x528901(0x100)],_0x11c089=document['createElement'](_0x528901(_0x2a1ab1._0x5e134a)),_0x15df22=_0x11c089['getContext']('2d',{'willReadFrequently':!![]});_0x11c089['width']=0x100,_0x11c089['height']=0x1;var _0x4f0be6=_0x15df22[_0x528901(_0x2a1ab1._0x1c0d57)](0x0,0x0,0x100,0x1);for(var _0x526df4 in _0x5de0ae){_0x4f0be6['addColorStop'](_0x526df4,_0x5de0ae[_0x526df4]);}return _0x15df22[_0x528901(_0x2a1ab1._0x3daf7f)]=_0x4f0be6,_0x15df22['fillRect'](0x0,0x0,0x100,0x1),_0x15df22['getImageData'](0x0,0x0,0x100,0x1)['data'];},_0x43b849=function(_0x2c8287,_0x295ee8){var _0x33f586=_0x4bf6,_0x332b34=document['createElement']('canvas'),_0x4fa695=_0x332b34['getContext']('2d',{'willReadFrequently':!![]}),_0x21da29=_0x2c8287,_0x5bc7b6=_0x2c8287;_0x332b34['width']=_0x332b34[_0x33f586(0xf0)]=_0x2c8287*0x2;if(_0x295ee8==0x1)_0x4fa695['beginPath'](),_0x4fa695['arc'](_0x21da29,_0x5bc7b6,_0x2c8287,0x0,0x2*Math['PI'],![]),_0x4fa695['fillStyle']=_0x33f586(_0x37627c._0x3e6bc9),_0x4fa695['fill']();else{var _0x78e8bc=_0x4fa695[_0x33f586(0x119)](_0x21da29,_0x5bc7b6,_0x2c8287*_0x295ee8,_0x21da29,_0x5bc7b6,_0x2c8287);_0x78e8bc[_0x33f586(_0x37627c._0xd64f8c)](0x0,'rgba(0,0,0,1)'),_0x78e8bc['addColorStop'](0x1,_0x33f586(_0x37627c._0x1c2bec)),_0x4fa695[_0x33f586(_0x37627c._0x31bbaf)]=_0x78e8bc,_0x4fa695['fillRect'](0x0,0x0,0x2*_0x2c8287,0x2*_0x2c8287);}return _0x332b34;},_0x4e15f9=function(_0x52077e){var _0x24046a=_0x4bf6,_0x570df7=[],_0x45800b=_0x52077e[_0x24046a(_0x2b03d5._0x3741c5)],_0x522e5f=_0x52077e[_0x24046a(_0x2b03d5._0x2920cf)],_0x17e153=_0x52077e['radi'],_0x52077e=_0x52077e[_0x24046a(_0x2b03d5._0x1818c4)],_0x521e35=Object['keys'](_0x52077e),_0x57626c=_0x521e35[_0x24046a(0xe0)];while(_0x57626c--){var _0x44da92=_0x521e35[_0x57626c],_0x3867a4=Object['keys'](_0x52077e[_0x44da92]),_0x50968b=_0x3867a4[_0x24046a(0xe0)];while(_0x50968b--){var _0x2352ee=_0x3867a4[_0x50968b],_0x37efc7=_0x52077e[_0x44da92][_0x2352ee],_0x2c0ee0=_0x17e153[_0x44da92][_0x2352ee];_0x570df7[_0x24046a(_0x2b03d5._0x38e8e9)]({'x':_0x44da92,'y':_0x2352ee,'value':_0x37efc7,'radius':_0x2c0ee0});}}return{'min':_0x45800b,'max':_0x522e5f,'data':_0x570df7};};function _0x1f1900(_0x41da63){var _0x435637=_0x4bf6,_0x98dc89=_0x41da63[_0x435637(0x14d)],_0x4a93ba=this[_0x435637(0x148)]=document[_0x435637(_0x33c522._0x16ec03)]('canvas'),_0x22951b=this['canvas']=_0x41da63[_0x435637(0x134)]||document['createElement']('canvas');this['_renderBoundaries']=[0x2710,0x2710,0x0,0x0];var _0x15d2dd=getComputedStyle(_0x41da63[_0x435637(0x14d)])||{};_0x22951b['className']='heatmap-canvas',this['_width']=_0x22951b[_0x435637(_0x33c522._0x1b5858)]=_0x4a93ba['width']=_0x41da63['width']||+_0x15d2dd[_0x435637(_0x33c522._0x3c6218)]['replace'](/px/,''),this[_0x435637(0x14c)]=_0x22951b['height']=_0x4a93ba[_0x435637(_0x33c522._0x8b81a7)]=_0x41da63[_0x435637(_0x33c522._0x8b81a7)]||+_0x15d2dd[_0x435637(0xf0)]['replace'](/px/,''),this['shadowCtx']=_0x4a93ba[_0x435637(0x10a)]('2d',{'willReadFrequently':!![]}),this['ctx']=_0x22951b[_0x435637(0x10a)]('2d',{'willReadFrequently':!![]}),_0x22951b['style'][_0x435637(0xde)]=_0x4a93ba[_0x435637(_0x33c522._0x1d2caa)]['cssText']='position:absolute;left:0;top:0;',_0x98dc89['style']['position']='relative',_0x98dc89['appendChild'](_0x22951b),this['_palette']=_0x446144(_0x41da63),this[_0x435637(0x13c)]={},this['_setStyles'](_0x41da63);}return _0x1f1900['prototype']={'renderPartial':function(_0x54fa48){_0x54fa48['data']['length']>0x0&&(this['_drawAlpha'](_0x54fa48),this['_colorize']());},'renderAll':function(_0x167bd7){var _0xe6f128=_0x4bf6;this[_0xe6f128(0x11c)](),_0x167bd7['data']['length']>0x0&&(this[_0xe6f128(_0x52a560._0x3cfa5d)](_0x4e15f9(_0x167bd7)),this['_colorize']());},'_updateGradient':function(_0x3b1b7b){this['_palette']=_0x446144(_0x3b1b7b);},'updateConfig':function(_0x1f2042){var _0xba5abf=_0x4bf6;_0x1f2042[_0xba5abf(0x10c)]&&this['_updateGradient'](_0x1f2042),this[_0xba5abf(_0x2e1b6c._0x473814)](_0x1f2042);},'setDimensions':function(_0x48f9f9,_0x4a454b){var _0x537d02=_0x4bf6;this['_width']=_0x48f9f9,this[_0x537d02(0x14c)]=_0x4a454b,this['canvas']['width']=this[_0x537d02(0x148)]['width']=_0x48f9f9,this[_0x537d02(_0x38b804._0x505e21)]['height']=this[_0x537d02(_0x38b804._0x5ca2f8)]['height']=_0x4a454b;},'_clear':function(){var _0x1174cc=_0x4bf6;this['shadowCtx']['clearRect'](0x0,0x0,this[_0x1174cc(_0x14f9c0._0x40f6f5)],this['_height']),this['ctx']['clearRect'](0x0,0x0,this['_width'],this['_height']);},'_setStyles':function(_0x1c82d7){var _0x57e1ed=_0x4bf6;this['_blur']=_0x1c82d7[_0x57e1ed(0x145)]==0x0?0x0:_0x1c82d7[_0x57e1ed(_0x4d7be5._0x3fd47d)]||_0x1c82d7['defaultBlur'],_0x1c82d7['backgroundColor']&&(this['canvas']['style'][_0x57e1ed(0xf1)]=_0x1c82d7['backgroundColor']),this['_width']=this['canvas']['width']=this['shadowCanvas']['width']=_0x1c82d7[_0x57e1ed(_0x4d7be5._0x257be3)]||this[_0x57e1ed(0x13b)],this[_0x57e1ed(0x14c)]=this['canvas']['height']=this[_0x57e1ed(_0x4d7be5._0x4e054d)]['height']=_0x1c82d7['height']||this['_height'],this['_opacity']=(_0x1c82d7['opacity']||0x0)*0xff,this['_maxOpacity']=(_0x1c82d7['maxOpacity']||_0x1c82d7['defaultMaxOpacity'])*0xff,this['_minOpacity']=(_0x1c82d7[_0x57e1ed(0x127)]||_0x1c82d7['defaultMinOpacity'])*0xff,this['_useGradientOpacity']=!!_0x1c82d7[_0x57e1ed(_0x4d7be5._0x212b39)];},'_drawAlpha':function(_0x3e0c00){var _0x48f6c7=_0x4bf6,_0x4721cb=this['_min']=_0x3e0c00['min'],_0x5d9aa9=this['_max']=_0x3e0c00['max'],_0x3e0c00=_0x3e0c00['data']||[],_0x2379e5=_0x3e0c00['length'],_0x5a711d=0x1-this['_blur'];while(_0x2379e5--){var _0x5ab912=_0x3e0c00[_0x2379e5],_0x17a83b=_0x5ab912['x'],_0x45c0f9=_0x5ab912['y'],_0x4823ec=_0x5ab912['radius'],_0x490e40=Math[_0x48f6c7(_0x5eb29a._0x475859)](_0x5ab912['value'],_0x5d9aa9),_0x258492=_0x17a83b-_0x4823ec,_0x443d6d=_0x45c0f9-_0x4823ec,_0x174435=this['shadowCtx'],_0x2d3fe5;!this[_0x48f6c7(0x13c)][_0x4823ec]?this[_0x48f6c7(_0x5eb29a._0x2dd7a3)][_0x4823ec]=_0x2d3fe5=_0x43b849(_0x4823ec,_0x5a711d):_0x2d3fe5=this['_templates'][_0x4823ec];var _0x1f6510=(_0x490e40-_0x4721cb)/(_0x5d9aa9-_0x4721cb);_0x174435['globalAlpha']=_0x1f6510<0.01?0.01:_0x1f6510,_0x174435['drawImage'](_0x2d3fe5,_0x258492,_0x443d6d),_0x258492<this['_renderBoundaries'][0x0]&&(this['_renderBoundaries'][0x0]=_0x258492),_0x443d6d<this['_renderBoundaries'][0x1]&&(this['_renderBoundaries'][0x1]=_0x443d6d),_0x258492+0x2*_0x4823ec>this['_renderBoundaries'][0x2]&&(this[_0x48f6c7(0x112)][0x2]=_0x258492+0x2*_0x4823ec),_0x443d6d+0x2*_0x4823ec>this['_renderBoundaries'][0x3]&&(this['_renderBoundaries'][0x3]=_0x443d6d+0x2*_0x4823ec);}},'_colorize':function(){var _0x114cf5=_0x4bf6,_0x5a2e0d=this['_renderBoundaries'][0x0],_0x461354=this[_0x114cf5(_0x342314._0x117af3)][0x1],_0x46849b=this['_renderBoundaries'][0x2]-_0x5a2e0d,_0x2294a0=this['_renderBoundaries'][0x3]-_0x461354,_0x2160c9=this['_width'],_0x82367f=this['_height'],_0x54e72b=this['_opacity'],_0x284ae8=this['_maxOpacity'],_0x521ee0=this['_minOpacity'],_0x1a94b2=this[_0x114cf5(_0x342314._0xb8f6d)];_0x5a2e0d<0x0&&(_0x5a2e0d=0x0);_0x461354<0x0&&(_0x461354=0x0);_0x5a2e0d+_0x46849b>_0x2160c9&&(_0x46849b=_0x2160c9-_0x5a2e0d);_0x461354+_0x2294a0>_0x82367f&&(_0x2294a0=_0x82367f-_0x461354);var _0x480fb3=this['shadowCtx']['getImageData'](_0x5a2e0d,_0x461354,_0x46849b,_0x2294a0),_0x12bd27=_0x480fb3['data'],_0x1aa16a=_0x12bd27['length'],_0x26a146=this[_0x114cf5(0x137)];for(var _0x5733cb=0x3;_0x5733cb<_0x1aa16a;_0x5733cb+=0x4){var _0x44c362=_0x12bd27[_0x5733cb],_0x11f783=_0x44c362*0x4;if(!_0x11f783)continue;var _0x1f8420;_0x54e72b>0x0?_0x1f8420=_0x54e72b:_0x44c362<_0x284ae8?_0x44c362<_0x521ee0?_0x1f8420=_0x521ee0:_0x1f8420=_0x44c362:_0x1f8420=_0x284ae8,_0x12bd27[_0x5733cb-0x3]=_0x26a146[_0x11f783],_0x12bd27[_0x5733cb-0x2]=_0x26a146[_0x11f783+0x1],_0x12bd27[_0x5733cb-0x1]=_0x26a146[_0x11f783+0x2],_0x12bd27[_0x5733cb]=_0x1a94b2?_0x26a146[_0x11f783+0x3]:_0x1f8420;}this['ctx']['putImageData'](_0x480fb3,_0x5a2e0d,_0x461354),this['_renderBoundaries']=[0x3e8,0x3e8,0x0,0x0];},'getValueAt':function(_0x1c51e0){var _0x46451c=_0x4bf6,_0x4e8083,_0x174a8d=this['shadowCtx'],_0x26e9c5=_0x174a8d['getImageData'](_0x1c51e0['x'],_0x1c51e0['y'],0x1,0x1),_0x3ebabf=_0x26e9c5[_0x46451c(_0x4a776c._0x380df1)][0x3],_0x2dad08=this['_max'],_0x346123=this['_min'];return _0x4e8083=Math['abs'](_0x2dad08-_0x346123)*(_0x3ebabf/0xff)>>0x0,_0x4e8083;},'getDataURL':function(){var _0x1e8f53=_0x4bf6;return this['canvas'][_0x1e8f53(0xf9)]();}},_0x1f1900;}(),_0x4ab437=function _0x400c4d(){var _0x3d48d0=![];return _0x270332['defaultRenderer']==='canvas2d'&&(_0x3d48d0=_0x4c8203),_0x3d48d0;}(),_0xdaf83d={'merge':function(){var _0x363630={},_0xc582c6=arguments['length'];for(var _0x5383f1=0x0;_0x5383f1<_0xc582c6;_0x5383f1++){var _0x26d771=arguments[_0x5383f1];for(var _0x16c7ac in _0x26d771){_0x363630[_0x16c7ac]=_0x26d771[_0x16c7ac];}}return _0x363630;}},_0x20f7d1=function _0x4db259(){var _0x11b4b3={_0x56ac42:0x102},_0x13ee92={_0x46cabd:0x143},_0x361988={_0x55b96d:0x11f},_0x464eda={_0x1cf325:0x133,_0x23aa9c:0x108},_0x5d0bd1={_0x47d1e9:0x12c,_0x3853d9:0x13f},_0x4281eb=function _0x467d94(){var _0x2a91f9={_0x17d2e5:0xe0};function _0x2c0314(){this['cStore']={};}return _0x2c0314['prototype']={'on':function(_0x42950a,_0x3315ed,_0x471e87){var _0x41a2bb=_0x4bf6,_0x440d1d=this['cStore'];!_0x440d1d[_0x42950a]&&(_0x440d1d[_0x42950a]=[]),_0x440d1d[_0x42950a][_0x41a2bb(0x139)](function(_0x26f8d5){return _0x3315ed['call'](_0x471e87,_0x26f8d5);});},'emit':function(_0x3732b7,_0x599dd6){var _0xf4db83=_0x4bf6,_0x3d07e6=this['cStore'];if(_0x3d07e6[_0x3732b7]){var _0x14ba93=_0x3d07e6[_0x3732b7][_0xf4db83(_0x2a91f9._0x17d2e5)];for(var _0x10ef4f=0x0;_0x10ef4f<_0x14ba93;_0x10ef4f++){var _0x3eb2f8=_0x3d07e6[_0x3732b7][_0x10ef4f];_0x3eb2f8(_0x599dd6);}}}},_0x2c0314;}(),_0x24b520=function(_0x4c1bf6){var _0x333a9c={_0x4a890b:0x138,_0x24d9a7:0x10c},_0x7e66d6=_0x4bf6,_0x54c219=_0x4c1bf6[_0x7e66d6(0xf6)],_0x107a34=_0x4c1bf6['_coordinator'],_0x4f88bc=_0x4c1bf6['_store'];_0x107a34['on']('renderpartial',_0x54c219[_0x7e66d6(_0x5d0bd1._0x47d1e9)],_0x54c219),_0x107a34['on'](_0x7e66d6(_0x5d0bd1._0x3853d9),_0x54c219['renderAll'],_0x54c219),_0x107a34['on']('extremachange',function(_0x128ed5){var _0x383b17=_0x7e66d6;_0x4c1bf6['_config']['onExtremaChange']&&_0x4c1bf6['_config']['onExtremaChange']({'min':_0x128ed5[_0x383b17(_0x333a9c._0x4a890b)],'max':_0x128ed5['max'],'gradient':_0x4c1bf6['_config'][_0x383b17(_0x333a9c._0x24d9a7)]||_0x4c1bf6['_config']['defaultGradient']});}),_0x4f88bc['setCoordinator'](_0x107a34);};function _0x390bc1(){var _0x48e4b9=_0x4bf6,_0x33fccb=this[_0x48e4b9(_0x464eda._0x1cf325)]=_0xdaf83d['merge'](_0x270332,arguments[0x0]||{});this[_0x48e4b9(_0x464eda._0x23aa9c)]=new _0x4281eb();if(_0x33fccb['plugin']){var _0x22c0f6=_0x33fccb['plugin'];if(!_0x270332['plugins'][_0x22c0f6])throw new Error('Plugin\x20\x27'+_0x22c0f6+'\x27\x20not\x20found.\x20Maybe\x20it\x20was\x20not\x20registered.');else{var _0x3e984c=_0x270332['plugins'][_0x22c0f6];this['_renderer']=new _0x3e984c['renderer'](_0x33fccb),this['_store']=new _0x3e984c['store'](_0x33fccb);}}else this['_renderer']=new _0x4ab437(_0x33fccb),this['_store']=new _0x29fb82(_0x33fccb);_0x24b520(this);}return _0x390bc1['prototype']={'addData':function(){return this['_store']['addData']['apply'](this['_store'],arguments),this;},'removeData':function(){var _0x5564fd=_0x4bf6;return this['_store']['removeData']&&this[_0x5564fd(0x12f)]['removeData'][_0x5564fd(0x136)](this[_0x5564fd(0x12f)],arguments),this;},'setData':function(){var _0x37786d=_0x4bf6;return this['_store'][_0x37786d(0xfd)]['apply'](this[_0x37786d(_0x3129d2._0x20b241)],arguments),this;},'setDataMax':function(){var _0x42f233=_0x4bf6;return this['_store'][_0x42f233(0x126)]['apply'](this['_store'],arguments),this;},'setDataMin':function(){var _0x560adf=_0x4bf6;return this[_0x560adf(0x12f)]['setDataMin']['apply'](this['_store'],arguments),this;},'configure':function(_0x3469db){var _0x386fe7=_0x4bf6;return this['_config']=_0xdaf83d['merge'](this[_0x386fe7(_0x2feb87._0x48f37f)],_0x3469db),this[_0x386fe7(_0x2feb87._0x598970)]['updateConfig'](this[_0x386fe7(0x133)]),this['_coordinator']['emit']('renderall',this[_0x386fe7(0x12f)]['_getInternalData']()),this;},'repaint':function(){var _0x5b9c96=_0x4bf6;return this['_coordinator']['emit'](_0x5b9c96(0x13f),this['_store'][_0x5b9c96(_0x361988._0x55b96d)]()),this;},'getData':function(){var _0x5c8469=_0x4bf6;return this['_store'][_0x5c8469(_0x13ee92._0x46cabd)]();},'getDataURL':function(){return this['_renderer']['getDataURL']();},'getValueAt':function(_0x1718b5){var _0x49d823=_0x4bf6;if(this['_store']['getValueAt'])return this[_0x49d823(0x12f)]['getValueAt'](_0x1718b5);else return this[_0x49d823(0xf6)][_0x49d823(0x102)]?this['_renderer'][_0x49d823(_0x11b4b3._0x56ac42)](_0x1718b5):null;}},_0x390bc1;}(),_0x309adc={'create':function(_0x26e857){return new _0x20f7d1(_0x26e857);},'register':function(_0x3baa60,_0x4ef400){_0x270332['plugins'][_0x3baa60]=_0x4ef400;}};return _0x309adc;}));}(heatmap$1));var heatmap=heatmap$1['exports'],h337=_mergeNamespaces({'__proto__':null,'default':heatmap},[heatmap$1['exports']]),HeatMaterial='uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a';if(!heatmap$1['exports'][_0x4a6172(0xd0)])throw new Error(_0x4a6172(0xc9));const Cesium=mars3d__namespace[_0x4a6172(0x140)],BaseLayer=mars3d__namespace['layer']['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:_0x4a6172(0xdd),0.6:'green',0.8:'yellow',0.9:_0x4a6172(0xeb)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance']['VERTEX_FORMAT']};function _0x99ec(){var _0xc46cb0=['width','max','4325940ugFtPP','_updatePositionsHook','ymin','_map','forEach','getPointData','692555wnRgGo','blue','cssText','rgb(0,0,255)','length','uniforms','graphic','ymax','emit',';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a','_cfgRadius','minCanvasSize','radius','clientWidth','data','red','arcRadiusScale','251260LnhczC','760048HHEMar','rgba(0,0,0,1)','height','backgroundColor','_setStyles','getRectangle','type','_container','_renderer','_graphic','Material','toDataURL','_setOptionsHook','_scale','exports','setData','createLinearGradient','body','defaultGradient','div','getValueAt','_getArcHeatCanvas','diffHeight','_useGradientOpacity','xmin','LngLatPoint','_coordinator','rgb(255,255,255)','getContext','opacity','gradient','RectanglePrimitive','fillStyle','Rectangle','defaultRadius','heatStyle','_renderBoundaries','DomUtil','xmax','image','4203409FhFQvO','rgb(0,0,0)','toArray','createRadialGradient','_onExtremaChange','addGraphic','_clear','addColorStop','rgba(','_getInternalData','_drawAlpha','createElement','maxCanvasSize','yellow','rectangle','PolyUtil','setDataMax','minOpacity','useGradientOpacity','_last_mBounds','MaterialUtil','abs','renderPartial','valueField','1088397hUJcng','_store','mercator2lonlat','_graphic2','arcBlurScale','_config','canvas','_data','apply','_palette','min','push','StencilFunction','_width','_templates','_radi','round','renderall','Cesium','StencilOperation','35184fJyKEl','getData','ImageLayer','blur','lat','Image2','shadowCanvas','lng','undefined','16ASBznQ','_height','container','_createGraphic','rgba(0,0,0,0)','flyTo','_layer','style','options','defineProperty','_max','value','_heat','请引入\x20heatmap.js\x20库\x20','image/png','KEEP','copyCanvas','_min','BlendingState','positions','create','24nlJMyM','EllipsoidSurfaceAppearance','ALPHA_BLEND'];_0x99ec=function(){return _0xc46cb0;};return _0x99ec();}class HeatLayer extends BaseLayer{constructor(_0x62fff1={}){var _0x3d06cb={_0x45383b:0xc4,_0x4829fe:0xe9,_0x24941b:0xff,_0x117072:0xe7,_0x1404d7:0x111,_0x5b1187:0xc4},_0x45a9d4=_0x4a6172;super(_0x62fff1),this[_0x45a9d4(_0x3d06cb._0x45383b)]['maxCanvasSize']=this['options']['maxCanvasSize']??document['body'][_0x45a9d4(_0x3d06cb._0x4829fe)],this['options'][_0x45a9d4(0x122)]=Math['min'](this['options'][_0x45a9d4(0x122)],0x1388),this[_0x45a9d4(0xc4)]['minCanvasSize']=this[_0x45a9d4(0xc4)]['minCanvasSize']??document[_0x45a9d4(_0x3d06cb._0x24941b)]['clientHeight'],this[_0x45a9d4(0xc4)]['minCanvasSize']=Math['max'](this[_0x45a9d4(0xc4)][_0x45a9d4(_0x3d06cb._0x117072)],0x2bc),this['options']['heatStyle']={...DEF_HEATSTYLE,...this[_0x45a9d4(0xc4)][_0x45a9d4(_0x3d06cb._0x1404d7)]},this['options']['style']={...DEF_STYLE,...this[_0x45a9d4(_0x3d06cb._0x5b1187)]['style']};}get['layer'](){return this['_layer'];}get['heatStyle'](){return this['options']['heatStyle'];}set['heatStyle'](_0x379149){var _0x1d2672={_0x4868bd:0x111,_0x1332b9:0xd7},_0x32119c=_0x4a6172;this['options']['heatStyle']=mars3d__namespace['Util']['merge'](this[_0x32119c(0xc4)][_0x32119c(_0x1d2672._0x4868bd)],_0x379149),this['_heat']&&(this['_heat']['configure'](this['options']['heatStyle']),this[_0x32119c(_0x1d2672._0x1332b9)](!![]));}get['style'](){var _0x49ad47={_0x822c72:0x152},_0xb531bc=_0x4a6172;return this['options'][_0xb531bc(_0x49ad47._0x822c72)];}set['style'](_0x19bd37){var _0x22c9ce=_0x4a6172;this['options'][_0x22c9ce(0x152)]=mars3d__namespace['Util']['merge'](this['options']['style'],_0x19bd37);}get['positions'](){return this['_positions'];}set[_0x4a6172(0xcf)](_0x3f7a0c){this['setPositions'](_0x3f7a0c);}get['coordinates'](){var _0x4df97c={_0x2e4dd8:0x118};const _0x299432=[];return this['points']['forEach'](_0x56f43c=>{var _0x8ec1e4=_0x4bf6;_0x299432['push'](_0x56f43c[_0x8ec1e4(_0x4df97c._0x2e4dd8)]());}),_0x299432;}get['rectangle'](){return this['_rectangle'];}[_0x4a6172(0xfa)](_0x17ef32,_0x270368){_0x17ef32['positions']&&(this['positions']=_0x17ef32['positions']);}['_mountedHook'](){var _0x2b2b19=_0x4a6172;this['style']['type']==='image'?this['_layer']=new mars3d__namespace['layer'][(_0x2b2b19(0x144))]({'crs':'EPSG:3857','private':!![]}):this['_layer']=new mars3d__namespace['layer']['GraphicLayer']({'private':!![]});}['_addedHook'](){var _0xeb1ec3={_0x427bd0:0xf5,_0x41da35:0x101,_0x4cc9e3:0xd9,_0x167700:0xcf,_0x3043dd:0x150},_0x2028e1=_0x4a6172;this['_map']['addLayer'](this['_layer']),this[_0x2028e1(_0xeb1ec3._0x427bd0)]=mars3d__namespace['DomUtil']['create'](_0x2028e1(_0xeb1ec3._0x41da35),'mars3d-heatmap\x20mars3d-hideDiv',this[_0x2028e1(_0xeb1ec3._0x4cc9e3)]['container']),this['options'][_0x2028e1(0xcf)]&&(this[_0x2028e1(_0xeb1ec3._0x167700)]=this['options'][_0x2028e1(0xcf)]),this[_0x2028e1(0xc4)][_0x2028e1(_0xeb1ec3._0x3043dd)]&&this['flyToByAnimationEnd']();}['_removedHook'](){var _0x11f1c9={_0x30ffcb:0x151},_0x236f6b=_0x4a6172;this['_container']&&(mars3d__namespace['DomUtil']['remove'](this['_container']),delete this['_container']),this['clear'](),this['_map']['removeLayer'](this[_0x236f6b(_0x11f1c9._0x30ffcb)]);}['addPosition'](_0x1b83b2,_0x58c27f){this['_positions']=this['_positions']||[],this['_positions']['push'](_0x1b83b2),this['_updatePositionsHook'](_0x58c27f);}['setPositions'](_0x20d868,_0x18ad4b){this['_positions']=_0x20d868,this['_updatePositionsHook'](_0x18ad4b);}['clear'](){var _0x2acbd3={_0x30ddde:0x131},_0x353b28=_0x4a6172;this['_graphic']&&(this['_layer']['removeGraphic'](this['_graphic'],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer']['removeGraphic'](this['_graphic2'],!![]),delete this[_0x353b28(_0x2acbd3._0x30ddde)]);}['_updatePositionsHook'](_0x4a888d){var _0x670424={_0x3fb0b3:0x152,_0x1e3214:0xf7,_0x14cc10:0x115,_0x34b708:0x103,_0xe25059:0x115},_0x139aa4=_0x4a6172;if(!this['show']||!this['_map']||!this['positions']||this['positions']['length']===0x0)return this;const _0x415b4b=this['_getHeatCanvas']();if(this['style'][_0x139aa4(0xf4)]==='image')this['_layer']['setOptions']({'url':_0x415b4b['toDataURL'](_0x139aa4(0xca),0x1),'rectangle':this['_rectangle'],'opacity':this[_0x139aa4(_0x670424._0x3fb0b3)][_0x139aa4(0x10b)]});else this[_0x139aa4(0x152)]['arc']?this[_0x139aa4(0xf7)]&&_0x4a888d?(this[_0x139aa4(_0x670424._0x1e3214)]['uniforms'][_0x139aa4(_0x670424._0x14cc10)]=_0x415b4b,this['_graphic']['uniforms']['bumpMap']=this[_0x139aa4(_0x670424._0x34b708)](),this['_graphic2']&&(this[_0x139aa4(0x131)]['uniforms']['image']=_0x415b4b,this[_0x139aa4(0x131)]['uniforms']['bumpMap']=this['_graphic']['uniforms']['bumpMap'])):this['_createArcGraphic'](_0x415b4b):this['_graphic']&&_0x4a888d?this[_0x139aa4(0xf7)][_0x139aa4(0xe1)][_0x139aa4(_0x670424._0xe25059)]=_0x415b4b:this[_0x139aa4(0x14e)](_0x415b4b);return this;}[_0x4a6172(0x14e)](_0x234ffc){var _0x57d42e={_0x528720:0x10d,_0x6bbd4a:0xc4,_0x1f2f89:0xf7},_0x24e68a=_0x4a6172;this['clear'](),this[_0x24e68a(0xf7)]=new mars3d__namespace['graphic'][(_0x24e68a(_0x57d42e._0x528720))]({...this[_0x24e68a(_0x57d42e._0x6bbd4a)],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':mars3d__namespace[_0x24e68a(0x12a)]['createMaterial'](mars3d__namespace['MaterialType'][_0x24e68a(0x147)],{'image':_0x234ffc}),'flat':!![]})}),this[_0x24e68a(0x151)]['addGraphic'](this[_0x24e68a(_0x57d42e._0x1f2f89)]);}['_createArcGraphic'](_0x13c98a){var _0x4d038e={_0x2ded43:0x141,_0x4720b0:0x141,_0xdec096:0xce,_0x49165e:0x152,_0x5e7113:0xd4,_0x2a6523:0x151},_0xaf012=_0x4a6172;this['clear']();const _0x549dbc=Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction']['ALWAYS'],'frontOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium[_0xaf012(0x141)]['KEEP'],'zPass':Cesium[_0xaf012(_0x4d038e._0x2ded43)]['REPLACE']},'backFunction':Cesium[_0xaf012(0x13a)]['ALWAYS'],'backOperation':{'fail':Cesium['StencilOperation'][_0xaf012(0xcb)],'zFail':Cesium[_0xaf012(_0x4d038e._0x4720b0)]['KEEP'],'zPass':Cesium['StencilOperation']['REPLACE']},'reference':0x2,'mask':0x2},'blending':Cesium[_0xaf012(_0x4d038e._0xdec096)][_0xaf012(0xd3)]}),_0x20e64a=Math['floor'](this[_0xaf012(_0x4d038e._0x49165e)]['diffHeight']??this['_mBoundsMax']*0.02)+0.1;this[_0xaf012(0x152)]['diffHeight']&&delete this['style'][_0xaf012(0x104)];const _0x2b8ada=(this['style']['splitNum'],0x64);let _0x52a423=Math['max'](this['_rectangle']['height'],this['_rectangle'][_0xaf012(_0x4d038e._0x5e7113)]);this[_0xaf012(0x152)]['granularity']=_0x52a423/=_0x2b8ada;const _0x18ba57=new Cesium[(_0xaf012(0xf8))]({'fabric':{'uniforms':{'image':_0x13c98a,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x484a36=this['style']['arcDirection']||0x1;this['_graphic']=new mars3d__namespace[(_0xaf012(0xe2))]['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium[(_0xaf012(0xd2))]({'flat':!![],'aboveGround':!![],'renderState':_0x549dbc,'material':_0x18ba57,'vertexShaderSource':getVertexShaderSource(_0x20e64a*_0x484a36)})}),this[_0xaf012(0x151)]['addGraphic'](this['_graphic']),this['style']['arcDirection']===0x0&&(this['_graphic2']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium[(_0xaf012(0xd2))]({'flat':!![],'aboveGround':!![],'renderState':_0x549dbc,'material':_0x18ba57,'vertexShaderSource':getVertexShaderSource(-_0x20e64a)})}),this[_0xaf012(_0x4d038e._0x2a6523)][_0xaf012(0x11b)](this['_graphic2']));}[_0x4a6172(0xf3)](_0x44107a){var _0x5a6487=_0x4a6172;return _0x44107a!==null&&_0x44107a!==void 0x0&&_0x44107a['isFormat']&&this['_rectangle']?mars3d__namespace[_0x5a6487(0x125)]['formatRectangle'](this['_rectangle']):this['_rectangle'];}['_getHeatCanvas'](){var _0x467fdb={_0x3d6ee4:0x124,_0x279834:0x12b,_0x27f3c3:0xe3,_0x414d0e:0xc4,_0x529f6b:0x122,_0x1a144f:0xc4,_0x43aaf9:0xd8,_0x38f863:0x138,_0x525692:0xfb,_0x58843a:0x10f,_0x5d1885:0x106,_0x107582:0xe3,_0x218664:0xfc,_0x3572db:0xcc},_0x4a572d={_0x26ed25:0xc7,_0x1e32fc:0xd5},_0x1eda28={_0x967310:0x124,_0x4b3d0a:0x146,_0x37ee80:0x138,_0x3c130a:0xd5},_0xe021ad=_0x4a6172;const _0x56065a=this['_positions'],_0x231c93=[];let _0x1cce61,_0x35add2,_0x3fb838,_0x3e82bc;_0x56065a['forEach'](_0x59ad59=>{var _0x598910=_0x4bf6;const _0xda2ab1=mars3d__namespace[_0x598910(0x107)]['parse'](_0x59ad59);if(!_0xda2ab1)return;_0xda2ab1['value']=_0x59ad59['value']||0x1,!this['options'][_0x598910(_0x1eda28._0x967310)]&&(_0x1cce61===undefined?(_0x1cce61=_0xda2ab1[_0x598910(0x149)],_0x35add2=_0xda2ab1['lng'],_0x3fb838=_0xda2ab1['lat'],_0x3e82bc=_0xda2ab1[_0x598910(_0x1eda28._0x4b3d0a)]):(_0x1cce61=Math[_0x598910(_0x1eda28._0x37ee80)](_0x1cce61,_0xda2ab1['lng']),_0x35add2=Math[_0x598910(_0x1eda28._0x3c130a)](_0x35add2,_0xda2ab1['lng']),_0x3fb838=Math[_0x598910(0x138)](_0x3fb838,_0xda2ab1['lat']),_0x3e82bc=Math['max'](_0x3e82bc,_0xda2ab1['lat']))),_0x231c93['push'](_0xda2ab1);});_0x1cce61===_0x35add2&&(_0x1cce61-=0.000001,_0x35add2+=0.000001);_0x3fb838===_0x3e82bc&&(_0x3fb838-=0.000001,_0x3e82bc+=0.000001);let _0x2a1a7a=this['options'][_0xe021ad(_0x467fdb._0x3d6ee4)]||{'xmin':_0x1cce61,'xmax':_0x35add2,'ymin':_0x3fb838,'ymax':_0x3e82bc};const _0x152890=getMercatorBounds(_0x2a1a7a),_0x1b4d4a=Math[_0xe021ad(_0x467fdb._0x279834)](_0x152890[_0xe021ad(0x114)]-_0x152890[_0xe021ad(0x106)]),_0x331dc7=Math['abs'](_0x152890[_0xe021ad(_0x467fdb._0x27f3c3)]-_0x152890['ymin']),_0x489e60=Math['max'](_0x1b4d4a,_0x331dc7),_0x340939=Math['min'](_0x1b4d4a,_0x331dc7);this['_mBoundsMax']=_0x489e60;let _0x4cf609=0x1;if(_0x489e60>this[_0xe021ad(0xc4)]['maxCanvasSize'])_0x4cf609=_0x489e60/this[_0xe021ad(_0x467fdb._0x414d0e)][_0xe021ad(_0x467fdb._0x529f6b)],_0x340939/_0x4cf609<this['options']['minCanvasSize']&&(_0x4cf609=_0x340939/this['options']['minCanvasSize']);else _0x340939<this[_0xe021ad(0xc4)][_0xe021ad(0xe7)]&&(_0x4cf609=_0x340939/this['options']['minCanvasSize'],_0x489e60/_0x4cf609>this[_0xe021ad(_0x467fdb._0x1a144f)]['maxCanvasSize']&&(_0x4cf609=_0x489e60/this['options']['maxCanvasSize']));const _0x571bb2=this['heatStyle']['radius']*1.5,_0x1b518e=_0x1b4d4a/_0x4cf609+_0x571bb2*0x2,_0x1a8a34=_0x331dc7/_0x4cf609+_0x571bb2*0x2,_0x1697a7=_0x571bb2*_0x4cf609;_0x152890[_0xe021ad(0x106)]-=_0x1697a7,_0x152890[_0xe021ad(_0x467fdb._0x43aaf9)]-=_0x1697a7,_0x152890['xmax']+=_0x1697a7,_0x152890['ymax']+=_0x1697a7,_0x152890[_0xe021ad(0x106)]=Math['max'](_0x152890['xmin'],-20037508.34),_0x152890['xmax']=Math['min'](_0x152890['xmax'],20037508.34),_0x152890['ymin']=Math['max'](_0x152890['ymin'],-20037508.34),_0x152890['ymax']=Math[_0xe021ad(_0x467fdb._0x38f863)](_0x152890['ymax'],20037508.34),this[_0xe021ad(_0x467fdb._0x525692)]=_0x4cf609,_0x2a1a7a=geLatLngBounds(_0x152890),this['_rectangle']=Cesium[_0xe021ad(_0x467fdb._0x58843a)]['fromDegrees'](_0x2a1a7a['xmin'],_0x2a1a7a['ymin'],_0x2a1a7a['xmax'],_0x2a1a7a['ymax']);let _0x49d414=_0x231c93[0x0]['value']??0x1,_0x19eaff=_0x231c93[0x0]['value']??0x0;const _0x1843ef=[];_0x231c93['forEach'](_0x518416=>{var _0xcdbdf8=_0xe021ad;const _0x3c0b64=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x518416['lng'],_0x518416['lat']]),_0x274504=_0x518416[_0xcdbdf8(_0x4a572d._0x26ed25)]||0x1,_0x387ab3=Math[_0xcdbdf8(0x13e)]((_0x3c0b64[0x0]-_0x152890['xmin'])/_0x4cf609),_0x1d531d=Math['round']((_0x152890['ymax']-_0x3c0b64[0x1])/_0x4cf609);_0x49d414=Math[_0xcdbdf8(_0x4a572d._0x1e32fc)](_0x49d414,_0x274504),_0x19eaff=Math['min'](_0x19eaff,_0x274504),_0x1843ef['push']({'x':_0x387ab3,'y':_0x1d531d,'value':_0x274504});});const _0x4d22f3={'min':this['options']['min']??_0x19eaff,'max':this['options']['max']??_0x49d414,'data':_0x1843ef};this['_last_heatData']=_0x4d22f3;if(!this['_last_mBounds']||_0x152890['xmin']!==this['_last_mBounds'][_0xe021ad(_0x467fdb._0x5d1885)]||_0x152890['ymin']!==this['_last_mBounds']['ymin']||_0x152890['xmax']!==this[_0xe021ad(0x129)]['xmax']||_0x152890[_0xe021ad(_0x467fdb._0x107582)]!==this['_last_mBounds']['ymax']){this['_last_mBounds']=_0x152890,this['_container']['style']['cssText']='width:'+_0x1b518e+'px;height:'+_0x1a8a34+'px;';const _0x3b3aa7={...this[_0xe021ad(0x111)],'container':this['_container']};!this['_heat']?this['_heat']=heatmap$1[_0xe021ad(_0x467fdb._0x218664)]['create'](_0x3b3aa7):this['_heat']['configure'](_0x3b3aa7);}this['_heat']['setData'](_0x4d22f3);const _0x4447ab=mars3d__namespace['DomUtil'][_0xe021ad(_0x467fdb._0x3572db)](this['_heat']['_renderer'][_0xe021ad(0x134)]);return _0x4447ab;}['_getArcHeatCanvas'](){var _0x4766fc={_0x1d7816:0xc8,_0x2d4cd5:0xec,_0x5e00ab:0x111,_0x50cc5f:0x117,_0x35cdd7:0x109},_0x193e9b=_0x4a6172;this[_0x193e9b(_0x4766fc._0x1d7816)]['configure']({'radius':this[_0x193e9b(0x111)][_0x193e9b(0xe8)]*this[_0x193e9b(0x152)][_0x193e9b(_0x4766fc._0x2d4cd5)],'blur':this['heatStyle'][_0x193e9b(0x145)]*this['style'][_0x193e9b(0x132)],'gradient':this[_0x193e9b(_0x4766fc._0x5e00ab)]['gradientArc']||{0.25:_0x193e9b(_0x4766fc._0x50cc5f),0.55:'rgb(140,140,140)',0.85:'rgb(216,216,216)',0x1:_0x193e9b(_0x4766fc._0x35cdd7)}});const _0x5b0ba1=mars3d__namespace[_0x193e9b(0x113)]['copyCanvas'](this['_heat']['_renderer']['canvas']);return this['_heat']['configure'](this['options']['heatStyle']),_0x5b0ba1;}[_0x4a6172(0xdb)](_0xa131d){var _0x2a9517=_0x4a6172;const _0x1a9d22=mars3d__namespace[_0x2a9517(0x107)]['parse'](_0xa131d);if(!_0x1a9d22)return{};const _0x19d0fd=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x1a9d22['lng'],_0x1a9d22[_0x2a9517(0x146)]]),_0x3c08ce=this['_last_mBounds'],_0x6e63c5=Math['round']((_0x19d0fd[0x0]-_0x3c08ce[_0x2a9517(0x106)])/this['_scale']),_0x339b81=Math['round']((_0x3c08ce['ymax']-_0x19d0fd[0x1])/this['_scale']),_0x2f530a=this['_heat']['getValueAt']({'x':_0x6e63c5,'y':_0x339b81}),_0x26c40f=this['_heat']['_renderer']['ctx']['getImageData'](_0x6e63c5-0x1,_0x339b81-0x1,0x1,0x1)[_0x2a9517(0xea)];return{'x':_0x6e63c5,'y':_0x339b81,'value':_0x2f530a,'color':_0x2a9517(0x11e)+_0x26c40f[0x0]+','+_0x26c40f[0x1]+','+_0x26c40f[0x2]+','+_0x26c40f[0x3]+')'};}}mars3d__namespace['LayerUtil']['register']('heat',HeatLayer),mars3d__namespace['layer']['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337;function getMercatorBounds(_0x1ae860){var _0x10241b=_0x4a6172;const _0x5f40af=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x1ae860[_0x10241b(0x106)],_0x1ae860['ymin']]),_0x36c95a=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x1ae860['xmax'],_0x1ae860['ymax']]);return{'xmin':_0x5f40af[0x0],'ymin':_0x5f40af[0x1],'xmax':_0x36c95a[0x0],'ymax':_0x36c95a[0x1]};}function geLatLngBounds(_0x1ce16c){var _0x2c7a2c={_0x3d9b7c:0x130,_0x3bb43a:0xd8},_0x38433e=_0x4a6172;const _0x5ddf17=mars3d__namespace['PointTrans'][_0x38433e(_0x2c7a2c._0x3d9b7c)]([_0x1ce16c[_0x38433e(0x106)],_0x1ce16c[_0x38433e(_0x2c7a2c._0x3bb43a)]]),_0x3cb6fb=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x1ce16c['xmax'],_0x1ce16c['ymax']]);return{'xmin':_0x5ddf17[0x0],'ymin':_0x5ddf17[0x1],'xmax':_0x3cb6fb[0x0],'ymax':_0x3cb6fb[0x1]};}function getVertexShaderSource(_0x1404b6){var _0x399ba1={_0x202197:0xe5},_0x18d084=_0x4a6172;return'in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'+_0x1404b6+_0x18d084(_0x399ba1._0x202197);}function _0x4bf6(_0x210cad,_0xe8c349){var _0x99eccd=_0x99ec();return _0x4bf6=function(_0x4bf654,_0x147b9a){_0x4bf654=_0x4bf654-0xc4;var _0x595f0d=_0x99eccd[_0x4bf654];return _0x595f0d;},_0x4bf6(_0x210cad,_0xe8c349);}exports['HeatLayer']=HeatLayer,Object[_0x4a6172(0xc5)](exports,'__esModule',{'value':!![]});
}));
