/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.7.12
 * 编译日期：2024-05-03 15:00:45
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
	typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
	(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';var _0xf673b1=_0x343f;function _0x569e(){var _0x4dd517=['x3jHzgK','mtK1rLPeEhjh','B3bHy2L0Eq','y2XHC3noyw1L','x2nVBNrHAw5LCG','C2HHzg93q2fUDMfZ','Aw1Hz2u','CMfKAxvZ','CMvTB3zLr3jHCgHPyW','x3rLBxbSyxrLCW','x2rHDge','y29UzMLNDxjL','Cg9PBNrZ','C2v0rgf0yu1HEa','y3jLyxrL','mJe1ndq1DhrODePr','zw1PDa','AgvPz2H0','y2XPzw50sgvPz2H0','Dw5KzwzPBMvK','C2HVDW','z3jLzw4','qMXLBMrPBMDtDgf0zq','x21VDw50zwriB29R','CMvUzgvYugfYDgLHBa','uKvqtefdrq','zgvMyxvSDfLgAwvSza','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','DxbKyxrLq29UzMLN','tgf5zxjvDgLS','C3r5Bgu','zxHWB3j0CW','zgf0yq','zMX5vg9cEufUAw1HDgLVBKvUza','Dw5PzM9YBxm','twf0zxjPywW','yM9KEq','y2XLyxi','CMvUzgvYzxi','vKvsvevyx0zpuK1bva','Dw5PzM9YBsbZyw1WBgvYmKqGAw1Hz2u7cGPJEM1FBwf0zxjPywWGy3PTx2DLDe1HDgvYAwfSkgn6Bv9TyxrLCMLHBeLUChv0ig1HDgvYAwfSsw5WDxqPihSkicbJEM1FBwf0zxjPywWGBwf0zxjPywWGpsbJEM1Fz2v0rgvMyxvSDe1HDgvYAwfSkg1HDgvYAwfSsw5WDxqPoWOGihzLyZiGC3qGpsbTyxrLCMLHBeLUChv0lNn0oWOGihzLyZqGy29SB3jjBwfNzsa9ihrLEhr1CMuOAw1Hz2uSihn0ktSkicbPzIHJB2XVCKLTywDLlNjNyIa9psb2zwmZkdeUmcKGFhWGy29SB3jjBwfNzs5Yz2iGpt0GDMvJmYGWlJaPksb7cIaGicbKAxnJyxjKoWOGih0kicbTyxrLCMLHBc5KAwzMDxnLid0Gy29SB3jjBwfNzs5Yz2i7cIaGBwf0zxjPywWUywXWAgeGpsbJB2XVCKLTywDLlMe7cIaGCMv0DxjUig1HDgvYAwfSoWP9cG','AgvHDfn0EwXL','x3bVC2L0Aw9UCW','y29UDgfPBMvY','zgvMAw5LuhjVCgvYDhK','CMfKAq','z3jHBNvSyxjPDhK','mtbwr2X0wxi','Eg1HEa','Cg9ZAxrPB25Z','x3vZzuDYywrPzw50t3bHy2L0Eq','x3jLBMrLCKjVDw5KyxjPzxm','AxngB3jTyxq','mJK5odzRvgPkqwm','x2nMz1jHzgL1CW','CgX1z2LU','zgvMyxvSDe1HEe9WywnPDhK','x2nYzwf0zufYy0DYyxbOAwm','z2v0sw1Hz2veyxrH','CMvTB3zLtgf5zxi','y3r4','CMvNAxn0zxi','B3b0Aw9UCW','EwvSBg93','AxnbCNjHEq','oerZsxr0DG','ywrKrgf0yq','y3jLyxrLrwXLBwvUDa','zM9YrwfJAa','D2LKDgG','s0vfua','CMvWBgfJzq','jYbUB3qGzM91BMqUie1HEwjLigL0ihDHCYbUB3qGCMvNAxn0zxjLzc4','DMfSDwu','z3jHCgHPyW','yMvNAw5qyxrO','ywrKr3jHCgHPyW','x29UrxH0CMvTyunOyw5Nzq','Eg1PBG','CMvUzgvYywXS','x21HEa','CMvJDgfUz2XL','x2jSDxi','x2nVBMzPzW','D2LKDgG6','mtmYodyZnJfmz1ngrg4','x2XHC3rFBujVDw5KCW','x21HCa','C2v0q29VCMrPBMf0B3i','x3n0B3jL','C2HHzg93q3r4','Aw1Hz2uVCg5N','x2HLyxq','x3nJywXL','C3rVCMu','yMX1CG','y29WEunHBNzHCW','EezPzwXK','y2XLyxjszwn0','Dg9eyxrHvvjm','uMvJDgfUz2XLuhjPBwL0AxzL','CMvK','CMDIysGWldaSmcWXkq','x2nSzwfY','y3jLyxrLtwf0zxjPywW','Ew1HEa','A2v5CW','yxjJrgLYzwn0Aw9U','CMvSyxrPDMu','ChvZAa','Bg5N','y2fUDMfZ','BwLUt3bHy2L0Eq','rwXSAxbZB2LKu3vYzMfJzufWCgvHCMfUy2u','zNjVBurLz3jLzxm','x2DYyxbOAwm','x3jLy3rHBMDSzq','mtm2odK5BgXKtMfd','z2v0vMfSDwvbDa','mJe2nJaXogHQqwn3Aq','Bwf4t3bHy2L0Eq','y29VCMrPBMf0zxm','x3vWzgf0zvbVC2L0Aw9UC0HVB2S','x21cB3vUzhnnyxG','Bwf4q2fUDMfZu2L6zq','x2nYzwf0zuDYyxbOAwm','z2v0rgf0yvvsta','u3rLBMnPBez1BMn0Aw9U','quXxqvLt','x3LgAwvSza','ywrKq29SB3jtDg9W','mZKXmdr2z29bywG','x2XHEwvY','x3DPzhrO','CgX1z2LUCW','x21PBG','x2DYyxbOAwmY','q2vZAxvT','mZnmquzwvKS','BwvYz2u','Bwf4','BwLU','Bg9UBgf0mM1LCMnHDg9Y','Bgf5zxi','ug9PBNruCMfUCW','BgvUz3rO','y3nZvgv4Da','quXqsefFqKXftKq','x2nVB3jKAw5HDg9Y','zxH0CMvTywnOyw5Nzq','BwLUq2fUDMfZu2L6zq','y1n0B3jL','x3zHBhvLrMLLBgq','x3jLBMrLCMvY','x2HLAwDODa','x21PBK9WywnPDhK','z3jHzgLLBNq','C2v0rgf0yu1PBG','u3rLBMnPBe9WzxjHDgLVBG','mJy4mtuXmvrbBxfdyG','Ew1PBG'];_0x569e=function(){return _0x4dd517;};return _0x569e();}function _0x343f(_0x36432f,_0x44603e){var _0x569e83=_0x569e();return _0x343f=function(_0x343f6e,_0x68c914){_0x343f6e=_0x343f6e-0xc6;var _0x2246d2=_0x569e83[_0x343f6e];if(_0x343f['SKGBrn']===undefined){var _0x1199c1=function(_0x3b3e48){var _0x3425f9='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x494d7d='',_0x5f4d44='';for(var _0x12933a=0x0,_0x102763,_0x119b86,_0x185e76=0x0;_0x119b86=_0x3b3e48['charAt'](_0x185e76++);~_0x119b86&&(_0x102763=_0x12933a%0x4?_0x102763*0x40+_0x119b86:_0x119b86,_0x12933a++%0x4)?_0x494d7d+=String['fromCharCode'](0xff&_0x102763>>(-0x2*_0x12933a&0x6)):0x0){_0x119b86=_0x3425f9['indexOf'](_0x119b86);}for(var _0x542f18=0x0,_0x455174=_0x494d7d['length'];_0x542f18<_0x455174;_0x542f18++){_0x5f4d44+='%'+('00'+_0x494d7d['charCodeAt'](_0x542f18)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5f4d44);};_0x343f['hBGJgL']=_0x1199c1,_0x36432f=arguments,_0x343f['SKGBrn']=!![];}var _0x591a2f=_0x569e83[0x0],_0x207dfb=_0x343f6e+_0x591a2f,_0x9075c7=_0x36432f[_0x207dfb];return!_0x9075c7?(_0x2246d2=_0x343f['hBGJgL'](_0x2246d2),_0x36432f[_0x207dfb]=_0x2246d2):_0x2246d2=_0x9075c7,_0x2246d2;},_0x343f(_0x36432f,_0x44603e);}(function(_0x15fad0,_0x537fdb){var _0x13c5ca={_0x272735:0x150,_0x4f76cd:0xd5,_0x47703f:0xc7,_0x481c75:0x13d,_0x37dfee:0x165,_0x5100a8:0x107,_0x3804f7:0x11b},_0x256468=_0x343f,_0x2a5daa=_0x15fad0();while(!![]){try{var _0x2c7c28=-parseInt(_0x256468(_0x13c5ca._0x272735))/0x1*(parseInt(_0x256468(0xfb))/0x2)+-parseInt(_0x256468(_0x13c5ca._0x4f76cd))/0x3+-parseInt(_0x256468(0x149))/0x4*(parseInt(_0x256468(_0x13c5ca._0x47703f))/0x5)+parseInt(_0x256468(_0x13c5ca._0x481c75))/0x6+-parseInt(_0x256468(_0x13c5ca._0x37dfee))/0x7+parseInt(_0x256468(_0x13c5ca._0x5100a8))/0x8*(parseInt(_0x256468(0x13b))/0x9)+parseInt(_0x256468(0xf5))/0xa*(parseInt(_0x256468(_0x13c5ca._0x3804f7))/0xb);if(_0x2c7c28===_0x537fdb)break;else _0x2a5daa['push'](_0x2a5daa['shift']());}catch(_0x7c3bba){_0x2a5daa['push'](_0x2a5daa['shift']());}}}(_0x569e,0x3dcd8));function _interopNamespace(_0x3b3e48){var _0x1bbbec={_0x48bf57:0xd4,_0x2c38c1:0x130},_0x12cbb3=_0x343f;if(_0x3b3e48&&_0x3b3e48['__esModule'])return _0x3b3e48;var _0x3425f9=Object[_0x12cbb3(_0x1bbbec._0x48bf57)](null);return _0x3b3e48&&Object[_0x12cbb3(_0x1bbbec._0x2c38c1)](_0x3b3e48)['forEach'](function(_0x494d7d){var _0x301ee7=_0x12cbb3;if(_0x494d7d!=='default'){var _0x5f4d44=Object[_0x301ee7(0xe1)](_0x3b3e48,_0x494d7d);Object['defineProperty'](_0x3425f9,_0x494d7d,_0x5f4d44['get']?_0x5f4d44:{'enumerable':!![],'get':function(){return _0x3b3e48[_0x494d7d];}});}}),_0x3425f9['default']=_0x3b3e48,_0x3425f9;}function _mergeNamespaces(_0x12933a,_0x102763){var _0x4dd29d={_0x239687:0x106},_0x1a910f={_0x189c9d:0xe1,_0x54b5e5:0xf2},_0x126584=_0x343f;return _0x102763[_0x126584(0x10a)](function(_0x119b86){var _0x10b271=_0x126584;_0x119b86&&typeof _0x119b86!=='string'&&!Array[_0x10b271(_0x4dd29d._0x239687)](_0x119b86)&&Object['keys'](_0x119b86)['forEach'](function(_0x185e76){var _0x1b133c=_0x10b271;if(_0x185e76!=='default'&&!(_0x185e76 in _0x12933a)){var _0x542f18=Object[_0x1b133c(_0x1a910f._0x189c9d)](_0x119b86,_0x185e76);Object[_0x1b133c(_0x1a910f._0x54b5e5)](_0x12933a,_0x185e76,_0x542f18['get']?_0x542f18:{'enumerable':!![],'get':function(){return _0x119b86[_0x185e76];}});}});}),_0x12933a;}var mars3d__namespace=_interopNamespace(mars3d),commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!==_0xf673b1(0xd9)?global:typeof self!=='undefined'?self:{},heatmap$1={'exports':{}};(function(_0x455174){var _0x33d449={_0x30d65d:0x10f};(function(_0x7f2d63,_0x389dcf,_0x4bb9db){var _0x1bd172=_0x343f;_0x455174[_0x1bd172(0xe5)]?_0x455174['exports']=_0x4bb9db():_0x389dcf[_0x7f2d63]=_0x4bb9db();}('h337',commonjsGlobal,function(){var _0x30348d={_0x3de9e9:0x13c,_0x55e5db:0x15f},_0x572f3f={_0x27ce8b:0x144},_0x1684db={_0x4620c6:0x11f,_0x431f33:0x11f,_0x36e201:0x11f},_0x58d1b2={_0x3b566c:0xfd,_0x3b5c7a:0x10e},_0x2efaba={_0x6efe00:0xe6,_0x3481eb:0xf9},_0x567535={_0x465952:0xcb,_0x44a74e:0x10b},_0x19c2d1={_0x400176:0x12d},_0x984f1={_0x1d39b1:0x135,_0xc4a62a:0x109,_0x4723c6:0xf9,_0x1c654d:0xc9,_0x15fcfd:0x10d,_0x3ff238:0xd7,_0x879d53:0xe4,_0xbc8046:0x132},_0x1869f1={_0x9379bd:0xf3,_0x495068:0x130},_0x1d55eb={_0x53a405:0x15a},_0x5d2ec7={_0x54cd16:0x157},_0x462dd4={_0x30b8a2:0x15a,_0x2c52cf:0xd6,_0x34b3e3:0x14d},_0x46274e={_0x38559f:0xd0,_0x27a882:0xd3},_0x445f1e={_0x482e77:0xe0,_0xb564f2:0xcd,_0x29e195:0xfc},_0x5e7361=_0x343f,_0x115c10={'defaultRadius':0x28,'defaultRenderer':'canvas2d','defaultGradient':{0.25:'rgb(0,0,255)',0.55:'rgb(0,255,0)',0.85:_0x5e7361(0x105),0x1:'rgb(255,0,0)'},'defaultMaxOpacity':0x1,'defaultMinOpacity':0x0,'defaultBlur':0.85,'defaultXField':'x','defaultYField':'y','defaultValueField':_0x5e7361(_0x33d449._0x30d65d),'plugins':{}},_0x6c4051=function _0x3b7dd6(){var _0x4c5801={_0x360dec:0x116},_0x3a5be0={_0x3b4735:0x14d},_0x2b797=function _0x48304b(_0x51c837){var _0x430531=_0x343f;this['_coordinator']={},this['_data']=[],this['_radi']=[],this['_min']=0xa,this['_max']=0x1,this['_xField']=_0x51c837[_0x430531(0x127)]||_0x51c837['defaultXField'],this[_0x430531(0x147)]=_0x51c837['yField']||_0x51c837[_0x430531(_0x445f1e._0x482e77)],this['_valueField']=_0x51c837['valueField']||_0x51c837['defaultValueField'],_0x51c837[_0x430531(_0x445f1e._0xb564f2)]&&(this[_0x430531(_0x445f1e._0x29e195)]=_0x51c837[_0x430531(0xcd)]);},_0x21fff6=_0x115c10['defaultRadius'];return _0x2b797['prototype']={'_organiseData':function(_0x4d92c8,_0x1bf4aa){var _0xfe411f=_0x343f,_0x3f5ff1=_0x4d92c8[this['_xField']],_0x5c7be9=_0x4d92c8[this['_yField']],_0x5b3c5c=this['_radi'],_0x1906be=this[_0xfe411f(_0x46274e._0x38559f)],_0x3a685c=this['_max'],_0x44ff66=this['_min'],_0x50bf76=_0x4d92c8[this[_0xfe411f(0x15e)]]||0x1,_0x4612ff=_0x4d92c8['radius']||this['_cfgRadius']||_0x21fff6;!_0x1906be[_0x3f5ff1]&&(_0x1906be[_0x3f5ff1]=[],_0x5b3c5c[_0x3f5ff1]=[]);!_0x1906be[_0x3f5ff1][_0x5c7be9]?(_0x1906be[_0x3f5ff1][_0x5c7be9]=_0x50bf76,_0x5b3c5c[_0x3f5ff1][_0x5c7be9]=_0x4612ff):_0x1906be[_0x3f5ff1][_0x5c7be9]+=_0x50bf76;var _0x42362e=_0x1906be[_0x3f5ff1][_0x5c7be9];if(_0x42362e>_0x3a685c)return!_0x1bf4aa?this['_max']=_0x42362e:this[_0xfe411f(_0x46274e._0x27a882)](_0x42362e),![];else return _0x42362e<_0x44ff66?(!_0x1bf4aa?this['_min']=_0x42362e:this[_0xfe411f(0x163)](_0x42362e),![]):{'x':_0x3f5ff1,'y':_0x5c7be9,'value':_0x50bf76,'radius':_0x4612ff,'min':_0x44ff66,'max':_0x3a685c};},'_unOrganizeData':function(){var _0x563638=_0x343f,_0x4e0425=[],_0x50732e=this['_data'],_0x273e53=this['_radi'];for(var _0x76eb0d in _0x50732e){for(var _0x535d48 in _0x50732e[_0x76eb0d]){_0x4e0425['push']({'x':_0x76eb0d,'y':_0x535d48,'radius':_0x273e53[_0x76eb0d][_0x535d48],'value':_0x50732e[_0x76eb0d][_0x535d48]});}}return{'min':this['_min'],'max':this[_0x563638(0x116)],'data':_0x4e0425};},'_onExtremaChange':function(){var _0x5ad2f0=_0x343f;this[_0x5ad2f0(_0x462dd4._0x30b8a2)][_0x5ad2f0(_0x462dd4._0x2c52cf)](_0x5ad2f0(0x15b),{'min':this[_0x5ad2f0(_0x462dd4._0x34b3e3)],'max':this['_max']});},'addData':function(){var _0x2976dc=_0x343f;if(arguments[0x0]['length']>0x0){var _0x410570=arguments[0x0],_0x324b07=_0x410570[_0x2976dc(_0x5d2ec7._0x54cd16)];while(_0x324b07--){this[_0x2976dc(0x108)]['call'](this,_0x410570[_0x324b07]);}}else{var _0x587325=this['_organiseData'](arguments[0x0],!![]);_0x587325&&(this['_data']['length']===0x0&&(this['_min']=this['_max']=_0x587325['value']),this['_coordinator']['emit']('renderpartial',{'min':this['_min'],'max':this['_max'],'data':[_0x587325]}));}return this;},'setData':function(_0x249450){var _0x36b176=_0x343f,_0x56fff3=_0x249450['data'],_0x443b04=_0x56fff3[_0x36b176(0x157)];this['_data']=[],this['_radi']=[];for(var _0x229dd9=0x0;_0x229dd9<_0x443b04;_0x229dd9++){this['_organiseData'](_0x56fff3[_0x229dd9],![]);}return this['_max']=_0x249450[_0x36b176(0x152)],this[_0x36b176(0x14d)]=_0x249450['min']||0x0,this[_0x36b176(0x113)](),this['_coordinator']['emit']('renderall',this['_getInternalData']()),this;},'removeData':function(){},'setDataMax':function(_0x1bc6db){var _0xdb13b9=_0x343f;return this['_max']=_0x1bc6db,this['_onExtremaChange'](),this['_coordinator']['emit'](_0xdb13b9(0x115),this['_getInternalData']()),this;},'setDataMin':function(_0x1547f6){var _0x28b769=_0x343f;return this[_0x28b769(_0x3a5be0._0x3b4735)]=_0x1547f6,this['_onExtremaChange'](),this['_coordinator']['emit']('renderall',this['_getInternalData']()),this;},'setCoordinator':function(_0x1b18d2){var _0x1597b9=_0x343f;this[_0x1597b9(_0x1d55eb._0x53a405)]=_0x1b18d2;},'_getInternalData':function(){var _0x377cd6=_0x343f;return{'max':this[_0x377cd6(_0x4c5801._0x360dec)],'min':this['_min'],'data':this['_data'],'radi':this[_0x377cd6(0xc6)]};},'getData':function(){return this['_unOrganizeData']();}},_0x2b797;}(),_0x2040c6=function _0x38ab35(){var _0xbfe26e={_0x36d81d:0xe6,_0x24ba39:0x118,_0x282144:0x120,_0x3194e0:0xf9,_0x5b9982:0xf9},_0x262e51={_0x32a805:0xc8,_0x361d42:0x13e,_0x5d624b:0x161,_0x415614:0x136,_0x58ebf1:0xf8},_0x48e2a6={_0x50e2af:0x109,_0xd68bc0:0x12c},_0x22a399={_0x121d37:0x109,_0x55bb49:0x100},_0x3e88dd=function(_0x51bc71){var _0x512128=_0x343f,_0x2b0b96=_0x51bc71['gradient']||_0x51bc71['defaultGradient'],_0xe4031=document[_0x512128(_0x22a399._0x121d37)](_0x512128(0x135)),_0x3f7415=_0xe4031['getContext']('2d',{'willReadFrequently':!![]});_0xe4031['width']=0x100,_0xe4031['height']=0x1;var _0x39f415=_0x3f7415['createLinearGradient'](0x0,0x0,0x100,0x1);for(var _0x9bae97 in _0x2b0b96){_0x39f415['addColorStop'](_0x9bae97,_0x2b0b96[_0x9bae97]);}return _0x3f7415['fillStyle']=_0x39f415,_0x3f7415['fillRect'](0x0,0x0,0x100,0x1),_0x3f7415[_0x512128(_0x22a399._0x55bb49)](0x0,0x0,0x100,0x1)[_0x512128(0xe6)];},_0x311772=function(_0x34db17,_0x17fee5){var _0x1d1442=_0x343f,_0x4e72a1=document[_0x1d1442(_0x48e2a6._0x50e2af)]('canvas'),_0x1d9327=_0x4e72a1['getContext']('2d',{'willReadFrequently':!![]}),_0x47e81e=_0x34db17,_0x35b3f7=_0x34db17;_0x4e72a1['width']=_0x4e72a1[_0x1d1442(0xd7)]=_0x34db17*0x2;if(_0x17fee5==0x1)_0x1d9327[_0x1d1442(0x111)](),_0x1d9327['arc'](_0x47e81e,_0x35b3f7,_0x34db17,0x0,0x2*Math['PI'],![]),_0x1d9327['fillStyle']=_0x1d1442(_0x48e2a6._0xd68bc0),_0x1d9327['fill']();else{var _0x1ae23a=_0x1d9327['createRadialGradient'](_0x47e81e,_0x35b3f7,_0x34db17*_0x17fee5,_0x47e81e,_0x35b3f7,_0x34db17);_0x1ae23a[_0x1d1442(0x148)](0x0,'rgba(0,0,0,1)'),_0x1ae23a[_0x1d1442(0x148)](0x1,'rgba(0,0,0,0)'),_0x1d9327['fillStyle']=_0x1ae23a,_0x1d9327['fillRect'](0x0,0x0,0x2*_0x34db17,0x2*_0x34db17);}return _0x4e72a1;},_0x1816be=function(_0x47493e){var _0xcc4ed6=_0x343f,_0x3b44b3=[],_0x150fa7=_0x47493e['min'],_0x503850=_0x47493e['max'],_0x2ffb22=_0x47493e[_0xcc4ed6(_0x1869f1._0x9379bd)],_0x47493e=_0x47493e['data'],_0x5b173f=Object[_0xcc4ed6(_0x1869f1._0x495068)](_0x47493e),_0x4a6d28=_0x5b173f['length'];while(_0x4a6d28--){var _0x12e0d8=_0x5b173f[_0x4a6d28],_0x2909b2=Object['keys'](_0x47493e[_0x12e0d8]),_0x44fa1a=_0x2909b2['length'];while(_0x44fa1a--){var _0x45691c=_0x2909b2[_0x44fa1a],_0x27a47d=_0x47493e[_0x12e0d8][_0x45691c],_0x1f23c3=_0x2ffb22[_0x12e0d8][_0x45691c];_0x3b44b3['push']({'x':_0x12e0d8,'y':_0x45691c,'value':_0x27a47d,'radius':_0x1f23c3});}}return{'min':_0x150fa7,'max':_0x503850,'data':_0x3b44b3};};function _0x230057(_0x45f05f){var _0x292ab1=_0x343f,_0x2d98d6=_0x45f05f['container'],_0x2195a7=this['shadowCanvas']=document['createElement'](_0x292ab1(_0x984f1._0x1d39b1)),_0x136f27=this['canvas']=_0x45f05f['canvas']||document[_0x292ab1(_0x984f1._0xc4a62a)]('canvas');this[_0x292ab1(_0x984f1._0x4723c6)]=[0x2710,0x2710,0x0,0x0];var _0x5c743a=getComputedStyle(_0x45f05f[_0x292ab1(0xf1)])||{};_0x136f27[_0x292ab1(_0x984f1._0x1c654d)]='heatmap-canvas',this['_width']=_0x136f27['width']=_0x2195a7[_0x292ab1(0x10b)]=_0x45f05f['width']||+_0x5c743a['width'][_0x292ab1(_0x984f1._0x15fcfd)](/px/,''),this[_0x292ab1(0x160)]=_0x136f27['height']=_0x2195a7['height']=_0x45f05f['height']||+_0x5c743a[_0x292ab1(_0x984f1._0x3ff238)]['replace'](/px/,''),this['shadowCtx']=_0x2195a7['getContext']('2d',{'willReadFrequently':!![]}),this['ctx']=_0x136f27['getContext']('2d',{'willReadFrequently':!![]}),_0x136f27[_0x292ab1(_0x984f1._0x879d53)]['cssText']=_0x2195a7['style'][_0x292ab1(0x158)]='position:absolute;left:0;top:0;',_0x2d98d6['style']['position']=_0x292ab1(_0x984f1._0xbc8046),_0x2d98d6['appendChild'](_0x136f27),this['_palette']=_0x3e88dd(_0x45f05f),this['_templates']={},this['_setStyles'](_0x45f05f);}return _0x230057['prototype']={'renderPartial':function(_0x46fbb9){_0x46fbb9['data']['length']>0x0&&(this['_drawAlpha'](_0x46fbb9),this['_colorize']());},'renderAll':function(_0x5cef6e){var _0x5eefad=_0x343f;this[_0x5eefad(_0x19c2d1._0x400176)](),_0x5cef6e['data']['length']>0x0&&(this['_drawAlpha'](_0x1816be(_0x5cef6e)),this['_colorize']());},'_updateGradient':function(_0x9174ab){this['_palette']=_0x3e88dd(_0x9174ab);},'updateConfig':function(_0x2efb6a){var _0x2f0642=_0x343f;_0x2efb6a[_0x2f0642(0x162)]&&this['_updateGradient'](_0x2efb6a),this['_setStyles'](_0x2efb6a);},'setDimensions':function(_0x233828,_0xf7c816){var _0x5d7b06=_0x343f;this[_0x5d7b06(0x14b)]=_0x233828,this['_height']=_0xf7c816,this['canvas']['width']=this[_0x5d7b06(_0x567535._0x465952)][_0x5d7b06(_0x567535._0x44a74e)]=_0x233828,this['canvas'][_0x5d7b06(0xd7)]=this['shadowCanvas']['height']=_0xf7c816;},'_clear':function(){var _0x582654=_0x343f;this['shadowCtx']['clearRect'](0x0,0x0,this[_0x582654(0x14b)],this['_height']),this['ctx'][_0x582654(0x128)](0x0,0x0,this['_width'],this['_height']);},'_setStyles':function(_0x3b51ef){var _0x2a3538=_0x343f;this['_blur']=_0x3b51ef['blur']==0x0?0x0:_0x3b51ef['blur']||_0x3b51ef['defaultBlur'],_0x3b51ef['backgroundColor']&&(this['canvas']['style']['backgroundColor']=_0x3b51ef['backgroundColor']),this['_width']=this['canvas'][_0x2a3538(0x10b)]=this['shadowCanvas']['width']=_0x3b51ef['width']||this['_width'],this[_0x2a3538(0x160)]=this['canvas']['height']=this['shadowCanvas']['height']=_0x3b51ef[_0x2a3538(0xd7)]||this['_height'],this['_opacity']=(_0x3b51ef[_0x2a3538(_0x262e51._0x32a805)]||0x0)*0xff,this['_maxOpacity']=(_0x3b51ef[_0x2a3538(_0x262e51._0x361d42)]||_0x3b51ef[_0x2a3538(0xfe)])*0xff,this[_0x2a3538(_0x262e51._0x5d624b)]=(_0x3b51ef[_0x2a3538(_0x262e51._0x415614)]||_0x3b51ef['defaultMinOpacity'])*0xff,this[_0x2a3538(_0x262e51._0x58ebf1)]=!!_0x3b51ef['useGradientOpacity'];},'_drawAlpha':function(_0x554f82){var _0x4016e5=_0x343f,_0x543c58=this['_min']=_0x554f82['min'],_0x1e96d0=this[_0x4016e5(0x116)]=_0x554f82['max'],_0x554f82=_0x554f82[_0x4016e5(_0xbfe26e._0x36d81d)]||[],_0x22b6a8=_0x554f82[_0x4016e5(0x157)],_0x1b8571=0x1-this[_0x4016e5(_0xbfe26e._0x24ba39)];while(_0x22b6a8--){var _0x52d1b0=_0x554f82[_0x22b6a8],_0x4ccb2d=_0x52d1b0['x'],_0x2f05a9=_0x52d1b0['y'],_0x597c2e=_0x52d1b0['radius'],_0xd6c4a5=Math['min'](_0x52d1b0['value'],_0x1e96d0),_0x12218f=_0x4ccb2d-_0x597c2e,_0x14d79e=_0x2f05a9-_0x597c2e,_0x475149=this[_0x4016e5(_0xbfe26e._0x282144)],_0x15ad92;!this['_templates'][_0x597c2e]?this[_0x4016e5(0xcf)][_0x597c2e]=_0x15ad92=_0x311772(_0x597c2e,_0x1b8571):_0x15ad92=this['_templates'][_0x597c2e];var _0x5ee303=(_0xd6c4a5-_0x543c58)/(_0x1e96d0-_0x543c58);_0x475149['globalAlpha']=_0x5ee303<0.01?0.01:_0x5ee303,_0x475149['drawImage'](_0x15ad92,_0x12218f,_0x14d79e),_0x12218f<this[_0x4016e5(0xf9)][0x0]&&(this['_renderBoundaries'][0x0]=_0x12218f),_0x14d79e<this['_renderBoundaries'][0x1]&&(this[_0x4016e5(_0xbfe26e._0x3194e0)][0x1]=_0x14d79e),_0x12218f+0x2*_0x597c2e>this['_renderBoundaries'][0x2]&&(this['_renderBoundaries'][0x2]=_0x12218f+0x2*_0x597c2e),_0x14d79e+0x2*_0x597c2e>this[_0x4016e5(_0xbfe26e._0x5b9982)][0x3]&&(this[_0x4016e5(_0xbfe26e._0x5b9982)][0x3]=_0x14d79e+0x2*_0x597c2e);}},'_colorize':function(){var _0x2dd994=_0x343f,_0x1faa6b=this[_0x2dd994(0xf9)][0x0],_0x5a52c2=this['_renderBoundaries'][0x1],_0x382cf2=this['_renderBoundaries'][0x2]-_0x1faa6b,_0x762478=this['_renderBoundaries'][0x3]-_0x5a52c2,_0x1f7327=this['_width'],_0x3c5caf=this[_0x2dd994(0x160)],_0x364284=this['_opacity'],_0x17f57a=this['_maxOpacity'],_0x395b09=this['_minOpacity'],_0x17bbbd=this['_useGradientOpacity'];_0x1faa6b<0x0&&(_0x1faa6b=0x0);_0x5a52c2<0x0&&(_0x5a52c2=0x0);_0x1faa6b+_0x382cf2>_0x1f7327&&(_0x382cf2=_0x1f7327-_0x1faa6b);_0x5a52c2+_0x762478>_0x3c5caf&&(_0x762478=_0x3c5caf-_0x5a52c2);var _0x298216=this['shadowCtx']['getImageData'](_0x1faa6b,_0x5a52c2,_0x382cf2,_0x762478),_0x48d433=_0x298216[_0x2dd994(_0x2efaba._0x6efe00)],_0x2a2e90=_0x48d433['length'],_0x236991=this['_palette'];for(var _0x90e88e=0x3;_0x90e88e<_0x2a2e90;_0x90e88e+=0x4){var _0x452897=_0x48d433[_0x90e88e],_0x1b2a15=_0x452897*0x4;if(!_0x1b2a15)continue;var _0x44a172;_0x364284>0x0?_0x44a172=_0x364284:_0x452897<_0x17f57a?_0x452897<_0x395b09?_0x44a172=_0x395b09:_0x44a172=_0x452897:_0x44a172=_0x17f57a,_0x48d433[_0x90e88e-0x3]=_0x236991[_0x1b2a15],_0x48d433[_0x90e88e-0x2]=_0x236991[_0x1b2a15+0x1],_0x48d433[_0x90e88e-0x1]=_0x236991[_0x1b2a15+0x2],_0x48d433[_0x90e88e]=_0x17bbbd?_0x236991[_0x1b2a15+0x3]:_0x44a172;}this[_0x2dd994(0x102)]['putImageData'](_0x298216,_0x1faa6b,_0x5a52c2),this[_0x2dd994(_0x2efaba._0x3481eb)]=[0x3e8,0x3e8,0x0,0x0];},'getValueAt':function(_0x4419bc){var _0x24ece7=_0x343f,_0x3610aa,_0x1ab264=this['shadowCtx'],_0x3b4f7b=_0x1ab264[_0x24ece7(0x100)](_0x4419bc['x'],_0x4419bc['y'],0x1,0x1),_0x48aa12=_0x3b4f7b['data'][0x3],_0x17f0d6=this['_max'],_0x2c9e4d=this['_min'];return _0x3610aa=Math['abs'](_0x17f0d6-_0x2c9e4d)*(_0x48aa12/0xff)>>0x0,_0x3610aa;},'getDataURL':function(){return this['canvas']['toDataURL']();}},_0x230057;}(),_0x3e3631=function _0xa8e365(){var _0x4baaae=![];return _0x115c10['defaultRenderer']==='canvas2d'&&(_0x4baaae=_0x2040c6),_0x4baaae;}(),_0x522bea={'merge':function(){var _0x27a1b0={},_0x266d99=arguments['length'];for(var _0x28f1ff=0x0;_0x28f1ff<_0x266d99;_0x28f1ff++){var _0x4d5bb3=arguments[_0x28f1ff];for(var _0x1e90a4 in _0x4d5bb3){_0x27a1b0[_0x1e90a4]=_0x4d5bb3[_0x1e90a4];}}return _0x27a1b0;}},_0x3ad70d=function _0x1b075f(){var _0x17a8e8={_0x4778ab:0x11f},_0x3522ec={_0x4bb1c4:0x151,_0x51247e:0xe2},_0x2d0a38={_0x5e6e70:0x11f},_0x4255b1={_0x13f28f:0x11f},_0x1bdd90={_0x49d0e5:0x11f,_0x6942e1:0xde,_0x4f22ad:0x15b},_0x55e9ed={_0x3299bb:0x119},_0x4eb13b={_0x1ea2e5:0x15d},_0x3633fb=function _0x318d32(){function _0x35f7d0(){var _0x3d6478=_0x343f;this[_0x3d6478(_0x4eb13b._0x1ea2e5)]={};}return _0x35f7d0['prototype']={'on':function(_0x338b25,_0x3bb1a1,_0x10ed29){var _0x2327d6=_0x343f,_0x5928c4=this['cStore'];!_0x5928c4[_0x338b25]&&(_0x5928c4[_0x338b25]=[]),_0x5928c4[_0x338b25][_0x2327d6(0x133)](function(_0x296d48){return _0x3bb1a1['call'](_0x10ed29,_0x296d48);});},'emit':function(_0xee333a,_0x233d2b){var _0x360631=this['cStore'];if(_0x360631[_0xee333a]){var _0x12144e=_0x360631[_0xee333a]['length'];for(var _0x39e155=0x0;_0x39e155<_0x12144e;_0x39e155++){var _0x2870f5=_0x360631[_0xee333a][_0x39e155];_0x2870f5(_0x233d2b);}}}},_0x35f7d0;}(),_0x1b8d40=function(_0x48c23f){var _0x1150be=_0x343f,_0x116ce7=_0x48c23f['_renderer'],_0x3bb2af=_0x48c23f['_coordinator'],_0x401893=_0x48c23f[_0x1150be(_0x1bdd90._0x49d0e5)];_0x3bb2af['on']('renderpartial',_0x116ce7[_0x1150be(_0x1bdd90._0x6942e1)],_0x116ce7),_0x3bb2af['on']('renderall',_0x116ce7['renderAll'],_0x116ce7),_0x3bb2af['on'](_0x1150be(_0x1bdd90._0x4f22ad),function(_0x419f49){var _0x2955cf=_0x1150be;_0x48c23f['_config']['onExtremaChange']&&_0x48c23f[_0x2955cf(0x119)]['onExtremaChange']({'min':_0x419f49[_0x2955cf(0x153)],'max':_0x419f49['max'],'gradient':_0x48c23f[_0x2955cf(_0x55e9ed._0x3299bb)]['gradient']||_0x48c23f[_0x2955cf(_0x55e9ed._0x3299bb)]['defaultGradient']});}),_0x401893[_0x1150be(0x11e)](_0x3bb2af);};function _0xbe3806(){var _0x1c3707=_0x343f,_0x2329f4=this['_config']=_0x522bea['merge'](_0x115c10,arguments[0x0]||{});this['_coordinator']=new _0x3633fb();if(_0x2329f4['plugin']){var _0x4e1b21=_0x2329f4[_0x1c3707(_0x58d1b2._0x3b566c)];if(!_0x115c10[_0x1c3707(0x14c)][_0x4e1b21])throw new Error('Plugin\x20\x27'+_0x4e1b21+_0x1c3707(_0x58d1b2._0x3b5c7a));else{var _0x3b917b=_0x115c10['plugins'][_0x4e1b21];this['_renderer']=new _0x3b917b[(_0x1c3707(0xec))](_0x2329f4),this['_store']=new _0x3b917b[(_0x1c3707(0x124))](_0x2329f4);}}else this['_renderer']=new _0x3e3631(_0x2329f4),this[_0x1c3707(0x11f)]=new _0x6c4051(_0x2329f4);_0x1b8d40(this);}return _0xbe3806['prototype']={'addData':function(){var _0x3d895d=_0x343f;return this['_store'][_0x3d895d(0x108)]['apply'](this[_0x3d895d(_0x4255b1._0x13f28f)],arguments),this;},'removeData':function(){var _0x58b927=_0x343f;return this[_0x58b927(_0x1684db._0x4620c6)]['removeData']&&this[_0x58b927(_0x1684db._0x431f33)]['removeData']['apply'](this[_0x58b927(_0x1684db._0x36e201)],arguments),this;},'setData':function(){var _0x9422ce=_0x343f;return this[_0x9422ce(_0x2d0a38._0x5e6e70)]['setData']['apply'](this[_0x9422ce(0x11f)],arguments),this;},'setDataMax':function(){var _0x29e3ca=_0x343f;return this['_store']['setDataMax']['apply'](this[_0x29e3ca(0x11f)],arguments),this;},'setDataMin':function(){var _0x1317a0=_0x343f;return this[_0x1317a0(0x11f)]['setDataMin']['apply'](this['_store'],arguments),this;},'configure':function(_0x14b719){var _0x54a484=_0x343f;return this['_config']=_0x522bea[_0x54a484(_0x3522ec._0x4bb1c4)](this['_config'],_0x14b719),this['_renderer'][_0x54a484(_0x3522ec._0x51247e)](this['_config']),this['_coordinator'][_0x54a484(0xd6)]('renderall',this['_store']['_getInternalData']()),this;},'repaint':function(){var _0x104eea=_0x343f;return this['_coordinator']['emit'](_0x104eea(0x115),this[_0x104eea(_0x17a8e8._0x4778ab)]['_getInternalData']()),this;},'getData':function(){return this['_store']['getData']();},'getDataURL':function(){var _0x5c90af=_0x343f;return this['_renderer'][_0x5c90af(_0x572f3f._0x27ce8b)]();},'getValueAt':function(_0x4a8403){var _0x3f4339=_0x343f;if(this['_store']['getValueAt'])return this['_store'][_0x3f4339(_0x30348d._0x3de9e9)](_0x4a8403);else return this[_0x3f4339(_0x30348d._0x55e5db)]['getValueAt']?this['_renderer'][_0x3f4339(0x13c)](_0x4a8403):null;}},_0xbe3806;}(),_0x36f784={'create':function(_0x21f4b5){return new _0x3ad70d(_0x21f4b5);},'register':function(_0x2e6e56,_0x1c3892){var _0x241afd=_0x5e7361;_0x115c10[_0x241afd(0x14c)][_0x2e6e56]=_0x1c3892;}};return _0x36f784;}));}(heatmap$1));var heatmap=heatmap$1['exports'],h337=_mergeNamespaces({'__proto__':null,'default':heatmap},[heatmap$1['exports']]),HeatMaterial=_0xf673b1(0xee);if(!heatmap$1['exports']['create'])throw new Error('请引入\x20heatmap.js\x20库\x20');const Cesium=mars3d__namespace[_0xf673b1(0x14f)],BaseLayer=mars3d__namespace['layer']['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:_0xf673b1(0xdb),0.8:_0xf673b1(0x105),0.9:_0xf673b1(0x12b)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance'][_0xf673b1(0xed)]};class HeatLayer extends BaseLayer{constructor(_0x14d758={}){var _0x41ca89={_0x43f475:0xea,_0x5eadb8:0x104,_0x480b4a:0x104,_0x39aee3:0xef},_0x59a4cc=_0xf673b1;super(_0x14d758),this[_0x59a4cc(0x104)]['maxCanvasSize']=this['options']['maxCanvasSize']??document[_0x59a4cc(_0x41ca89._0x43f475)]['clientWidth'],this[_0x59a4cc(_0x41ca89._0x5eadb8)]['maxCanvasSize']=Math['min'](this[_0x59a4cc(0x104)]['maxCanvasSize'],0x1388),this[_0x59a4cc(_0x41ca89._0x480b4a)]['minCanvasSize']=this['options']['minCanvasSize']??document[_0x59a4cc(0xea)][_0x59a4cc(0xd8)],this['options']['minCanvasSize']=Math['max'](this['options']['minCanvasSize'],0x2bc),this['options'][_0x59a4cc(_0x41ca89._0x39aee3)]={...DEF_HEATSTYLE,...this['options']['heatStyle']},this[_0x59a4cc(0x104)]['style']={...DEF_STYLE,...this['options']['style']};}get['layer'](){var _0x721200={_0x517e86:0x14a},_0x4b1713=_0xf673b1;return this[_0x4b1713(_0x721200._0x517e86)];}get['heatStyle'](){return this['options']['heatStyle'];}set['heatStyle'](_0x4d9a09){var _0x53bd42={_0x586b8c:0x140},_0x1e77f5=_0xf673b1;this['options']['heatStyle']=mars3d__namespace['Util']['merge'](this['options']['heatStyle'],_0x4d9a09),this['_heat']&&(this['_heat']['configure'](this['options']['heatStyle']),this[_0x1e77f5(_0x53bd42._0x586b8c)](!![]));}get['style'](){return this['options']['style'];}set[_0xf673b1(0xe4)](_0x223960){var _0x262e66={_0x2f50e3:0x104},_0x51bb8a=_0xf673b1;this[_0x51bb8a(_0x262e66._0x2f50e3)]['style']=mars3d__namespace['Util']['merge'](this['options'][_0x51bb8a(0xe4)],_0x223960);}get[_0xf673b1(0xf7)](){return this['_positions'];}set['positions'](_0x3ca48b){this['setPositions'](_0x3ca48b);}get[_0xf673b1(0x13f)](){var _0x5bc68a={_0x66c152:0xd2},_0xecda25=_0xf673b1;const _0x3ea321=[];return this[_0xecda25(_0x5bc68a._0x66c152)][_0xecda25(0x10a)](_0x193cdc=>{_0x3ea321['push'](_0x193cdc['toArray']());}),_0x3ea321;}get[_0xf673b1(0x117)](){return this['_rectangle'];}['_setOptionsHook'](_0x290bb7,_0x53ff92){_0x290bb7['positions']&&(this['positions']=_0x290bb7['positions']);}[_0xf673b1(0xdd)](){var _0x37875c={_0x33927d:0xcc},_0x5badab=_0xf673b1;this['style']['type']===_0x5badab(_0x37875c._0x33927d)?this['_layer']=new mars3d__namespace['layer']['ImageLayer']({'crs':'EPSG:3857','private':!![]}):this['_layer']=new mars3d__namespace['layer']['GraphicLayer']({'private':!![]});}['_addedHook'](){var _0x1a5486={_0x1ddcdb:0x11d,_0x5e04d9:0xca,_0x2efc8d:0xd4,_0xace871:0xe7},_0x12a5e1=_0xf673b1;this[_0x12a5e1(_0x1a5486._0x1ddcdb)]['addLayer'](this['_layer']),this[_0x12a5e1(_0x1a5486._0x5e04d9)]=mars3d__namespace['DomUtil'][_0x12a5e1(_0x1a5486._0x2efc8d)]('div','mars3d-heatmap\x20mars3d-hideDiv',this[_0x12a5e1(0x11d)]['container']),this['options']['positions']&&(this['positions']=this['options']['positions']),this[_0x12a5e1(0x104)]['flyTo']&&this[_0x12a5e1(_0x1a5486._0xace871)]();}['_removedHook'](){var _0x70f7f4=_0xf673b1;this['_container']&&(mars3d__namespace['DomUtil']['remove'](this['_container']),delete this[_0x70f7f4(0xca)]),this[_0x70f7f4(0xeb)](),this['_map'][_0x70f7f4(0x101)](this['_layer']);}['addPosition'](_0x50a6db,_0x5571d0){var _0x38437c=_0xf673b1;this['_positions']=this['_positions']||[],this[_0x38437c(0xf0)]['push'](_0x50a6db),this['_updatePositionsHook'](_0x5571d0);}['setPositions'](_0x4cfa2e,_0x24dd43){this['_positions']=_0x4cfa2e,this['_updatePositionsHook'](_0x24dd43);}['clear'](){var _0xc5517a={_0x41699e:0xce},_0x31c354=_0xf673b1;this['_graphic']&&(this['_layer'][_0x31c354(_0xc5517a._0x41699e)](this['_graphic'],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer'][_0x31c354(0xce)](this['_graphic2'],!![]),delete this['_graphic2']);}['_updatePositionsHook'](_0x1a7ad1){var _0x5619b2={_0x3f0225:0xf7,_0x5103c6:0x129,_0x2a55b3:0x121,_0x52eca6:0xe4,_0x141c8e:0x139,_0x1dec54:0xe8},_0x5c71e7=_0xf673b1;if(!this[_0x5c71e7(0xda)]||!this['_map']||!this['positions']||this[_0x5c71e7(_0x5619b2._0x3f0225)]['length']===0x0)return this;const _0x12fe89=this['_getHeatCanvas']();if(this['style']['type']===_0x5c71e7(0xcc))this['_layer']['setOptions']({'url':_0x12fe89[_0x5c71e7(_0x5619b2._0x5103c6)](_0x5c71e7(_0x5619b2._0x2a55b3),0x1),'rectangle':this['_rectangle'],'opacity':this['style'][_0x5c71e7(0xc8)]});else this[_0x5c71e7(_0x5619b2._0x52eca6)]['arc']?this['_graphic']&&_0x1a7ad1?(this['_graphic']['uniforms']['image']=_0x12fe89,this[_0x5c71e7(_0x5619b2._0x141c8e)]['uniforms']['bumpMap']=this['_getArcHeatCanvas'](),this[_0x5c71e7(0x14e)]&&(this['_graphic2']['uniforms']['image']=_0x12fe89,this[_0x5c71e7(0x14e)]['uniforms']['bumpMap']=this['_graphic'][_0x5c71e7(_0x5619b2._0x1dec54)]['bumpMap'])):this['_createArcGraphic'](_0x12fe89):this['_graphic']&&_0x1a7ad1?this['_graphic'][_0x5c71e7(0xe8)][_0x5c71e7(0xcc)]=_0x12fe89:this['_createGraphic'](_0x12fe89);return this;}[_0xf673b1(0x143)](_0x1971fb){var _0x126fdf={_0x14bd9b:0x139,_0x2cdebf:0x110,_0x23413b:0x13a},_0x18a1db=_0xf673b1;this['clear'](),this[_0x18a1db(_0x126fdf._0x14bd9b)]=new mars3d__namespace[(_0x18a1db(_0x126fdf._0x2cdebf))]['RectanglePrimitive']({...this['options'],'rectangle':this[_0x18a1db(_0x126fdf._0x23413b)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':mars3d__namespace['MaterialUtil'][_0x18a1db(0x12e)](mars3d__namespace['MaterialType']['Image2'],{'image':_0x1971fb}),'flat':!![]})}),this['_layer'][_0x18a1db(0x112)](this['_graphic']);}[_0xf673b1(0xff)](_0x539960){var _0x49670d={_0x1fdb70:0x146,_0x640f44:0x10c,_0x368c38:0xdc,_0x36a567:0xe4,_0x3812af:0x152,_0x311aa0:0xe4,_0x4c0990:0xe4,_0x2f9329:0x12a,_0x2ded62:0x137,_0x50edca:0x131,_0x5d4ff1:0x14e,_0x2b7357:0x13a},_0x4ae9c6=_0xf673b1;this['clear']();const _0x1bd4d3=Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x4ae9c6(0x145)][_0x4ae9c6(_0x49670d._0x1fdb70)],'frontOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium[_0x4ae9c6(0x164)]['KEEP'],'zPass':Cesium['StencilOperation']['REPLACE']},'backFunction':Cesium['StencilFunction']['ALWAYS'],'backOperation':{'fail':Cesium[_0x4ae9c6(0x164)]['KEEP'],'zFail':Cesium['StencilOperation'][_0x4ae9c6(_0x49670d._0x640f44)],'zPass':Cesium['StencilOperation'][_0x4ae9c6(0xdf)]},'reference':0x2,'mask':0x2},'blending':Cesium[_0x4ae9c6(_0x49670d._0x368c38)][_0x4ae9c6(0x159)]}),_0x55fa4c=Math['floor'](this[_0x4ae9c6(_0x49670d._0x36a567)]['diffHeight']??this[_0x4ae9c6(0x141)]*0.02)+0.1;this[_0x4ae9c6(0xe4)]['diffHeight']&&delete this['style']['diffHeight'];const _0x5cf6f8=(this['style']['splitNum'],0x64);let _0x57f2e2=Math[_0x4ae9c6(_0x49670d._0x3812af)](this[_0x4ae9c6(0x13a)][_0x4ae9c6(0xd7)],this['_rectangle']['width']);this[_0x4ae9c6(_0x49670d._0x311aa0)][_0x4ae9c6(0xf4)]=_0x57f2e2/=_0x5cf6f8;const _0x5a7349=new Cesium[(_0x4ae9c6(0xe9))]({'fabric':{'uniforms':{'image':_0x539960,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x5b6e2d=this[_0x4ae9c6(_0x49670d._0x4c0990)]['arcDirection']||0x1;this['_graphic']=new mars3d__namespace['graphic'][(_0x4ae9c6(_0x49670d._0x2f9329))]({...this[_0x4ae9c6(0x104)],'rectangle':this['_rectangle'],'appearance':new Cesium[(_0x4ae9c6(_0x49670d._0x2ded62))]({'flat':!![],'aboveGround':!![],'renderState':_0x1bd4d3,'material':_0x5a7349,'vertexShaderSource':getVertexShaderSource(_0x55fa4c*_0x5b6e2d)})}),this['_layer']['addGraphic'](this['_graphic']),this['style'][_0x4ae9c6(_0x49670d._0x50edca)]===0x0&&(this[_0x4ae9c6(_0x49670d._0x5d4ff1)]=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this[_0x4ae9c6(_0x49670d._0x2b7357)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x1bd4d3,'material':_0x5a7349,'vertexShaderSource':getVertexShaderSource(-_0x55fa4c)})}),this['_layer']['addGraphic'](this['_graphic2']));}['getRectangle'](_0x3c27b1){var _0x3dab13={_0x402c28:0x13a},_0x5c3487=_0xf673b1;return _0x3c27b1!==null&&_0x3c27b1!==void 0x0&&_0x3c27b1[_0x5c3487(0xfa)]&&this['_rectangle']?mars3d__namespace['PolyUtil']['formatRectangle'](this[_0x5c3487(_0x3dab13._0x402c28)]):this['_rectangle'];}['_getHeatCanvas'](){var _0xd1c69f={_0x505947:0x166,_0x334903:0x142,_0x1d237c:0x15c,_0x3f9d32:0xef,_0x15c00b:0xf6,_0xa5d160:0x104,_0x3e92bc:0x114,_0x2c31e6:0x12f,_0x3ee232:0x11c,_0x106ff0:0xca,_0x5ea3d9:0x122},_0x5e8545={_0x2539aa:0x134,_0x1b7a7f:0x134},_0x586cc7=_0xf673b1;const _0x111d60=this['_positions'],_0x2b4175=[];let _0x102223,_0x5896b5,_0x16e986,_0x47ad0e;_0x111d60['forEach'](_0x3d2868=>{var _0x56a7d1=_0x343f;const _0x68dfb0=mars3d__namespace['LngLatPoint']['parse'](_0x3d2868);if(!_0x68dfb0)return;_0x68dfb0[_0x56a7d1(0x10f)]=_0x3d2868['value']||0x1,!this['options']['rectangle']&&(_0x102223===undefined?(_0x102223=_0x68dfb0[_0x56a7d1(_0x5e8545._0x2539aa)],_0x5896b5=_0x68dfb0[_0x56a7d1(_0x5e8545._0x1b7a7f)],_0x16e986=_0x68dfb0['lat'],_0x47ad0e=_0x68dfb0['lat']):(_0x102223=Math['min'](_0x102223,_0x68dfb0['lng']),_0x5896b5=Math['max'](_0x5896b5,_0x68dfb0['lng']),_0x16e986=Math['min'](_0x16e986,_0x68dfb0['lat']),_0x47ad0e=Math['max'](_0x47ad0e,_0x68dfb0['lat']))),_0x2b4175['push'](_0x68dfb0);});_0x102223===_0x5896b5&&(_0x102223-=0.000001,_0x5896b5+=0.000001);_0x16e986===_0x47ad0e&&(_0x16e986-=0.000001,_0x47ad0e+=0.000001);let _0x80c3f=this['options']['rectangle']||{'xmin':_0x102223,'xmax':_0x5896b5,'ymin':_0x16e986,'ymax':_0x47ad0e};const _0xb14f64=getMercatorBounds(_0x80c3f),_0x4620ec=Math['abs'](_0xb14f64['xmax']-_0xb14f64[_0x586cc7(0x114)]),_0x6c1a01=Math['abs'](_0xb14f64['ymax']-_0xb14f64[_0x586cc7(_0xd1c69f._0x505947)]),_0x3c6d6a=Math[_0x586cc7(0x152)](_0x4620ec,_0x6c1a01),_0x146828=Math['min'](_0x4620ec,_0x6c1a01);this['_mBoundsMax']=_0x3c6d6a;let _0x1aff19=0x1;if(_0x3c6d6a>this[_0x586cc7(0x104)][_0x586cc7(_0xd1c69f._0x334903)])_0x1aff19=_0x3c6d6a/this['options']['maxCanvasSize'],_0x146828/_0x1aff19<this['options']['minCanvasSize']&&(_0x1aff19=_0x146828/this[_0x586cc7(0x104)][_0x586cc7(_0xd1c69f._0x1d237c)]);else _0x146828<this['options'][_0x586cc7(0x15c)]&&(_0x1aff19=_0x146828/this['options'][_0x586cc7(0x15c)],_0x3c6d6a/_0x1aff19>this['options']['maxCanvasSize']&&(_0x1aff19=_0x3c6d6a/this['options'][_0x586cc7(0x142)]));const _0x20efc6=this[_0x586cc7(_0xd1c69f._0x3f9d32)]['radius']*1.5,_0x2f12c5=_0x4620ec/_0x1aff19+_0x20efc6*0x2,_0x31988e=_0x6c1a01/_0x1aff19+_0x20efc6*0x2,_0x2eefc3=_0x20efc6*_0x1aff19;_0xb14f64[_0x586cc7(0x114)]-=_0x2eefc3,_0xb14f64['ymin']-=_0x2eefc3,_0xb14f64[_0x586cc7(_0xd1c69f._0x15c00b)]+=_0x2eefc3,_0xb14f64['ymax']+=_0x2eefc3,_0xb14f64['xmin']=Math['max'](_0xb14f64['xmin'],-20037508.34),_0xb14f64['xmax']=Math['min'](_0xb14f64['xmax'],20037508.34),_0xb14f64['ymin']=Math['max'](_0xb14f64[_0x586cc7(0x166)],-20037508.34),_0xb14f64['ymax']=Math['min'](_0xb14f64['ymax'],20037508.34),this['_scale']=_0x1aff19,_0x80c3f=geLatLngBounds(_0xb14f64),this[_0x586cc7(0x13a)]=Cesium['Rectangle'][_0x586cc7(0x138)](_0x80c3f[_0x586cc7(0x114)],_0x80c3f['ymin'],_0x80c3f['xmax'],_0x80c3f['ymax']);let _0x24eb42=_0x2b4175[0x0]['value']??0x1,_0x44b76d=_0x2b4175[0x0]['value']??0x0;const _0x4188f7=[];_0x2b4175[_0x586cc7(0x10a)](_0x597aba=>{const _0x11092b=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x597aba['lng'],_0x597aba['lat']]),_0x27fe57=_0x597aba['value']||0x1,_0x44a424=Math['round']((_0x11092b[0x0]-_0xb14f64['xmin'])/_0x1aff19),_0x494870=Math['round']((_0xb14f64['ymax']-_0x11092b[0x1])/_0x1aff19);_0x24eb42=Math['max'](_0x24eb42,_0x27fe57),_0x44b76d=Math['min'](_0x44b76d,_0x27fe57),_0x4188f7['push']({'x':_0x44a424,'y':_0x494870,'value':_0x27fe57});});const _0x5edfd5={'min':this['options']['min']??_0x44b76d,'max':this[_0x586cc7(_0xd1c69f._0xa5d160)]['max']??_0x24eb42,'data':_0x4188f7};this['_last_heatData']=_0x5edfd5;if(!this[_0x586cc7(0x11c)]||_0xb14f64[_0x586cc7(_0xd1c69f._0x3e92bc)]!==this['_last_mBounds']['xmin']||_0xb14f64['ymin']!==this['_last_mBounds']['ymin']||_0xb14f64['xmax']!==this['_last_mBounds']['xmax']||_0xb14f64[_0x586cc7(_0xd1c69f._0x2c31e6)]!==this['_last_mBounds'][_0x586cc7(0x12f)]){this[_0x586cc7(_0xd1c69f._0x3ee232)]=_0xb14f64,this[_0x586cc7(_0xd1c69f._0x106ff0)]['style']['cssText']=_0x586cc7(0x11a)+_0x2f12c5+'px;height:'+_0x31988e+'px;';const _0x3b41bb={...this['heatStyle'],'container':this[_0x586cc7(_0xd1c69f._0x106ff0)]};!this[_0x586cc7(0x122)]?this[_0x586cc7(_0xd1c69f._0x5ea3d9)]=heatmap$1['exports'][_0x586cc7(0xd4)](_0x3b41bb):this['_heat']['configure'](_0x3b41bb);}this['_heat']['setData'](_0x5edfd5);const _0x58e667=mars3d__namespace['DomUtil'][_0x586cc7(0x126)](this['_heat'][_0x586cc7(0x15f)]['canvas']);return _0x58e667;}['_getArcHeatCanvas'](){var _0x10b9b8={_0x18feb9:0xd1,_0x4568c3:0x125,_0x1a13da:0x122},_0x393e67=_0xf673b1;this['_heat'][_0x393e67(_0x10b9b8._0x18feb9)]({'radius':this['heatStyle']['radius']*this['style']['arcRadiusScale'],'blur':this['heatStyle'][_0x393e67(_0x10b9b8._0x4568c3)]*this['style']['arcBlurScale'],'gradient':this['heatStyle']['gradientArc']||{0.25:'rgb(0,0,0)',0.55:'rgb(140,140,140)',0.85:'rgb(216,216,216)',0x1:'rgb(255,255,255)'}});const _0x4f7f54=mars3d__namespace['DomUtil']['copyCanvas'](this[_0x393e67(_0x10b9b8._0x1a13da)]['_renderer']['canvas']);return this[_0x393e67(0x122)]['configure'](this['options']['heatStyle']),_0x4f7f54;}['getPointData'](_0x3d4eba){var _0x3aee43={_0x555ca6:0x134},_0xc24bb1=_0xf673b1;const _0x2fa4b0=mars3d__namespace['LngLatPoint']['parse'](_0x3d4eba);if(!_0x2fa4b0)return{};const _0x34df88=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x2fa4b0[_0xc24bb1(_0x3aee43._0x555ca6)],_0x2fa4b0['lat']]),_0x2138a0=this[_0xc24bb1(0x11c)],_0x2e3468=Math['round']((_0x34df88[0x0]-_0x2138a0['xmin'])/this[_0xc24bb1(0x123)]),_0x407b94=Math['round']((_0x2138a0['ymax']-_0x34df88[0x1])/this['_scale']),_0x1ffb3b=this['_heat']['getValueAt']({'x':_0x2e3468,'y':_0x407b94}),_0x5a60e4=this['_heat']['_renderer'][_0xc24bb1(0x102)][_0xc24bb1(0x100)](_0x2e3468-0x1,_0x407b94-0x1,0x1,0x1)['data'];return{'x':_0x2e3468,'y':_0x407b94,'value':_0x1ffb3b,'color':'rgba('+_0x5a60e4[0x0]+','+_0x5a60e4[0x1]+','+_0x5a60e4[0x2]+','+_0x5a60e4[0x3]+')'};}}mars3d__namespace[_0xf673b1(0xe3)][_0xf673b1(0x103)]('heat',HeatLayer),mars3d__namespace[_0xf673b1(0x155)]['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337;function getMercatorBounds(_0x20f086){var _0x106227={_0x550610:0x154,_0x5840df:0x156,_0x54a678:0xf6},_0x57593c=_0xf673b1;const _0x561ce6=mars3d__namespace['PointTrans'][_0x57593c(_0x106227._0x550610)]([_0x20f086[_0x57593c(0x114)],_0x20f086['ymin']]),_0x247293=mars3d__namespace[_0x57593c(_0x106227._0x5840df)]['lonlat2mercator']([_0x20f086[_0x57593c(_0x106227._0x54a678)],_0x20f086['ymax']]);return{'xmin':_0x561ce6[0x0],'ymin':_0x561ce6[0x1],'xmax':_0x247293[0x0],'ymax':_0x247293[0x1]};}function geLatLngBounds(_0x1aed26){var _0x7b6b3f=_0xf673b1;const _0x3e886e=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x1aed26['xmin'],_0x1aed26['ymin']]),_0x426e72=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x1aed26[_0x7b6b3f(0xf6)],_0x1aed26['ymax']]);return{'xmin':_0x3e886e[0x0],'ymin':_0x3e886e[0x1],'xmax':_0x426e72[0x0],'ymax':_0x426e72[0x1]};}function getVertexShaderSource(_0x3a175d){return'in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'+_0x3a175d+';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a';}exports['HeatLayer']=HeatLayer,Object[_0xf673b1(0xf2)](exports,'__esModule',{'value':!![]});
}));
