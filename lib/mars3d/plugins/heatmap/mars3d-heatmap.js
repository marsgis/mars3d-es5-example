/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.6.9
 * 编译日期：2023-10-15 21:14:06
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';function _0x51b9(_0x10debf,_0x3cd90d){const _0x536732=_0x5367();return _0x51b9=function(_0x51b960,_0x2acaa9){_0x51b960=_0x51b960-0x12c;let _0x3d9efa=_0x536732[_0x51b960];return _0x3d9efa;},_0x51b9(_0x10debf,_0x3cd90d);}const _0x3292a1=_0x51b9;(function(_0x4d0605,_0x35a8f8){const _0x500d30={_0x49c41a:0x13e,_0xc04cf3:0x13b},_0x450c25=_0x51b9,_0x23f77a=_0x4d0605();while(!![]){try{const _0xcfc382=-parseInt(_0x450c25(_0x500d30._0x49c41a))/0x1+-parseInt(_0x450c25(0x14a))/0x2+parseInt(_0x450c25(0x173))/0x3+-parseInt(_0x450c25(0x160))/0x4+parseInt(_0x450c25(_0x500d30._0xc04cf3))/0x5+parseInt(_0x450c25(0x144))/0x6+parseInt(_0x450c25(0x177))/0x7;if(_0xcfc382===_0x35a8f8)break;else _0x23f77a['push'](_0x23f77a['shift']());}catch(_0x363d21){_0x23f77a['push'](_0x23f77a['shift']());}}}(_0x5367,0x9e8d0));function _interopNamespace(_0x4fa35b){const _0x1c1b43={_0x589341:0x12c};if(_0x4fa35b&&_0x4fa35b['__esModule'])return _0x4fa35b;var _0x21f27b=Object['create'](null);return _0x4fa35b&&Object['keys'](_0x4fa35b)['forEach'](function(_0x511445){const _0x3fd906=_0x51b9;if(_0x511445!=='default'){var _0xda8fff=Object[_0x3fd906(_0x1c1b43._0x589341)](_0x4fa35b,_0x511445);Object[_0x3fd906(0x13a)](_0x21f27b,_0x511445,_0xda8fff['get']?_0xda8fff:{'enumerable':!![],'get':function(){return _0x4fa35b[_0x511445];}});}}),_0x21f27b['default']=_0x4fa35b,_0x21f27b;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337),HeatMaterial=_0x3292a1(0x137);if(!h337__namespace['create'])throw new Error('请引入\x20heatmap.js\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:'green',0.8:_0x3292a1(0x171),0.9:_0x3292a1(0x17a)}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x3292a1(0x15f)]['VERTEX_FORMAT']};class HeatLayer extends BaseLayer{constructor(_0x1f485c={}){const _0x3dd14f={_0x28c310:0x14b,_0xb963aa:0x166},_0xa9ca34=_0x3292a1;super(_0x1f485c),this[_0xa9ca34(_0x3dd14f._0x28c310)]['maxCanvasSize']=this['options']['maxCanvasSize']??document[_0xa9ca34(0x168)][_0xa9ca34(0x136)],this[_0xa9ca34(_0x3dd14f._0x28c310)]['maxCanvasSize']=Math['min'](this['options']['maxCanvasSize'],0x1388),this[_0xa9ca34(_0x3dd14f._0x28c310)]['minCanvasSize']=this[_0xa9ca34(0x14b)][_0xa9ca34(0x166)]??document['body']['clientHeight'],this[_0xa9ca34(_0x3dd14f._0x28c310)][_0xa9ca34(_0x3dd14f._0xb963aa)]=Math['max'](this['options']['minCanvasSize'],0x2bc),this['options'][_0xa9ca34(0x14c)]={...DEF_HEATSTYLE,...this[_0xa9ca34(_0x3dd14f._0x28c310)]['heatStyle']},this['options']['style']={...DEF_STYLE,...this['options']['style']};}get['layer'](){return this['_layer'];}get['heatStyle'](){return this['options']['heatStyle'];}set[_0x3292a1(0x14c)](_0x15785b){const _0xbad4f={_0x57c2fe:0x14b,_0x1af500:0x178},_0x17cea7=_0x3292a1;this[_0x17cea7(0x14b)]['heatStyle']=mars3d__namespace['Util'][_0x17cea7(0x143)](this[_0x17cea7(0x14b)]['heatStyle'],_0x15785b),this['_heat']&&(this['_heat']['configure'](this[_0x17cea7(_0xbad4f._0x57c2fe)]['heatStyle']),this[_0x17cea7(_0xbad4f._0x1af500)](!![]));}get['style'](){const _0x199f77=_0x3292a1;return this['options'][_0x199f77(0x155)];}set['style'](_0x3f2f92){this['options']['style']=mars3d__namespace['Util']['merge'](this['options']['style'],_0x3f2f92);}get['positions'](){return this['_positions'];}set['positions'](_0x7c34f8){this['setPositions'](_0x7c34f8);}get['coordinates'](){const _0x83f02c=_0x3292a1,_0x199145=[];return this[_0x83f02c(0x147)][_0x83f02c(0x17e)](_0x13d865=>{const _0x2d89dd=_0x83f02c;_0x199145['push'](_0x13d865[_0x2d89dd(0x175)]());}),_0x199145;}get[_0x3292a1(0x159)](){const _0x2037b2=_0x3292a1;return this[_0x2037b2(0x142)];}[_0x3292a1(0x152)](_0x1ef9ac,_0x538d58){_0x1ef9ac['positions']&&(this['positions']=_0x1ef9ac['positions']);}['_mountedHook'](){const _0x16dd51={_0x3bac35:0x15e},_0x4bcc93=_0x3292a1;this['style'][_0x4bcc93(_0x16dd51._0x3bac35)]==='image'?this['_layer']=new mars3d__namespace[(_0x4bcc93(0x165))]['ImageLayer']({'crs':_0x4bcc93(0x15b),'private':!![]}):this['_layer']=new mars3d__namespace[(_0x4bcc93(0x165))]['GraphicLayer']({'private':!![]});}[_0x3292a1(0x140)](){const _0x189a13={_0x6cadb7:0x169,_0xcdd23e:0x146},_0x450e0a=_0x3292a1;this['_map']['addLayer'](this[_0x450e0a(0x16c)]),this['_container']=mars3d__namespace[_0x450e0a(_0x189a13._0x6cadb7)][_0x450e0a(0x176)](_0x450e0a(_0x189a13._0xcdd23e),'mars3d-heatmap\x20mars3d-hideDiv',this[_0x450e0a(0x181)]['container']),this['options']['positions']&&(this['positions']=this['options'][_0x450e0a(0x14d)]),this['options']['flyTo']&&this['flyToByAnimationEnd']();}[_0x3292a1(0x17c)](){const _0x12dbd2={_0x237aa8:0x172},_0x2c14c1=_0x3292a1;this['_container']&&(mars3d__namespace[_0x2c14c1(0x169)]['remove'](this['_container']),delete this[_0x2c14c1(_0x12dbd2._0x237aa8)]),this['clear'](),this[_0x2c14c1(0x181)]['removeLayer'](this['_layer']);}['addPosition'](_0x5d0ec3,_0x5d7d01){const _0x2f039b=_0x3292a1;this['_positions']=this[_0x2f039b(0x16b)]||[],this[_0x2f039b(0x16b)]['push'](_0x5d0ec3),this['_updatePositionsHook'](_0x5d7d01);}['setPositions'](_0x2a7308,_0x26b418){this['_positions']=_0x2a7308,this['_updatePositionsHook'](_0x26b418);}['clear'](){const _0x451f6f={_0x1e3b8b:0x16c},_0xe6f33e=_0x3292a1;this['_graphic']&&(this[_0xe6f33e(_0x451f6f._0x1e3b8b)]['removeGraphic'](this['_graphic'],!![]),delete this[_0xe6f33e(0x15d)]),this['_graphic2']&&(this['_layer']['removeGraphic'](this['_graphic2'],!![]),delete this['_graphic2']);}['_updatePositionsHook'](_0x5b1230){const _0x359462={_0x31a25c:0x12f,_0x373a9f:0x155,_0x5b9369:0x162,_0x526ed2:0x153,_0x55aeea:0x157,_0x5e4921:0x183,_0x31ed8a:0x15d,_0x58bb87:0x132},_0x54c332=_0x3292a1;if(!this[_0x54c332(_0x359462._0x31a25c)]||!this['_map']||!this['positions']||this['positions']['length']===0x0)return this;const _0x997236=this['_getHeatCanvas']();if(this[_0x54c332(_0x359462._0x373a9f)]['type']===_0x54c332(0x183))this['_layer']['setOptions']({'url':_0x997236[_0x54c332(_0x359462._0x5b9369)]('image/png'),'rectangle':this['_rectangle'],'opacity':this['style']['opacity']});else this['style']['arc']?this['_graphic']&&_0x5b1230?(this['_graphic'][_0x54c332(0x153)][_0x54c332(0x183)]=_0x997236,this[_0x54c332(0x15d)][_0x54c332(_0x359462._0x526ed2)]['bumpMap']=this['_getArcHeatCanvas'](),this['_graphic2']&&(this[_0x54c332(_0x359462._0x55aeea)][_0x54c332(0x153)][_0x54c332(_0x359462._0x5e4921)]=_0x997236,this['_graphic2'][_0x54c332(0x153)]['bumpMap']=this[_0x54c332(_0x359462._0x31ed8a)]['uniforms'][_0x54c332(_0x359462._0x58bb87)])):this[_0x54c332(0x182)](_0x997236):this['_graphic']&&_0x5b1230?this['_graphic']['uniforms'][_0x54c332(0x183)]=_0x997236:this['_createGraphic'](_0x997236);return this;}['_createGraphic'](_0x40b77d){const _0x29facf={_0x4b1876:0x138},_0x4633f9=_0x3292a1;this['clear'](),this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':new Cesium['Material']({'fabric':{'uniforms':{'image':_0x40b77d},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})}),this['_layer'][_0x4633f9(_0x29facf._0x4b1876)](this['_graphic']);}['_createArcGraphic'](_0x395f9){const _0x5a22e8={_0x372d42:0x135,_0x52237e:0x16f,_0x6c2ef5:0x16a,_0x34e8d4:0x155,_0x5ec358:0x16c,_0x139fd9:0x138,_0x257f97:0x14b,_0x1a5524:0x15f},_0x3cf4bc=_0x3292a1;this['clear']();const _0x1a4de6=Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x3cf4bc(_0x5a22e8._0x372d42)]['ALWAYS'],'frontOperation':{'fail':Cesium['StencilOperation'][_0x3cf4bc(_0x5a22e8._0x52237e)],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium['StencilOperation'][_0x3cf4bc(_0x5a22e8._0x6c2ef5)]},'backFunction':Cesium['StencilFunction']['ALWAYS'],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation'][_0x3cf4bc(_0x5a22e8._0x52237e)],'zPass':Cesium['StencilOperation']['REPLACE']},'reference':0x2,'mask':0x2},'blending':Cesium[_0x3cf4bc(0x156)]['ALPHA_BLEND']}),_0x40216a=Math['floor'](this[_0x3cf4bc(0x155)]['diffHeight']??this['_mBoundsMax']*0.02)+0.1;this['style']['diffHeight']&&delete this['style']['diffHeight'];const _0x319da8=(this[_0x3cf4bc(0x155)]['splitNum'],0x64);let _0x1006d0=Math['max'](this['_rectangle']['height'],this['_rectangle']['width']);this[_0x3cf4bc(_0x5a22e8._0x34e8d4)][_0x3cf4bc(0x154)]=_0x1006d0/=_0x319da8;const _0x38a0b4=new Cesium['Material']({'fabric':{'uniforms':{'image':_0x395f9,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x29612f=this['style']['arcDirection']||0x1;this['_graphic']=new mars3d__namespace[(_0x3cf4bc(0x16e))]['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x1a4de6,'material':_0x38a0b4,'vertexShaderSource':getVertexShaderSource(_0x40216a*_0x29612f)})}),this[_0x3cf4bc(_0x5a22e8._0x5ec358)][_0x3cf4bc(_0x5a22e8._0x139fd9)](this['_graphic']),this['style']['arcDirection']===0x0&&(this[_0x3cf4bc(0x157)]=new mars3d__namespace['graphic']['RectanglePrimitive']({...this[_0x3cf4bc(_0x5a22e8._0x257f97)],'rectangle':this[_0x3cf4bc(0x142)],'appearance':new Cesium[(_0x3cf4bc(_0x5a22e8._0x1a5524))]({'flat':!![],'aboveGround':!![],'renderState':_0x1a4de6,'material':_0x38a0b4,'vertexShaderSource':getVertexShaderSource(-_0x40216a)})}),this[_0x3cf4bc(0x16c)][_0x3cf4bc(_0x5a22e8._0x139fd9)](this['_graphic2']));}['getRectangle'](_0x44c046){const _0x45d236=_0x3292a1;return _0x44c046!==null&&_0x44c046!==void 0x0&&_0x44c046[_0x45d236(0x133)]&&this['_rectangle']?mars3d__namespace['PolyUtil']['formatRectangle'](this['_rectangle']):this['_rectangle'];}[_0x3292a1(0x179)](){const _0x1c0640={_0x3c7884:0x14b,_0x252be3:0x174,_0x11a8ba:0x166,_0x23631a:0x14e,_0x4ee09a:0x12d,_0x457033:0x134,_0x1c178a:0x17d,_0x40de63:0x172},_0x29da03={_0x3602a9:0x16d},_0x101c95={_0x132d86:0x148,_0x4cea81:0x167,_0x4e24be:0x17f,_0x38bb54:0x167},_0x24f087=_0x3292a1,_0x140866=this['_positions'],_0x98a1f1=[];let _0x1b6331,_0x585e4b,_0x979110,_0x43036d;_0x140866['forEach'](_0x236553=>{const _0x405dfb=_0x51b9,_0x2e031f=mars3d__namespace[_0x405dfb(_0x101c95._0x132d86)]['parse'](_0x236553);if(!_0x2e031f)return;_0x2e031f['value']=_0x236553['value']||0x1,!this[_0x405dfb(0x14b)]['rectangle']&&(_0x1b6331===undefined?(_0x1b6331=_0x2e031f['lng'],_0x585e4b=_0x2e031f['lng'],_0x979110=_0x2e031f[_0x405dfb(_0x101c95._0x4cea81)],_0x43036d=_0x2e031f['lat']):(_0x1b6331=Math['min'](_0x1b6331,_0x2e031f[_0x405dfb(_0x101c95._0x4e24be)]),_0x585e4b=Math['max'](_0x585e4b,_0x2e031f['lng']),_0x979110=Math['min'](_0x979110,_0x2e031f['lat']),_0x43036d=Math['max'](_0x43036d,_0x2e031f[_0x405dfb(_0x101c95._0x38bb54)]))),_0x98a1f1['push'](_0x2e031f);});_0x1b6331===_0x585e4b&&(_0x1b6331-=0.000001,_0x585e4b+=0.000001);_0x979110===_0x43036d&&(_0x979110-=0.000001,_0x43036d+=0.000001);let _0x3c5e28=this[_0x24f087(_0x1c0640._0x3c7884)][_0x24f087(0x159)]||{'xmin':_0x1b6331,'xmax':_0x585e4b,'ymin':_0x979110,'ymax':_0x43036d};const _0x1b0dba=getMercatorBounds(_0x3c5e28),_0x4f8e7c=Math['abs'](_0x1b0dba['xmax']-_0x1b0dba['xmin']),_0x2e809a=Math['abs'](_0x1b0dba['ymax']-_0x1b0dba[_0x24f087(0x17d)]),_0x3396b8=Math['max'](_0x4f8e7c,_0x2e809a),_0x442ea5=Math['min'](_0x4f8e7c,_0x2e809a);this[_0x24f087(_0x1c0640._0x252be3)]=_0x3396b8;let _0x2e5d11=0x1;if(_0x3396b8>this[_0x24f087(0x14b)]['maxCanvasSize'])_0x2e5d11=_0x3396b8/this['options']['maxCanvasSize'],_0x442ea5/_0x2e5d11<this[_0x24f087(0x14b)]['minCanvasSize']&&(_0x2e5d11=_0x442ea5/this['options'][_0x24f087(_0x1c0640._0x11a8ba)]);else _0x442ea5<this['options']['minCanvasSize']&&(_0x2e5d11=_0x442ea5/this[_0x24f087(0x14b)]['minCanvasSize'],_0x3396b8/_0x2e5d11>this['options']['maxCanvasSize']&&(_0x2e5d11=_0x3396b8/this[_0x24f087(0x14b)][_0x24f087(0x161)]));const _0x49441f=this['heatStyle'][_0x24f087(_0x1c0640._0x23631a)]*1.5,_0x149a42=_0x4f8e7c/_0x2e5d11+_0x49441f*0x2,_0xac30d1=_0x2e809a/_0x2e5d11+_0x49441f*0x2,_0x3b8c43=_0x49441f*_0x2e5d11;_0x1b0dba['xmin']-=_0x3b8c43,_0x1b0dba['ymin']-=_0x3b8c43,_0x1b0dba[_0x24f087(_0x1c0640._0x4ee09a)]+=_0x3b8c43,_0x1b0dba['ymax']+=_0x3b8c43,this['_scale']=_0x2e5d11,_0x3c5e28=geLatLngBounds(_0x1b0dba),this['_rectangle']=Cesium['Rectangle']['fromDegrees'](_0x3c5e28['xmin'],_0x3c5e28['ymin'],_0x3c5e28['xmax'],_0x3c5e28['ymax']);let _0x3f4f06=_0x98a1f1[0x0]['value']??0x1,_0x215dea=_0x98a1f1[0x0][_0x24f087(0x180)]??0x0;const _0x3daf2c=[];_0x98a1f1['forEach'](_0x5d1677=>{const _0x57dc67=_0x24f087,_0x482bcc=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x5d1677['lng'],_0x5d1677['lat']]),_0x308151=_0x5d1677['value']||0x1,_0x237c2b=Math[_0x57dc67(0x164)]((_0x482bcc[0x0]-_0x1b0dba['xmin'])/_0x2e5d11),_0x21801b=Math['round']((_0x1b0dba['ymax']-_0x482bcc[0x1])/_0x2e5d11);_0x3f4f06=Math[_0x57dc67(0x134)](_0x3f4f06,_0x308151),_0x215dea=Math[_0x57dc67(0x141)](_0x215dea,_0x308151),_0x3daf2c[_0x57dc67(_0x29da03._0x3602a9)]({'x':_0x237c2b,'y':_0x21801b,'value':_0x308151});});const _0x3b467e={'min':this['options']['min']??_0x215dea,'max':this['options'][_0x24f087(_0x1c0640._0x457033)]??_0x3f4f06,'data':_0x3daf2c};this['_last_heatData']=_0x3b467e;if(!this[_0x24f087(0x14f)]||_0x1b0dba[_0x24f087(0x12e)]!==this['_last_mBounds']['xmin']||_0x1b0dba[_0x24f087(0x17d)]!==this['_last_mBounds'][_0x24f087(_0x1c0640._0x1c178a)]||_0x1b0dba['xmax']!==this['_last_mBounds'][_0x24f087(0x12d)]||_0x1b0dba['ymax']!==this['_last_mBounds']['ymax']){this['_last_mBounds']=_0x1b0dba,this[_0x24f087(_0x1c0640._0x40de63)]['style']['cssText']='width:'+_0x149a42+'px;height:'+_0xac30d1+'px;';const _0x2935b3={...this['heatStyle'],'container':this['_container']};!this['_heat']?this['_heat']=h337__namespace['create'](_0x2935b3):this['_heat']['configure'](_0x2935b3);}this['_heat']['setData'](_0x3b467e);const _0x1968f0=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat']['_renderer']['canvas']);return _0x1968f0;}['_getArcHeatCanvas'](){const _0x4e6d7b={_0x5e31c2:0x150,_0x1b77c9:0x130,_0x548e10:0x14c,_0x5c75aa:0x14e,_0xaddd3a:0x131,_0x4c181b:0x151,_0x225d36:0x13c,_0x160367:0x139,_0xd56dac:0x149,_0x48f757:0x150},_0x398ad8=_0x3292a1;this[_0x398ad8(_0x4e6d7b._0x5e31c2)][_0x398ad8(_0x4e6d7b._0x1b77c9)]({'radius':this[_0x398ad8(_0x4e6d7b._0x548e10)][_0x398ad8(_0x4e6d7b._0x5c75aa)]*this['style'][_0x398ad8(_0x4e6d7b._0xaddd3a)],'blur':this['heatStyle']['blur']*this['style']['arcBlurScale'],'gradient':this['heatStyle']['gradientArc']||{0.25:_0x398ad8(_0x4e6d7b._0x4c181b),0.55:'rgb(140,140,140)',0.85:_0x398ad8(_0x4e6d7b._0x225d36),0x1:_0x398ad8(_0x4e6d7b._0x160367)}});const _0x2b2579=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat'][_0x398ad8(_0x4e6d7b._0xd56dac)][_0x398ad8(0x145)]);return this[_0x398ad8(_0x4e6d7b._0x48f757)][_0x398ad8(0x130)](this['options']['heatStyle']),_0x2b2579;}['getPointData'](_0x11334c){const _0x17e3f8={_0x25dd89:0x12e,_0x47bfd2:0x170,_0x5ede40:0x15a},_0x473b71=_0x3292a1,_0x4ee31f=mars3d__namespace['LngLatPoint'][_0x473b71(0x158)](_0x11334c);if(!_0x4ee31f)return{};const _0x11fbce=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x4ee31f['lng'],_0x4ee31f['lat']]),_0x3b9171=this['_last_mBounds'],_0x26e281=Math['round']((_0x11fbce[0x0]-_0x3b9171[_0x473b71(_0x17e3f8._0x25dd89)])/this['_scale']),_0x4d0b06=Math['round']((_0x3b9171['ymax']-_0x11fbce[0x1])/this['_scale']),_0x1dc035=this['_heat']['getValueAt']({'x':_0x26e281,'y':_0x4d0b06}),_0x504429=this['_heat']['_renderer'][_0x473b71(_0x17e3f8._0x47bfd2)]['getImageData'](_0x26e281-0x1,_0x4d0b06-0x1,0x1,0x1)[_0x473b71(_0x17e3f8._0x5ede40)];return{'x':_0x26e281,'y':_0x4d0b06,'value':_0x1dc035,'color':'rgba('+_0x504429[0x0]+','+_0x504429[0x1]+','+_0x504429[0x2]+','+_0x504429[0x3]+')'};}}mars3d__namespace['LayerUtil'][_0x3292a1(0x163)]('heat',HeatLayer),mars3d__namespace['layer']['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337__namespace;function getMercatorBounds(_0x3c5b9b){const _0x525024=_0x3292a1,_0x3923c3=mars3d__namespace['PointTrans'][_0x525024(0x15c)]([_0x3c5b9b['xmin'],_0x3c5b9b['ymin']]),_0x310a7e=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x3c5b9b['xmax'],_0x3c5b9b[_0x525024(0x13f)]]);return{'xmin':_0x3923c3[0x0],'ymin':_0x3923c3[0x1],'xmax':_0x310a7e[0x0],'ymax':_0x310a7e[0x1]};}function geLatLngBounds(_0x86a65){const _0x360c20=_0x3292a1,_0x1a95f3=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x86a65['xmin'],_0x86a65[_0x360c20(0x17d)]]),_0x374998=mars3d__namespace[_0x360c20(0x13d)]['mercator2lonlat']([_0x86a65['xmax'],_0x86a65[_0x360c20(0x13f)]]);return{'xmin':_0x1a95f3[0x0],'ymin':_0x1a95f3[0x1],'xmax':_0x374998[0x0],'ymax':_0x374998[0x1]};}function _0x5367(){const _0xc2cb4=['StencilFunction','clientWidth','uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a','addGraphic','rgb(255,255,255)','defineProperty','4991605dEscQg','rgb(216,216,216)','PointTrans','991241gmdwhY','ymax','_addedHook','min','_rectangle','merge','2113740DyqzzL','canvas','div','points','LngLatPoint','_renderer','1158660hLSiPY','options','heatStyle','positions','radius','_last_mBounds','_heat','rgb(0,0,0)','_setOptionsHook','uniforms','granularity','style','BlendingState','_graphic2','parse','rectangle','data','EPSG:3857','lonlat2mercator','_graphic','type','EllipsoidSurfaceAppearance','3266344VuckMf','maxCanvasSize','toDataURL','register','round','layer','minCanvasSize','lat','body','DomUtil','REPLACE','_positions','_layer','push','graphic','KEEP','ctx','yellow','_container','624060wGIcPq','_mBoundsMax','toArray','create','10345650AOwpIT','_updatePositionsHook','_getHeatCanvas','red','__esModule','_removedHook','ymin','forEach','lng','value','_map','_createArcGraphic','image','getOwnPropertyDescriptor','xmax','xmin','show','configure','arcRadiusScale','bumpMap','isFormat','max'];_0x5367=function(){return _0xc2cb4;};return _0x5367();}function getVertexShaderSource(_0x2732bb){return'in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'+_0x2732bb+';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a';}exports['HeatLayer']=HeatLayer,Object['defineProperty'](exports,_0x3292a1(0x17b),{'value':!![]});
}));
