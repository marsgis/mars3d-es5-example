/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.7.0
 * 编译日期：2024-01-14 21:58:35
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';const _0x3d2c59=_0x24fc;function _0x24fc(_0x2d17ab,_0x3cf4ba){const _0x46ff76=_0x46ff();return _0x24fc=function(_0x24fc8d,_0x3c8973){_0x24fc8d=_0x24fc8d-0x14d;let _0x425c23=_0x46ff76[_0x24fc8d];return _0x425c23;},_0x24fc(_0x2d17ab,_0x3cf4ba);}(function(_0x24ff01,_0x9187d8){const _0xfb4ce9={_0x19cde1:0x188,_0x2761a8:0x193,_0x359a9b:0x15d,_0x442a62:0x19a},_0x28eafe=_0x24fc,_0x382efc=_0x24ff01();while(!![]){try{const _0x39fcfa=-parseInt(_0x28eafe(_0xfb4ce9._0x19cde1))/0x1+-parseInt(_0x28eafe(_0xfb4ce9._0x2761a8))/0x2*(parseInt(_0x28eafe(_0xfb4ce9._0x359a9b))/0x3)+-parseInt(_0x28eafe(0x14f))/0x4*(parseInt(_0x28eafe(0x168))/0x5)+-parseInt(_0x28eafe(_0xfb4ce9._0x442a62))/0x6+parseInt(_0x28eafe(0x184))/0x7+-parseInt(_0x28eafe(0x195))/0x8+parseInt(_0x28eafe(0x183))/0x9;if(_0x39fcfa===_0x9187d8)break;else _0x382efc['push'](_0x382efc['shift']());}catch(_0x25dfdd){_0x382efc['push'](_0x382efc['shift']());}}}(_0x46ff,0x2272a));function _interopNamespace(_0x5073f9){const _0x33d423=_0x24fc;if(_0x5073f9&&_0x5073f9[_0x33d423(0x166)])return _0x5073f9;var _0x3f0260=Object['create'](null);return _0x5073f9&&Object['keys'](_0x5073f9)['forEach'](function(_0x2d4e0a){const _0x29a602=_0x33d423;if(_0x2d4e0a!==_0x29a602(0x1a0)){var _0x1abd62=Object['getOwnPropertyDescriptor'](_0x5073f9,_0x2d4e0a);Object['defineProperty'](_0x3f0260,_0x2d4e0a,_0x1abd62['get']?_0x1abd62:{'enumerable':!![],'get':function(){return _0x5073f9[_0x2d4e0a];}});}}),_0x3f0260[_0x33d423(0x1a0)]=_0x5073f9,_0x3f0260;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337),HeatMaterial=_0x3d2c59(0x182);if(!h337__namespace['create'])throw new Error('请引入\x20heatmap.js\x20库\x20');const Cesium=mars3d__namespace[_0x3d2c59(0x1a8)],BaseLayer=mars3d__namespace[_0x3d2c59(0x17b)][_0x3d2c59(0x159)],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:'green',0.8:'yellow',0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance'][_0x3d2c59(0x170)]};class HeatLayer extends BaseLayer{constructor(_0x39b851={}){const _0x42ea35={_0x38f915:0x16b,_0x2aacd5:0x18f,_0x48040a:0x190,_0x20ec12:0x190},_0x4e8747=_0x3d2c59;super(_0x39b851),this['options']['maxCanvasSize']=this['options'][_0x4e8747(0x19b)]??document[_0x4e8747(_0x42ea35._0x38f915)][_0x4e8747(0x18c)],this['options']['maxCanvasSize']=Math['min'](this['options']['maxCanvasSize'],0x1388),this['options'][_0x4e8747(0x17a)]=this['options']['minCanvasSize']??document['body'][_0x4e8747(0x15f)],this[_0x4e8747(_0x42ea35._0x2aacd5)]['minCanvasSize']=Math['max'](this['options']['minCanvasSize'],0x2bc),this['options'][_0x4e8747(_0x42ea35._0x48040a)]={...DEF_HEATSTYLE,...this['options'][_0x4e8747(_0x42ea35._0x20ec12)]},this['options']['style']={...DEF_STYLE,...this[_0x4e8747(0x18f)]['style']};}get['layer'](){return this['_layer'];}get['heatStyle'](){const _0x1fd783=_0x3d2c59;return this['options'][_0x1fd783(0x190)];}set['heatStyle'](_0x222ae4){const _0x41343f={_0x3a1833:0x155,_0x5cfbab:0x18f},_0x11beb4=_0x3d2c59;this[_0x11beb4(0x18f)][_0x11beb4(0x190)]=mars3d__namespace[_0x11beb4(_0x41343f._0x3a1833)][_0x11beb4(0x178)](this['options']['heatStyle'],_0x222ae4),this['_heat']&&(this['_heat']['configure'](this[_0x11beb4(_0x41343f._0x5cfbab)]['heatStyle']),this['_updatePositionsHook'](!![]));}get[_0x3d2c59(0x157)](){return this['options']['style'];}set['style'](_0xa5efbe){const _0x132489=_0x3d2c59;this['options']['style']=mars3d__namespace['Util']['merge'](this['options'][_0x132489(0x157)],_0xa5efbe);}get['positions'](){return this['_positions'];}set['positions'](_0x54c561){this['setPositions'](_0x54c561);}get['coordinates'](){const _0x40d18e=[];return this['points']['forEach'](_0x3a00cd=>{_0x40d18e['push'](_0x3a00cd['toArray']());}),_0x40d18e;}get['rectangle'](){return this['_rectangle'];}['_setOptionsHook'](_0x5d48f5,_0x44a66b){const _0x4c3884=_0x3d2c59;_0x5d48f5['positions']&&(this['positions']=_0x5d48f5[_0x4c3884(0x154)]);}['_mountedHook'](){const _0x5f4598=_0x3d2c59;this['style']['type']==='image'?this['_layer']=new mars3d__namespace['layer']['ImageLayer']({'crs':'EPSG:3857','private':!![]}):this['_layer']=new mars3d__namespace['layer'][(_0x5f4598(0x16d))]({'private':!![]});}[_0x3d2c59(0x19f)](){const _0x2dc208={_0x18c968:0x16c,_0x2642b1:0x177,_0x1225cf:0x161},_0x9a3eaf=_0x3d2c59;this[_0x9a3eaf(_0x2dc208._0x18c968)]['addLayer'](this['_layer']),this['_container']=mars3d__namespace[_0x9a3eaf(_0x2dc208._0x2642b1)]['create']('div','mars3d-heatmap\x20mars3d-hideDiv',this['_map'][_0x9a3eaf(_0x2dc208._0x1225cf)]),this['options']['positions']&&(this[_0x9a3eaf(0x154)]=this[_0x9a3eaf(0x18f)]['positions']),this[_0x9a3eaf(0x18f)]['flyTo']&&this['flyToByAnimationEnd']();}['_removedHook'](){const _0x4001b2={_0x39f8c3:0x15a,_0x9e60fb:0x15e},_0x4eac23=_0x3d2c59;this[_0x4eac23(_0x4001b2._0x39f8c3)]&&(mars3d__namespace['DomUtil'][_0x4eac23(_0x4001b2._0x9e60fb)](this['_container']),delete this['_container']),this['clear'](),this['_map']['removeLayer'](this['_layer']);}[_0x3d2c59(0x15c)](_0x2ecfe7,_0x303511){const _0x5cd151=_0x3d2c59;this['_positions']=this[_0x5cd151(0x1a4)]||[],this['_positions']['push'](_0x2ecfe7),this[_0x5cd151(0x162)](_0x303511);}[_0x3d2c59(0x19d)](_0x58f329,_0x4daa7f){const _0x55b2a9=_0x3d2c59;this['_positions']=_0x58f329,this[_0x55b2a9(0x162)](_0x4daa7f);}[_0x3d2c59(0x192)](){this['_graphic']&&(this['_layer']['removeGraphic'](this['_graphic'],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer']['removeGraphic'](this['_graphic2'],!![]),delete this['_graphic2']);}['_updatePositionsHook'](_0x162242){const _0x6e2e78={_0x16eeb1:0x19c,_0x1261e4:0x160,_0x2606a6:0x157,_0x205f31:0x1a7,_0x55b840:0x153,_0x3d3673:0x163,_0x346ebb:0x199,_0x55db23:0x163,_0x452cd4:0x194,_0x14b163:0x194},_0x26cc09=_0x3d2c59;if(!this[_0x26cc09(_0x6e2e78._0x16eeb1)]||!this['_map']||!this['positions']||this[_0x26cc09(0x154)][_0x26cc09(_0x6e2e78._0x1261e4)]===0x0)return this;const _0x52ec61=this['_getHeatCanvas']();if(this['style']['type']==='image')this['_layer']['setOptions']({'url':_0x52ec61['toDataURL'](_0x26cc09(0x16e),0x1),'rectangle':this['_rectangle'],'opacity':this['style'][_0x26cc09(0x150)]});else this[_0x26cc09(_0x6e2e78._0x2606a6)][_0x26cc09(_0x6e2e78._0x205f31)]?this['_graphic']&&_0x162242?(this[_0x26cc09(_0x6e2e78._0x55b840)]['uniforms'][_0x26cc09(_0x6e2e78._0x3d3673)]=_0x52ec61,this['_graphic']['uniforms']['bumpMap']=this[_0x26cc09(0x176)](),this[_0x26cc09(_0x6e2e78._0x346ebb)]&&(this['_graphic2']['uniforms'][_0x26cc09(_0x6e2e78._0x55db23)]=_0x52ec61,this['_graphic2'][_0x26cc09(_0x6e2e78._0x452cd4)]['bumpMap']=this[_0x26cc09(0x153)]['uniforms'][_0x26cc09(0x15b)])):this['_createArcGraphic'](_0x52ec61):this['_graphic']&&_0x162242?this[_0x26cc09(_0x6e2e78._0x55b840)][_0x26cc09(_0x6e2e78._0x14b163)]['image']=_0x52ec61:this['_createGraphic'](_0x52ec61);return this;}['_createGraphic'](_0x1e4be4){const _0x4ddc51=_0x3d2c59;this['clear'](),this['_graphic']=new mars3d__namespace[(_0x4ddc51(0x180))]['RectanglePrimitive']({...this['options'],'rectangle':this[_0x4ddc51(0x187)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':new Cesium[(_0x4ddc51(0x14e))]({'fabric':{'uniforms':{'image':_0x1e4be4},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})}),this['_layer']['addGraphic'](this['_graphic']);}['_createArcGraphic'](_0x33aefd){const _0x355b1f={_0x38c7f8:0x191,_0x5e09f6:0x17c,_0x1a4fdc:0x175,_0x1ea2cc:0x19e,_0x19c85a:0x157,_0x414d78:0x198,_0xac2a01:0x187,_0x540bad:0x199,_0x4f304d:0x165},_0x28b946=_0x3d2c59;this['clear']();const _0x425dc8=Cesium[_0x28b946(0x156)]['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x28b946(_0x355b1f._0x38c7f8)]['ALWAYS'],'frontOperation':{'fail':Cesium[_0x28b946(_0x355b1f._0x5e09f6)]['KEEP'],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium[_0x28b946(0x17c)]['REPLACE']},'backFunction':Cesium[_0x28b946(0x191)][_0x28b946(_0x355b1f._0x1a4fdc)],'backOperation':{'fail':Cesium['StencilOperation'][_0x28b946(0x19e)],'zFail':Cesium[_0x28b946(0x17c)][_0x28b946(_0x355b1f._0x1ea2cc)],'zPass':Cesium['StencilOperation']['REPLACE']},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState']['ALPHA_BLEND']}),_0x1f6088=Math['floor'](this[_0x28b946(_0x355b1f._0x19c85a)]['diffHeight']??this[_0x28b946(_0x355b1f._0x414d78)]*0.02)+0.1;this['style']['diffHeight']&&delete this[_0x28b946(0x157)]['diffHeight'];const _0x1ccbf7=(this['style']['splitNum'],0x64);let _0x1b0d0b=Math['max'](this['_rectangle']['height'],this['_rectangle']['width']);this['style'][_0x28b946(0x18e)]=_0x1b0d0b/=_0x1ccbf7;const _0x1cde93=new Cesium['Material']({'fabric':{'uniforms':{'image':_0x33aefd,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x221f27=this['style'][_0x28b946(0x16f)]||0x1;this['_graphic']=new mars3d__namespace[(_0x28b946(0x180))]['RectanglePrimitive']({...this['options'],'rectangle':this[_0x28b946(_0x355b1f._0xac2a01)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x425dc8,'material':_0x1cde93,'vertexShaderSource':getVertexShaderSource(_0x1f6088*_0x221f27)})}),this['_layer'][_0x28b946(0x18a)](this['_graphic']),this['style'][_0x28b946(0x16f)]===0x0&&(this[_0x28b946(_0x355b1f._0x540bad)]=new mars3d__namespace[(_0x28b946(0x180))][(_0x28b946(_0x355b1f._0x4f304d))]({...this['options'],'rectangle':this[_0x28b946(0x187)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x425dc8,'material':_0x1cde93,'vertexShaderSource':getVertexShaderSource(-_0x1f6088)})}),this['_layer']['addGraphic'](this[_0x28b946(0x199)]));}['getRectangle'](_0x287e12){const _0x53a246={_0x4cebf4:0x181},_0x13d662=_0x3d2c59;return _0x287e12!==null&&_0x287e12!==void 0x0&&_0x287e12['isFormat']&&this['_rectangle']?mars3d__namespace[_0x13d662(_0x53a246._0x4cebf4)][_0x13d662(0x185)](this[_0x13d662(0x187)]):this['_rectangle'];}[_0x3d2c59(0x1a3)](){const _0x5a93d1={_0x25a711:0x1a4,_0x5f4121:0x1a9,_0x494205:0x18f,_0x1df674:0x1a5,_0x5436c9:0x179,_0x16a245:0x171,_0x21c721:0x164,_0x31f3cb:0x15a,_0x3facde:0x167,_0x5d533c:0x1a2},_0x10a4a6={_0x3d807b:0x152,_0x3b2c0a:0x174},_0x2f3c67={_0x6798c1:0x1a6,_0x223c1e:0x173,_0x31d607:0x174,_0x1787c4:0x152},_0x410f5c=_0x3d2c59,_0x1bf3c3=this[_0x410f5c(_0x5a93d1._0x25a711)],_0x592ead=[];let _0x2cf065,_0x21e485,_0x17a434,_0x5498d5;_0x1bf3c3[_0x410f5c(_0x5a93d1._0x5f4121)](_0x83b9a2=>{const _0x3f3217=_0x410f5c,_0x1c298a=mars3d__namespace[_0x3f3217(_0x2f3c67._0x6798c1)]['parse'](_0x83b9a2);if(!_0x1c298a)return;_0x1c298a[_0x3f3217(_0x2f3c67._0x223c1e)]=_0x83b9a2['value']||0x1,!this['options']['rectangle']&&(_0x2cf065===undefined?(_0x2cf065=_0x1c298a['lng'],_0x21e485=_0x1c298a['lng'],_0x17a434=_0x1c298a['lat'],_0x5498d5=_0x1c298a['lat']):(_0x2cf065=Math[_0x3f3217(0x174)](_0x2cf065,_0x1c298a['lng']),_0x21e485=Math['max'](_0x21e485,_0x1c298a['lng']),_0x17a434=Math[_0x3f3217(_0x2f3c67._0x31d607)](_0x17a434,_0x1c298a[_0x3f3217(_0x2f3c67._0x1787c4)]),_0x5498d5=Math['max'](_0x5498d5,_0x1c298a['lat']))),_0x592ead['push'](_0x1c298a);});_0x2cf065===_0x21e485&&(_0x2cf065-=0.000001,_0x21e485+=0.000001);_0x17a434===_0x5498d5&&(_0x17a434-=0.000001,_0x5498d5+=0.000001);let _0x2683a4=this['options']['rectangle']||{'xmin':_0x2cf065,'xmax':_0x21e485,'ymin':_0x17a434,'ymax':_0x5498d5};const _0x5d2379=getMercatorBounds(_0x2683a4),_0xa15a80=Math['abs'](_0x5d2379['xmax']-_0x5d2379['xmin']),_0x78efd5=Math[_0x410f5c(0x151)](_0x5d2379['ymax']-_0x5d2379['ymin']),_0x939ff2=Math['max'](_0xa15a80,_0x78efd5),_0x181e01=Math['min'](_0xa15a80,_0x78efd5);this[_0x410f5c(0x198)]=_0x939ff2;let _0x118ccc=0x1;if(_0x939ff2>this[_0x410f5c(_0x5a93d1._0x494205)]['maxCanvasSize'])_0x118ccc=_0x939ff2/this['options']['maxCanvasSize'],_0x181e01/_0x118ccc<this['options']['minCanvasSize']&&(_0x118ccc=_0x181e01/this['options']['minCanvasSize']);else _0x181e01<this[_0x410f5c(_0x5a93d1._0x494205)]['minCanvasSize']&&(_0x118ccc=_0x181e01/this['options']['minCanvasSize'],_0x939ff2/_0x118ccc>this[_0x410f5c(0x18f)]['maxCanvasSize']&&(_0x118ccc=_0x939ff2/this['options']['maxCanvasSize']));const _0x30fb6a=this['heatStyle']['radius']*1.5,_0x2722f8=_0xa15a80/_0x118ccc+_0x30fb6a*0x2,_0x37f5b1=_0x78efd5/_0x118ccc+_0x30fb6a*0x2,_0x584ce8=_0x30fb6a*_0x118ccc;_0x5d2379['xmin']-=_0x584ce8,_0x5d2379[_0x410f5c(0x171)]-=_0x584ce8,_0x5d2379[_0x410f5c(0x18b)]+=_0x584ce8,_0x5d2379['ymax']+=_0x584ce8,this['_scale']=_0x118ccc,_0x2683a4=geLatLngBounds(_0x5d2379),this['_rectangle']=Cesium['Rectangle']['fromDegrees'](_0x2683a4[_0x410f5c(0x196)],_0x2683a4['ymin'],_0x2683a4['xmax'],_0x2683a4['ymax']);let _0x2daf93=_0x592ead[0x0]['value']??0x1,_0x2a810f=_0x592ead[0x0]['value']??0x0;const _0x5b06e9=[];_0x592ead[_0x410f5c(0x1a9)](_0x12db5c=>{const _0x1d335e=_0x410f5c,_0x2d62d8=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x12db5c['lng'],_0x12db5c[_0x1d335e(_0x10a4a6._0x3d807b)]]),_0x25575b=_0x12db5c[_0x1d335e(0x173)]||0x1,_0x4eb4bc=Math[_0x1d335e(0x17d)]((_0x2d62d8[0x0]-_0x5d2379['xmin'])/_0x118ccc),_0x1e4b88=Math['round']((_0x5d2379['ymax']-_0x2d62d8[0x1])/_0x118ccc);_0x2daf93=Math[_0x1d335e(0x18d)](_0x2daf93,_0x25575b),_0x2a810f=Math[_0x1d335e(_0x10a4a6._0x3b2c0a)](_0x2a810f,_0x25575b),_0x5b06e9['push']({'x':_0x4eb4bc,'y':_0x1e4b88,'value':_0x25575b});});const _0x1df41b={'min':this['options']['min']??_0x2a810f,'max':this[_0x410f5c(0x18f)]['max']??_0x2daf93,'data':_0x5b06e9};this[_0x410f5c(_0x5a93d1._0x1df674)]=_0x1df41b;if(!this[_0x410f5c(_0x5a93d1._0x5436c9)]||_0x5d2379['xmin']!==this['_last_mBounds']['xmin']||_0x5d2379[_0x410f5c(_0x5a93d1._0x16a245)]!==this[_0x410f5c(0x179)]['ymin']||_0x5d2379['xmax']!==this[_0x410f5c(_0x5a93d1._0x5436c9)]['xmax']||_0x5d2379['ymax']!==this[_0x410f5c(_0x5a93d1._0x5436c9)]['ymax']){this['_last_mBounds']=_0x5d2379,this['_container']['style']['cssText']='width:'+_0x2722f8+_0x410f5c(_0x5a93d1._0x21c721)+_0x37f5b1+'px;';const _0x506d03={...this['heatStyle'],'container':this[_0x410f5c(_0x5a93d1._0x31f3cb)]};!this['_heat']?this['_heat']=h337__namespace['create'](_0x506d03):this[_0x410f5c(_0x5a93d1._0x3facde)]['configure'](_0x506d03);}this['_heat'][_0x410f5c(_0x5a93d1._0x5d533c)](_0x1df41b);const _0xb588fb=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat'][_0x410f5c(0x169)]['canvas']);return _0xb588fb;}[_0x3d2c59(0x176)](){const _0x1407da={_0x2d5ed1:0x172,_0x46c2dd:0x1a1,_0x96df79:0x17e},_0x11488b=_0x3d2c59;this['_heat']['configure']({'radius':this['heatStyle']['radius']*this['style'][_0x11488b(_0x1407da._0x2d5ed1)],'blur':this['heatStyle']['blur']*this[_0x11488b(0x157)]['arcBlurScale'],'gradient':this['heatStyle'][_0x11488b(_0x1407da._0x46c2dd)]||{0.25:_0x11488b(0x16a),0.55:'rgb(140,140,140)',0.85:'rgb(216,216,216)',0x1:'rgb(255,255,255)'}});const _0x17a1b1=mars3d__namespace['DomUtil'][_0x11488b(_0x1407da._0x96df79)](this['_heat']['_renderer'][_0x11488b(0x14d)]);return this['_heat']['configure'](this['options']['heatStyle']),_0x17a1b1;}['getPointData'](_0x2c51cc){const _0x865f9=_0x3d2c59,_0x3fb22e=mars3d__namespace[_0x865f9(0x1a6)]['parse'](_0x2c51cc);if(!_0x3fb22e)return{};const _0x8834f7=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x3fb22e['lng'],_0x3fb22e['lat']]),_0x1baa46=this['_last_mBounds'],_0x182aad=Math['round']((_0x8834f7[0x0]-_0x1baa46['xmin'])/this['_scale']),_0x3a30d6=Math['round']((_0x1baa46['ymax']-_0x8834f7[0x1])/this['_scale']),_0x5afd89=this['_heat']['getValueAt']({'x':_0x182aad,'y':_0x3a30d6}),_0x5607da=this['_heat']['_renderer']['ctx']['getImageData'](_0x182aad-0x1,_0x3a30d6-0x1,0x1,0x1)['data'];return{'x':_0x182aad,'y':_0x3a30d6,'value':_0x5afd89,'color':'rgba('+_0x5607da[0x0]+','+_0x5607da[0x1]+','+_0x5607da[0x2]+','+_0x5607da[0x3]+')'};}}mars3d__namespace['LayerUtil']['register']('heat',HeatLayer),mars3d__namespace[_0x3d2c59(0x17b)]['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337__namespace;function getMercatorBounds(_0x23bd8e){const _0x4967cd={_0x2f008b:0x158,_0x4b1c3c:0x171,_0x9dd434:0x18b},_0xa7d34c=_0x3d2c59,_0x56b559=mars3d__namespace['PointTrans'][_0xa7d34c(_0x4967cd._0x2f008b)]([_0x23bd8e['xmin'],_0x23bd8e[_0xa7d34c(_0x4967cd._0x4b1c3c)]]),_0x55f44f=mars3d__namespace[_0xa7d34c(0x197)]['lonlat2mercator']([_0x23bd8e[_0xa7d34c(_0x4967cd._0x9dd434)],_0x23bd8e['ymax']]);return{'xmin':_0x56b559[0x0],'ymin':_0x56b559[0x1],'xmax':_0x55f44f[0x0],'ymax':_0x55f44f[0x1]};}function geLatLngBounds(_0x5d8ead){const _0x2555b4=_0x3d2c59,_0x36b266=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x5d8ead['xmin'],_0x5d8ead['ymin']]),_0x44fe17=mars3d__namespace[_0x2555b4(0x197)]['mercator2lonlat']([_0x5d8ead['xmax'],_0x5d8ead['ymax']]);return{'xmin':_0x36b266[0x0],'ymin':_0x36b266[0x1],'xmax':_0x44fe17[0x0],'ymax':_0x44fe17[0x1]};}function getVertexShaderSource(_0x3438c0){const _0x3b5b02=_0x3d2c59;return _0x3b5b02(0x189)+_0x3438c0+_0x3b5b02(0x186);}exports[_0x3d2c59(0x17f)]=HeatLayer,Object['defineProperty'](exports,_0x3d2c59(0x166),{'value':!![]});function _0x46ff(){const _0x53306d=['KEEP','_addedHook','default','gradientArc','setData','_getHeatCanvas','_positions','_last_heatData','LngLatPoint','arc','Cesium','forEach','canvas','Material','56428rIBPBG','opacity','abs','lat','_graphic','positions','Util','RenderState','style','lonlat2mercator','BaseLayer','_container','bumpMap','addPosition','21bDbiHu','remove','clientHeight','length','container','_updatePositionsHook','image','px;height:','RectanglePrimitive','__esModule','_heat','45LerwaB','_renderer','rgb(0,0,0)','body','_map','GraphicLayer','image/png','arcDirection','VERTEX_FORMAT','ymin','arcRadiusScale','value','min','ALWAYS','_getArcHeatCanvas','DomUtil','merge','_last_mBounds','minCanvasSize','layer','StencilOperation','round','copyCanvas','HeatLayer','graphic','PolyUtil','uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a','2964465guOwPP','1310918JBuoBY','formatRectangle',';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a','_rectangle','87355TsMoFB','in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20','addGraphic','xmax','clientWidth','max','granularity','options','heatStyle','StencilFunction','clear','8698FaBvJy','uniforms','1002128OFhxbl','xmin','PointTrans','_mBoundsMax','_graphic2','33204oeXboh','maxCanvasSize','show','setPositions'];_0x46ff=function(){return _0x53306d;};return _0x46ff();}
}));
