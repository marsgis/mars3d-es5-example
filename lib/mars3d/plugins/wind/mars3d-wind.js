/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.3
 * 编译日期：2025-03-18 22:07
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x67ee41,_0x3021b7){function _0x2ea60a(_0x3bf053,_0x4ca9ea){return _0x21b3(_0x4ca9ea- -0x1f4,_0x3bf053);}function _0x331b09(_0x13758a,_0x4ac2c6){return _0x21b3(_0x13758a-0x1b0,_0x4ac2c6);}const _0xb65376=_0x67ee41();while(!![]){try{const _0x1dc748=-parseInt(_0x331b09(0x2e4,0x2ab))/0x1+parseInt(_0x2ea60a(-0x10a,-0x160))/0x2*(parseInt(_0x2ea60a(-0xee,-0x11a))/0x3)+parseInt(_0x331b09(0x23e,0x2bc))/0x4*(-parseInt(_0x2ea60a(-0x116,-0x149))/0x5)+-parseInt(_0x331b09(0x295,0x325))/0x6*(-parseInt(_0x2ea60a(-0x89,-0x103))/0x7)+-parseInt(_0x331b09(0x26a,0x24d))/0x8+parseInt(_0x331b09(0x2f8,0x2e4))/0x9+parseInt(_0x2ea60a(-0x27,-0x84))/0xa*(-parseInt(_0x331b09(0x265,0x203))/0xb);if(_0x1dc748===_0x3021b7)break;else _0xb65376['push'](_0xb65376['shift']());}catch(_0x2af401){_0xb65376['push'](_0xb65376['shift']());}}}(_0x3c18,0x77baa));function _interopNamespace(_0x1f785a){function _0x4681b5(_0x375081,_0x19766b){return _0x21b3(_0x19766b-0x322,_0x375081);}if(_0x1f785a&&_0x1f785a['__esModule'])return _0x1f785a;var _0x1d66f9=Object[_0x4681b5(0x3c9,0x416)](null);function _0x2ad942(_0x51f5a5,_0x52b99b){return _0x21b3(_0x52b99b- -0x228,_0x51f5a5);}return _0x1f785a&&Object[_0x2ad942(-0x14f,-0x186)](_0x1f785a)[_0x4681b5(0x3cf,0x3cc)](function(_0x16c533){function _0x2cbb4a(_0x3551dc,_0x49afb5){return _0x2ad942(_0x3551dc,_0x49afb5- -0x1ac);}function _0x8c5135(_0x35a5b8,_0x382919){return _0x2ad942(_0x35a5b8,_0x382919- -0x109);}if(_0x16c533!=='default'){var _0x4aafdf=Object[_0x2cbb4a(-0x233,-0x23a)](_0x1f785a,_0x16c533);Object[_0x2cbb4a(-0x1c3,-0x250)](_0x1d66f9,_0x16c533,_0x4aafdf[_0x8c5135(-0x1b0,-0x1da)]?_0x4aafdf:{'enumerable':!![],'get':function(){return _0x1f785a[_0x16c533];}});}}),_0x1d66f9['default']=_0x1f785a,_0x1d66f9;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x4f4de1(0x51a,0x4e5)];function getU(_0x117976,_0x80656){function _0x2b2d69(_0x15f589,_0x4e2445){return _0x4f4de1(_0x4e2445- -0x41e,_0x15f589);}const _0xca89dc=_0x117976*Math['cos'](Cesium$2['Math'][_0x2b2d69(0x16a,0xe0)](_0x80656));return _0xca89dc;}function getV(_0x58a0eb,_0x201ccf){function _0x15467a(_0x43ce79,_0x382ba6){return _0x4f4de1(_0x382ba6- -0xe7,_0x43ce79);}const _0x2122bf=_0x58a0eb*Math[_0x15467a(0x483,0x465)](Cesium$2['Math']['toRadians'](_0x201ccf));return _0x2122bf;}function getSpeed(_0xfff3f1,_0x5da604){const _0x24ccfb=Math[_0x5ca68a(-0x3e,-0xc2)](Math['pow'](_0xfff3f1,0x2)+Math['pow'](_0x5da604,0x2));function _0x5ca68a(_0x4203b9,_0x28e5a3){return _0x4f4de1(_0x4203b9- -0x591,_0x28e5a3);}return _0x24ccfb;}function getDirection(_0x867441,_0x414c6){let _0x4b6d95=Cesium$2['Math']['toDegrees'](Math['atan2'](_0x414c6,_0x867441));return _0x4b6d95+=_0x4b6d95<0x0?0x168:0x0,_0x4b6d95;}const _0x473a32={};_0x473a32[_0x4f4de1(0x4e2,0x467)]=null,_0x473a32['getU']=getU,_0x473a32['getV']=getV,_0x473a32[_0x4f4de1(0x47e,0x4a5)]=getSpeed,_0x473a32[_0x45c10f(0x30c,0x38b)]=getDirection;var WindUtil=_0x473a32,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x4f4de1(0x4e9,0x4d4),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a';function _0x4f4de1(_0x30054b,_0xf89646){return _0x21b3(_0x30054b-0x3be,_0xf89646);}var renderParticlesFragmentShader=_0x45c10f(0x2f3,0x37f),renderParticlesVertexShader=_0x45c10f(0x3ce,0x388);function _0x3c18(){const _0x5a812d=['BaseLayer','off','context','mouse_move','mouseMove','60832CaDPEs','wrapS','windField','mouse_down','autoClear','sceneMode','696778nUHuKZ','_drawLines','SRC_ALPHA','viewerParameters','quietPeriod','getPostProcessingPositionShader','value','canvasContext','lighter','particlesSpeed','init','vdata','dropRate','latRange','keys','width','canvas','refreshTimer','UNSIGNED_INT','LINEAR','FLOAT','toGridXY','forEach','110GosXmC','camera','north','fixedHeight','setOptions','createComputingPrimitives','lineWidth','_setOptionsHook','lastFramesPerSecond','_maxAge','121alZHIo','getParticles','_onMapWhellEvent','lineTo','xmax','4311520qwRShm','cancelAnimationFrame','nextParticlesPosition','MIN_VALUE','ymin','isDestroy','getSpeed','vmax','owner','_randomParticle','fromGeometry','getRandomLatLng','Cartesian2','changed','createPrimitives','clientHeight','warn','_calcUV','geometry','outputTexture','onmessage','OPAQUE','frameTime','ellipsoid','height','scene','max\x20is\x20undefined,\x20calculate\x20max','zIndex','TRIANGLES','auto','getCalculateSpeedShader','applyViewerParameters','6OBckxo','pixelDatatype','min','updateOptions','xmin','enabled','mouseUp','windData','normal','show','flipY','1788crcUin','canvasWidth','umax','ymax','LayerUtil','destroy','shaderProgram','colorTable','frameRateAdjustment','PointTrans','CanvasWindField','redraw','15064WjPvlO','_onMouseDownEvent','RED','create','primitiveType','toDegrees','destoryRenderingFramebuffers','container','stringify','age','latitude','particleSystem','componentDatatype','addEventListener','south','speedRate','_calc_speedRate','commandType','absolute','flatMap','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','framebuffer','cols','visible','dynamic','currentParticlesPosition','segments','_createCanvas','drawingBufferWidth','STATIC_DRAW','clear','mars3d-canvasWind','blending','particlesTextureSize','createWindTextures','bind','getSegmentDrawVertexShader','clientWidth','array','preExecute','worker','blendFuncSource','lng','commandList','particlesTextures','speedFactor','vmin','setData','CLAMP_TO_EDGE','resize','pointer-events','__proto__','uniformMap','clearFramebuffers','rows','pixelFormat','frameRateMonitor','WindUtil','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','createColorTableTexture','east','Rectangle','removeChild','0px','fromCache','log','lat','95404kWLjbE','color','hasOwnProperty','removeEventListener','_colorRamp','layer','floor','now','values','abs','attributeLocations','fragmentShaderSource','toRadians','clearCommand','grid','particles','tlat','push','tlng','_addedHook','2623131SZubBo','createRenderingFramebuffers','fromDegrees','isDynamic','alpha','globe','colors','rendering','blendEquation','red','getSegmentDrawFragmentShader','_map','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','EventType','_tomap','get','createParticlesTextures','_speedRate','FUNC_ADD','wind','Cesium','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','computing','alt','getDirection','options','speed','_animateFrame','bounds','pickEllipsoid','random','createRawRenderState','style','strokeStyle','lonRange','updatePosition','initWorker','getDataAtLonLat','_onMouseMoveEvent','textures','154730MDgjvx','primitives','west','isArray','framebuffers','Compute','pointerEvents','data','green','componentsPerAttribute','EllipsoidalOccluder','max','call','previousParticlesPosition','pixelSize','sources','all','visibility','_mountedHook','update','defineProperty','_onMouseUpEvent','renderState','processWindData','mode','SCENE3D','maxAge','postProcessingPosition','getUVByPoint','isInExtent','sin','Cartesian3','canvasHeight','viewport','persists','requestAnimationFrame','umin','sqrt','onColorTableChange','Draw','talt','globalAlpha','getOwnPropertyDescriptor','mouseHidden','getUVByXY','updateViewerParameters','rawRenderState','calculateSpeed','NEAREST','createCommand','commandToExecute','lineLength','_removedHook','ONE_MINUS_SRC_ALPHA','setDate','Math','#ffffff','length'];_0x3c18=function(){return _0x5a812d;};return _0x3c18();}const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x45c10f(0x32b,0x303)](){function _0x3c62ad(_0xf2f785,_0x166a67){return _0x4f4de1(_0x166a67- -0x466,_0xf2f785);}const _0x5e5d9a={};return _0x5e5d9a[_0x3c62ad(0xd1,0xd7)]=[calculateSpeedShader],new ShaderSource$1(_0x5e5d9a);}static['getUpdatePositionShader'](){function _0x51225e(_0x22036c,_0x335904){return _0x45c10f(_0x335904,_0x22036c- -0x429);}const _0x379650={};return _0x379650[_0x51225e(-0x7f,0x5)]=[updatePositionShader],new ShaderSource$1(_0x379650);}static[_0x45c10f(0x3ba,0x340)](){const _0x4eef7c={};return _0x4eef7c['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x4eef7c);}static[_0x45c10f(0x3b5,0x37d)](){const _0x3fde58={};return _0x3fde58['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x3fde58);}static[_0x4f4de1(0x457,0x4b1)](){const _0x4ea9e3={};return _0x4ea9e3['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x4ea9e3);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x45c10f(0x40e,0x387)];class CustomPrimitive{constructor(_0x4ebb25){this['commandType']=_0x4ebb25[_0x56767d(0x474,0x4de)],this['geometry']=_0x4ebb25['geometry'],this['attributeLocations']=_0x4ebb25[_0x1424b4(0x17d,0x143)],this[_0x56767d(0x4d8,0x4d1)]=_0x4ebb25[_0x56767d(0x478,0x4d1)],this[_0x1424b4(0x164,0x1bd)]=_0x4ebb25['uniformMap']||{};function _0x56767d(_0x5b88e0,_0x456c51){return _0x45c10f(_0x5b88e0,_0x456c51-0x1b1);}this['vertexShaderSource']=_0x4ebb25['vertexShaderSource'],this['fragmentShaderSource']=_0x4ebb25['fragmentShaderSource'],this['rawRenderState']=_0x4ebb25[_0x1424b4(0x1dd,0x1eb)],this[_0x1424b4(0x145,0x188)]=_0x4ebb25['framebuffer'],this['outputTexture']=_0x4ebb25[_0x56767d(0x474,0x4a9)],this['autoClear']=_0x4ebb25[_0x56767d(0x413,0x46e)]??![],this[_0x56767d(0x57d,0x4f4)]=_0x4ebb25['preExecute'];function _0x1424b4(_0x2de80a,_0x39dfa6){return _0x4f4de1(_0x2de80a- -0x37f,_0x39dfa6);}this['show']=!![],this['commandToExecute']=undefined,this[_0x1424b4(0x180,0x17b)]=undefined,this[_0x1424b4(0x18a,0xff)]=_0x4ebb25['isDynamic']??(()=>!![]),this[_0x1424b4(0xd1,0x52)]&&(this[_0x1424b4(0x180,0x142)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x1424b4(0x145,0x1b1)],'pass':Pass$1['OPAQUE']}));}[_0x4f4de1(0x43e,0x470)](_0x1854b0){function _0x4c8a0b(_0x1e309d,_0x2b3061){return _0x4f4de1(_0x1e309d- -0xb5,_0x2b3061);}function _0x251ee9(_0x527e2d,_0x2d72a6){return _0x4f4de1(_0x527e2d- -0x570,_0x2d72a6);}if(this['commandType']===_0x251ee9(-0x1b,-0x5f)){const _0x463d62={};_0x463d62['context']=_0x1854b0,_0x463d62['geometry']=this[_0x251ee9(-0xe6,-0xc0)],_0x463d62[_0x251ee9(-0x74,-0xf)]=this['attributeLocations'],_0x463d62['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x112d66=VertexArray$1[_0x4c8a0b(0x3cd,0x3db)](_0x463d62),_0x142c29={};_0x142c29[_0x251ee9(-0x127,-0xe4)]=_0x1854b0,_0x142c29['vertexShaderSource']=this['vertexShaderSource'],_0x142c29['fragmentShaderSource']=this['fragmentShaderSource'],_0x142c29[_0x4c8a0b(0x447,0x471)]=this[_0x251ee9(-0x74,-0xdb)];const _0x120e19=ShaderProgram['fromCache'](_0x142c29),_0x1f82de=RenderState[_0x4c8a0b(0x43a,0x459)](this['rawRenderState']),_0x42986e={};return _0x42986e['owner']=this,_0x42986e['vertexArray']=_0x112d66,_0x42986e[_0x4c8a0b(0x3fe,0x3ba)]=this[_0x4c8a0b(0x3fe,0x3b8)],_0x42986e['modelMatrix']=Matrix4['IDENTITY'],_0x42986e[_0x251ee9(-0x2c,-0x47)]=_0x1f82de,_0x42986e['shaderProgram']=_0x120e19,_0x42986e['framebuffer']=this['framebuffer'],_0x42986e['uniformMap']=this[_0x251ee9(-0x8d,-0x118)],_0x42986e['pass']=Pass$1[_0x4c8a0b(0x3d8,0x424)],new DrawCommand(_0x42986e);}else{if(this['commandType']==='Compute'){const _0x3078a2={};return _0x3078a2[_0x251ee9(-0xf0,-0x176)]=this,_0x3078a2['fragmentShaderSource']=this[_0x251ee9(-0x73,-0x44)],_0x3078a2['uniformMap']=this['uniformMap'],_0x3078a2['outputTexture']=this['outputTexture'],_0x3078a2[_0x4c8a0b(0x49b,0x4ce)]=!![],new ComputeCommand(_0x3078a2);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x3f43a0,_0x14e15a){function _0x5f3cd5(_0x491acb,_0x485d82){return _0x4f4de1(_0x485d82- -0x64e,_0x491acb);}function _0x4620d9(_0x44ad3f,_0x58b84d){return _0x45c10f(_0x58b84d,_0x44ad3f-0xa5);}this[_0x4620d9(0x39c,0x38c)]=_0x14e15a,defined(this[_0x5f3cd5(-0x18e,-0x20f)])&&(this[_0x5f3cd5(-0x209,-0x20f)]['vertexArray']=VertexArray$1[_0x5f3cd5(-0x1e1,-0x1cc)]({'context':_0x3f43a0,'geometry':this['geometry'],'attributeLocations':this[_0x5f3cd5(-0x12b,-0x152)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}[_0x4f4de1(0x541,0x56b)](_0x3ebc29){function _0x529e40(_0x2b496a,_0x39f3d2){return _0x4f4de1(_0x39f3d2- -0x37,_0x2b496a);}if(!this['isDynamic']())return;if(!this[_0x529e40(0x431,0x46a)]||!defined(_0x3ebc29))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this[_0x3cf4fb(-0xad,-0x6e)](_0x3ebc29['context']));defined(this[_0x3cf4fb(-0x15,-0x51)])&&this['preExecute']();function _0x3cf4fb(_0x4ef295,_0x26752e){return _0x4f4de1(_0x4ef295- -0x4eb,_0x26752e);}if(!_0x3ebc29['commandList']){console[_0x3cf4fb(-0x63,-0x1a)]('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x3ebc29[_0x529e40(0x4d9,0x4a3)]['push'](this[_0x3cf4fb(0x14,0x98)]),defined(this['commandToExecute'])&&_0x3ebc29['commandList']['push'](this[_0x529e40(0x44d,0x408)]);}['isDestroyed'](){return![];}[_0x45c10f(0x2b8,0x315)](){if(defined(this['commandToExecute'])){var _0x295d32;(_0x295d32=this['commandToExecute']['shaderProgram'])===null||_0x295d32===void 0x0||_0x295d32['destroy'](),this['commandToExecute'][_0x4fe8e8(0xb2,0xae)]=undefined;}function _0x4fe8e8(_0x2621d8,_0x379fa3){return _0x4f4de1(_0x2621d8- -0x3f7,_0x379fa3);}return destroyObject(this);}}function _0x45c10f(_0x5d184e,_0x1e3fa3){return _0x21b3(_0x1e3fa3-0x22b,_0x5d184e);}function deepMerge(_0x40aad9,_0xb4d312){function _0x45ca33(_0x415678,_0x2edf93){return _0x4f4de1(_0x415678- -0x5b7,_0x2edf93);}if(!_0x40aad9)return _0xb4d312;if(!_0xb4d312)return _0x40aad9;const _0x1df276={..._0xb4d312},_0x410f95=_0x1df276;function _0x50e2a2(_0x2c92c0,_0x281fd2){return _0x4f4de1(_0x281fd2- -0x678,_0x2c92c0);}for(const _0x1d7785 in _0x40aad9){if(Object['prototype'][_0x50e2a2(-0x1b3,-0x184)][_0x50e2a2(-0xb7,-0x13e)](_0x40aad9,_0x1d7785)){const _0xc31d7=_0x40aad9[_0x1d7785],_0x4232d7=_0xb4d312[_0x1d7785];if(Array[_0x50e2a2(-0x18e,-0x147)](_0xc31d7)){_0x410f95[_0x1d7785]=_0xc31d7['slice']();continue;}if(_0xc31d7&&typeof _0xc31d7==='object'){_0x410f95[_0x1d7785]=deepMerge(_0xc31d7,_0x4232d7||{});continue;}_0xc31d7!==undefined&&(_0x410f95[_0x1d7785]=_0xc31d7);}}return _0x410f95;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x45c10f(0x34c,0x387)];class WindParticlesComputing{constructor(_0x2e6c08,_0x4b4cbe,_0x5b4480,_0x3e7815,_0x2e041c){this['context']=_0x2e6c08,this['options']=_0x5b4480,this['viewerParameters']=_0x3e7815,this['windData']=_0x4b4cbe,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x55100b={};function _0x5f1984(_0x1376a1,_0x50e884){return _0x4f4de1(_0x1376a1- -0xc6,_0x50e884);}function _0x312ba3(_0x405b84,_0x279979){return _0x4f4de1(_0x279979- -0x142,_0x405b84);}_0x55100b['scene']=_0x2e041c,_0x55100b['samplingWindow']=0x1,_0x55100b[_0x5f1984(0x390,0x311)]=0x0,this[_0x5f1984(0x421,0x497)]=new FrameRateMonitor(_0x55100b),this['initFrameRate'](),this['createWindTextures'](),this['createParticlesTextures'](),this[_0x5f1984(0x3a8,0x376)]();}['initFrameRate'](){const _0x4f4a82=()=>{function _0xc611cb(_0x3181f3,_0x264ba4){return _0x21b3(_0x3181f3- -0x2a,_0x264ba4);}function _0x16c04c(_0x443f2c,_0x4a5a04){return _0x21b3(_0x443f2c-0x37e,_0x4a5a04);}this[_0xc611cb(0xff,0x156)]['lastFramesPerSecond']>0x14&&(this['frameRate']=this['frameRateMonitor'][_0xc611cb(0x89,0x7c)],this[_0x16c04c(0x46b,0x46f)]=0x3c/Math[_0x16c04c(0x4f9,0x46b)](this['frameRate'],0x1));};_0x4f4a82();const _0x342046=setInterval(_0x4f4a82,0x3e8),_0x19fa40=this['destroy']['bind'](this);this['destroy']=()=>{clearInterval(_0x342046),_0x19fa40();};}['createWindTextures'](){const _0x4a18e1={};_0x4a18e1['minificationFilter']=TextureMinificationFilter$1['LINEAR'],_0x4a18e1['magnificationFilter']=TextureMagnificationFilter$1[_0x2d082b(-0x297,-0x254)];function _0x2d082b(_0x3be375,_0x5c1b38){return _0x45c10f(_0x5c1b38,_0x3be375- -0x569);}function _0x2b9b77(_0x1ad4ec,_0x168f6e){return _0x4f4de1(_0x1ad4ec- -0x3a,_0x168f6e);}const _0x47ebd3={'context':this['context'],'width':this['windData'][_0x2b9b77(0x427,0x3e3)],'height':this[_0x2b9b77(0x465,0x419)]['height'],'pixelFormat':PixelFormat$1[_0x2b9b77(0x477,0x4fa)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0x2b9b77(0x4e5,0x55b)][_0x2b9b77(0x468,0x428)]??![],'sampler':new Sampler$1(_0x4a18e1)};this['windTextures']={'U':new Texture$1({..._0x47ebd3,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x2b9b77(0x49b,0x41e)])}}),'V':new Texture$1({..._0x47ebd3,'source':{'arrayBufferView':new Float32Array(this[_0x2d082b(-0x25d,-0x1fb)]['v'][_0x2d082b(-0x227,-0x20e)])}})};}['createParticlesTextures'](){function _0x5671e(_0x29ee22,_0x1b3674){return _0x4f4de1(_0x29ee22- -0x5c6,_0x1b3674);}const _0x5122f9={};_0x5122f9['minificationFilter']=TextureMinificationFilter$1[_0xd89ee7(0x56,0xb1)];function _0xd89ee7(_0x32f050,_0x16a9bc){return _0x4f4de1(_0x32f050- -0x508,_0x16a9bc);}_0x5122f9['magnificationFilter']=TextureMagnificationFilter$1[_0x5671e(-0x68,-0x98)];const _0x22a561={'context':this[_0x5671e(-0x17d,-0x1d1)],'width':this['options']['particlesTextureSize'],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0xd89ee7(-0x38,-0xb0)]*this[_0x5671e(-0xa7,-0x101)][_0x5671e(-0xf6,-0x17a)]*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x5122f9)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x22a561),'currentParticlesPosition':new Texture$1(_0x22a561),'nextParticlesPosition':new Texture$1(_0x22a561),'postProcessingPosition':new Texture$1(_0x22a561),'particlesSpeed':new Texture$1(_0x22a561)};}['destroyParticlesTextures'](){Object['values'](this['particlesTextures'])['forEach'](_0x459a33=>_0x459a33['destroy']());}['createComputingPrimitives'](){function _0x2e59c4(_0x7c0dd1,_0x50e173){return _0x45c10f(_0x50e173,_0x7c0dd1- -0x50a);}function _0x3c2257(_0x110aa3,_0x1bbefb){return _0x4f4de1(_0x110aa3- -0x34c,_0x1bbefb);}this[_0x3c2257(0x1e3,0x200)]={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x3c2257(0x14e,0x19e)],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x2e59c4(-0x203,-0x221)],this['windData']['v']['max']),'speedRange':()=>new Cartesian2$1(this[_0x3c2257(0x153,0x194)][_0x2e59c4(-0x17d,-0x102)]['min'],this[_0x2e59c4(-0x1fe,-0x207)][_0x3c2257(0x1d4,0x264)]['max']),'currentParticlesPosition':()=>this[_0x2e59c4(-0x1c2,-0x21f)]['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x1ada26(_0xeef7ce,_0x4b5032){return _0x3c2257(_0x4b5032-0x7,_0xeef7ce);}function _0x5194ee(_0x1caaa0,_0x28ec63){return _0x2e59c4(_0x1caaa0-0x520,_0x28ec63);}return(this[_0x5194ee(0x2d8,0x2a8)][_0x5194ee(0x3bf,0x434)]+0x32)*this['options'][_0x1ada26(0x1d6,0x197)];},'frameRateAdjustment':()=>this[_0x3c2257(0x15f,0x142)],'dimension':()=>new Cartesian2$1(this['windData']['width'],this[_0x2e59c4(-0x1fe,-0x1b9)]['height']),'minimum':()=>new Cartesian2$1(this[_0x3c2257(0x153,0x1c2)][_0x3c2257(0x1d6,0x251)][_0x3c2257(0x1e4,0x1a5)],this[_0x3c2257(0x153,0x1d6)]['bounds'][_0x2e59c4(-0x1e0,-0x23a)]),'maximum':()=>new Cartesian2$1(this['windData']['bounds']['east'],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x3c2257(0x18f,0x179)]['particlesSpeed'],'preExecute':()=>{const _0x2af8fd=this[_0x2d8b12(-0x87,-0x116)][_0x2d8b12(-0x13d,-0xb6)];function _0x40c144(_0x55409a,_0xb9231){return _0x3c2257(_0xb9231- -0x348,_0x55409a);}this['particlesTextures'][_0x40c144(-0x149,-0x159)]=this['particlesTextures']['currentParticlesPosition'],this['particlesTextures'][_0x40c144(-0x235,-0x1cc)]=this['particlesTextures'][_0x2d8b12(-0x8e,-0xa8)],this['particlesTextures']['postProcessingPosition']=_0x2af8fd;function _0x2d8b12(_0x474089,_0x4d54f9){return _0x2e59c4(_0x4d54f9-0xac,_0x474089);}this['primitives']['calculateSpeed']['commandToExecute']&&(this[_0x40c144(-0x1b9,-0x165)][_0x40c144(-0x1c3,-0x137)]['commandToExecute']['outputTexture']=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':_0x3c2257(0x1e7,0x245),'uniformMap':{'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'particlesSpeed':()=>this[_0x3c2257(0x18f,0x20e)]['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this[_0x3c2257(0x18f,0x21c)]['nextParticlesPosition'],'preExecute':()=>{function _0x212d94(_0x565ee9,_0x4b1b4f){return _0x3c2257(_0x565ee9-0x1be,_0x4b1b4f);}function _0x535499(_0x5e86a9,_0x1f49b7){return _0x2e59c4(_0x5e86a9-0x456,_0x1f49b7);}this['primitives']['updatePosition'][_0x212d94(0x2b1,0x27e)]&&(this['primitives']['updatePosition'][_0x212d94(0x2b1,0x26a)][_0x535499(0x244,0x1c0)]=this['particlesTextures'][_0x535499(0x233,0x1cd)]);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x3c2257(0x1e7,0x1be),'uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x3c2257(0x10f,0x19a)],'lonRange':()=>this[_0x3c2257(0x109,0x85)]['lonRange'],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this[_0x2e59c4(-0x1fe,-0x1e3)][_0x3c2257(0x1d6,0x22a)]['west'],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this['windData'][_0x3c2257(0x1d6,0x24b)]['south'],this['windData']['bounds'][_0x2e59c4(-0x232,-0x28f)]),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures'][_0x2e59c4(-0x154,-0x1cb)],'preExecute':()=>{function _0x42e9a4(_0x50d440,_0x1f45a8){return _0x3c2257(_0x50d440-0x138,_0x1f45a8);}function _0x2cec85(_0x5aa294,_0x57ebaf){return _0x3c2257(_0x5aa294- -0xbf,_0x57ebaf);}this['primitives']['postProcessingPosition']['commandToExecute']&&(this[_0x2cec85(0x124,0xce)]['postProcessingPosition']['commandToExecute']['outputTexture']=this[_0x42e9a4(0x2c7,0x23a)]['postProcessingPosition']);},'isDynamic':()=>this['options'][_0x3c2257(0x17b,0x1c6)]})};}['reCreateWindTextures'](){this['windTextures']['U']['destroy'](),this['windTextures']['V'][_0x1addf8(0x2ec,0x28c)]();function _0x169025(_0x45f6cb,_0x43daa6){return _0x4f4de1(_0x43daa6- -0x3db,_0x45f6cb);}function _0x1addf8(_0x529938,_0x2c68d7){return _0x45c10f(_0x2c68d7,_0x529938- -0x29);}this[_0x169025(0x10b,0xf6)]();}['updateWindData'](_0x489063){function _0x1922bf(_0x173d9b,_0x2cc2e7){return _0x45c10f(_0x173d9b,_0x2cc2e7-0xe9);}this[_0x1922bf(0x42a,0x3f5)]=_0x489063,this['reCreateWindTextures']();}[_0x45c10f(0x360,0x308)](_0x129956){const _0x24e319=_0x129956[_0x26ae7a(-0xda,-0x54)]!==undefined&&_0x129956[_0x26ae7a(0x16,-0x54)]!==this[_0x311fa1(0x2a8,0x252)][_0x311fa1(0x22b,0x1b2)];this['options']=deepMerge(_0x129956,this['options']);function _0x26ae7a(_0x5b32d6,_0x443920){return _0x4f4de1(_0x443920- -0x4f6,_0x5b32d6);}function _0x311fa1(_0x26a8ee,_0x21fe33){return _0x4f4de1(_0x26a8ee- -0x277,_0x21fe33);}_0x24e319&&this['reCreateWindTextures']();}[_0x45c10f(0x432,0x3b2)](_0x331928){const {array:_0xe6b27b}=_0x331928;let {min:_0x4717e9,max:_0xa91054}=_0x331928;function _0x526d50(_0x5211ae,_0xab149b){return _0x4f4de1(_0x5211ae- -0x3f,_0xab149b);}const _0x327496=new Float32Array(_0xe6b27b[_0x3215ab(0x29d,0x29d)]);_0x4717e9===undefined&&(console[_0x3215ab(0x2df,0x2bd)]('min\x20is\x20undefined,\x20calculate\x20min'),_0x4717e9=Math[_0x526d50(0x45b,0x423)](..._0xe6b27b));_0xa91054===undefined&&(console[_0x526d50(0x449,0x3c5)](_0x526d50(0x453,0x4b3)),_0xa91054=Math['max'](..._0xe6b27b));const _0xf87a02=Math['max'](Math['abs'](_0x4717e9),Math['abs'](_0xa91054));for(let _0x1dff46=0x0;_0x1dff46<_0xe6b27b['length'];_0x1dff46++){const _0x4c9793=_0xe6b27b[_0x1dff46]/_0xf87a02;_0x327496[_0x1dff46]=_0x4c9793;}function _0x3215ab(_0x3aaf6d,_0x577858){return _0x45c10f(_0x577858,_0x3aaf6d- -0x16);}return _0x327496;}['destroy'](){function _0x345008(_0x927810,_0x14a316){return _0x4f4de1(_0x14a316- -0x4da,_0x927810);}function _0x4596ec(_0x37b4d3,_0x34ab5a){return _0x4f4de1(_0x37b4d3- -0x2bb,_0x34ab5a);}Object['values'](this['windTextures'])['forEach'](_0x14ae33=>_0x14ae33[_0x4596ec(0x1ed,0x1ee)]()),Object['values'](this[_0x4596ec(0x220,0x209)])[_0x4596ec(0x1ad,0x228)](_0x4aa165=>_0x4aa165[_0x4596ec(0x1ed,0x273)]()),Object['values'](this[_0x345008(-0x1a,0x55)])[_0x4596ec(0x1ad,0x14b)](_0xa732bc=>_0xa732bc['destroy']()),this[_0x4596ec(0x22c,0x245)]['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x4f4de1(0x51a,0x52b)];class WindParticlesRendering{constructor(_0x4ab054,_0x4973f6,_0x25641f,_0x317516){this['context']=_0x4ab054,this['options']=_0x4973f6,this['viewerParameters']=_0x25641f,this['computing']=_0x317516;(typeof this[_0x55445f(0x199,0x213)]['particlesTextureSize']!=='number'||this['options']['particlesTextureSize']<=0x0)&&(console['error'](_0x55445f(0x1b3,0x1b7)),this[_0x55445f(0x1f0,0x213)][_0x21a904(-0x192,-0x18c)]=0x100);this['colorTable']=this[_0x21a904(-0x178,-0x14d)]();function _0x55445f(_0x3e3a40,_0x3685b7){return _0x4f4de1(_0x3685b7- -0x30c,_0x3e3a40);}this['textures']=this['createRenderingTextures']();function _0x21a904(_0x1319b9,_0x5ce954){return _0x4f4de1(_0x1319b9- -0x662,_0x5ce954);}this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this[_0x21a904(-0x1dc,-0x19c)]();}['createRenderingTextures'](){function _0x52f80a(_0x3708fb,_0x2534f3){return _0x4f4de1(_0x2534f3- -0x432,_0x3708fb);}const _0x555aaf={};_0x555aaf['context']=this[_0x52f80a(0x5c,0x17)];function _0xde2a81(_0x10aff9,_0x51eddc){return _0x4f4de1(_0x51eddc- -0x375,_0x10aff9);}_0x555aaf['width']=this['context']['drawingBufferWidth'],_0x555aaf['height']=this['context']['drawingBufferHeight'],_0x555aaf[_0xde2a81(0x173,0x171)]=PixelFormat['RGBA'],_0x555aaf[_0x52f80a(0x89,0x67)]=PixelDatatype['UNSIGNED_BYTE'];const _0x57d9bc=_0x555aaf,_0x494954={};_0x494954[_0xde2a81(0xf4,0xd4)]=this['context'],_0x494954[_0xde2a81(0x12e,0xec)]=this[_0xde2a81(0x151,0xd4)][_0x52f80a(0xa8,0x99)],_0x494954['height']=this[_0xde2a81(0x15d,0xd4)]['drawingBufferHeight'],_0x494954['pixelFormat']=PixelFormat['DEPTH_COMPONENT'],_0x494954['pixelDatatype']=PixelDatatype[_0xde2a81(0x16a,0xef)];const _0x20395d=_0x494954;return{'segmentsColor':new Texture(_0x57d9bc),'segmentsDepth':new Texture(_0x20395d)};}[_0x45c10f(0x36e,0x374)](){const _0x466ec0={};_0x466ec0[_0x348288(-0x101,-0x113)]=this[_0x302001(-0x1bf,-0x1c9)],_0x466ec0['colorTextures']=[this['textures']['segmentsColor']];function _0x348288(_0x1363ee,_0x40d421){return _0x45c10f(_0x40d421,_0x1363ee- -0x3b7);}function _0x302001(_0x5df440,_0x4614d4){return _0x45c10f(_0x4614d4,_0x5df440- -0x475);}return _0x466ec0['depthTexture']=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0x466ec0)};}[_0x45c10f(0x2a5,0x322)](){function _0x429174(_0x3f1d42,_0x5c13d9){return _0x4f4de1(_0x5c13d9- -0x34b,_0x3f1d42);}function _0x4f25d3(_0x4f4f03,_0x46c46a){return _0x45c10f(_0x46c46a,_0x4f4f03- -0x52b);}Object[_0x429174(0x16b,0x1af)](this['framebuffers'])[_0x4f25d3(-0x256,-0x2c6)](_0x551d44=>{_0x551d44['destroy']();});}['createColorTableTexture'](){const _0x276ff3=new Float32Array(this['options']['colors'][_0x948b03(0x476,0x43e)](_0x4ebade=>{function _0x3f93fb(_0x1274b9,_0x41a464){return _0x948b03(_0x1274b9- -0x55b,_0x41a464);}const _0x3bc490=Color$1['fromCssColorString'](_0x4ebade);function _0x1dd081(_0x4dcabb,_0x366332){return _0x948b03(_0x4dcabb- -0x45d,_0x366332);}return[_0x3bc490[_0x1dd081(0x66,0x9b)],_0x3bc490[_0x1dd081(0x8d,0xd)],_0x3bc490['blue'],_0x3bc490[_0x1dd081(0x61,0xcc)]];}));function _0x333b0e(_0x317169,_0x3922e0){return _0x45c10f(_0x317169,_0x3922e0- -0x409);}const _0x3dd51c={};_0x3dd51c['minificationFilter']=TextureMinificationFilter['LINEAR'],_0x3dd51c['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x3dd51c[_0x948b03(0x401,0x446)]=TextureWrap[_0x333b0e(-0x123,-0xbd)];function _0x948b03(_0x3be6bb,_0x5442be){return _0x4f4de1(_0x3be6bb- -0x4c,_0x5442be);}return _0x3dd51c['wrapT']=TextureWrap[_0x333b0e(-0x114,-0xbd)],new Texture({'context':this[_0x333b0e(-0x124,-0x153)],'width':this['options'][_0x333b0e(-0x108,-0x90)]['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x3dd51c),'source':{'width':this['options']['colors']['length'],'height':0x1,'arrayBufferView':_0x276ff3}});}['createSegmentsGeometry'](){function _0x12afd1(_0x5c260b,_0x536580){return _0x4f4de1(_0x5c260b- -0x1a0,_0x536580);}const _0x12c613=0x4,_0x5d078d=this[_0x12afd1(0x37f,0x3e7)][_0x547653(-0xb9,-0xa8)];let _0x469e55=[];for(let _0x110e5c=0x0;_0x110e5c<_0x5d078d;_0x110e5c++){for(let _0x2cb3d7=0x0;_0x2cb3d7<_0x5d078d;_0x2cb3d7++){for(let _0x40da8b=0x0;_0x40da8b<_0x12c613;_0x40da8b++){_0x469e55['push'](_0x110e5c/_0x5d078d),_0x469e55['push'](_0x2cb3d7/_0x5d078d);}}}_0x469e55=new Float32Array(_0x469e55);const _0x5ed821=this[_0x12afd1(0x37f,0x403)][_0x547653(-0xb9,-0xac)]**0x2;let _0x47161a=[];for(let _0x501083=0x0;_0x501083<_0x5ed821;_0x501083++){_0x47161a['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x47161a=new Float32Array(_0x47161a);let _0x31e70b=[];for(let _0x2ae8dc=0x0,_0x4ef88f=0x0;_0x2ae8dc<_0x5ed821;_0x2ae8dc++){_0x31e70b[_0x547653(-0x86,-0x104)](_0x4ef88f+0x0,_0x4ef88f+0x1,_0x4ef88f+0x2,_0x4ef88f+0x2,_0x4ef88f+0x1,_0x4ef88f+0x3),_0x4ef88f+=_0x12c613;}_0x31e70b=new Uint32Array(_0x31e70b);const _0xe83d38={};_0xe83d38[_0x547653(-0xce,-0x133)]=ComponentDatatype[_0x12afd1(0x2c6,0x29a)],_0xe83d38[_0x12afd1(0x397,0x365)]=0x2,_0xe83d38['values']=_0x469e55;const _0x1d1b42={};_0x1d1b42['componentDatatype']=ComponentDatatype['FLOAT'];function _0x547653(_0x3aee88,_0xee5288){return _0x4f4de1(_0x3aee88- -0x589,_0xee5288);}_0x1d1b42['componentsPerAttribute']=0x3,_0x1d1b42['values']=_0x47161a;const _0x553589=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0xe83d38),'normal':new GeometryAttribute(_0x1d1b42)}),'indices':_0x31e70b});return _0x553589;}[_0x45c10f(0x3ce,0x392)](_0x297d34){const _0x46b692={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x297d34};return Appearance['getDefaultRenderState'](!![],![],_0x46b692);}[_0x4f4de1(0x486,0x400)](){const _0x4313d6={};_0x4313d6['st']=0x0,_0x4313d6[_0x3b306b(0x36f,0x3cb)]=0x1;const _0x53ba00={};_0x53ba00['enabled']=!![];const _0xb14966={};_0xb14966[_0x1432cd(-0x28d,-0x251)]=!![],_0xb14966[_0x1432cd(-0x21c,-0x27e)]=WebGLRenderingContext[_0x3b306b(0x3e7,0x37f)],_0xb14966[_0x3b306b(0x3a7,0x418)]=WebGLRenderingContext[_0x1432cd(-0x2d6,-0x32b)],_0xb14966['blendFuncDestination']=WebGLRenderingContext[_0x1432cd(-0x2e8,-0x2d8)];const _0x394641={};_0x394641[_0x3b306b(0x41e,0x3f5)]=undefined,_0x394641['depthTest']=_0x53ba00,_0x394641['depthMask']=!![],_0x394641[_0x3b306b(0x39e,0x3f8)]=_0xb14966;const _0x3c2448=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x4313d6,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x3b306b(0x363,0x37a)],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0x3b306b(0x3eb,0x40f)]['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing'][_0x1432cd(-0x24f,-0x260)]['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0x3b306b(0x3aa,0x363)]['particlesSpeed'],'frameRateAdjustment':()=>this['computing'][_0x1432cd(-0x27f,-0x294)],'colorTable':()=>this['colorTable'],'domain':()=>{var _0xd250ad,_0x4a4ae8;function _0x3cb8eb(_0x53d362,_0x239c28){return _0x1432cd(_0x239c28-0x83,_0x53d362);}function _0x324029(_0x54925c,_0x283946){return _0x1432cd(_0x54925c-0x1f1,_0x283946);}const _0x4ad699=new Cartesian2(((_0xd250ad=this[_0x3cb8eb(-0x12b,-0x188)]['domain'])===null||_0xd250ad===void 0x0?void 0x0:_0xd250ad['min'])??this[_0x3cb8eb(-0x1f2,-0x18b)]['windData']['speed'][_0x324029(-0x9f,-0x10a)],((_0x4a4ae8=this['options']['domain'])===null||_0x4a4ae8===void 0x0?void 0x0:_0x4a4ae8['max'])??this['computing']['windData']['speed']['max']);return _0x4ad699;},'displayRange':()=>{var _0x26270e,_0x3c5589;function _0x34be41(_0xb3de9,_0x4e7820){return _0x3b306b(_0xb3de9- -0x1bd,_0x4e7820);}const _0x127890=new Cartesian2(((_0x26270e=this['options']['displayRange'])===null||_0x26270e===void 0x0?void 0x0:_0x26270e[_0x34be41(0x1ac,0x11e)])??this[_0x34be41(0x22e,0x2bc)]['windData']['speed']['min'],((_0x3c5589=this['options']['displayRange'])===null||_0x3c5589===void 0x0?void 0x0:_0x3c5589['max'])??this[_0x39e283(-0x71,-0x4f)][_0x34be41(0x1b1,0x1ff)]['speed']['max']);function _0x39e283(_0x101d7e,_0xee2bcc){return _0x3b306b(_0xee2bcc- -0x43a,_0x101d7e);}return _0x127890;},'particleHeight':()=>this['options'][_0x1432cd(-0x2be,-0x292)]||0x0,'aspect':()=>this[_0x1432cd(-0x2e1,-0x33a)]['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x4f570c={};_0x4f570c['min']=0x1,_0x4f570c['max']=0x2;const _0x1758a9=this['options'][_0x21b4eb(0x3c9,0x3d4)]||_0x4f570c;function _0x21b4eb(_0x288be9,_0x1cd4e6){return _0x1432cd(_0x1cd4e6-0x68f,_0x288be9);}return new Cartesian2(_0x1758a9['min'],_0x1758a9['max']);},'lineLength':()=>{const _0x3241d9={};function _0x3e4010(_0xda0ad1,_0x4cdcd){return _0x3b306b(_0xda0ad1- -0x57b,_0x4cdcd);}_0x3241d9['min']=0x14,_0x3241d9['max']=0x64;const _0x26a4af=this['options'][_0x3e4010(-0x26c,-0x1ed)]||_0x3241d9;return new Cartesian2(_0x26a4af['min'],_0x26a4af['max']);},'is3D':()=>this[_0x3b306b(0x324,0x349)][_0x3b306b(0x320,0x2ee)]===SceneMode[_0x1432cd(-0x1e3,-0x196)],'segmentsDepthTexture':()=>this[_0x3b306b(0x3fc,0x452)]['segmentsDepth']},'vertexShaderSource':ShaderManager[_0x1432cd(-0x257,-0x1db)](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this[_0x1432cd(-0x205,-0x193)](_0x394641)});function _0x3b306b(_0x294892,_0x5ea26c){return _0x4f4de1(_0x294892- -0x131,_0x5ea26c);}const _0x42e827={};_0x42e827['segments']=_0x3c2448;function _0x1432cd(_0x388a11,_0x262c49){return _0x4f4de1(_0x388a11- -0x72a,_0x262c49);}return _0x42e827;}['onParticlesTextureSizeChange'](){const _0xc01be3=this['createSegmentsGeometry']();this[_0x1efaf0(0x1be,0x21b)][_0x2160f1(-0x18f,-0x1dd)]['geometry']=_0xc01be3;const _0xaf1e40={};_0xaf1e40['context']=this['context'],_0xaf1e40[_0x2160f1(-0x24e,-0x21c)]=_0xc01be3,_0xaf1e40['attributeLocations']=this[_0x2160f1(-0x105,-0x177)][_0x1efaf0(0x22b,0x1b5)]['attributeLocations'];function _0x2160f1(_0x550efa,_0x52e80c){return _0x4f4de1(_0x52e80c- -0x6a6,_0x550efa);}_0xaf1e40['bufferUsage']=BufferUsage[_0x1efaf0(0x23c,0x1b8)];const _0x189a8f=VertexArray[_0x2160f1(-0x259,-0x224)](_0xaf1e40);function _0x1efaf0(_0x27e382,_0x37ccde){return _0x4f4de1(_0x37ccde- -0x314,_0x27e382);}this['primitives']['segments']['commandToExecute']&&(this[_0x1efaf0(0x2a1,0x21b)][_0x2160f1(-0x1a4,-0x1dd)]['commandToExecute']['vertexArray']=_0x189a8f);}[_0x4f4de1(0x554,0x534)](){function _0xc1cef5(_0x4388a5,_0x602572){return _0x4f4de1(_0x602572- -0x4bc,_0x4388a5);}this[_0x477d1c(0x49,0xa0)]['destroy']();function _0x477d1c(_0x485843,_0x58b175){return _0x45c10f(_0x58b175,_0x485843- -0x2ce);}this['colorTable']=this[_0x477d1c(0x89,0x60)]();}[_0x4f4de1(0x49b,0x4d8)](_0xf520a8){function _0x584412(_0x263a02,_0x4200c6){return _0x4f4de1(_0x263a02- -0x19a,_0x4200c6);}function _0x3e6069(_0x2537ee,_0xdc74a0){return _0x4f4de1(_0xdc74a0- -0x35a,_0x2537ee);}const _0x369bec=_0xf520a8['colors']&&JSON[_0x3e6069(0x16a,0x15d)](_0xf520a8['colors'])!==JSON['stringify'](this[_0x3e6069(0x1a0,0x1c5)][_0x584412(0x372,0x3d6)]);this[_0x3e6069(0x183,0x1c5)]=deepMerge(_0xf520a8,this['options']),_0x369bec&&this[_0x584412(0x3ba,0x417)]();}[_0x45c10f(0x37e,0x315)](){Object[_0x5c9f84(0xbd,0x90)](this[_0x5c9f84(0xf5,0xd2)])[_0x5c9f84(0x2b,0x9f)](_0x4ec0bd=>{_0x4ec0bd['destroy']();}),Object['values'](this['primitives'])[_0x26901b(-0xc7,-0x123)](_0x20a110=>{_0x20a110['destroy']();});function _0x5c9f84(_0x33eda6,_0x4af61f){return _0x45c10f(_0x4af61f,_0x33eda6- -0x2aa);}function _0x26901b(_0x3fd716,_0x57acb9){return _0x4f4de1(_0x3fd716- -0x52f,_0x57acb9);}this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x4f4de1(0x51a,0x558)];function _0x21b3(_0x3cc56c,_0x1bd949){const _0x3c183f=_0x3c18();return _0x21b3=function(_0x21b3a1,_0x297ee1){_0x21b3a1=_0x21b3a1-0x80;let _0x3baf9b=_0x3c183f[_0x21b3a1];return _0x3baf9b;},_0x21b3(_0x3cc56c,_0x1bd949);}class WindParticleSystem{constructor(_0x1fa983,_0xc95e70,_0x5c0db9,_0x2364f9,_0x3e5de3){this['context']=_0x1fa983;function _0x35e251(_0x11fa95,_0x5c0c50){return _0x45c10f(_0x11fa95,_0x5c0c50- -0xe);}this[_0x35e251(0x35d,0x37e)]=_0x5c0db9,this['viewerParameters']=_0x2364f9,this[_0x48e0eb(-0x95,-0x7d)]=new WindParticlesComputing(_0x1fa983,_0xc95e70,_0x5c0db9,_0x2364f9,_0x3e5de3);function _0x48e0eb(_0x2f1dde,_0x3e8a86){return _0x45c10f(_0x3e8a86,_0x2f1dde- -0x41e);}this[_0x35e251(0x3b9,0x36c)]=new WindParticlesRendering(_0x1fa983,_0x5c0db9,_0x2364f9,this['computing']),this['clearFramebuffers']();}['getPrimitives'](){function _0x2d7282(_0x5944a3,_0x21813e){return _0x4f4de1(_0x21813e- -0x631,_0x5944a3);}const _0x3c62fc=[this['computing']['primitives'][_0x4898d8(0x467,0x45c)],this[_0x4898d8(0x390,0x41b)]['primitives'][_0x4898d8(0x3d5,0x428)],this['computing']['primitives'][_0x2d7282(-0xd4,-0xe8)],this['rendering']['primitives']['segments']];function _0x4898d8(_0x55d165,_0x27c347){return _0x4f4de1(_0x27c347- -0x101,_0x55d165);}return _0x3c62fc;}[_0x45c10f(0x3ad,0x351)](){function _0x5e4fa5(_0x2c880b,_0x5b7314){return _0x45c10f(_0x5b7314,_0x2c880b-0x191);}const _0xd02dfa=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0x32a2e6(_0x522f2c,_0x147099){return _0x4f4de1(_0x147099- -0x46a,_0x522f2c);}Object[_0x5e4fa5(0x45e,0x41b)](this['rendering']['framebuffers'])[_0x5e4fa5(0x466,0x461)](_0x477d54=>{_0xd02dfa['framebuffer']=this[_0x5d190a(-0x1f9,-0x25d)][_0x5d190a(-0x1d4,-0x1d8)][_0x477d54];function _0x5d190a(_0x1f72d5,_0x1f172a){return _0x32a2e6(_0x1f172a,_0x1f72d5- -0x29c);}function _0x414ac9(_0x57914f,_0x15aaf6){return _0x5e4fa5(_0x57914f- -0x413,_0x15aaf6);}_0xd02dfa['execute'](this[_0x5d190a(-0x2bd,-0x2a4)]);});}['changeOptions'](_0x6a079d){let _0x1d6a19=![];function _0x4755d6(_0xb83136,_0x5160cc){return _0x4f4de1(_0x5160cc- -0x39b,_0xb83136);}_0x6a079d['particlesTextureSize']&&this['options']['particlesTextureSize']!==_0x6a079d[_0xc55add(-0x5a,-0x4f)]&&(_0x1d6a19=!![]);const _0x12c066=deepMerge(_0x6a079d,this['options']);if(_0x12c066['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x12c066,this['rendering'][_0x4755d6(0x8e,0x100)](_0x6a079d),this['computing']['updateOptions'](_0x6a079d);function _0xc55add(_0x466a6d,_0x38f291){return _0x45c10f(_0x466a6d,_0x38f291- -0x38c);}_0x1d6a19&&(this[_0xc55add(0x52,-0x3)]['destroyParticlesTextures'](),this['computing'][_0xc55add(-0x67,-0x9)](),this[_0x4755d6(0x166,0x172)]['onParticlesTextureSizeChange']());}[_0x45c10f(0x317,0x304)](_0x5f1c23){this['viewerParameters']=_0x5f1c23;function _0x4f690b(_0x4dbc39,_0x2d7d1a){return _0x45c10f(_0x4dbc39,_0x2d7d1a- -0x1aa);}this[_0x4f690b(0x1bf,0x1df)][_0x57bc84(0x1d4,0x1c3)]=_0x5f1c23;function _0x57bc84(_0x4e5429,_0x2012c5){return _0x4f4de1(_0x2012c5- -0x292,_0x4e5429);}this[_0x4f690b(0x23b,0x1d0)]['viewerParameters']=_0x5f1c23;}['destroy'](){function _0x5e302c(_0x3a58fd,_0x2eee39){return _0x4f4de1(_0x2eee39- -0x58c,_0x3a58fd);}this['computing'][_0x5e302c(-0x153,-0xe4)]();function _0x510f37(_0x5adc1a,_0x1278de){return _0x45c10f(_0x5adc1a,_0x1278de-0x19d);}this[_0x5e302c(-0xf4,-0x7f)]['destroy']();}}const Cesium$1=mars3d__namespace[_0x4f4de1(0x51a,0x4af)],BaseLayer$1=mars3d__namespace['layer'][_0x45c10f(0x2f0,0x2b4)],_0x4d22d8={};_0x4d22d8[_0x4f4de1(0x49a,0x4ea)]=0x1,_0x4d22d8['max']=0x2;const _0x3bfa40={};_0x3bfa40['min']=0x14,_0x3bfa40['max']=0x64;const _0xd7c28={};_0xd7c28['particlesTextureSize']=0x64,_0xd7c28['fixedHeight']=0x0,_0xd7c28['lineWidth']=_0x4d22d8,_0xd7c28[_0x4f4de1(0x440,0x3bb)]=_0x3bfa40,_0xd7c28[_0x45c10f(0x3cc,0x349)]=0x1,_0xd7c28[_0x45c10f(0x2d6,0x2cb)]=0.003,_0xd7c28['dropRateBump']=0.001,_0xd7c28['colors']=['rgb(206,255,255)'],_0xd7c28['flipY']=![],_0xd7c28[_0x45c10f(0x2ad,0x334)]=!![];const DEF_OPTIONS=_0xd7c28;class WindLayer extends BaseLayer$1{constructor(_0x1e9859={}){_0x1e9859={...DEF_OPTIONS,..._0x1e9859},super(_0x1e9859);function _0x2b7576(_0x3acd0,_0x15cca2){return _0x4f4de1(_0x3acd0- -0x4a3,_0x15cca2);}this[_0x2b7576(-0x33,-0x4)](_0x1e9859,_0x1e9859);}get['layer'](){return this['primitives'];}get['data'](){function _0xcf3498(_0x3d0fde,_0x3b383e){return _0x45c10f(_0x3b383e,_0x3d0fde- -0x37b);}return this[_0xcf3498(0x11,-0x2a)]['data'];}set['data'](_0x146d84){this['options']['data']=_0x146d84;function _0x265424(_0x47feb9,_0x29c17c){return _0x45c10f(_0x29c17c,_0x47feb9-0xc6);}this[_0x265424(0x411,0x49a)](_0x146d84);}get[_0x45c10f(0x3a4,0x379)](){function _0x7d7400(_0xa87ed4,_0x53282c){return _0x4f4de1(_0xa87ed4- -0x243,_0x53282c);}return this['options'][_0x7d7400(0x2c9,0x2f8)];}set[_0x45c10f(0x37f,0x379)](_0x495d19){function _0x2727aa(_0x1c3e3d,_0x355ec7){return _0x4f4de1(_0x1c3e3d- -0x549,_0x355ec7);}this['options'][_0x2727aa(-0x3d,0x30)]=_0x495d19;function _0x22eea7(_0x27bcd9,_0x27cefb){return _0x45c10f(_0x27cefb,_0x27bcd9- -0x2a9);}const _0x21b8c1={};_0x21b8c1[_0x22eea7(0xd0,0x78)]=_0x495d19,this['_setOptionsHook'](this['options'],_0x21b8c1);}[_0x45c10f(0x378,0x3ad)](){}[_0x45c10f(0x2f8,0x372)](){this['scene']=this['_map']['scene'],this['camera']=this['_map']['camera'];this[_0x3a40c1(0x4c8,0x4af)]['data']&&this['setData'](this[_0x3a40c1(0x4c7,0x4af)][_0x3a40c1(0x4ef,0x4c5)]);if(!this['windData'])return;function _0x18beb5(_0xb774ca,_0x4f732d){return _0x4f4de1(_0xb774ca- -0x255,_0x4f732d);}this[_0x18beb5(0x200,0x218)]={'lonRange':new Cesium$1[(_0x3a40c1(0x3bc,0x414))](-0xb4,0xb4),'latRange':new Cesium$1[(_0x3a40c1(0x3af,0x414))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0x3a40c1(0x540,0x4d6)]},this['updateViewerParameters'](),this[_0x3a40c1(0x3e9,0x44a)]=new WindParticleSystem(this['scene'][_0x18beb5(0x1f4,0x239)],this[_0x3a40c1(0x45e,0x42f)],this[_0x18beb5(0x2ca,0x2b2)],this[_0x18beb5(0x200,0x23c)],this['scene']);function _0x3a40c1(_0x77f7df,_0x10be47){return _0x45c10f(_0x77f7df,_0x10be47-0x123);}this[_0x18beb5(0x2da,0x29f)]=this['particleSystem']['getPrimitives'](),this[_0x3a40c1(0x51b,0x4bf)]['forEach'](_0x319760=>{this['scene']['primitives']['add'](_0x319760);}),this['camera']['percentageChanged']=0.01,this['camera'][_0x3a40c1(0x3dc,0x415)]['addEventListener'](this['updateViewerParameters']['bind'](this)),this[_0x18beb5(0x23c,0x1c1)]['morphComplete']['addEventListener'](this[_0x3a40c1(0x547,0x4eb)]['bind'](this)),window[_0x18beb5(0x267,0x2d6)]('resize',this['updateViewerParameters'][_0x18beb5(0x27d,0x218)](this));}[_0x4f4de1(0x441,0x465)](){function _0x3f4913(_0x46c49c,_0x42668c){return _0x4f4de1(_0x46c49c- -0x243,_0x42668c);}function _0x33d4c9(_0x51acde,_0x471dfb){return _0x45c10f(_0x51acde,_0x471dfb-0x160);}this[_0x33d4c9(0x3ea,0x437)]['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete'][_0x33d4c9(0x444,0x4c2)](this['updateViewerParameters'][_0x3f4913(0x28f,0x2b0)](this)),window['removeEventListener']('resize',this[_0x3f4913(0x318,0x2d0)]['bind'](this)),this['primitives']&&(this[_0x33d4c9(0x585,0x4fc)][_0x3f4913(0x225,0x21b)](_0xcbda02=>{function _0x354864(_0x4d285b,_0x4e525a){return _0x33d4c9(_0x4d285b,_0x4e525a- -0x405);}this['scene'][_0x354864(0x162,0xf7)]['remove'](_0xcbda02);}),delete this[_0x33d4c9(0x55b,0x4fc)]),this['particleSystem']&&(this[_0x33d4c9(0x492,0x487)]['destroy'](),delete this[_0x3f4913(0x277,0x1f0)]);}[_0x45c10f(0x3ac,0x34b)](_0x51f66c,_0x33a63b){function _0x137655(_0x267b4a,_0x5da3a2){return _0x4f4de1(_0x267b4a- -0x5a0,_0x5da3a2);}function _0x4bfb8e(_0x107137,_0x1a2e9a){return _0x4f4de1(_0x107137- -0x535,_0x1a2e9a);}this['windData']=this['processWindData'](_0x51f66c);if(_0x33a63b){this[_0x4bfb8e(-0xf4,-0x12f)](),this['_addedHook']();return;}this['particleSystem']?(this[_0x4bfb8e(-0x7b,-0xf5)]['computing']['updateWindData'](this[_0x137655(-0x101,-0x15d)]),this[_0x4bfb8e(-0xa4,-0x2e)]['requestRender']()):this[_0x4bfb8e(-0x30,-0x73)]();}['_setOptionsHook'](_0x49ee0f,_0xa1122f){function _0x5918b3(_0x210e63,_0x3e24e3){return _0x45c10f(_0x3e24e3,_0x210e63- -0x27c);}function _0x1604cb(_0x95755f,_0x5b6ee8){return _0x4f4de1(_0x95755f- -0xda,_0x5b6ee8);}this['particleSystem']&&(this[_0x1604cb(0x3e0,0x3c0)]['changeOptions'](_0xa1122f),this[_0x5918b3(0x82,0x72)]['requestRender']());}['processWindData'](_0x540cb6){var _0x290db5,_0x217f51;const _0x23dba8={..._0x540cb6};function _0x57d397(_0x4ecb16,_0x55ef0c){return _0x4f4de1(_0x4ecb16- -0x154,_0x55ef0c);}const _0x174d67=_0x23dba8;!_0x174d67['height']&&_0x174d67[_0x4dbe1e(0x3e8,0x44e)]&&(_0x174d67['height']=_0x174d67['rows']);!_0x174d67['width']&&_0x174d67[_0x57d397(0x371,0x371)]&&(_0x174d67[_0x4dbe1e(0x364,0x2d8)]=_0x174d67[_0x4dbe1e(0x3c8,0x44f)]);!_0x174d67[_0x57d397(0x3ce,0x33d)]&&(_0x174d67[_0x57d397(0x3ce,0x375)]={'west':_0x174d67[_0x57d397(0x348,0x369)],'south':_0x174d67['ymin'],'east':_0x174d67[_0x4dbe1e(0x37a,0x341)],'north':_0x174d67[_0x4dbe1e(0x3a9,0x35f)]});if(!_0x174d67['u']){const _0xbeeac1={};_0xbeeac1['array']=_0x540cb6['udata'],_0xbeeac1['min']=_0x540cb6[_0x4dbe1e(0x455,0x43f)],_0xbeeac1[_0x4dbe1e(0x43c,0x4cc)]=_0x540cb6[_0x57d397(0x351,0x3b2)],_0x174d67['u']=_0xbeeac1;}function _0x4dbe1e(_0x5ada69,_0x2a22cb){return _0x4f4de1(_0x5ada69- -0xfd,_0x2a22cb);}if(!_0x174d67['v']){const _0x21da79={};_0x21da79[_0x57d397(0x381,0x312)]=_0x540cb6[_0x57d397(0x309,0x299)],_0x21da79['min']=_0x540cb6[_0x4dbe1e(0x3e0,0x446)],_0x21da79[_0x4dbe1e(0x43c,0x47a)]=_0x540cb6[_0x57d397(0x32b,0x386)],_0x174d67['v']=_0x21da79;}if(((_0x290db5=_0x174d67['speed'])===null||_0x290db5===void 0x0?void 0x0:_0x290db5['min'])===undefined||((_0x217f51=_0x174d67['speed'])===null||_0x217f51===void 0x0?void 0x0:_0x217f51['max'])===undefined||_0x174d67[_0x57d397(0x3cc,0x392)]['array']===undefined){const _0x25bc69={'array':new Float32Array(_0x174d67['u'][_0x4dbe1e(0x3d8,0x3af)]['length']),'min':Number['MAX_VALUE'],'max':Number[_0x57d397(0x327,0x373)]};for(let _0x236647=0x0;_0x236647<_0x174d67['u'][_0x4dbe1e(0x3d8,0x448)][_0x57d397(0x2f2,0x2fd)];_0x236647++){_0x25bc69['array'][_0x236647]=Math['sqrt'](_0x174d67['u']['array'][_0x236647]*_0x174d67['u']['array'][_0x236647]+_0x174d67['v'][_0x4dbe1e(0x3d8,0x398)][_0x236647]*_0x174d67['v'][_0x57d397(0x381,0x369)][_0x236647]),_0x25bc69[_0x57d397(0x381,0x321)][_0x236647]!==0x0&&(_0x25bc69['min']=Math[_0x4dbe1e(0x39d,0x401)](_0x25bc69['min'],_0x25bc69['array'][_0x236647]),_0x25bc69[_0x57d397(0x3e5,0x42d)]=Math['max'](_0x25bc69['max'],_0x25bc69['array'][_0x236647]));}_0x174d67[_0x57d397(0x3cc,0x39a)]=_0x25bc69;}return _0x174d67;}['updateViewerParameters'](){var _0x14e885;const _0x9f6f89=this[_0x4fb417(-0x126,-0xf4)],_0x22dce9=_0x9f6f89['canvas'];function _0x349eaf(_0x1240b3,_0x467acc){return _0x4f4de1(_0x467acc- -0x248,_0x1240b3);}const _0xbcf77d={};_0xbcf77d['x']=0x0,_0xbcf77d['y']=0x0;const _0x55d152={};_0x55d152['x']=0x0,_0x55d152['y']=_0x22dce9['clientHeight'];const _0xe4dcc={};function _0x4fb417(_0x502e60,_0x3baf06){return _0x4f4de1(_0x502e60- -0x5b7,_0x3baf06);}_0xe4dcc['x']=_0x22dce9['clientWidth'],_0xe4dcc['y']=0x0;const _0x49e661={};_0x49e661['x']=_0x22dce9['clientWidth'],_0x49e661['y']=_0x22dce9[_0x4fb417(-0x130,-0x180)];const _0x11777d=[_0xbcf77d,_0x55d152,_0xe4dcc,_0x49e661];let _0x4e441b=0xb4,_0x563dde=-0xb4,_0x3e1d4d=0x5a,_0x4c5e41=-0x5a,_0x564874=![];for(const _0x52de04 of _0x11777d){const _0x103cbe=_0x9f6f89['camera'][_0x349eaf(0x2f7,0x2db)](new Cesium$1['Cartesian2'](_0x52de04['x'],_0x52de04['y']),_0x9f6f89['globe']['ellipsoid']);if(!_0x103cbe){_0x564874=!![];break;}const _0x6d1dd4=_0x9f6f89['globe']['ellipsoid']['cartesianToCartographic'](_0x103cbe),_0xbee75a=Cesium$1['Math'][_0x4fb417(-0x103,-0x157)](_0x6d1dd4['longitude']),_0x5ef2b9=Cesium$1[_0x4fb417(-0x173,-0x187)]['toDegrees'](_0x6d1dd4[_0x349eaf(0x300,0x271)]);_0x4e441b=Math['min'](_0x4e441b,_0xbee75a),_0x563dde=Math[_0x349eaf(0x273,0x2f1)](_0x563dde,_0xbee75a),_0x3e1d4d=Math['min'](_0x3e1d4d,_0x5ef2b9),_0x4c5e41=Math['max'](_0x4c5e41,_0x5ef2b9);}if(!_0x564874){const _0x5bd665=new Cesium$1['Cartesian2'](Math['max'](this[_0x349eaf(0x2a4,0x257)]['bounds'][_0x349eaf(0x267,0x2e8)],_0x4e441b),Math[_0x4fb417(-0x11d,-0xdb)](this['windData'][_0x4fb417(-0x95,-0x6f)]['east'],_0x563dde)),_0x583e51=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds']['south'],_0x3e1d4d),Math[_0x349eaf(0x2de,0x252)](this['windData']['bounds']['north'],_0x4c5e41)),_0x209099=(_0x5bd665['y']-_0x5bd665['x'])*0.05,_0x4cd720=(_0x583e51['y']-_0x583e51['x'])*0.05;_0x5bd665['x']=Math[_0x4fb417(-0x7e,0x11)](this['windData'][_0x4fb417(-0x95,-0x7e)][_0x349eaf(0x278,0x2e8)],_0x5bd665['x']-_0x209099),_0x5bd665['y']=Math['min'](this[_0x4fb417(-0x118,-0x95)][_0x349eaf(0x308,0x2da)][_0x349eaf(0x2b8,0x2a3)],_0x5bd665['y']+_0x209099),_0x583e51['x']=Math['max'](this['windData']['bounds'][_0x4fb417(-0xfa,-0xf6)],_0x583e51['x']-_0x4cd720),_0x583e51['y']=Math['min'](this[_0x4fb417(-0x118,-0x187)]['bounds']['north'],_0x583e51['y']+_0x4cd720),this['viewerParameters'][_0x4fb417(-0x8f,-0x14)]=_0x5bd665,this['viewerParameters'][_0x349eaf(0x195,0x217)]=_0x583e51;const _0x565cc2=this['windData']['bounds']['east']-this[_0x4fb417(-0x118,-0x143)][_0x4fb417(-0x95,-0xea)][_0x4fb417(-0x87,-0x24)],_0x4b0cd5=this[_0x4fb417(-0x118,-0xc6)][_0x4fb417(-0x95,-0x30)][_0x4fb417(-0x14c,-0xbf)]-this[_0x349eaf(0x2b4,0x257)][_0x4fb417(-0x95,-0x122)]['south'],_0x283335=(_0x5bd665['y']-_0x5bd665['x'])/_0x565cc2,_0x51372f=(_0x583e51['y']-_0x583e51['x'])/_0x4b0cd5,_0x1f778b=Math['min'](_0x283335,_0x51372f),_0x2d13cb=0x3e8*_0x1f778b;_0x2d13cb>0x0&&(this[_0x349eaf(0x1bd,0x20d)]['pixelSize']=Math['max'](0x0,Math[_0x4fb417(-0x11d,-0x90)](0x3e8,_0x2d13cb)));}this[_0x4fb417(-0x162,-0xec)][_0x4fb417(-0x166,-0x13d)]=this[_0x349eaf(0x226,0x249)]['mode'],(_0x14e885=this['particleSystem'])===null||_0x14e885===void 0x0||_0x14e885[_0x349eaf(0x1c4,0x24f)](this['viewerParameters']);}[_0x45c10f(0x41d,0x398)](_0x41007c,_0x31cead){const {bounds:_0x2f38fa,width:_0x315c3b,height:_0x1b967f,u:_0x2adaff,v:_0x5103a6,speed:_0x1b69ab}=this[_0x13b768(-0x36,-0x3)],{flipY:_0xcb3988}=this[_0x13b768(0x33,0x7d)];if(_0x41007c<_0x2f38fa[_0x13b768(0xec,0x8e)]||_0x41007c>_0x2f38fa['east']||_0x31cead<_0x2f38fa['south']||_0x31cead>_0x2f38fa['north'])return null;const _0x547872=(_0x41007c-_0x2f38fa['west'])/(_0x2f38fa['east']-_0x2f38fa['west'])*(_0x315c3b-0x1);let _0x21fde2=(_0x31cead-_0x2f38fa[_0x13b768(0x39,0x1b)])/(_0x2f38fa['north']-_0x2f38fa[_0x13b768(-0x5d,0x1b)])*(_0x1b967f-0x1);_0xcb3988&&(_0x21fde2=_0x1b967f-0x1-_0x21fde2);const _0x1f7c06=Math['floor'](_0x547872),_0x1eabf6=Math[_0x418597(0x315,0x28a)](_0x21fde2),_0x166acb=Math[_0x13b768(0x99,0x56)](_0x547872),_0x357020=Math[_0x418597(0x2b7,0x280)](_0x166acb+0x1,_0x315c3b-0x1),_0x1b07ad=Math['floor'](_0x21fde2),_0x255581=Math['min'](_0x1b07ad+0x1,_0x1b967f-0x1),_0x3e9315=_0x547872-_0x166acb,_0x4ae4b1=_0x21fde2-_0x1b07ad,_0x5b00fd=_0x1eabf6*_0x315c3b+_0x1f7c06,_0x178196=_0x1b07ad*_0x315c3b+_0x166acb,_0x4ce1b7=_0x1b07ad*_0x315c3b+_0x357020,_0x536b5b=_0x255581*_0x315c3b+_0x166acb,_0x36de25=_0x255581*_0x315c3b+_0x357020,_0x3e40b5=_0x2adaff[_0x13b768(-0x3f,0x33)][_0x178196];function _0x418597(_0x2e6af3,_0x20b7ac){return _0x45c10f(_0x20b7ac,_0x2e6af3- -0x50);}const _0x4c88fd=_0x2adaff['array'][_0x4ce1b7],_0x5dde34=_0x2adaff['array'][_0x536b5b];function _0x13b768(_0x28a42f,_0x1f06c9){return _0x4f4de1(_0x1f06c9- -0x4a2,_0x28a42f);}const _0x29c8dc=_0x2adaff['array'][_0x36de25],_0x5f2718=(0x1-_0x3e9315)*(0x1-_0x4ae4b1)*_0x3e40b5+_0x3e9315*(0x1-_0x4ae4b1)*_0x4c88fd+(0x1-_0x3e9315)*_0x4ae4b1*_0x5dde34+_0x3e9315*_0x4ae4b1*_0x29c8dc,_0x452ea0=_0x5103a6[_0x418597(0x2f2,0x2da)][_0x178196],_0x168f25=_0x5103a6['array'][_0x4ce1b7],_0x1092ba=_0x5103a6['array'][_0x536b5b],_0x5c8666=_0x5103a6['array'][_0x36de25],_0x374c60=(0x1-_0x3e9315)*(0x1-_0x4ae4b1)*_0x452ea0+_0x3e9315*(0x1-_0x4ae4b1)*_0x168f25+(0x1-_0x3e9315)*_0x4ae4b1*_0x1092ba+_0x3e9315*_0x4ae4b1*_0x5c8666,_0x28b7e6=Math['sqrt'](_0x5f2718*_0x5f2718+_0x374c60*_0x374c60),_0x3bf355={};_0x3bf355['u']=_0x2adaff[_0x13b768(0xba,0x33)][_0x5b00fd],_0x3bf355['v']=_0x5103a6['array'][_0x5b00fd],_0x3bf355['speed']=_0x1b69ab[_0x418597(0x2f2,0x361)][_0x5b00fd];const _0x2f4ef9={};_0x2f4ef9['u']=_0x5f2718,_0x2f4ef9['v']=_0x374c60,_0x2f4ef9['speed']=_0x28b7e6;const _0x5d414e={};return _0x5d414e['original']=_0x3bf355,_0x5d414e['interpolated']=_0x2f4ef9,_0x5d414e;}}mars3d__namespace[_0x4f4de1(0x4a7,0x49e)]['register'](_0x45c10f(0x40e,0x386),WindLayer),mars3d__namespace[_0x4f4de1(0x4f7,0x4fd)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null;function _0x2c00fa(_0x1abb4e,_0x8ae504){return _0x45c10f(_0x1abb4e,_0x8ae504-0x22);}this['lat']=null,this['tlng']=null,this['tlat']=null;function _0x226385(_0x4dfc3e,_0x1fd341){return _0x45c10f(_0x1fd341,_0x4dfc3e- -0x483);}this[_0x226385(-0x15e,-0xfb)]=null,this[_0x226385(-0xf6,-0xde)]=null;}['destroy'](){for(const _0x468b3a in this){delete this[_0x468b3a];}}}class CanvasWindField{constructor(_0x2b5e49){this['setOptions'](_0x2b5e49);}get['speedRate'](){return this['_speedRate'];}set[_0x45c10f(0x2de,0x32b)](_0xc60a9a){function _0x311b83(_0x6b6eb0,_0x241186){return _0x45c10f(_0x6b6eb0,_0x241186- -0x332);}this[_0x311b83(0x86,0x52)]=(0x64-(_0xc60a9a>0x63?0x63:_0xc60a9a))*0x64;function _0x4144a9(_0x422083,_0x1857f5){return _0x45c10f(_0x422083,_0x1857f5- -0x3d9);}this['_calc_speedRate']=[(this[_0x4144a9(-0xb3,-0xf5)]-this[_0x311b83(0x39,-0x29)])/this['_speedRate'],(this['ymax']-this['ymin'])/this[_0x311b83(-0x39,0x52)]];}get['maxAge'](){return this['_maxAge'];}set['maxAge'](_0x14689d){function _0x4c79e9(_0x522290,_0x1cb15e){return _0x4f4de1(_0x1cb15e- -0x661,_0x522290);}this[_0x4c79e9(-0x1d7,-0x1ef)]=_0x14689d;}[_0x45c10f(0x297,0x2da)](_0x313594){this[_0x10e504(-0x1af,-0x121)]=_0x313594,this['maxAge']=_0x313594['maxAge']||0x78,this[_0x58d883(-0xa8,-0x49)]=_0x313594[_0x10e504(-0x1d3,-0x182)]||0x32,this[_0x10e504(-0x19c,-0x13f)]=[];function _0x58d883(_0x5150a0,_0x3fbc3d){return _0x4f4de1(_0x3fbc3d- -0x507,_0x5150a0);}function _0x10e504(_0x273e26,_0x381466){return _0x4f4de1(_0x381466- -0x640,_0x273e26);}const _0x241a30=_0x313594['particlesNumber']||0x1000;for(let _0x1b2cb6=0x0;_0x1b2cb6<_0x241a30;_0x1b2cb6++){const _0x2b82a1=this['_randomParticle'](new CanvasParticle());this[_0x58d883(0x35,-0x6)]['push'](_0x2b82a1);}}[_0x45c10f(0x29f,0x2b0)](_0x165836){this['rows']=_0x165836[_0x17ca46(0x1c2,0x156)],this['cols']=_0x165836['cols'],this['xmin']=_0x165836[_0x17ca46(0x179,0x10d)],this['xmax']=_0x165836[_0x48af1c(-0x311,-0x2fb)],this[_0x48af1c(-0x30c,-0x38d)]=_0x165836['ymin'],this['ymax']=_0x165836['ymax'],this['grid']=[];const _0x51378=_0x165836['udata'],_0x13811f=_0x165836['vdata'];let _0x56cc53=![];function _0x48af1c(_0x2d7ec9,_0x151b12){return _0x4f4de1(_0x2d7ec9- -0x788,_0x151b12);}_0x51378['length']===this[_0x48af1c(-0x2a3,-0x262)]&&_0x51378[0x0][_0x48af1c(-0x342,-0x39c)]===this['cols']&&(_0x56cc53=!![]);let _0x58ed3d=0x0,_0x4e52d3=null,_0x220fa3=null;function _0x17ca46(_0x1c8055,_0x1ff305){return _0x45c10f(_0x1c8055,_0x1ff305- -0x1fc);}for(let _0x24db35=0x0;_0x24db35<this['rows'];_0x24db35++){_0x4e52d3=[];for(let _0xde1247=0x0;_0xde1247<this['cols'];_0xde1247++,_0x58ed3d++){_0x56cc53?_0x220fa3=this['_calcUV'](_0x51378[_0x24db35][_0xde1247],_0x13811f[_0x24db35][_0xde1247]):_0x220fa3=this[_0x17ca46(0x118,0xfa)](_0x51378[_0x58ed3d],_0x13811f[_0x58ed3d]),_0x4e52d3['push'](_0x220fa3);}this['grid'][_0x17ca46(0x1a5,0x174)](_0x4e52d3);}!this['options']['flipY']&&this[_0x17ca46(0x13f,0x171)]['reverse']();}[_0x4f4de1(0x4cd,0x449)](){delete this['rows'],delete this['cols'];function _0x3d209e(_0x2a0965,_0x18b4cf){return _0x4f4de1(_0x18b4cf- -0x1d2,_0x2a0965);}delete this['xmin'],delete this['xmax'],delete this['ymin'],delete this['ymax'],delete this[_0x3d209e(0x2c2,0x32e)],delete this['particles'];}['toGridXY'](_0x216cab,_0x3d04a6){function _0x3c1302(_0x199c48,_0x32a05c){return _0x4f4de1(_0x199c48- -0x17a,_0x32a05c);}const _0x2ce4d9=(_0x216cab-this['xmin'])/(this['xmax']-this['xmin'])*(this['cols']-0x1),_0x2db9b7=(this[_0x3c1302(0x32c,0x313)]-_0x3d04a6)/(this['ymax']-this['ymin'])*(this['rows']-0x1);return[_0x2ce4d9,_0x2db9b7];}[_0x4f4de1(0x55a,0x5b7)](_0xa33a1d,_0x1aefa9){if(_0xa33a1d<0x0||_0xa33a1d>=this[_0x5d384c(0x3f5,0x443)]||_0x1aefa9>=this['rows'])return[0x0,0x0,0x0];function _0x5d384c(_0x28f154,_0x21c29a){return _0x4f4de1(_0x28f154- -0xd0,_0x21c29a);}const _0x2854c8=Math['floor'](_0xa33a1d),_0x469cc8=Math['floor'](_0x1aefa9);if(_0x2854c8===_0xa33a1d&&_0x469cc8===_0x1aefa9)return this['grid'][_0x1aefa9][_0xa33a1d];const _0x349ce9=_0x2854c8+0x1,_0x400f55=_0x469cc8+0x1,_0x1b34e2=this['getUVByXY'](_0x2854c8,_0x469cc8),_0x42136c=this['getUVByXY'](_0x349ce9,_0x469cc8),_0xa8cd10=this['getUVByXY'](_0x2854c8,_0x400f55),_0x348b4c=this[_0x429692(0x190,0x186)](_0x349ce9,_0x400f55);let _0x375b8c=null;try{_0x375b8c=this['_bilinearInterpolation'](_0xa33a1d-_0x2854c8,_0x1aefa9-_0x469cc8,_0x1b34e2,_0x42136c,_0xa8cd10,_0x348b4c);}catch(_0x8cefa3){console[_0x429692(0x126,0xc7)](_0xa33a1d,_0x1aefa9);}function _0x429692(_0x2c3a86,_0x1809f2){return _0x4f4de1(_0x2c3a86- -0x3ca,_0x1809f2);}return _0x375b8c;}['_bilinearInterpolation'](_0x5566cc,_0x1d430f,_0x171a0b,_0x5c996c,_0x32d5b2,_0x3ce290){const _0x3362e9=0x1-_0x5566cc,_0x58d7a1=0x1-_0x1d430f,_0x4a2721=_0x3362e9*_0x58d7a1,_0x5d22f2=_0x5566cc*_0x58d7a1,_0x3bd6ed=_0x3362e9*_0x1d430f,_0x5955f0=_0x5566cc*_0x1d430f;function _0xf1b3d0(_0x541654,_0x1238a7){return _0x4f4de1(_0x541654- -0x55,_0x1238a7);}const _0x39ec0e=_0x171a0b[0x0]*_0x4a2721+_0x5c996c[0x0]*_0x5d22f2+_0x32d5b2[0x0]*_0x3bd6ed+_0x3ce290[0x0]*_0x5955f0,_0x2486fa=_0x171a0b[0x1]*_0x4a2721+_0x5c996c[0x1]*_0x5d22f2+_0x32d5b2[0x1]*_0x3bd6ed+_0x3ce290[0x1]*_0x5955f0;return this[_0xf1b3d0(0x434,0x427)](_0x39ec0e,_0x2486fa);}['_calcUV'](_0x5ca707,_0x385256){function _0x39a271(_0x10df2c,_0x5541f3){return _0x45c10f(_0x5541f3,_0x10df2c- -0x3d6);}return[+_0x5ca707,+_0x385256,Math[_0x39a271(-0x16,0x55)](_0x5ca707*_0x5ca707+_0x385256*_0x385256)];}[_0x4f4de1(0x54a,0x572)](_0x16a0be,_0x2f794d){if(!this[_0x38fefd(-0x1db,-0x193)](_0x16a0be,_0x2f794d))return null;const _0x55bacc=this[_0x28bf6a(0x10c,0xde)](_0x16a0be,_0x2f794d);function _0x38fefd(_0x2470d9,_0x4caf72){return _0x45c10f(_0x2470d9,_0x4caf72- -0x54b);}const _0x14fc2a=this[_0x28bf6a(0x1ff,0x1e4)](_0x55bacc[0x0],_0x55bacc[0x1]);function _0x28bf6a(_0xf15847,_0x568910){return _0x4f4de1(_0xf15847- -0x35b,_0x568910);}return _0x14fc2a;}[_0x45c10f(0x3cf,0x3b8)](_0x427d51,_0x3ef030){function _0x3fe134(_0x5bd56,_0x53ed62){return _0x45c10f(_0x53ed62,_0x5bd56- -0x5ce);}function _0x329f14(_0x1da877,_0x42886c){return _0x45c10f(_0x1da877,_0x42886c- -0x3af);}return _0x427d51>=this[_0x329f14(-0x8b,-0xa6)]&&_0x427d51<=this['xmax']&&_0x3ef030>=this[_0x329f14(-0xd9,-0xc6)]&&_0x3ef030<=this['ymax']?!![]:![];}[_0x4f4de1(0x483,0x409)](){const _0x5603ab=fRandomByfloat(this['xmin'],this[_0x8853f8(0x28b,0x27d)]);function _0x8853f8(_0x1288f3,_0x166e6d){return _0x4f4de1(_0x1288f3- -0x1ec,_0x166e6d);}const _0x549c60=fRandomByfloat(this['ymin'],this[_0x5bed5d(0x3cd,0x39d)]);function _0x5bed5d(_0x2921d5,_0x221cfa){return _0x45c10f(_0x221cfa,_0x2921d5-0xba);}const _0x101765={};return _0x101765['lat']=_0x549c60,_0x101765['lng']=_0x5603ab,_0x101765;}[_0x45c10f(0x2b6,0x2e1)](){function _0x19c166(_0x3623d0,_0x5ef2d4){return _0x45c10f(_0x3623d0,_0x5ef2d4- -0x2da);}let _0x483711,_0x1b5d7d,_0x73e220;for(let _0x1a0a3f=0x0,_0x4685cf=this[_0x19c166(0x67,0x94)]['length'];_0x1a0a3f<_0x4685cf;_0x1a0a3f++){let _0x53b9e4=this[_0x19c166(0x62,0x94)][_0x1a0a3f];_0x53b9e4[_0x19c166(0x99,0x4b)]<=0x0&&(_0x53b9e4=this['_randomParticle'](_0x53b9e4));if(_0x53b9e4['age']>0x0){const _0x4bb7c8=_0x53b9e4['tlng'],_0x1ee5c0=_0x53b9e4[_0x3b056b(-0x235,-0x1c3)];_0x73e220=this[_0x3b056b(-0x1ed,-0x259)](_0x4bb7c8,_0x1ee5c0),_0x73e220?(_0x483711=_0x4bb7c8+this[_0x3b056b(-0x278,-0x273)][0x0]*_0x73e220[0x0],_0x1b5d7d=_0x1ee5c0+this[_0x19c166(0x36,0x52)][0x1]*_0x73e220[0x1],_0x53b9e4[_0x3b056b(-0x25e,-0x2b3)]=_0x4bb7c8,_0x53b9e4[_0x3b056b(-0x246,-0x29e)]=_0x1ee5c0,_0x53b9e4['tlng']=_0x483711,_0x53b9e4['tlat']=_0x1b5d7d,_0x53b9e4[_0x3b056b(-0x217,-0x29a)]=_0x73e220[0x2],_0x53b9e4[_0x19c166(0xd2,0x4b)]--):_0x53b9e4['age']=0x0;}}function _0x3b056b(_0x4f5c89,_0xd3b7e9){return _0x45c10f(_0xd3b7e9,_0x4f5c89- -0x5a4);}return this['particles'];}[_0x45c10f(0x36b,0x2ee)](_0x339681){function _0x26cd3a(_0x4052a8,_0x479bb8){return _0x4f4de1(_0x479bb8- -0x2f6,_0x4052a8);}let _0x5df2b0,_0x40b5dd;for(let _0x41b300=0x0;_0x41b300<0x1e;_0x41b300++){_0x5df2b0=this[_0x43492e(0xa4,0x69)](),_0x40b5dd=this['getUVByPoint'](_0x5df2b0['lng'],_0x5df2b0['lat']);if(_0x40b5dd&&_0x40b5dd[0x2]>0x0)break;}if(!_0x40b5dd)return _0x339681;const _0x311a36=_0x5df2b0[_0x43492e(0xfa,0x74)]+this[_0x26cd3a(0x16b,0x1c9)][0x0]*_0x40b5dd[0x0],_0x176b52=_0x5df2b0['lat']+this['_calc_speedRate'][0x1]*_0x40b5dd[0x1];_0x339681['lng']=_0x5df2b0['lng'],_0x339681[_0x43492e(0x112,0xa7)]=_0x5df2b0[_0x43492e(0x112,0x111)],_0x339681[_0x26cd3a(0x18e,0x20e)]=_0x311a36,_0x339681['tlat']=_0x176b52,_0x339681['age']=Math['round'](0xa+Math[_0x43492e(0x145,0xc5)]()*this['maxAge']);function _0x43492e(_0x4dabf4,_0x28adec){return _0x4f4de1(_0x4dabf4- -0x3df,_0x28adec);}return _0x339681['speed']=_0x40b5dd[0x2],_0x339681;}[_0x45c10f(0x30f,0x315)](){for(const _0x79958e in this){delete this[_0x79958e];}}}function fRandomByfloat(_0x241711,_0x23cea2){return _0x241711+Math['random']()*(_0x23cea2-_0x241711);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x4f4de1(0x447,0x47d)];class CanvasWindLayer extends BaseLayer{constructor(_0x565ef6={}){super(_0x565ef6),this['_setOptionsHook'](_0x565ef6),this['canvas']=null,_0x565ef6['colors']&&_0x565ef6['steps']&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x565ef6));}['_setOptionsHook'](_0x3586c2,_0x473a0a){this['frameTime']=0x3e8/(_0x3586c2['frameRate']||0xa),this['_pointerEvents']=this['options']['pointerEvents']??![];function _0x4c7661(_0x49bab6,_0x15b413){return _0x4f4de1(_0x49bab6- -0x40,_0x15b413);}this[_0xed5902(-0xdc,-0x90)]=_0x3586c2['color']||_0xed5902(-0x139,-0x13e),this[_0xed5902(-0x19f,-0x114)]=_0x3586c2[_0xed5902(-0x151,-0x114)]||0x1,this['fixedHeight']=_0x3586c2['fixedHeight']??0x0;function _0xed5902(_0x186c1e,_0x4ee2a1){return _0x4f4de1(_0x4ee2a1- -0x583,_0x186c1e);}this[_0xed5902(-0xce,-0xe1)]=_0x3586c2['flipY']??![],this['windField']&&this[_0x4c7661(0x40e,0x3a5)]['setOptions'](_0x3586c2);}get[_0x45c10f(0x324,0x364)](){return this['canvas'];}get[_0x45c10f(0x306,0x311)](){function _0x1a3aa4(_0x2abff8,_0x5401f3){return _0x4f4de1(_0x5401f3- -0x53a,_0x2abff8);}return this[_0x1a3aa4(-0x59,-0x29)]['scene']['canvas']['clientWidth'];}get['canvasHeight'](){return this['_map']['scene']['canvas']['clientHeight'];}get[_0x45c10f(0x3dd,0x3a1)](){return this['_pointerEvents'];}set['pointerEvents'](_0x89dba9){function _0x229b95(_0x3579f,_0x1e800b){return _0x4f4de1(_0x1e800b- -0x2b3,_0x3579f);}this['_pointerEvents']=_0x89dba9;if(!this['canvas'])return;function _0x456469(_0x4a9c0b,_0x1c0294){return _0x4f4de1(_0x4a9c0b- -0x625,_0x1c0294);}_0x89dba9?this[_0x229b95(0x160,0x1af)]['style']['pointer-events']=_0x456469(-0xe7,-0x135):this[_0x456469(-0x1c3,-0x15c)][_0x229b95(0x2c0,0x273)][_0x229b95(0x24d,0x22e)]='none';}get['particlesNumber'](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x3d5918){this['options']['particlesNumber']=_0x3d5918,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x451435(_0x51f048,_0x34e38b){return _0x4f4de1(_0x34e38b- -0x4ef,_0x51f048);}return this[_0x451435(0x56,0x30)]['speedRate'];}set['speedRate'](_0x32cac3){this['options']['speedRate']=_0x32cac3;function _0x4cfe71(_0x4ec506,_0x2df7d3){return _0x45c10f(_0x4ec506,_0x2df7d3-0x137);}this['windField']&&(this['windField'][_0x4cfe71(0x3dc,0x462)]=_0x32cac3);}get['maxAge'](){function _0x38eb36(_0x58ddaa,_0x1e0654){return _0x45c10f(_0x58ddaa,_0x1e0654- -0x449);}return this[_0x38eb36(-0xb1,-0xbd)]['maxAge'];}set[_0x4f4de1(0x548,0x58b)](_0x441f6b){this['options'][_0x3e9751(0x362,0x3cb)]=_0x441f6b;function _0x3e9751(_0x26c357,_0x2501c5){return _0x4f4de1(_0x2501c5- -0x17d,_0x26c357);}this['windField']&&(this['windField']['maxAge']=_0x441f6b);}get['data'](){return this['windData'];}set[_0x4f4de1(0x535,0x5ba)](_0x3dd05b){function _0x349e1f(_0x405894,_0x554bb6){return _0x45c10f(_0x554bb6,_0x405894-0x4e);}this[_0x349e1f(0x399,0x38f)](_0x3dd05b);}get['rectangle'](){let _0x5f4ab5=this['windData'][_0x47ad48(0x335,0x398)],_0x545dbc=this['windData']['xmax'],_0x11f559=this[_0x5db68a(0xf3,0x15d)]['ymin'];function _0x5db68a(_0x2f8493,_0x488379){return _0x45c10f(_0x2f8493,_0x488379- -0x1af);}let _0x22611e=this[_0x47ad48(0x338,0x339)][_0x47ad48(0x33f,0x2ec)];_0x545dbc>=0x167&&_0x5f4ab5===0x0&&(_0x5f4ab5=-0xb4,_0x545dbc=0xb4);_0x5f4ab5=Math['max'](_0x5f4ab5,-0xb4),_0x545dbc=Math['min'](_0x545dbc,0xb4),_0x11f559=Math['max'](_0x11f559,-0x5a),_0x22611e=Math[_0x47ad48(0x333,0x36e)](_0x22611e,0x5a);function _0x47ad48(_0x41ddd1,_0x28ef08){return _0x45c10f(_0x28ef08,_0x41ddd1-0x2c);}return Cesium[_0x5db68a(0x142,0x1aa)]['fromDegrees'](_0x5f4ab5,_0x11f559,_0x545dbc,_0x22611e);}['_showHook'](_0x41b499){function _0x3d8a26(_0x1c9eb7,_0xe912eb){return _0x45c10f(_0x1c9eb7,_0xe912eb-0x16b);}_0x41b499?this['_addedHook']():(this['windData']&&(this['options'][_0x3d8a26(0x577,0x50d)]=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x309a08(_0x5b844b,_0x2de85d){return _0x45c10f(_0x5b844b,_0x2de85d- -0x20);}this['options']['worker']?this['initWorker']():this['windField']=new CanvasWindField(this[_0x309a08(0x3f7,0x36c)]);}['_addedHook'](){this['canvas']=this[_0xc09ee7(0x2b5,0x2aa)]();function _0xc09ee7(_0x1e3fff,_0x3f774f){return _0x45c10f(_0x1e3fff,_0x3f774f- -0x8d);}const _0x42f747={};_0x42f747['willReadFrequently']=!![],this[_0xa806a1(0x36e,0x324)]=this['canvas']['getContext']('2d',_0x42f747);function _0xa806a1(_0x39eb27,_0x10fdd9){return _0x45c10f(_0x39eb27,_0x10fdd9-0x5e);}this['bindEvent'](),this['options']['data']&&this['setData'](this[_0xa806a1(0x450,0x3ea)]['data']);}[_0x4f4de1(0x441,0x463)](){this['clear'](),this['unbindEvent']();function _0x419889(_0x388ff1,_0x55dc61){return _0x45c10f(_0x388ff1,_0x55dc61-0x148);}function _0x44a29d(_0x5a8729,_0x941e62){return _0x45c10f(_0x941e62,_0x5a8729- -0x566);}this[_0x419889(0x3fb,0x417)]&&(this['_map']['container'][_0x44a29d(-0x20c,-0x216)](this[_0x419889(0x42c,0x417)]),delete this[_0x44a29d(-0x297,-0x206)]);}['_createCanvas'](){const _0x3907e9=mars3d__namespace['DomUtil'][_0x72cbd2(0x350,0x2cb)]('canvas',_0x72cbd2(0x36c,0x3d6),this[_0x549a93(0x93,0xd1)][_0x549a93(0x4f,0x76)]);_0x3907e9['style']['position']=_0x72cbd2(0x35f,0x336),_0x3907e9[_0x72cbd2(0x3c4,0x41e)]['top']=_0x549a93(0x6f,0xae),_0x3907e9[_0x72cbd2(0x3c4,0x442)]['left']='0px',_0x3907e9['style']['width']=this[_0x549a93(0x12e,0xd1)]['scene'][_0x549a93(0x15,0x22)]['clientWidth']+'px',_0x3907e9[_0x549a93(0x16f,0xe6)]['height']=this['_map'][_0x549a93(0x18,0x51)]['canvas'][_0x72cbd2(0x325,0x30f)]+'px',_0x3907e9['style']['pointerEvents']=this['_pointerEvents']?_0x72cbd2(0x333,0x38c):'none',_0x3907e9['style'][_0x549a93(-0x3a,0x53)]=this[_0x72cbd2(0x3bd,0x3ef)]['zIndex']??0x9;function _0x549a93(_0xc23942,_0x31d600){return _0x45c10f(_0xc23942,_0x31d600- -0x2ad);}_0x3907e9['width']=this[_0x549a93(0x11e,0xd1)][_0x72cbd2(0x32f,0x37c)][_0x549a93(0x7d,0x22)]['clientWidth'],_0x3907e9[_0x549a93(0x63,0x50)]=this[_0x72cbd2(0x3af,0x3e7)][_0x549a93(0x35,0x51)]['canvas']['clientHeight'];function _0x72cbd2(_0x1d4423,_0x541538){return _0x4f4de1(_0x1d4423- -0x162,_0x541538);}return _0x3907e9;}[_0x4f4de1(0x4e0,0x506)](){function _0x522c89(_0x5ee1a8,_0x4b1b8a){return _0x4f4de1(_0x5ee1a8- -0x4c6,_0x4b1b8a);}function _0x5a6812(_0x2a5d2d,_0x50b7ad){return _0x45c10f(_0x2a5d2d,_0x50b7ad- -0x46a);}this['canvas']&&(this['canvas']['style'][_0x5a6812(-0x12b,-0x19c)]=this[_0x5a6812(-0xef,-0xec)][_0x5a6812(-0x111,-0x16c)][_0x522c89(-0x64,-0x44)][_0x522c89(0xe,-0x4b)]+'px',this[_0x522c89(-0x64,-0xef)]['style']['height']=this['_map']['scene'][_0x5a6812(-0x135,-0x19b)]['clientHeight']+'px',this[_0x5a6812(-0x1ce,-0x19b)][_0x5a6812(-0x18b,-0x19c)]=this['_map']['scene']['canvas']['clientWidth'],this[_0x5a6812(-0x1d5,-0x19b)][_0x5a6812(-0x1fa,-0x16d)]=this['_map']['scene']['canvas'][_0x5a6812(-0x11d,-0x176)]);}['bindEvent'](){const _0x1ccb71=this;let _0x2a4ccb=Date[_0x3d98a7(0x75,0x6b)]();(function _0x171dcd(){if(_0x1ccb71[_0x17d564(-0x393,-0x328)])return;function _0x18fd7f(_0x2f7369,_0x5651c5){return _0x3d98a7(_0x5651c5,_0x2f7369- -0x21f);}_0x1ccb71[_0x17d564(-0x2c9,-0x284)]=window[_0x17d564(-0x2a6,-0x254)](_0x171dcd);function _0x17d564(_0x34ea58,_0x510ee4){return _0x3d98a7(_0x34ea58,_0x510ee4- -0x317);}if(_0x1ccb71['show']&&_0x1ccb71['windField']){const _0x1fe3e=Date[_0x18fd7f(-0x1b4,-0x1ca)](),_0x23e039=_0x1fe3e-_0x2a4ccb;_0x23e039>_0x1ccb71[_0x18fd7f(-0x21f,-0x200)]&&(_0x2a4ccb=_0x1fe3e-_0x23e039%_0x1ccb71['frameTime'],_0x1ccb71[_0x17d564(-0x2d7,-0x264)]());}}(),window['addEventListener']('resize',this['resize'][_0x259924(0x6e,0xfe)](this),![]));function _0x3d98a7(_0x4d4d8f,_0x3f7f4d){return _0x4f4de1(_0x3f7f4d- -0x48e,_0x4d4d8f);}this[_0x3d98a7(0xc,-0x3f)]=![];function _0x259924(_0x4b52bd,_0x5ddf98){return _0x45c10f(_0x5ddf98,_0x4b52bd- -0x2d1);}this[_0x259924(-0x1a,0x48)]=![],this['options'][_0x3d98a7(0x93,0xcb)]&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x259924(0x3a,-0x9)],this['_onMouseUpEvent'],this));}['unbindEvent'](){window[_0x5a40c0(-0x22e,-0x22d)](this['_animateFrame']),delete this[_0x1bd82d(-0x281,-0x1ff)];function _0x5a40c0(_0x3a2239,_0x13f071){return _0x4f4de1(_0x13f071- -0x6a6,_0x3a2239);}function _0x1bd82d(_0xdbfc95,_0x56374b){return _0x4f4de1(_0x56374b- -0x720,_0xdbfc95);}window['removeEventListener']('resize',this['resize']),this[_0x5a40c0(-0x174,-0x187)][_0x1bd82d(-0x1f9,-0x1c7)]&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this[_0x5a40c0(-0x2b3,-0x231)],this),this[_0x5a40c0(-0x1ce,-0x195)][_0x5a40c0(-0x256,-0x25e)](mars3d__namespace['EventType']['mouseDown'],this[_0x1bd82d(-0x2bf,-0x270)],this),this['_map']['off'](mars3d__namespace[_0x1bd82d(-0x1a0,-0x20d)][_0x5a40c0(-0x1bd,-0x208)],this[_0x5a40c0(-0x171,-0x163)],this),this[_0x1bd82d(-0x292,-0x20f)]['off'](mars3d__namespace[_0x1bd82d(-0x265,-0x20d)][_0x1bd82d(-0x340,-0x2d5)],this['_onMouseMoveEvent'],this));}[_0x45c10f(0x35f,0x2e2)](_0x5a07cd){function _0x58480a(_0x3aa80c,_0x202ca1){return _0x4f4de1(_0x202ca1- -0x429,_0x3aa80c);}clearTimeout(this['refreshTimer']);if(!this[_0x19127d(0x33a,0x342)]||!this[_0x58480a(0x7b,0x39)])return;this[_0x58480a(0x82,0x39)][_0x19127d(0x3bf,0x426)][_0x58480a(0xa5,0x116)]='hidden';function _0x19127d(_0x147e9c,_0x55f020){return _0x4f4de1(_0x147e9c- -0x167,_0x55f020);}this[_0x58480a(-0x38,0x3a)]=setTimeout(()=>{if(!this['show'])return;function _0x1de8c8(_0x8280cc,_0x276f1e){return _0x19127d(_0x276f1e- -0x627,_0x8280cc);}this[_0x1de8c8(-0x34c,-0x2e0)](),this['canvas']['style']['visibility']='visible';},0xc8);}[_0x4f4de1(0x4b0,0x47d)](_0x121b16){this['mouse_down']=!![];function _0x29e052(_0x56500d,_0x16e8cd){return _0x4f4de1(_0x16e8cd- -0x64b,_0x56500d);}this['_map'][_0x29e052(-0x201,-0x203)](mars3d__namespace['EventType'][_0x29e052(-0x18f,-0x200)],this[_0x29e052(-0xc2,-0x11f)],this);function _0x1bae6b(_0xc47749,_0x1f4aaa){return _0x4f4de1(_0x1f4aaa- -0x70,_0xc47749);}this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x1bae6b(0x4c8,0x4bc)],this);}['_onMouseMoveEvent'](_0x1d9ad5){function _0x22cc8e(_0x37dfd5,_0xef26c0){return _0x45c10f(_0x37dfd5,_0xef26c0- -0x404);}if(!this['show']||!this[_0x3a90a8(0x149,0x19f)])return;function _0x3a90a8(_0x76b09c,_0x4f40d1){return _0x4f4de1(_0x4f40d1- -0x2c3,_0x76b09c);}this['mouse_down']&&(this[_0x22cc8e(-0xc5,-0x135)]['style'][_0x22cc8e(-0x98,-0x58)]='hidden',this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x460c63){if(!this['show']||!this[_0x28aa28(0x16a,0x1b4)])return;function _0x2c4b63(_0x36624e,_0x2a9f7){return _0x45c10f(_0x2a9f7,_0x36624e- -0x501);}this['_map'][_0x2c4b63(-0x24c,-0x243)](mars3d__namespace[_0x28aa28(0x276,0x265)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0x28aa28(_0x5ef4ce,_0x161529){return _0x4f4de1(_0x161529- -0x2ae,_0x5ef4ce);}this['mouse_down']&&this['mouse_move']&&this[_0x28aa28(0x173,0x200)](),this['canvas'][_0x28aa28(0x21d,0x278)]['visibility']=_0x28aa28(0x292,0x218),this['mouse_down']=![],this['mouse_move']=![];}[_0x4f4de1(0x4de,0x517)](_0x25c6f1){this['clear'](),this['windData']=_0x25c6f1,this['windField']['setDate'](_0x25c6f1);function _0x40fe26(_0x3d1104,_0xd5f52b){return _0x45c10f(_0xd5f52b,_0x3d1104- -0x4e0);}this[_0x40fe26(-0x1c5,-0x199)]();}['redraw'](){if(!this['show'])return;this[_0x1aba67(0x3f8,0x418)]['setOptions'](this['options']);function _0x1aba67(_0x1d5d28,_0xad9c9a){return _0x45c10f(_0x1d5d28,_0xad9c9a-0x15d);}this['update']();}[_0x45c10f(0x375,0x3ae)](){if(this['_updateIng'])return;this['_updateIng']=!![];if(this[_0x9e2708(0x43a,0x499)])this['windField'][_0x51c06c(0x4e9,0x560)]();else{const _0x37fb34=this['windField'][_0x51c06c(0x41c,0x465)]();this['_drawLines'](_0x37fb34);}function _0x51c06c(_0x45e34a,_0x3c7a09){return _0x4f4de1(_0x45e34a- -0x58,_0x3c7a09);}function _0x9e2708(_0x501378,_0x53860c){return _0x4f4de1(_0x53860c- -0x3e,_0x501378);}this['_updateIng']=![];}['_drawLines'](_0x1ca961){function _0x492321(_0x53cd59,_0xf03c23){return _0x45c10f(_0xf03c23,_0x53cd59- -0x49a);}this['_canvasParticles']=_0x1ca961,this[_0x492321(-0x1d4,-0x175)]['globalCompositeOperation']='destination-in',this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this[_0x504fb1(0x7f,0xa3)]),this['canvasContext']['globalCompositeOperation']=_0x504fb1(0x27,-0x51),this[_0x504fb1(-0x9f,-0x52)][_0x504fb1(0x29,0xac)]=0.9;const _0x349809=this['_map']['scene'][_0x492321(-0xe7,-0x16d)]!==Cesium['SceneMode'][_0x504fb1(0x52,0x9c)];function _0x504fb1(_0x50d8cd,_0x4fed7e){return _0x4f4de1(_0x4fed7e- -0x4ab,_0x50d8cd);}const _0x2ee5ef=this['canvasWidth']*0.25;if(this[_0x492321(-0x137,-0x142)])for(let _0x4cdd13=0x0,_0x1802a4=_0x1ca961['length'];_0x4cdd13<_0x1802a4;_0x4cdd13++){const _0x2537b0=_0x1ca961[_0x4cdd13],_0x135a98=this['_tomap'](_0x2537b0,_0x2537b0['lng'],_0x2537b0[_0x504fb1(-0x26,0x46)],_0x2537b0[_0x504fb1(0x6f,0x72)]),_0x3e6b07=this[_0x492321(-0x119,-0xb6)](_0x2537b0,_0x2537b0['tlng'],_0x2537b0['tlat'],_0x2537b0[_0x504fb1(0xc0,0xab)]);if(!_0x135a98||!_0x3e6b07)continue;if(_0x349809&&Math[_0x492321(-0x132,-0x104)](_0x135a98[0x0]-_0x3e6b07[0x0])>=_0x2ee5ef)continue;this['canvasContext']['beginPath'](),this['canvasContext'][_0x504fb1(-0xbf,-0x3c)]=this['lineWidth'],this[_0x492321(-0x1d4,-0x1f2)][_0x492321(-0x106,-0x12a)]=this['_colorRamp']['getColor'](_0x2537b0['speed']),this[_0x504fb1(0x13,-0x52)]['moveTo'](_0x135a98[0x0],_0x135a98[0x1]),this[_0x504fb1(-0x66,-0x52)][_0x492321(-0x1b7,-0x19a)](_0x3e6b07[0x0],_0x3e6b07[0x1]),this[_0x504fb1(-0x5e,-0x52)]['stroke']();}else{this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this[_0x504fb1(0x19,-0x3c)],this[_0x492321(-0x1d4,-0x1cc)][_0x504fb1(0xcb,0x7c)]=this['color'];for(let _0xa1d2a4=0x0,_0x491134=_0x1ca961[_0x504fb1(-0xaf,-0x65)];_0xa1d2a4<_0x491134;_0xa1d2a4++){const _0xe61cb4=_0x1ca961[_0xa1d2a4],_0xc8fadb=this['_tomap'](_0xe61cb4,_0xe61cb4['lng'],_0xe61cb4[_0x492321(-0x13c,-0xe8)],_0xe61cb4['alt']),_0x47bf1b=this['_tomap'](_0xe61cb4,_0xe61cb4['tlng'],_0xe61cb4['tlat'],_0xe61cb4['talt']);if(!_0xc8fadb||!_0x47bf1b)continue;if(_0x349809&&Math[_0x492321(-0x132,-0x198)](_0xc8fadb[0x0]-_0x47bf1b[0x0])>=_0x2ee5ef)continue;this['canvasContext']['moveTo'](_0xc8fadb[0x0],_0xc8fadb[0x1]),this['canvasContext']['lineTo'](_0x47bf1b[0x0],_0x47bf1b[0x1]);}this[_0x492321(-0x1d4,-0x211)]['stroke']();}}[_0x4f4de1(0x514,0x4b4)](_0x4f0202,_0x2ca5bb,_0x4c360b,_0x447760){const _0x156f9b=Cesium[_0x573c22(0x27b,0x207)][_0x573c22(0x236,0x25f)](_0x2ca5bb,_0x4c360b,_0x447760??this[_0x13cb3d(0xb1,0xde)]),_0x752dd1=this['_map'][_0x573c22(0x1bf,0x150)];if(_0x752dd1['mode']===Cesium['SceneMode'][_0x573c22(0x275,0x2a3)]){const _0x426cd2=new Cesium[(_0x573c22(0x266,0x217))](_0x752dd1[_0x13cb3d(0x150,0x19b)][_0x573c22(0x1bd,0x1b5)],_0x752dd1[_0x13cb3d(0xaf,0x5e)]['positionWC']),_0x8d6220=_0x426cd2['isPointVisible'](_0x156f9b);if(!_0x8d6220)return _0x4f0202[_0x573c22(0x1e6,0x1aa)]=0x0,null;}function _0x13cb3d(_0x30075b,_0x54b71f){return _0x4f4de1(_0x30075b- -0x3bb,_0x54b71f);}function _0x573c22(_0x339573,_0x1457b5){return _0x4f4de1(_0x339573- -0x2d2,_0x1457b5);}const _0x58f837=mars3d__namespace[_0x573c22(0x1da,0x1d2)]['toWindowCoordinates'](this['_map']['scene'],_0x156f9b);return _0x58f837?[_0x58f837['x'],_0x58f837['y']]:null;}[_0x45c10f(0x2c5,0x33a)](){function _0x20885f(_0x35d08d,_0x372f8b){return _0x4f4de1(_0x372f8b- -0x753,_0x35d08d);}this['windField'][_0x20885f(-0x207,-0x286)](),delete this['windData'];}[_0x45c10f(0x337,0x397)](){this['worker']=new Worker(this['options']['worker']),this[_0x37f8e8(0xf0,0x97)][_0x3c493c(0x110,0x197)]=_0x247b4d=>{function _0x3f3436(_0x4666d8,_0x435a4f){return _0x37f8e8(_0x4666d8,_0x435a4f-0x3c3);}function _0x27a014(_0x516a90,_0x564283){return _0x37f8e8(_0x516a90,_0x564283- -0xa4);}this[_0x27a014(-0xa6,-0x91)](_0x247b4d[_0x27a014(0x50,0x51)]['particles']),this['_updateIng2']=![];};function _0x3c493c(_0x3fa4e3,_0x370e08){return _0x45c10f(_0x3fa4e3,_0x370e08- -0x162);}function _0x37f8e8(_0x195062,_0x20511f){return _0x4f4de1(_0x20511f- -0x440,_0x195062);}this['windField']={'init':_0x55ac14=>{function _0x1297ac(_0xdba3aa,_0x10b3fb){return _0x37f8e8(_0x10b3fb,_0xdba3aa-0x1b4);}function _0x146d5b(_0x13251a,_0x497d56){return _0x3c493c(_0x13251a,_0x497d56-0x14e);}const _0x3f2fec={};_0x3f2fec['type']=_0x1297ac(0x1d0,0x201),_0x3f2fec[_0x146d5b(0x36b,0x378)]=_0x55ac14,this['worker']['postMessage'](_0x3f2fec);},'setOptions':_0x29a37f=>{function _0x5be9d0(_0x35e237,_0x2a3d36){return _0x3c493c(_0x35e237,_0x2a3d36- -0x31c);}const _0x17e9db={};_0x17e9db['type']=_0x5be9d0(-0x116,-0x1a4),_0x17e9db['options']=_0x29a37f,this['worker']['postMessage'](_0x17e9db);},'setDate':_0x33319c=>{const _0x48ea24={};_0x48ea24['type']=_0x23d099(0x149,0x190),_0x48ea24['data']=_0x33319c;function _0x23d099(_0x4b58ed,_0x161c7e){return _0x37f8e8(_0x161c7e,_0x4b58ed-0x146);}this['worker']['postMessage'](_0x48ea24);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0x46e5aa={};_0x46e5aa['type']='update',this['worker']['postMessage'](_0x46e5aa);},'clear':()=>{const _0x72530b={};_0x72530b['type']=_0x2affd6(0xcd,0x7e);function _0x2c7609(_0x36a3ca,_0x39b18a){return _0x3c493c(_0x36a3ca,_0x39b18a- -0x270);}function _0x2affd6(_0x1cf246,_0x448079){return _0x37f8e8(_0x1cf246,_0x448079- -0xf);}this[_0x2affd6(0x77,0x88)]['postMessage'](_0x72530b);}},this[_0x3c493c(0x148,0x159)][_0x3c493c(0x1cc,0x167)](this[_0x37f8e8(0xd4,0xdf)]);}}mars3d__namespace['LayerUtil']['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x4f4de1(0x4e8,0x4b8)]=WindUtil,exports[_0x4f4de1(0x4ad,0x47b)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x45c10f(0x32a,0x355)]=WindUtil;const _0x478c41={};_0x478c41[_0x4f4de1(0x458,0x48b)]=!![],Object[_0x45c10f(0x370,0x3af)](exports,'__esModule',_0x478c41);
}));
