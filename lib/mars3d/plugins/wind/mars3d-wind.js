/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.8
 * 编译日期：2024-11-25 23:41
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x3d2d9a,_0x5b7b87){function _0x3c79f0(_0x5ac855,_0x4ed3be){return _0x1e73(_0x4ed3be-0x49,_0x5ac855);}const _0xb2ab83=_0x3d2d9a();function _0x52b555(_0x3169bd,_0x122786){return _0x1e73(_0x3169bd- -0x302,_0x122786);}while(!![]){try{const _0x199fa7=parseInt(_0x52b555(-0x15c,-0xf5))/0x1+parseInt(_0x3c79f0(0x179,0x1a5))/0x2+-parseInt(_0x3c79f0(0x2e5,0x26e))/0x3+-parseInt(_0x52b555(-0xc5,-0x71))/0x4+-parseInt(_0x3c79f0(0x229,0x287))/0x5*(parseInt(_0x3c79f0(0x21c,0x1e8))/0x6)+-parseInt(_0x52b555(-0x1da,-0x148))/0x7*(-parseInt(_0x3c79f0(0x291,0x25e))/0x8)+parseInt(_0x3c79f0(0x236,0x1ea))/0x9;if(_0x199fa7===_0x5b7b87)break;else _0xb2ab83['push'](_0xb2ab83['shift']());}catch(_0x125ef0){_0xb2ab83['push'](_0xb2ab83['shift']());}}}(_0x31f2,0x7e8d7));function _interopNamespace(_0x59420c){if(_0x59420c&&_0x59420c[_0x2db109(0x3f1,0x368)])return _0x59420c;function _0x20a3e1(_0x5413cf,_0x564f41){return _0x1e73(_0x564f41-0x2b7,_0x5413cf);}function _0x2db109(_0x46a0f2,_0xd49388){return _0x1e73(_0xd49388-0x1ac,_0x46a0f2);}var _0x2839d8=Object[_0x2db109(0x355,0x3bd)](null);return _0x59420c&&Object['keys'](_0x59420c)['forEach'](function(_0x152ce6){function _0x438bdb(_0x410b30,_0x365270){return _0x20a3e1(_0x410b30,_0x365270- -0x5a0);}function _0x176151(_0x476a59,_0xeb83a0){return _0x2db109(_0xeb83a0,_0x476a59- -0x72);}if(_0x152ce6!==_0x438bdb(-0x108,-0xe5)){var _0x2d1650=Object[_0x176151(0x2df,0x2e2)](_0x59420c,_0x152ce6);Object['defineProperty'](_0x2839d8,_0x152ce6,_0x2d1650[_0x176151(0x25d,0x1e4)]?_0x2d1650:{'enumerable':!![],'get':function(){return _0x59420c[_0x152ce6];}});}}),_0x2839d8[_0x20a3e1(0x51d,0x4bb)]=_0x59420c,_0x2839d8;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0x57c9e7,_0x4b65f3){const _0x4506a5=_0x57c9e7*Math[_0x578e20(0x240,0x24c)](Cesium$7[_0x578e20(0x374,0x2ee)]['toRadians'](_0x4b65f3));function _0x578e20(_0x9d36fa,_0x115d05){return _0x1e73(_0x115d05-0x12d,_0x9d36fa);}function _0x11c2a3(_0x34f9d1,_0xd198e3){return _0x1e73(_0xd198e3- -0x1fe,_0x34f9d1);}return _0x4506a5;}function getV(_0x404b03,_0x1b2c74){function _0x569961(_0x1f31f2,_0x299f44){return _0x1e73(_0x299f44-0x3bd,_0x1f31f2);}const _0x498bb0=_0x404b03*Math[_0x569961(0x55f,0x500)](Cesium$7['Math']['toRadians'](_0x1b2c74));return _0x498bb0;}function getSpeed(_0x20f246,_0x24744f){const _0x29c93c=Math['sqrt'](Math[_0x392bc3(0x410,0x44e)](_0x20f246,0x2)+Math[_0x392bc3(0x41e,0x44e)](_0x24744f,0x2));function _0x35c991(_0x23934e,_0x4093bc){return _0x1e73(_0x23934e- -0x10c,_0x4093bc);}function _0x392bc3(_0x47c498,_0x9ce962){return _0x1e73(_0x9ce962-0x29f,_0x47c498);}return _0x29c93c;}function getDirection(_0xe9d5d0,_0x46d073){function _0xdf2486(_0x189949,_0x4bae07){return _0x1e73(_0x4bae07-0x12a,_0x189949);}let _0x4c0ae7=Cesium$7['Math'][_0xdf2486(0x290,0x288)](Math['atan2'](_0x46d073,_0xe9d5d0));return _0x4c0ae7+=_0x4c0ae7<0x0?0x168:0x0,_0x4c0ae7;}const _0x596eb3={};_0x596eb3['__proto__']=null,_0x596eb3['getU']=getU,_0x596eb3['getV']=getV,_0x596eb3['getSpeed']=getSpeed,_0x596eb3['getDirection']=getDirection;var WindUtil=_0x596eb3;const Cesium$6=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x79814){function _0x588ba8(_0x5936b0,_0x2511a9){return _0x1e73(_0x5936b0- -0x9b,_0x2511a9);}this['commandType']=_0x79814[_0x588ba8(0xdd,0x13b)],this['geometry']=_0x79814['geometry'],this['attributeLocations']=_0x79814['attributeLocations'],this[_0x588ba8(0x16c,0xf0)]=_0x79814[_0x588ba8(0x16c,0x1f3)],this[_0x4bc7ec(0x27d,0x29d)]=_0x79814['uniformMap'],this['vertexShaderSource']=_0x79814[_0x4bc7ec(0x243,0x26b)],this['fragmentShaderSource']=_0x79814[_0x4bc7ec(0x2b9,0x338)],this[_0x4bc7ec(0x251,0x27d)]=_0x79814[_0x588ba8(0x137,0xd3)],this['framebuffer']=_0x79814['framebuffer'],this['outputTexture']=_0x79814[_0x4bc7ec(0x1c4,0x149)];function _0x4bc7ec(_0x50c75f,_0x31815b){return _0x1e73(_0x50c75f-0x7f,_0x31815b);}this['autoClear']=_0x79814['autoClear']??![],this['preExecute']=_0x79814['preExecute'],this[_0x588ba8(0x124,0x1aa)]=!![],this[_0x4bc7ec(0x272,0x2a4)]=undefined,this['clearCommand']=undefined,this[_0x588ba8(0xa6,0x6a)]&&(this[_0x4bc7ec(0x1fa,0x1b2)]=new Cesium$6['ClearCommand']({'color':new Cesium$6[(_0x588ba8(0xb2,0x104))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6['Pass'][_0x4bc7ec(0x24b,0x291)]}));}['createCommand'](_0x1f0fc1){function _0x24da51(_0x4d2ee4,_0x55e508){return _0x1e73(_0x55e508- -0x39f,_0x4d2ee4);}function _0xf42f4d(_0x4587a5,_0x1a3d6c){return _0x1e73(_0x4587a5- -0xd0,_0x1a3d6c);}switch(this['commandType']){case'Draw':{const _0x27c0da=Cesium$6['VertexArray']['fromGeometry']({'context':_0x1f0fc1,'geometry':this['geometry'],'attributeLocations':this[_0x24da51(-0x1cb,-0x180)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']}),_0x2b9a8e={};_0x2b9a8e['context']=_0x1f0fc1,_0x2b9a8e['attributeLocations']=this['attributeLocations'],_0x2b9a8e[_0xf42f4d(0xf4,0xab)]=this['vertexShaderSource'],_0x2b9a8e['fragmentShaderSource']=this['fragmentShaderSource'];const _0x169eb2=Cesium$6['ShaderProgram']['fromCache'](_0x2b9a8e),_0x1baff2=Cesium$6['RenderState'][_0x24da51(-0x152,-0x17f)](this['rawRenderState']);return new Cesium$6['DrawCommand']({'owner':this,'vertexArray':_0x27c0da,'primitiveType':this['primitiveType'],'uniformMap':this[_0xf42f4d(0x12e,0x1c0)],'modelMatrix':Cesium$6['Matrix4']['IDENTITY'],'shaderProgram':_0x169eb2,'framebuffer':this[_0x24da51(-0x2be,-0x248)],'renderState':_0x1baff2,'pass':Cesium$6[_0xf42f4d(0x154,0x1a4)][_0xf42f4d(0xfc,0x127)]});}case _0x24da51(-0x23e,-0x226):{const _0x554404={};return _0x554404['owner']=this,_0x554404[_0x24da51(-0x12b,-0x165)]=this['fragmentShaderSource'],_0x554404['uniformMap']=this['uniformMap'],_0x554404[_0xf42f4d(0x75,0x13)]=this[_0xf42f4d(0x75,0x12)],_0x554404[_0x24da51(-0x209,-0x1be)]=!![],new Cesium$6[(_0x24da51(-0xef,-0x16b))](_0x554404);}}}['setGeometry'](_0x55fab4,_0x56ce9a){function _0x3f0961(_0x2ff5ac,_0x2b01dd){return _0x1e73(_0x2b01dd-0x247,_0x2ff5ac);}this[_0x1f01e5(0x1f6,0x194)]=_0x56ce9a;function _0x1f01e5(_0x2e8083,_0x1913a8){return _0x1e73(_0x2e8083-0xc,_0x1913a8);}const _0x28e22f=Cesium$6[_0x1f01e5(0x18c,0x185)][_0x3f0961(0x41d,0x416)]({'context':_0x55fab4,'geometry':this[_0x1f01e5(0x1f6,0x174)],'attributeLocations':this[_0x3f0961(0x48a,0x466)],'bufferUsage':Cesium$6[_0x1f01e5(0x1f4,0x263)][_0x3f0961(0x397,0x390)]});this['commandToExecute'][_0x3f0961(0x3d8,0x3c8)]=_0x28e22f;}[_0x1660f5(0x393,0x326)](_0x2aca7a){function _0xc4dc4(_0x3c3215,_0x28faf6){return _0x1660f5(_0x3c3215,_0x28faf6- -0x1ec);}if(!this['show'])return;function _0x53b6b3(_0xdb6fb5,_0x14f996){return _0x1660f5(_0x14f996,_0xdb6fb5- -0x201);}if(_0x2aca7a['mode']!==Cesium$6[_0x53b6b3(0x114,0xef)]['SCENE3D'])return;!Cesium$6[_0x53b6b3(0xfb,0x12d)](this['commandToExecute'])&&(this[_0x53b6b3(0x1ca,0x21c)]=this[_0x53b6b3(0x1d2,0x200)](_0x2aca7a['context'])),Cesium$6['defined'](this[_0xc4dc4(0x22e,0x20d)])&&this[_0xc4dc4(0x229,0x20d)](),Cesium$6[_0x53b6b3(0xfb,0xe8)](this['clearCommand'])&&_0x2aca7a['commandList'][_0x53b6b3(0x147,0xf6)](this[_0xc4dc4(0x1ea,0x167)]),_0x2aca7a[_0xc4dc4(0x168,0x19a)][_0x53b6b3(0x147,0xcb)](this['commandToExecute']);}['isDestroyed'](){return![];}['destroy'](){if(this['clearCommand']){var _0x50f9a3,_0x6fcc03;(_0x50f9a3=this['clearCommand'])!==null&&_0x50f9a3!==void 0x0&&_0x50f9a3[_0x529ac4(0x37b,0x2fc)]&&this['clearCommand']['vertexArray']['destroy'](),(_0x6fcc03=this['clearCommand'])!==null&&_0x6fcc03!==void 0x0&&_0x6fcc03[_0x3a62e4(0x381,0x308)]&&this['clearCommand'][_0x3a62e4(0x381,0x38f)]['destroy'](),delete this['clearCommand'];}this['commandToExecute']&&(this[_0x529ac4(0x3dc,0x36e)]['vertexArray']&&this[_0x529ac4(0x2ea,0x36e)][_0x529ac4(0x31b,0x2fc)]['destroy'](),this['commandToExecute'][_0x529ac4(0x3a1,0x3a9)]&&this[_0x529ac4(0x383,0x36e)]['shaderProgram'][_0x529ac4(0x373,0x357)](),delete this['commandToExecute']);function _0x529ac4(_0x45b16f,_0x366114){return _0x1660f5(_0x45b16f,_0x366114- -0x5d);}function _0x3a62e4(_0xb477a3,_0x50a6bb){return _0x1660f5(_0x50a6bb,_0xb477a3- -0x85);}return Cesium$6['destroyObject'](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0xf89c66=function(){function _0x2cf0e8(_0x14f422,_0x1a7a6d){return _0x1e73(_0x1a7a6d-0x4a,_0x14f422);}function _0x9ad675(_0x36d81e,_0x1d90ea){return _0x1e73(_0x1d90ea-0x27e,_0x36d81e);}const _0x20d5fb=new Cesium$5[(_0x9ad675(0x42d,0x3d1))]({'attributes':new Cesium$5[(_0x9ad675(0x3aa,0x3d4))]({'position':new Cesium$5[(_0x9ad675(0x3e0,0x3c2))]({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5[(_0x9ad675(0x382,0x3c2))]({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});return _0x20d5fb;},_0xa7b89=function(_0x280436,_0x101460){if(Cesium$5['defined'](_0x101460)){const _0x854752={};_0x854752['arrayBufferView']=_0x101460,_0x280436['source']=_0x854752;}const _0x5da592=new Cesium$5['Texture'](_0x280436);return _0x5da592;},_0x2e7017=function(_0x2de344,_0x23ec30,_0x3afd45){const _0x5d435c={};function _0x386ec6(_0x249433,_0x3a235a){return _0x1e73(_0x249433-0x159,_0x3a235a);}_0x5d435c['context']=_0x2de344,_0x5d435c[_0x386ec6(0x275,0x27e)]=[_0x23ec30],_0x5d435c['depthTexture']=_0x3afd45;const _0x4a1b22=new Cesium$5['Framebuffer'](_0x5d435c);return _0x4a1b22;};function _0x14340e(_0x4eb286,_0x55eb56){return _0x1660f5(_0x4eb286,_0x55eb56- -0x58d);}const _0x271f95=function(_0x5e6aba){const _0x20bc31=!![],_0x2b8407=![],_0x1eb995={};function _0x458fc6(_0x52f450,_0xb3f104){return _0x1e73(_0x52f450-0x3da,_0xb3f104);}function _0x581c98(_0x9e0608,_0x3ec5b1){return _0x1e73(_0x3ec5b1-0x25b,_0x9e0608);}_0x1eb995['viewport']=_0x5e6aba['viewport'],_0x1eb995[_0x581c98(0x399,0x3a6)]=_0x5e6aba[_0x458fc6(0x525,0x55b)],_0x1eb995['depthMask']=_0x5e6aba['depthMask'],_0x1eb995['blending']=_0x5e6aba[_0x581c98(0x432,0x424)];const _0xa4906c=_0x1eb995,_0x2c535b=Cesium$5['Appearance'][_0x458fc6(0x512,0x565)](_0x20bc31,_0x2b8407,_0xa4906c);return _0x2c535b;},_0x5ece0d=function(_0x1e913a){const _0x333a6b={},_0x6d5846=Cesium$5['Math']['mod'](_0x1e913a['west'],Cesium$5[_0x30d2fc(0x526,0x4f3)]['TWO_PI']),_0x411a1b=Cesium$5[_0x40979c(-0x1a7,-0x12d)][_0x40979c(-0x65,-0xef)](_0x1e913a[_0x40979c(-0x230,-0x1c8)],Cesium$5['Math']['TWO_PI']),_0x12396b=_0x1e913a[_0x40979c(-0x7c,-0xb8)];let _0x3fd730,_0x42b107;_0x12396b>Cesium$5['Math']['THREE_PI_OVER_TWO']?(_0x3fd730=0x0,_0x42b107=Cesium$5['Math'][_0x30d2fc(0x505,0x552)]):_0x411a1b-_0x6d5846<_0x12396b?(_0x3fd730=_0x6d5846,_0x42b107=_0x6d5846+_0x12396b):(_0x3fd730=_0x6d5846,_0x42b107=_0x411a1b);_0x333a6b[_0x40979c(-0xf4,-0x13c)]={'min':Cesium$5['Math']['toDegrees'](_0x3fd730),'max':Cesium$5['Math']['toDegrees'](_0x42b107)};const _0x291260=_0x1e913a['south'],_0x520aed=_0x1e913a[_0x40979c(-0x67,-0xb9)];function _0x30d2fc(_0x1a153c,_0x1ed29e){return _0x1e73(_0x1a153c-0x365,_0x1ed29e);}const _0x5af3ea=_0x1e913a['height'],_0x25c047=_0x5af3ea>Cesium$5['Math']['PI']/0xc?_0x5af3ea/0x2:0x0;let _0x2ae8cc=Cesium$5[_0x40979c(-0xe2,-0x12d)][_0x30d2fc(0x4be,0x4d1)](_0x291260-_0x25c047),_0x48c17c=Cesium$5[_0x30d2fc(0x526,0x59f)][_0x40979c(-0x107,-0x195)](_0x520aed+_0x25c047);_0x2ae8cc<-Cesium$5['Math']['PI_OVER_THREE']&&(_0x2ae8cc=-Cesium$5[_0x40979c(-0x155,-0x12d)]['PI_OVER_TWO']);function _0x40979c(_0x58254d,_0x43487a){return _0x1e73(_0x43487a- -0x2ee,_0x58254d);}return _0x48c17c>Cesium$5['Math']['PI_OVER_THREE']&&(_0x48c17c=Cesium$5[_0x30d2fc(0x526,0x554)][_0x30d2fc(0x581,0x59b)]),_0x333a6b['lat']={'min':Cesium$5['Math']['toDegrees'](_0x2ae8cc),'max':Cesium$5[_0x40979c(-0x14d,-0x12d)]['toDegrees'](_0x48c17c)},_0x333a6b;},_0x4a6750={};_0x4a6750[_0x14340e(-0x18a,-0x1dd)]=_0xf89c66;function _0x35d757(_0x2e5057,_0x3950da){return _0x1660f5(_0x2e5057,_0x3950da-0x156);}return _0x4a6750[_0x35d757(0x5af,0x51b)]=_0xa7b89,_0x4a6750['createFramebuffer']=_0x2e7017,_0x4a6750[_0x14340e(-0x2a7,-0x285)]=_0x271f95,_0x4a6750[_0x14340e(-0x1b5,-0x1bf)]=_0x5ece0d,_0x4a6750;}());function _0x1e73(_0x5acdce,_0x4b1d1d){const _0x31f22d=_0x31f2();return _0x1e73=function(_0x1e73be,_0x110de4){_0x1e73be=_0x1e73be-0x115;let _0x42d3c8=_0x31f22d[_0x1e73be];return _0x42d3c8;},_0x1e73(_0x5acdce,_0x4b1d1d);}var fullscreenVert='#version\x20300\x20es\x0a\x0ain\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20gl_Position\x20=\x20vec4(position,\x201.0f);\x0a}\x0a',screenDrawFrag=_0x3cd0b4(-0x14f,-0x144),segmentDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20bool\x20colour;\x0a\x0ain\x20float\x20heightNormalization;\x0ain\x20float\x20speedNormalization;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speedNormalization\x20>\x20zero)\x20{\x0a\x20\x20\x20\x20if(colour)\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(heightNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',segmentDrawVert=_0x3cd0b4(-0x1bb,-0x146),trailDrawFrag=_0x3cd0b4(-0x141,-0xf3);const Cesium$4=mars3d__namespace['Cesium'];class ParticlesRendering{constructor(_0x5edce1,_0x47dfc5,_0x442d66,_0x129779,_0x5a45f0){this['colour']=_0x442d66['colors']==='height';function _0x223037(_0x54eac2,_0x4c24ea){return _0x3cd0b4(_0x4c24ea,_0x54eac2- -0xd0);}this[_0x223037(-0x24d,-0x2b1)](_0x5edce1,_0x47dfc5,_0x442d66[_0x223037(-0x260,-0x226)]);function _0x880123(_0x45dca1,_0x25899a){return _0x3cd0b4(_0x45dca1,_0x25899a-0x6c6);}this['createRenderingFramebuffers'](_0x5edce1),this['createRenderingPrimitives'](_0x5edce1,_0x47dfc5,_0x442d66,_0x129779,_0x5a45f0);}['createRenderingTextures'](_0x5a4170,_0x4fe4bd,_0x41a2ac){const _0x174ae5={};_0x174ae5[_0x27d3da(0x353,0x340)]=_0x5a4170;function _0x27d3da(_0x523096,_0x388de7){return _0x1660f5(_0x388de7,_0x523096-0xd);}_0x174ae5[_0x58c366(-0x177,-0x140)]=_0x5a4170[_0x58c366(-0x216,-0x240)],_0x174ae5[_0x58c366(-0x219,-0x189)]=_0x5a4170['drawingBufferHeight'],_0x174ae5['pixelFormat']=Cesium$4['PixelFormat'][_0x27d3da(0x414,0x492)],_0x174ae5['pixelDatatype']=Cesium$4['PixelDatatype']['UNSIGNED_BYTE'];const _0x34cd9a=_0x174ae5,_0x16c8dc={};_0x16c8dc[_0x58c366(-0x23f,-0x21b)]=_0x5a4170,_0x16c8dc[_0x27d3da(0x41b,0x3be)]=_0x5a4170['drawingBufferWidth'],_0x16c8dc[_0x27d3da(0x379,0x30a)]=_0x5a4170[_0x27d3da(0x40b,0x379)],_0x16c8dc[_0x58c366(-0x1f8,-0x280)]=Cesium$4['PixelFormat']['DEPTH_COMPONENT'],_0x16c8dc['pixelDatatype']=Cesium$4['PixelDatatype'][_0x58c366(-0x199,-0x154)];function _0x58c366(_0x42515e,_0x31ec2d){return _0x3cd0b4(_0x31ec2d,_0x42515e- -0xc5);}const _0xf91815=_0x16c8dc,_0x4d8126=_0x41a2ac[_0x27d3da(0x408,0x3d7)],_0x380eb8=new Float32Array(_0x4d8126*0x3);for(let _0x210944=0x0;_0x210944<_0x4d8126;_0x210944++){const _0x7d2a49=Cesium$4['Color']['fromCssColorString'](_0x41a2ac[_0x210944]);_0x380eb8[0x3*_0x210944]=_0x7d2a49['red'],_0x380eb8[0x3*_0x210944+0x1]=_0x7d2a49['green'],_0x380eb8[0x3*_0x210944+0x2]=_0x7d2a49['blue'];}const _0x2c7fb8={'context':_0x5a4170,'width':_0x4d8126,'height':0x1,'pixelFormat':Cesium$4[_0x27d3da(0x410,0x386)]['RGB'],'pixelDatatype':Cesium$4[_0x58c366(-0x246,-0x222)]['FLOAT'],'sampler':new Cesium$4[(_0x27d3da(0x3f0,0x3ff))]({'minificationFilter':Cesium$4[_0x27d3da(0x342,0x313)]['LINEAR'],'magnificationFilter':Cesium$4['TextureMagnificationFilter']['LINEAR']})};this['textures']={'segmentsColor':Util[_0x58c366(-0x1c0,-0x156)](_0x34cd9a),'segmentsDepth':Util[_0x27d3da(0x3d2,0x463)](_0xf91815),'currentTrailsColor':Util['createTexture'](_0x34cd9a),'currentTrailsDepth':Util[_0x27d3da(0x3d2,0x464)](_0xf91815),'nextTrailsColor':Util['createTexture'](_0x34cd9a),'nextTrailsDepth':Util['createTexture'](_0xf91815),'colorTable':Util[_0x27d3da(0x3d2,0x45b)](_0x2c7fb8,_0x380eb8)};}[_0x1660f5(0x351,0x3e0)](_0x2f2c18){function _0x3f2119(_0x29c367,_0xb96096){return _0x3cd0b4(_0xb96096,_0x29c367-0x36c);}function _0x1d1f49(_0x4fe243,_0x19e727){return _0x3cd0b4(_0x4fe243,_0x19e727-0x18);}this['framebuffers']={'segments':Util['createFramebuffer'](_0x2f2c18,this['textures'][_0x3f2119(0x27b,0x200)],this[_0x3f2119(0x216,0x242)]['segmentsDepth']),'currentTrails':Util[_0x3f2119(0x212,0x1c8)](_0x2f2c18,this[_0x1d1f49(-0x19d,-0x13e)][_0x3f2119(0x287,0x2ec)],this[_0x1d1f49(-0xcd,-0x13e)][_0x1d1f49(-0x16a,-0x10d)]),'nextTrails':Util['createFramebuffer'](_0x2f2c18,this['textures'][_0x1d1f49(-0x99,-0x10e)],this['textures'][_0x1d1f49(-0x137,-0xb9)])};}[_0x3cd0b4(-0xdb,-0x155)](_0x459177){const _0x40bc97=0x4;function _0x2f75a0(_0x350ad8,_0x56f104){return _0x1660f5(_0x350ad8,_0x56f104- -0x4ea);}let _0xc273a0=[];for(let _0x1db925=0x0;_0x1db925<_0x459177[_0x2f75a0(-0x1a2,-0x1a6)];_0x1db925++){for(let _0x527e3a=0x0;_0x527e3a<_0x459177['particlesTextureSize'];_0x527e3a++){for(let _0x237040=0x0;_0x237040<_0x40bc97;_0x237040++){_0xc273a0['push'](_0x1db925/_0x459177[_0x2723de(0x4be,0x43a)]),_0xc273a0[_0x2f75a0(-0x1f9,-0x1a2)](_0x527e3a/_0x459177['particlesTextureSize']);}}}_0xc273a0=new Float32Array(_0xc273a0);let _0x503432=[];for(let _0x1c37de=0x0;_0x1c37de<_0x459177[_0x2f75a0(-0x59,-0xe0)];_0x1c37de++){_0x503432[_0x2f75a0(-0x207,-0x1a2)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x503432=new Float32Array(_0x503432);let _0x248e56=[];for(let _0x372f28=0x0,_0x51acf6=0x0;_0x372f28<_0x459177['maxParticles'];_0x372f28++){_0x248e56[_0x2f75a0(-0x214,-0x1a2)](_0x51acf6+0x0,_0x51acf6+0x1,_0x51acf6+0x2,_0x51acf6+0x2,_0x51acf6+0x1,_0x51acf6+0x3),_0x51acf6+=_0x40bc97;}function _0x2723de(_0xe05afa,_0xc9ac41){return _0x3cd0b4(_0xc9ac41,_0xe05afa-0x63a);}_0x248e56=new Uint32Array(_0x248e56);const _0x18e76d=new Cesium$4[(_0x2f75a0(-0x12b,-0x1bf))]({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4['ComponentDatatype'][_0x2f75a0(-0x6e,-0xe6)],'componentsPerAttribute':0x2,'values':_0xc273a0}),'normal':new Cesium$4[(_0x2f75a0(-0x15e,-0x1ce))]({'componentDatatype':Cesium$4['ComponentDatatype'][_0x2723de(0x57e,0x550)],'componentsPerAttribute':0x3,'values':_0x503432})}),'indices':_0x248e56});return _0x18e76d;}['createRenderingPrimitives'](_0x2b9e41,_0x30f2a4,_0x2231e3,_0xf5958f,_0x51db09){const _0x5438fe=this,_0x20325e={};_0x20325e['st']=0x0,_0x20325e[_0x14ec41(-0x1f1,-0x1c5)]=0x1;const _0x408cc5={};_0x408cc5[_0x14ec41(-0xf3,-0xdc)]=[segmentDrawVert];const _0x1d91c1={};_0x1d91c1[_0x14ec41(-0xf3,-0xd6)]=[segmentDrawFrag];const _0x250127={};_0x250127[_0x26f33e(0x3c2,0x40b)]=!![];const _0x1b6764={};_0x1b6764['viewport']=undefined,_0x1b6764['depthTest']=_0x250127,_0x1b6764['depthMask']=!![];const _0x4d0f58={};_0x4d0f58['position']=0x0,_0x4d0f58['st']=0x1;const _0x4f1897={};_0x4f1897['defines']=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x4f1897['sources']=[fullscreenVert];const _0x3c08f4={};_0x3c08f4['defines']=[_0x14ec41(-0x13d,-0x123)],_0x3c08f4['sources']=[trailDrawFrag];const _0x3967dd={};_0x3967dd['position']=0x0,_0x3967dd['st']=0x1;const _0x45803a={};_0x45803a['defines']=[_0x14ec41(-0x1af,-0x1f6)],_0x45803a['sources']=[fullscreenVert];const _0x5e871b={};_0x5e871b['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'];function _0x14ec41(_0x56ed54,_0x526bb9){return _0x3cd0b4(_0x526bb9,_0x56ed54- -0x3e);}_0x5e871b[_0x26f33e(0x478,0x4ca)]=[screenDrawFrag];const _0x249845={};_0x249845['enabled']=![];function _0x26f33e(_0x5c37d9,_0x1261b4){return _0x1660f5(_0x1261b4,_0x5c37d9-0x6d);}const _0x151f75={};_0x151f75['enabled']=!![],this[_0x26f33e(0x402,0x47e)]={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x20325e,'geometry':this['createSegmentsGeometry'](_0x2231e3),'primitiveType':Cesium$4['PrimitiveType'][_0x26f33e(0x405,0x383)],'uniformMap':{'previousParticlesPosition':function(){function _0x55d0f2(_0x19aa4f,_0x4147c4){return _0x14ec41(_0x19aa4f-0x56e,_0x4147c4);}function _0x2a567b(_0x4da312,_0x2f180d){return _0x26f33e(_0x2f180d- -0x487,_0x4da312);}return _0x51db09[_0x2a567b(-0xbf,-0xd0)][_0x2a567b(-0x7e,-0xcd)];},'currentParticlesPosition':function(){function _0x4c8511(_0x1bf882,_0x298c34){return _0x26f33e(_0x298c34- -0x16b,_0x1bf882);}function _0x37def8(_0xeb449b,_0x480e36){return _0x26f33e(_0xeb449b-0x19d,_0x480e36);}return _0x51db09[_0x4c8511(0x27b,0x24c)][_0x4c8511(0x251,0x21a)];},'postProcessingPosition':function(){function _0x374a88(_0x5a31ad,_0x114f62){return _0x14ec41(_0x5a31ad-0x58f,_0x114f62);}return _0x51db09[_0x374a88(0x3db,0x364)]['postProcessingPosition'];},'particlesSpeed':function(){function _0x4afb94(_0x36a221,_0x2c675b){return _0x14ec41(_0x2c675b-0xf4,_0x36a221);}function _0x58d074(_0x4b7faa,_0x1ae32a){return _0x14ec41(_0x1ae32a-0x59e,_0x4b7faa);}return _0x51db09[_0x4afb94(-0xca,-0xc0)][_0x58d074(0x49b,0x48a)];},'colorTable':function(){function _0x22685e(_0x53f0a9,_0x50d011){return _0x14ec41(_0x50d011-0x1a0,_0x53f0a9);}return _0x5438fe['textures'][_0x22685e(0xa8,0x50)];},'aspect':function(){function _0x131507(_0x4c5031,_0x5cc221){return _0x14ec41(_0x5cc221-0x472,_0x4c5031);}return _0x2b9e41['drawingBufferWidth']/_0x2b9e41[_0x131507(0x330,0x372)];},'H':function(){function _0x37d5cb(_0x545c3f,_0x200615){return _0x14ec41(_0x200615- -0xac,_0x545c3f);}return _0x30f2a4['H'][_0x37d5cb(-0x1a4,-0x1e4)];},'hRange':function(){function _0x5d3f8d(_0x28e6e4,_0x1b7ab8){return _0x14ec41(_0x1b7ab8- -0x1a,_0x28e6e4);}return new Cesium$4['Cartesian2'](_0x30f2a4['H']['min'],_0x30f2a4['H'][_0x5d3f8d(-0x1e1,-0x1f8)]);},'uSpeedRange':function(){function _0x4757a3(_0x3a8cd9,_0x3f9ba6){return _0x14ec41(_0x3a8cd9-0x61e,_0x3f9ba6);}function _0x53379b(_0x37dd77,_0x4848ea){return _0x26f33e(_0x4848ea- -0x209,_0x37dd77);}return new Cesium$4[(_0x53379b(0x236,0x1c0))](_0x30f2a4['U'][_0x53379b(0x174,0x1cb)],_0x30f2a4['U'][_0x53379b(0x16e,0x184)]);},'vSpeedRange':function(){function _0x5f561e(_0x406521,_0x3380fa){return _0x26f33e(_0x3380fa- -0x42c,_0x406521);}function _0x3b71bb(_0x36fadd,_0x461dec){return _0x26f33e(_0x461dec- -0x4a5,_0x36fadd);}return new Cesium$4['Cartesian2'](_0x30f2a4['V'][_0x5f561e(-0xb2,-0x58)],_0x30f2a4['V'][_0x5f561e(-0x33,-0x9f)]);},'wSpeedRange':function(){function _0x1911ed(_0x31cee9,_0x4acbc2){return _0x26f33e(_0x4acbc2-0x41,_0x31cee9);}function _0x161002(_0x3b38d9,_0x2dc5fb){return _0x26f33e(_0x2dc5fb- -0x1e0,_0x3b38d9);}return new Cesium$4[(_0x161002(0x1ad,0x1e9))](_0x30f2a4['W'][_0x161002(0x279,0x1f4)],_0x30f2a4['W']['max']);},'pixelSize':function(){function _0x21bb8f(_0x21a9ec,_0x207b5c){return _0x26f33e(_0x207b5c- -0x179,_0x21a9ec);}return _0xf5958f[_0x21bb8f(0x2d5,0x294)];},'lineWidth':function(){return _0x2231e3['lineWidth'];},'particleHeight':function(){return _0x2231e3['particleHeight'];},'colour':function(){function _0x3f5a6c(_0x437476,_0x4ddfed){return _0x26f33e(_0x437476-0x187,_0x4ddfed);}return _0x5438fe[_0x3f5a6c(0x57f,0x5ab)];}},'vertexShaderSource':new Cesium$4[(_0x26f33e(0x3d0,0x39c))](_0x408cc5),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x1d91c1),'rawRenderState':Util[_0x26f33e(0x375,0x2f3)](_0x1b6764),'framebuffer':this[_0x26f33e(0x453,0x407)][_0x14ec41(-0x17f,-0x133)],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x4d0f58,'geometry':Util[_0x26f33e(0x41d,0x3f9)](),'primitiveType':Cesium$4['PrimitiveType'][_0x26f33e(0x405,0x419)],'uniformMap':{'segmentsColorTexture':function(){return _0x5438fe['textures']['segmentsColor'];},'segmentsDepthTexture':function(){function _0x232aab(_0x106204,_0x3dfcbe){return _0x26f33e(_0x106204- -0xef,_0x3dfcbe);}return _0x5438fe['textures'][_0x232aab(0x2df,0x2d4)];},'currentTrailsColor':function(){function _0x507b77(_0x1d4649,_0x384113){return _0x14ec41(_0x384113-0x38b,_0x1d4649);}return _0x5438fe['framebuffers']['currentTrails'][_0x507b77(0x23f,0x1c4)](0x0);},'trailsDepthTexture':function(){function _0x1d677e(_0x509ec8,_0x2c5037){return _0x14ec41(_0x509ec8-0xc0,_0x2c5037);}function _0x28bd34(_0x13c882,_0x1aaec0){return _0x26f33e(_0x13c882- -0x4cb,_0x1aaec0);}return _0x5438fe[_0x1d677e(-0x58,-0x2e)]['currentTrails'][_0x28bd34(-0x15a,-0xf5)];},'fadeOpacity':function(){return _0x2231e3['fadeOpacity'];}},'vertexShaderSource':new Cesium$4[(_0x26f33e(0x3d0,0x45f))](_0x4f1897),'fragmentShaderSource':new Cesium$4[(_0x26f33e(0x3d0,0x41d))](_0x3c08f4),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction'][_0x14ec41(-0x142,-0x1a5)]},'depthMask':!![]}),'framebuffer':this['framebuffers'][_0x14ec41(-0x1ea,-0x176)],'autoClear':!![],'preExecute':function(){if(_0x2231e3[_0x458750(0xfe,0xd6)]){const _0x451880=_0x5438fe['framebuffers']['currentTrails'];_0x5438fe['framebuffers'][_0x341c0c(0x5c5,0x5b3)]=_0x5438fe['framebuffers'][_0x341c0c(0x524,0x4ea)],_0x5438fe['framebuffers'][_0x458750(0xa5,0x15)]=_0x451880;}function _0x458750(_0x430c41,_0x4c660){return _0x26f33e(_0x4c660- -0x36c,_0x430c41);}function _0x341c0c(_0x38d492,_0x40737f){return _0x14ec41(_0x38d492-0x70e,_0x40737f);}_0x5438fe['primitives']['trails']['commandToExecute']['framebuffer']=_0x5438fe['framebuffers']['nextTrails'],_0x5438fe[_0x341c0c(0x5a5,0x571)]['trails']['clearCommand'][_0x341c0c(0x53f,0x4f2)]=_0x5438fe[_0x458750(0xb9,0xe7)][_0x341c0c(0x524,0x543)];}}),'screen':new CustomPrimitive({'commandType':_0x26f33e(0x45b,0x48a),'attributeLocations':_0x3967dd,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4[_0x26f33e(0x452,0x3c8)]['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){function _0x10b274(_0x49fe81,_0x18fd7f){return _0x26f33e(_0x18fd7f- -0x371,_0x49fe81);}function _0xf6a985(_0x104291,_0x28ca03){return _0x26f33e(_0x104291- -0x2ca,_0x28ca03);}return _0x5438fe[_0x10b274(0x157,0xe2)]['nextTrails'][_0x10b274(-0x52,0x33)](0x0);},'trailsDepthTexture':function(){function _0x4c57a9(_0x474ff2,_0x3264ee){return _0x26f33e(_0x3264ee- -0x5ad,_0x474ff2);}function _0x4835d2(_0x2321a7,_0x30f60e){return _0x14ec41(_0x30f60e-0x533,_0x2321a7);}return _0x5438fe[_0x4835d2(0x3af,0x41b)][_0x4835d2(0x382,0x349)]['depthTexture'];}},'vertexShaderSource':new Cesium$4[(_0x14ec41(-0x19b,-0x14a))](_0x45803a),'fragmentShaderSource':new Cesium$4[(_0x14ec41(-0x19b,-0x217))](_0x5e871b),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0x249845,'depthMask':!![],'blending':_0x151f75}),'framebuffer':undefined})};}}var CalculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20W;\x20//\x20upward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0auniform\x20float\x20speedScaleFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20//\x20map\x20the\x20z-axis\x20value\x20to\x20the\x20nearest\x20bit\x20plane\x20to\x20ensure\x20that\x20the\x20result\x20is\x20an\x20integer\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205,\x207,\x208,\x209],\x20width\x20=\x202,\x20height\x20=\x202,\x20level\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x206\x207\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x202\x203\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0afloat\x20interpolateTexture(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x201.0f\x20*\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x201.0f\x20*\x20interval.y;\x0a\x0a\x20\x20float\x20lon0_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon1_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon0_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat1,\x20lev));\x0a\x20\x20float\x20lon1_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat1,\x20lev));\x0a\x0a\x20\x20float\x20lon_lat0\x20=\x20mix(lon0_lat0,\x20lon1_lat0,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat1\x20=\x20mix(lon0_lat1,\x20lon1_lat1,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat\x20=\x20mix(lon_lat0,\x20lon_lat1,\x20lat\x20-\x20lat0);\x0a\x20\x20return\x20lon_lat;\x0a}\x0a\x0avec3\x20linearInterpolation(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bilinear_interpolation\x0a\x20\x20float\x20u\x20=\x20interpolateTexture(U,\x20lonLatLev);\x0a\x20\x20float\x20v\x20=\x20interpolateTexture(V,\x20lonLatLev);\x0a\x20\x20float\x20w\x20=\x20interpolateTexture(W,\x20lonLatLev);\x0a\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec3\x20convertSpeedUnitToLonLat(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20float\x20w\x20=\x20speed.z;\x0a\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20return\x20windVectorInLonLatLev;\x0a}\x0a\x0avec3\x20calculateSpeedByRungeKutta2(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec3\x20y_n\x20=\x20lonLatLev;\x0a\x20\x20vec3\x20f_n\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec3\x20speed\x20=\x20h\x20*\x20linearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20getRange(vec2\x20range)\x20{\x0a\x20\x20float\x20x1\x20=\x200.0f\x20-\x20range.x;\x0a\x20\x20float\x20x2\x20=\x20range.y\x20-\x200.0f;\x0a\x20\x20if(x1\x20<\x200.0f\x20||\x20x2\x20<\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(abs(x1),\x20abs(x2));\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x20abs(max(x1,\x20x2)));\x0a\x20\x20}\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20vec2\x20uRange\x20=\x20getRange(uSpeedRange);\x0a\x20\x20vec2\x20vRange\x20=\x20getRange(vSpeedRange);\x0a\x20\x20vec2\x20wRange\x20=\x20getRange(wSpeedRange);\x0a\x20\x20if(length(speed.xyz)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x200.0f;\x0a\x20\x20}\x0a\x0a\x20\x20percent.x\x20=\x20(abs(speed.x)\x20-\x20uRange.x)\x20/\x20(uRange.y\x20-\x20uRange.x);\x0a\x20\x20percent.y\x20=\x20(abs(speed.y)\x20-\x20vRange.x)\x20/\x20(vRange.y\x20-\x20vRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(abs(speed.z)\x20-\x20wRange.x)\x20/\x20(wRange.y\x20-\x20wRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speedOrigin\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLatLev);\x0a\x20\x20vec3\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLatLev,\x20speed);\x0a\x0a\x20\x20vec4\x20particleSpeed\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speed\x20/\x20speedScaleFactor));\x0a\x20\x20\x20\x20//\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a';function _0x3cd0b4(_0xc96241,_0x24e8b5){return _0x1e73(_0x24e8b5- -0x2e8,_0xc96241);}var PostProcessingPositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x0a\x0auniform\x20sampler2D\x20H;\x20//\x20particles\x20height\x20textures\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0auniform\x20vec2\x20viewerLonRange;\x0auniform\x20vec2\x20viewerLatRange;\x0a\x0aconst\x20float\x20randomCoefficient\x20=\x200.1f;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0aconst\x20float\x20dropRate\x20=\x200.1f;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0aconst\x20float\x20dropRateBump\x20=\x200.1f;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0avec4\x20getTextureValue(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20vec4\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D);\x0a\x20\x20return\x20result;\x0a}\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0abool\x20particleNoSpeed(vec3\x20particle)\x20{\x0a\x20\x20vec4\x20speed\x20=\x20getTextureValue(particlesSpeed,\x20particle);\x0a\x20\x20return\x20speed.r\x20==\x200.0f\x20&&\x20speed.g\x20==\x200.0f;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0f);\x0a\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20float\x20height\x20=\x20getTextureValue(H,\x20vec3(randomLon,\x20randomLat,\x20lev)).r;\x0a\x0a\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20height);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20viewerLatRange.x\x20||\x20particle.y\x20>\x20viewerLatRange.y\x20||\x20particle.x\x20<\x20viewerLonRange.x\x20||\x20particle.x\x20>\x20viewerLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x0a}\x0a',UpdatePositionShader='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x20Unit\x20converted\x20to\x20degrees\x20of\x20longitude\x20and\x20latitude\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20speed;\x0a\x20\x20if(length(speed.rgb)\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a';function _0x31f2(){const _0x53b032=['rawRenderState','_tomap','defineProperty','left','colorTable','fadeOpacity','getFullscreenQuad','_updateIng2','speedFactor','refreshTimer','destroy','currentTrails','setData','updateViewerParameters','isDestroy','persists','wheel','particlesNumber','ALWAYS','WindLayer','off','applyViewerParameters','BufferUsage','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','geometry','uSpeedRange','createComputingPrimitives','createTexture','array','speed','PointTrans','rectangle','randomizeParticles','commandToExecute','xmin','#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0aout\x20vec4\x20fragColor;\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0f\x20*\x20trailsColor)\x20/\x20255.0f;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20if(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20pointsColor;\x0a\x20\x20}\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20trailsColor;\x0a\x20\x20}\x0a\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a','viewRectangleToLonLatRange','segmentsColor','CanvasWindLayer','ColorRamp','Cartesian3','createCommand','destroyParticlesTextures','dynamic','uniformMap','mod','canvasWind','getValidRange','dimensions','currentTrailsColor','default','lev','unbindEvent','primitiveType','createRenderingFramebuffers','windTextures','clientWidth','Sampler','clear','PrimitiveType','framebuffers','particleSystem','createWindTextures','create','particlesSpeed','vdata','UNSIGNED_INT','8lhbPtB','Draw','nextTrailsDepth','speedScaleFactor','pointer-events','windData','now','PI_OVER_TWO','options','isPointVisible','attributeLocations','fromCache','preExecute','_createCanvas','length','Pass','1466754IsOOAN','drawingBufferHeight','value','_animateFrame','container','steps','PixelFormat','FLOAT','strokeStyle','shaderProgram','RGBA','toGridXY','abs','maxParticles','sources','ComputeCommand','north','width','_pointerEvents','TextureMagnificationFilter','register','fragmentShaderSource','maxAge','grid','3904496Fwpbmx','10oNFtxK','getParticles','fromDegrees','clientHeight','removeAll','maximum','EllipsoidalOccluder','color','setDate','colorTextures','_map','getUVByPoint','cos','_data','all','minimum','get','defined','tlng','east','PrimitiveCollection','1592801jqkwER','getColor','_setOptionsHook','particlesRendering','depthTexture','dropRate','visibility','getUVByXY','createRawRenderState','_speedRate','_mountedHook','scene','rows','normal','canvasContext','mouseHidden','getDefaultRenderState','camera','particlesComputing','mouseMove','nextTrails','SceneMode','_calcUV','keys','currentParticlesPosition','autoClear','_onMapWhellEvent','sin','GeometryAttribute','outputTexture','mouse_down','postProcessingPosition','max','STATIC_DRAW','postMessage','depthTest','pointerEvents','Color','update','_bilinearInterpolation','hidden','tlat','createParticlesTextures','Geometry','addPrimitives','EventType','GeometryAttributes','framebuffer','colors','clampToLatitudeRange','ZERO','setOptions','1194610mZPNAD','TextureMinificationFilter','toDegrees','getColorTexture','windField','canvasHeight','floor','dimension','Rectangle','_calc_speedRate','style','PixelDatatype','lonRange','type','canvas','createRenderingTextures','particlesTextureSize','ymin','context','canvasWidth','push','init','particlesTextures','toWindowCoordinates','worker','previousParticlesPosition','particles','DISABLE_GL_POSITION_LOG_DEPTH','commandType','Compute','alt','clearCommand','_onMap_preRenderEvent','enabled','NEAREST','xmax','VertexArray','vertexArray','lat','latRange','Cartesian2','ClearCommand','data','resize','_colorRamp','segmentsDepth','refreshParticles','ShaderSource','udata','willReadFrequently','createFramebuffer','min','frameRate','_onMouseDownEvent','textures','createSegmentsGeometry','height','cols','layer','drawingBufferWidth','randomBetween','screen','fixedHeight','_onMouseMoveEvent','speedRate','ymax','moveTo','407502InxhXV','TWO_PI','4836861QyJqFG','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20lines\x20drawing\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0auniform\x20vec2\x20hRange;\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0aout\x20float\x20heightNormalization;\x0aout\x20float\x20speedNormalization;\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight\x20+\x20lonLatLev.z;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0f,\x20360.0f)\x20-\x20180.0f;\x0a\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0f;\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(speed.z\x20-\x20wSpeedRange.x)\x20/\x20(wSpeedRange.y\x20-\x20wSpeedRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20vec3\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rgb;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x20\x20\x20\x20//\x20render\x20lines\x20with\x20triangles\x20and\x20miter\x20joint\x0a\x20\x20\x20\x20//\x20read\x20https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html\x20for\x20detail\x0a\x20\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20projectedCoordinates.next,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.next\x20+\x20offset;\x0a\x20\x20}\x0a\x0a\x20\x20heightNormalization\x20=\x20(currentPosition.z\x20-\x20hRange.x)\x20/\x20(hRange.y\x20-\x20hRange.x);\x0a\x0a\x20\x20speedNormalization\x20=\x20texture(particlesSpeed,\x20particleIndex).a;\x0a}\x0a','reverseY','#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20trailsColor;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a','getOwnPropertyDescriptor','756958Hsvemu','segments','_canvasParticles','add','lighter','mouseUp','Cesium','rgb(206,255,255)','commandList','pow','age','vmax','lon','colour','globeBoundingSphere','pixelFormat','globe','clearFramebuffers','mode','lng','_drawLines','lineWidth','__esModule','primitives','viewerParameters','show','TRIANGLES','Math','nextTrailsColor','currentTrailsDepth','vertexShaderSource','SCENE3D','canvasResize','_onMouseUpEvent','pixelSize','blending','dropRateBump','mars3d-canvasWind','OPAQUE','getExtent','redraw','fromGeometry','position','log'];_0x31f2=function(){return _0x53b032;};return _0x31f2();}const Cesium$3=mars3d__namespace[_0x1660f5(0x3c3,0x384)];class ParticlesComputing{constructor(_0x5b7896,_0x17acbb,_0x4dc33e,_0x560989){this[_0x1a2139(0x304,0x2d6)]=_0x17acbb;function _0x1a2139(_0x21df59,_0x374f1d){return _0x3cd0b4(_0x374f1d,_0x21df59-0x466);}function _0x50fa60(_0x3251d8,_0x4e501f){return _0x1660f5(_0x3251d8,_0x4e501f- -0x217);}this[_0x1a2139(0x38e,0x360)](_0x5b7896,_0x17acbb),this['createParticlesTextures'](_0x5b7896,_0x4dc33e,_0x560989),this[_0x50fa60(0x179,0x1ad)](_0x17acbb,_0x4dc33e,_0x560989);}['createWindTextures'](_0x3845ce,_0x1de0ae){function _0x351b03(_0x2610fa,_0x2fa301){return _0x3cd0b4(_0x2fa301,_0x2610fa-0x457);}var _0x50b500;function _0x2e1e60(_0x1b533e,_0x584c21){return _0x1660f5(_0x584c21,_0x1b533e- -0x10d);}const _0x5ec926={'context':_0x3845ce,'width':_0x1de0ae['dimensions']['lon'],'height':_0x1de0ae['dimensions']['lat']*(_0x1de0ae['dimensions']['lev']||0x1),'pixelFormat':Cesium$3['PixelFormat']['RED'],'pixelDatatype':Cesium$3[_0x351b03(0x2d6,0x278)][_0x351b03(0x39b,0x3e2)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0x351b03(0x2cc,0x309)][_0x351b03(0x2ed,0x34a)],'magnificationFilter':Cesium$3['TextureMagnificationFilter']['NEAREST']})};this['windTextures']={'U':Util[_0x351b03(0x35c,0x2fc)](_0x5ec926,_0x1de0ae['U']['array']),'V':Util['createTexture'](_0x5ec926,_0x1de0ae['V']['array']),'W':Util['createTexture'](_0x5ec926,((_0x50b500=_0x1de0ae['W'])===null||_0x50b500===void 0x0?void 0x0:_0x50b500['array'])??_0x1de0ae['U']['array']),'H':Util[_0x351b03(0x35c,0x359)](_0x5ec926,_0x1de0ae['H'][_0x2e1e60(0x2b9,0x228)])};}[_0x1660f5(0x3bf,0x32a)](_0x33168c,_0x5ade74,_0x55b66c){const _0x41e1ac={'context':_0x33168c,'width':_0x5ade74[_0xfacbea(0x3d5,0x3ff)],'height':_0x5ade74['particlesTextureSize'],'pixelFormat':Cesium$3[_0xfacbea(0x42e,0x4be)]['RGBA'],'pixelDatatype':Cesium$3[_0xfacbea(0x46a,0x3fa)][_0x917b2d(-0x13b,-0x14e)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0xfacbea(0x3e0,0x3f0)]['NEAREST'],'magnificationFilter':Cesium$3[_0xfacbea(0x500,0x4cb)]['NEAREST']})};function _0xfacbea(_0x4674ca,_0x24d657){return _0x1660f5(_0x4674ca,_0x24d657-0xbb);}function _0x917b2d(_0x2e18cc,_0x1a7194){return _0x1660f5(_0x2e18cc,_0x1a7194- -0x552);}const _0x518c1d=this['randomizeParticles'](_0x5ade74['maxParticles'],_0x55b66c),_0x54b886=new Float32Array(0x4*_0x5ade74['maxParticles'])['fill'](0x0);this['particlesTextures']={'previousParticlesPosition':Util[_0x917b2d(-0x175,-0x18d)](_0x41e1ac,_0x518c1d),'currentParticlesPosition':Util['createTexture'](_0x41e1ac,_0x518c1d),'nextParticlesPosition':Util['createTexture'](_0x41e1ac,_0x518c1d),'postProcessingPosition':Util['createTexture'](_0x41e1ac,_0x518c1d),'particlesSpeed':Util[_0xfacbea(0x505,0x480)](_0x41e1ac,_0x54b886)};}[_0x3cd0b4(-0x161,-0xf6)](_0xa0217b,_0x3282ce){const _0x1b9991=new Float32Array(0x4*_0xa0217b);function _0x3380a9(_0xfbb26a,_0x49ed72){return _0x3cd0b4(_0xfbb26a,_0x49ed72-0x471);}for(let _0x4840d5=0x0;_0x4840d5<_0xa0217b;_0x4840d5++){_0x1b9991[0x4*_0x4840d5]=Cesium$3['Math'][_0x3380a9(0x2f3,0x321)](_0x3282ce[_0x3380a9(0x329,0x2f1)]['x'],_0x3282ce['lonRange']['y']),_0x1b9991[0x4*_0x4840d5+0x1]=Cesium$3['Math']['randomBetween'](_0x3282ce['latRange']['x'],_0x3282ce[_0x3380a9(0x351,0x30c)]['y']),_0x1b9991[0x4*_0x4840d5+0x2]=Cesium$3[_0x3380a9(0x32a,0x34a)]['randomBetween'](this[_0x1cde84(0x39a,0x329)]['lev'][_0x1cde84(0x3a3,0x3d8)],this['data'][_0x3380a9(0x3ed,0x38e)][_0x3380a9(0x262,0x2d1)]),_0x1b9991[0x4*_0x4840d5+0x3]=0x0;}function _0x1cde84(_0x47fbc4,_0x519e5){return _0x3cd0b4(_0x519e5,_0x47fbc4-0x4fc);}return _0x1b9991;}[_0x1660f5(0x439,0x3d9)](_0x5cb3c3){const _0x37a7a1=[_0x5cb3c3['dimensions']['lon'],_0x5cb3c3['dimensions']['lat'],_0x5cb3c3[_0xfc0ae1(0x1ba,0x162)][_0x3cfb8d(0x4df,0x478)]],_0x4e3d24=[_0x5cb3c3['lon'][_0xfc0ae1(0xfc,0xef)],_0x5cb3c3['lat']['min'],_0x5cb3c3['lev'][_0xfc0ae1(0x12d,0xef)]],_0x3a865f=[_0x5cb3c3['lon']['max'],_0x5cb3c3['lat']['max'],_0x5cb3c3['lev']['max']],_0x39f899=[(_0x3a865f[0x0]-_0x4e3d24[0x0])/(_0x37a7a1[0x0]-0x1),(_0x3a865f[0x1]-_0x4e3d24[0x1])/(_0x37a7a1[0x1]-0x1),_0x37a7a1[0x2]>0x1?(_0x3a865f[0x2]-_0x4e3d24[0x2])/(_0x37a7a1[0x2]-0x1):0x1],_0x3a783f=Math['floor'](Math['random']()*_0x5cb3c3['U'][_0x3cfb8d(0x4e3,0x461)]['length']),_0x5ef99d=_0x3a783f%(_0x37a7a1[0x0]*_0x37a7a1[0x1]);function _0xfc0ae1(_0x3de15f,_0x58a874){return _0x1660f5(_0x3de15f,_0x58a874- -0x278);}const _0x2258d6=Math['floor'](_0x5ef99d/_0x37a7a1[0x0]),_0x34dd6a=_0x5ef99d%_0x37a7a1[0x0];function _0x3cfb8d(_0x41da76,_0x37bd33){return _0x3cd0b4(_0x41da76,_0x37bd33-0x55b);}const _0x1e6b96=Cesium$3['Math']['randomBetween'](_0x4e3d24[0x0]+_0x34dd6a*_0x39f899[0x0],_0x4e3d24[0x0]+(_0x34dd6a+0x1)*_0x39f899[0x0]),_0xf61d42=Cesium$3['Math']['randomBetween'](_0x4e3d24[0x1]+(_0x2258d6-0x1)*_0x39f899[0x1],_0x4e3d24[0x1]+_0x2258d6*_0x39f899[0x1]),_0x1ffccb=_0x5cb3c3['H']['array'][_0x3a783f]||0x0;return[_0x1e6b96,_0xf61d42,_0x1ffccb];}[_0x3cd0b4(-0xa5,-0xec)](){function _0x571667(_0x21ccd9,_0x18b6d9){return _0x1660f5(_0x21ccd9,_0x18b6d9- -0x50f);}Object['keys'](this[_0x571667(-0x23d,-0x1c5)])['forEach'](_0x2e408b=>{function _0x5201ae(_0x9f3479,_0x5f1f5d){return _0x571667(_0x5f1f5d,_0x9f3479-0x5c9);}this[_0x5201ae(0x404,0x3f8)][_0x2e408b]['destroy']();});}['createComputingPrimitives'](_0xf198d4,_0x254746,_0x5dedb8){const _0x4f7bb1=new Cesium$3['Cartesian3'](_0xf198d4['dimensions']['lon'],_0xf198d4['dimensions'][_0x45f569(0x4a4,0x440)],_0xf198d4['dimensions']['lev']),_0x5da28f=new Cesium$3['Cartesian3'](_0xf198d4['lon'][_0xd020fe(0x4e2,0x4eb)],_0xf198d4['lat'][_0x45f569(0x3e6,0x44d)],_0xf198d4[_0xd020fe(0x558,0x56d)]['min']),_0x434035=new Cesium$3[(_0xd020fe(0x54d,0x573))](_0xf198d4['lon']['max'],_0xf198d4['lat']['max'],_0xf198d4['lev']['max']),_0x3282cd=new Cesium$3['Cartesian3']((_0x434035['x']-_0x5da28f['x'])/(_0x4f7bb1['x']-0x1),(_0x434035['y']-_0x5da28f['y'])/(_0x4f7bb1['y']-0x1),_0x4f7bb1['z']>0x1?(_0x434035['z']-_0x5da28f['z'])/(_0x4f7bb1['z']-0x1):0x1),_0x9e1650=new Cesium$3['Cartesian2'](_0xf198d4[_0x45f569(0x480,0x470)]['min'],_0xf198d4['lon']['max']),_0x36d5f5=new Cesium$3[(_0x45f569(0x4c6,0x442))](_0xf198d4['lat']['min'],_0xf198d4[_0xd020fe(0x4d5,0x4e1)][_0x45f569(0x3bd,0x406)]),_0x59ebc0=new Cesium$3[(_0x45f569(0x3e3,0x442))](_0xf198d4['U'][_0x45f569(0x41e,0x44d)],_0xf198d4['U']['max']),_0x350c53=new Cesium$3[(_0x45f569(0x3bd,0x442))](_0xf198d4['V'][_0xd020fe(0x4e2,0x494)],_0xf198d4['V']['max']);function _0x45f569(_0xe8502a,_0x3540a3){return _0x3cd0b4(_0xe8502a,_0x3540a3-0x5a6);}const _0x374541=new Cesium$3[(_0x45f569(0x4a1,0x442))](_0xf198d4['W'][_0xd020fe(0x4e2,0x472)],_0xf198d4['W']['max']),_0x2103d9=this,_0xc6e719={};_0xc6e719['U']=function(){return _0x2103d9['windTextures']['U'];},_0xc6e719['V']=function(){return _0x2103d9['windTextures']['V'];},_0xc6e719['W']=function(){function _0x236f48(_0x3c6aad,_0x49eaf1){return _0x45f569(_0x49eaf1,_0x3c6aad- -0x264);}return _0x2103d9[_0x236f48(0x263,0x2bf)]['W'];},_0xc6e719['currentParticlesPosition']=function(){function _0x2962b6(_0x50128c,_0x44ac2f){return _0xd020fe(_0x50128c-0x59,_0x44ac2f);}function _0x1a646a(_0x4ae0c1,_0x2b9ace){return _0x45f569(_0x2b9ace,_0x4ae0c1- -0x392);}return _0x2103d9[_0x2962b6(0x51e,0x594)][_0x1a646a(0x6c,0x2e)];},_0xc6e719[_0xd020fe(0x4b6,0x451)]=function(){return _0x4f7bb1;};function _0xd020fe(_0x2208be,_0xa2a39a){return _0x1660f5(_0xa2a39a,_0x2208be-0x17b);}_0xc6e719[_0xd020fe(0x475,0x43a)]=function(){return _0x5da28f;},_0xc6e719[_0x45f569(0x3e6,0x3d6)]=function(){return _0x434035;},_0xc6e719['interval']=function(){return _0x3282cd;},_0xc6e719[_0x45f569(0x495,0x4a9)]=function(){return _0x59ebc0;},_0xc6e719['vSpeedRange']=function(){return _0x350c53;},_0xc6e719['wSpeedRange']=function(){return _0x374541;},_0xc6e719[_0xd020fe(0x56b,0x522)]=function(){function _0x2edec8(_0x3ac52e,_0x13979a){return _0xd020fe(_0x13979a- -0x1a9,_0x3ac52e);}function _0x5643e4(_0x4b6c1c,_0x1351c8){return _0xd020fe(_0x4b6c1c- -0x6fa,_0x1351c8);}return _0x5dedb8[_0x5643e4(-0x1df,-0x267)]*_0x254746[_0x2edec8(0x414,0x384)];};const _0x1fa200={};_0x1fa200[_0xd020fe(0x586,0x4fb)]=[CalculateSpeedShader];const _0x2bbdeb={};_0x2bbdeb[_0xd020fe(0x586,0x50d)]=[UpdatePositionShader];const _0x1cba4a={};_0x1cba4a[_0x45f569(0x523,0x4f1)]=[PostProcessingPositionShader],this[_0x45f569(0x4c0,0x47b)]={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':_0xc6e719,'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x1fa200),'outputTexture':this[_0x45f569(0x426,0x430)][_0x45f569(0x46d,0x4d0)],'preExecute':function(){function _0xdc43d8(_0x58b643,_0x268eb1){return _0xd020fe(_0x268eb1- -0x3b3,_0x58b643);}if(_0x254746!==undefined&&_0x254746['dynamic']){const _0x49d8a5=_0x2103d9['particlesTextures']['previousParticlesPosition'];_0x2103d9[_0x342027(-0x251,-0x237)][_0xdc43d8(0xc1,0x115)]=_0x2103d9[_0xdc43d8(0x198,0x112)]['currentParticlesPosition'],_0x2103d9['particlesTextures'][_0xdc43d8(0xa5,0xe0)]=_0x2103d9['particlesTextures']['postProcessingPosition'],_0x2103d9[_0x342027(-0x251,-0x2b3)][_0xdc43d8(0xdc,0xe7)]=_0x49d8a5;}function _0x342027(_0x1d9aa4,_0x2a0e8d){return _0x45f569(_0x2a0e8d,_0x1d9aa4- -0x681);}_0x2103d9['primitives']['calculateSpeed']['commandToExecute']['outputTexture']=_0x2103d9['particlesTextures']['particlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':_0x45f569(0x428,0x437),'uniformMap':{'currentParticlesPosition':function(){function _0x4e2e50(_0x414034,_0xbd54a4){return _0x45f569(_0x414034,_0xbd54a4- -0x21d);}function _0x3191a8(_0x5a80d9,_0x33f15d){return _0x45f569(_0x33f15d,_0x5a80d9- -0x421);}return _0x2103d9[_0x4e2e50(0x188,0x213)][_0x3191a8(-0x23,0x12)];},'particlesSpeed':function(){function _0x4cb1c9(_0x1e246a,_0xfc081d){return _0xd020fe(_0xfc081d- -0x244,_0x1e246a);}function _0x1b5aca(_0x58315f,_0x3977dc){return _0xd020fe(_0x58315f- -0x6f1,_0x3977dc);}return _0x2103d9[_0x1b5aca(-0x22c,-0x1da)][_0x4cb1c9(0x363,0x321)];}},'fragmentShaderSource':new Cesium$3[(_0x45f569(0x419,0x449))](_0x2bbdeb),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':function(){function _0x4cc413(_0x452ab7,_0x351b31){return _0xd020fe(_0x351b31- -0x27a,_0x452ab7);}function _0x590f04(_0x4dd93a,_0x51f302){return _0xd020fe(_0x4dd93a- -0x1b4,_0x51f302);}_0x2103d9[_0x590f04(0x35c,0x33f)]['updatePosition'][_0x4cc413(0x32e,0x2cc)][_0x590f04(0x2e4,0x357)]=_0x2103d9['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':_0xd020fe(0x4cc,0x44e),'uniformMap':{'nextParticlesPosition':function(){function _0xa02056(_0x19b6dd,_0x240dfc){return _0x45f569(_0x240dfc,_0x19b6dd-0x125);}return _0x2103d9[_0xa02056(0x555,0x4cd)]['nextParticlesPosition'];},'particlesSpeed':function(){function _0x474514(_0x4c157c,_0x5618af){return _0xd020fe(_0x5618af- -0x48f,_0x4c157c);}return _0x2103d9['particlesTextures'][_0x474514(0xa9,0xd6)];},'viewerLonRange':function(){function _0x59d894(_0x40c6c3,_0x4aec11){return _0x45f569(_0x40c6c3,_0x4aec11- -0x465);}return _0x5dedb8[_0x59d894(-0xbb,-0x3f)];},'viewerLatRange':function(){return _0x5dedb8['latRange'];},'lonRange':function(){return _0x9e1650;},'latRange':function(){return _0x36d5f5;},'dimension':function(){return _0x4f7bb1;},'minimum':function(){return _0x5da28f;},'maximum':function(){return _0x434035;},'interval':function(){return _0x3282cd;},'H':function(){return _0x2103d9['windTextures']['H'];},'randomCoefficient':function(){const _0x59ebba=Math['random']();return _0x59ebba;},'dropRate':function(){function _0x4dbd94(_0x50b049,_0x546179){return _0xd020fe(_0x546179-0x37,_0x50b049);}return _0x254746[_0x4dbd94(0x4a6,0x4b7)];},'dropRateBump':function(){function _0x51a08a(_0xaf94f5,_0x62140c){return _0x45f569(_0x62140c,_0xaf94f5- -0x5f2);}return _0x254746[_0x51a08a(-0x16a,-0x147)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x1cba4a),'outputTexture':this[_0x45f569(0x488,0x430)][_0x45f569(0x3f9,0x405)],'preExecute':function(){function _0x14792d(_0x424ef8,_0x4fb5ba){return _0x45f569(_0x424ef8,_0x4fb5ba- -0x26f);}function _0x2bb9f5(_0x3c35c4,_0xf24b16){return _0xd020fe(_0xf24b16- -0x334,_0x3c35c4);}_0x2103d9[_0x2bb9f5(0x247,0x1dc)][_0x2bb9f5(0x182,0x166)][_0x14792d(0x2b8,0x242)][_0x2bb9f5(0x1cc,0x164)]=_0x2103d9[_0x2bb9f5(0x12d,0x191)][_0x14792d(0x14c,0x196)];}})};}}const Cesium$2=mars3d__namespace['Cesium'];function _0x1660f5(_0x30eb72,_0x1c40be){return _0x1e73(_0x1c40be-0x1d8,_0x30eb72);}class ParticleSystem{constructor(_0x5788fa,_0x4273ab,_0x3baf34,_0x65cde5){function _0x9ab67d(_0x5a6982,_0x4e6b08){return _0x3cd0b4(_0x5a6982,_0x4e6b08-0x444);}this[_0x160747(-0x2ae,-0x22b)]=_0x5788fa,_0x4273ab={..._0x4273ab};_0x4273ab[_0x9ab67d(0x35c,0x2e8)]&&_0x4273ab['vdata']&&(_0x4273ab[_0x160747(-0x12d,-0x197)]={},_0x4273ab[_0x160747(-0x15e,-0x197)]['lon']=_0x4273ab[_0x160747(-0x24c,-0x204)],_0x4273ab[_0x9ab67d(0x2f7,0x35e)]['lat']=_0x4273ab[_0x9ab67d(0x224,0x290)],_0x4273ab[_0x160747(-0x1ad,-0x197)]['lev']=_0x4273ab['lev']||0x1,_0x4273ab['lon']={},_0x4273ab['lon']['min']=_0x4273ab['xmin'],_0x4273ab[_0x9ab67d(0x2c4,0x30e)]['max']=_0x4273ab['xmax'],_0x4273ab['lat']={},_0x4273ab[_0x9ab67d(0x2cb,0x2de)]['min']=_0x4273ab['ymin'],_0x4273ab['lat']['max']=_0x4273ab['ymax'],_0x4273ab['lev']={},_0x4273ab['lev']['min']=_0x4273ab['levmin']??0x1,_0x4273ab[_0x160747(-0x198,-0x194)]['max']=_0x4273ab['levmax']??0x1,_0x4273ab['U']={},_0x4273ab['U']['array']=new Float32Array(_0x4273ab[_0x9ab67d(0x32a,0x2e8)]),_0x4273ab['U']['min']=_0x4273ab['umin']??Math[_0x9ab67d(0x34c,0x2eb)](..._0x4273ab['udata']),_0x4273ab['U']['max']=_0x4273ab['umax']??Math[_0x160747(-0x2b4,-0x251)](..._0x4273ab[_0x160747(-0x230,-0x20d)]),_0x4273ab['V']={},_0x4273ab['V'][_0x9ab67d(0x2d8,0x34a)]=new Float32Array(_0x4273ab[_0x160747(-0x179,-0x186)]),_0x4273ab['V']['min']=_0x4273ab['vmin']??Math['min'](..._0x4273ab['vdata']),_0x4273ab['V']['max']=_0x4273ab[_0x160747(-0x261,-0x1e8)]??Math['max'](..._0x4273ab['vdata']));!_0x4273ab['W']&&(_0x4273ab['W']={'array':new Float32Array(_0x4273ab['U']['array']['length']),'min':0x0,'max':0x0});if(!_0x4273ab['H']){var _0x4b6c66;_0x4273ab['H']={'array':new Float32Array(_0x4273ab['U']['array']['length']),'min':0x0,'max':0x0};if((_0x4b6c66=_0x4273ab['lev'])!==null&&_0x4b6c66!==void 0x0&&_0x4b6c66['array']){const {lon:_0x5b27be,lat:_0x29331c,lev:_0x2b6f63}=_0x4273ab[_0x160747(-0x171,-0x197)];for(let _0x33f5c1=0x0;_0x33f5c1<_0x2b6f63;_0x33f5c1++){for(let _0x445a40=0x0;_0x445a40<_0x29331c;_0x445a40++){for(let _0x160ad5=0x0;_0x160ad5<_0x5b27be;_0x160ad5++){const _0x3df178=_0x33f5c1*(_0x5b27be*_0x29331c)+_0x445a40*_0x5b27be+_0x160ad5;_0x4273ab['H'][_0x9ab67d(0x3de,0x34a)][_0x3df178]=_0x4273ab['lev']['array'][_0x33f5c1];}}}_0x4273ab['H']['min']=Math[_0x9ab67d(0x2ac,0x2eb)](..._0x4273ab['lev']['array']),_0x4273ab['H']['max']=Math[_0x9ab67d(0x2a2,0x2a4)](..._0x4273ab[_0x9ab67d(0x3c5,0x361)]['array']);}}this['data']=_0x4273ab,this[_0x9ab67d(0x356,0x379)]=_0x3baf34,this['viewerParameters']=_0x65cde5;function _0x160747(_0x126093,_0x3bf977){return _0x1660f5(_0x126093,_0x3bf977- -0x571);}this[_0x9ab67d(0x29f,0x296)]=new ParticlesComputing(this['context'],this[_0x9ab67d(0x296,0x2e2)],this['options'],this[_0x160747(-0x1e0,-0x1db)]),this[_0x160747(-0x24e,-0x26e)]=new ParticlesRendering(this['context'],this['data'],this[_0x160747(-0x153,-0x17c)],this['viewerParameters'],this['particlesComputing']);}[_0x3cd0b4(-0x11e,-0x122)](_0xd63735){function _0x26a655(_0x165fe2,_0x1a418c){return _0x3cd0b4(_0x1a418c,_0x165fe2-0x14a);}this[_0x6012c5(0x126,0x18c)][_0x26a655(0x5e,-0x5)](),Object['keys'](this['particlesComputing']['windTextures'])['forEach'](_0x86f08f=>{this['particlesComputing']['windTextures'][_0x86f08f]['destroy']();}),this['particlesRendering'][_0x6012c5(0x261,0x1e4)]['colorTable']['destroy'](),Object[_0x6012c5(0x221,0x191)](this[_0x26a655(-0x73,-0x8e)]['framebuffers'])['forEach'](_0x1365a2=>{this['particlesRendering']['framebuffers'][_0x1365a2]['destroy']();}),this[_0x6012c5(0x23d,0x1c0)]=_0xd63735;function _0x6012c5(_0x5737da,_0xf9d266){return _0x1660f5(_0x5737da,_0xf9d266- -0x186);}this['particlesComputing']=new ParticlesComputing(this['context'],this['data'],this['options'],this['viewerParameters']),this[_0x26a655(-0x73,0x5)]=new ParticlesRendering(this[_0x6012c5(0x250,0x1c0)],this['data'],this[_0x6012c5(0x2e7,0x26f)],this['viewerParameters'],this[_0x26a655(-0x64,-0xdb)]);}['clearFramebuffers'](){function _0x4e480e(_0x29baad,_0x1b0b88){return _0x1660f5(_0x29baad,_0x1b0b88- -0x80);}function _0x391b5c(_0x4915fa,_0xa67d74){return _0x1660f5(_0x4915fa,_0xa67d74- -0x578);}const _0x865e9a=new Cesium$2[(_0x4e480e(0x2b1,0x2dd))]({'color':new Cesium$2[(_0x391b5c(-0x2d3,-0x253))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x4e480e(0x32d,0x37c)][_0x4e480e(0x399,0x324)]});Object['keys'](this[_0x391b5c(-0x241,-0x275)]['framebuffers'])['forEach'](_0x573f73=>{function _0x5cae54(_0x1969f8,_0x44d1db){return _0x391b5c(_0x44d1db,_0x1969f8-0xe8);}function _0x3a589a(_0x4fb0d2,_0x27784b){return _0x4e480e(_0x27784b,_0x4fb0d2- -0x2d5);}_0x865e9a[_0x3a589a(-0x26,-0x63)]=this[_0x5cae54(-0x18d,-0x1e9)]['framebuffers'][_0x573f73],_0x865e9a['execute'](this['context']);});}['refreshParticles'](_0x4f6050,_0xc00d40=!![]){function _0x4ce510(_0x580084,_0x33a218){return _0x3cd0b4(_0x33a218,_0x580084-0x499);}_0xc00d40&&(this[_0x4ce510(0x368,0x332)](),this['particlesComputing'][_0x7c1a06(0x2e0,0x29f)](),this['particlesComputing']['createParticlesTextures'](this['context'],this[_0x7c1a06(0x257,0x2c0)],this['viewerParameters']));function _0x7c1a06(_0xf56ccc,_0x5ef378){return _0x1660f5(_0xf56ccc,_0x5ef378- -0x135);}if(_0x4f6050){var _0xdbb255;const _0x2c50c0=this[_0x7c1a06(0x1b4,0x1ce)]['createSegmentsGeometry'](this['options']);this[_0x4ce510(0x2dc,0x27b)]['primitives'][_0x4ce510(0x358,0x3e8)][_0x4ce510(0x39b,0x363)]=_0x2c50c0;const _0x1e4ca7=Cesium$2['VertexArray']['fromGeometry']({'context':this['context'],'geometry':_0x2c50c0,'attributeLocations':this[_0x7c1a06(0x1fc,0x1ce)]['primitives'][_0x7c1a06(0x1c2,0x24a)]['attributeLocations'],'bufferUsage':Cesium$2['BufferUsage']['STATIC_DRAW']});(_0xdbb255=this[_0x7c1a06(0x153,0x1ce)]['primitives'])!==null&&_0xdbb255!==void 0x0&&(_0xdbb255=_0xdbb255['segments'])!==null&&_0xdbb255!==void 0x0&&_0xdbb255[_0x7c1a06(0x287,0x296)]&&(this[_0x7c1a06(0x17b,0x1ce)]['primitives']['segments'][_0x4ce510(0x3a4,0x3b6)]['vertexArray']=_0x1e4ca7);}}[_0x1660f5(0x357,0x333)](_0x42815c){function _0x4b1bb8(_0xe81412,_0x2cfa8f){return _0x3cd0b4(_0xe81412,_0x2cfa8f- -0x9b);}let _0xdfc048=![];function _0x53ec20(_0x59b2da,_0x5c5db5){return _0x3cd0b4(_0x59b2da,_0x5c5db5-0x3b6);}this['options'][_0x4b1bb8(-0x19b,-0x151)]!==_0x42815c['maxParticles']&&(_0xdfc048=!![]),Object[_0x53ec20(0x180,0x20d)](_0x42815c)['forEach'](_0x44ec2c=>{function _0x12d5dc(_0x445de8,_0x32b5ef){return _0x53ec20(_0x445de8,_0x32b5ef-0xac);}this[_0x12d5dc(0x3f2,0x397)][_0x44ec2c]=_0x42815c[_0x44ec2c];}),this['refreshParticles'](_0xdfc048,_0x42815c['dynamic']);}[_0x1660f5(0x409,0x3bf)](_0x14ddf0){function _0x30c19f(_0xe4c796,_0x3c1d5c){return _0x3cd0b4(_0xe4c796,_0x3c1d5c- -0xeb);}Object[_0x80662f(0x96,0x123)](_0x14ddf0)['forEach'](_0x5f1a2c=>{this['viewerParameters'][_0x5f1a2c]=_0x14ddf0[_0x5f1a2c];}),this[_0x30c19f(-0x2a6,-0x249)](![]);function _0x80662f(_0x409e0d,_0x4d7e65){return _0x3cd0b4(_0x4d7e65,_0x409e0d-0x23f);}!this['options']['dynamic']&&(this[_0x30c19f(-0x1b9,-0x1b6)][_0x30c19f(-0x21d,-0x1d6)]=!![],this[_0x80662f(0xb2,0x6a)](this['options']),setTimeout(()=>{function _0x516678(_0x39ff0f,_0x2bddb9){return _0x80662f(_0x2bddb9- -0x166,_0x39ff0f);}this[_0x516678(0x4e,0xe)]['dynamic']=![];function _0xc4f85c(_0x3393a5,_0x1a521c){return _0x30c19f(_0x1a521c,_0x3393a5-0x539);}this[_0x516678(-0x147,-0xb4)](this['options']);},0x1f4));}['destroy'](){clearTimeout(this['canrefresh']),this[_0x103d97(0x4cd,0x4bf)]['destroyParticlesTextures'](),Object[_0x103d97(0x478,0x4c4)](this['particlesComputing'][_0x375747(0x248,0x218)])['forEach'](_0x4f41a4=>{function _0x2e8bda(_0x5d0c3d,_0x48ee4c){return _0x375747(_0x5d0c3d,_0x48ee4c- -0x217);}this['particlesComputing']['windTextures'][_0x4f41a4][_0x2e8bda(0x29,-0x2c)]();}),this[_0x103d97(0x4d0,0x4b0)][_0x375747(0x1be,0x1a1)]['colorTable'][_0x103d97(0x5f1,0x561)]();function _0x375747(_0x4289af,_0x1bc674){return _0x1660f5(_0x4289af,_0x1bc674- -0x1c9);}function _0x103d97(_0x3d31fa,_0x7b2826){return _0x3cd0b4(_0x3d31fa,_0x7b2826-0x66d);}Object[_0x375747(0x11d,0x14e)](this[_0x103d97(0x452,0x4b0)]['framebuffers'])['forEach'](_0x3d3d7f=>{function _0x3289e1(_0x27915d,_0x70c836){return _0x375747(_0x70c836,_0x27915d- -0xdf);}this[_0x3289e1(0x5b,0x23)]['framebuffers'][_0x3d3d7f]['destroy']();});for(const _0x9482a6 in this){delete this[_0x9482a6];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x457e49={};_0x457e49['particlesNumber']=0x1000,_0x457e49[_0x3cd0b4(-0xbb,-0x14e)]=0x0,_0x457e49['fadeOpacity']=0.996,_0x457e49[_0x1660f5(0x363,0x305)]=0.003,_0x457e49[_0x3cd0b4(-0x110,-0x11e)]=0.01,_0x457e49['speedFactor']=0.5,_0x457e49[_0x1660f5(0x3bc,0x393)]=0x2,_0x457e49['colors']=[_0x3cd0b4(-0x13e,-0x13b)],_0x457e49['dynamic']=!![];const DEF_OPTIONS=_0x457e49;class WindLayer extends BaseLayer$1{constructor(_0x3af061={}){_0x3af061={...DEF_OPTIONS,..._0x3af061},super(_0x3af061),this['_setOptionsHook'](_0x3af061);}get[_0x3cd0b4(-0x152,-0x152)](){function _0x55a31c(_0x11d81f,_0xa18966){return _0x3cd0b4(_0xa18966,_0x11d81f-0xcc);}return this[_0x55a31c(-0x5f,-0xc5)];}get['data'](){return this['_data'];}set[_0x3cd0b4(-0x118,-0x162)](_0x57871a){function _0x6266ab(_0x4c567a,_0x3dcf7b){return _0x1660f5(_0x3dcf7b,_0x4c567a- -0xaa);}this[_0x6266ab(0x30c,0x28e)](_0x57871a);}get[_0x1660f5(0x304,0x330)](){function _0x13b2d0(_0x1e3976,_0x3a14f4){return _0x3cd0b4(_0x3a14f4,_0x1e3976-0x48f);}return this['options'][_0x13b2d0(0x2ff,0x331)];}set['colors'](_0x9a2672){this['options']['colors']=_0x9a2672;function _0x57a7bc(_0xb80ae7,_0x20f7d1){return _0x3cd0b4(_0xb80ae7,_0x20f7d1- -0x71);}if(this[_0x2e804e(-0x193,-0x1c8)]){const _0x5d0bb5={};_0x5d0bb5['colors']=_0x9a2672,this[_0x57a7bc(-0x1d0,-0x14a)]['setOptions'](_0x5d0bb5);}function _0x2e804e(_0x1bd80d,_0x19cad2){return _0x1660f5(_0x19cad2,_0x1bd80d- -0x57a);}this['resize']();}['_mountedHook'](){}['_addedHook'](){this['scene']=this['_map']['scene'],this['camera']=this['_map'][_0x45f603(0x1ac,0x15d)],this['primitives']=new Cesium$1[(_0x45f603(0x196,0x14b))](),this['_map'][_0x45f603(0x1e2,0x157)]['primitives']['add'](this['primitives']),this[_0xf02a09(-0xb9,-0xfd)]={'lonRange':new Cesium$1['Cartesian2'](),'latRange':new Cesium$1[(_0x45f603(0x11d,0x1a8))](),'pixelSize':0x0,'lonDisplayRange':new Cesium$1['Cartesian2'](),'latDisplayRange':new Cesium$1['Cartesian2']()},this[_0xf02a09(-0xd1,-0x107)]=new Cesium$1['BoundingSphere'](Cesium$1[_0xf02a09(-0xda,-0xc1)][_0x45f603(0x111,0x17e)],Cesium$1['Ellipsoid']['WGS84']['minimumRadius']),this[_0x45f603(0x1e1,0x203)](),window['addEventListener'](_0x45f603(0x16b,0x1ab),this['resize']['bind'](this),![]);function _0xf02a09(_0x39de77,_0x440226){return _0x1660f5(_0x39de77,_0x440226- -0x493);}this[_0xf02a09(-0x1d2,-0x175)]=![],this['mouse_move']=![];function _0x45f603(_0xc7b131,_0x399c2c){return _0x3cd0b4(_0xc7b131,_0x399c2c-0x30c);}this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0xf02a09(-0x223,-0x19e)]['on'](mars3d__namespace[_0xf02a09(-0x16b,-0x166)]['mouseDown'],this['_onMouseDownEvent'],this),this[_0x45f603(0x101,0x141)]['on'](mars3d__namespace[_0x45f603(0x192,0x179)]['mouseUp'],this['_onMouseUpEvent'],this),this[_0xf02a09(-0x186,-0x19e)]['on'](mars3d__namespace[_0xf02a09(-0x1d1,-0x166)]['mouseMove'],this['_onMouseMoveEvent'],this),this[_0x45f603(0xc4,0x144)]&&this['setData'](this['_data']);}['_removedHook'](){window['removeEventListener'](_0x2c9844(0x39c,0x31a),this['resize']);function _0x2c9844(_0x3ac687,_0x2add9c){return _0x1660f5(_0x3ac687,_0x2add9c- -0x45);}this[_0x44e351(-0x1d6,-0x1aa)][_0x2c9844(0x2f5,0x379)](mars3d__namespace[_0x2c9844(0x355,0x2e8)]['preRender'],this['_onMap_preRenderEvent'],this),this['_map'][_0x2c9844(0x33f,0x379)](mars3d__namespace[_0x2c9844(0x358,0x2e8)]['wheel'],this[_0x2c9844(0x34c,0x2d5)],this);function _0x44e351(_0x578a56,_0x3f65c3){return _0x3cd0b4(_0x3f65c3,_0x578a56- -0xb);}this[_0x44e351(-0x1d6,-0x258)]['off'](mars3d__namespace[_0x2c9844(0x2d0,0x2e8)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map'][_0x2c9844(0x339,0x379)](mars3d__namespace['EventType'][_0x2c9844(0x3b3,0x33e)],this[_0x2c9844(0x363,0x35a)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x2c9844(0x2a6,0x32e)],this),this['primitives']['removeAll'](),this[_0x2c9844(0x248,0x2b0)][_0x44e351(-0x1c0,-0x1cf)]['primitives']['remove'](this['primitives']);}['resize'](){function _0x172d94(_0x27110c,_0x2985bc){return _0x3cd0b4(_0x2985bc,_0x27110c- -0x16);}if(!this['show']||!this['particleSystem'])return;function _0x40f4a4(_0x49c59d,_0x241884){return _0x1660f5(_0x49c59d,_0x241884- -0x50d);}this[_0x40f4a4(-0x20d,-0x178)][_0x172d94(-0x13f,-0x152)]=![],this['primitives'][_0x172d94(-0x1e7,-0x161)](),this['_map']['once'](mars3d__namespace[_0x40f4a4(-0x195,-0x1e0)]['preRender'],this['_onMap_preRenderEvent'],this);}[_0x3cd0b4(-0x177,-0x16c)](_0x1396c0){this[_0x9df0e4(0x25b,0x1e7)]['canvasResize'](this['scene']['context']),this['addPrimitives']();function _0x9df0e4(_0x2a78ec,_0xd3f7cf){return _0x1660f5(_0xd3f7cf,_0x2a78ec- -0x18c);}function _0xe37669(_0x27ec0d,_0x52c510){return _0x1660f5(_0x52c510,_0x27ec0d- -0x38b);}this[_0x9df0e4(0x209,0x1ea)]['show']=!![];}['_onMapWhellEvent'](_0x45fda8){clearTimeout(this[_0x41e32c(-0x70,0x25)]);function _0x41e32c(_0x409d8c,_0x274ecb){return _0x3cd0b4(_0x409d8c,_0x274ecb-0x132);}if(!this['show']||!this[_0x41e32c(0xdd,0x59)])return;function _0x17d451(_0x22cd49,_0x1d633c){return _0x3cd0b4(_0x1d633c,_0x22cd49-0x566);}this[_0x41e32c(0x29,0x7)][_0x17d451(0x43d,0x458)]=![],this[_0x41e32c(0x36,0x25)]=setTimeout(()=>{function _0x384a27(_0x4f15da,_0x1a3bc9){return _0x41e32c(_0x1a3bc9,_0x4f15da-0x1ae);}function _0x4f0021(_0x4bd50e,_0x34dcf3){return _0x41e32c(_0x4bd50e,_0x34dcf3-0x192);}if(!this[_0x384a27(0x1b7,0x12e)])return;this[_0x4f0021(0x18a,0x1aa)]();},0xc8);}[_0x1660f5(0x3d9,0x369)](_0x38de8c){this['mouse_down']=!![];}['_onMouseMoveEvent'](_0x37fcdb){function _0x3177ff(_0x4eb5e3,_0x1597f6){return _0x3cd0b4(_0x4eb5e3,_0x1597f6-0x591);}if(!this['show']||!this[_0x3177ff(0x43d,0x4b8)])return;function _0x524883(_0x3c928b,_0x2d3494){return _0x3cd0b4(_0x2d3494,_0x3c928b-0x187);}this[_0x524883(-0x1b,-0x18)]&&(this[_0x3177ff(0x478,0x466)]['show']=![],this['mouse_move']=!![]);}[_0x1660f5(0x327,0x39f)](_0x397d59){if(!this[_0x5be9c7(0x2dc,0x347)]||!this['particleSystem'])return;this['mouse_down']&&this['mouse_move']&&this[_0x55f6b0(0x131,0x193)]();this['primitives']['show']=!![];function _0x55f6b0(_0x238565,_0x1d3e20){return _0x3cd0b4(_0x1d3e20,_0x238565-0x24b);}this[_0x5be9c7(0x263,0x26b)]=![];function _0x5be9c7(_0x55ccfe,_0x5f195c){return _0x1660f5(_0x5f195c,_0x55ccfe- -0xbb);}this['mouse_move']=![];}['redraw'](){function _0x491906(_0x3f4c34,_0x2d82fa){return _0x1660f5(_0x2d82fa,_0x3f4c34- -0x39a);}if(!this['_map']||!this['show'])return;this['updateViewerParameters'](),this['particleSystem']['applyViewerParameters'](this['viewerParameters']),this['primitives'][_0x491906(-0x3,0xe)]=!![];}[_0x3cd0b4(-0xb2,-0x10a)](_0x150cb2){this[_0x1a42fc(0x467,0x414)]=_0x150cb2;function _0x1a42fc(_0x188731,_0x301ca7){return _0x3cd0b4(_0x188731,_0x301ca7-0x5dc);}this['particleSystem']&&this['particleSystem'][_0x3388aa(0x353,0x3d9)]();this['particleSystem']=new ParticleSystem(this['scene'][_0x3388aa(0x2e5,0x361)],_0x150cb2,this['getOptions'](),this[_0x1a42fc(0x432,0x4b2)]);function _0x3388aa(_0x4a1fc6,_0x9afd10){return _0x3cd0b4(_0x9afd10,_0x4a1fc6-0x45f);}this['addPrimitives']();}['_setOptionsHook'](_0x5571c8,_0x34b36d){function _0x5a8c0f(_0x5d153b,_0x11b810){return _0x3cd0b4(_0x5d153b,_0x11b810- -0xc9);}if(_0x5571c8)for(const _0x1793c5 in _0x5571c8){this[_0x1793c5]=_0x5571c8[_0x1793c5];}this['particleSystem']&&this[_0x5a8c0f(-0x175,-0x1a2)]['setOptions'](this['getOptions']());}['getOptions'](){const _0xbaeb2c=Math['ceil'](Math['sqrt'](this[_0x213a8f(-0x147,-0x110)]));this[_0x4a524e(0x13,-0x1c)]=_0xbaeb2c*_0xbaeb2c;const _0x3f74c9={};_0x3f74c9['particlesTextureSize']=_0xbaeb2c,_0x3f74c9[_0x213a8f(-0xf8,-0xe5)]=this['particlesNumber'],_0x3f74c9['colors']=this['colors'],_0x3f74c9['particleHeight']=this['fixedHeight'],_0x3f74c9['fadeOpacity']=this[_0x4a524e(0x7,-0x1)],_0x3f74c9[_0x4a524e(-0xa3,-0xed)]=this['dropRate'],_0x3f74c9[_0x213a8f(-0x160,-0x178)]=this[_0x213a8f(-0x160,-0x163)],_0x3f74c9[_0x213a8f(-0x150,-0x1b5)]=this['speedFactor'],_0x3f74c9['lineWidth']=this['lineWidth'];function _0x4a524e(_0x3a011d,_0x16bcca){return _0x3cd0b4(_0x16bcca,_0x3a011d-0x118);}_0x3f74c9[_0x213a8f(-0x12d,-0xc2)]=this['dynamic'];function _0x213a8f(_0x41a789,_0x859b7a){return _0x1660f5(_0x859b7a,_0x41a789- -0x502);}return _0x3f74c9;}[_0x3cd0b4(-0x110,-0x194)](){this['primitives'][_0x48cfa2(0x300,0x33b)](this['particleSystem']['particlesComputing']['primitives']['calculateSpeed']),this[_0x516aa5(0x50a,0x4ce)]['add'](this['particleSystem']['particlesComputing'][_0x48cfa2(0x2ee,0x34f)]['updatePosition']),this['primitives'][_0x516aa5(0x50a,0x4ba)](this['particleSystem']['particlesComputing'][_0x516aa5(0x49c,0x4ce)][_0x516aa5(0x43b,0x458)]),this['primitives'][_0x48cfa2(0x38d,0x33b)](this['particleSystem']['particlesRendering'][_0x48cfa2(0x314,0x34f)]['segments']);function _0x48cfa2(_0x51d6c5,_0x19b153){return _0x3cd0b4(_0x51d6c5,_0x19b153-0x47a);}function _0x516aa5(_0x1b3f64,_0x5e1e68){return _0x1660f5(_0x1b3f64,_0x5e1e68-0x139);}this[_0x516aa5(0x4cb,0x4ce)][_0x48cfa2(0x2b5,0x33b)](this['particleSystem']['particlesRendering']['primitives']['trails']),this['primitives'][_0x48cfa2(0x343,0x33b)](this['particleSystem'][_0x48cfa2(0x260,0x2bd)]['primitives'][_0x48cfa2(0x2ff,0x32b)]);}[_0x3cd0b4(-0xe1,-0x109)](){let _0x52fadf=this['camera']['computeViewRectangle'](this[_0x5779bd(-0x211,-0x200)][_0x5f4afe(0x2c3,0x24e)]['ellipsoid']);if(!_0x52fadf){const _0x2a25a8=this['_map'][_0x5f4afe(0x2c2,0x265)]();_0x52fadf=Cesium$1[_0x5f4afe(0x1d3,0x1fc)]['fromDegrees'](_0x2a25a8['xmin'],_0x2a25a8[_0x5779bd(-0x170,-0x1c6)],_0x2a25a8['xmax'],_0x2a25a8['ymax']);}function _0x5f4afe(_0x43b3a7,_0x4138d5){return _0x3cd0b4(_0x43b3a7,_0x4138d5-0x380);}const _0x54d170=Util[_0x5779bd(-0x147,-0x13d)](_0x52fadf);this['_data']?(this['viewerParameters']['lonRange']['x']=Math[_0x5f4afe(0x202,0x1e0)](_0x54d170['lon']['min'],this[_0x5f4afe(0x22b,0x1b8)]['xmin']),this['viewerParameters'][_0x5779bd(-0x149,-0x1cb)]['y']=Math[_0x5779bd(-0x11e,-0x1a4)](_0x54d170['lon']['max'],this[_0x5f4afe(0x20c,0x1b8)]['xmax']),this[_0x5779bd(-0x18f,-0x175)][_0x5f4afe(0x237,0x21b)]['x']=Math['max'](_0x54d170[_0x5779bd(-0x1bc,-0x1b1)]['min'],this['_data']['ymin']),this['viewerParameters']['latRange']['y']=Math['min'](_0x54d170['lat'][_0x5f4afe(0x1a9,0x1e0)],this[_0x5f4afe(0x215,0x1b8)]['ymax'])):(this['viewerParameters'][_0x5779bd(-0x244,-0x1cb)]['x']=_0x54d170['lon']['min'],this[_0x5f4afe(0x201,0x256)][_0x5f4afe(0x249,0x200)]['y']=_0x54d170['lon'][_0x5779bd(-0x19c,-0x1eb)],this[_0x5779bd(-0x169,-0x175)]['latRange']['x']=_0x54d170['lat']['min'],this['viewerParameters']['latRange']['y']=_0x54d170['lat']['max']);function _0x5779bd(_0x465399,_0x356404){return _0x1660f5(_0x465399,_0x356404- -0x50b);}let _0x513a3a=this['camera']['getPixelSize'](this['globeBoundingSphere'],this[_0x5779bd(-0x20f,-0x200)][_0x5779bd(-0x1a9,-0x19c)],this[_0x5f4afe(0x24a,0x1cb)]['drawingBufferHeight']);const _0x582bbf=this['scene']['drawingBufferHeight']*0.3;_0x513a3a<_0x582bbf&&(_0x513a3a=_0x582bbf),this['viewerParameters'][_0x5779bd(-0x15b,-0x16b)]=_0x513a3a;}}mars3d__namespace['LayerUtil'][_0x1660f5(0x3af,0x411)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this[_0xdfad51(0x2fd,0x26c)]=null,this[_0x267301(-0xd4,-0xd9)]=null,this['tlng']=null;function _0xdfad51(_0x2eff83,_0x4e338a){return _0x3cd0b4(_0x4e338a,_0x2eff83-0x42c);}this[_0x267301(-0x167,-0x10a)]=null;function _0x267301(_0x266330,_0x179926){return _0x1660f5(_0x266330,_0x179926- -0x433);}this[_0xdfad51(0x2f4,0x32f)]=null,this['speed']=null;}[_0x3cd0b4(-0x11e,-0x10c)](){for(const _0x281949 in this){delete this[_0x281949];}}}class CanvasWindField{constructor(_0x2306a9){function _0x302927(_0xddb2cd,_0x268c11){return _0x1660f5(_0x268c11,_0xddb2cd- -0x226);}this[_0x302927(0x10d,0xdf)](_0x2306a9);}get[_0x3cd0b4(-0x1ae,-0x14c)](){return this['_speedRate'];}set[_0x3cd0b4(-0x163,-0x14c)](_0x49ec38){this['_speedRate']=(0x64-(_0x49ec38>0x63?0x63:_0x49ec38))*0x64;function _0x13b0f7(_0x5d168f,_0x2c96b4){return _0x1660f5(_0x5d168f,_0x2c96b4- -0x2b5);}function _0x18caed(_0x1dcb77,_0x5e101b){return _0x1660f5(_0x5e101b,_0x1dcb77- -0x36c);}this['_calc_speedRate']=[(this['xmax']-this[_0x13b0f7(0xf0,0x117)])/this[_0x13b0f7(-0x2c,0x54)],(this['ymax']-this[_0x13b0f7(0xb3,0x90)])/this['_speedRate']];}get['maxAge'](){return this['_maxAge'];}set['maxAge'](_0x102498){this['_maxAge']=_0x102498;}['setOptions'](_0x2753d6){this['options']=_0x2753d6,this['maxAge']=_0x2753d6['maxAge']||0x78,this[_0x2759c4(0xde,0x11a)]=_0x2753d6['speedRate']||0x32;function _0x35a29f(_0x3bcf34,_0x3daafc){return _0x1660f5(_0x3daafc,_0x3bcf34- -0x3b5);}function _0x2759c4(_0x5366a4,_0x3ca786){return _0x3cd0b4(_0x3ca786,_0x5366a4-0x22a);}this['particles']=[];const _0x5c13ee=_0x2753d6['particlesNumber']||0x1000;for(let _0xc99e22=0x0;_0xc99e22<_0x5c13ee;_0xc99e22++){const _0x5bd4e2=this['_randomParticle'](new CanvasParticle());this['particles'][_0x2759c4(0xb2,0x36)](_0x5bd4e2);}}['setDate'](_0x1f4337){this['rows']=_0x1f4337['rows'],this['cols']=_0x1f4337['cols'],this[_0x5515ab(0x24c,0x261)]=_0x1f4337['xmin'];function _0x5515ab(_0xb9c8df,_0x20dcf0){return _0x3cd0b4(_0xb9c8df,_0x20dcf0-0x355);}this['xmax']=_0x1f4337['xmax'];function _0x2c7055(_0x43da3c,_0x1cf7cc){return _0x1660f5(_0x43da3c,_0x1cf7cc- -0x39b);}this[_0x5515ab(0x1f4,0x1da)]=_0x1f4337[_0x5515ab(0x24a,0x1da)],this['ymax']=_0x1f4337[_0x5515ab(0x1d5,0x20a)],this['grid']=[];const _0x4290d9=_0x1f4337['udata'],_0x2887cf=_0x1f4337['vdata'];let _0x4b7051=![];_0x4290d9['length']===this['rows']&&_0x4290d9[0x0][_0x5515ab(0x214,0x290)]===this[_0x2c7055(-0x2d,-0x2e)]&&(_0x4b7051=!![]);let _0x26c317=0x0,_0x4b5032=null,_0x47b4ce=null;for(let _0x3a4763=0x0;_0x3a4763<this[_0x5515ab(0x122,0x1a1)];_0x3a4763++){_0x4b5032=[];for(let _0x46f6dd=0x0;_0x46f6dd<this['cols'];_0x46f6dd++,_0x26c317++){_0x4b7051?_0x47b4ce=this['_calcUV'](_0x4290d9[_0x3a4763][_0x46f6dd],_0x2887cf[_0x3a4763][_0x46f6dd]):_0x47b4ce=this[_0x5515ab(0x1d5,0x1ab)](_0x4290d9[_0x26c317],_0x2887cf[_0x26c317]),_0x4b5032['push'](_0x47b4ce);}this[_0x5515ab(0x2e7,0x2a9)]['push'](_0x4b5032);}this[_0x2c7055(0x4d,0x5a)]['reverseY']&&this[_0x2c7055(0x23,0x79)]['reverse']();}['clear'](){delete this['rows'];function _0x196af3(_0x4d3778,_0x4db196){return _0x1660f5(_0x4d3778,_0x4db196- -0x330);}function _0x2a0b38(_0x5104b6,_0x41522a){return _0x1660f5(_0x5104b6,_0x41522a-0x42);}delete this[_0x2a0b38(0x3ad,0x3af)],delete this[_0x196af3(0x50,0x9c)],delete this['xmax'],delete this[_0x2a0b38(0x407,0x387)],delete this['ymax'],delete this['grid'],delete this[_0x196af3(0xa,0x1e)];}['toGridXY'](_0x2c0411,_0x45fe3c){const _0x584c04=(_0x2c0411-this[_0x413740(0x2bf,0x25c)])/(this[_0x413740(0x24a,0x255)]-this['xmin'])*(this['cols']-0x1),_0x30f8d9=(this[_0x151cfa(-0x26,0x6d)]-_0x45fe3c)/(this[_0x413740(0x268,0x229)]-this['ymin'])*(this[_0x151cfa(-0x8f,-0xe5)]-0x1);function _0x413740(_0x10862f,_0x5dc3cd){return _0x3cd0b4(_0x5dc3cd,_0x10862f-0x3b3);}function _0x151cfa(_0x220dea,_0x281809){return _0x3cd0b4(_0x281809,_0x220dea-0x125);}return[_0x584c04,_0x30f8d9];}[_0x1660f5(0x28c,0x307)](_0xc18adc,_0x41aac1){if(_0xc18adc<0x0||_0xc18adc>=this[_0x1dd549(0x278,0x28b)]||_0x41aac1>=this['rows'])return[0x0,0x0,0x0];function _0x4af047(_0x212894,_0x4f6c56){return _0x1660f5(_0x4f6c56,_0x212894- -0x47);}const _0x324c9d=Math[_0x1dd549(0x256,0x258)](_0xc18adc),_0x296b27=Math['floor'](_0x41aac1);if(_0x324c9d===_0xc18adc&&_0x296b27===_0x41aac1)return this['grid'][_0x41aac1][_0xc18adc];const _0x162340=_0x324c9d+0x1,_0x22e586=_0x296b27+0x1,_0x54b555=this['getUVByXY'](_0x324c9d,_0x296b27);function _0x1dd549(_0x18651c,_0x4f1f2b){return _0x1660f5(_0x18651c,_0x4f1f2b- -0xe2);}const _0x3618fb=this['getUVByXY'](_0x162340,_0x296b27),_0x40b1c5=this[_0x4af047(0x2c0,0x259)](_0x324c9d,_0x22e586),_0x4c1a17=this[_0x1dd549(0x2b1,0x225)](_0x162340,_0x22e586);let _0x111e11=null;try{_0x111e11=this['_bilinearInterpolation'](_0xc18adc-_0x324c9d,_0x41aac1-_0x296b27,_0x54b555,_0x3618fb,_0x40b1c5,_0x4c1a17);}catch(_0x1c2ca2){console[_0x4af047(0x362,0x31f)](_0xc18adc,_0x41aac1);}return _0x111e11;}[_0x3cd0b4(-0x1d1,-0x199)](_0x124ab2,_0x149a8e,_0x2b82d7,_0x3b26d3,_0xefb955,_0x368c7f){const _0x22870d=0x1-_0x124ab2,_0x1780a2=0x1-_0x149a8e,_0x4ea9a7=_0x22870d*_0x1780a2,_0x3de12c=_0x124ab2*_0x1780a2,_0x411deb=_0x22870d*_0x149a8e;function _0x5b984d(_0x12c371,_0x1d0cfd){return _0x3cd0b4(_0x1d0cfd,_0x12c371-0x21);}const _0x1a26f3=_0x124ab2*_0x149a8e,_0x14fdd6=_0x2b82d7[0x0]*_0x4ea9a7+_0x3b26d3[0x0]*_0x3de12c+_0xefb955[0x0]*_0x411deb+_0x368c7f[0x0]*_0x1a26f3,_0x1a4d7c=_0x2b82d7[0x1]*_0x4ea9a7+_0x3b26d3[0x1]*_0x3de12c+_0xefb955[0x1]*_0x411deb+_0x368c7f[0x1]*_0x1a26f3;return this[_0x5b984d(-0x189,-0x198)](_0x14fdd6,_0x1a4d7c);}[_0x3cd0b4(-0x155,-0x1aa)](_0x26eb20,_0x5361e8){return[+_0x26eb20,+_0x5361e8,Math['sqrt'](_0x26eb20*_0x26eb20+_0x5361e8*_0x5361e8)];}[_0x1660f5(0x306,0x2f6)](_0x1ce2c9,_0x28717c){if(!this['isInExtent'](_0x1ce2c9,_0x28717c))return null;const _0x14e43a=this[_0x4dc50a(0x35,0x45)](_0x1ce2c9,_0x28717c);function _0x4dc50a(_0x1e1e91,_0x29564d){return _0x1660f5(_0x1e1e91,_0x29564d- -0x3c3);}function _0xf02975(_0x36f519,_0x103e32){return _0x1660f5(_0x103e32,_0x36f519- -0x224);}const _0x310524=this[_0x4dc50a(-0xb2,-0xbc)](_0x14e43a[0x0],_0x14e43a[0x1]);return _0x310524;}['isInExtent'](_0x2bf1ca,_0x4fd7f9){function _0x393e71(_0x21f23c,_0x1b59e0){return _0x1660f5(_0x21f23c,_0x1b59e0- -0x34d);}return _0x2bf1ca>=this['xmin']&&_0x2bf1ca<=this['xmax']&&_0x4fd7f9>=this['ymin']&&_0x4fd7f9<=this[_0x393e71(0x94,0x28)]?!![]:![];}['getRandomLatLng'](){const _0x3c7e33=fRandomByfloat(this['xmin'],this[_0xae9868(0x307,0x368)]),_0x1df8f1=fRandomByfloat(this[_0xae9868(0x3b9,0x356)],this[_0xae9868(0x3fc,0x386)]);function _0xae9868(_0x168525,_0x294379){return _0x1660f5(_0x168525,_0x294379-0x11);}const _0x2269bd={};_0x2269bd[_0xae9868(0x2fc,0x36b)]=_0x1df8f1;function _0xfb802b(_0x514415,_0xf97da6){return _0x3cd0b4(_0xf97da6,_0x514415-0x0);}return _0x2269bd['lng']=_0x3c7e33,_0x2269bd;}[_0x3cd0b4(-0xe3,-0xa9)](){function _0x5bb6cb(_0x140455,_0x19d573){return _0x1660f5(_0x140455,_0x19d573- -0x3da);}let _0x28f565,_0x2d5320,_0x2f1fdb;for(let _0x9b7db7=0x0,_0x3b3c3e=this[_0x5bb6cb(-0xa6,-0x8c)]['length'];_0x9b7db7<_0x3b3c3e;_0x9b7db7++){let _0x2b4a5a=this[_0x5bb6cb(-0x64,-0x8c)][_0x9b7db7];_0x2b4a5a['age']<=0x0&&(_0x2b4a5a=this['_randomParticle'](_0x2b4a5a));if(_0x2b4a5a[_0x5bb6cb(-0x65,-0x52)]>0x0){const _0x558eed=_0x2b4a5a[_0x5bb6cb(-0xa0,-0xdd)],_0x19e274=_0x2b4a5a[_0x1884a5(0x36f,0x2e5)];_0x2f1fdb=this[_0x1884a5(0x33c,0x33e)](_0x558eed,_0x19e274),_0x2f1fdb?(_0x28f565=_0x558eed+this[_0x1884a5(0x383,0x336)][0x0]*_0x2f1fdb[0x0],_0x2d5320=_0x19e274+this['_calc_speedRate'][0x1]*_0x2f1fdb[0x1],_0x2b4a5a[_0x5bb6cb(-0xc8,-0x49)]=_0x558eed,_0x2b4a5a['lat']=_0x19e274,_0x2b4a5a['tlng']=_0x28f565,_0x2b4a5a[_0x5bb6cb(-0xb4,-0xb1)]=_0x2d5320,_0x2b4a5a['speed']=_0x2f1fdb[0x2],_0x2b4a5a[_0x1884a5(0x3ce,0x41e)]--):_0x2b4a5a[_0x1884a5(0x3ce,0x372)]=0x0;}}function _0x1884a5(_0x3d1409,_0x11cabf){return _0x1660f5(_0x11cabf,_0x3d1409-0x46);}return this[_0x1884a5(0x394,0x33c)];}['_randomParticle'](_0x480b20){let _0x39cfb7,_0x4b2ecd;for(let _0x22c95e=0x0;_0x22c95e<0x1e;_0x22c95e++){_0x39cfb7=this['getRandomLatLng'](),_0x4b2ecd=this[_0x25566d(-0x178,-0x19f)](_0x39cfb7['lng'],_0x39cfb7['lat']);if(_0x4b2ecd&&_0x4b2ecd[0x2]>0x0)break;}function _0x25566d(_0x383abc,_0x531efe){return _0x1660f5(_0x531efe,_0x383abc- -0x46e);}if(!_0x4b2ecd)return _0x480b20;function _0x4fa82a(_0x32d417,_0x2d2581){return _0x3cd0b4(_0x32d417,_0x2d2581-0x268);}const _0x185181=_0x39cfb7['lng']+this['_calc_speedRate'][0x0]*_0x4b2ecd[0x0],_0x2b42e5=_0x39cfb7[_0x25566d(-0x114,-0xca)]+this[_0x4fa82a(0xad,0xe5)][0x1]*_0x4b2ecd[0x1];return _0x480b20['lng']=_0x39cfb7['lng'],_0x480b20['lat']=_0x39cfb7['lat'],_0x480b20[_0x25566d(-0x171,-0x10b)]=_0x185181,_0x480b20['tlat']=_0x2b42e5,_0x480b20[_0x25566d(-0xe6,-0xdf)]=Math['round'](Math['random']()*this[_0x25566d(-0x5b,-0xe3)]),_0x480b20['speed']=_0x4b2ecd[0x2],_0x480b20;}['destroy'](){for(const _0x5a0eb6 in this){delete this[_0x5a0eb6];}}}function fRandomByfloat(_0x509c00,_0x18e67a){return _0x509c00+Math['random']()*(_0x18e67a-_0x509c00);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x34fcc3={}){super(_0x34fcc3),this[_0x41deac(0x265,0x25b)](_0x34fcc3),this['canvas']=null;function _0x5c0781(_0x12d968,_0xd5e611){return _0x3cd0b4(_0xd5e611,_0x12d968-0x5aa);}function _0x41deac(_0x3413bc,_0xca4bd2){return _0x1660f5(_0xca4bd2,_0x3413bc- -0x9d);}_0x34fcc3['colors']&&_0x34fcc3[_0x41deac(0x365,0x39c)]&&(this['_colorRamp']=new mars3d__namespace[(_0x5c0781(0x4bb,0x54b))](_0x34fcc3));}[_0x1660f5(0x31c,0x302)](_0x4ed98d,_0x3860db){this['frameTime']=0x3e8/(_0x4ed98d[_0x44bfaf(0x530,0x56d)]||0xa),this['_pointerEvents']=this[_0x44bfaf(0x575,0x5fa)]['pointerEvents']??![];function _0x2339bf(_0x4e017b,_0x198cf5){return _0x1660f5(_0x4e017b,_0x198cf5- -0x39);}this[_0x44bfaf(0x540,0x4f7)]=_0x4ed98d['color']||'#ffffff',this['lineWidth']=_0x4ed98d[_0x44bfaf(0x577,0x598)]||0x1;function _0x44bfaf(_0x3751df,_0x21f780){return _0x3cd0b4(_0x3751df,_0x21f780-0x6c5);}this['fixedHeight']=_0x4ed98d[_0x44bfaf(0x580,0x577)]??0x0,this[_0x44bfaf(0x521,0x580)]=_0x4ed98d['reverseY']??![],this['windField']&&this['windField']['setOptions'](_0x4ed98d);}get['layer'](){return this['canvas'];}get[_0x1660f5(0x3b9,0x347)](){function _0x50a84a(_0x31d015,_0x52df85){return _0x1660f5(_0x52df85,_0x31d015- -0x33f);}return this['_map']['scene'][_0x50a84a(0x3,-0x4e)]['clientWidth'];}get[_0x1660f5(0x2b5,0x339)](){function _0x326480(_0x73a8ee,_0x41427f){return _0x3cd0b4(_0x73a8ee,_0x41427f-0x3a4);}function _0x38b90d(_0x2578f3,_0x1ec92c){return _0x3cd0b4(_0x1ec92c,_0x2578f3-0x526);}return this['_map'][_0x326480(0x1f2,0x1ef)][_0x38b90d(0x3a8,0x32f)]['clientHeight'];}get['pointerEvents'](){function _0x4ddd01(_0x10b222,_0x27bd1e){return _0x1660f5(_0x27bd1e,_0x10b222- -0x2c8);}return this[_0x4ddd01(0x147,0x1ae)];}set[_0x1660f5(0x35a,0x324)](_0xc7a4d2){this['_pointerEvents']=_0xc7a4d2;function _0x8263bf(_0x3ae76b,_0x225160){return _0x1660f5(_0x225160,_0x3ae76b- -0x430);}if(!this['canvas'])return;function _0x35cabc(_0x161433,_0x2d8840){return _0x3cd0b4(_0x161433,_0x2d8840-0x17d);}_0xc7a4d2?this[_0x35cabc(-0x9,-0x1)]['style'][_0x8263bf(-0x3f,-0x30)]=_0x35cabc(-0x2c,-0x4a):this['canvas']['style']['pointer-events']='none';}get['particlesNumber'](){function _0x36d20a(_0x586fa7,_0x950a93){return _0x1660f5(_0x950a93,_0x586fa7- -0x119);}return this[_0x36d20a(0x2dc,0x312)]['particlesNumber'];}set['particlesNumber'](_0x3d8243){function _0x2ce21c(_0xfd3fe5,_0x415818){return _0x3cd0b4(_0x415818,_0xfd3fe5-0x1db);}this[_0x2ce21c(0x110,0xb1)]['particlesNumber']=_0x3d8243,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{function _0x267c11(_0x459dba,_0x59771e){return _0x2ce21c(_0x459dba- -0xc8,_0x59771e);}this[_0x267c11(-0x7,-0x3a)]();},0x1f4);}get['speedRate'](){function _0x4593c5(_0x36c03a,_0x402c0e){return _0x3cd0b4(_0x402c0e,_0x36c03a-0x622);}return this[_0x4593c5(0x557,0x55c)]['speedRate'];}set[_0x1660f5(0x3ee,0x374)](_0x511278){function _0x53dd1f(_0x19fad4,_0xe12e9){return _0x1660f5(_0x19fad4,_0xe12e9- -0x599);}this[_0x53dd1f(-0x20c,-0x1a4)]['speedRate']=_0x511278;function _0x322f8b(_0x1a6483,_0x9f6f8){return _0x1660f5(_0x9f6f8,_0x1a6483- -0x190);}this[_0x53dd1f(-0x231,-0x261)]&&(this['windField']['speedRate']=_0x511278);}get[_0x3cd0b4(-0xbe,-0xad)](){return this['options']['maxAge'];}set['maxAge'](_0x5c0e8c){function _0x5d5e2e(_0x2cc3e7,_0x47852e){return _0x1660f5(_0x2cc3e7,_0x47852e- -0x257);}this[_0x28e9f2(0x4a1,0x49d)][_0x5d5e2e(0x203,0x1bc)]=_0x5c0e8c;function _0x28e9f2(_0x5a2850,_0x2bf28b){return _0x3cd0b4(_0x2bf28b,_0x5a2850-0x56c);}this[_0x28e9f2(0x3e4,0x3e7)]&&(this[_0x28e9f2(0x3e4,0x449)]['maxAge']=_0x5c0e8c);}get['data'](){return this['windData'];}set[_0x3cd0b4(-0x151,-0x162)](_0x2a3222){function _0x4b3c44(_0x11d155,_0x469240){return _0x1660f5(_0x469240,_0x11d155- -0x3e6);}this[_0x4b3c44(-0x30,0x18)](_0x2a3222);}get[_0x1660f5(0x433,0x3c9)](){let _0x1ff4f5=this['windData'][_0x3fa6a(-0x3c,-0x4)],_0x47881f=this[_0x3fa6a(0x6d,0x22)]['xmax'],_0x16a69e=this['windData'][_0x3fa6a(-0x11d,-0x8b)],_0x507a2f=this['windData']['ymax'];_0x47881f>=0x167&&_0x1ff4f5===0x0&&(_0x1ff4f5=-0xb4,_0x47881f=0xb4);_0x1ff4f5=Math['max'](_0x1ff4f5,-0xb4);function _0x3fa6a(_0x5042eb,_0x14f596){return _0x3cd0b4(_0x5042eb,_0x14f596-0xf0);}_0x47881f=Math['min'](_0x47881f,0xb4);function _0x414fce(_0x14797d,_0x41b38b){return _0x3cd0b4(_0x41b38b,_0x14797d-0x52e);}return _0x16a69e=Math['max'](_0x16a69e,-0x5a),_0x507a2f=Math['min'](_0x507a2f,0x5a),Cesium['Rectangle'][_0x414fce(0x35b,0x2cc)](_0x1ff4f5,_0x16a69e,_0x47881f,_0x507a2f);}['_showHook'](_0x451c02){function _0x38531b(_0x28ea5f,_0x368aa7){return _0x1660f5(_0x28ea5f,_0x368aa7- -0x11a);}function _0x949551(_0x44b0b0,_0x2ec0e7){return _0x1660f5(_0x44b0b0,_0x2ec0e7- -0x484);}_0x451c02?this['_addedHook']():(this[_0x38531b(0x2d4,0x2d8)]&&(this[_0x38531b(0x347,0x2db)]['data']=this[_0x949551(-0x4b,-0x92)]),this['_removedHook']());}[_0x3cd0b4(-0x14e,-0x1b6)](){function _0x11b979(_0x434d62,_0x17318c){return _0x3cd0b4(_0x17318c,_0x434d62- -0x31);}function _0x499695(_0x4d832e,_0xd5f50d){return _0x3cd0b4(_0xd5f50d,_0x4d832e-0x55a);}this[_0x499695(0x48f,0x4f5)][_0x11b979(-0x1a5,-0x21a)]?this['initWorker']():this[_0x11b979(-0x1b9,-0x241)]=new CanvasWindField(this['options']);}['_addedHook'](){this[_0x26a663(-0x1d5,-0x20f)]=this[_0x26dd73(0x515,0x522)]();const _0x28e518={};function _0x26a663(_0x29e4e3,_0x1b5fb7){return _0x3cd0b4(_0x29e4e3,_0x1b5fb7- -0x91);}_0x28e518[_0x26a663(-0x25b,-0x1ec)]=!![],this[_0x26a663(-0x27a,-0x243)]=this['canvas']['getContext']('2d',_0x28e518);function _0x26dd73(_0x363aab,_0x5a3d22){return _0x3cd0b4(_0x5a3d22,_0x363aab-0x5db);}this['bindEvent'](),this[_0x26dd73(0x510,0x585)]['data']&&this[_0x26dd73(0x4d1,0x44b)](this[_0x26a663(-0xed,-0x15c)]['data']);}['_removedHook'](){function _0x50c3c3(_0x422046,_0x1a2b9d){return _0x1660f5(_0x1a2b9d,_0x422046- -0x2da);}function _0x568119(_0x7d9b6e,_0xc59f56){return _0x3cd0b4(_0x7d9b6e,_0xc59f56-0x2fb);}this['clear'](),this[_0x568119(0x281,0x219)](),this['canvas']&&(this[_0x568119(0xc5,0x130)]['container']['removeChild'](this['canvas']),delete this[_0x50c3c3(0x68,0x27)]);}['_createCanvas'](){const _0x3eaf7d=mars3d__namespace['DomUtil']['create'](_0x295a28(0x4eb,0x4aa),_0x295a28(0x54c,0x514),this['_map'][_0x295a28(0x5aa,0x515)]);function _0x55b218(_0x287c80,_0x59a66c){return _0x1660f5(_0x287c80,_0x59a66c- -0xcf);}_0x3eaf7d[_0x55b218(0x2f8,0x26f)][_0x295a28(0x551,0x5b8)]='absolute',_0x3eaf7d['style']['top']='0px',_0x3eaf7d[_0x55b218(0x1ec,0x26f)][_0x295a28(0x556,0x5e3)]='0px',_0x3eaf7d[_0x55b218(0x2fe,0x26f)]['width']=this['_map'][_0x295a28(0x4b4,0x4da)]['canvas']['clientWidth']+'px';function _0x295a28(_0x27fc75,_0x42d05d){return _0x1660f5(_0x42d05d,_0x27fc75-0x1a9);}return _0x3eaf7d['style']['height']=this['_map'][_0x55b218(0x26c,0x23c)]['canvas'][_0x295a28(0x497,0x48a)]+'px',_0x3eaf7d['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x3eaf7d['style']['zIndex']=this['options']['zIndex']??0x9,_0x3eaf7d['width']=this['_map']['scene'][_0x55b218(0x24b,0x273)][_0x55b218(0x2f9,0x313)],_0x3eaf7d[_0x295a28(0x515,0x503)]=this[_0x55b218(0x253,0x226)][_0x55b218(0x201,0x23c)]['canvas']['clientHeight'],_0x3eaf7d;}['resize'](){function _0x343b24(_0x22c9f9,_0x5492e9){return _0x1660f5(_0x5492e9,_0x22c9f9- -0x15a);}function _0xb40f52(_0xafbe31,_0x326e68){return _0x1660f5(_0x326e68,_0xafbe31- -0x1b5);}this['canvas']&&(this['canvas']['style'][_0x343b24(0x2b4,0x2f6)]=this['_map']['scene']['canvas']['clientWidth']+'px',this['canvas']['style'][_0xb40f52(0x1b7,0x23d)]=this[_0xb40f52(0x140,0x130)][_0x343b24(0x1b1,0x1bd)]['canvas']['clientHeight']+'px',this[_0x343b24(0x1e8,0x15c)]['width']=this['_map']['scene']['canvas']['clientWidth'],this[_0x343b24(0x1e8,0x166)]['height']=this[_0x343b24(0x19b,0x192)][_0x343b24(0x1b1,0x167)][_0x343b24(0x1e8,0x1c2)][_0xb40f52(0x139,0x181)]);}['bindEvent'](){const _0x5c3df4=this;function _0x7656bc(_0x5efa6b,_0x48e258){return _0x1660f5(_0x48e258,_0x5efa6b-0x1df);}let _0x3c719e=Date['now']();(function _0x3df93c(){function _0x2f21c4(_0x4a1c38,_0x475d42){return _0x1e73(_0x475d42-0x1bb,_0x4a1c38);}if(_0x5c3df4[_0x2f21c4(0x3d7,0x39b)])return;function _0x24b073(_0x3d95ac,_0x2cb5ce){return _0x1e73(_0x2cb5ce- -0xc4,_0x3d95ac);}_0x5c3df4['_animateFrame']=window['requestAnimationFrame'](_0x3df93c);if(_0x5c3df4['show']&&_0x5c3df4[_0x24b073(0xeb,0x9c)]){const _0x412b43=Date[_0x24b073(0x197,0x157)](),_0x195cc7=_0x412b43-_0x3c719e;_0x195cc7>_0x5c3df4['frameTime']&&(_0x3c719e=_0x412b43-_0x195cc7%_0x5c3df4['frameTime'],_0x5c3df4['update']());}}(),window['addEventListener'](_0x7656bc(0x53e,0x58a),this[_0x564d06(-0x162,-0xcd)]['bind'](this),![]));function _0x564d06(_0x5d632c,_0x163b8d){return _0x3cd0b4(_0x163b8d,_0x5d632c- -0x1);}this['mouse_down']=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace['EventType'][_0x7656bc(0x599,0x624)],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace[_0x564d06(-0x194,-0x1bb)]['mouseDown'],this[_0x7656bc(0x548,0x518)],this),this[_0x564d06(-0x1cc,-0x1bb)]['on'](mars3d__namespace[_0x564d06(-0x194,-0x154)]['mouseUp'],this[_0x564d06(-0x122,-0x99)],this));}['unbindEvent'](){function _0x394cd5(_0x11f9b0,_0x3a7d6b){return _0x3cd0b4(_0x3a7d6b,_0x11f9b0-0x297);}window['cancelAnimationFrame'](this[_0x394cd5(0x1d7,0x1e7)]);function _0x19b9d1(_0x576174,_0x4245d5){return _0x3cd0b4(_0x576174,_0x4245d5-0x1d7);}delete this[_0x394cd5(0x1d7,0x24d)],window['removeEventListener']('resize',this['resize']),this['options'][_0x394cd5(0xe6,0x145)]&&(this[_0x394cd5(0xcc,0x145)]['off'](mars3d__namespace[_0x19b9d1(0x33,0x44)][_0x19b9d1(0x106,0xd1)],this[_0x394cd5(0xf1,0x5e)],this),this[_0x19b9d1(0x25,0xc)]['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseUp'],this[_0x19b9d1(0x91,0xb6)],this),this[_0x19b9d1(0x2a,0xc)]['off'](mars3d__namespace['EventType'][_0x394cd5(0xea,0xa9)],this[_0x19b9d1(0x26,0x8a)],this));}['_onMapWhellEvent'](_0x18d8b2){function _0x289928(_0x155884,_0x26e190){return _0x1660f5(_0x155884,_0x26e190-0xf);}function _0xc24912(_0x152a03,_0x132391){return _0x1660f5(_0x152a03,_0x132391- -0x3eb);}clearTimeout(this['refreshTimer']);if(!this[_0xc24912(-0x5f,-0x54)]||!this[_0x289928(0x386,0x351)])return;this[_0xc24912(-0xcf,-0xa9)][_0x289928(0x3d8,0x34d)]['visibility']=_0xc24912(-0x33,-0xc3),this[_0xc24912(-0x3f,-0x38)]=setTimeout(()=>{function _0xcbecdb(_0x47de29,_0x3836e1){return _0xc24912(_0x47de29,_0x3836e1-0x546);}if(!this[_0xcbecdb(0x4cc,0x4f2)])return;this[_0x1eab4a(-0xce,-0xab)]();function _0x1eab4a(_0x2f2640,_0x4ec3b6){return _0x289928(_0x2f2640,_0x4ec3b6- -0x460);}this[_0xcbecdb(0x4b3,0x49d)][_0xcbecdb(0x450,0x499)][_0x1eab4a(-0x18b,-0x14b)]='visible';},0xc8);}['_onMouseDownEvent'](_0x1ef1af){function _0x3d6d6b(_0x3b03bf,_0x24f9e4){return _0x3cd0b4(_0x3b03bf,_0x24f9e4-0x41e);}function _0x3dcaa6(_0x304a2b,_0x4a1424){return _0x3cd0b4(_0x4a1424,_0x304a2b- -0x76);}this['mouse_down']=!![],this['_map']['off'](mars3d__namespace[_0x3dcaa6(-0x209,-0x1e7)]['mouseMove'],this['_onMouseMoveEvent'],this),this[_0x3dcaa6(-0x241,-0x241)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x517593){if(!this['show']||!this['canvas'])return;function _0x1f95f7(_0xee83e6,_0x2c9ae7){return _0x1660f5(_0x2c9ae7,_0xee83e6- -0x2a5);}function _0xa94033(_0x3cd4b3,_0xe95f37){return _0x3cd0b4(_0x3cd4b3,_0xe95f37- -0x18);}this['mouse_down']&&(this[_0xa94033(-0x11a,-0x196)][_0x1f95f7(0x99,0x123)][_0x1f95f7(0x61,0x4b)]=_0xa94033(-0x12e,-0x1b0),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x3c78fa){function _0x23c995(_0x1d1d1c,_0x1c8fb6){return _0x1660f5(_0x1c8fb6,_0x1d1d1c-0x151);}if(!this['show']||!this['canvas'])return;this['_map']['off'](mars3d__namespace['EventType'][_0x23c995(0x464,0x42f)],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this['redraw']();function _0x263714(_0x208e84,_0xf91ddb){return _0x1660f5(_0x208e84,_0xf91ddb- -0x506);}this['canvas']['style'][_0x263714(-0x1b6,-0x200)]='visible',this[_0x23c995(0x46f,0x43d)]=![],this['mouse_move']=![];}[_0x1660f5(0x388,0x3b6)](_0x26c3d6){function _0x2253c5(_0x5607d4,_0xc0d04d){return _0x1660f5(_0xc0d04d,_0x5607d4- -0x4ce);}this['clear']();function _0x282227(_0x4a7214,_0x8802e9){return _0x3cd0b4(_0x8802e9,_0x4a7214-0x3bd);}this[_0x2253c5(-0xdc,-0x134)]=_0x26c3d6,this['windField'][_0x282227(0x1f0,0x1ab)](_0x26c3d6),this['redraw']();}['redraw'](){if(!this[_0x5c33ba(-0x20a,-0x1ce)])return;function _0x66b514(_0x61c1be,_0xc331b3){return _0x1660f5(_0xc331b3,_0x61c1be- -0x298);}function _0x5c33ba(_0x4eba37,_0x3571e0){return _0x3cd0b4(_0x3571e0,_0x4eba37- -0xe1);}this['windField']['setOptions'](this[_0x5c33ba(-0x1ac,-0x1a2)]),this[_0x66b514(0x8e,0x8e)]();}['update'](){function _0x169cd8(_0x1a89f3,_0x51bcf6){return _0x3cd0b4(_0x1a89f3,_0x51bcf6-0x15c);}if(this['_updateIng'])return;function _0x8d32be(_0x7b1dd,_0x54b6ef){return _0x3cd0b4(_0x7b1dd,_0x54b6ef-0x4db);}this['_updateIng']=!![];if(this['worker'])this['windField'][_0x169cd8(-0xc6,-0x3e)]();else{const _0x1f83ef=this['windField']['getParticles']();this[_0x169cd8(0x2a,0x2e)](_0x1f83ef);}this['_updateIng']=![];}[_0x1660f5(0x326,0x392)](_0x2a44ee){function _0xd22126(_0x4119df,_0x6b8110){return _0x3cd0b4(_0x4119df,_0x6b8110-0x2bb);}function _0x245a99(_0x46e27d,_0x26220a){return _0x3cd0b4(_0x26220a,_0x46e27d-0x347);}this[_0xd22126(0x1e1,0x17b)]=_0x2a44ee,this['canvasContext']['globalCompositeOperation']='destination-in',this[_0xd22126(0x126,0x109)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext']['globalCompositeOperation']=_0x245a99(0x209,0x216),this['canvasContext']['globalAlpha']=0.9;const _0x2716c0=this['_map']['scene'][_0x245a99(0x217,0x22e)]!==Cesium['SceneMode'][_0xd22126(0x126,0x198)],_0x254591=this[_0xd22126(0xb8,0x142)]*0.25;if(this[_0x245a99(0x1e7,0x182)])for(let _0x3f8e3b=0x0,_0x5a1b0f=_0x2a44ee['length'];_0x3f8e3b<_0x5a1b0f;_0x3f8e3b++){const _0x21ca38=_0x2a44ee[_0x3f8e3b],_0x4274e4=this['_tomap'](_0x21ca38,_0x21ca38['lng'],_0x21ca38['lat'],_0x21ca38[_0xd22126(0x15c,0x14d)]),_0x128938=this['_tomap'](_0x21ca38,_0x21ca38['tlng'],_0x21ca38[_0x245a99(0x1b0,0x1d3)],_0x21ca38['talt']);if(!_0x4274e4||!_0x128938)continue;if(_0x2716c0&&Math['abs'](_0x4274e4[0x0]-_0x128938[0x0])>=_0x254591)continue;this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this[_0xd22126(0x118,0x18e)],this['canvasContext'][_0xd22126(0x241,0x200)]=this[_0x245a99(0x1e7,0x1ca)][_0x245a99(0x188,0x1b1)](_0x21ca38[_0x245a99(0x24e,0x1e4)]),this[_0x245a99(0x195,0x1bb)]['moveTo'](_0x4274e4[0x0],_0x4274e4[0x1]),this['canvasContext']['lineTo'](_0x128938[0x0],_0x128938[0x1]),this['canvasContext']['stroke']();}else{this['canvasContext']['beginPath'](),this[_0xd22126(0x147,0x109)]['lineWidth']=this[_0xd22126(0x20b,0x18e)],this['canvasContext'][_0xd22126(0x20b,0x200)]=this[_0x245a99(0x179,0x14f)];for(let _0x3a5114=0x0,_0x533f6e=_0x2a44ee['length'];_0x3a5114<_0x533f6e;_0x3a5114++){const _0x38476d=_0x2a44ee[_0x3a5114],_0x381e03=this['_tomap'](_0x38476d,_0x38476d[_0xd22126(0x214,0x18c)],_0x38476d[_0x245a99(0x1e1,0x1eb)],_0x38476d['alt']),_0x1073c8=this[_0xd22126(0x1c2,0x1a6)](_0x38476d,_0x38476d[_0x245a99(0x184,0x12c)],_0x38476d[_0x245a99(0x1b0,0x17b)],_0x38476d['talt']);if(!_0x381e03||!_0x1073c8)continue;if(_0x2716c0&&Math[_0x245a99(0x290,0x2f2)](_0x381e03[0x0]-_0x1073c8[0x0])>=_0x254591)continue;this[_0xd22126(0xe0,0x109)][_0xd22126(0x12f,0x171)](_0x381e03[0x0],_0x381e03[0x1]),this['canvasContext']['lineTo'](_0x1073c8[0x0],_0x1073c8[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x5e7b00,_0x217ef4,_0x1cfb74,_0x52d6ee){const _0x2b54e1=Cesium['Cartesian3'][_0x313c59(0x459,0x46a)](_0x217ef4,_0x1cfb74,_0x52d6ee??this['fixedHeight']),_0x3480ca=this['_map'][_0x313c59(0x477,0x45c)];if(_0x3480ca['mode']===Cesium['SceneMode']['SCENE3D']){const _0x4b9131=new Cesium[(_0x313c59(0x45d,0x425))](_0x3480ca['globe']['ellipsoid'],_0x3480ca['camera']['positionWC']),_0x9cac3=_0x4b9131[_0x313c59(0x562,0x5a6)](_0x2b54e1);if(!_0x9cac3)return _0x5e7b00[_0x367b94(-0x215,-0x1f0)]=0x0,null;}function _0x313c59(_0x19c569,_0x1f24a6){return _0x1660f5(_0x1f24a6,_0x19c569-0x16c);}function _0x367b94(_0x24aff4,_0x4bca5b){return _0x3cd0b4(_0x24aff4,_0x4bca5b- -0xb8);}const _0x170752=mars3d__namespace[_0x313c59(0x534,0x4bd)][_0x367b94(-0x27a,-0x22d)](this['_map']['scene'],_0x2b54e1);return _0x170752?[_0x170752['x'],_0x170752['y']]:null;}['clear'](){function _0x5bdd57(_0xefcb24,_0xb11366){return _0x1660f5(_0xb11366,_0xefcb24- -0x528);}function _0x3faac0(_0xc9add6,_0x21567b){return _0x3cd0b4(_0xc9add6,_0x21567b-0x517);}this[_0x3faac0(0x366,0x38f)]['clear'](),delete this[_0x3faac0(0x426,0x449)];}['initWorker'](){this[_0x5cb371(0x3fc,0x3a6)]=new Worker(this['options'][_0x4c9ce5(-0x20c,-0x1cc)]);function _0x5cb371(_0x22823d,_0x4ab20f){return _0x1660f5(_0x4ab20f,_0x22823d-0xb0);}this['worker']['onmessage']=_0x3bf0d8=>{this['_drawLines'](_0x3bf0d8[_0x1cd6d2(0xe9,0x7a)][_0x38bd97(0x32f,0x2d9)]);function _0x1cd6d2(_0x4677ab,_0x37d93a){return _0x5cb371(_0x37d93a- -0x394,_0x4677ab);}function _0x38bd97(_0x47a314,_0x1cadf1){return _0x4c9ce5(_0x47a314-0x539,_0x1cadf1);}this[_0x1cd6d2(0x10a,0xcd)]=![];};function _0x4c9ce5(_0x513e62,_0x570d17){return _0x1660f5(_0x570d17,_0x513e62- -0x558);}this[_0x5cb371(0x3e8,0x47a)]={'init':_0x742e66=>{const _0x1066ce={};_0x1066ce[_0x481fdb(0x2d8,0x27b)]=_0x481fdb(0x2ec,0x283);function _0x481fdb(_0x48f23a,_0x277e06){return _0x4c9ce5(_0x277e06-0x492,_0x48f23a);}_0x1066ce[_0x5a9b1e(0xbf,0x8c)]=_0x742e66;function _0x5a9b1e(_0x43285f,_0x4acc5d){return _0x4c9ce5(_0x4acc5d-0x1ef,_0x43285f);}this['worker']['postMessage'](_0x1066ce);},'setOptions':_0x202bba=>{const _0x34bdda={};_0x34bdda['type']=_0x4e89df(-0x14a,-0x125),_0x34bdda['options']=_0x202bba;function _0x4e89df(_0xc6d8d6,_0x35da7d){return _0x5cb371(_0x35da7d- -0x508,_0xc6d8d6);}function _0x2d5324(_0x1422dc,_0x3e0a4c){return _0x5cb371(_0x3e0a4c- -0x4f7,_0x1422dc);}this[_0x4e89df(-0xa3,-0x10c)][_0x4e89df(-0x1ab,-0x136)](_0x34bdda);},'setDate':_0x4eddc9=>{const _0x1ac12={};_0x1ac12[_0x8777a7(-0x4f,-0xa9)]='setDate',_0x1ac12['data']=_0x4eddc9;function _0x45d94d(_0x3cb91f,_0x27181b){return _0x5cb371(_0x27181b- -0x255,_0x3cb91f);}function _0x8777a7(_0x4efdf4,_0x572e89){return _0x4c9ce5(_0x4efdf4-0x1c8,_0x572e89);}this[_0x45d94d(0x14e,0x1a7)][_0x45d94d(0x1c4,0x17d)](_0x1ac12);},'update':()=>{if(this['_updateIng2'])return;function _0x508811(_0x9c3b29,_0x5212cb){return _0x5cb371(_0x5212cb- -0x665,_0x9c3b29);}this[_0x508811(-0x1c5,-0x204)]=!![];const _0x2951ec={};_0x2951ec['type']=_0x828a2f(0xf9,0xa1);function _0x828a2f(_0x4a5a47,_0x5362f3){return _0x4c9ce5(_0x5362f3-0x2d3,_0x4a5a47);}this['worker'][_0x828a2f(0x13,0x9d)](_0x2951ec);},'clear':()=>{const _0x2b2e77={};function _0x45cbe2(_0x4d42cb,_0x202f56){return _0x4c9ce5(_0x202f56-0x27c,_0x4d42cb);}_0x2b2e77['type']=_0x45cbe2(0x12e,0x108);function _0x7921d5(_0x4860a9,_0x5c55c0){return _0x5cb371(_0x4860a9- -0x30e,_0x5c55c0);}this[_0x45cbe2(0x1d,0x70)][_0x45cbe2(-0x1c,0x46)](_0x2b2e77);}},this['windField']['init'](this['options']);}}mars3d__namespace['LayerUtil']['register'](_0x3cd0b4(-0x108,-0xe8),CanvasWindLayer),mars3d__namespace[_0x1660f5(0x361,0x36e)][_0x3cd0b4(-0x6d,-0xf0)]=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports[_0x3cd0b4(-0x156,-0xf0)]=CanvasWindLayer,exports[_0x1660f5(0x3d0,0x3bd)]=WindLayer,exports['WindUtil']=WindUtil;const _0x2b5ffe={};_0x2b5ffe[_0x3cd0b4(-0x2c,-0xc1)]=!![],Object[_0x3cd0b4(-0xcd,-0x114)](exports,_0x3cd0b4(-0xc8,-0x12c),_0x2b5ffe);
}));
