/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.2
 * 编译日期：2025-03-12 14:58
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x13afe3,_0x17b2c7){function _0x56f175(_0xc35f26,_0x543508){return _0x443c(_0xc35f26- -0x309,_0x543508);}function _0x123e8e(_0x2ac494,_0x345dd7){return _0x443c(_0x2ac494- -0xce,_0x345dd7);}const _0x49cd10=_0x13afe3();while(!![]){try{const _0x3eab00=parseInt(_0x123e8e(0xc0,0xfd))/0x1+-parseInt(_0x123e8e(0xf9,0x104))/0x2*(-parseInt(_0x123e8e(0x174,0x103))/0x3)+parseInt(_0x123e8e(0xbe,0xc7))/0x4+-parseInt(_0x123e8e(0xaa,0xe8))/0x5+-parseInt(_0x56f175(-0x110,-0x130))/0x6*(parseInt(_0x123e8e(0xfc,0x142))/0x7)+-parseInt(_0x56f175(-0x181,-0x1f1))/0x8*(parseInt(_0x56f175(-0xd1,-0xf5))/0x9)+-parseInt(_0x123e8e(0xe4,0x101))/0xa*(parseInt(_0x56f175(-0x118,-0x1a3))/0xb);if(_0x3eab00===_0x17b2c7)break;else _0x49cd10['push'](_0x49cd10['shift']());}catch(_0x3700aa){_0x49cd10['push'](_0x49cd10['shift']());}}}(_0x3089,0xa32b7));function _interopNamespace(_0xb560c0){function _0x1241a2(_0x2bc533,_0x38b4f5){return _0x443c(_0x38b4f5- -0x1f5,_0x2bc533);}if(_0xb560c0&&_0xb560c0['__esModule'])return _0xb560c0;function _0x44032a(_0x57c968,_0x11e57b){return _0x443c(_0x57c968- -0x20b,_0x11e57b);}var _0x3ee445=Object[_0x1241a2(0x1f,-0x49)](null);return _0xb560c0&&Object['keys'](_0xb560c0)['forEach'](function(_0x4bb27e){function _0x2f7eb7(_0x5deff3,_0xfb31a4){return _0x1241a2(_0x5deff3,_0xfb31a4-0x348);}function _0x16cb0a(_0x10ac5f,_0x1d70e2){return _0x1241a2(_0x1d70e2,_0x10ac5f- -0xb2);}if(_0x4bb27e!==_0x16cb0a(-0xd2,-0x129)){var _0x4e84fe=Object[_0x2f7eb7(0x39b,0x33a)](_0xb560c0,_0x4bb27e);Object['defineProperty'](_0x3ee445,_0x4bb27e,_0x4e84fe[_0x16cb0a(-0x70,-0xcd)]?_0x4e84fe:{'enumerable':!![],'get':function(){return _0xb560c0[_0x4bb27e];}});}}),_0x3ee445[_0x44032a(-0x36,0x0)]=_0xb560c0,_0x3ee445;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x9c3d64(0x2fd,0x2d7)];function getU(_0x57666a,_0xdf917e){const _0x28567e=_0x57666a*Math[_0x3b6a7f(0xda,0x10c)](Cesium$2['Math']['toRadians'](_0xdf917e));function _0x3b6a7f(_0x215ed7,_0x2226f5){return _0x9c3d64(_0x2226f5,_0x215ed7- -0x1ef);}return _0x28567e;}function getV(_0xa30d4a,_0x475b08){const _0x28d9f3=_0xa30d4a*Math[_0x3080e8(-0x1fe,-0x20c)](Cesium$2['Math']['toRadians'](_0x475b08));function _0x3080e8(_0x3cbe2f,_0x4cbc4e){return _0x9c3d64(_0x4cbc4e,_0x3cbe2f- -0x3ea);}return _0x28d9f3;}function getSpeed(_0x32df1f,_0x3ff764){const _0x449697=Math['sqrt'](Math['pow'](_0x32df1f,0x2)+Math['pow'](_0x3ff764,0x2));return _0x449697;}function getDirection(_0x470245,_0x41dede){let _0x37b8bf=Cesium$2[_0x70510a(0x5ba,0x54a)]['toDegrees'](Math[_0x1bd92d(0x212,0x223)](_0x41dede,_0x470245));function _0x1bd92d(_0x2c8e27,_0x52dc61){return _0x9c3d64(_0x52dc61,_0x2c8e27- -0xb9);}_0x37b8bf+=_0x37b8bf<0x0?0x168:0x0;function _0x70510a(_0x42c8d2,_0x20c9ca){return _0x9c3d64(_0x42c8d2,_0x20c9ca-0x2ce);}return _0x37b8bf;}const _0x589e4f={};_0x589e4f[_0x38f889(-0x18d,-0x151)]=null,_0x589e4f[_0x9c3d64(0x2fe,0x2ea)]=getU,_0x589e4f['getV']=getV,_0x589e4f['getSpeed']=getSpeed,_0x589e4f['getDirection']=getDirection;var WindUtil=_0x589e4f,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x38f889(-0xfe,-0x80),postProcessingPositionFragmentShader=_0x9c3d64(0x2d1,0x25b),renderParticlesFragmentShader=_0x38f889(-0x182,-0x168),renderParticlesVertexShader=_0x38f889(-0x15f,-0xe1);const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static['getCalculateSpeedShader'](){const _0x369d85={};return _0x369d85['sources']=[calculateSpeedShader],new ShaderSource$1(_0x369d85);}static['getUpdatePositionShader'](){const _0x1243a9={};return _0x1243a9['sources']=[updatePositionShader],new ShaderSource$1(_0x1243a9);}static[_0x9c3d64(0x31c,0x2ed)](){const _0x477c12={};_0x477c12[_0x4e0ab0(0x15c,0x193)]=[renderParticlesVertexShader];function _0x4e0ab0(_0xb7c904,_0x4f5c7f){return _0x9c3d64(_0xb7c904,_0x4f5c7f- -0x9e);}return new ShaderSource$1(_0x477c12);}static['getSegmentDrawFragmentShader'](){function _0x1f05e7(_0x2186cb,_0x2e1033){return _0x9c3d64(_0x2186cb,_0x2e1033-0x87);}const _0x3d953e={};return _0x3d953e[_0x1f05e7(0x22e,0x2b8)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x3d953e);}static['getPostProcessingPositionShader'](){const _0xa3a80c={};return _0xa3a80c['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0xa3a80c);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defaultValue,defined,destroyObject}=mars3d__namespace[_0x38f889(-0x112,-0x109)];class CustomPrimitive{constructor(_0x3ed527){this['commandType']=_0x3ed527['commandType'],this['geometry']=_0x3ed527[_0x2f3ac3(-0x25d,-0x1dd)],this['attributeLocations']=_0x3ed527['attributeLocations'];function _0x58f79a(_0x424487,_0x5dc794){return _0x9c3d64(_0x5dc794,_0x424487-0x16b);}this[_0x2f3ac3(-0x1fc,-0x18b)]=_0x3ed527['primitiveType'],this[_0x58f79a(0x423,0x443)]=_0x3ed527['uniformMap']||{},this[_0x2f3ac3(-0x150,-0xd0)]=_0x3ed527['vertexShaderSource'];function _0x2f3ac3(_0x2138e9,_0xdfa561){return _0x38f889(_0x2138e9- -0x5d,_0xdfa561);}this[_0x58f79a(0x35a,0x369)]=_0x3ed527['fragmentShaderSource'],this['rawRenderState']=_0x3ed527['rawRenderState'],this[_0x58f79a(0x40f,0x39b)]=_0x3ed527['framebuffer'],this[_0x58f79a(0x3eb,0x378)]=_0x3ed527[_0x58f79a(0x3eb,0x40f)],this['autoClear']=defaultValue(_0x3ed527['autoClear'],![]),this['preExecute']=_0x3ed527['preExecute'],this[_0x58f79a(0x3a6,0x3a6)]=!![],this[_0x58f79a(0x467,0x45e)]=undefined,this['clearCommand']=undefined,this[_0x2f3ac3(-0x160,-0x1c6)]=_0x3ed527['isDynamic']??(()=>!![]),this['autoClear']&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x58f79a(0x40f,0x3ec)],'pass':Pass$1[_0x2f3ac3(-0x23c,-0x2a7)]}));}['createCommand'](_0x75b90c){function _0x757a8b(_0x1ae5a7,_0x8dc43a){return _0x9c3d64(_0x8dc43a,_0x1ae5a7- -0x449);}function _0x50a15d(_0x2c005b,_0x1688aa){return _0x9c3d64(_0x1688aa,_0x2c005b- -0x26d);}if(this['commandType']===_0x50a15d(-0x30,-0xb4)){const _0x3ee512={};_0x3ee512[_0x50a15d(-0x4a,-0x99)]=_0x75b90c,_0x3ee512[_0x50a15d(-0x84,-0xd0)]=this['geometry'],_0x3ee512[_0x757a8b(-0x1ea,-0x1c9)]=this[_0x757a8b(-0x1ea,-0x187)],_0x3ee512['bufferUsage']=BufferUsage$1[_0x757a8b(-0x1d0,-0x1b1)];const _0xdc12b5=VertexArray$1[_0x50a15d(-0x5e,-0xd1)](_0x3ee512),_0x4084f5={};_0x4084f5[_0x757a8b(-0x226,-0x1bd)]=_0x75b90c,_0x4084f5['vertexShaderSource']=this[_0x50a15d(0x89,0x73)],_0x4084f5['fragmentShaderSource']=this[_0x757a8b(-0x25a,-0x214)],_0x4084f5['attributeLocations']=this['attributeLocations'];const _0xf53e53=ShaderProgram[_0x50a15d(-0x22,-0xa3)](_0x4084f5),_0xd52804=RenderState['fromCache'](this[_0x50a15d(-0xc,0x15)]),_0x26896a={};return _0x26896a[_0x50a15d(0x7,-0x76)]=this,_0x26896a[_0x757a8b(-0x1d7,-0x1ea)]=_0xdc12b5,_0x26896a[_0x50a15d(-0x23,-0x66)]=this['primitiveType'],_0x26896a[_0x757a8b(-0x1de,-0x192)]=Matrix4['IDENTITY'],_0x26896a['renderState']=_0xd52804,_0x26896a[_0x50a15d(0x74,0x4)]=_0xf53e53,_0x26896a[_0x757a8b(-0x1a5,-0x231)]=this['framebuffer'],_0x26896a[_0x50a15d(0x4b,0x99)]=this['uniformMap'],_0x26896a['pass']=Pass$1[_0x757a8b(-0x23f,-0x22c)],new DrawCommand(_0x26896a);}else{if(this['commandType']==='Compute'){const _0x545ca0={};return _0x545ca0[_0x50a15d(0x7,0x55)]=this,_0x545ca0['fragmentShaderSource']=this[_0x757a8b(-0x25a,-0x26c)],_0x545ca0['uniformMap']=this['uniformMap'],_0x545ca0[_0x50a15d(0x13,0x30)]=this[_0x50a15d(0x13,0x42)],_0x545ca0['persists']=!![],new ComputeCommand(_0x545ca0);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x5d99ed,_0x4554cf){this['geometry']=_0x4554cf;function _0x252f93(_0x43e2e4,_0x50cea2){return _0x38f889(_0x43e2e4-0xd1,_0x50cea2);}function _0x451e2a(_0x5e18d7,_0x37f313){return _0x38f889(_0x5e18d7-0x340,_0x37f313);}defined(this[_0x451e2a(0x253,0x255)])&&(this[_0x451e2a(0x253,0x22b)][_0x451e2a(0x1c9,0x221)]=VertexArray$1['fromGeometry']({'context':_0x5d99ed,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1[_0x451e2a(0x1d0,0x19f)]}));}['update'](_0x4a347c){if(!this['isDynamic']())return;function _0x4ef742(_0x22dde7,_0x1d54e7){return _0x38f889(_0x1d54e7-0x3bc,_0x22dde7);}function _0x2717e4(_0x8c9b28,_0x320971){return _0x38f889(_0x320971-0x211,_0x8c9b28);}if(!this['show']||!defined(_0x4a347c))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x4a347c['context']));defined(this[_0x4ef742(0x151,0x1d1)])&&this[_0x4ef742(0x25d,0x1d1)]();if(!_0x4a347c['commandList']){console['warn'](_0x2717e4(0xd1,0xbf));return;}defined(this[_0x4ef742(0x1aa,0x1e8)])&&_0x4a347c['commandList'][_0x4ef742(0x24b,0x2b0)](this['clearCommand']),defined(this[_0x2717e4(0x154,0x124)])&&_0x4a347c['commandList'][_0x2717e4(0x150,0x105)](this['commandToExecute']);}['isDestroyed'](){return![];}['destroy'](){function _0x1d646c(_0x3307d6,_0x2c1a60){return _0x9c3d64(_0x2c1a60,_0x3307d6-0x53);}if(defined(this['commandToExecute'])){var _0x533918;(_0x533918=this[_0x34ea03(-0x52,-0xb4)]['shaderProgram'])===null||_0x533918===void 0x0||_0x533918[_0x1d646c(0x32e,0x349)](),this[_0x34ea03(-0x52,-0x7)]['shaderProgram']=undefined;}function _0x34ea03(_0x2a225a,_0x3c958f){return _0x9c3d64(_0x3c958f,_0x2a225a- -0x34e);}return destroyObject(this);}}function deepMerge(_0x160dd0,_0x1f9b16){if(!_0x160dd0)return _0x1f9b16;if(!_0x1f9b16)return _0x160dd0;const _0x1b4c03={..._0x1f9b16};function _0x533d74(_0x14cb61,_0xa1e68b){return _0x9c3d64(_0x14cb61,_0xa1e68b- -0x393);}const _0x4a1001=_0x1b4c03;for(const _0x4ac6a6 in _0x160dd0){if(Object[_0x11d815(0x1fb,0x249)]['hasOwnProperty'][_0x533d74(-0xeb,-0x151)](_0x160dd0,_0x4ac6a6)){const _0xd88634=_0x160dd0[_0x4ac6a6],_0x4b12d7=_0x1f9b16[_0x4ac6a6];if(Array['isArray'](_0xd88634)){_0x4a1001[_0x4ac6a6]=_0xd88634['slice']();continue;}if(_0xd88634&&typeof _0xd88634==='object'){_0x4a1001[_0x4ac6a6]=deepMerge(_0xd88634,_0x4b12d7||{});continue;}_0xd88634!==undefined&&(_0x4a1001[_0x4ac6a6]=_0xd88634);}}function _0x11d815(_0x5670cf,_0x3ba681){return _0x9c3d64(_0x5670cf,_0x3ba681-0x54);}return _0x4a1001;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x38f889(-0x112,-0x145)];class WindParticlesComputing{constructor(_0x2cc591,_0x24ae90,_0x2bf3d6,_0x245002,_0x32d014){this[_0x5d773f(0x3d,0x20)]=_0x2cc591,this[_0x5014fe(-0x77,-0xe8)]=_0x2bf3d6;function _0x5014fe(_0x82afde,_0x1bf628){return _0x38f889(_0x1bf628-0x4f,_0x82afde);}this['viewerParameters']=_0x245002,this[_0x5014fe(-0x12c,-0x17a)]=_0x24ae90,this[_0x5014fe(-0xf5,-0x10a)]=0x3c;function _0x5d773f(_0x4534bf,_0x5eb4e2){return _0x9c3d64(_0x5eb4e2,_0x4534bf- -0x1e6);}this['frameRateAdjustment']=0x1;const _0x400821={};_0x400821['scene']=_0x32d014,_0x400821['samplingWindow']=0x1,_0x400821['quietPeriod']=0x0,this[_0x5d773f(0xb3,0xcb)]=new FrameRateMonitor(_0x400821),this[_0x5014fe(-0xd1,-0xc7)](),this[_0x5d773f(0x1f,0x2b)](),this[_0x5014fe(-0x120,-0x17d)](),this['createComputingPrimitives']();}['initFrameRate'](){const _0x305672=()=>{function _0x464c3c(_0xcc6e93,_0x5e6c5f){return _0x443c(_0xcc6e93-0x35e,_0x5e6c5f);}function _0x4ac449(_0xb17b0c,_0x53decd){return _0x443c(_0xb17b0c-0x1b8,_0x53decd);}this['frameRateMonitor'][_0x464c3c(0x55f,0x4e6)]>0x14&&(this['frameRate']=this[_0x4ac449(0x399,0x365)]['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math['max'](this['frameRate'],0x1));};function _0x13119b(_0x357427,_0xbde693){return _0x38f889(_0x357427-0x3a0,_0xbde693);}_0x305672();const _0x2309b4=setInterval(_0x305672,0x3e8),_0x5808d7=this['destroy']['bind'](this);this[_0x13119b(0x292,0x27e)]=()=>{clearInterval(_0x2309b4),_0x5808d7();};}['createWindTextures'](){function _0x136c47(_0x12ced2,_0x675319){return _0x9c3d64(_0x675319,_0x12ced2-0x116);}const _0x3f443e={};_0x3f443e['minificationFilter']=TextureMinificationFilter$1['LINEAR'];function _0xbd08b0(_0x45917c,_0x48e3c9){return _0x9c3d64(_0x48e3c9,_0x45917c- -0x32e);}_0x3f443e['magnificationFilter']=TextureMagnificationFilter$1['LINEAR'];const _0xab6869={'context':this['context'],'width':this['windData'][_0xbd08b0(-0x12f,-0x12c)],'height':this['windData'][_0x136c47(0x34c,0x36b)],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0xbd08b0(-0x7c,-0x90)]['flipY']??![],'sampler':new Sampler$1(_0x3f443e)};this[_0xbd08b0(-0x47,-0xb9)]={'U':new Texture$1({..._0xab6869,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0xab6869,'source':{'arrayBufferView':new Float32Array(this[_0xbd08b0(-0x10e,-0x84)]['v']['array'])}})};}['createParticlesTextures'](){const _0x25beec={};_0x25beec['minificationFilter']=TextureMinificationFilter$1['NEAREST'];function _0x1ac379(_0xb5d1bc,_0x491f10){return _0x9c3d64(_0xb5d1bc,_0x491f10-0x164);}function _0x5af260(_0x257990,_0x1098fc){return _0x9c3d64(_0x1098fc,_0x257990- -0x2db);}_0x25beec['magnificationFilter']=TextureMagnificationFilter$1[_0x1ac379(0x45c,0x404)];const _0x15cdee={'context':this['context'],'width':this['options']['particlesTextureSize'],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x5af260(0x8,0x3)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x5af260(-0x29,-0x2f)]['particlesTextureSize']*this[_0x5af260(-0x29,0x52)]['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x25beec)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x15cdee),'currentParticlesPosition':new Texture$1(_0x15cdee),'nextParticlesPosition':new Texture$1(_0x15cdee),'postProcessingPosition':new Texture$1(_0x15cdee),'particlesSpeed':new Texture$1(_0x15cdee)};}[_0x9c3d64(0x315,0x2fb)](){Object['values'](this['particlesTextures'])['forEach'](_0x4af241=>_0x4af241['destroy']());}['createComputingPrimitives'](){function _0x29680e(_0x3155ed,_0x5659e8){return _0x38f889(_0x3155ed-0x49d,_0x5659e8);}function _0x30a0bb(_0xc60539,_0x44f057){return _0x9c3d64(_0x44f057,_0xc60539-0x68);}this[_0x29680e(0x32a,0x2d5)]={'calculateSpeed':new CustomPrimitive({'commandType':_0x30a0bb(0x313,0x294),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x30a0bb(0x325,0x31f)],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this[_0x29680e(0x2d4,0x34d)]['v'][_0x29680e(0x371,0x2f6)],this[_0x30a0bb(0x288,0x293)]['v'][_0x30a0bb(0x360,0x2e9)]),'speedRange':()=>new Cartesian2$1(this['windData'][_0x30a0bb(0x26c,0x292)]['min'],this['windData']['speed']['max']),'currentParticlesPosition':()=>this[_0x29680e(0x2da,0x2b9)]['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x247743(_0x424ef3,_0x3ba6c1){return _0x30a0bb(_0x3ba6c1- -0x21f,_0x424ef3);}function _0x4c63a1(_0xbd298d,_0x12e133){return _0x30a0bb(_0x12e133- -0x3f4,_0xbd298d);}return(this['viewerParameters'][_0x4c63a1(-0x53,-0x9e)]+0x32)*this['options'][_0x4c63a1(-0xc1,-0x11c)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData'][_0x29680e(0x2b3,0x280)],this['windData']['height']),'minimum':()=>new Cartesian2$1(this[_0x29680e(0x2d4,0x343)]['bounds'][_0x30a0bb(0x366,0x3c7)],this['windData'][_0x29680e(0x30b,0x2ba)]['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds']['east'],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{function _0x4ffc44(_0xdc1e42,_0x4de23c){return _0x29680e(_0xdc1e42- -0x4a0,_0x4de23c);}const _0xe04a11=this['particlesTextures'][_0x342ada(0x292,0x2fa)];function _0x342ada(_0xb79c49,_0x54d751){return _0x29680e(_0xb79c49- -0x80,_0x54d751);}this['particlesTextures'][_0x342ada(0x292,0x22f)]=this[_0x4ffc44(-0x1c6,-0x191)]['currentParticlesPosition'],this['particlesTextures']['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'],this[_0x342ada(0x25a,0x1e3)]['postProcessingPosition']=_0xe04a11,this['primitives']['calculateSpeed'][_0x4ffc44(-0xf0,-0x11e)]&&(this[_0x342ada(0x2aa,0x221)]['calculateSpeed']['commandToExecute']['outputTexture']=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options'][_0x30a0bb(0x2a0,0x284)]}),'updatePosition':new CustomPrimitive({'commandType':_0x30a0bb(0x313,0x2a0),'uniformMap':{'currentParticlesPosition':()=>this[_0x29680e(0x2da,0x298)]['currentParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed']},'fragmentShaderSource':ShaderManager[_0x29680e(0x2a7,0x2f4)](),'outputTexture':this['particlesTextures'][_0x29680e(0x329,0x303)],'preExecute':()=>{function _0x16eac0(_0x3ad71c,_0x445a73){return _0x30a0bb(_0x445a73- -0x208,_0x3ad71c);}function _0x55c035(_0x80bfc,_0x51e6c2){return _0x29680e(_0x80bfc- -0x493,_0x51e6c2);}this['primitives'][_0x16eac0(0x33,0x99)][_0x16eac0(0x10e,0x15c)]&&(this['primitives']['updatePosition']['commandToExecute'][_0x55c035(-0x15f,-0x114)]=this[_0x55c035(-0x1b9,-0x22d)]['nextParticlesPosition']);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this[_0x30a0bb(0x2fe,0x2e4)][_0x30a0bb(0x2d6,0x34a)],'dataLonRange':()=>new Cartesian2$1(this[_0x30a0bb(0x288,0x23f)]['bounds'][_0x29680e(0x3b2,0x3f5)],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this['windData'][_0x30a0bb(0x2bf,0x31e)]['south'],this['windData']['bounds']['north']),'randomCoefficient':function(){function _0x4f0003(_0x33f762,_0x3a9a4d){return _0x30a0bb(_0x3a9a4d- -0x413,_0x33f762);}return Math[_0x4f0003(-0x96,-0xc3)]();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this[_0x29680e(0x366,0x3a5)][_0x29680e(0x369,0x3b0)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x35378a(_0x29e29e,_0x5be633){return _0x30a0bb(_0x5be633-0x1dd,_0x29e29e);}function _0x595f49(_0x36bee6,_0x2d6d97){return _0x29680e(_0x2d6d97- -0x2df,_0x36bee6);}this[_0x595f49(0x0,0x4b)]['postProcessingPosition'][_0x595f49(0x8f,0xd1)]&&(this['primitives']['postProcessingPosition'][_0x35378a(0x4d4,0x541)][_0x35378a(0x4f9,0x4c5)]=this[_0x595f49(0x3f,-0x5)][_0x35378a(0x4c5,0x4ff)]);},'isDynamic':()=>this[_0x29680e(0x366,0x387)]['dynamic']})};}['reCreateWindTextures'](){this[_0x18fad4(-0xa4,-0x109)]['U'][_0x4fdc3a(0xfe,0x12b)]();function _0x18fad4(_0x1f57cf,_0x759392){return _0x38f889(_0x1f57cf-0x5e,_0x759392);}this['windTextures']['V']['destroy']();function _0x4fdc3a(_0x363559,_0x1d1003){return _0x38f889(_0x1d1003-0x239,_0x363559);}this[_0x4fdc3a(0x1f,0x55)]();}['updateWindData'](_0x1cfecb){function _0x3a3320(_0x17b6b0,_0x3de23c){return _0x9c3d64(_0x17b6b0,_0x3de23c-0x303);}function _0x12b997(_0x2ff32a,_0x5740d2){return _0x38f889(_0x5740d2-0x72,_0x2ff32a);}this[_0x3a3320(0x558,0x523)]=_0x1cfecb,this[_0x12b997(-0x82,-0xeb)]();}[_0x9c3d64(0x23b,0x2b0)](_0x57b867){const _0x2f254b=_0x57b867['flipY']!==undefined&&_0x57b867['flipY']!==this['options']['flipY'];this['options']=deepMerge(_0x57b867,this[_0x9f8db9(0x346,0x2dc)]);function _0x2387c2(_0x3d22e1,_0x306c03){return _0x38f889(_0x306c03-0x20c,_0x3d22e1);}function _0x9f8db9(_0x5c57bf,_0x251776){return _0x9c3d64(_0x251776,_0x5c57bf-0x94);}_0x2f254b&&this[_0x9f8db9(0x320,0x38f)]();}[_0x38f889(-0x15a,-0x11a)](_0x18cb96){const {array:_0x492d67}=_0x18cb96;let {min:_0x432051,max:_0x10b337}=_0x18cb96;const _0x423072=new Float32Array(_0x492d67['length']);_0x432051===undefined&&(console['warn'](_0x1d75f0(0x52b,0x52f)),_0x432051=Math['min'](..._0x492d67));_0x10b337===undefined&&(console[_0x1d75f0(0x4a4,0x51b)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x10b337=Math['max'](..._0x492d67));function _0x1d75f0(_0x1d9806,_0xb9a6db){return _0x9c3d64(_0x1d9806,_0xb9a6db-0x315);}const _0x573d28=Math['max'](Math['abs'](_0x432051),Math['abs'](_0x10b337));function _0xa3a2a0(_0x57aacb,_0x8eff7a){return _0x38f889(_0x8eff7a-0x29b,_0x57aacb);}for(let _0x5aa564=0x0;_0x5aa564<_0x492d67[_0x1d75f0(0x56a,0x5f4)];_0x5aa564++){const _0x2c5a46=_0x492d67[_0x5aa564]/_0x573d28;_0x423072[_0x5aa564]=_0x2c5a46;}return _0x423072;}['destroy'](){Object[_0x1cd3c3(0xc0,0x8c)](this['windTextures'])['forEach'](_0x74483d=>_0x74483d['destroy']()),Object['values'](this[_0x592a3e(0xe6,0x15a)])['forEach'](_0x562a06=>_0x562a06['destroy']());function _0x1cd3c3(_0x315650,_0x32f5e9){return _0x9c3d64(_0x315650,_0x32f5e9- -0x1a8);}Object[_0x1cd3c3(0x3d,0x8c)](this['primitives'])[_0x592a3e(0x20b,0x20a)](_0x577113=>_0x577113[_0x1cd3c3(0xb9,0x133)]());function _0x592a3e(_0x189cd7,_0x53a128){return _0x38f889(_0x53a128-0x31d,_0x189cd7);}this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x2ea95b,_0x4dfa50,_0x2426db,_0x41e71b){this[_0x38bc6a(0x4e9,0x4dd)]=_0x2ea95b,this['options']=_0x4dfa50,this['viewerParameters']=_0x2426db;function _0x38bc6a(_0x98183c,_0x20a11f){return _0x38f889(_0x98183c-0x6af,_0x20a11f);}function _0x371041(_0x16cf07,_0x4082b6){return _0x9c3d64(_0x4082b6,_0x16cf07- -0x391);}this['computing']=_0x41e71b,(typeof this['options'][_0x38bc6a(0x4bd,0x4e9)]!==_0x371041(-0xcd,-0x154)||this[_0x38bc6a(0x578,0x5d6)][_0x38bc6a(0x4bd,0x481)]<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0x371041(-0xdf,-0xc8)]['particlesTextureSize']=0x100),this['colorTable']=this[_0x38bc6a(0x586,0x520)](),this[_0x371041(-0x13d,-0xb6)]=this[_0x38bc6a(0x4b7,0x524)](),this['framebuffers']=this[_0x38bc6a(0x56e,0x585)](),this['primitives']=this['createPrimitives']();}['createRenderingTextures'](){const _0x47bbad={};_0x47bbad[_0x363fe6(0x3ad,0x330)]=this[_0x363fe6(0x3ad,0x36c)],_0x47bbad['width']=this['context'][_0x363fe6(0x434,0x435)],_0x47bbad['height']=this['context'][_0x363fe6(0x3b4,0x340)],_0x47bbad[_0x363fe6(0x441,0x3e3)]=PixelFormat['RGBA'],_0x47bbad[_0x3782ea(-0x53,-0x5a)]=PixelDatatype['UNSIGNED_BYTE'];function _0x363fe6(_0x3b497d,_0x2c6596){return _0x38f889(_0x3b497d-0x573,_0x2c6596);}const _0x331994=_0x47bbad,_0x1c2ad7={};_0x1c2ad7['context']=this['context'],_0x1c2ad7['width']=this[_0x363fe6(0x3ad,0x38a)]['drawingBufferWidth'],_0x1c2ad7['height']=this['context'][_0x363fe6(0x3b4,0x36a)],_0x1c2ad7['pixelFormat']=PixelFormat['DEPTH_COMPONENT'],_0x1c2ad7[_0x3782ea(-0xc4,-0x5a)]=PixelDatatype[_0x3782ea(-0x17e,-0xf5)];function _0x3782ea(_0x1cf48f,_0x11c162){return _0x38f889(_0x11c162-0xfb,_0x1cf48f);}const _0x4b97ee=_0x1c2ad7;return{'segmentsColor':new Texture(_0x331994),'segmentsDepth':new Texture(_0x4b97ee)};}[_0x38f889(-0x141,-0x11f)](){const _0x3f154e={};_0x3f154e['context']=this[_0x3bc398(0x50b,0x56d)],_0x3f154e[_0x7596dd(-0xae,-0x122)]=[this['textures']['segmentsColor']];function _0x3bc398(_0x497333,_0x3d2ffc){return _0x38f889(_0x497333-0x6d1,_0x3d2ffc);}function _0x7596dd(_0x4ca859,_0x1b75ae){return _0x9c3d64(_0x4ca859,_0x1b75ae- -0x423);}return _0x3f154e[_0x7596dd(-0x216,-0x22f)]=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0x3f154e)};}['destoryRenderingFramebuffers'](){function _0x3fcd14(_0xe8aeaf,_0x2e77e4){return _0x9c3d64(_0x2e77e4,_0xe8aeaf-0x2f9);}Object[_0x3fcd14(0x52d,0x5b3)](this['framebuffers'])['forEach'](_0x1122b2=>{_0x1122b2['destroy']();});}['createColorTableTexture'](){const _0x2d6da2=new Float32Array(this[_0x5049fa(-0x82,-0xad)][_0x5049fa(-0x11c,-0xe5)]['flatMap'](_0x36843a=>{function _0x50964e(_0xc4adcc,_0x5952f2){return _0x19f7a7(_0x5952f2,_0xc4adcc- -0x14a);}const _0x34962a=Color$1['fromCssColorString'](_0x36843a);function _0x1dda6d(_0x4d7ce0,_0xa12118){return _0x5049fa(_0x4d7ce0,_0xa12118-0x4ff);}return[_0x34962a[_0x50964e(0xfa,0xc1)],_0x34962a[_0x50964e(0xf3,0x96)],_0x34962a[_0x1dda6d(0x380,0x3f1)],_0x34962a['alpha']];}));function _0x5049fa(_0x104159,_0x69223f){return _0x38f889(_0x69223f-0x8a,_0x104159);}const _0x111230={};_0x111230[_0x19f7a7(0x2f3,0x28f)]=TextureMinificationFilter['LINEAR'],_0x111230[_0x19f7a7(0x2a7,0x30e)]=TextureMagnificationFilter['LINEAR'],_0x111230[_0x5049fa(-0x110,-0xc7)]=TextureWrap[_0x5049fa(-0xbb,-0xfa)],_0x111230['wrapT']=TextureWrap['CLAMP_TO_EDGE'];function _0x19f7a7(_0x2a36c7,_0x5f151a){return _0x38f889(_0x5f151a-0x430,_0x2a36c7);}return new Texture({'context':this['context'],'width':this['options']['colors']['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x111230),'source':{'width':this[_0x19f7a7(0x2f1,0x2f9)]['colors']['length'],'height':0x1,'arrayBufferView':_0x2d6da2}});}[_0x9c3d64(0x2a5,0x2c2)](){const _0x247b05=0x4,_0x273391=this[_0x59b5f9(0xb2,0x9a)]['particlesTextureSize'];let _0x3e5f7c=[];for(let _0x3368be=0x0;_0x3368be<_0x273391;_0x3368be++){for(let _0x266f6a=0x0;_0x266f6a<_0x273391;_0x266f6a++){for(let _0x75e5a0=0x0;_0x75e5a0<_0x247b05;_0x75e5a0++){_0x3e5f7c['push'](_0x3368be/_0x273391),_0x3e5f7c['push'](_0x266f6a/_0x273391);}}}_0x3e5f7c=new Float32Array(_0x3e5f7c);const _0x1e7a8d=this[_0x10e315(0x24,-0x58)]['particlesTextureSize']**0x2;let _0x178c3a=[];for(let _0x3ff009=0x0;_0x3ff009<_0x1e7a8d;_0x3ff009++){_0x178c3a['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}function _0x10e315(_0x4463ed,_0x317f26){return _0x9c3d64(_0x317f26,_0x4463ed- -0x28e);}_0x178c3a=new Float32Array(_0x178c3a);let _0x2f22f6=[];for(let _0x1a2527=0x0,_0x16be98=0x0;_0x1a2527<_0x1e7a8d;_0x1a2527++){_0x2f22f6['push'](_0x16be98+0x0,_0x16be98+0x1,_0x16be98+0x2,_0x16be98+0x2,_0x16be98+0x1,_0x16be98+0x3),_0x16be98+=_0x247b05;}_0x2f22f6=new Uint32Array(_0x2f22f6);const _0x4ceb06={};_0x4ceb06['componentDatatype']=ComponentDatatype['FLOAT'],_0x4ceb06[_0x10e315(-0x49,-0x2c)]=0x2,_0x4ceb06['values']=_0x3e5f7c;const _0x2180b6={};_0x2180b6['componentDatatype']=ComponentDatatype['FLOAT'];function _0x59b5f9(_0x2c0292,_0x225cd9){return _0x38f889(_0x2c0292-0x1e9,_0x225cd9);}_0x2180b6[_0x10e315(-0x49,-0x90)]=0x3,_0x2180b6['values']=_0x178c3a;const _0x5bd143=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x4ceb06),'normal':new GeometryAttribute(_0x2180b6)}),'indices':_0x2f22f6});return _0x5bd143;}[_0x9c3d64(0x279,0x256)](_0x36f5dd){const _0x3e7160={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x36f5dd};function _0x50a8d5(_0x563df1,_0x2df15a){return _0x9c3d64(_0x2df15a,_0x563df1- -0x2a);}return Appearance[_0x50a8d5(0x2a6,0x312)](!![],![],_0x3e7160);}[_0x9c3d64(0x34a,0x2e4)](){const _0x50eb12={};_0x50eb12['st']=0x0,_0x50eb12[_0x21c0e4(0x2ba,0x2b3)]=0x1;function _0x21c0e4(_0x4022b7,_0x43bd25){return _0x9c3d64(_0x4022b7,_0x43bd25- -0x39);}const _0x586e01={};_0x586e01[_0x21c0e4(0x2d0,0x29c)]=!![];const _0x55a7ae={};_0x55a7ae['enabled']=!![],_0x55a7ae['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x55a7ae[_0x14d993(0x527,0x577)]=WebGLRenderingContext['SRC_ALPHA'],_0x55a7ae[_0x21c0e4(0x259,0x2ba)]=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x6e412c={};_0x6e412c['viewport']=undefined;function _0x14d993(_0x2ed010,_0x3da1be){return _0x9c3d64(_0x2ed010,_0x3da1be-0x311);}_0x6e412c['depthTest']=_0x586e01,_0x6e412c['depthMask']=!![],_0x6e412c['blending']=_0x55a7ae;const _0x4480b9=new CustomPrimitive({'commandType':_0x21c0e4(0x1ff,0x204),'attributeLocations':_0x50eb12,'geometry':this[_0x21c0e4(0x264,0x289)](),'primitiveType':PrimitiveType[_0x14d993(0x5f8,0x5b2)],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0x21c0e4(0x1a1,0x213)][_0x21c0e4(0x22f,0x1ed)]['currentParticlesPosition'],'postProcessingPosition':()=>this[_0x21c0e4(0x1da,0x213)][_0x21c0e4(0x1f4,0x1ed)]['postProcessingPosition'],'particlesSpeed':()=>this['computing']['particlesTextures'][_0x14d993(0x56d,0x588)],'frameRateAdjustment':()=>this[_0x21c0e4(0x244,0x213)]['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{var _0x56d3bf,_0x54df94;function _0x1249a6(_0x3713e8,_0x3eaffa){return _0x21c0e4(_0x3eaffa,_0x3713e8- -0x399);}function _0x22a134(_0x4f3399,_0x497d0a){return _0x14d993(_0x497d0a,_0x4f3399- -0x4d0);}const _0x53115f=new Cartesian2(((_0x56d3bf=this['options']['domain'])===null||_0x56d3bf===void 0x0?void 0x0:_0x56d3bf[_0x22a134(0xfe,0xf0)])??this['computing']['windData'][_0x22a134(0x45,0x65)]['min'],((_0x54df94=this['options'][_0x22a134(0xc7,0x41)])===null||_0x54df94===void 0x0?void 0x0:_0x54df94[_0x22a134(0x139,0x14a)])??this['computing'][_0x1249a6(-0x1b2,-0x1c3)]['speed'][_0x22a134(0x139,0x15b)]);return _0x53115f;},'displayRange':()=>{var _0xfa9ecf,_0x14be5d;const _0x9b18c6=new Cartesian2(((_0xfa9ecf=this[_0x4975d5(0x44f,0x473)]['displayRange'])===null||_0xfa9ecf===void 0x0?void 0x0:_0xfa9ecf['min'])??this['computing']['windData']['speed']['min'],((_0x14be5d=this[_0x4975d5(0x402,0x473)][_0x55a344(0x0,-0x62)])===null||_0x14be5d===void 0x0?void 0x0:_0x14be5d['max'])??this[_0x4975d5(0x429,0x40d)]['windData']['speed']['max']);function _0x55a344(_0x574646,_0x4fef97){return _0x21c0e4(_0x4fef97,_0x574646- -0x1d9);}function _0x4975d5(_0x319a9a,_0x233a58){return _0x21c0e4(_0x319a9a,_0x233a58-0x1fa);}return _0x9b18c6;},'particleHeight':()=>this[_0x14d993(0x5fb,0x5c3)][_0x21c0e4(0x2af,0x2a1)]||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this[_0x14d993(0x4df,0x534)]['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{function _0x42a825(_0x1550a8,_0x31294e){return _0x14d993(_0x1550a8,_0x31294e- -0x452);}const _0x90be4e={};_0x90be4e['min']=0x1,_0x90be4e['max']=0x2;const _0x3e7fbc=this[_0x42a825(0xf3,0x171)]['lineWidth']||_0x90be4e;return new Cartesian2(_0x3e7fbc['min'],_0x3e7fbc['max']);},'lineLength':()=>{const _0x570673={};function _0x398a30(_0x5ad315,_0x12c9a8){return _0x14d993(_0x12c9a8,_0x5ad315- -0x134);}_0x570673['min']=0x14,_0x570673['max']=0x64;function _0x85b14c(_0x3ce7ce,_0x160a46){return _0x21c0e4(_0x160a46,_0x3ce7ce- -0x137);}const _0x446766=this[_0x398a30(0x48f,0x42d)][_0x398a30(0x4b6,0x518)]||_0x570673;return new Cartesian2(_0x446766['min'],_0x446766[_0x398a30(0x4d5,0x468)]);},'is3D':()=>this['viewerParameters'][_0x21c0e4(0x323,0x2bc)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures']['segmentsDepth']},'vertexShaderSource':ShaderManager[_0x21c0e4(0x2ee,0x2b4)](),'fragmentShaderSource':ShaderManager[_0x14d993(0x5ab,0x5cf)](),'rawRenderState':this[_0x14d993(0x596,0x567)](_0x6e412c)}),_0x386043={};return _0x386043['segments']=_0x4480b9,_0x386043;}[_0x9c3d64(0x245,0x200)](){function _0x559d9c(_0x33b58c,_0x3e0f3a){return _0x38f889(_0x33b58c-0x35c,_0x3e0f3a);}const _0x1d43e5=this[_0x559d9c(0x235,0x2ba)]();this['primitives']['segments']['geometry']=_0x1d43e5;const _0x3dc15b={};_0x3dc15b['context']=this[_0x559d9c(0x196,0x119)],_0x3dc15b['geometry']=_0x1d43e5,_0x3dc15b['attributeLocations']=this['primitives'][_0x5670ec(0x133,0x13c)][_0x559d9c(0x1d2,0x1e1)],_0x3dc15b[_0x5670ec(0x12b,0x1a5)]=BufferUsage['STATIC_DRAW'];const _0x1643e1=VertexArray['fromGeometry'](_0x3dc15b);function _0x5670ec(_0x50316c,_0x4b6914){return _0x38f889(_0x50316c-0x308,_0x4b6914);}this[_0x5670ec(0x195,0x1e1)]['segments']['commandToExecute']&&(this[_0x559d9c(0x1e9,0x271)]['segments']['commandToExecute'][_0x5670ec(0x191,0x198)]=_0x1643e1);}['onColorTableChange'](){this['colorTable']['destroy'](),this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x504146){const _0x542bf3=_0x504146['colors']&&JSON['stringify'](_0x504146[_0x484baa(0x2d2,0x2c4)])!==JSON['stringify'](this[_0x44765c(0x21e,0x246)]['colors']);function _0x484baa(_0x4d10a5,_0x590a0f){return _0x9c3d64(_0x590a0f,_0x4d10a5-0x58);}this[_0x44765c(0x1d7,0x246)]=deepMerge(_0x504146,this['options']);function _0x44765c(_0xf9c1df,_0x3297c6){return _0x9c3d64(_0xf9c1df,_0x3297c6- -0x6c);}_0x542bf3&&this['onColorTableChange']();}['destroy'](){Object[_0x2a6432(-0xd5,-0x9f)](this['framebuffers'])['forEach'](_0x1983ba=>{_0x1983ba['destroy']();});function _0x38f905(_0x108478,_0x593482){return _0x38f889(_0x108478-0x6fe,_0x593482);}Object['values'](this[_0x2a6432(-0x18,-0x5d)])['forEach'](_0x1cebbe=>{_0x1cebbe['destroy']();});function _0x2a6432(_0x56f08a,_0xa820b){return _0x9c3d64(_0x56f08a,_0xa820b- -0x2d3);}this['colorTable'][_0x2a6432(-0x7f,0x8)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x147298,_0x926c05,_0x371c18,_0xee3eeb,_0x54655f){this[_0x4fcb31(-0x16f,-0x128)]=_0x147298;function _0x4fcb31(_0x5eca91,_0x322cd7){return _0x38f889(_0x322cd7-0x9e,_0x5eca91);}this['options']=_0x371c18,this[_0x4fcb31(-0x94,-0xb5)]=_0xee3eeb;function _0x3dc232(_0x3fbd75,_0x3272d1){return _0x38f889(_0x3fbd75-0x6b2,_0x3272d1);}this['computing']=new WindParticlesComputing(_0x147298,_0x926c05,_0x371c18,_0xee3eeb,_0x54655f),this['rendering']=new WindParticlesRendering(_0x147298,_0x371c18,_0xee3eeb,this['computing']),this['clearFramebuffers']();}[_0x9c3d64(0x266,0x29e)](){function _0x18588c(_0x2d0ba9,_0x4bda16){return _0x38f889(_0x2d0ba9-0x3b9,_0x4bda16);}function _0x3a58a6(_0x1e17ab,_0x1e6fe1){return _0x38f889(_0x1e6fe1- -0x8,_0x1e17ab);}const _0x31c4dd=[this['computing'][_0x18588c(0x246,0x2b4)][_0x3a58a6(-0x166,-0x1e3)],this['computing'][_0x3a58a6(-0x13b,-0x17b)]['updatePosition'],this['computing']['primitives'][_0x18588c(0x28a,0x2c2)],this[_0x3a58a6(-0x152,-0x16e)]['primitives']['segments']];return _0x31c4dd;}['clearFramebuffers'](){const _0x4552f7=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x3f4282(-0xa8,-0x127)]});function _0x2427ac(_0x42bdd3,_0x382f4d){return _0x9c3d64(_0x382f4d,_0x42bdd3- -0x324);}function _0x3f4282(_0x4863b8,_0x454f04){return _0x38f889(_0x4863b8-0x137,_0x454f04);}Object['keys'](this['rendering'][_0x3f4282(-0x52,0x1e)])[_0x3f4282(0x24,0xc)](_0x5efd2b=>{function _0x59a1d1(_0x58f528,_0x1d79fb){return _0x2427ac(_0x1d79fb-0x29e,_0x58f528);}function _0x487a57(_0x9ea118,_0x4fc957){return _0x2427ac(_0x4fc957-0x1be,_0x9ea118);}_0x4552f7['framebuffer']=this[_0x59a1d1(0x20f,0x1fd)]['framebuffers'][_0x5efd2b],_0x4552f7['execute'](this[_0x59a1d1(0x220,0x19d)]);});}['changeOptions'](_0x1d1473){function _0x450b4e(_0x3f1406,_0x2a3632){return _0x9c3d64(_0x2a3632,_0x3f1406- -0x34a);}let _0xaaea47=![];_0x1d1473['particlesTextureSize']&&this['options'][_0x524931(0x134,0x160)]!==_0x1d1473['particlesTextureSize']&&(_0xaaea47=!![]);const _0x4c223e=deepMerge(_0x1d1473,this['options']);if(_0x4c223e['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this[_0x524931(0x263,0x21b)]=_0x4c223e,this[_0x450b4e(-0xc7,-0xfc)][_0x524931(0x26d,0x219)](_0x1d1473);function _0x524931(_0xe0d7b5,_0x32696a){return _0x38f889(_0x32696a-0x352,_0xe0d7b5);}this['computing'][_0x450b4e(-0x9a,-0x30)](_0x1d1473),_0xaaea47&&(this[_0x524931(0x153,0x1b5)]['destroyParticlesTextures'](),this['computing'][_0x450b4e(-0x12d,-0xa2)](),this['rendering']['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x848b0c){function _0x5309e5(_0xc9ad15,_0x2b4091){return _0x38f889(_0x2b4091-0x61f,_0xc9ad15);}function _0x230e12(_0x517234,_0x41e94c){return _0x9c3d64(_0x517234,_0x41e94c-0x28d);}this['viewerParameters']=_0x848b0c,this['computing']['viewerParameters']=_0x848b0c,this[_0x5309e5(0x45b,0x4b9)][_0x230e12(0x4e1,0x523)]=_0x848b0c;}['destroy'](){function _0x2f54bf(_0x11fe29,_0x2a779c){return _0x38f889(_0x11fe29-0x55c,_0x2a779c);}this['computing']['destroy'](),this[_0x2f54bf(0x3f6,0x3a3)]['destroy']();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x9c3d64(0x252,0x227)],_0x206a51={};function _0x443c(_0x3fe332,_0x2b575b){const _0x308976=_0x3089();return _0x443c=function(_0x443c7d,_0x5eb042){_0x443c7d=_0x443c7d-0x131;let _0x4c59fa=_0x308976[_0x443c7d];return _0x4c59fa;},_0x443c(_0x3fe332,_0x2b575b);}function _0x3089(){const _0x2eb758=['isDynamic','windTextures','random','off','getU','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','normal','getSegmentDrawVertexShader','pixelSize','get','1224954HwDsjM','toGridXY','_map','blendFuncDestination','flipY','sceneMode','vertexShaderSource','ymin','max','update','794127EjlhVr','destroyParticlesTextures','commandToExecute','stroke','west','lineTo','bind','colorTextures','geometry','now','_tomap','sin','dropRate','frameTime','fragmentShaderSource','mouseDown','createRenderingTextures','vmax','getUpdatePositionShader','depthTexture','prototype','green','particlesTextureSize','SceneMode','UNSIGNED_INT','_updateIng','visibility','EventType','red','preExecute','width','onParticlesTextureSizeChange','ymax','LayerUtil','data','speed','createWindTextures','warn','age','maxAge','_speedRate','OPAQUE','particleSystem','bufferUsage','_updateIng2','calculateSpeed','fromGeometry','top','_pointerEvents','displayRange','_mountedHook','segments','clearCommand','getUVByXY','scene','camera','particles','min\x20is\x20undefined,\x20calculate\x20min','alt','pointerEvents','createParticlesTextures','position','xmax','windData','_calcUV','Cartesian2','context','windField','tlat','particlesTextures','BaseLayer','unbindEvent','grid','drawingBufferHeight','lat','none','longitude','_removedHook','_onMouseDownEvent','1742905osOzxZ','sources','mouseHidden','east','values','getParticles','height','clientHeight','dynamic','updatePosition','getContext','show','_addedHook','Draw','canvasWidth','setData','8cQeNkg','hidden','call','abs','1936796DdsVPf','componentsPerAttribute','612240iSHoVx','mouse_move','minificationFilter','south','primitiveType','fromCache','computing','WindLayer','getUVByPoint','toDegrees','CanvasWindField','blue','speedRate','getRandomLatLng','textures','clear','createRawRenderState','bounds','willReadFrequently','_calc_speedRate','mouseUp','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','__proto__','morphComplete','previousParticlesPosition','attributeLocations','framebuffers','rawRenderState','particlesNumber','cancelAnimationFrame','create','CLAMP_TO_EDGE','blendFuncSource','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','color','floor','713480KYeSpi','modelMatrix','lng','getDataAtLonLat','latRange','auto','speedFactor','lineWidth','vertexArray','addEventListener','owner','nextParticlesPosition','primitives','particlesSpeed','removeEventListener','STATIC_DRAW','colors','_onMouseMoveEvent','Math','canvasWind','WindUtil','4ZPDlRv','outputTexture','_bilinearInterpolation','203VuCEZZ','rendering','mode','worker','domain','toWindowCoordinates','destination-in','_onMouseUpEvent','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','visible','reCreateWindTextures','default','CanvasWindLayer','processWindData','frameRate','globalCompositeOperation','isInExtent','resize','pixelDatatype','_colorRamp','viewerParameters','frameState.commandList\x20is\x20undefined','wrapS','frameRateMonitor','canvas','layer','ColorRamp','rows','getPrimitives','getOwnPropertyDescriptor','NEAREST','TRIANGLES','_setOptionsHook','style','framebuffer','type','setDate','SCENE3D','createRenderingFramebuffers','55tNjOZA','drawingBufferWidth','Compute','north','removeChild','redraw','updateWindData','updateOptions','24018bGiPFS','options','xmin','MAX_VALUE','useViewerBounds','mouseMove','pixelFormat','uniformMap','lastFramesPerSecond','postProcessingPosition','cols','canvasContext','min','getSegmentDrawFragmentShader','tlng','createColorTableTexture','umin','createSegmentsGeometry','refreshTimer','number','clientWidth','postMessage','magnificationFilter','_randomParticle','cos','MIN_VALUE','atan2','sqrt','rectangle','_animateFrame','_canrefresh','getDefaultRenderState','remove','array','initFrameRate','globe','enabled','forEach','Cesium','register','lineLength','fixedHeight','destroy','value','push','setOptions','length','_createCanvas','shaderProgram','updateViewerParameters','FLOAT','createPrimitives','beginPath'];_0x3089=function(){return _0x2eb758;};return _0x3089();}_0x206a51['min']=0x1,_0x206a51['max']=0x2;const _0x8dde15={};_0x8dde15['min']=0x14,_0x8dde15['max']=0x64;const _0x22314e={};_0x22314e['particlesTextureSize']=0x64,_0x22314e['fixedHeight']=0x0,_0x22314e[_0x9c3d64(0x2cf,0x271)]=_0x206a51,_0x22314e['lineLength']=_0x8dde15,_0x22314e[_0x38f889(-0x179,-0x178)]=0x1,_0x22314e[_0x38f889(-0x1fc,-0x22d)]=0.003,_0x22314e['dropRateBump']=0.001,_0x22314e[_0x9c3d64(0x25b,0x27a)]=['rgb(206,255,255)'],_0x22314e['flipY']=![],_0x22314e['dynamic']=!![];const DEF_OPTIONS=_0x22314e;class WindLayer extends BaseLayer$1{constructor(_0x2da327={}){_0x2da327={...DEF_OPTIONS,..._0x2da327},super(_0x2da327);function _0x3f5242(_0x1a09a0,_0x2884b3){return _0x38f889(_0x1a09a0-0x9e,_0x2884b3);}this[_0x3f5242(-0xa9,-0x30)](_0x2da327,_0x2da327);}get['layer'](){return this['primitives'];}get['data'](){function _0x26d09c(_0x448a79,_0x4bbf01){return _0x9c3d64(_0x4bbf01,_0x448a79- -0x476);}return this['options'][_0x26d09c(-0x273,-0x29c)];}set['data'](_0x21793b){function _0x414bf4(_0x333b1b,_0x3634bc){return _0x38f889(_0x3634bc-0x5aa,_0x333b1b);}function _0x594031(_0x5e5e56,_0x16903e){return _0x9c3d64(_0x5e5e56,_0x16903e-0x294);}this[_0x594031(0x5c2,0x546)]['data']=_0x21793b,this[_0x594031(0x522,0x4d3)](_0x21793b);}get['colors'](){function _0x5e21aa(_0x30ce4b,_0x15b046){return _0x38f889(_0x15b046-0x704,_0x30ce4b);}return this['options'][_0x5e21aa(0x5fa,0x595)];}set['colors'](_0x5d5403){this['options']['colors']=_0x5d5403;const _0x5eac55={};function _0x1e2065(_0x5a2efd,_0x105caf){return _0x38f889(_0x105caf-0x58,_0x5a2efd);}_0x5eac55[_0x4dce7f(0x51f,0x4fc)]=_0x5d5403;function _0x4dce7f(_0x32cd29,_0x33c71e){return _0x38f889(_0x33c71e-0x66b,_0x32cd29);}this['_setOptionsHook'](this[_0x4dce7f(0x55e,0x534)],_0x5eac55);}['_mountedHook'](){}[_0x38f889(-0x1ad,-0x1a7)](){this[_0x32b8a1(-0xc3,-0x11a)]=this['_map']['scene'],this[_0x32b8a1(-0xc2,-0xf4)]=this[_0x33689d(0x524,0x4b9)][_0x32b8a1(-0xc2,-0x9e)];this['options']['data']&&this['setData'](this['options']['data']);function _0x32b8a1(_0x5da2a6,_0x194c50){return _0x38f889(_0x5da2a6-0x10f,_0x194c50);}if(!this['windData'])return;function _0x33689d(_0x53cc67,_0x3be315){return _0x9c3d64(_0x3be315,_0x53cc67-0x232);}this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0x32b8a1(-0x56,-0xa2)]},this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene'][_0x33689d(0x455,0x3d3)],this['windData'],this[_0x33689d(0x4e4,0x538)],this['viewerParameters'],this[_0x32b8a1(-0xc3,-0x108)]),this['primitives']=this[_0x33689d(0x43d,0x4aa)][_0x33689d(0x4d0,0x4b2)](),this['primitives']['forEach'](_0x268f1f=>{this['scene']['primitives']['add'](_0x268f1f);}),this[_0x32b8a1(-0xc2,-0x4a)]['percentageChanged']=0.01,this['camera']['changed']['addEventListener'](this[_0x32b8a1(0x8,0x75)][_0x33689d(0x532,0x50c)](this)),this['scene'][_0x33689d(0x48f,0x4f9)][_0x32b8a1(-0x67,-0xb6)](this[_0x32b8a1(0x8,-0x83)]['bind'](this)),window['addEventListener']('resize',this[_0x32b8a1(0x8,-0x55)]['bind'](this));}['_removedHook'](){function _0xdc1f05(_0x540333,_0x20517a){return _0x38f889(_0x540333-0x86,_0x20517a);}this[_0xdc1f05(-0x14b,-0x1a1)]['changed'][_0xdc1f05(-0xeb,-0x11f)](this[_0x54f95f(0x147,0xd0)][_0xdc1f05(-0x63,-0x2e)](this));function _0x54f95f(_0x405477,_0x292391){return _0x9c3d64(_0x292391,_0x405477- -0x19b);}this['scene'][_0xdc1f05(-0x106,-0x85)][_0x54f95f(0xdd,0x15b)](this[_0x54f95f(0x147,0x14b)]['bind'](this)),window['removeEventListener'](_0x54f95f(0xf8,0x11d),this['updateViewerParameters'][_0x54f95f(0x165,0x112)](this)),this['primitives']&&(this['primitives']['forEach'](_0x4862f5=>{function _0x31d417(_0x23842f,_0x31cf5f){return _0xdc1f05(_0x31cf5f-0x626,_0x23842f);}this['scene']['primitives'][_0x31d417(0x57a,0x594)](_0x4862f5);}),delete this['primitives']),this[_0xdc1f05(-0x158,-0x109)]&&(this['particleSystem']['destroy'](),delete this[_0xdc1f05(-0x158,-0x1af)]);}['setData'](_0x5c9e10,_0x548d2b){function _0x51f38a(_0x31f3e9,_0x5f150f){return _0x9c3d64(_0x31f3e9,_0x5f150f-0x2f9);}this[_0x30938e(0x2,-0x59)]=this[_0x30938e(-0x1,0x16)](_0x5c9e10);function _0x30938e(_0x379fa4,_0x1fff73){return _0x38f889(_0x1fff73-0x170,_0x379fa4);}if(_0x548d2b){this['_removedHook'](),this['_addedHook']();return;}this[_0x51f38a(0x4ec,0x504)]?(this[_0x30938e(-0x84,-0x6e)][_0x30938e(0x3a,-0x2d)][_0x51f38a(0x596,0x5a8)](this['windData']),this[_0x51f38a(0x536,0x510)]['requestRender']()):this['_addedHook']();}[_0x38f889(-0x147,-0x1a1)](_0x2909af,_0x496ed7){function _0x3ceb00(_0x142e8d,_0x2d3953){return _0x9c3d64(_0x142e8d,_0x2d3953-0x321);}function _0x5616f5(_0x3efc0e,_0x149619){return _0x38f889(_0x3efc0e-0x190,_0x149619);}this[_0x3ceb00(0x51e,0x52c)]&&(this[_0x3ceb00(0x569,0x52c)]['changeOptions'](_0x496ed7),this[_0x5616f5(-0x42,-0xc0)]['requestRender']());}['processWindData'](_0x4f2bea){var _0x45dafe,_0x2ae6cd;const _0x2e1dea={..._0x4f2bea},_0x242061=_0x2e1dea;!_0x242061['height']&&_0x242061['rows']&&(_0x242061[_0x3dab74(-0xb0,-0xfb)]=_0x242061[_0x3dab74(-0xeb,-0x94)]);function _0x49d5d7(_0x574460,_0x19874e){return _0x9c3d64(_0x574460,_0x19874e- -0x2af);}function _0x3dab74(_0x2ceb7b,_0x573773){return _0x38f889(_0x573773-0xb8,_0x2ceb7b);}!_0x242061['width']&&_0x242061[_0x3dab74(-0x6a,-0x76)]&&(_0x242061['width']=_0x242061['cols']);!_0x242061['bounds']&&(_0x242061[_0x3dab74(-0x137,-0xda)]={'west':_0x242061['xmin'],'south':_0x242061['ymin'],'east':_0x242061[_0x49d5d7(-0xbc,-0x90)],'north':_0x242061['ymax']});if(!_0x242061['u']){const _0xa4bc66={};_0xa4bc66['array']=_0x4f2bea['udata'],_0xa4bc66[_0x3dab74(-0x2b,-0x74)]=_0x4f2bea[_0x3dab74(-0x6e,-0x70)],_0xa4bc66['max']=_0x4f2bea['umax'],_0x242061['u']=_0xa4bc66;}if(!_0x242061['v']){const _0x15bef7={};_0x15bef7['array']=_0x4f2bea['vdata'],_0x15bef7[_0x49d5d7(0x64,0xe)]=_0x4f2bea['vmin'],_0x15bef7[_0x3dab74(-0x52,-0x39)]=_0x4f2bea[_0x49d5d7(-0x124,-0xbd)],_0x242061['v']=_0x15bef7;}if(((_0x45dafe=_0x242061[_0x49d5d7(-0x7c,-0xab)])===null||_0x45dafe===void 0x0?void 0x0:_0x45dafe['min'])===undefined||((_0x2ae6cd=_0x242061[_0x49d5d7(-0xd2,-0xab)])===null||_0x2ae6cd===void 0x0?void 0x0:_0x2ae6cd[_0x49d5d7(0xa5,0x49)])===undefined||_0x242061['speed']['array']===undefined){const _0x4ed60a={'array':new Float32Array(_0x242061['u']['array']['length']),'min':Number[_0x3dab74(-0x5b,-0x7d)],'max':Number[_0x49d5d7(-0x2,0x1b)]};for(let _0x38d3ab=0x0;_0x38d3ab<_0x242061['u']['array'][_0x3dab74(0xa,-0x52)];_0x38d3ab++){_0x4ed60a['array'][_0x38d3ab]=Math[_0x3dab74(-0x19,-0x65)](_0x242061['u']['array'][_0x38d3ab]*_0x242061['u'][_0x3dab74(-0xd1,-0x5f)][_0x38d3ab]+_0x242061['v']['array'][_0x38d3ab]*_0x242061['v']['array'][_0x38d3ab]),_0x4ed60a['array'][_0x38d3ab]!==0x0&&(_0x4ed60a[_0x49d5d7(-0x23,0xe)]=Math['min'](_0x4ed60a[_0x3dab74(-0x6e,-0x74)],_0x4ed60a['array'][_0x38d3ab]),_0x4ed60a[_0x3dab74(-0x9d,-0x39)]=Math[_0x3dab74(-0x2c,-0x39)](_0x4ed60a['max'],_0x4ed60a['array'][_0x38d3ab]));}_0x242061[_0x49d5d7(-0x74,-0xab)]=_0x4ed60a;}return _0x242061;}[_0x9c3d64(0x266,0x2e2)](){var _0x444ded;const _0xf03297=this['scene'],_0x37fb6d=_0xf03297[_0x5a0995(-0x1f6,-0x1a1)],_0x158ef1={};_0x158ef1['x']=0x0,_0x158ef1['y']=0x0;const _0x4635b9={};_0x4635b9['x']=0x0,_0x4635b9['y']=_0x37fb6d[_0x5a0995(-0x259,-0x25a)];const _0x4f2a18={};_0x4f2a18['x']=_0x37fb6d[_0x5a0995(-0x1cb,-0x1da)],_0x4f2a18['y']=0x0;function _0x5a0995(_0x1db545,_0x51aea3){return _0x38f889(_0x1db545- -0xa7,_0x51aea3);}const _0x80bae8={};_0x80bae8['x']=_0x37fb6d[_0x545be9(-0x1c2,-0x1b5)],_0x80bae8['y']=_0x37fb6d['clientHeight'];const _0x9095f9=[_0x158ef1,_0x4635b9,_0x4f2a18,_0x80bae8];let _0x1bd56b=0xb4,_0x1b24a7=-0xb4,_0x30cb14=0x5a,_0x32f329=-0x5a,_0x4ae8a6=![];for(const _0x319e46 of _0x9095f9){const _0x57a968=_0xf03297['camera']['pickEllipsoid'](new Cesium$1[(_0x5a0995(-0x26e,-0x26c))](_0x319e46['x'],_0x319e46['y']),_0xf03297['globe']['ellipsoid']);if(!_0x57a968){_0x4ae8a6=!![];break;}const _0x31df41=_0xf03297[_0x5a0995(-0x1bc,-0x1b5)]['ellipsoid']['cartesianToCartographic'](_0x57a968),_0x25304c=Cesium$1['Math']['toDegrees'](_0x31df41[_0x5a0995(-0x263,-0x1e9)]),_0x30672e=Cesium$1['Math'][_0x5a0995(-0x241,-0x28d)](_0x31df41['latitude']);_0x1bd56b=Math['min'](_0x1bd56b,_0x25304c),_0x1b24a7=Math['max'](_0x1b24a7,_0x25304c),_0x30cb14=Math[_0x545be9(-0x1ca,-0x233)](_0x30cb14,_0x30672e),_0x32f329=Math['max'](_0x32f329,_0x30672e);}if(!_0x4ae8a6){const _0x1fb4fa=new Cesium$1['Cartesian2'](Math[_0x545be9(-0x18f,-0x118)](this['windData'][_0x545be9(-0x230,-0x1e8)]['west'],_0x1bd56b),Math[_0x545be9(-0x1ca,-0x1be)](this[_0x5a0995(-0x270,-0x2ae)][_0x545be9(-0x230,-0x1e7)][_0x5a0995(-0x25d,-0x2cf)],_0x1b24a7)),_0x2a8402=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds'][_0x545be9(-0x23e,-0x285)],_0x30cb14),Math['min'](this['windData']['bounds']['north'],_0x32f329)),_0x1f1486=(_0x1fb4fa['y']-_0x1fb4fa['x'])*0.05,_0x322b9b=(_0x2a8402['y']-_0x2a8402['x'])*0.05;_0x1fb4fa['x']=Math['max'](this['windData'][_0x545be9(-0x230,-0x25a)][_0x5a0995(-0x192,-0x10e)],_0x1fb4fa['x']-_0x1f1486),_0x1fb4fa['y']=Math[_0x545be9(-0x1ca,-0x21b)](this[_0x545be9(-0x267,-0x266)]['bounds'][_0x5a0995(-0x25d,-0x2c6)],_0x1fb4fa['y']+_0x1f1486),_0x2a8402['x']=Math[_0x545be9(-0x18f,-0x186)](this[_0x545be9(-0x267,-0x2c8)]['bounds'][_0x5a0995(-0x247,-0x1cc)],_0x2a8402['x']-_0x322b9b),_0x2a8402['y']=Math['min'](this[_0x5a0995(-0x270,-0x27f)]['bounds'][_0x5a0995(-0x1e4,-0x268)],_0x2a8402['y']+_0x322b9b),this[_0x5a0995(-0x1fa,-0x27b)]['lonRange']=_0x1fb4fa,this['viewerParameters'][_0x5a0995(-0x222,-0x1e8)]=_0x2a8402;const _0x42cc90=this[_0x5a0995(-0x270,-0x2ec)]['bounds']['east']-this[_0x545be9(-0x267,-0x202)]['bounds']['west'],_0x38b2cd=this[_0x5a0995(-0x270,-0x289)]['bounds'][_0x545be9(-0x1db,-0x17b)]-this[_0x5a0995(-0x270,-0x2bd)][_0x5a0995(-0x239,-0x1e0)]['south'],_0x527502=(_0x1fb4fa['y']-_0x1fb4fa['x'])/_0x42cc90,_0x2ec4bb=(_0x2a8402['y']-_0x2a8402['x'])/_0x38b2cd,_0x3ff3ff=Math['min'](_0x527502,_0x2ec4bb),_0x5add4c=0x3e8*_0x3ff3ff;_0x5add4c>0x0&&(this['viewerParameters'][_0x545be9(-0x199,-0x200)]=Math['max'](0x0,Math['min'](0x3e8,_0x5add4c)));}function _0x545be9(_0x3ae6e,_0x490dfe){return _0x9c3d64(_0x490dfe,_0x3ae6e- -0x487);}this['viewerParameters'][_0x5a0995(-0x19b,-0x1e9)]=this[_0x545be9(-0x270,-0x2ba)][_0x5a0995(-0x20c,-0x257)],(_0x444ded=this['particleSystem'])===null||_0x444ded===void 0x0||_0x444ded['applyViewerParameters'](this['viewerParameters']);}[_0x38f889(-0x17c,-0x109)](_0x4e3884,_0x342fa7){const {bounds:_0x30198b,width:_0x54f0ea,height:_0x4cf485,u:_0x4bb0bc,v:_0x5d3b6e,speed:_0x2b1943}=this['windData'],{flipY:_0xea4e82}=this[_0x5be051(0xcc,0x44)];if(_0x4e3884<_0x30198b['west']||_0x4e3884>_0x30198b['east']||_0x342fa7<_0x30198b['south']||_0x342fa7>_0x30198b['north'])return null;const _0x4b7ba0=(_0x4e3884-_0x30198b['west'])/(_0x30198b[_0x2e74af(0x96,0x6d)]-_0x30198b['west'])*(_0x54f0ea-0x1);let _0x82206e=(_0x342fa7-_0x30198b[_0x5be051(0x63,0x6a)])/(_0x30198b[_0x5be051(0xc6,0x145)]-_0x30198b['south'])*(_0x4cf485-0x1);_0xea4e82&&(_0x82206e=_0x4cf485-0x1-_0x82206e);const _0xe13260=Math[_0x5be051(0x83,0x88)](_0x4b7ba0),_0x54e2bb=Math[_0x5be051(0x83,0x9d)](_0x82206e);function _0x2e74af(_0x42a59d,_0x2e19de){return _0x9c3d64(_0x2e19de,_0x42a59d- -0x19d);}const _0x26324b=Math[_0x2e74af(0xcc,0x106)](_0x4b7ba0),_0x5e2d3a=Math['min'](_0x26324b+0x1,_0x54f0ea-0x1),_0x5c1173=Math[_0x5be051(0x83,0x91)](_0x82206e),_0x34e80e=Math['min'](_0x5c1173+0x1,_0x4cf485-0x1),_0x5d7949=_0x4b7ba0-_0x26324b,_0xf46c03=_0x82206e-_0x5c1173,_0x4007c3=_0x54e2bb*_0x54f0ea+_0xe13260,_0x8f27c8=_0x5c1173*_0x54f0ea+_0x26324b,_0x4d741b=_0x5c1173*_0x54f0ea+_0x5e2d3a,_0x3b389b=_0x34e80e*_0x54f0ea+_0x26324b,_0x1283ea=_0x34e80e*_0x54f0ea+_0x5e2d3a,_0x21eb0c=_0x4bb0bc[_0x2e74af(0x135,0x167)][_0x8f27c8],_0x1ba4f0=_0x4bb0bc[_0x5be051(0xec,0x69)][_0x4d741b],_0x5aea2b=_0x4bb0bc[_0x2e74af(0x135,0x119)][_0x3b389b],_0x5eebe3=_0x4bb0bc['array'][_0x1283ea],_0x30862f=(0x1-_0x5d7949)*(0x1-_0xf46c03)*_0x21eb0c+_0x5d7949*(0x1-_0xf46c03)*_0x1ba4f0+(0x1-_0x5d7949)*_0xf46c03*_0x5aea2b+_0x5d7949*_0xf46c03*_0x5eebe3,_0x37c68c=_0x5d3b6e['array'][_0x8f27c8],_0x37821e=_0x5d3b6e['array'][_0x4d741b],_0x306bc5=_0x5d3b6e[_0x2e74af(0x135,0x126)][_0x3b389b],_0x2ba4f9=_0x5d3b6e['array'][_0x1283ea],_0x59fc07=(0x1-_0x5d7949)*(0x1-_0xf46c03)*_0x37c68c+_0x5d7949*(0x1-_0xf46c03)*_0x37821e+(0x1-_0x5d7949)*_0xf46c03*_0x306bc5+_0x5d7949*_0xf46c03*_0x2ba4f9,_0x954224=Math[_0x2e74af(0x12f,0x179)](_0x30862f*_0x30862f+_0x59fc07*_0x59fc07),_0x33c305={};_0x33c305['u']=_0x4bb0bc['array'][_0x4007c3],_0x33c305['v']=_0x5d3b6e[_0x2e74af(0x135,0xc1)][_0x4007c3];function _0x5be051(_0x3301e2,_0x483b06){return _0x9c3d64(_0x483b06,_0x3301e2- -0x1e6);}_0x33c305['speed']=_0x2b1943[_0x5be051(0xec,0x116)][_0x4007c3];const _0x448ec3={};_0x448ec3['u']=_0x30862f,_0x448ec3['v']=_0x59fc07,_0x448ec3['speed']=_0x954224;const _0x30f00e={};return _0x30f00e['original']=_0x33c305,_0x30f00e['interpolated']=_0x448ec3,_0x30f00e;}}mars3d__namespace[_0x9c3d64(0x248,0x202)][_0x9c3d64(0x338,0x2d8)]('wind',WindLayer),mars3d__namespace[_0x9c3d64(0x2a6,0x29b)][_0x38f889(-0x19c,-0x161)]=WindLayer;class CanvasParticle{constructor(){this['lng']=null;function _0x18f066(_0x3e7531,_0x581dac){return _0x38f889(_0x3e7531- -0x34,_0x581dac);}this['lat']=null,this[_0x18f066(-0x15e,-0x122)]=null,this['tlat']=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x31fe1c in this){delete this[_0x31fe1c];}}}class CanvasWindField{constructor(_0x24e48c){function _0x49c09e(_0x13d40b,_0x3cc244){return _0x38f889(_0x13d40b-0x34f,_0x3cc244);}this[_0x49c09e(0x244,0x24a)](_0x24e48c);}get['speedRate'](){function _0x46813d(_0x20c714,_0x422798){return _0x38f889(_0x20c714-0x50a,_0x422798);}return this[_0x46813d(0x32a,0x2b2)];}set[_0x38f889(-0x197,-0x15f)](_0x43a69e){function _0x53016c(_0x56e7c2,_0x1c5d1d){return _0x38f889(_0x56e7c2-0x5f8,_0x1c5d1d);}this[_0x335dc2(-0x143,-0x10d)]=(0x64-(_0x43a69e>0x63?0x63:_0x43a69e))*0x64;function _0x335dc2(_0xf92c5e,_0x5afc9){return _0x38f889(_0xf92c5e-0x9d,_0x5afc9);}this[_0x53016c(0x468,0x48d)]=[(this['xmax']-this['xmin'])/this['_speedRate'],(this[_0x335dc2(-0x14b,-0x10f)]-this[_0x53016c(0x506,0x52d)])/this['_speedRate']];}get['maxAge'](){return this['_maxAge'];}set[_0x38f889(-0x1e1,-0x20d)](_0x26b28d){this['_maxAge']=_0x26b28d;}['setOptions'](_0x49e308){this['options']=_0x49e308,this[_0x5b916f(0x507,0x4bb)]=_0x49e308[_0x5b916f(0x46d,0x4bb)]||0x78,this['speedRate']=_0x49e308['speedRate']||0x32,this['particles']=[];function _0x272d1f(_0x38a172,_0x217568){return _0x9c3d64(_0x217568,_0x38a172-0x1b0);}function _0x5b916f(_0x2ee558,_0x18b3aa){return _0x38f889(_0x18b3aa-0x69c,_0x2ee558);}const _0x4af388=_0x49e308['particlesNumber']||0x1000;for(let _0x16a008=0x0;_0x16a008<_0x4af388;_0x16a008++){const _0x57047c=this[_0x5b916f(0x577,0x57b)](new CanvasParticle());this[_0x5b916f(0x546,0x4cc)][_0x272d1f(0x48d,0x449)](_0x57047c);}}['setDate'](_0x1d02f9){this[_0x4b9a1c(-0x11a,-0xed)]=_0x1d02f9[_0x9bb0f9(0x1c9,0x221)],this[_0x4b9a1c(-0x125,-0xcf)]=_0x1d02f9['cols'];function _0x4b9a1c(_0x15f8dc,_0x48871f){return _0x38f889(_0x48871f-0x5f,_0x15f8dc);}this['xmin']=_0x1d02f9['xmin'],this['xmax']=_0x1d02f9[_0x4b9a1c(-0xfa,-0x16b)],this[_0x4b9a1c(-0x6b,-0x93)]=_0x1d02f9['ymin'];function _0x9bb0f9(_0x33c32e,_0x1fb107){return _0x38f889(_0x1fb107-0x36d,_0x33c32e);}this['ymax']=_0x1d02f9['ymax'],this['grid']=[];const _0x5d4ae5=_0x1d02f9['udata'],_0x115fd9=_0x1d02f9['vdata'];let _0x1e0f71=![];_0x5d4ae5['length']===this[_0x9bb0f9(0x1e3,0x221)]&&_0x5d4ae5[0x0]['length']===this[_0x9bb0f9(0x255,0x23f)]&&(_0x1e0f71=!![]);let _0x368775=0x0,_0x5b25de=null,_0x617aa4=null;for(let _0x46d7c6=0x0;_0x46d7c6<this[_0x4b9a1c(-0x10b,-0xed)];_0x46d7c6++){_0x5b25de=[];for(let _0x1a551b=0x0;_0x1a551b<this['cols'];_0x1a551b++,_0x368775++){_0x1e0f71?_0x617aa4=this['_calcUV'](_0x5d4ae5[_0x46d7c6][_0x1a551b],_0x115fd9[_0x46d7c6][_0x1a551b]):_0x617aa4=this[_0x9bb0f9(0x1df,0x1a5)](_0x5d4ae5[_0x368775],_0x115fd9[_0x368775]),_0x5b25de[_0x9bb0f9(0x2cd,0x261)](_0x617aa4);}this['grid'][_0x4b9a1c(-0xa6,-0xad)](_0x5b25de);}!this['options'][_0x4b9a1c(-0x63,-0x96)]&&this[_0x4b9a1c(-0x102,-0x161)]['reverse']();}[_0x9c3d64(0x291,0x255)](){delete this['rows'],delete this['cols'];function _0x51f4e6(_0x136daf,_0x5c4d70){return _0x38f889(_0x5c4d70-0x5cf,_0x136daf);}delete this['xmin'],delete this['xmax'],delete this['ymin'],delete this[_0x28537b(0x1bf,0x1c5)],delete this['grid'];function _0x28537b(_0x2f6712,_0x142367){return _0x9c3d64(_0x142367,_0x2f6712- -0x42);}delete this[_0x28537b(0x1d7,0x14b)];}[_0x9c3d64(0x347,0x2f1)](_0x565a45,_0x4067c6){function _0x40303b(_0x1f4a2e,_0x29c320){return _0x38f889(_0x29c320-0x1e3,_0x1f4a2e);}const _0x3dd573=(_0x565a45-this['xmin'])/(this[_0x4d8e23(0x314,0x2e5)]-this['xmin'])*(this[_0x40303b(0x4a,0xb5)]-0x1);function _0x4d8e23(_0x5e78a7,_0x57c9ea){return _0x9c3d64(_0x57c9ea,_0x5e78a7-0xf5);}const _0x27bad9=(this['ymax']-_0x4067c6)/(this['ymax']-this['ymin'])*(this[_0x40303b(0xe7,0x97)]-0x1);return[_0x3dd573,_0x27bad9];}['getUVByXY'](_0xe2d70f,_0x5335a1){if(_0xe2d70f<0x0||_0xe2d70f>=this[_0x42ba8f(0x29c,0x26a)]||_0x5335a1>=this[_0x42ba8f(0x1fb,0x24c)])return[0x0,0x0,0x0];const _0x354a75=Math[_0x42ba8f(0x20c,0x218)](_0xe2d70f),_0x81e32b=Math[_0x57e611(0x30c,0x28b)](_0x5335a1);function _0x57e611(_0x1eeba2,_0x23f09f){return _0x9c3d64(_0x1eeba2,_0x23f09f-0x22);}if(_0x354a75===_0xe2d70f&&_0x81e32b===_0x5335a1)return this['grid'][_0x5335a1][_0xe2d70f];const _0x169dcd=_0x354a75+0x1,_0x73c24c=_0x81e32b+0x1,_0x56fdae=this[_0x57e611(0x1c4,0x238)](_0x354a75,_0x81e32b),_0x3e915d=this[_0x42ba8f(0x195,0x1c5)](_0x169dcd,_0x81e32b),_0x47f630=this[_0x57e611(0x28b,0x238)](_0x354a75,_0x73c24c),_0x21d2ee=this['getUVByXY'](_0x169dcd,_0x73c24c);let _0x4c7b52=null;try{_0x4c7b52=this[_0x42ba8f(0x1c1,0x230)](_0xe2d70f-_0x354a75,_0x5335a1-_0x81e32b,_0x56fdae,_0x3e915d,_0x47f630,_0x21d2ee);}catch(_0x59c9b4){console['log'](_0xe2d70f,_0x5335a1);}function _0x42ba8f(_0x2e30c2,_0x482fba){return _0x38f889(_0x482fba-0x398,_0x2e30c2);}return _0x4c7b52;}['_bilinearInterpolation'](_0x1971c2,_0x2e6bbd,_0x35f992,_0x301bab,_0x3ea471,_0x13914e){const _0x280626=0x1-_0x1971c2,_0x4d3b5f=0x1-_0x2e6bbd,_0x11b81f=_0x280626*_0x4d3b5f,_0xc83f86=_0x1971c2*_0x4d3b5f,_0x41682e=_0x280626*_0x2e6bbd,_0x74900=_0x1971c2*_0x2e6bbd,_0x1b9b9d=_0x35f992[0x0]*_0x11b81f+_0x301bab[0x0]*_0xc83f86+_0x3ea471[0x0]*_0x41682e+_0x13914e[0x0]*_0x74900,_0x1b0864=_0x35f992[0x1]*_0x11b81f+_0x301bab[0x1]*_0xc83f86+_0x3ea471[0x1]*_0x41682e+_0x13914e[0x1]*_0x74900;return this['_calcUV'](_0x1b9b9d,_0x1b0864);}['_calcUV'](_0x147e38,_0x1783dd){function _0x262738(_0xab0b5a,_0x3cbd4e){return _0x38f889(_0xab0b5a- -0x9b,_0x3cbd4e);}return[+_0x147e38,+_0x1783dd,Math[_0x262738(-0x1b8,-0x223)](_0x147e38*_0x147e38+_0x1783dd*_0x1783dd)];}['getUVByPoint'](_0x4799c3,_0x46e070){if(!this[_0x327973(0x26,0x12)](_0x4799c3,_0x46e070))return null;const _0x1b639e=this[_0x1274e0(-0x1ac,-0x19e)](_0x4799c3,_0x46e070),_0x314a6c=this[_0x1274e0(-0x28f,-0x279)](_0x1b639e[0x0],_0x1b639e[0x1]);function _0x1274e0(_0x5a9b9a,_0x37c446){return _0x38f889(_0x37c446- -0xa6,_0x5a9b9a);}function _0x327973(_0x435506,_0x2f9c0c){return _0x9c3d64(_0x2f9c0c,_0x435506- -0x26c);}return _0x314a6c;}[_0x9c3d64(0x214,0x292)](_0x343227,_0x4be246){function _0xd07a28(_0x224c41,_0x5799aa){return _0x38f889(_0x5799aa-0x44b,_0x224c41);}return _0x343227>=this['xmin']&&_0x343227<=this['xmax']&&_0x4be246>=this[_0xd07a28(0x3ba,0x359)]&&_0x4be246<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x4e8518=fRandomByfloat(this[_0x3c7483(-0x2,-0x13)],this[_0x4f7f64(-0x221,-0x1ed)]),_0x168b9e=fRandomByfloat(this['ymin'],this['ymax']),_0x3d9caa={};_0x3d9caa['lat']=_0x168b9e,_0x3d9caa['lng']=_0x4e8518;function _0x3c7483(_0xa04158,_0x2e10a1){return _0x9c3d64(_0x2e10a1,_0xa04158- -0x2b5);}function _0x4f7f64(_0x24c222,_0x1e2440){return _0x9c3d64(_0x24c222,_0x1e2440- -0x40c);}return _0x3d9caa;}[_0x38f889(-0x1b4,-0x1dd)](){function _0x4986f0(_0x3ecf65,_0x220dbb){return _0x38f889(_0x220dbb-0x52e,_0x3ecf65);}let _0x2b410a,_0x17eced,_0x49ad0f;function _0x1b78c5(_0x5694d9,_0x406864){return _0x9c3d64(_0x406864,_0x5694d9- -0xef);}for(let _0x19f172=0x0,_0x615ceb=this[_0x1b78c5(0x12a,0xcc)]['length'];_0x19f172<_0x615ceb;_0x19f172++){let _0xc7413a=this[_0x4986f0(0x30d,0x35e)][_0x19f172];_0xc7413a[_0x4986f0(0x3d2,0x34c)]<=0x0&&(_0xc7413a=this['_randomParticle'](_0xc7413a));if(_0xc7413a[_0x1b78c5(0x118,0xe9)]>0x0){const _0x2c75ea=_0xc7413a[_0x4986f0(0x481,0x404)],_0x1d44cb=_0xc7413a['tlat'];_0x49ad0f=this['getUVByPoint'](_0x2c75ea,_0x1d44cb),_0x49ad0f?(_0x2b410a=_0x2c75ea+this['_calc_speedRate'][0x0]*_0x49ad0f[0x0],_0x17eced=_0x1d44cb+this[_0x1b78c5(0x16a,0x167)][0x1]*_0x49ad0f[0x1],_0xc7413a['lng']=_0x2c75ea,_0xc7413a[_0x1b78c5(0x13c,0x100)]=_0x1d44cb,_0xc7413a[_0x1b78c5(0x1d0,0x1d4)]=_0x2b410a,_0xc7413a['tlat']=_0x17eced,_0xc7413a['speed']=_0x49ad0f[0x2],_0xc7413a[_0x4986f0(0x34f,0x34c)]--):_0xc7413a[_0x1b78c5(0x118,0x112)]=0x0;}}return this['particles'];}[_0x9c3d64(0x258,0x2c8)](_0x37e617){let _0x4e4fc8,_0x1e94a4;for(let _0xca3fac=0x0;_0xca3fac<0x1e;_0xca3fac++){_0x4e4fc8=this[_0x55404f(-0x15,0x1b)](),_0x1e94a4=this[_0x55404f(-0x1a,0x2d)](_0x4e4fc8['lng'],_0x4e4fc8['lat']);if(_0x1e94a4&&_0x1e94a4[0x2]>0x0)break;}if(!_0x1e94a4)return _0x37e617;const _0x525dba=_0x4e4fc8[_0x55404f(0x4,-0x24)]+this['_calc_speedRate'][0x0]*_0x1e94a4[0x0],_0x350e2a=_0x4e4fc8[_0x100a42(-0x182,-0x1ba)]+this['_calc_speedRate'][0x1]*_0x1e94a4[0x1];_0x37e617[_0x55404f(0x4,-0x29)]=_0x4e4fc8['lng'];function _0x55404f(_0x382eae,_0x3ad2f8){return _0x38f889(_0x382eae-0x181,_0x3ad2f8);}_0x37e617['lat']=_0x4e4fc8['lat'],_0x37e617[_0x100a42(-0xee,-0xae)]=_0x525dba,_0x37e617[_0x100a42(-0x188,-0x133)]=_0x350e2a;function _0x100a42(_0x1fa3e7,_0x57dd02){return _0x38f889(_0x1fa3e7-0x3c,_0x57dd02);}return _0x37e617['age']=Math['round'](0xa+Math['random']()*this[_0x100a42(-0x1a5,-0x1b7)]),_0x37e617['speed']=_0x1e94a4[0x2],_0x37e617;}['destroy'](){for(const _0x1abddf in this){delete this[_0x1abddf];}}}function fRandomByfloat(_0x1df889,_0x3ec720){return _0x1df889+Math['random']()*(_0x3ec720-_0x1df889);}const Cesium=mars3d__namespace[_0x9c3d64(0x2fa,0x2d7)],BaseLayer=mars3d__namespace['layer'][_0x9c3d64(0x1e9,0x227)];class CanvasWindLayer extends BaseLayer{constructor(_0x309331={}){function _0x286f73(_0x540030,_0x3b711a){return _0x38f889(_0x540030-0x1b3,_0x3b711a);}function _0x20f74d(_0x33fee9,_0x3eba33){return _0x9c3d64(_0x33fee9,_0x3eba33- -0x322);}super(_0x309331),this['_setOptionsHook'](_0x309331),this[_0x286f73(0x64,0x33)]=null,_0x309331['colors']&&_0x309331['steps']&&(this[_0x20f74d(-0xbf,-0x8d)]=new mars3d__namespace[(_0x20f74d(-0x8a,-0x86))](_0x309331));}[_0x9c3d64(0x325,0x2a2)](_0x3e23ce,_0xb9b300){this['frameTime']=0x3e8/(_0x3e23ce['frameRate']||0xa),this['_pointerEvents']=this['options']['pointerEvents']??![],this['color']=_0x3e23ce[_0x1fc2b7(0xa4,0x103)]||'#ffffff',this[_0x59d9ef(0x4d4,0x450)]=_0x3e23ce['lineWidth']||0x1;function _0x59d9ef(_0x434784,_0x5dfd6a){return _0x9c3d64(_0x5dfd6a,_0x434784-0x263);}this['fixedHeight']=_0x3e23ce[_0x59d9ef(0x53d,0x501)]??0x0;function _0x1fc2b7(_0x2ad94f,_0x32ed7a){return _0x38f889(_0x32ed7a-0x284,_0x2ad94f);}this['flipY']=_0x3e23ce['flipY']??![],this['windField']&&this[_0x1fc2b7(0xcc,0xbf)]['setOptions'](_0x3e23ce);}get[_0x38f889(-0x14e,-0x177)](){return this['canvas'];}get['canvasWidth'](){function _0x106358(_0x3cd7f8,_0x57fceb){return _0x38f889(_0x3cd7f8-0x1d1,_0x57fceb);}return this['_map'][_0x106358(-0x1,-0x47)]['canvas']['clientWidth'];}get['canvasHeight'](){function _0x5b6756(_0x492c90,_0x5b885b){return _0x9c3d64(_0x5b885b,_0x492c90- -0x13a);}function _0x4caae3(_0x253713,_0x49cbac){return _0x9c3d64(_0x49cbac,_0x253713- -0x423);}return this['_map']['scene'][_0x4caae3(-0x189,-0x149)][_0x4caae3(-0x1ec,-0x225)];}get['pointerEvents'](){function _0x32f94a(_0x2fdaf9,_0x56f275){return _0x38f889(_0x56f275-0x679,_0x2fdaf9);}return this[_0x32f94a(0x52d,0x4a1)];}set[_0x9c3d64(0x1ec,0x21c)](_0x230373){function _0x38a3fd(_0xaf9ee3,_0x5c2c78){return _0x9c3d64(_0xaf9ee3,_0x5c2c78- -0x3bc);}function _0x4844a1(_0x4e3fba,_0x3c63b2){return _0x38f889(_0x4e3fba-0x44d,_0x3c63b2);}this['_pointerEvents']=_0x230373;if(!this['canvas'])return;_0x230373?this['canvas'][_0x4844a1(0x307,0x284)]['pointer-events']='all':this['canvas'][_0x38a3fd(-0x14b,-0x119)]['pointer-events']='none';}get[_0x38f889(-0x187,-0x13f)](){function _0x6ba09b(_0x2cffb3,_0x1cc3c8){return _0x38f889(_0x2cffb3-0x6a9,_0x1cc3c8);}return this['options'][_0x6ba09b(0x522,0x585)];}set['particlesNumber'](_0x28ae80){this['options'][_0x14ec23(0x283,0x2eb)]=_0x28ae80;function _0x56dbd0(_0x33675f,_0x2f6e5a){return _0x38f889(_0x2f6e5a-0x3af,_0x33675f);}function _0x14ec23(_0x499caa,_0x47ec2c){return _0x38f889(_0x47ec2c-0x472,_0x499caa);}clearTimeout(this['_canrefresh']),this[_0x14ec23(0x34d,0x358)]=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x3eda98(_0x53c2c6,_0x9503c9){return _0x38f889(_0x9503c9-0x532,_0x53c2c6);}return this[_0x3eda98(0x381,0x3fb)]['speedRate'];}set['speedRate'](_0x1f40db){this['options']['speedRate']=_0x1f40db;function _0x5a953f(_0x5de603,_0x48ccf7){return _0x38f889(_0x5de603-0x39b,_0x48ccf7);}this[_0x5a953f(0x1d6,0x18e)]&&(this['windField']['speedRate']=_0x1f40db);}get['maxAge'](){function _0x5f2e99(_0x4c9925,_0x4e5ead){return _0x38f889(_0x4c9925-0x176,_0x4e5ead);}return this[_0x5f2e99(0x3f,-0xc)]['maxAge'];}set['maxAge'](_0x493db5){function _0x5a9314(_0x40e834,_0x582d77){return _0x9c3d64(_0x582d77,_0x40e834-0x6e);}this['options'][_0x5a9314(0x276,0x2c1)]=_0x493db5;function _0x140b5d(_0x4a0639,_0x175044){return _0x38f889(_0x175044-0x3b9,_0x4a0639);}this['windField']&&(this['windField'][_0x140b5d(0x160,0x1d8)]=_0x493db5);}get[_0x9c3d64(0x288,0x203)](){return this['windData'];}set['data'](_0x4918a9){function _0x2159f8(_0x1dd22d,_0x10a619){return _0x38f889(_0x10a619- -0x66,_0x1dd22d);}this[_0x2159f8(-0x239,-0x210)](_0x4918a9);}get[_0x9c3d64(0x28e,0x2cd)](){let _0x6f562f=this['windData']['xmin'],_0x5ce3cc=this['windData']['xmax'];function _0x29d07f(_0x19ec9d,_0x403c51){return _0x38f889(_0x403c51-0x209,_0x19ec9d);}let _0x265499=this['windData']['ymin'],_0x1671c1=this[_0x29d07f(0xe,0x40)]['ymax'];_0x5ce3cc>=0x167&&_0x6f562f===0x0&&(_0x6f562f=-0xb4,_0x5ce3cc=0xb4);_0x6f562f=Math['max'](_0x6f562f,-0xb4),_0x5ce3cc=Math['min'](_0x5ce3cc,0xb4),_0x265499=Math[_0x822d63(0x9e,0x10b)](_0x265499,-0x5a);function _0x822d63(_0x5ad9d6,_0x458975){return _0x9c3d64(_0x458975,_0x5ad9d6- -0x25a);}return _0x1671c1=Math['min'](_0x1671c1,0x5a),Cesium['Rectangle']['fromDegrees'](_0x6f562f,_0x265499,_0x5ce3cc,_0x1671c1);}['_showHook'](_0x288b0b){function _0x338f0f(_0x1c3933,_0x19f271){return _0x38f889(_0x19f271-0x4f4,_0x1c3933);}function _0x444d18(_0x73d584,_0x5e00eb){return _0x9c3d64(_0x73d584,_0x5e00eb- -0x389);}_0x288b0b?this[_0x338f0f(0x341,0x347)]():(this[_0x338f0f(0x390,0x32b)]&&(this['options'][_0x444d18(-0x14e,-0x186)]=this['windData']),this[_0x444d18(-0xd1,-0x15b)]());}[_0x38f889(-0x1d6,-0x1d3)](){function _0x135330(_0x4bde67,_0x3d6e00){return _0x9c3d64(_0x3d6e00,_0x4bde67- -0x235);}this[_0x135330(0x7d,0x71)]['worker']?this['initWorker']():this['windField']=new CanvasWindField(this['options']);}[_0x38f889(-0x1ad,-0x129)](){this['canvas']=this['_createCanvas']();const _0x320b0c={};_0x320b0c[_0x653ee8(0xa,-0x6d)]=!![];function _0x653ee8(_0x386ef8,_0xb320c8){return _0x9c3d64(_0xb320c8,_0x386ef8- -0x24e);}this[_0x2882cb(0x115,0xe1)]=this['canvas'][_0x653ee8(-0x14,-0x7a)]('2d',_0x320b0c);function _0x2882cb(_0x56dbd5,_0x2dd7ce){return _0x9c3d64(_0x2dd7ce,_0x56dbd5- -0x1a7);}this['bindEvent'](),this[_0x2882cb(0x10b,0x9a)][_0x2882cb(0x5c,0xce)]&&this['setData'](this[_0x2882cb(0x10b,0x12c)]['data']);}['_removedHook'](){this['clear'](),this[_0xd0d07c(0xf0,0x80)]();function _0xd0d07c(_0x283d06,_0x8b079f){return _0x9c3d64(_0x8b079f,_0x283d06- -0x138);}function _0x53b0a3(_0x5ac149,_0x17d0b2){return _0x9c3d64(_0x17d0b2,_0x5ac149-0x27);}this['canvas']&&(this['_map']['container'][_0x53b0a3(0x2d4,0x279)](this['canvas']),delete this['canvas']);}[_0x9c3d64(0x36a,0x2e0)](){const _0x5be753=mars3d__namespace['DomUtil']['create']('canvas','mars3d-canvasWind',this['_map']['container']);_0x5be753['style'][_0xdf23a7(0x2ff,0x2be)]='absolute';function _0x90bfb1(_0x1a8dc9,_0x79df58){return _0x9c3d64(_0x79df58,_0x1a8dc9-0x165);}_0x5be753['style'][_0xdf23a7(0x25c,0x2b0)]='0px',_0x5be753[_0x90bfb1(0x408,0x3b8)]['left']='0px',_0x5be753['style']['width']=this[_0xdf23a7(0x3bd,0x392)][_0x90bfb1(0x37c,0x36c)][_0xdf23a7(0x2e1,0x33a)][_0x90bfb1(0x42a,0x4b0)]+'px',_0x5be753[_0xdf23a7(0x2df,0x343)]['height']=this['_map'][_0xdf23a7(0x2ce,0x2b7)]['canvas']['clientHeight']+'px',_0x5be753['style']['pointerEvents']=this['_pointerEvents']?_0x90bfb1(0x3d4,0x3ff):_0x90bfb1(0x391,0x41b),_0x5be753['style']['zIndex']=this[_0x90bfb1(0x417,0x437)]['zIndex']??0x9;function _0xdf23a7(_0x1f8d33,_0x104776){return _0x38f889(_0x104776-0x489,_0x1f8d33);}return _0x5be753['width']=this['_map']['scene']['canvas']['clientWidth'],_0x5be753[_0x90bfb1(0x39b,0x41d)]=this[_0x90bfb1(0x457,0x486)]['scene']['canvas']['clientHeight'],_0x5be753;}[_0x9c3d64(0x302,0x293)](){function _0x32908f(_0x38c4be,_0x9f2000){return _0x38f889(_0x9f2000-0x689,_0x38c4be);}function _0x485abd(_0x402d5e,_0x4f9d97){return _0x9c3d64(_0x402d5e,_0x4f9d97- -0x30e);}this[_0x32908f(0x4f2,0x53a)]&&(this['canvas']['style']['width']=this['_map'][_0x32908f(0x49d,0x4b7)][_0x32908f(0x58d,0x53a)][_0x32908f(0x576,0x565)]+'px',this[_0x32908f(0x4c2,0x53a)]['style'][_0x32908f(0x46b,0x4d6)]=this['_map'][_0x485abd(-0x95,-0xf7)][_0x485abd(-0x9e,-0x74)]['clientHeight']+'px',this['canvas']['width']=this[_0x485abd(0x56,-0x1c)]['scene']['canvas'][_0x485abd(-0x37,-0x49)],this[_0x485abd(-0xf7,-0x74)][_0x32908f(0x4a4,0x4d6)]=this[_0x485abd(-0x6a,-0x1c)]['scene']['canvas']['clientHeight']);}['bindEvent'](){function _0x1ba389(_0x18ce43,_0x127a60){return _0x38f889(_0x18ce43-0x68c,_0x127a60);}const _0x464510=this;let _0x3dee80=Date['now']();(function _0x3ab605(){if(_0x464510['isDestroy'])return;function _0x42187b(_0x26a671,_0x131056){return _0x443c(_0x131056-0x10d,_0x26a671);}function _0x18f7f5(_0xa8eed6,_0xb69795){return _0x443c(_0xa8eed6-0x306,_0xb69795);}_0x464510[_0x18f7f5(0x51c,0x4cf)]=window['requestAnimationFrame'](_0x3ab605);if(_0x464510[_0x42187b(0x309,0x290)]&&_0x464510['windField']){const _0x683f90=Date[_0x42187b(0x1ea,0x23f)](),_0x5b839c=_0x683f90-_0x3dee80;_0x5b839c>_0x464510['frameTime']&&(_0x3dee80=_0x683f90-_0x5b839c%_0x464510[_0x42187b(0x2c1,0x243)],_0x464510['update']());}}());function _0x51956a(_0x3865be,_0x317c27){return _0x9c3d64(_0x317c27,_0x3865be- -0x2c1);}window['addEventListener']('resize',this['resize'][_0x51956a(0x3f,0x49)](this),![]),this['mouse_down']=![],this['mouse_move']=![],this[_0x51956a(-0xf,-0xd)]['mouseHidden']&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x51956a(-0xd1,-0x7b)],this[_0x1ba389(0x4d2,0x4fb)],this),this[_0x1ba389(0x595,0x5a8)]['on'](mars3d__namespace[_0x1ba389(0x49f,0x4c9)]['mouseUp'],this['_onMouseUpEvent'],this));}[_0x38f889(-0x1c1,-0x165)](){function _0x3033d3(_0x37f110,_0x50dc34){return _0x38f889(_0x50dc34-0x473,_0x37f110);}window[_0x3033d3(0x36c,0x2ed)](this['_animateFrame']),delete this[_0x3033d3(0x3cb,0x358)],window['removeEventListener'](_0x280f56(0x399,0x33c),this['resize']);function _0x280f56(_0x3ebd72,_0x2cbfd8){return _0x38f889(_0x2cbfd8-0x492,_0x3ebd72);}this['options'][_0x3033d3(0x245,0x2bc)]&&(this[_0x280f56(0x371,0x39b)][_0x280f56(0x402,0x392)](mars3d__namespace[_0x280f56(0x247,0x2a5)]['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0x280f56(0x2fc,0x299)],this[_0x280f56(0x306,0x2d8)],this),this[_0x3033d3(0x362,0x37c)][_0x3033d3(0x36a,0x373)](mars3d__namespace['EventType'][_0x280f56(0x2a6,0x303)],this[_0x280f56(0x304,0x332)],this),this['_map']['off'](mars3d__namespace[_0x280f56(0x260,0x2a5)][_0x280f56(0x383,0x35f)],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x3717b){function _0x26053b(_0x22ab58,_0x46e0e6){return _0x38f889(_0x22ab58-0x2e,_0x46e0e6);}clearTimeout(this[_0x26053b(-0xf8,-0x107)]);if(!this['show']||!this[_0xe2b47a(0x71,0xac)])return;this['canvas'][_0xe2b47a(0x61,0xb5)]['visibility']='hidden';function _0xe2b47a(_0x4ce861,_0x2d37c5){return _0x38f889(_0x2d37c5-0x1fb,_0x4ce861);}this['refreshTimer']=setTimeout(()=>{if(!this[_0x40c586(0x224,0x21e)])return;function _0x40c586(_0x4c7058,_0x2506b5){return _0x26053b(_0x2506b5-0x39e,_0x4c7058);}this[_0x40c586(0x263,0x291)]();function _0x23df36(_0x4f55d1,_0x2d6851){return _0xe2b47a(_0x4f55d1,_0x2d6851-0x50c);}this['canvas'][_0x40c586(0x2ea,0x286)]['visibility']=_0x23df36(0x534,0x5a9);},0xc8);}['_onMouseDownEvent'](_0x43ccd8){this['mouse_down']=!![],this['_map']['off'](mars3d__namespace[_0x3c6e94(-0xd9,-0xf8)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0x126ae8(_0x7c9791,_0x566811){return _0x38f889(_0x7c9791-0x1b0,_0x566811);}function _0x3c6e94(_0x420e13,_0x162343){return _0x38f889(_0x420e13-0x114,_0x162343);}this[_0x3c6e94(0x1d,0x2e)]['on'](mars3d__namespace[_0x126ae8(-0x3d,-0x29)]['mouseMove'],this[_0x126ae8(0x42,-0x11)],this);}['_onMouseMoveEvent'](_0xa779a9){if(!this['show']||!this[_0x1da14b(-0x11d,-0x148)])return;function _0x1da14b(_0x4dcd36,_0x54a8a1){return _0x38f889(_0x54a8a1-0x7,_0x4dcd36);}function _0xefcb95(_0x581960,_0x591cda){return _0x9c3d64(_0x581960,_0x591cda-0x77);}this['mouse_down']&&(this['canvas']['style']['visibility']=_0xefcb95(0x2aa,0x2b8),this['mouse_move']=!![]);}[_0x38f889(-0x160,-0x104)](_0x6302e8){if(!this[_0x7f471d(0x1e9,0x1a0)]||!this['canvas'])return;this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x7f471d(_0x2e2bc5,_0x25d0b7){return _0x38f889(_0x2e2bc5-0x397,_0x25d0b7);}this['mouse_down']&&this[_0x473880(0x269,0x290)]&&this[_0x473880(0x2d0,0x2dd)]();this['canvas']['style'][_0x473880(0x21d,0x1e6)]='visible',this['mouse_down']=![];function _0x473880(_0x175879,_0x3584ce){return _0x38f889(_0x175879-0x40b,_0x3584ce);}this['mouse_move']=![];}['setData'](_0x192174){function _0x2d23a6(_0x148c3b,_0x108aad){return _0x38f889(_0x148c3b-0x31b,_0x108aad);}this['clear']();function _0x13bbb3(_0x2468ab,_0x2e05b7){return _0x9c3d64(_0x2468ab,_0x2e05b7- -0xfd);}this[_0x2d23a6(0x152,0xe6)]=_0x192174,this[_0x13bbb3(0x17b,0x127)]['setDate'](_0x192174),this['redraw']();}['redraw'](){function _0x1a47ec(_0x236513,_0x57851e){return _0x9c3d64(_0x57851e,_0x236513- -0x259);}if(!this['show'])return;this[_0x1a47ec(-0x35,0x47)]['setOptions'](this['options']),this['update']();}[_0x38f889(-0xf0,-0x70)](){if(this[_0x29367b(0x50b,0x4b8)])return;this['_updateIng']=!![];function _0x2abf67(_0x18fad6,_0x216de6){return _0x9c3d64(_0x216de6,_0x18fad6-0x72);}function _0x29367b(_0x4bc231,_0x3b1d6e){return _0x38f889(_0x4bc231-0x6fa,_0x3b1d6e);}if(this['worker'])this['windField']['update']();else{const _0x3068ad=this[_0x2abf67(0x296,0x2ff)][_0x2abf67(0x2a7,0x2c7)]();this['_drawLines'](_0x3068ad);}this[_0x29367b(0x50b,0x48e)]=![];}['_drawLines'](_0x38ef74){function _0x111503(_0x1c5516,_0x15c0fb){return _0x38f889(_0x1c5516-0x6f,_0x15c0fb);}this['_canvasParticles']=_0x38ef74,this['canvasContext']['globalCompositeOperation']=_0x157404(-0x33,-0x16),this[_0x111503(-0xbe,-0xb8)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext'][_0x157404(-0x2a,-0x7f)]='lighter',this['canvasContext']['globalAlpha']=0.9;function _0x157404(_0x34fd97,_0x16b4ae){return _0x9c3d64(_0x16b4ae,_0x34fd97- -0x2bb);}const _0x22df5d=this['_map']['scene']['mode']!==Cesium['SceneMode']['SCENE3D'],_0x53d9bf=this[_0x111503(-0x13c,-0x1c4)]*0.25;if(this['_colorRamp'])for(let _0x49deed=0x0,_0x52a519=_0x38ef74['length'];_0x49deed<_0x52a519;_0x49deed++){const _0x26e4d3=_0x38ef74[_0x49deed],_0x5342cb=this['_tomap'](_0x26e4d3,_0x26e4d3[_0x157404(-0x4f,-0x2a)],_0x26e4d3['lat'],_0x26e4d3['alt']),_0x4758c0=this['_tomap'](_0x26e4d3,_0x26e4d3['tlng'],_0x26e4d3[_0x157404(-0x96,-0xc4)],_0x26e4d3['talt']);if(!_0x5342cb||!_0x4758c0)continue;if(_0x22df5d&&Math[_0x157404(-0x78,-0xc9)](_0x5342cb[0x0]-_0x4758c0[0x0])>=_0x53d9bf)continue;this['canvasContext']['beginPath'](),this['canvasContext'][_0x111503(-0x109,-0xce)]=this[_0x111503(-0x109,-0x112)],this['canvasContext']['strokeStyle']=this[_0x157404(-0x26,-0x86)]['getColor'](_0x26e4d3['speed']),this['canvasContext']['moveTo'](_0x5342cb[0x0],_0x5342cb[0x1]),this[_0x157404(0x1,0x7e)]['lineTo'](_0x4758c0[0x0],_0x4758c0[0x1]),this['canvasContext'][_0x111503(-0x7d,-0x8)]();}else{this['canvasContext'][_0x157404(0x2a,0x35)](),this[_0x157404(0x1,0x1f)][_0x157404(-0x4a,0x2b)]=this[_0x111503(-0x109,-0x133)],this['canvasContext']['strokeStyle']=this['color'];for(let _0x4d316e=0x0,_0x5720b5=_0x38ef74['length'];_0x4d316e<_0x5720b5;_0x4d316e++){const _0x1744f5=_0x38ef74[_0x4d316e],_0x3a6769=this['_tomap'](_0x1744f5,_0x1744f5[_0x157404(-0x4f,-0xba)],_0x1744f5[_0x157404(-0x90,-0x93)],_0x1744f5[_0x157404(-0xa0,-0x65)]),_0x1ec2c5=this[_0x111503(-0x18f,-0x159)](_0x1744f5,_0x1744f5[_0x111503(-0xbb,-0xc3)],_0x1744f5[_0x157404(-0x96,-0x98)],_0x1744f5['talt']);if(!_0x3a6769||!_0x1ec2c5)continue;if(_0x22df5d&&Math['abs'](_0x3a6769[0x0]-_0x1ec2c5[0x0])>=_0x53d9bf)continue;this['canvasContext']['moveTo'](_0x3a6769[0x0],_0x3a6769[0x1]),this['canvasContext'][_0x111503(-0x7b,-0x8d)](_0x1ec2c5[0x0],_0x1ec2c5[0x1]);}this[_0x111503(-0xbe,-0x7c)]['stroke']();}}['_tomap'](_0xefcbb3,_0x4cc39d,_0xe2bff7,_0x5014a4){function _0x3aadc9(_0x3088ba,_0x22446a){return _0x38f889(_0x22446a-0x442,_0x3088ba);}const _0xa54cff=Cesium['Cartesian3']['fromDegrees'](_0x4cc39d,_0xe2bff7,_0x5014a4??this[_0x3aadc9(0x304,0x333)]);function _0xf26bfc(_0x5944b8,_0x19d0d1){return _0x9c3d64(_0x19d0d1,_0x5944b8- -0x191);}const _0x2afde8=this['_map']['scene'];if(_0x2afde8['mode']===Cesium[_0x3aadc9(0x295,0x251)][_0xf26bfc(0x116,0xb2)]){const _0x3c3230=new Cesium['EllipsoidalOccluder'](_0x2afde8['globe']['ellipsoid'],_0x2afde8['camera']['positionWC']),_0x4bbbba=_0x3c3230['isPointVisible'](_0xa54cff);if(!_0x4bbbba)return _0xefcbb3['age']=0x0,null;}const _0x1dd9ef=mars3d__namespace['PointTrans'][_0x3aadc9(0x34b,0x2e0)](this['_map']['scene'],_0xa54cff);return _0x1dd9ef?[_0x1dd9ef['x'],_0x1dd9ef['y']]:null;}['clear'](){function _0x1b267b(_0x880037,_0x44d81f){return _0x9c3d64(_0x880037,_0x44d81f- -0x2a1);}this[_0x1b267b(-0x59,-0x7d)][_0x346d95(0x2,0x7b)]();function _0x346d95(_0x33a7bd,_0x7c2c71){return _0x38f889(_0x7c2c71-0x20f,_0x33a7bd);}delete this['windData'];}['initWorker'](){this['worker']=new Worker(this['options']['worker']),this['worker']['onmessage']=_0x2c7763=>{this['_drawLines'](_0x2c7763['data'][_0x5b355b(-0xe,0x3b)]);function _0x491a3d(_0x185309,_0x4577be){return _0x443c(_0x185309- -0x124,_0x4577be);}function _0x5b355b(_0x4f92e7,_0x3621b2){return _0x443c(_0x4f92e7- -0x16f,_0x3621b2);}this[_0x5b355b(-0x1a,-0x5)]=![];},this['windField']={'init':_0x32a930=>{const _0x223cc5={};function _0x36a38d(_0x1e2e53,_0x2fa16f){return _0x443c(_0x1e2e53- -0x1d9,_0x2fa16f);}function _0x4972e5(_0x3bede,_0x122d3a){return _0x443c(_0x3bede- -0x3da,_0x122d3a);}_0x223cc5['type']='init',_0x223cc5['options']=_0x32a930,this[_0x36a38d(-0xc,0x3d)][_0x4972e5(-0x1cc,-0x21d)](_0x223cc5);},'setOptions':_0x5afb4b=>{function _0x456fef(_0x40dfbc,_0x32e40a){return _0x443c(_0x40dfbc- -0x14,_0x32e40a);}function _0x8c8594(_0x457809,_0x2dc1b8){return _0x443c(_0x457809- -0x1c,_0x2dc1b8);}const _0x24c73f={};_0x24c73f['type']='setOptions',_0x24c73f[_0x8c8594(0x1de,0x193)]=_0x5afb4b,this['worker'][_0x456fef(0x1fa,0x263)](_0x24c73f);},'setDate':_0x1eb498=>{const _0x15d8d6={};function _0x57282b(_0x40dfda,_0x14ccb5){return _0x443c(_0x14ccb5-0x138,_0x40dfda);}_0x15d8d6['type']=_0x57282b(0x2b5,0x326),_0x15d8d6[_0x57282b(0x2d6,0x283)]=_0x1eb498;function _0x2843a6(_0x1a1e1d,_0x5de329){return _0x443c(_0x5de329- -0x374,_0x1a1e1d);}this[_0x2843a6(-0x1fd,-0x1a7)][_0x2843a6(-0xec,-0x166)](_0x15d8d6);},'update':()=>{if(this[_0x5d4f05(0x1e,0x69)])return;this['_updateIng2']=!![];function _0x5d4f05(_0x54279a,_0x273652){return _0x443c(_0x273652- -0xec,_0x54279a);}const _0x455b26={};function _0x2154c4(_0x40ccc4,_0x406103){return _0x443c(_0x406103-0x235,_0x40ccc4);}_0x455b26['type']=_0x5d4f05(0xce,0x155),this[_0x5d4f05(0x14e,0xe1)][_0x2154c4(0x47b,0x443)](_0x455b26);},'clear':()=>{const _0x1a9eff={};_0x1a9eff[_0xe6432(0x2a0,0x23f)]=_0x48336f(-0x205,-0x217);function _0x48336f(_0x242ff6,_0xa6f686){return _0x443c(_0x242ff6- -0x3a2,_0xa6f686);}function _0xe6432(_0x1aa6bf,_0x5a8aa0){return _0x443c(_0x1aa6bf-0xb3,_0x5a8aa0);}this['worker']['postMessage'](_0x1a9eff);}};function _0x2c0310(_0x5a3a2d,_0x5cf5e3){return _0x9c3d64(_0x5a3a2d,_0x5cf5e3- -0x409);}this['windField']['init'](this[_0x2c0310(-0x1b0,-0x157)]);}}mars3d__namespace['LayerUtil']['register'](_0x38f889(-0x16c,-0x153),CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x9c3d64(0x26f,0x250)]=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports[_0x9c3d64(0x209,0x28e)]=CanvasWindLayer,exports[_0x38f889(-0x19c,-0x18a)]=WindLayer,exports[_0x9c3d64(0x2eb,0x27e)]=WindUtil;const _0x16fc51={};function _0x38f889(_0x53552a,_0x59327c){return _0x443c(_0x53552a- -0x331,_0x59327c);}_0x16fc51[_0x9c3d64(0x2b6,0x2dc)]=!![];function _0x9c3d64(_0x514482,_0x58945f){return _0x443c(_0x58945f-0xb8,_0x514482);}Object['defineProperty'](exports,'__esModule',_0x16fc51);
}));
