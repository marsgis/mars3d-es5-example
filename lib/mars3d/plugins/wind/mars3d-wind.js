/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.7.20
 * 编译日期：2024-07-04 22:57:04
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x490455,_0x39cbf2){const _0x1fd97b=_0x490455();function _0x5d3236(_0x25499b,_0x58e5b7){return _0x4acd(_0x25499b-0x298,_0x58e5b7);}function _0x5dae30(_0x151522,_0x549837){return _0x4acd(_0x151522-0x318,_0x549837);}while(!![]){try{const _0x5899fe=parseInt(_0x5d3236(0x482,0x4f2))/0x1+-parseInt(_0x5d3236(0x4dd,0x549))/0x2*(parseInt(_0x5d3236(0x591,0x556))/0x3)+-parseInt(_0x5dae30(0x610,0x65d))/0x4*(-parseInt(_0x5d3236(0x4ec,0x514))/0x5)+-parseInt(_0x5dae30(0x545,0x501))/0x6*(-parseInt(_0x5d3236(0x585,0x56d))/0x7)+parseInt(_0x5d3236(0x556,0x5df))/0x8*(parseInt(_0x5d3236(0x493,0x502))/0x9)+-parseInt(_0x5d3236(0x4b7,0x546))/0xa+parseInt(_0x5dae30(0x551,0x59d))/0xb;if(_0x5899fe===_0x39cbf2)break;else _0x1fd97b['push'](_0x1fd97b['shift']());}catch(_0x12af9b){_0x1fd97b['push'](_0x1fd97b['shift']());}}}(_0x4cf6,0x9c214));function _interopNamespace(_0x10600d){if(_0x10600d&&_0x10600d['__esModule'])return _0x10600d;function _0x22d7c8(_0x252230,_0x217a3b){return _0x4acd(_0x252230-0x21c,_0x217a3b);}var _0x152938=Object['create'](null);return _0x10600d&&Object['keys'](_0x10600d)['forEach'](function(_0x1863de){if(_0x1863de!=='default'){var _0x555edd=Object['getOwnPropertyDescriptor'](_0x10600d,_0x1863de);Object['defineProperty'](_0x152938,_0x1863de,_0x555edd['get']?_0x555edd:{'enumerable':!![],'get':function(){return _0x10600d[_0x1863de];}});}}),_0x152938[_0x22d7c8(0x4ce,0x505)]=_0x10600d,_0x152938;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0x1395c0,_0xedb901){function _0x3ec651(_0x41ce8f,_0x1e0d05){return _0x4acd(_0x41ce8f-0x112,_0x1e0d05);}const _0x2e4413=_0x1395c0*Math[_0x3ec651(0x411,0x40f)](Cesium$7['Math']['toRadians'](_0xedb901));return _0x2e4413;}function getV(_0x505034,_0xa4d959){function _0x52e580(_0x331f24,_0x14ea12){return _0x4acd(_0x14ea12- -0x371,_0x331f24);}const _0x340dff=_0x505034*Math['sin'](Cesium$7['Math'][_0x52e580(-0x12b,-0x155)](_0xa4d959));return _0x340dff;}function getSpeed(_0x1c0ba0,_0x3445a8){function _0x1a2a4c(_0x24f546,_0xc3463f){return _0x4acd(_0xc3463f- -0x32d,_0x24f546);}const _0x7cbb87=Math[_0x1a2a4c(-0x8f,-0xc7)](Math['pow'](_0x1c0ba0,0x2)+Math['pow'](_0x3445a8,0x2));return _0x7cbb87;}function getDirection(_0x16d64b,_0x5740ef){let _0x5a8775=Cesium$7[_0x46c81c(0x578,0x5cc)]['toDegrees'](Math[_0x5738ce(0x313,0x2be)](_0x5740ef,_0x16d64b));function _0x5738ce(_0x49d1c1,_0x5cf2c4){return _0x4acd(_0x5cf2c4-0xb4,_0x49d1c1);}function _0x46c81c(_0x54bb89,_0x3fa264){return _0x4acd(_0x3fa264-0x377,_0x54bb89);}return _0x5a8775+=_0x5a8775<0x0?0x168:0x0,_0x5a8775;}const _0x34058f={};_0x34058f[_0x223b03(0x227,0x1ad)]=null,_0x34058f['getU']=getU,_0x34058f['getV']=getV,_0x34058f[_0x223b03(0x20f,0x21d)]=getSpeed,_0x34058f[_0x5a394f(0x155,0x1e6)]=getDirection;var WindUtil=_0x34058f;const Cesium$6=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0xc1e3e1){this['commandType']=_0xc1e3e1['commandType'],this['geometry']=_0xc1e3e1[_0x54922a(0xb2,0x27)];function _0x572be5(_0x448d23,_0x5016bc){return _0x5a394f(_0x5016bc-0x122,_0x448d23);}this[_0x572be5(0x1a6,0x1cf)]=_0xc1e3e1['attributeLocations'],this[_0x54922a(0x154,0x1b0)]=_0xc1e3e1['primitiveType'],this['uniformMap']=_0xc1e3e1['uniformMap'],this[_0x54922a(0x196,0x20d)]=_0xc1e3e1[_0x54922a(0x196,0x1d7)],this['fragmentShaderSource']=_0xc1e3e1['fragmentShaderSource'],this['rawRenderState']=_0xc1e3e1['rawRenderState'];function _0x54922a(_0xe6c708,_0x12e25d){return _0x223b03(_0xe6c708- -0x14d,_0x12e25d);}this[_0x54922a(0x1b9,0x1ce)]=_0xc1e3e1['framebuffer'],this[_0x572be5(0x269,0x2df)]=_0xc1e3e1[_0x54922a(0x1b6,0x1d0)],this['autoClear']=_0xc1e3e1['autoClear']??![],this['preExecute']=_0xc1e3e1[_0x54922a(0x19b,0x115)],this[_0x54922a(0x16a,0x1c9)]=!![],this['commandToExecute']=undefined,this[_0x572be5(0x1b5,0x228)]=undefined,this[_0x54922a(0x12f,0xd2)]&&(this['clearCommand']=new Cesium$6[(_0x54922a(0x143,0x11a))]({'color':new Cesium$6['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6['Pass'][_0x572be5(0x22d,0x1f6)]}));}['createCommand'](_0x672455){function _0x3e3163(_0x5e9f96,_0x171b0b){return _0x5a394f(_0x5e9f96- -0x177,_0x171b0b);}function _0xfd2f7e(_0x5ce063,_0x49ed74){return _0x223b03(_0x5ce063-0x296,_0x49ed74);}switch(this[_0xfd2f7e(0x4e3,0x4a7)]){case'Draw':{const _0x3c6bfb=Cesium$6['VertexArray'][_0xfd2f7e(0x574,0x51c)]({'context':_0x672455,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6['BufferUsage'][_0x3e3163(0x39,0x9d)]}),_0x17b75a={};_0x17b75a[_0xfd2f7e(0x57d,0x5f4)]=_0x672455,_0x17b75a[_0xfd2f7e(0x489,0x442)]=this['attributeLocations'],_0x17b75a['vertexShaderSource']=this[_0x3e3163(0x26,-0x10)],_0x17b75a['fragmentShaderSource']=this['fragmentShaderSource'];const _0x2664d1=Cesium$6[_0x3e3163(-0x3c,-0x69)][_0xfd2f7e(0x562,0x565)](_0x17b75a),_0x9a00ad=Cesium$6['RenderState'][_0x3e3163(0xf,-0xf)](this['rawRenderState']);return new Cesium$6['DrawCommand']({'primitiveType':this[_0x3e3163(-0x1c,0x10)],'shaderProgram':_0x2664d1,'vertexArray':_0x3c6bfb,'modelMatrix':Cesium$6[_0x3e3163(0x44,0x87)]['IDENTITY'],'renderState':_0x9a00ad,'uniformMap':this[_0x3e3163(-0x2e,-0xb2)],'castShadows':![],'receiveShadows':![],'framebuffer':this['framebuffer'],'pass':Cesium$6['Pass'][_0x3e3163(-0xa3,-0x70)],'pickOnly':!![],'owner':this});}case'Compute':{const _0x453aa7={};return _0x453aa7[_0xfd2f7e(0x52f,0x511)]=this,_0x453aa7['fragmentShaderSource']=this['fragmentShaderSource'],_0x453aa7['uniformMap']=this['uniformMap'],_0x453aa7['outputTexture']=this[_0x3e3163(0x46,0x96)],_0x453aa7[_0xfd2f7e(0x509,0x4e0)]=!![],new Cesium$6[(_0x3e3163(0x1a,-0x44))](_0x453aa7);}}}['setGeometry'](_0x469f6f,_0x51b1c2){this[_0x235258(0x5a4,0x620)]=_0x51b1c2;const _0x21df55=Cesium$6[_0x34b54d(0x23b,0x296)]['fromGeometry']({'context':_0x469f6f,'geometry':this[_0x235258(0x5a4,0x5fd)],'attributeLocations':this[_0x235258(0x598,0x594)],'bufferUsage':Cesium$6[_0x34b54d(0x1cc,0x16e)]['STATIC_DRAW']});function _0x34b54d(_0x38082c,_0x4bab94){return _0x223b03(_0x38082c- -0x30,_0x4bab94);}function _0x235258(_0x43601d,_0x9ced25){return _0x223b03(_0x43601d-0x3a5,_0x9ced25);}this['commandToExecute']['vertexArray']=_0x21df55;}[_0x5a394f(0x1ac,0x151)](_0x1a6086){if(!this['show'])return;function _0x3e56ea(_0x27dfb8,_0x2f6fa3){return _0x5a394f(_0x27dfb8- -0x239,_0x2f6fa3);}if(_0x1a6086[_0x2408b6(0x5bd,0x58a)]!==Cesium$6['SceneMode']['SCENE3D'])return;!Cesium$6['defined'](this[_0x2408b6(0x5ca,0x5ec)])&&(this[_0x3e56ea(-0x188,-0x1eb)]=this[_0x2408b6(0x6c4,0x6f8)](_0x1a6086['context']));Cesium$6[_0x3e56ea(-0x157,-0xc7)](this['preExecute'])&&this['preExecute']();function _0x2408b6(_0x4479aa,_0x59bbce){return _0x5a394f(_0x4479aa-0x519,_0x59bbce);}Cesium$6['defined'](this['clearCommand'])&&_0x1a6086['commandList']['push'](this[_0x2408b6(0x61f,0x683)]),_0x1a6086['commandList']['push'](this['commandToExecute']);}['isDestroyed'](){return![];}['destroy'](){if(this[_0xb40654(0x2fb,0x2ac)]){var _0x44c3b4,_0x26637d;(_0x44c3b4=this[_0x23fd39(0x3f6,0x392)])!==null&&_0x44c3b4!==void 0x0&&_0x44c3b4[_0x23fd39(0x3de,0x3f3)]&&this['clearCommand'][_0x23fd39(0x403,0x3f3)][_0xb40654(0x2ff,0x2d2)](),(_0x26637d=this[_0xb40654(0x27a,0x2ac)])!==null&&_0x26637d!==void 0x0&&_0x26637d[_0xb40654(0x2db,0x259)]&&this[_0xb40654(0x327,0x2ac)][_0x23fd39(0x2f4,0x33f)][_0x23fd39(0x371,0x3b8)](),delete this['clearCommand'];}function _0xb40654(_0x219b47,_0x57c091){return _0x5a394f(_0x57c091-0x1a6,_0x219b47);}this[_0xb40654(0x292,0x257)]&&(this['commandToExecute'][_0x23fd39(0x39b,0x3f3)]&&this['commandToExecute'][_0x23fd39(0x437,0x3f3)][_0x23fd39(0x3e7,0x3b8)](),this[_0xb40654(0x27a,0x257)]['shaderProgram']&&this[_0x23fd39(0x2e5,0x33d)]['shaderProgram']['destroy'](),delete this[_0x23fd39(0x2e2,0x33d)]);function _0x23fd39(_0x2f4b14,_0x6beecc){return _0x223b03(_0x6beecc-0x146,_0x2f4b14);}return Cesium$6['destroyObject'](this);}}const Cesium$5=mars3d__namespace[_0x5a394f(0xc8,0x99)],Util=(function(){function _0x58217c(_0x117280,_0x599f7e){return _0x223b03(_0x117280-0x206,_0x599f7e);}const _0x2896a1=function(){function _0x407499(_0x53b26f,_0x289d2d){return _0x4acd(_0x53b26f- -0x140,_0x289d2d);}const _0x52df20=new Cesium$5[(_0xf435e(0x547,0x523))]({'attributes':new Cesium$5['GeometryAttributes']({'position':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0xf435e(0x570,0x50a)][_0xf435e(0x5a6,0x549)],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5[(_0x407499(0x1c2,0x1f5))]({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});function _0xf435e(_0x1a52e3,_0x1affca){return _0x4acd(_0x1a52e3-0x318,_0x1affca);}return _0x52df20;},_0x54f676=function(_0x47e333,_0x313550){if(Cesium$5['defined'](_0x313550)){const _0x282e93={};_0x282e93['arrayBufferView']=_0x313550,_0x47e333['source']=_0x282e93;}const _0x3a971d=new Cesium$5['Texture'](_0x47e333);return _0x3a971d;},_0x2ab8d4=function(_0x3af814,_0x12d38d,_0x13dfaf){const _0x1a32fd={};_0x1a32fd['context']=_0x3af814;function _0x5f0401(_0x3b19bc,_0x47e8e5){return _0x4acd(_0x47e8e5- -0x201,_0x3b19bc);}function _0x1d4214(_0x2c46bb,_0x400a54){return _0x4acd(_0x2c46bb-0x175,_0x400a54);}_0x1a32fd[_0x5f0401(0xcf,0x77)]=[_0x12d38d],_0x1a32fd[_0x1d4214(0x3a7,0x346)]=_0x13dfaf;const _0x52d336=new Cesium$5['Framebuffer'](_0x1a32fd);return _0x52d336;},_0x51a438=function(_0x18a4a2){function _0x2ea845(_0x16ed15,_0x31f541){return _0x4acd(_0x16ed15- -0x1a9,_0x31f541);}const _0x5dda4c=!![];function _0x244986(_0x3b3c6f,_0x5ece16){return _0x4acd(_0x5ece16-0x319,_0x3b3c6f);}const _0x59cf12=![],_0x511d0c={};_0x511d0c[_0x244986(0x67f,0x60a)]=_0x18a4a2['viewport'],_0x511d0c[_0x244986(0x60d,0x584)]=_0x18a4a2[_0x244986(0x547,0x584)],_0x511d0c['depthMask']=_0x18a4a2['depthMask'],_0x511d0c['blending']=_0x18a4a2['blending'];const _0x24a074=_0x511d0c,_0x12464f=Cesium$5['Appearance']['getDefaultRenderState'](_0x5dda4c,_0x59cf12,_0x24a074);return _0x12464f;},_0x19c114=function(_0x2e1c0b){const _0xca82e8={},_0x222fff=Cesium$5['Math']['mod'](_0x2e1c0b[_0x3b07ef(0x58,0xe4)],Cesium$5['Math']['TWO_PI']),_0x16cde5=Cesium$5['Math']['mod'](_0x2e1c0b['east'],Cesium$5['Math']['TWO_PI']);function _0x818e3(_0x364ded,_0x5209a2){return _0x4acd(_0x364ded-0xc6,_0x5209a2);}const _0x11607e=_0x2e1c0b[_0x3b07ef(0xc5,0x74)];let _0x269cc7,_0x30969f;_0x11607e>Cesium$5['Math']['THREE_PI_OVER_TWO']?(_0x269cc7=0x0,_0x30969f=Cesium$5['Math']['TWO_PI']):_0x16cde5-_0x222fff<_0x11607e?(_0x269cc7=_0x222fff,_0x30969f=_0x222fff+_0x11607e):(_0x269cc7=_0x222fff,_0x30969f=_0x16cde5);_0xca82e8[_0x818e3(0x309,0x279)]={'min':Cesium$5[_0x818e3(0x31b,0x318)]['toDegrees'](_0x269cc7),'max':Cesium$5['Math']['toDegrees'](_0x30969f)};const _0x86173d=_0x2e1c0b[_0x3b07ef(0x11,0x17)],_0x542877=_0x2e1c0b[_0x818e3(0x31f,0x30a)],_0x250d8b=_0x2e1c0b[_0x3b07ef(0xa2,0x4f)],_0x3673b7=_0x250d8b>Cesium$5['Math']['PI']/0xc?_0x250d8b/0x2:0x0;let _0x4663df=Cesium$5['Math'][_0x818e3(0x328,0x379)](_0x86173d-_0x3673b7),_0x52aa2d=Cesium$5['Math']['clampToLatitudeRange'](_0x542877+_0x3673b7);function _0x3b07ef(_0x34c0ce,_0x1d249a){return _0x4acd(_0x34c0ce- -0x239,_0x1d249a);}return _0x4663df<-Cesium$5[_0x818e3(0x31b,0x289)][_0x818e3(0x3af,0x38d)]&&(_0x4663df=-Cesium$5['Math']['PI_OVER_TWO']),_0x52aa2d>Cesium$5['Math']['PI_OVER_THREE']&&(_0x52aa2d=Cesium$5['Math']['PI_OVER_TWO']),_0xca82e8['lat']={'min':Cesium$5[_0x818e3(0x31b,0x30d)][_0x3b07ef(-0x52,-0x11)](_0x4663df),'max':Cesium$5[_0x818e3(0x31b,0x394)][_0x3b07ef(-0x52,0x1)](_0x52aa2d)},_0xca82e8;},_0xde1c6c={};return _0xde1c6c[_0x58217c(0x47d,0x44c)]=_0x2896a1,_0xde1c6c['createTexture']=_0x54f676,_0xde1c6c['createFramebuffer']=_0x2ab8d4,_0xde1c6c['createRawRenderState']=_0x51a438,_0xde1c6c['viewRectangleToLonLatRange']=_0x19c114,_0xde1c6c;}());var segmentDraw_vert='in\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20normal\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20postProcessingSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0aout\x20float\x20speedNormalization;\x0a\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20\x20\x20float\x20a\x20=\x206378137.0;\x20//\x20Semi-major\x20axis\x0a\x20\x20\x20\x20float\x20b\x20=\x206356752.3142;\x20//\x20Semi-minor\x20axis\x0a\x20\x20\x20\x20float\x20e2\x20=\x206.69437999014e-3;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x0a\x20\x20\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calcProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0,\x20360.0)\x20-\x20180.0;\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0);\x0a\x20\x20\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calcOffset(vec4\x20currentProjectedCoordinate,\x20vec4\x20nextProjectedCoordinate,\x20float\x20offsetSign)\x20{\x0a\x20\x20\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0);\x0a\x20\x20\x20\x20vec2\x20currentXY\x20=\x20(currentProjectedCoordinate.xy\x20/\x20currentProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x20\x20\x20\x20vec2\x20nextXY\x20=\x20(nextProjectedCoordinate.xy\x20/\x20nextProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0;\x0a\x20\x20\x20\x20vec2\x20direction\x20=\x20normalize(nextXY\x20-\x20currentXY);\x0a\x20\x20\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0,\x200.0);\x0a\x20\x20\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20\x20\x20vec4\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex);\x0a\x0a\x20\x20\x20\x20vec4\x20currentProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20vec4\x20nextProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(nextPosition.w\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(nextPosition.xyz);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20float\x20pointToUse\x20=\x20normal.x;\x20//\x20-1\x20is\x20currentProjectedCoordinate\x20and\x20+1\x20is\x20nextProjectedCoordinate\x0a\x20\x20\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20pixelSize\x20*\x20calcOffset(currentProjectedCoordinate,\x20nextProjectedCoordinate,\x20offsetSign);\x0a\x20\x20\x20\x20if\x20(pointToUse\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20currentProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20nextProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20speedNormalization\x20=\x20texture(postProcessingSpeed,\x20particleIndex).a;\x0a}\x0a';function _0x223b03(_0x55425c,_0x3ca615){return _0x4acd(_0x55425c-0x6,_0x3ca615);}var segmentDraw_frag='uniform\x20sampler2D\x20colorTable;\x0a\x0ain\x20float\x20speedNormalization;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20out_FragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x200.0));\x0a}\x0a',fullscreen_vert='in\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(position,\x201.0);\x0a}\x0a',trailDraw_frag='uniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x0a\x20\x20\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0\x20*\x20trailsColor)\x20/\x20255.0;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20pointsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20trailsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a',screenDraw_frag='uniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20trailsColor;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x0a}\x0a';const Cesium$4=mars3d__namespace[_0x223b03(0x20e,0x293)];function _0x4cf6(){const _0x29e270=['redraw','ymax','mouseUp','particles','BaseLayer','randomBetween','_setOptionsHook','EventType','canvasWind','1865aykQzs','Math','lonRange','_calc_speedRate','ComponentDatatype','north','fixedHeight','tlng','refreshParticles','UNSIGNED_BYTE','PrimitiveCollection','postMessage','clientWidth','style','clampToLatitudeRange','clientHeight','PixelDatatype','VertexArray','sqrt','hidden','cols','_onMouseDownEvent','windTextures','depthTest','destroy','persists','requestAnimationFrame','canvas','wind','getFullscreenQuad','colorTable','length','updateSpeed','_removedHook','autoClear','segmentsDepth','colorTextures','top','visible','ShaderProgram','udata','type','position','LINEAR','xmin','windData','frameTime','CanvasWindField','umin','TextureMinificationFilter','drawingBufferHeight','canvasResize','lev','uniformMap','ClearCommand','_updateIng2','segmentsColor','ShaderSource','FLOAT','max','getUVByXY','west','lng','owner','createParticlesTextures','getDirection','layer','worker','_colorRamp','particlesTextures','all','primitiveType','globalCompositeOperation','setOptions','_tomap','xmax','dropRateBump','drawingBufferWidth','mouseDown','off','absolute','globeBoundingSphere','particlesRendering','vertexArray','_canrefresh','clear','random','_onMouseUpEvent','nextTrails','refreshTimer','stroke','RGBA','clearFramebuffers','show','default','Cartesian3','keys','fill','getOptions','SceneMode','WindLayer','WindUtil','beginPath','createSegmentsGeometry','_drawLines','rows','92600LughZn','_data','createWindTextures','#ffffff','ellipsoid','TextureMagnificationFilter','visibility','forEach','fromCache','setData','getColorTexture','getPixelSize','register','_mountedHook','applyViewerParameters','destroyParticlesTextures','//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x,\x20360.0);\x0a\x20\x20\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20-90.0,\x2090.0);\x0a\x0a\x20\x20\x20\x20vec3\x20index3D\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20index3D.z\x20=\x20(lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z;\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205],\x20width\x20=\x203,\x20height\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x203\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x202\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWind(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20\x20\x20float\x20result\x20=\x20texture(windTexture,\x20normalizedIndex2D).r;\x0a\x20\x20\x20\x20return\x20result;\x0a}\x0a\x0aconst\x20mat4\x20kernelMatrix\x20=\x20mat4(\x0a\x20\x20\x20\x200.0,\x20-1.0,\x202.0,\x20-1.0,\x20//\x20first\x20column\x0a\x20\x20\x20\x202.0,\x200.0,\x20-5.0,\x203.0,\x20//\x20second\x20column\x0a\x20\x20\x20\x200.0,\x201.0,\x204.0,\x20-3.0,\x20//\x20third\x20column\x0a\x20\x20\x20\x200.0,\x200.0,\x20-1.0,\x201.0\x20//\x20fourth\x20column\x0a);\x0afloat\x20oneDimensionInterpolation(float\x20t,\x20float\x20p0,\x20float\x20p1,\x20float\x20p2,\x20float\x20p3)\x20{\x0a\x20\x20\x20\x20vec4\x20tVec4\x20=\x20vec4(1.0,\x20t,\x20t\x20*\x20t,\x20t\x20*\x20t\x20*\x20t);\x0a\x20\x20\x20\x20tVec4\x20=\x20tVec4\x20/\x202.0;\x0a\x20\x20\x20\x20vec4\x20pVec4\x20=\x20vec4(p0,\x20p1,\x20p2,\x20p3);\x0a\x20\x20\x20\x20return\x20dot((tVec4\x20*\x20kernelMatrix),\x20pVec4);\x0a}\x0a\x0afloat\x20calculateB(sampler2D\x20windTexture,\x20float\x20t,\x20float\x20lon,\x20float\x20lat,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20float\x20lon0\x20=\x20floor(lon)\x20-\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon1\x20=\x20floor(lon);\x0a\x20\x20\x20\x20float\x20lon2\x20=\x20floor(lon)\x20+\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon3\x20=\x20floor(lon)\x20+\x202.0\x20*\x20interval.x;\x0a\x0a\x20\x20\x20\x20float\x20p0\x20=\x20getWind(windTexture,\x20vec3(lon0,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p1\x20=\x20getWind(windTexture,\x20vec3(lon1,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p2\x20=\x20getWind(windTexture,\x20vec3(lon2,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p3\x20=\x20getWind(windTexture,\x20vec3(lon3,\x20lat,\x20lev));\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(t,\x20p0,\x20p1,\x20p2,\x20p3);\x0a}\x0a\x0afloat\x20interpolateOneTexture(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20\x20\x20float\x20lat0\x20=\x20floor(lat)\x20-\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat1\x20=\x20floor(lat);\x0a\x20\x20\x20\x20float\x20lat2\x20=\x20floor(lat)\x20+\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat3\x20=\x20floor(lat)\x20+\x202.0\x20*\x20interval.y;\x0a\x0a\x20\x20\x20\x20vec2\x20coefficient\x20=\x20lonLatLev.xy\x20-\x20floor(lonLatLev.xy);\x0a\x20\x20\x20\x20float\x20b0\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat0,\x20lev);\x0a\x20\x20\x20\x20float\x20b1\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat1,\x20lev);\x0a\x20\x20\x20\x20float\x20b2\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat2,\x20lev);\x0a\x20\x20\x20\x20float\x20b3\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat3,\x20lev);\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(coefficient.y,\x20b0,\x20b1,\x20b2,\x20b3);\x0a}\x0a\x0avec3\x20bicubic(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\x0a\x20\x20\x20\x20float\x20u\x20=\x20interpolateOneTexture(U,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20v\x20=\x20interpolateOneTexture(V,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20bicubic(lonLatLev);\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(windVector,\x200.0);\x0a}\x0a','moveTo','pointerEvents','ComputeCommand','dropRate','Compute','canrefresh','_map','mouse_move','mouse_down','fromGeometry','NEAREST','dimension','height','speedFactor','vertexShaderSource','lat','__esModule','Draw','context','preExecute','camera','windField','once','mouseMove','enabled','primitives','PI_OVER_THREE','getRandomLatLng','createCommand','update','7tsPxpu','Cartesian2','container','STATIC_DRAW','viewport','particlesNumber','color','textures','DepthFunction','createTexture','isInExtent','1916gZGCXi','8838tgsxJh','pointer-events','Matrix4','lineWidth','outputTexture','width','cos','framebuffer','nextParticlesPosition','GeometryAttribute','vdata','mars3d-canvasWind','push','PixelFormat','mode','particlesComputing','isDestroy','toDegrees','maxAge','postProcessingSpeed','572409ENkxEw','sources','_createCanvas','attributeLocations','DISABLE_GL_POSITION_LOG_DEPTH','TRIANGLES','addPrimitives','commandToExecute','init','shaderProgram','defines','ymin','BufferUsage','viewerParameters','latRange','geometry','trails','261BOuPtv','_onMouseMoveEvent','ColorRamp','PrimitiveType','_animateFrame','createRenderingTextures','removeEventListener','createRawRenderState','pixelFormat','_speedRate','maxParticles','scene','CanvasWindLayer','Cesium','getSpeed','atan2','resize','canvasWidth','fadeOpacity','age','destination-in','wheel','reverseY','Rectangle','colors','OPAQUE','options','_randomParticle','canvasContext','uniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0auniform\x20float\x20dropRate;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0auniform\x20float\x20dropRateBump;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898,\x2078.233,\x204375.85453);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0,\x201.0);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0);\x0a\x20\x20\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20lev);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20\x20\x20return\x20particle.y\x20<\x20-90.0\x20||\x20particle.y\x20>\x2090.0;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20nextSpeed.a;\x0a\x0a\x20\x20\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20\x20\x20if\x20(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(randomParticle,\x201.0);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a\x20\x20\x20\x20}\x0a}\x0a','particlesTextureSize','umax','LUMINANCE','toRadians','toGridXY','particleSystem','8642100EcsYLs','_pointerEvents','__proto__','defined','SCENE3D','_addedHook','randomizeParticles','now','globe','segments','_updateIng','UNSIGNED_INT','grid','nextTrailsColor','1282812SVQoHQ','nextParticlesSpeed','Geometry','addEventListener','currentParticlesPosition','depthTexture','_onMapWhellEvent','_calcUV','unbindEvent','data','postProcessingPosition','min','10627969dHNElX','dimensions','updateViewerParameters','screen','currentParticlesSpeed','framebuffers','speed','speedRate','array','LayerUtil','lon','lineTo','518ASCFfT','clearCommand','commandType','globalAlpha','add','south'];_0x4cf6=function(){return _0x29e270;};return _0x4cf6();}class ParticlesRendering{constructor(_0x32d2a8,_0x2abbc0,_0x2a5201,_0x3f2882,_0x517f73){function _0x32f2b4(_0x4e47fe,_0x4559a8){return _0x5a394f(_0x4559a8- -0x15a,_0x4e47fe);}this[_0x32f2b4(-0xc7,-0x9a)](_0x32d2a8,_0x2abbc0,_0x2a5201['colors']),this['createRenderingFramebuffers'](_0x32d2a8),this['createRenderingPrimitives'](_0x32d2a8,_0x2a5201,_0x3f2882,_0x517f73);}['createRenderingTextures'](_0x5c2302,_0x5e4431,_0x3abdf7){const _0x2bd861={};_0x2bd861['context']=_0x5c2302,_0x2bd861[_0x31db8b(0x575,0x5d3)]=_0x5c2302[_0x239455(0x618,0x679)],_0x2bd861['height']=_0x5c2302['drawingBufferHeight'];function _0x31db8b(_0x5dd0fa,_0x13d88a){return _0x5a394f(_0x13d88a-0x415,_0x5dd0fa);}_0x2bd861['pixelFormat']=Cesium$4['PixelFormat'][_0x31db8b(0x5f6,0x584)],_0x2bd861['pixelDatatype']=Cesium$4[_0x239455(0x6c4,0x63c)][_0x239455(0x617,0x635)];const _0x240f39=_0x2bd861,_0x3bcf7f={};_0x3bcf7f[_0x31db8b(0x56e,0x5b6)]=_0x5c2302,_0x3bcf7f[_0x239455(0x6ad,0x6d6)]=_0x5c2302['drawingBufferWidth'];function _0x239455(_0x28f1ad,_0x4293de){return _0x223b03(_0x4293de-0x3d2,_0x28f1ad);}_0x3bcf7f[_0x239455(0x732,0x6b3)]=_0x5c2302[_0x239455(0x5ec,0x65e)],_0x3bcf7f[_0x239455(0x660,0x5db)]=Cesium$4['PixelFormat']['DEPTH_COMPONENT'],_0x3bcf7f['pixelDatatype']=Cesium$4[_0x31db8b(0x599,0x539)][_0x239455(0x574,0x602)];const _0x209d2f=_0x3bcf7f,_0x52786d=_0x3abdf7[_0x31db8b(0x52f,0x548)],_0x159a95=new Float32Array(_0x52786d*0x3);for(let _0x37b7e1=0x0;_0x37b7e1<_0x52786d;_0x37b7e1++){const _0x4b307e=Cesium$4['Color']['fromCssColorString'](_0x3abdf7[_0x37b7e1]);_0x159a95[0x3*_0x37b7e1]=_0x4b307e['red'],_0x159a95[0x3*_0x37b7e1+0x1]=_0x4b307e['green'],_0x159a95[0x3*_0x37b7e1+0x2]=_0x4b307e['blue'];}const _0x5bec25={'context':_0x5c2302,'width':_0x52786d,'height':0x1,'pixelFormat':Cesium$4['PixelFormat']['RGB'],'pixelDatatype':Cesium$4[_0x31db8b(0x585,0x539)]['FLOAT'],'sampler':new Cesium$4['Sampler']({'minificationFilter':Cesium$4['TextureMinificationFilter']['LINEAR'],'magnificationFilter':Cesium$4[_0x31db8b(0x51b,0x598)][_0x31db8b(0x5a1,0x554)]})};this[_0x31db8b(0x634,0x5c9)]={'segmentsColor':Util[_0x239455(0x748,0x6ce)](_0x240f39),'segmentsDepth':Util['createTexture'](_0x209d2f),'currentTrailsColor':Util['createTexture'](_0x240f39),'currentTrailsDepth':Util[_0x239455(0x6b0,0x6ce)](_0x209d2f),'nextTrailsColor':Util['createTexture'](_0x240f39),'nextTrailsDepth':Util['createTexture'](_0x209d2f),'colorTable':Util['createTexture'](_0x5bec25,_0x159a95)};}['createRenderingFramebuffers'](_0xaaea1c){function _0x9f575d(_0x2642cd,_0x1536ae){return _0x223b03(_0x2642cd- -0x31b,_0x1536ae);}function _0x26bd8d(_0x3a1dcd,_0x344875){return _0x223b03(_0x3a1dcd- -0x29c,_0x344875);}this['framebuffers']={'segments':Util['createFramebuffer'](_0xaaea1c,this['textures'][_0x9f575d(-0x89,-0x9d)],this['textures'][_0x26bd8d(-0x1f,-0xac)]),'currentTrails':Util['createFramebuffer'](_0xaaea1c,this[_0x9f575d(-0x21,0x65)]['currentTrailsColor'],this['textures']['currentTrailsDepth']),'nextTrails':Util['createFramebuffer'](_0xaaea1c,this[_0x9f575d(-0x21,-0xb)][_0x9f575d(-0xe9,-0x6e)],this[_0x9f575d(-0x21,-0x10)]['nextTrailsDepth'])};}[_0x5a394f(0x17b,0x188)](_0x22c263){const _0x2a02b7=0x4;let _0x2a177b=[];for(let _0x5f5abc=0x0;_0x5f5abc<_0x22c263['particlesTextureSize'];_0x5f5abc++){for(let _0x4c2bbc=0x0;_0x4c2bbc<_0x22c263[_0x1cd652(-0xfc,-0x13b)];_0x4c2bbc++){for(let _0x3402cd=0x0;_0x3402cd<_0x2a02b7;_0x3402cd++){_0x2a177b['push'](_0x5f5abc/_0x22c263[_0x445623(0x9f,0x22)]),_0x2a177b[_0x445623(0x164,0x10e)](_0x4c2bbc/_0x22c263[_0x1cd652(-0xfc,-0x186)]);}}}_0x2a177b=new Float32Array(_0x2a177b);let _0x30e818=[];const _0x280a39=[-0x1,0x1],_0x5ba138=[-0x1,0x1];for(let _0x5ccb2a=0x0;_0x5ccb2a<_0x22c263['maxParticles'];_0x5ccb2a++){for(let _0x1faca7=0x0;_0x1faca7<_0x2a02b7/0x2;_0x1faca7++){for(let _0x5b3b2c=0x0;_0x5b3b2c<_0x2a02b7/0x2;_0x5b3b2c++){_0x30e818['push'](_0x280a39[_0x1faca7]),_0x30e818['push'](_0x5ba138[_0x5b3b2c]),_0x30e818['push'](0x0);}}}_0x30e818=new Float32Array(_0x30e818);const _0x35394c=0x6*_0x22c263[_0x445623(0x77,0xe)];function _0x445623(_0x3987ff,_0x320894){return _0x5a394f(_0x320894- -0xb7,_0x3987ff);}const _0x104166=new Uint32Array(_0x35394c);function _0x1cd652(_0x35ba9a,_0x2d7755){return _0x223b03(_0x35ba9a- -0x31b,_0x2d7755);}for(let _0x2fb450=0x0,_0x764179=0x0,_0x193658=0x0;_0x2fb450<_0x22c263['maxParticles'];_0x2fb450++){_0x104166[_0x764179++]=_0x193658+0x0,_0x104166[_0x764179++]=_0x193658+0x1,_0x104166[_0x764179++]=_0x193658+0x2,_0x104166[_0x764179++]=_0x193658+0x2,_0x104166[_0x764179++]=_0x193658+0x1,_0x104166[_0x764179++]=_0x193658+0x3,_0x193658+=0x4;}const _0x1e1184=new Cesium$4['Geometry']({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4[(_0x1cd652(-0x13,0x6c))]({'componentDatatype':Cesium$4[_0x445623(0x3e,0x61)][_0x1cd652(-0x87,-0x114)],'componentsPerAttribute':0x2,'values':_0x2a177b}),'normal':new Cesium$4[(_0x1cd652(-0x13,-0x53))]({'componentDatatype':Cesium$4[_0x1cd652(-0xbd,-0x4f)]['FLOAT'],'componentsPerAttribute':0x3,'values':_0x30e818})}),'indices':_0x104166});return _0x1e1184;}['createRenderingPrimitives'](_0x100df7,_0x48ef43,_0x4f0301,_0x33bfe7){const _0x623dfa=this,_0x521714={};_0x521714['st']=0x0;function _0x277ebf(_0x315e35,_0x457cc3){return _0x5a394f(_0x457cc3-0x457,_0x315e35);}_0x521714['normal']=0x1;const _0x348cbc={};_0x348cbc[_0x277ebf(0x520,0x502)]=[segmentDraw_vert];const _0x2a93c0={};_0x2a93c0['sources']=[segmentDraw_frag];const _0xe4fd7={};_0xe4fd7['enabled']=!![];const _0x2272ae={};_0x2272ae['viewport']=undefined,_0x2272ae[_0x277ebf(0x5e4,0x582)]=_0xe4fd7,_0x2272ae['depthMask']=!![];const _0x3c9a4f={};_0x3c9a4f[_0x3c212b(0x489,0x4d0)]=0x0,_0x3c9a4f['st']=0x1;const _0x4b1f95={};_0x4b1f95[_0x3c212b(0x3ff,0x48a)]=[_0x277ebf(0x4bc,0x505)],_0x4b1f95['sources']=[fullscreen_vert];const _0x523e00={};_0x523e00['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x523e00['sources']=[trailDraw_frag];const _0x5672e2={};_0x5672e2[_0x277ebf(0x5ae,0x595)]=0x0,_0x5672e2['st']=0x1;const _0x342200={};_0x342200['defines']=[_0x277ebf(0x4c2,0x505)],_0x342200['sources']=[fullscreen_vert];const _0x24173b={};_0x24173b['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x24173b[_0x277ebf(0x4b4,0x502)]=[screenDraw_frag];const _0x4f0345={};_0x4f0345['enabled']=![];const _0x4c0dfa={};_0x4c0dfa[_0x3c212b(0x4f2,0x554)]=!![];function _0x3c212b(_0x20b8cb,_0x6c4e04){return _0x5a394f(_0x20b8cb-0x34b,_0x6c4e04);}this['primitives']={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x521714,'geometry':this['createSegmentsGeometry'](_0x48ef43),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'currentParticlesPosition':function(){function _0x1e15be(_0x2ce4f0,_0x30fa62){return _0x277ebf(_0x2ce4f0,_0x30fa62- -0x52b);}return _0x33bfe7[_0x1e15be(0xeb,0x85)]['currentParticlesPosition'];},'postProcessingPosition':function(){function _0x339f08(_0x577b3e,_0xccf249){return _0x3c212b(_0xccf249- -0x5c1,_0x577b3e);}function _0x406c6f(_0x326794,_0x29ffde){return _0x3c212b(_0x326794- -0x4bd,_0x29ffde);}return _0x33bfe7[_0x339f08(-0x150,-0x11d)][_0x339f08(-0x1fc,-0x17f)];},'postProcessingSpeed':function(){function _0x4b214f(_0x452b37,_0x2365ec){return _0x277ebf(_0x452b37,_0x2365ec- -0x36f);}return _0x33bfe7['particlesTextures'][_0x4b214f(0x1bf,0x191)];},'colorTable':function(){function _0x5cbe9f(_0x56d439,_0x3714fd){return _0x3c212b(_0x56d439- -0x555,_0x3714fd);}return _0x623dfa[_0x5cbe9f(-0x56,-0x45)]['colorTable'];},'aspect':function(){function _0x465276(_0x1ec429,_0x450c74){return _0x3c212b(_0x450c74- -0xd5,_0x1ec429);}return _0x100df7['drawingBufferWidth']/_0x100df7[_0x465276(0x41e,0x3bc)];},'pixelSize':function(){return _0x4f0301['pixelSize'];},'lineWidth':function(){return _0x48ef43['lineWidth'];},'particleHeight':function(){return _0x48ef43['particleHeight'];}},'vertexShaderSource':new Cesium$4[(_0x3c212b(0x498,0x47f))](_0x348cbc),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x2a93c0),'rawRenderState':Util['createRawRenderState'](_0x2272ae),'framebuffer':this['framebuffers']['segments'],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':_0x277ebf(0x65e,0x5f7),'attributeLocations':_0x3c9a4f,'geometry':Util[_0x277ebf(0x5d7,0x588)](),'primitiveType':Cesium$4['PrimitiveType'][_0x277ebf(0x597,0x506)],'uniformMap':{'segmentsColorTexture':function(){function _0x282aa8(_0x3a8dc1,_0x4f0711){return _0x3c212b(_0x4f0711- -0x222,_0x3a8dc1);}return _0x623dfa['textures'][_0x282aa8(0x1ef,0x275)];},'segmentsDepthTexture':function(){function _0x56a3ba(_0x33cb73,_0x5372f3){return _0x3c212b(_0x5372f3- -0x352,_0x33cb73);}return _0x623dfa[_0x56a3ba(0x1cc,0x1ad)]['segmentsDepth'];},'currentTrailsColor':function(){function _0x50f0ff(_0x26f0fe,_0x101009){return _0x277ebf(_0x26f0fe,_0x101009- -0x4e9);}return _0x623dfa[_0x50f0ff(0xe8,0x6c)]['currentTrails']['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x27a711(_0x115219,_0x8f4486){return _0x277ebf(_0x8f4486,_0x115219- -0x1bb);}return _0x623dfa[_0x27a711(0x39a,0x347)]['currentTrails']['depthTexture'];},'fadeOpacity':function(){return _0x48ef43['fadeOpacity'];}},'vertexShaderSource':new Cesium$4[(_0x3c212b(0x498,0x46d))](_0x4b1f95),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x523e00),'rawRenderState':Util[_0x3c212b(0x40d,0x45d)]({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4[_0x277ebf(0x5eb,0x60c)]['ALWAYS']},'depthMask':!![]}),'framebuffer':this[_0x277ebf(0x5c2,0x555)][_0x3c212b(0x4b7,0x4b3)],'autoClear':!![],'preExecute':function(){function _0x131bef(_0x5ab5fd,_0xb205c3){return _0x3c212b(_0xb205c3-0xe2,_0x5ab5fd);}const _0x4b1f35=_0x623dfa['framebuffers']['currentTrails'];function _0x429f70(_0x36ccda,_0xa3456a){return _0x3c212b(_0x36ccda- -0x1c7,_0xa3456a);}_0x623dfa['framebuffers']['currentTrails']=_0x623dfa['framebuffers'][_0x429f70(0x2f0,0x34b)],_0x623dfa[_0x131bef(0x4a8,0x52b)][_0x429f70(0x2f0,0x2c8)]=_0x4b1f35,_0x623dfa['primitives']['trails']['commandToExecute']['framebuffer']=_0x623dfa['framebuffers'][_0x131bef(0x5ce,0x599)],_0x623dfa[_0x131bef(0x582,0x5d5)]['trails'][_0x429f70(0x28a,0x273)]['framebuffer']=_0x623dfa[_0x131bef(0x4eb,0x52b)][_0x131bef(0x599,0x599)];}}),'screen':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x5672e2,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4[_0x277ebf(0x494,0x515)][_0x3c212b(0x3fa,0x3ee)],'uniformMap':{'trailsColorTexture':function(){function _0x9a35ed(_0x3290e0,_0x5d3472){return _0x3c212b(_0x3290e0-0x28,_0x5d3472);}function _0x56fbf1(_0x54fae8,_0x5e5bef){return _0x3c212b(_0x5e5bef- -0x5dd,_0x54fae8);}return _0x623dfa['framebuffers'][_0x9a35ed(0x4df,0x4cf)][_0x56fbf1(-0x98,-0x10a)](0x0);},'trailsDepthTexture':function(){function _0x2562c7(_0x16831b,_0xc8c164){return _0x3c212b(_0x16831b-0xdf,_0xc8c164);}return _0x623dfa[_0x2562c7(0x528,0x584)]['nextTrails']['depthTexture'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x342200),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x24173b),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0x4f0345,'depthMask':!![],'blending':_0x4c0dfa}),'framebuffer':undefined})};}}var getWind_frag=_0x223b03(0x2d4,0x330),updateSpeed_frag='uniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0auniform\x20sampler2D\x20particlesWind;\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20speedFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec3\x20percent\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20\x20\x20float\x20normalization\x20=\x20length(percent);\x0a\x0a\x20\x20\x20\x20return\x20normalization;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20//\x20vec3\x20currentSpeed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20texture(particlesWind,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20vec4(speedFactor\x20*\x20pixelSize\x20*\x20windVector,\x20calculateWindNorm(windVector));\x0a\x20\x20\x20\x20out_FragColor\x20=\x20nextSpeed;\x0a}\x0a',updatePosition_frag='uniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20\x20\x20float\x20term1\x20=\x20111132.92;\x0a\x20\x20\x20\x20float\x20term2\x20=\x20559.82\x20*\x20cos(2.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term3\x20=\x201.175\x20*\x20cos(4.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term4\x20=\x200.0023\x20*\x20cos(6.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20\x20\x20float\x20term5\x20=\x20111412.84\x20*\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20term6\x20=\x2093.5\x20*\x20cos(3.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term7\x20=\x200.118\x20*\x20cos(5.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avoid\x20updatePosition(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20windVectorInLonLatLev;\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20speed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20updatePosition(lonLatLev,\x20speed);\x0a}\x0a',postProcessingPosition_frag=_0x223b03(0x21e,0x266),postProcessingSpeed_frag='uniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20randomParticle\x20=\x20texture(postProcessingPosition,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20vec4\x20particleSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x0a\x20\x20\x20\x20if\x20(randomParticle.a\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20particleSpeed;\x0a\x20\x20\x20\x20}\x0a}\x0a';function _0x4acd(_0x44db02,_0x5c840b){const _0x4cf6fb=_0x4cf6();return _0x4acd=function(_0x4acdd4,_0x561561){_0x4acdd4=_0x4acdd4-0x1e3;let _0x53734d=_0x4cf6fb[_0x4acdd4];return _0x53734d;},_0x4acd(_0x44db02,_0x5c840b);}const Cesium$3=mars3d__namespace['Cesium'];class ParticlesComputing{constructor(_0x137c74,_0x286cf1,_0x35f5d6,_0x118711){function _0x2f5f0f(_0x53876b,_0x564927){return _0x223b03(_0x564927- -0x28,_0x53876b);}this[_0xb51df1(0x256,0x236)]=_0x286cf1,this['createWindTextures'](_0x137c74,_0x286cf1);function _0xb51df1(_0x50634e,_0x26eb52){return _0x5a394f(_0x50634e-0x160,_0x26eb52);}this[_0x2f5f0f(0x300,0x272)](_0x137c74,_0x35f5d6,_0x118711),this['createComputingPrimitives'](_0x286cf1,_0x35f5d6,_0x118711);}[_0x223b03(0x2c6,0x356)](_0x4f1f70,_0x1479bb){function _0x1a8e50(_0x5f2a19,_0x394b7a){return _0x5a394f(_0x5f2a19- -0x16c,_0x394b7a);}function _0x1acb57(_0x36a402,_0x46b104){return _0x5a394f(_0x36a402- -0x9,_0x46b104);}const _0x581477={'context':_0x4f1f70,'width':_0x1479bb['dimensions'][_0x1a8e50(-0x69,-0x18)],'height':_0x1479bb['dimensions']['lat']*(_0x1479bb['dimensions'][_0x1acb57(0x13f,0x180)]||0x1),'pixelFormat':Cesium$3[_0x1acb57(0x9a,0x122)][_0x1acb57(0xd2,0xf4)],'pixelDatatype':Cesium$3['PixelDatatype'][_0x1a8e50(-0x1e,-0x17)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0x1acb57(0x13c,0x18d)]['NEAREST'],'magnificationFilter':Cesium$3[_0x1a8e50(0x17,-0x35)][_0x1a8e50(0x2d,0x29)]})};this['windTextures']={'U':Util[_0x1a8e50(0x4a,0x32)](_0x581477,_0x1479bb['U']['array']),'V':Util[_0x1acb57(0x1ad,0x1b6)](_0x581477,_0x1479bb['V']['array'])};}['createParticlesTextures'](_0x393dcd,_0xebd49b,_0x2dd287){const _0xaadb02={'context':_0x393dcd,'width':_0xebd49b['particlesTextureSize'],'height':_0xebd49b[_0x3c2440(-0x12c,-0x154)],'pixelFormat':Cesium$3[_0x3c2440(-0x107,-0x18a)]['RGBA'],'pixelDatatype':Cesium$3['PixelDatatype'][_0x3c2440(-0x11c,-0xdf)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter']['NEAREST']})};function _0x9ed0ff(_0x2c01bb,_0x3f9b95){return _0x223b03(_0x2c01bb- -0x1c0,_0x3f9b95);}const _0x96b0c8=this[_0x9ed0ff(0x6b,0xfa)](_0xebd49b[_0x9ed0ff(0x4b,-0x19)],_0x2dd287),_0x2dde54=new Float32Array(0x4*_0xebd49b['maxParticles'])[_0x3c2440(-0x95,-0xb8)](0x0);function _0x3c2440(_0x156f35,_0x5ee0ab){return _0x223b03(_0x5ee0ab- -0x373,_0x156f35);}this['particlesTextures']={'particlesWind':Util[_0x9ed0ff(0x13c,0xf0)](_0xaadb02),'currentParticlesPosition':Util[_0x3c2440(-0xc5,-0x77)](_0xaadb02,_0x96b0c8),'nextParticlesPosition':Util[_0x3c2440(-0x5,-0x77)](_0xaadb02,_0x96b0c8),'currentParticlesSpeed':Util['createTexture'](_0xaadb02,_0x2dde54),'nextParticlesSpeed':Util['createTexture'](_0xaadb02,_0x2dde54),'postProcessingPosition':Util['createTexture'](_0xaadb02,_0x96b0c8),'postProcessingSpeed':Util[_0x9ed0ff(0x13c,0x116)](_0xaadb02,_0x2dde54)};}['randomizeParticles'](_0x5d4ceb,_0x22c371){function _0x28ee27(_0x534be2,_0x3797af){return _0x223b03(_0x534be2- -0x374,_0x3797af);}function _0x3c52bb(_0x42ff64,_0x13aa92){return _0x223b03(_0x13aa92-0x21e,_0x42ff64);}const _0x3d221c=new Float32Array(0x4*_0x5d4ceb);for(let _0x11bc41=0x0;_0x11bc41<_0x5d4ceb;_0x11bc41++){_0x3d221c[0x4*_0x11bc41]=Cesium$3['Math'][_0x28ee27(-0x11e,-0xca)](_0x22c371['lonRange']['x'],_0x22c371['lonRange']['y']),_0x3d221c[0x4*_0x11bc41+0x1]=Cesium$3['Math']['randomBetween'](_0x22c371['latRange']['x'],_0x22c371['latRange']['y']),_0x3d221c[0x4*_0x11bc41+0x2]=Cesium$3['Math'][_0x3c52bb(0x47b,0x474)](this['data']['lev']['min'],this[_0x3c52bb(0x3fb,0x45a)]['lev'][_0x28ee27(-0xdf,-0x8e)]),_0x3d221c[0x4*_0x11bc41+0x3]=0x0;}return _0x3d221c;}['destroyParticlesTextures'](){Object['keys'](this['particlesTextures'])['forEach'](_0x228fc9=>{function _0x5c152f(_0x3f9aa6,_0x3b5243){return _0x4acd(_0x3b5243- -0xfe,_0x3f9aa6);}this['particlesTextures'][_0x228fc9][_0x5c152f(0x16f,0x16e)]();});}['createComputingPrimitives'](_0x3d06b2,_0x37966d,_0x8bb87b){const _0x35b86f=new Cesium$3['Cartesian3'](_0x3d06b2['dimensions']['lon'],_0x3d06b2['dimensions'][_0x3e3bb7(0x1e2,0x1d4)],_0x3d06b2[_0x3e3bb7(0x13e,0x197)]['lev']),_0x4a5d9c=new Cesium$3['Cartesian3'](_0x3d06b2['lon']['min'],_0x3d06b2['lat']['min'],_0x3d06b2['lev']['min']),_0x8fe332=new Cesium$3[(_0x2952a6(0x3b8,0x3ad))](_0x3d06b2['lon']['max'],_0x3d06b2['lat'][_0x2952a6(0x41a,0x389)],_0x3d06b2[_0x2952a6(0x39c,0x382)]['max']),_0x49bace=new Cesium$3['Cartesian3']((_0x8fe332['x']-_0x4a5d9c['x'])/(_0x35b86f['x']-0x1),(_0x8fe332['y']-_0x4a5d9c['y'])/(_0x35b86f['y']-0x1),_0x35b86f['z']>0x1?(_0x8fe332['z']-_0x4a5d9c['z'])/(_0x35b86f['z']-0x1):0x1),_0x3ef587=new Cesium$3['Cartesian2'](_0x3d06b2['U'][_0x3e3bb7(0x13c,0x130)],_0x3d06b2['U']['max']),_0x21757d=new Cesium$3['Cartesian2'](_0x3d06b2['V'][_0x2952a6(0x394,0x332)],_0x3d06b2['V'][_0x3e3bb7(0x193,0x153)]),_0x1b77ba=this,_0xdc667={};_0xdc667['U']=function(){return _0x1b77ba['windTextures']['U'];},_0xdc667['V']=function(){return _0x1b77ba['windTextures']['V'];},_0xdc667[_0x3e3bb7(0x135,0x12a)]=function(){function _0x4b0eb7(_0x386b97,_0x103b58){return _0x2952a6(_0x103b58,_0x386b97-0x1fd);}return _0x1b77ba['particlesTextures'][_0x4b0eb7(0x528,0x549)];},_0xdc667[_0x3e3bb7(0x1de,0x1a3)]=function(){return _0x35b86f;},_0xdc667['minimum']=function(){return _0x4a5d9c;},_0xdc667['maximum']=function(){return _0x8fe332;},_0xdc667['interval']=function(){return _0x49bace;};const _0x3bb05d={};_0x3bb05d['sources']=[getWind_frag];function _0x3e3bb7(_0x2eda95,_0x4b8971){return _0x5a394f(_0x2eda95-0x44,_0x4b8971);}const _0x5eddcf={};_0x5eddcf['sources']=[updateSpeed_frag];const _0x98b9e={};_0x98b9e[_0x2952a6(0x2f1,0x2e5)]=[updatePosition_frag];const _0x326578={};_0x326578[_0x3e3bb7(0xef,0x175)]=[postProcessingPosition_frag];function _0x2952a6(_0x42beba,_0x12399c){return _0x5a394f(_0x12399c-0x23a,_0x42beba);}const _0x274821={};_0x274821[_0x3e3bb7(0xef,0xa5)]=[postProcessingSpeed_frag],this['primitives']={'getWind':new CustomPrimitive({'commandType':'Compute','uniformMap':_0xdc667,'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x3bb05d),'outputTexture':this[_0x3e3bb7(0x19d,0x118)]['particlesWind'],'preExecute':function(){function _0x51ba9d(_0x3ef03d,_0x4718f8){return _0x2952a6(_0x4718f8,_0x3ef03d- -0x13f);}function _0x534319(_0x3dc7da,_0x33f4c9){return _0x3e3bb7(_0x33f4c9-0x2bc,_0x3dc7da);}_0x1b77ba[_0x534319(0x4fb,0x4a8)]['getWind']['commandToExecute']['outputTexture']=_0x1b77ba[_0x51ba9d(0x254,0x2b0)]['particlesWind'];}}),'updateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesSpeed':function(){function _0x3500d0(_0x105b21,_0x32d2f6){return _0x2952a6(_0x105b21,_0x32d2f6-0x17f);}return _0x1b77ba['particlesTextures'][_0x3500d0(0x49a,0x4b6)];},'particlesWind':function(){function _0x40d535(_0x770299,_0xbd7325){return _0x3e3bb7(_0x770299- -0xa5,_0xbd7325);}return _0x1b77ba[_0x40d535(0xf8,0xd2)]['particlesWind'];},'uSpeedRange':function(){return _0x3ef587;},'vSpeedRange':function(){return _0x21757d;},'pixelSize':function(){return _0x8bb87b['pixelSize'];},'speedFactor':function(){return _0x37966d['speedFactor'];}},'fragmentShaderSource':new Cesium$3[(_0x3e3bb7(0x191,0x157))](_0x5eddcf),'outputTexture':this['particlesTextures'][_0x3e3bb7(0x132,0xfc)],'preExecute':function(){function _0xe8e059(_0x1aaf29,_0x3f2d28){return _0x3e3bb7(_0x1aaf29-0x180,_0x3f2d28);}function _0x363380(_0x3a5c12,_0x196d30){return _0x3e3bb7(_0x196d30-0x273,_0x3a5c12);}const _0x2673bb=_0x1b77ba['particlesTextures']['currentParticlesSpeed'];_0x1b77ba['particlesTextures'][_0xe8e059(0x2c1,0x263)]=_0x1b77ba['particlesTextures'][_0xe8e059(0x26d,0x259)],_0x1b77ba['particlesTextures']['postProcessingSpeed']=_0x2673bb,_0x1b77ba['primitives']['updateSpeed']['commandToExecute']['outputTexture']=_0x1b77ba['particlesTextures']['nextParticlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':function(){function _0xbf9f58(_0x19f0fd,_0x5e978a){return _0x2952a6(_0x19f0fd,_0x5e978a- -0x2c9);}return _0x1b77ba[_0xbf9f58(0x76,0xca)]['currentParticlesPosition'];},'currentParticlesSpeed':function(){function _0x4f5ff9(_0x2850e7,_0x372c9c){return _0x3e3bb7(_0x2850e7-0x8e,_0x372c9c);}return _0x1b77ba['particlesTextures'][_0x4f5ff9(0x1cf,0x257)];}},'fragmentShaderSource':new Cesium$3[(_0x3e3bb7(0x191,0x1a7))](_0x98b9e),'outputTexture':this[_0x3e3bb7(0x19d,0x20a)][_0x3e3bb7(0x205,0x22d)],'preExecute':function(){const _0x284369=_0x1b77ba[_0xf13473(-0x82,-0x85)][_0xf13473(-0xea,-0x5c)];function _0x3db878(_0x5cb999,_0x1cf520){return _0x3e3bb7(_0x5cb999-0xb7,_0x1cf520);}function _0xf13473(_0xb81080,_0x2b4059){return _0x3e3bb7(_0xb81080- -0x21f,_0x2b4059);}_0x1b77ba[_0x3db878(0x254,0x2a0)]['currentParticlesPosition']=_0x1b77ba[_0xf13473(-0x82,-0xe7)]['postProcessingPosition'],_0x1b77ba['particlesTextures']['postProcessingPosition']=_0x284369,_0x1b77ba[_0xf13473(-0x33,-0x52)]['updatePosition']['commandToExecute'][_0x3db878(0x2b8,0x331)]=_0x1b77ba[_0x3db878(0x254,0x1e7)]['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x2952a6(0x450,0x3cd),'uniformMap':{'nextParticlesPosition':function(){return _0x1b77ba['particlesTextures']['nextParticlesPosition'];},'nextParticlesSpeed':function(){function _0x224b3b(_0xb30893,_0xfcf71c){return _0x3e3bb7(_0xfcf71c-0x38,_0xb30893);}return _0x1b77ba['particlesTextures'][_0x224b3b(0x1c3,0x16a)];},'lonRange':function(){return _0x8bb87b['lonRange'];},'latRange':function(){return _0x8bb87b['latRange'];},'randomCoefficient':function(){const _0x5e3656=Math['random']();return _0x5e3656;},'dropRate':function(){function _0x50dce6(_0x420acf,_0x255aa0){return _0x3e3bb7(_0x255aa0- -0x19d,_0x420acf);}return _0x37966d[_0x50dce6(0x7d,0x39)];},'dropRateBump':function(){return _0x37966d['dropRateBump'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x326578),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':function(){function _0x48e1da(_0x4e4711,_0x5df26b){return _0x2952a6(_0x4e4711,_0x5df26b-0x204);}function _0x37a827(_0x321ac1,_0x3f9bb6){return _0x2952a6(_0x3f9bb6,_0x321ac1- -0xc8);}_0x1b77ba['primitives'][_0x37a827(0x269,0x22a)]['commandToExecute'][_0x37a827(0x32f,0x2ab)]=_0x1b77ba['particlesTextures']['postProcessingPosition'];}}),'postProcessingSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'postProcessingPosition':function(){return _0x1b77ba['particlesTextures']['postProcessingPosition'];},'nextParticlesSpeed':function(){function _0xe2de(_0x299674,_0x20016c){return _0x2952a6(_0x20016c,_0x299674-0xbb);}return _0x1b77ba[_0xe2de(0x44e,0x3e0)]['nextParticlesSpeed'];}},'fragmentShaderSource':new Cesium$3[(_0x2952a6(0x402,0x387))](_0x274821),'outputTexture':this[_0x2952a6(0x312,0x393)][_0x2952a6(0x2aa,0x2e3)],'preExecute':function(){function _0x3571e8(_0x3c305d,_0x21fb87){return _0x2952a6(_0x21fb87,_0x3c305d-0x11d);}function _0x9d856(_0x338844,_0xc50b7a){return _0x3e3bb7(_0x338844-0x287,_0xc50b7a);}_0x1b77ba['primitives'][_0x9d856(0x374,0x2f0)][_0x3571e8(0x408,0x449)]['outputTexture']=_0x1b77ba[_0x3571e8(0x4b0,0x4ee)]['postProcessingSpeed'];}})};}}function _0x5a394f(_0x30c7d2,_0x21b084){return _0x4acd(_0x30c7d2- -0x140,_0x21b084);}const Cesium$2=mars3d__namespace[_0x5a394f(0xc8,0xec)];class ParticleSystem{constructor(_0x3e44d7,_0x3f779e,_0x4a6f6b,_0x291c0a){this['context']=_0x3e44d7,_0x3f779e={..._0x3f779e};_0x3f779e['udata']&&_0x3f779e['vdata']&&(_0x3f779e[_0x44e9c8(0x4cd,0x4ec)]={},_0x3f779e[_0x44e9c8(0x4cd,0x53a)][_0x3cc951(0x4a9,0x43f)]=_0x3f779e['cols'],_0x3f779e['dimensions']['lat']=_0x3f779e[_0x44e9c8(0x550,0x565)],_0x3f779e[_0x44e9c8(0x4cd,0x43c)]['lev']=_0x3f779e[_0x3cc951(0x481,0x484)]||0x1,_0x3f779e['lon']={},_0x3f779e[_0x44e9c8(0x4d6,0x4ed)]['min']=_0x3f779e[_0x3cc951(0x3f7,0x47c)],_0x3f779e[_0x44e9c8(0x4d6,0x538)]['max']=_0x3f779e['xmax'],_0x3f779e['lat']={},_0x3f779e['lat']['min']=_0x3f779e[_0x3cc951(0x3f7,0x3f1)],_0x3f779e[_0x44e9c8(0x571,0x52e)]['max']=_0x3f779e['ymax'],_0x3f779e['lev']={},_0x3f779e['lev'][_0x3cc951(0x49e,0x434)]=_0x3f779e['levmin']??0x1,_0x3f779e['lev']['max']=_0x3f779e['levmax']??0x1,_0x3f779e['U']={},_0x3f779e['U'][_0x44e9c8(0x4d4,0x4c5)]=new Float32Array(_0x3f779e[_0x3cc951(0x42a,0x478)]),_0x3f779e['U'][_0x3cc951(0x3f1,0x434)]=_0x3f779e[_0x3cc951(0x50c,0x480)]??Math['min'](..._0x3f779e[_0x44e9c8(0x50f,0x577)]),_0x3f779e['U'][_0x3cc951(0x4a8,0x48b)]=_0x3f779e[_0x3cc951(0x401,0x416)]??Math['max'](..._0x3f779e[_0x3cc951(0x406,0x478)]),_0x3f779e['V']={},_0x3f779e['V'][_0x3cc951(0x472,0x43d)]=new Float32Array(_0x3f779e['vdata']),_0x3f779e['V']['min']=_0x3f779e['vmin']??Math[_0x3cc951(0x48f,0x434)](..._0x3f779e['vdata']),_0x3f779e['V']['max']=_0x3f779e['vmax']??Math['max'](..._0x3f779e[_0x3cc951(0x503,0x4ff)]));this[_0x44e9c8(0x4c9,0x531)]=_0x3f779e;function _0x44e9c8(_0x11aba9,_0x289c51){return _0x223b03(_0x11aba9-0x28d,_0x289c51);}this['options']=_0x4a6f6b,this['viewerParameters']=_0x291c0a;function _0x3cc951(_0x31080c,_0x361c5f){return _0x223b03(_0x361c5f-0x1f6,_0x31080c);}this['particlesComputing']=new ParticlesComputing(this['context'],this[_0x3cc951(0x411,0x432)],this['options'],this['viewerParameters']),this['particlesRendering']=new ParticlesRendering(this['context'],this['data'],this['options'],this[_0x44e9c8(0x48a,0x46a)],this[_0x3cc951(0x3ed,0x3e1)]);}[_0x223b03(0x28d,0x236)](_0x55f40a){this['particlesComputing'][_0x2b8363(0x20b,0x295)](),Object[_0x2b8363(0x228,0x27c)](this['particlesComputing'][_0x1924aa(0x205,0x1ec)])['forEach'](_0x34383d=>{function _0x16720f(_0x5c0e22,_0xa29dfa){return _0x1924aa(_0x5c0e22,_0xa29dfa- -0x327);}function _0x59409a(_0x5cf887,_0x1b7068){return _0x2b8363(_0x5cf887,_0x1b7068- -0x46);}this[_0x59409a(0x1a1,0x167)][_0x59409a(0x23f,0x1ec)][_0x34383d]['destroy']();});function _0x2b8363(_0x47d9ae,_0x1884a1){return _0x223b03(_0x1884a1- -0x3e,_0x47d9ae);}function _0x1924aa(_0x1b34d4,_0x351390){return _0x223b03(_0x351390- -0x84,_0x1b34d4);}this[_0x1924aa(0x1f2,0x228)][_0x2b8363(0x347,0x2bc)][_0x2b8363(0x2b4,0x23a)]['destroy'](),Object[_0x2b8363(0x1fa,0x27c)](this['particlesRendering'][_0x1924aa(0x1c4,0x1c0)])[_0x2b8363(0x277,0x28d)](_0x8253cb=>{function _0x38059e(_0x176fcd,_0x151af0){return _0x2b8363(_0x176fcd,_0x151af0- -0x16);}function _0x1c4dda(_0x534da9,_0x2bb690){return _0x2b8363(_0x534da9,_0x2bb690- -0x80);}this['particlesRendering'][_0x1c4dda(0x20e,0x186)][_0x8253cb][_0x38059e(0x294,0x21e)]();}),this['context']=_0x55f40a,this[_0x1924aa(0x189,0x167)]=new ParticlesComputing(this[_0x2b8363(0x221,0x2a9)],this['data'],this[_0x2b8363(0x18d,0x1dd)],this['viewerParameters']),this['particlesRendering']=new ParticlesRendering(this[_0x1924aa(0x215,0x263)],this['data'],this[_0x2b8363(0x1c4,0x1dd)],this['viewerParameters'],this['particlesComputing']);}[_0x223b03(0x2b6,0x2dc)](){const _0x4fae59=new Cesium$2[(_0x3a6dca(-0x3b,0x4d))]({'color':new Cesium$2['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2['Pass'][_0x3a6dca(-0xb1,-0x72)]});function _0x23e5fb(_0x12698c,_0x599571){return _0x5a394f(_0x599571-0x1b2,_0x12698c);}function _0x3a6dca(_0x4992a3,_0x2ff22f){return _0x223b03(_0x4992a3- -0x2cb,_0x2ff22f);}Object['keys'](this[_0x3a6dca(-0x1f,-0x95)]['framebuffers'])[_0x23e5fb(0x33e,0x337)](_0x213062=>{function _0x57a8d4(_0x5a8c4e,_0x409379){return _0x23e5fb(_0x5a8c4e,_0x409379-0x261);}function _0x963863(_0x523c20,_0x171e6c){return _0x23e5fb(_0x171e6c,_0x523c20-0xc0);}_0x4fae59[_0x57a8d4(0x55f,0x5d3)]=this['particlesRendering'][_0x963863(0x370,0x3ed)][_0x213062],_0x4fae59['execute'](this['context']);});}['refreshParticles'](_0x263a43){this['clearFramebuffers']();function _0x18f8e8(_0x1162f1,_0x2b0b25){return _0x223b03(_0x2b0b25-0x2f,_0x1162f1);}function _0x2b30db(_0xe0b913,_0x3669da){return _0x223b03(_0x3669da- -0x18,_0xe0b913);}this['particlesComputing'][_0x2b30db(0x306,0x2bb)](),this['particlesComputing'][_0x18f8e8(0x29e,0x2c9)](this['context'],this['options'],this['viewerParameters']);if(_0x263a43){var _0x2ae368;const _0x2ba937=this[_0x2b30db(0x25a,0x294)]['createSegmentsGeometry'](this['options']);this['particlesRendering']['primitives']['segments']['geometry']=_0x2ba937;const _0x225c32=Cesium$2['VertexArray']['fromGeometry']({'context':this['context'],'geometry':_0x2ba937,'attributeLocations':this['particlesRendering']['primitives']['segments']['attributeLocations'],'bufferUsage':Cesium$2[_0x2b30db(0x21e,0x1e4)]['STATIC_DRAW']});(_0x2ae368=this['particlesRendering'][_0x18f8e8(0x2a5,0x31d)])!==null&&_0x2ae368!==void 0x0&&(_0x2ae368=_0x2ae368[_0x2b30db(0x23a,0x216)])!==null&&_0x2ae368!==void 0x0&&_0x2ae368['commandToExecute']&&(this['particlesRendering'][_0x18f8e8(0x387,0x31d)]['segments']['commandToExecute'][_0x18f8e8(0x32c,0x2dc)]=_0x225c32);}}[_0x223b03(0x2a3,0x28c)](_0x3645e5){let _0x16102c=![];function _0xa79a50(_0x2e4777,_0x4e11e3){return _0x223b03(_0x4e11e3-0x28,_0x2e4777);}function _0x76e7ca(_0x567afe,_0x691105){return _0x5a394f(_0x691105-0x3a1,_0x567afe);}this['options']['maxParticles']!==_0x3645e5[_0xa79a50(0x22b,0x233)]&&(_0x16102c=!![]),Object['keys'](_0x3645e5)[_0xa79a50(0x2dc,0x2f3)](_0x2340b0=>{function _0x407e9e(_0x51ddf7,_0x468eec){return _0x76e7ca(_0x51ddf7,_0x468eec- -0x2c7);}this[_0x407e9e(0x229,0x1af)][_0x2340b0]=_0x3645e5[_0x2340b0];}),this['refreshParticles'](_0x16102c);}[_0x5a394f(0x18c,0x15c)](_0x5a9b69){function _0x24dd36(_0x2a1e94,_0x3b023a){return _0x5a394f(_0x2a1e94-0x31c,_0x3b023a);}Object['keys'](_0x5a9b69)['forEach'](_0x3a0feb=>{this['viewerParameters'][_0x3a0feb]=_0x5a9b69[_0x3a0feb];}),this[_0x24dd36(0x438,0x4ad)](![]);}[_0x5a394f(0x12c,0x18a)](){clearTimeout(this[_0x5a525d(0x396,0x3fa)]),this['particlesComputing'][_0x5a525d(0x482,0x3f3)]();function _0x5a525d(_0x1eaa3f,_0x8eb2aa){return _0x223b03(_0x8eb2aa-0x120,_0x1eaa3f);}Object['keys'](this['particlesComputing'][_0x306f2f(0x2b,-0x9)])['forEach'](_0x32fe73=>{function _0x814026(_0x580649,_0x208a01){return _0x5a525d(_0x208a01,_0x580649- -0x1e7);}function _0x1b3740(_0x4afb00,_0x5ee0b5){return _0x5a525d(_0x5ee0b5,_0x4afb00- -0x1cf);}this[_0x814026(0x124,0x1a3)]['windTextures'][_0x32fe73][_0x1b3740(0x1c3,0x1fe)]();}),this['particlesRendering']['textures'][_0x5a525d(0x394,0x398)][_0x306f2f(-0x1a,-0x7)]();function _0x306f2f(_0x579552,_0x3827a2){return _0x5a394f(_0x3827a2- -0x133,_0x579552);}Object['keys'](this['particlesRendering']['framebuffers'])['forEach'](_0x11b4a4=>{function _0x2b045e(_0x4abb8b,_0x43971e){return _0x5a525d(_0x4abb8b,_0x43971e-0x2c0);}this['particlesRendering']['framebuffers'][_0x11b4a4][_0x2b045e(0x6de,0x652)]();});for(const _0x597181 in this){delete this[_0x597181];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x5a394f(0x10f,0x92)],_0x644eec={};_0x644eec[_0x5a394f(0x1b2,0x17e)]=0x1000,_0x644eec['fixedHeight']=0x0,_0x644eec[_0x223b03(0x213,0x212)]=0.996,_0x644eec['dropRate']=0.003,_0x644eec[_0x223b03(0x2a6,0x25b)]=0.01,_0x644eec[_0x5a394f(0x19c,0x147)]=0.5,_0x644eec['lineWidth']=0x2,_0x644eec['colors']=['rgb(206,255,255)'];const DEF_OPTIONS=_0x644eec;class WindLayer extends BaseLayer$1{constructor(_0x49b208={}){_0x49b208={...DEF_OPTIONS,..._0x49b208},super(_0x49b208),this['_setOptionsHook'](_0x49b208);}get[_0x5a394f(0x156,0xd0)](){function _0x5191e8(_0x51569f,_0x166b6e){return _0x223b03(_0x166b6e-0x2d7,_0x51569f);}return this[_0x5191e8(0x58c,0x5c5)];}get['data'](){function _0x458197(_0x4e6020,_0x1d6ae1){return _0x5a394f(_0x1d6ae1-0x33d,_0x4e6020);}return this[_0x458197(0x4eb,0x4bc)];}set['data'](_0xe658a9){function _0x196ca(_0x3b8bd2,_0x1e3c9a){return _0x5a394f(_0x3b8bd2-0x1fe,_0x1e3c9a);}this[_0x196ca(0x385,0x3ec)](_0xe658a9);}get[_0x5a394f(0xd3,0x9d)](){function _0xa7d6dd(_0x1895bd,_0x58f9f5){return _0x5a394f(_0x1895bd-0x507,_0x58f9f5);}return this[_0xa7d6dd(0x5dc,0x608)]['colors'];}set[_0x5a394f(0xd3,0x15e)](_0x39e603){this['options'][_0x5293a2(0x4e2,0x572)]=_0x39e603;if(this['particleSystem']){const _0x2fd0f0={};_0x2fd0f0['colors']=_0x39e603,this['particleSystem'][_0x1f46a2(0x427,0x454)](_0x2fd0f0);}function _0x5293a2(_0x1ee7cc,_0x263f80){return _0x223b03(_0x1ee7cc-0x2c9,_0x263f80);}function _0x1f46a2(_0x2d0bfc,_0x6e1b69){return _0x5a394f(_0x2d0bfc-0x2ca,_0x6e1b69);}this[_0x1f46a2(0x395,0x3ea)]();}['_mountedHook'](){}['_addedHook'](){this['scene']=this['_map']['scene'];function _0x2b0143(_0x584141,_0x38efae){return _0x5a394f(_0x584141-0x2bf,_0x38efae);}this['camera']=this['_map']['camera'],this['primitives']=new Cesium$1[(_0x5257cd(-0x86,-0x43))]();function _0x5257cd(_0x334922,_0x48c339){return _0x5a394f(_0x334922- -0x1a4,_0x48c339);}this['_map'][_0x5257cd(-0xde,-0x156)]['primitives'][_0x2b0143(0x3c8,0x352)](this[_0x2b0143(0x467,0x4a3)]),this['viewerParameters']={'lonRange':new Cesium$1[(_0x2b0143(0x46d,0x452))](),'latRange':new Cesium$1[(_0x5257cd(0xa,-0x2f))](),'pixelSize':0x0},this[_0x2b0143(0x424,0x3af)]=new Cesium$1['BoundingSphere'](Cesium$1[_0x5257cd(-0x31,-0x10)]['ZERO'],0.99*0x615299),this[_0x2b0143(0x3ba,0x361)](),window[_0x2b0143(0x3af,0x3fc)]('resize',this['resize']['bind'](this),![]),this[_0x2b0143(0x456,0x3cb)]=![],this[_0x2b0143(0x455,0x3fa)]=![],this['_map']['on'](mars3d__namespace['EventType'][_0x2b0143(0x38f,0x35e)],this[_0x2b0143(0x3b2,0x400)],this),this[_0x2b0143(0x454,0x4a1)]['on'](mars3d__namespace[_0x2b0143(0x3d1,0x3e1)][_0x5257cd(-0x42,-0x15)],this[_0x5257cd(-0x7b,-0x78)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x5257cd(-0x97,-0xf)],this[_0x5257cd(-0x39,0x4)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x5257cd(-0xe8,-0x149)],this),this['_data']&&this[_0x2b0143(0x446,0x4a8)](this['_data']);}[_0x223b03(0x27b,0x2be)](){window['removeEventListener']('resize',this['resize']),this[_0x2b0148(-0x108,-0x114)][_0x2bd915(0x160,0x108)](mars3d__namespace['EventType']['preRender'],this['_onMap_preRenderEvent'],this),this[_0x2bd915(0x192,0x1c0)]['off'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace[_0x2bd915(0x10f,0x182)]['mouseDown'],this['_onMouseDownEvent'],this);function _0x2b0148(_0x3c3f02,_0x20e2e4){return _0x5a394f(_0x3c3f02- -0x29d,_0x20e2e4);}function _0x2bd915(_0x1d347c,_0x5d0c54){return _0x5a394f(_0x1d347c- -0x3,_0x5d0c54);}this['_map']['off'](mars3d__namespace[_0x2b0148(-0x18b,-0x1aa)]['mouseUp'],this[_0x2bd915(0x168,0xfc)],this),this['_map']['off'](mars3d__namespace[_0x2bd915(0x10f,0x11f)][_0x2b0148(-0xf7,-0x9d)],this['_onMouseMoveEvent'],this),this[_0x2bd915(0x1a5,0x141)]['removeAll'](),this['_map'][_0x2bd915(0xc3,0x131)]['primitives']['remove'](this[_0x2bd915(0x1a5,0x18f)]);}['resize'](){function _0x2e8014(_0x8cd370,_0x3679fa){return _0x223b03(_0x3679fa- -0x3ad,_0x8cd370);}if(!this[_0x452b53(0x375,0x3c3)]||!this[_0x452b53(0x36d,0x330)])return;this['primitives']['show']=![];function _0x452b53(_0xb55135,_0x2b00b0){return _0x5a394f(_0x2b00b0-0x252,_0xb55135);}this['primitives']['removeAll'](),this['_map'][_0x2e8014(-0x64,-0xc2)](mars3d__namespace[_0x2e8014(-0x1c2,-0x155)]['preRender'],this['_onMap_preRenderEvent'],this);}['_onMap_preRenderEvent'](_0x14e201){function _0x272313(_0x21c783,_0x22b4f5){return _0x5a394f(_0x22b4f5- -0x19e,_0x21c783);}this[_0x272313(-0xd3,-0xc0)]['canvasResize'](this['scene']['context']),this['addPrimitives'](),this['primitives']['show']=!![];}['_onMapWhellEvent'](_0xf5c8e0){function _0x56c3c0(_0xe1c9c1,_0x13a6e5){return _0x5a394f(_0xe1c9c1-0xb7,_0x13a6e5);}function _0x10e310(_0x511732,_0x4f702c){return _0x223b03(_0x511732-0x308,_0x4f702c);}clearTimeout(this[_0x56c3c0(0x224,0x19b)]);if(!this[_0x56c3c0(0x228,0x1d4)]||!this['particleSystem'])return;this['primitives'][_0x10e310(0x5bf,0x617)]=![],this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;this['redraw']();},0xc8);}['_onMouseDownEvent'](_0x1aa039){this['mouse_down']=!![];}[_0x223b03(0x202,0x27e)](_0x53ba34){if(!this['show']||!this['particleSystem'])return;function _0x20c6d8(_0x16be26,_0x2ed8bd){return _0x5a394f(_0x2ed8bd- -0x1f1,_0x16be26);}function _0x231343(_0x43baef,_0x646600){return _0x223b03(_0x43baef- -0x207,_0x646600);}this[_0x20c6d8(0x2f,-0x5a)]&&(this['primitives'][_0x231343(0xb0,0x128)]=![],this['mouse_move']=!![]);}['_onMouseUpEvent'](_0xee73fc){function _0x2bebe5(_0x2d443b,_0x5e0022){return _0x5a394f(_0x5e0022-0x194,_0x2d443b);}if(!this[_0x1bdd45(0x151,0x1d4)]||!this['particleSystem'])return;this['mouse_down']&&this['mouse_move']&&this['redraw']();this[_0x2bebe5(0x355,0x33c)]['show']=!![];function _0x1bdd45(_0x333d3c,_0x4ba4e0){return _0x223b03(_0x4ba4e0- -0xe3,_0x333d3c);}this[_0x2bebe5(0x2f1,0x32b)]=![],this[_0x1bdd45(0x215,0x1f9)]=![];}[_0x223b03(0x251,0x2d9)](){if(!this['_map']||!this[_0x371b8d(0x19,0x1e)])return;function _0x51a085(_0x4e4717,_0x32d588){return _0x5a394f(_0x4e4717-0x4eb,_0x32d588);}function _0x371b8d(_0x5ee6da,_0x208b16){return _0x223b03(_0x5ee6da- -0x29e,_0x208b16);}this['updateViewerParameters'](),this[_0x51a085(0x5c9,0x5cf)]['applyViewerParameters'](this['viewerParameters']),this[_0x371b8d(0x50,-0xf)]['show']=!![];}[_0x223b03(0x2cd,0x2ce)](_0x3a3739){this[_0xb1d8aa(0x682,0x658)]=_0x3a3739;function _0xb1d8aa(_0x45c50a,_0x47ecbe){return _0x5a394f(_0x47ecbe-0x4d9,_0x45c50a);}this['particleSystem']&&this['particleSystem']['destroy'](),this['particleSystem']=new ParticleSystem(this['scene']['context'],_0x3a3739,this['getOptions'](),this['viewerParameters']),this['addPrimitives']();}[_0x223b03(0x257,0x20f)](_0x4412f8,_0x3c3b4f){if(_0x4412f8)for(const _0xb9c6b6 in _0x4412f8){this[_0xb9c6b6]=_0x4412f8[_0xb9c6b6];}function _0xfd5e4c(_0x5cb7af,_0xe46e64){return _0x5a394f(_0xe46e64-0x305,_0x5cb7af);}function _0x1b6e30(_0x545231,_0x1e3e87){return _0x223b03(_0x1e3e87- -0x123,_0x545231);}this[_0x1b6e30(0x9c,0x101)]&&this[_0xfd5e4c(0x3f4,0x3e3)]['setOptions'](this['getOptions']());}[_0x5a394f(0x176,0x1d3)](){const _0x129556=Math['ceil'](Math['sqrt'](this[_0x188d36(0x100,0x18d)]));this[_0x188d36(0x100,0xd3)]=_0x129556*_0x129556;const _0x224e83={};_0x224e83['particlesTextureSize']=_0x129556,_0x224e83[_0x23e58b(0x47,0x76)]=this['particlesNumber'],_0x224e83['particleHeight']=this['fixedHeight'],_0x224e83['fadeOpacity']=this['fadeOpacity'],_0x224e83['dropRate']=this['dropRate'],_0x224e83['dropRateBump']=this['dropRateBump'],_0x224e83['speedFactor']=this['speedFactor'];function _0x188d36(_0xd7404,_0x12ed55){return _0x223b03(_0xd7404- -0x1f8,_0x12ed55);}function _0x23e58b(_0x48e367,_0x325600){return _0x5a394f(_0x325600- -0x4f,_0x48e367);}return _0x224e83['lineWidth']=this[_0x23e58b(0x193,0x16d)],_0x224e83['colors']=this['colors'],_0x224e83;}[_0x5a394f(0xb0,0x5a)](){function _0x429f25(_0x4f8712,_0x5da16f){return _0x5a394f(_0x5da16f-0x4d2,_0x4f8712);}this[_0x429f25(0x5f6,0x67a)]['add'](this['particleSystem'][_0x5d348f(0x566,0x58c)]['primitives']['getWind']),this['primitives'][_0x5d348f(0x5ca,0x593)](this[_0x5d348f(0x59f,0x54d)]['particlesComputing']['primitives'][_0x429f25(0x62b,0x606)]),this['primitives']['add'](this[_0x429f25(0x584,0x5b0)]['particlesComputing']['primitives']['updatePosition']),this['primitives']['add'](this['particleSystem']['particlesComputing']['primitives'][_0x5d348f(0x5b8,0x606)]);function _0x5d348f(_0x4270c6,_0x5dd5ef){return _0x5a394f(_0x4270c6-0x4c1,_0x5dd5ef);}this['primitives']['add'](this['particleSystem']['particlesComputing']['primitives']['postProcessingSpeed']),this[_0x5d348f(0x669,0x63c)]['add'](this[_0x5d348f(0x59f,0x5c1)]['particlesRendering'][_0x429f25(0x6e3,0x67a)]['segments']),this['primitives']['add'](this['particleSystem']['particlesRendering']['primitives'][_0x5d348f(0x57b,0x551)]),this['primitives']['add'](this['particleSystem']['particlesRendering']['primitives'][_0x5d348f(0x5bd,0x603)]);}[_0x223b03(0x241,0x1e7)](){let _0x10d4bc=this['camera']['computeViewRectangle'](this['scene'][_0x28e5da(0x277,0x20a)][_0x28e5da(0x312,0x3a0)]);if(!_0x10d4bc){const _0x7c455=this['_map']['getExtent']();_0x10d4bc=Cesium$1[_0x44f51c(0x407,0x427)]['fromDegrees'](_0x7c455['xmin'],_0x7c455['ymin'],_0x7c455[_0x44f51c(0x4b1,0x4b4)],_0x7c455['ymax']);}const _0x393d72=Util['viewRectangleToLonLatRange'](_0x10d4bc);function _0x44f51c(_0x967488,_0x4066f2){return _0x223b03(_0x4066f2-0x20f,_0x967488);}this['viewerParameters'][_0x28e5da(0x2a6,0x255)]['x']=_0x393d72[_0x28e5da(0x293,0x322)]['min'];function _0x28e5da(_0x3153cb,_0x3e703b){return _0x5a394f(_0x3153cb-0x190,_0x3e703b);}this['viewerParameters']['lonRange']['y']=_0x393d72['lon']['max'],this[_0x44f51c(0x413,0x40c)][_0x44f51c(0x41d,0x40d)]['x']=_0x393d72['lat'][_0x28e5da(0x288,0x29d)],this[_0x44f51c(0x413,0x40c)]['latRange']['y']=_0x393d72['lat'][_0x28e5da(0x2df,0x2d3)];const _0x1ac227=this['camera'][_0x28e5da(0x319,0x303)](this['globeBoundingSphere'],this['scene'][_0x44f51c(0x460,0x4b6)],this['scene']['drawingBufferHeight']);_0x1ac227>0x0&&(this['viewerParameters']['pixelSize']=_0x1ac227);}}mars3d__namespace['LayerUtil']['register'](_0x5a394f(0x130,0xf9),WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this[_0x304a73(0x563,0x583)]=null,this['lat']=null;function _0x304a73(_0x4ac34c,_0x5dd0ea){return _0x223b03(_0x5dd0ea-0x2eb,_0x4ac34c);}this['tlng']=null,this['tlat']=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x16e261 in this){delete this[_0x16e261];}}}class CanvasWindField{constructor(_0x4f3797){this['setOptions'](_0x4f3797);}get['speedRate'](){function _0x11c425(_0x29f9db,_0x1be113){return _0x223b03(_0x1be113- -0x319,_0x29f9db);}return this[_0x11c425(-0x95,-0x10f)];}set['speedRate'](_0x269fc4){this['_speedRate']=(0x64-(_0x269fc4>0x63?0x63:_0x269fc4))*0x64;function _0x3001f0(_0x24a002,_0x5b879e){return _0x5a394f(_0x5b879e-0x394,_0x24a002);}function _0x149e71(_0x676bd5,_0x416ffb){return _0x223b03(_0x676bd5-0x23c,_0x416ffb);}this[_0x3001f0(0x46f,0x4ab)]=[(this[_0x149e71(0x4e1,0x4e0)]-this[_0x3001f0(0x54e,0x4d4)])/this[_0x3001f0(0x4a0,0x458)],(this[_0x3001f0(0x4bc,0x4a0)]-this[_0x149e71(0x437,0x431)])/this[_0x3001f0(0x3dc,0x458)]];}get[_0x5a394f(0xa8,0x110)](){return this['_maxAge'];}set['maxAge'](_0x440cfb){this['_maxAge']=_0x440cfb;}[_0x223b03(0x2a3,0x2df)](_0x4c5c4e){this['options']=_0x4c5c4e,this['maxAge']=_0x4c5c4e['maxAge']||0x78;function _0x553ab0(_0x49894a,_0x547460){return _0x5a394f(_0x49894a- -0x1ec,_0x547460);}this[_0x553ab0(-0xec,-0x90)]=_0x4c5c4e['speedRate']||0x32;function _0x40c874(_0x2c9b0c,_0x53dd55){return _0x5a394f(_0x53dd55-0x328,_0x2c9b0c);}this['particles']=[];const _0x191104=_0x4c5c4e['particlesNumber']||0x1000;for(let _0x201ddc=0x0;_0x201ddc<_0x191104;_0x201ddc++){const _0x4c53dd=this[_0x40c874(0x3cb,0x3fe)](new CanvasParticle());this[_0x40c874(0x3c0,0x436)][_0x553ab0(-0x27,-0x8a)](_0x4c53dd);}}['setDate'](_0x1a3035){this['rows']=_0x1a3035[_0x439690(0x566,0x56d)],this[_0x361183(0x5cd,0x59d)]=_0x1a3035['cols'],this['xmin']=_0x1a3035['xmin'],this['xmax']=_0x1a3035['xmax'],this[_0x361183(0x50c,0x52a)]=_0x1a3035[_0x361183(0x589,0x52a)],this['ymax']=_0x1a3035[_0x439690(0x4f5,0x53a)],this['grid']=[];const _0x13f3a6=_0x1a3035[_0x361183(0x521,0x5b1)],_0x32b71a=_0x1a3035['vdata'];let _0x456d20=![];_0x13f3a6['length']===this[_0x439690(0x566,0x50b)]&&_0x13f3a6[0x0][_0x361183(0x573,0x5a8)]===this['cols']&&(_0x456d20=!![]);let _0xdbe779=0x0,_0x2921b9=null;function _0x439690(_0x33a165,_0x20f636){return _0x5a394f(_0x33a165-0x3e9,_0x20f636);}let _0x398422=null;for(let _0x1c6603=0x0;_0x1c6603<this[_0x361183(0x624,0x5f2)];_0x1c6603++){_0x2921b9=[];for(let _0x12f8ce=0x0;_0x12f8ce<this[_0x439690(0x511,0x4fb)];_0x12f8ce++,_0xdbe779++){_0x456d20?_0x398422=this['_calcUV'](_0x13f3a6[_0x1c6603][_0x12f8ce],_0x32b71a[_0x1c6603][_0x12f8ce]):_0x398422=this[_0x361183(0x538,0x569)](_0x13f3a6[_0xdbe779],_0x32b71a[_0xdbe779]),_0x2921b9['push'](_0x398422);}this[_0x439690(0x4d4,0x544)][_0x439690(0x5ae,0x5ec)](_0x2921b9);}function _0x361183(_0x471b6e,_0x103837){return _0x5a394f(_0x103837-0x475,_0x471b6e);}this['options']['reverseY']&&this['grid']['reverse']();}['clear'](){delete this['rows'],delete this['cols'],delete this['xmin'],delete this['xmax'],delete this['ymin'],delete this['ymax'],delete this[_0x59f2d3(0x567,0x4db)];function _0x59f2d3(_0x262347,_0x1ec242){return _0x223b03(_0x1ec242-0x2aa,_0x262347);}delete this['particles'];}[_0x5a394f(0xdd,0x16b)](_0x46b076,_0x3f1dd4){function _0x38c888(_0x51beaf,_0x425c5c){return _0x5a394f(_0x51beaf-0x283,_0x425c5c);}const _0x404b7f=(_0x46b076-this[_0x1f1757(0x2a2,0x31a)])/(this['xmax']-this['xmin'])*(this[_0x1f1757(0x274,0x302)]-0x1);function _0x1f1757(_0xe8d897,_0x5157a0){return _0x223b03(_0x5157a0-0x94,_0xe8d897);}const _0x2751b4=(this['ymax']-_0x3f1dd4)/(this['ymax']-this['ymin'])*(this[_0x1f1757(0x363,0x357)]-0x1);return[_0x404b7f,_0x2751b4];}['getUVByXY'](_0x283bd1,_0x2e3864){if(_0x283bd1<0x0||_0x283bd1>=this[_0x24ae51(0x0,-0x36)]||_0x2e3864>=this[_0x24ae51(0x55,0x3b)])return[0x0,0x0,0x0];const _0x149d3d=Math['floor'](_0x283bd1),_0x43c3ee=Math['floor'](_0x2e3864);function _0x24ae51(_0xa430b8,_0x345522){return _0x5a394f(_0xa430b8- -0x128,_0x345522);}if(_0x149d3d===_0x283bd1&&_0x43c3ee===_0x2e3864)return this['grid'][_0x2e3864][_0x283bd1];const _0x55e08f=_0x149d3d+0x1,_0x32395d=_0x43c3ee+0x1,_0xa53eec=this[_0x24ae51(0x28,0x55)](_0x149d3d,_0x43c3ee);function _0x484e8a(_0x153da1,_0x1f0e25){return _0x223b03(_0x1f0e25-0xc2,_0x153da1);}const _0x2bae5c=this['getUVByXY'](_0x55e08f,_0x43c3ee),_0x52d152=this[_0x484e8a(0x392,0x358)](_0x149d3d,_0x32395d),_0xae01e6=this[_0x484e8a(0x328,0x358)](_0x55e08f,_0x32395d);let _0x22fd77=null;try{_0x22fd77=this['_bilinearInterpolation'](_0x283bd1-_0x149d3d,_0x2e3864-_0x43c3ee,_0xa53eec,_0x2bae5c,_0x52d152,_0xae01e6);}catch(_0x1b1ff2){console['log'](_0x283bd1,_0x2e3864);}return _0x22fd77;}['_bilinearInterpolation'](_0x24d61c,_0x20e011,_0x1e07a8,_0x23480b,_0x7cb8b4,_0x2f6d6a){const _0x1ba915=0x1-_0x24d61c,_0x665736=0x1-_0x20e011,_0x258bc1=_0x1ba915*_0x665736,_0x452f4a=_0x24d61c*_0x665736,_0x2174a1=_0x1ba915*_0x20e011,_0xf79ec6=_0x24d61c*_0x20e011,_0x14c526=_0x1e07a8[0x0]*_0x258bc1+_0x23480b[0x0]*_0x452f4a+_0x7cb8b4[0x0]*_0x2174a1+_0x2f6d6a[0x0]*_0xf79ec6,_0x56060f=_0x1e07a8[0x1]*_0x258bc1+_0x23480b[0x1]*_0x452f4a+_0x7cb8b4[0x1]*_0x2174a1+_0x2f6d6a[0x1]*_0xf79ec6;return this['_calcUV'](_0x14c526,_0x56060f);}['_calcUV'](_0x55efe2,_0x198b8c){function _0xf2a58f(_0xc29050,_0x4a1d7e){return _0x5a394f(_0x4a1d7e-0x3c7,_0xc29050);}return[+_0x55efe2,+_0x198b8c,Math[_0xf2a58f(0x573,0x4ed)](_0x55efe2*_0x55efe2+_0x198b8c*_0x198b8c)];}['getUVByPoint'](_0x428584,_0x5d6677){if(!this[_0x4e2568(0x473,0x4e5)](_0x428584,_0x5d6677))return null;function _0x31d181(_0x36f4c7,_0x118a2d){return _0x223b03(_0x36f4c7-0x31e,_0x118a2d);}function _0x4e2568(_0x22db1b,_0x232b0d){return _0x223b03(_0x22db1b-0x176,_0x232b0d);}const _0x2b9d45=this[_0x31d181(0x541,0x4fa)](_0x428584,_0x5d6677),_0x492cde=this[_0x4e2568(0x40c,0x472)](_0x2b9d45[0x0],_0x2b9d45[0x1]);return _0x492cde;}['isInExtent'](_0x1fbb19,_0xcc9b62){function _0x340844(_0x357627,_0x328db7){return _0x223b03(_0x357627-0x111,_0x328db7);}function _0x501dd8(_0x31368c,_0x3366a0){return _0x5a394f(_0x31368c-0x37,_0x3366a0);}return _0x1fbb19>=this['xmin']&&_0x1fbb19<=this['xmax']&&_0xcc9b62>=this[_0x501dd8(0xec,0xe0)]&&_0xcc9b62<=this[_0x501dd8(0x143,0x18c)]?!![]:![];}[_0x5a394f(0x1aa,0x195)](){const _0x104ea4=fRandomByfloat(this['xmin'],this[_0x37b8f3(-0xf9,-0xe5)]);function _0x37b8f3(_0x3688fd,_0x4291ae){return _0x5a394f(_0x3688fd- -0x258,_0x4291ae);}const _0x42c084=fRandomByfloat(this['ymin'],this['ymax']);function _0x451701(_0x2c5ed6,_0x4892af){return _0x5a394f(_0x4892af-0x319,_0x2c5ed6);}const _0x41ffe4={};return _0x41ffe4['lat']=_0x42c084,_0x41ffe4[_0x37b8f3(-0x106,-0x147)]=_0x104ea4,_0x41ffe4;}['getParticles'](){let _0x1073ad,_0x42dd1c,_0x471f52;for(let _0x5cfb0a=0x0,_0x46b4db=this['particles'][_0x19d2cd(0xbe,0x82)];_0x5cfb0a<_0x46b4db;_0x5cfb0a++){let _0x5bc1c0=this['particles'][_0x5cfb0a];_0x5bc1c0[_0x19d2cd(0x59,0x4e)]<=0x0&&(_0x5bc1c0=this['_randomParticle'](_0x5bc1c0));if(_0x5bc1c0[_0x133749(-0x22c,-0x1bc)]>0x0){const _0x1f6563=_0x5bc1c0[_0x133749(-0x1dc,-0x16f)],_0x460d19=_0x5bc1c0['tlat'];_0x471f52=this['getUVByPoint'](_0x1f6563,_0x460d19),_0x471f52?(_0x1073ad=_0x1f6563+this[_0x133749(-0x168,-0x173)][0x0]*_0x471f52[0x0],_0x42dd1c=_0x460d19+this[_0x19d2cd(0xa2,0x12e)][0x1]*_0x471f52[0x1],_0x5bc1c0[_0x133749(-0xbd,-0x138)]=_0x1f6563,_0x5bc1c0['lat']=_0x460d19,_0x5bc1c0['tlng']=_0x1073ad,_0x5bc1c0['tlat']=_0x42dd1c,_0x5bc1c0['speed']=_0x471f52[0x2],_0x5bc1c0[_0x19d2cd(0x59,0x3b)]--):_0x5bc1c0['age']=0x0;}}function _0x133749(_0x25427e,_0x3bf21f){return _0x5a394f(_0x3bf21f- -0x28a,_0x25427e);}function _0x19d2cd(_0x3ed020,_0x4616a9){return _0x223b03(_0x3ed020- -0x1bb,_0x4616a9);}return this[_0x19d2cd(0x99,0x4f)];}[_0x5a394f(0xd6,0x47)](_0x459d5c){let _0x1634c0,_0x49aa01;for(let _0x525ef4=0x0;_0x525ef4<0x1e;_0x525ef4++){_0x1634c0=this[_0x254168(0x360,0x3d4)](),_0x49aa01=this['getUVByPoint'](_0x1634c0['lng'],_0x1634c0['lat']);if(_0x49aa01&&_0x49aa01[0x2]>0x0)break;}if(!_0x49aa01)return _0x459d5c;const _0x5e0b42=_0x1634c0['lng']+this['_calc_speedRate'][0x0]*_0x49aa01[0x0],_0x4e3c5c=_0x1634c0[_0x4a0187(0x41a,0x44e)]+this[_0x4a0187(0x393,0x308)][0x1]*_0x49aa01[0x1];_0x459d5c[_0x254168(0x3d5,0x37c)]=_0x1634c0['lng'];function _0x4a0187(_0x5a95e1,_0x21c17e){return _0x223b03(_0x5a95e1-0x136,_0x21c17e);}_0x459d5c[_0x4a0187(0x41a,0x42d)]=_0x1634c0['lat'],_0x459d5c['tlng']=_0x5e0b42,_0x459d5c['tlat']=_0x4e3c5c;function _0x254168(_0x193225,_0x1ab495){return _0x5a394f(_0x1ab495-0x22a,_0x193225);}return _0x459d5c['age']=Math['round'](Math[_0x4a0187(0x3e6,0x39f)]()*this['maxAge']),_0x459d5c[_0x254168(0x2e1,0x329)]=_0x49aa01[0x2],_0x459d5c;}['destroy'](){for(const _0x2efceb in this){delete this[_0x2efceb];}}}function fRandomByfloat(_0x111f13,_0x5b6803){function _0x8bcf82(_0x40795e,_0x15f498){return _0x5a394f(_0x40795e-0x40b,_0x15f498);}return _0x111f13+Math[_0x8bcf82(0x575,0x4f5)]()*(_0x5b6803-_0x111f13);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x223b03(0x255,0x2cb)];class CanvasWindLayer extends BaseLayer{constructor(_0xc12643={}){function _0x1ecfa5(_0x202e6b,_0x2abe02){return _0x223b03(_0x2abe02-0x28e,_0x202e6b);}super(_0xc12643),this[_0x5e0826(-0x1ba,-0x147)](_0xc12643),this[_0x5e0826(-0x17a,-0x129)]=null;function _0x5e0826(_0x3011ab,_0x4d94ff){return _0x5a394f(_0x4d94ff- -0x258,_0x3011ab);}_0xc12643['colors']&&_0xc12643['steps']&&(this[_0x1ecfa5(0x590,0x52c)]=new mars3d__namespace[(_0x5e0826(-0x1c7,-0x19b))](_0xc12643));}[_0x5a394f(0x111,0x11d)](_0x197fff,_0x352e5f){this['frameTime']=0x3e8/(_0x197fff['frameRate']||0xa);function _0x81e4d3(_0x59a2f8,_0x1f23e5){return _0x5a394f(_0x59a2f8-0x181,_0x1f23e5);}this['_pointerEvents']=this[_0x81e4d3(0x256,0x2cf)]['pointerEvents']??![],this['color']=_0x197fff[_0x389408(0x632,0x6bb)]||_0x81e4d3(0x302,0x357);function _0x389408(_0x127fe5,_0x10da5e){return _0x5a394f(_0x127fe5-0x47f,_0x10da5e);}this['lineWidth']=_0x197fff['lineWidth']||0x1,this['fixedHeight']=_0x197fff[_0x81e4d3(0x29b,0x271)]??0x0,this['reverseY']=_0x197fff[_0x389408(0x550,0x5cf)]??![],this['windField']&&this[_0x389408(0x623,0x69a)][_0x81e4d3(0x2de,0x278)](_0x197fff);}get['layer'](){return this['canvas'];}get['canvasWidth'](){function _0x502c7c(_0x476f66,_0x4af17f){return _0x223b03(_0x476f66-0x2c3,_0x4af17f);}return this['_map'][_0x502c7c(0x4cf,0x496)]['canvas']['clientWidth'];}get['canvasHeight'](){function _0x4c3879(_0x2c1ccb,_0x4c1f8b){return _0x5a394f(_0x2c1ccb- -0x1cc,_0x4c1f8b);}return this['_map'][_0x4c3879(-0x106,-0x8b)]['canvas']['clientHeight'];}get[_0x223b03(0x2d6,0x2a1)](){return this['_pointerEvents'];}set['pointerEvents'](_0x1f6f30){this[_0x2b7a17(0x253,0x200)]=_0x1f6f30;function _0x293cf6(_0x42368d,_0x50ae50){return _0x223b03(_0x42368d- -0x3a0,_0x50ae50);}if(!this[_0x2b7a17(0x1fa,0x24f)])return;function _0x2b7a17(_0x27f945,_0xd24d5f){return _0x5a394f(_0xd24d5f-0x120,_0x27f945);}_0x1f6f30?this[_0x293cf6(-0x12b,-0xad)]['style']['pointer-events']=_0x293cf6(-0x100,-0x88):this[_0x293cf6(-0x12b,-0x191)][_0x2b7a17(0x21a,0x241)][_0x293cf6(-0xa0,-0x100)]='none';}get['particlesNumber'](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x762a85){this[_0x397135(0x2f8,0x31f)][_0x397135(0x48d,0x3fc)]=_0x762a85;function _0x580a4d(_0x455977,_0x142b31){return _0x223b03(_0x142b31- -0xe8,_0x455977);}function _0x397135(_0xd12826,_0x4b0eb9){return _0x5a394f(_0x4b0eb9-0x24a,_0xd12826);}clearTimeout(this['_canrefresh']),this[_0x580a4d(0x207,0x1c6)]=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x223b03(0x246,0x1ee)](){function _0x3ef783(_0x9e73e,_0x560dfa){return _0x223b03(_0x9e73e- -0x18,_0x560dfa);}return this[_0x3ef783(0x203,0x1a3)]['speedRate'];}set['speedRate'](_0x46e173){this[_0x304e29(0x97,0x7b)]['speedRate']=_0x46e173;function _0x304e29(_0x9ef49,_0xe9a450){return _0x5a394f(_0xe9a450- -0x5a,_0x9ef49);}function _0x18b650(_0x57adb0,_0x2abba7){return _0x5a394f(_0x57adb0-0xb3,_0x2abba7);}this['windField']&&(this[_0x304e29(0xc3,0x14a)]['speedRate']=_0x46e173);}get['maxAge'](){return this['options']['maxAge'];}set['maxAge'](_0x24ef76){function _0x51314f(_0x5a0bbf,_0x2b2e55){return _0x223b03(_0x2b2e55- -0x13f,_0x5a0bbf);}this['options']['maxAge']=_0x24ef76,this[_0x51314f(0x1aa,0x1ab)]&&(this['windField']['maxAge']=_0x24ef76);}get[_0x5a394f(0xf6,0xd0)](){return this['windData'];}set[_0x5a394f(0xf6,0xfc)](_0x1d6a4d){this['setData'](_0x1d6a4d);}['_showHook'](_0x28697d){function _0x1fbc5f(_0x342801,_0x2ee2fb){return _0x223b03(_0x2ee2fb- -0x150,_0x342801);}function _0x259830(_0x20de84,_0x230f31){return _0x223b03(_0x230f31-0x1e3,_0x20de84);}_0x28697d?this[_0x259830(0x3a2,0x40d)]():(this[_0x1fbc5f(0x154,0x137)]&&(this['options'][_0x1fbc5f(0x5c,0xec)]=this['windData']),this['_removedHook']());}[_0x223b03(0x2d1,0x271)](){function _0xeb60fd(_0x1b0798,_0x4bda8a){return _0x5a394f(_0x1b0798- -0x13f,_0x4bda8a);}function _0x1b85ab(_0x3a07cd,_0x12e1bc){return _0x5a394f(_0x12e1bc-0x205,_0x3a07cd);}this['options']['worker']?this['initWorker']():this[_0x1b85ab(0x3c8,0x3a9)]=new CanvasWindField(this[_0xeb60fd(-0x6a,-0xdd)]);}[_0x5a394f(0xe4,0x56)](){this['canvas']=this['_createCanvas']();const _0x50f9cd={};function _0x5c8152(_0x4d6693,_0x38d325){return _0x5a394f(_0x4d6693-0x338,_0x38d325);}function _0x1e9537(_0x40b399,_0x197c4f){return _0x223b03(_0x197c4f- -0x2ce,_0x40b399);}_0x50f9cd['willReadFrequently']=!![],this[_0x5c8152(0x40f,0x3ae)]=this[_0x1e9537(-0xaa,-0x59)]['getContext']('2d',_0x50f9cd),this['bindEvent'](),this[_0x5c8152(0x40d,0x3e0)]['data']&&this['setData'](this[_0x1e9537(-0x9a,-0xb3)]['data']);}['_removedHook'](){function _0x325f2f(_0x1ee365,_0x45de9e){return _0x5a394f(_0x45de9e- -0x205,_0x1ee365);}this[_0x3c62cc(0x214,0x289)](),this[_0x3c62cc(0x1cf,0x215)]();function _0x3c62cc(_0x5b766d,_0x2869a2){return _0x223b03(_0x2869a2- -0x26,_0x5b766d);}this['canvas']&&(this['_map'][_0x325f2f(-0x8f,-0x56)]['removeChild'](this['canvas']),delete this['canvas']);}[_0x5a394f(0xac,0xec)](){const _0x2c271c=mars3d__namespace['DomUtil']['create']('canvas',_0x227764(0x1de,0x1d3),this['_map']['container']);_0x2c271c['style'][_0x227764(0x1a6,0x14d)]=_0x3944ee(0x9e,0x33),_0x2c271c['style'][_0x3944ee(-0xa,0x8)]='0px';function _0x3944ee(_0x28df1c,_0x5366c1){return _0x5a394f(_0x5366c1- -0x131,_0x28df1c);}_0x2c271c[_0x227764(0xca,0x130)]['left']='0px',_0x2c271c['style']['width']=this['_map']['scene']['canvas'][_0x3944ee(-0x78,-0x11)]+'px',_0x2c271c['style']['height']=this[_0x3944ee(0xb,0x64)][_0x227764(0x7d,0xd5)][_0x227764(0x1ad,0x13e)]['clientHeight']+'px',_0x2c271c[_0x227764(0xda,0x130)]['pointerEvents']=this[_0x227764(0x114,0xef)]?'auto':'none';function _0x227764(_0xd1da03,_0x44f7af){return _0x5a394f(_0x44f7af-0xf,_0xd1da03);}return _0x2c271c['style']['zIndex']=this[_0x227764(0x110,0xe4)]['zIndex']??0x9,_0x2c271c[_0x227764(0x1d9,0x1cd)]=this['_map']['scene'][_0x227764(0xb0,0x13e)][_0x227764(0x18f,0x12f)],_0x2c271c['height']=this[_0x227764(0x1a0,0x1a4)][_0x227764(0xbf,0xd5)][_0x227764(0x108,0x13e)][_0x3944ee(0x1c,-0xe)],_0x2c271c;}['resize'](){function _0x3b3c80(_0xb710dc,_0x1228bf){return _0x5a394f(_0x1228bf- -0xc2,_0xb710dc);}function _0xcca92a(_0x151335,_0x1c3721){return _0x223b03(_0x151335- -0x91,_0x1c3721);}this[_0x3b3c80(0xa5,0x6d)]&&(this[_0x3b3c80(0xa0,0x6d)]['style']['width']=this[_0x3b3c80(0xb4,0xd3)][_0x3b3c80(-0x63,0x4)]['canvas']['clientWidth']+'px',this['canvas']['style'][_0x3b3c80(0x4d,0xd9)]=this[_0xcca92a(0x24a,0x291)][_0x3b3c80(-0x36,0x4)][_0xcca92a(0x1e4,0x233)]['clientHeight']+'px',this[_0xcca92a(0x1e4,0x22e)][_0x3b3c80(0x140,0xfc)]=this[_0x3b3c80(0x8f,0xd3)][_0x3b3c80(0x19,0x4)]['canvas']['clientWidth'],this['canvas'][_0x3b3c80(0xf8,0xd9)]=this[_0xcca92a(0x24a,0x248)]['scene'][_0xcca92a(0x1e4,0x22a)][_0x3b3c80(0x39,0x61)]);}['bindEvent'](){const _0x5ba64a=this;let _0x4653cd=Date['now']();function _0x551d62(_0x1a9c8d,_0x36b611){return _0x5a394f(_0x36b611-0x148,_0x1a9c8d);}(function _0x42785f(){if(_0x5ba64a[_0x583b36(0x2e9,0x29c)])return;_0x5ba64a[_0x583b36(0x302,0x33f)]=window[_0x583b36(0x371,0x342)](_0x42785f);function _0x3a1221(_0x31deb0,_0x2842ea){return _0x4acd(_0x31deb0- -0x2c5,_0x2842ea);}function _0x583b36(_0x211fdb,_0x26edc3){return _0x4acd(_0x211fdb-0x103,_0x26edc3);}if(_0x5ba64a['show']&&_0x5ba64a['windField']){const _0x139d48=Date[_0x3a1221(-0x9f,-0x7f)](),_0x2e5642=_0x139d48-_0x4653cd;_0x2e5642>_0x5ba64a[_0x583b36(0x385,0x3cc)]&&(_0x4653cd=_0x139d48-_0x2e5642%_0x5ba64a['frameTime'],_0x5ba64a['update']());}}(),window['addEventListener']('resize',this[_0x551d62(0x1c0,0x213)]['bind'](this),![]));function _0x12ab29(_0x3ab43b,_0x44e6fd){return _0x5a394f(_0x3ab43b-0x20b,_0x44e6fd);}this[_0x551d62(0x30b,0x2df)]=![],this[_0x551d62(0x2ee,0x2de)]=![],this['options']['mouseHidden']&&(this[_0x12ab29(0x3a0,0x338)]['on'](mars3d__namespace['EventType'][_0x12ab29(0x2db,0x349)],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this));}[_0x5a394f(0xf5,0xfc)](){window['cancelAnimationFrame'](this[_0x2f5099(0x506,0x548)]);function _0x2f5099(_0x425e7d,_0x10cb99){return _0x5a394f(_0x10cb99-0x489,_0x425e7d);}delete this['_animateFrame'],window[_0x27ac3b(0x344,0x36c)](_0x2f5099(0x526,0x554),this['resize']);function _0x27ac3b(_0x57e2b8,_0x58df6e){return _0x223b03(_0x58df6e-0x165,_0x57e2b8);}this['options']['mouseHidden']&&(this['_map'][_0x27ac3b(0x424,0x40e)](mars3d__namespace[_0x2f5099(0x5c9,0x59b)][_0x2f5099(0x58a,0x559)],this['_onMapWhellEvent'],this),this[_0x2f5099(0x69e,0x61e)][_0x27ac3b(0x44d,0x40e)](mars3d__namespace[_0x2f5099(0x5e9,0x59b)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map'][_0x27ac3b(0x417,0x40e)](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this['_map'][_0x2f5099(0x57f,0x5ec)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x108339){function _0x251554(_0x3f68e5,_0x28d05d){return _0x5a394f(_0x28d05d-0x453,_0x3f68e5);}clearTimeout(this['refreshTimer']);if(!this[_0x251554(0x5ba,0x5c4)]||!this[_0x251554(0x5be,0x582)])return;this['canvas']['style']['visibility']='hidden';function _0x26d784(_0x3bab06,_0x4cc90b){return _0x223b03(_0x4cc90b-0x29b,_0x3bab06);}this[_0x26d784(0x580,0x54e)]=setTimeout(()=>{function _0xae47c4(_0x1f0921,_0x1b347c){return _0x251554(_0x1b347c,_0x1f0921- -0x38);}if(!this[_0x573a30(0x412,0x421)])return;this[_0x573a30(0x333,0x3bb)]();function _0x573a30(_0x407223,_0x2dda2a){return _0x251554(_0x407223,_0x2dda2a- -0x1a3);}this[_0xae47c4(0x54a,0x559)][_0xae47c4(0x53c,0x4c5)][_0x573a30(0x4bb,0x434)]='visible';},0xc8);}[_0x223b03(0x26f,0x1f2)](_0x44a967){this[_0x1c1281(-0x37,-0x1a)]=!![];function _0x1c1281(_0x604e11,_0x5ee45c){return _0x223b03(_0x604e11- -0x314,_0x5ee45c);}function _0x240d8a(_0x240b6a,_0xe1b9c5){return _0x223b03(_0x240b6a- -0xc3,_0xe1b9c5);}this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x1c1281(-0x112,-0x181)],this),this[_0x1c1281(-0x39,0xa)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x508549){function _0x59eac7(_0x562764,_0x2927e0){return _0x5a394f(_0x2927e0- -0xa1,_0x562764);}function _0x2e9fe0(_0x5ca125,_0x37d00f){return _0x223b03(_0x5ca125-0x4f,_0x37d00f);}if(!this[_0x2e9fe0(0x306,0x34f)]||!this['canvas'])return;this[_0x2e9fe0(0x32c,0x31a)]&&(this[_0x2e9fe0(0x2c4,0x2b6)][_0x2e9fe0(0x2b6,0x27a)][_0x59eac7(0xe9,0xe3)]=_0x59eac7(0xd2,0x86),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x1256f6){if(!this[_0x12be40(0x391,0x35b)]||!this[_0x12be40(0x34f,0x3b7)])return;this['_map'][_0x12be40(0x383,0x407)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x12be40(_0x4d1e9d,_0xd5c2e7){return _0x223b03(_0x4d1e9d-0xda,_0xd5c2e7);}this['mouse_down']&&this[_0x12be40(0x3b6,0x3a1)]&&this['redraw']();function _0x4c7dc6(_0x17da48,_0xb5f307){return _0x223b03(_0x17da48- -0x3d8,_0xb5f307);}this['canvas']['style'][_0x4c7dc6(-0x10e,-0xa9)]=_0x4c7dc6(-0x158,-0x173),this['mouse_down']=![],this[_0x4c7dc6(-0xfc,-0x115)]=![];}['setData'](_0x8b2087){this[_0x27b9b7(0x0,-0x20)]();function _0x27b9b7(_0x3bec84,_0x4775a5){return _0x223b03(_0x3bec84- -0x2af,_0x4775a5);}this[_0x13971e(0x3a,-0x4b)]=_0x8b2087,this['windField']['setDate'](_0x8b2087);function _0x13971e(_0x29184b,_0x337a8c){return _0x223b03(_0x29184b- -0x24d,_0x337a8c);}this[_0x13971e(0x4,-0x10)]();}[_0x5a394f(0x10b,0xf4)](){function _0x1e528e(_0x576cea,_0x631446){return _0x5a394f(_0x631446-0x11b,_0x576cea);}if(!this['show'])return;function _0x23b296(_0x4e4307,_0x24841e){return _0x223b03(_0x4e4307-0x21e,_0x24841e);}this['windField']['setOptions'](this[_0x23b296(0x439,0x427)]),this[_0x1e528e(0x25d,0x2c7)]();}['update'](){if(this[_0x5880de(0x349,0x33c)])return;this[_0x3accd4(-0x4,-0x78)]=!![];function _0x3accd4(_0x266c31,_0x1a731b){return _0x5a394f(_0x266c31- -0xed,_0x1a731b);}if(this[_0x5880de(0x3b7,0x33e)])this[_0x3accd4(0xb7,0x7f)][_0x5880de(0x40c,0x407)]();else{const _0x544566=this[_0x3accd4(0xb7,0xff)]['getParticles']();this[_0x5880de(0x3dc,0x3c8)](_0x544566);}function _0x5880de(_0x1c9959,_0x722ca9){return _0x5a394f(_0x1c9959-0x260,_0x722ca9);}this[_0x3accd4(-0x4,-0x5)]=![];}['_drawLines'](_0xd5d106){this['canvasContext']['globalCompositeOperation']=_0xbe6c14(0x59e,0x571);function _0x559cfa(_0x23e3a5,_0x31c483){return _0x223b03(_0x23e3a5-0x28d,_0x31c483);}function _0xbe6c14(_0x4ec02b,_0xd31f67){return _0x5a394f(_0x4ec02b-0x4cf,_0xd31f67);}this[_0x559cfa(0x4aa,0x483)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext'][_0x559cfa(0x52f,0x4dd)]='lighter',this['canvasContext'][_0xbe6c14(0x5d7,0x646)]=0.9;const _0x52a6f1=this['_map']['scene']['mode']!==Cesium[_0xbe6c14(0x646,0x60e)]['SCENE3D'],_0x1f39d3=this[_0xbe6c14(0x59b,0x5f7)]*0.25;if(this[_0x559cfa(0x52b,0x57e)])for(let _0x1431fc=0x0,_0x337878=_0xd5d106[_0x559cfa(0x506,0x537)];_0x1431fc<_0x337878;_0x1431fc++){const _0xf24cb6=_0xd5d106[_0x1431fc],_0x2f7f87=this[_0xbe6c14(0x62d,0x5e3)](_0xf24cb6['lng'],_0xf24cb6['lat'],_0xf24cb6),_0x3a8cf0=this['_tomap'](_0xf24cb6['tlng'],_0xf24cb6['tlat'],_0xf24cb6);if(!_0x2f7f87||!_0x3a8cf0)continue;if(_0x52a6f1&&Math['abs'](_0x2f7f87[0x0]-_0x3a8cf0[0x0])>=_0x1f39d3)continue;this[_0x559cfa(0x4aa,0x4e6)][_0xbe6c14(0x649,0x5be)](),this[_0xbe6c14(0x5a6,0x56b)]['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0xbe6c14(0x627,0x5ff)]['getColor'](_0xf24cb6['speed']),this['canvasContext'][_0x559cfa(0x562,0x4ee)](_0x2f7f87[0x0],_0x2f7f87[0x1]),this['canvasContext']['lineTo'](_0x3a8cf0[0x0],_0x3a8cf0[0x1]),this['canvasContext'][_0xbe6c14(0x63d,0x6b9)]();}else{this['canvasContext']['beginPath'](),this['canvasContext'][_0x559cfa(0x58f,0x5e7)]=this[_0xbe6c14(0x68b,0x681)],this['canvasContext']['strokeStyle']=this['color'];for(let _0x24854e=0x0,_0x56b48b=_0xd5d106[_0x559cfa(0x506,0x4b3)];_0x24854e<_0x56b48b;_0x24854e++){const _0x337e39=_0xd5d106[_0x24854e],_0x16e460=this['_tomap'](_0x337e39['lng'],_0x337e39['lat'],_0x337e39),_0x3fb027=this['_tomap'](_0x337e39['tlng'],_0x337e39['tlat'],_0x337e39);if(!_0x16e460||!_0x3fb027)continue;if(_0x52a6f1&&Math['abs'](_0x16e460[0x0]-_0x3fb027[0x0])>=_0x1f39d3)continue;this[_0xbe6c14(0x5a6,0x5c7)]['moveTo'](_0x16e460[0x0],_0x16e460[0x1]),this['canvasContext'][_0xbe6c14(0x5d3,0x639)](_0x3fb027[0x0],_0x3fb027[0x1]);}this['canvasContext'][_0xbe6c14(0x63d,0x695)]();}}[_0x5a394f(0x15e,0x11f)](_0xce9b24,_0x406a54,_0x294db8){const _0x10585a=Cesium[_0x3d00b8(0x2af,0x220)]['fromDegrees'](_0xce9b24,_0x406a54,this[_0x1d85d9(0x1ce,0x208)]),_0x34e83a=this[_0x3d00b8(0x26b,0x242)][_0x1d85d9(0x18c,0x1b4)];function _0x1d85d9(_0x424aec,_0x3d9af5){return _0x5a394f(_0x3d9af5-0xee,_0x424aec);}function _0x3d00b8(_0x5112c7,_0x39e3a8){return _0x223b03(_0x39e3a8- -0x99,_0x5112c7);}if(_0x34e83a[_0x1d85d9(0x170,0x192)]===Cesium['SceneMode'][_0x3d00b8(0x163,0x190)]){const _0xfb8f71=new Cesium['EllipsoidalOccluder'](_0x34e83a[_0x1d85d9(0x1f7,0x1d5)][_0x1d85d9(0x267,0x270)],_0x34e83a[_0x1d85d9(0x2c3,0x291)]['positionWC']),_0x31fec3=_0xfb8f71['isPointVisible'](_0x10585a);if(!_0x31fec3)return _0x294db8['age']=0x0,null;}const _0x9f2924=Cesium['SceneTransforms']['worldToWindowCoordinates'](this['_map']['scene'],_0x10585a);return _0x9f2924?[_0x9f2924['x'],_0x9f2924['y']]:null;}['clear'](){this['windField']['clear'](),delete this['windData'];}['initWorker'](){this['worker']=new Worker(this['options']['worker']),this['worker']['onmessage']=_0x466e53=>{function _0x3f23b4(_0x29770b,_0x3ea7a2){return _0x4acd(_0x29770b-0x211,_0x3ea7a2);}function _0x48b213(_0xae62c5,_0xe97e32){return _0x4acd(_0xe97e32- -0x11,_0xae62c5);}this[_0x3f23b4(0x4cd,0x45a)](_0x466e53['data']['particles']),this[_0x48b213(0x26e,0x27a)]=![];},this[_0x458e1b(0x5cb,0x5fb)]={'init':_0x5d5c63=>{const _0x67e15a={};function _0x38b37f(_0x473037,_0x37a318){return _0x458e1b(_0x37a318- -0x502,_0x473037);}_0x67e15a['type']=_0x38b37f(-0x9a,-0x29);function _0x4afc75(_0x336ae5,_0x33f2a3){return _0x458e1b(_0x336ae5- -0x241,_0x33f2a3);}_0x67e15a[_0x4afc75(0x2bb,0x316)]=_0x5d5c63,this[_0x38b37f(0xa7,0x7c)]['postMessage'](_0x67e15a);},'setOptions':_0x49a66b=>{const _0x592ab3={};_0x592ab3['type']='setOptions',_0x592ab3['options']=_0x49a66b;function _0x16f6cd(_0xbd266f,_0x1c00fe){return _0x458e1b(_0xbd266f- -0x1e4,_0x1c00fe);}this[_0x16f6cd(0x39a,0x367)]['postMessage'](_0x592ab3);},'setDate':_0x182de2=>{function _0x3bc617(_0x317f49,_0xfd183){return _0x458e1b(_0xfd183-0x8e,_0x317f49);}const _0x2f94b7={};_0x2f94b7['type']='setDate',_0x2f94b7['data']=_0x182de2,this['worker'][_0x3bc617(0x653,0x5d4)](_0x2f94b7);},'update':()=>{if(this[_0x5270ab(0x5a5,0x58b)])return;function _0x5270ab(_0x5a6273,_0x242e7a){return _0x458e1b(_0x5a6273-0x33,_0x242e7a);}this['_updateIng2']=!![];const _0x29ec2b={};_0x29ec2b['type']='update',this['worker']['postMessage'](_0x29ec2b);},'clear':()=>{function _0x243415(_0x40d514,_0x5a702a){return _0x458e1b(_0x5a702a- -0x45f,_0x40d514);}const _0x8d148b={};function _0x298551(_0x23bcfe,_0x58b049){return _0x458e1b(_0x23bcfe- -0x5ca,_0x58b049);}_0x8d148b[_0x243415(0xcd,0x105)]='clear',this[_0x243415(0x12b,0x11f)][_0x243415(0x80,0xe7)](_0x8d148b);}};function _0x458e1b(_0x534880,_0xe8ee12){return _0x5a394f(_0x534880-0x427,_0xe8ee12);}this['windField']['init'](this['options']);}}mars3d__namespace[_0x223b03(0x248,0x1c7)][_0x5a394f(0x18a,0x107)](_0x223b03(0x259,0x2d3),CanvasWindLayer),mars3d__namespace['layer'][_0x223b03(0x20d,0x18b)]=CanvasWindLayer,mars3d__namespace[_0x5a394f(0x143,0x156)]=CanvasWindField,mars3d__namespace[_0x5a394f(0x179,0x172)]=WindUtil,exports[_0x223b03(0x289,0x2b1)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x5a394f(0x178,0x132)]=WindLayer,exports['WindUtil']=WindUtil;const _0xf53e32={};_0xf53e32['value']=!![],Object['defineProperty'](exports,_0x223b03(0x2e5,0x27e),_0xf53e32);
}));
