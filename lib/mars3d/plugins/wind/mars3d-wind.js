/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.2
 * 编译日期：2025-03-09 12:41
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x5ab659,_0x49738a){function _0x29a158(_0x3e98f1,_0x1b01e5){return _0x4ca2(_0x1b01e5- -0x11a,_0x3e98f1);}function _0x423853(_0x15047f,_0x110315){return _0x4ca2(_0x15047f- -0x18f,_0x110315);}const _0x9f37d4=_0x5ab659();while(!![]){try{const _0x5a4101=-parseInt(_0x423853(0x98,0x4d))/0x1*(parseInt(_0x29a158(0x118,0x131))/0x2)+-parseInt(_0x423853(0x69,0xf1))/0x3*(parseInt(_0x29a158(0x5d,0xb9))/0x4)+parseInt(_0x29a158(0xe0,0x12d))/0x5*(-parseInt(_0x423853(0x45,-0x21))/0x6)+parseInt(_0x29a158(0xfe,0x161))/0x7+parseInt(_0x29a158(0x5c,0xa6))/0x8+parseInt(_0x29a158(0x4,0x7d))/0x9*(parseInt(_0x423853(0x5b,0x22))/0xa)+-parseInt(_0x423853(0x4a,0x22))/0xb;if(_0x5a4101===_0x49738a)break;else _0x9f37d4['push'](_0x9f37d4['shift']());}catch(_0x3c5575){_0x9f37d4['push'](_0x9f37d4['shift']());}}}(_0x4d9c,0x86276));function _interopNamespace(_0xbaf004){if(_0xbaf004&&_0xbaf004[_0x37e134(0x1b,-0x1f)])return _0xbaf004;function _0x37e134(_0x2e3868,_0xe48394){return _0x4ca2(_0x2e3868- -0x1b5,_0xe48394);}var _0x4a8b72=Object['create'](null);return _0xbaf004&&Object['keys'](_0xbaf004)['forEach'](function(_0xab1f25){function _0x128d0d(_0x33ddcf,_0x5d23be){return _0x37e134(_0x33ddcf-0x39c,_0x5d23be);}if(_0xab1f25!=='default'){var _0x829457=Object['getOwnPropertyDescriptor'](_0xbaf004,_0xab1f25);Object['defineProperty'](_0x4a8b72,_0xab1f25,_0x829457[_0x128d0d(0x473,0x3ef)]?_0x829457:{'enumerable':!![],'get':function(){return _0xbaf004[_0xab1f25];}});}}),_0x4a8b72['default']=_0xbaf004,_0x4a8b72;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x5bb4f5,_0x396156){const _0x210efa=_0x5bb4f5*Math['cos'](Cesium$2['Math'][_0x56d675(0x472,0x489)](_0x396156));function _0x56d675(_0x3f998b,_0x26ca53){return _0x4ca2(_0x3f998b-0x26f,_0x26ca53);}return _0x210efa;}function getV(_0x567b3c,_0x59964b){function _0x3c2f3c(_0x56fdd5,_0x1714c0){return _0x4ca2(_0x1714c0-0x3a7,_0x56fdd5);}const _0x2d474c=_0x567b3c*Math[_0x3fb592(0x3b0,0x342)](Cesium$2[_0x3c2f3c(0x51b,0x58a)]['toRadians'](_0x59964b));function _0x3fb592(_0x4c55bc,_0x2d11c9){return _0x4ca2(_0x4c55bc-0x182,_0x2d11c9);}return _0x2d474c;}function _0x4d9c(){const _0x3aac47=['getSegmentDrawFragmentShader','options','sin','context','textures','OPAQUE','mouseMove','wrapT','getSegmentDrawVertexShader','fromCache','positionWC','postProcessingPosition','getColor','pixelDatatype','toGridXY','geometry','Cesium','clientWidth','commandList','owner','speed','push','pointer-events','vdata','canvasHeight','refreshTimer','drawingBufferWidth','281605nyLGtq','updateOptions','canvasWind','autoClear','642100ECqIFR','slice','age','bufferUsage','uniformMap','getPostProcessingPositionShader','frameState.commandList\x20is\x20undefined','stroke','morphComplete','frameTime','FUNC_ADD','Draw','type','createRawRenderState','ellipsoid','mouseDown','floor','_updateIng','normal','clear','isDestroyed','isDynamic','viewerParameters','colors','particlesSpeed','particleSystem','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','RGBA','getUVByXY','xmin','CanvasWindField','setGeometry','tlat','tlng','depthTexture','auto','moveTo','isDestroy','container','framebuffer','visible','blendFuncDestination','createRenderingFramebuffers','bind','displayRange','percentageChanged','latRange','dynamic','1712648Iusdzc','rawRenderState','pixelSize','camera','particlesNumber','_calc_speedRate','getV','update','scene','colorTable','getDirection','fillRect','sqrt','sceneMode','rows','beginPath','_onMouseDownEvent','get','createCommand','rendering','SceneMode','ymin','getDefaultRenderState','windData','layer','cols','visibility','atan2','destoryRenderingFramebuffers','mars3d-canvasWind','speedFactor','_mountedHook','attributeLocations','register','error','hidden','length','talt','requestAnimationFrame','#ffffff','Cartesian2','east','globe','warn','createComputingPrimitives','_onMouseMoveEvent','width','updatePosition','primitiveType','fromGeometry','windField','south','componentDatatype','currentParticlesPosition','43236XbVIlz','getSpeed','SCENE3D','wrapS','show','blendEquation','computing','_colorRamp','commandToExecute','xmax','createWindTextures','primitives','number','_calcUV','lng','destroyParticlesTextures','west','create','setOptions','random','createParticlesTextures','removeChild','lat','EllipsoidalOccluder','frameRateAdjustment','_onMouseUpEvent','particlesTextures','pass','framebuffers','getPrimitives','left','persists','off','WindLayer','pointerEvents','style','windTextures','TRIANGLES','canvas','reCreateWindTextures','lineWidth','7257736QMTyfw','Rectangle','createSegmentsGeometry','ymax','createColorTableTexture','alpha','EventType','bounds','_bilinearInterpolation','BaseLayer','removeEventListener','values','Compute','DEPTH_COMPONENT','forEach','_setOptionsHook','__esModule','resize','mouse_down','20cXsiih','24vWVDKn','_speedRate','color','domain','changeOptions','5946886pcpabB','execute','now','addEventListener','canvasContext','FLOAT','LINEAR','_map','abs','modelMatrix','Math','worker','vertexShaderSource','SRC_ALPHA','_onMapWhellEvent','NEAREST','blending','1970SWreFq','particles','_maxAge','object','array','_randomParticle','setData','segments','absolute','alt','flipY','initFrameRate','RED','fill','277089sEhnzk','canvasWidth','height','speedRate','MIN_VALUE','nextParticlesPosition','applyViewerParameters','_addedHook','clearCommand','STATIC_DRAW','clearFramebuffers','toRadians','outputTexture','onColorTableChange','clientHeight','sources','wheel','CLAMP_TO_EDGE','frameRateMonitor','shaderProgram','_animateFrame','setDate','fixedHeight','destroy','_removedHook','getContext','zIndex','mode','lineTo','updateWindData','vertexArray','previousParticlesPosition','particlesTextureSize','max','minificationFilter','min','_tomap','colorTextures','preExecute','commandType','redraw','fromDegrees','grid','postMessage','calculateSpeed','vmin','data','1aWwKJT','isInExtent','lonRange','maxAge','steps'];_0x4d9c=function(){return _0x3aac47;};return _0x4d9c();}function getSpeed(_0x216716,_0x290a40){const _0x561196=Math['sqrt'](Math['pow'](_0x216716,0x2)+Math['pow'](_0x290a40,0x2));return _0x561196;}function getDirection(_0x1cb53e,_0x5b95b8){let _0x55e40d=Cesium$2['Math']['toDegrees'](Math[_0x4c76a1(0x1dc,0x234)](_0x5b95b8,_0x1cb53e));_0x55e40d+=_0x55e40d<0x0?0x168:0x0;function _0x4c76a1(_0x18e9f9,_0xfc7c90){return _0x4ca2(_0x18e9f9- -0xba,_0xfc7c90);}return _0x55e40d;}const _0x1e00d9={};_0x1e00d9['__proto__']=null,_0x1e00d9['getU']=getU,_0x1e00d9[_0x459df4(0x5d,0x65)]=getV,_0x1e00d9[_0x35d9d0(0x454,0x440)]=getSpeed,_0x1e00d9[_0x459df4(0x61,0xe4)]=getDirection;var WindUtil=_0x1e00d9,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x459df4(0x41,0x46),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a';function _0x35d9d0(_0x5f089e,_0x297fc4){return _0x4ca2(_0x5f089e-0x2bc,_0x297fc4);}var renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static['getCalculateSpeedShader'](){const _0x2117d8={};return _0x2117d8['sources']=[calculateSpeedShader],new ShaderSource$1(_0x2117d8);}static['getUpdatePositionShader'](){const _0x409022={};function _0x3ef8a6(_0x2499ce,_0x40689d){return _0x35d9d0(_0x2499ce- -0xde,_0x40689d);}return _0x409022[_0x3ef8a6(0x3e5,0x3d6)]=[updatePositionShader],new ShaderSource$1(_0x409022);}static['getSegmentDrawVertexShader'](){function _0x4faebf(_0x3841aa,_0x1fb3e9){return _0x35d9d0(_0x3841aa- -0x4ed,_0x1fb3e9);}const _0x385ca7={};return _0x385ca7[_0x4faebf(-0x2a,-0x4f)]=[renderParticlesVertexShader],new ShaderSource$1(_0x385ca7);}static['getSegmentDrawFragmentShader'](){function _0x88df6(_0x47d38f,_0x35fe68){return _0x35d9d0(_0x47d38f- -0x1bd,_0x35fe68);}const _0x582aa3={};return _0x582aa3[_0x88df6(0x306,0x2ac)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x582aa3);}static[_0x35d9d0(0x50c,0x4ae)](){function _0x1109d9(_0x57e3e5,_0x48553b){return _0x35d9d0(_0x57e3e5- -0x19f,_0x48553b);}const _0x53c8c0={};return _0x53c8c0[_0x1109d9(0x324,0x2f0)]=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x53c8c0);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defaultValue,defined,destroyObject}=mars3d__namespace[_0x35d9d0(0x4f8,0x478)];class CustomPrimitive{constructor(_0x5940a4){this['commandType']=_0x5940a4[_0x1cb193(0xdb,0xdc)],this[_0x1cb193(0xf7,0x14f)]=_0x5940a4['geometry'],this['attributeLocations']=_0x5940a4[_0xcaa5ee(-0x124,-0xdc)],this[_0x1cb193(0x4d,0x9a)]=_0x5940a4['primitiveType'],this['uniformMap']=_0x5940a4['uniformMap']||{},this['vertexShaderSource']=_0x5940a4[_0xcaa5ee(-0xc6,-0x78)],this['fragmentShaderSource']=_0x5940a4['fragmentShaderSource'],this['rawRenderState']=_0x5940a4[_0xcaa5ee(0x3d,0x1f)],this[_0xcaa5ee(0x19,0x15)]=_0x5940a4['framebuffer'],this[_0xcaa5ee(0x31,-0x59)]=_0x5940a4[_0xcaa5ee(-0xa5,-0x59)];function _0x1cb193(_0x1088b6,_0x5726bd){return _0x35d9d0(_0x1088b6- -0x400,_0x5726bd);}function _0xcaa5ee(_0x5154f9,_0x123b97){return _0x35d9d0(_0x123b97- -0x519,_0x5154f9);}this[_0xcaa5ee(0x1e,-0x13)]=defaultValue(_0x5940a4[_0x1cb193(0x106,0x89)],![]),this[_0x1cb193(0xda,0xdb)]=_0x5940a4['preExecute'],this[_0x1cb193(0x57,0x90)]=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['isDynamic']=_0x5940a4[_0x1cb193(0x11c,0xe9)]??(()=>!![]),this['autoClear']&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0xcaa5ee(0x8a,0x15)],'pass':Pass$1['OPAQUE']}));}[_0x35d9d0(0x549,0x4bf)](_0x5cd0e3){function _0x445859(_0x53c226,_0xf4586b){return _0x459df4(_0x53c226- -0x3d,_0xf4586b);}function _0xc747e9(_0x32beb3,_0x28d625){return _0x35d9d0(_0x28d625- -0x4bd,_0x32beb3);}if(this[_0xc747e9(-0x3e,0x1e)]===_0xc747e9(0xe,0x55)){const _0x445cc9={};_0x445cc9['context']=_0x5cd0e3,_0x445cc9[_0xc747e9(0x3,0x3a)]=this['geometry'],_0x445cc9['attributeLocations']=this['attributeLocations'],_0x445cc9['bufferUsage']=BufferUsage$1[_0x445859(-0x60,-0x6e)];const _0x2d978c=VertexArray$1[_0x445859(-0xcf,-0xe4)](_0x445cc9),_0x40d267={};_0x40d267['context']=_0x5cd0e3,_0x40d267['vertexShaderSource']=this[_0x445859(-0x7c,-0x11)],_0x40d267['fragmentShaderSource']=this['fragmentShaderSource'],_0x40d267[_0x445859(-0xe0,-0x84)]=this['attributeLocations'];const _0x587f0a=ShaderProgram[_0x445859(-0x2c,-0x58)](_0x40d267),_0x3e88c6=RenderState['fromCache'](this[_0x445859(0x1b,0x96)]),_0xa59aa5={};return _0xa59aa5[_0x445859(-0x22,-0xae)]=this,_0xa59aa5[_0xc747e9(0x12,0x15)]=_0x2d978c,_0xa59aa5[_0xc747e9(-0x78,-0x70)]=this['primitiveType'],_0xa59aa5[_0x445859(-0x7f,-0xd0)]=Matrix4['IDENTITY'],_0xa59aa5['renderState']=_0x3e88c6,_0xa59aa5[_0xc747e9(-0x14,0xa)]=_0x587f0a,_0xa59aa5['framebuffer']=this['framebuffer'],_0xa59aa5[_0xc747e9(0x9b,0x4e)]=this['uniformMap'],_0xa59aa5[_0xc747e9(-0x30,-0x4f)]=Pass$1[_0xc747e9(0x6f,0x30)],new DrawCommand(_0xa59aa5);}else{if(this[_0x445859(-0x42,-0x4c)]===_0xc747e9(-0x8,-0x35)){const _0x3e323f={};return _0x3e323f['owner']=this,_0x3e323f['fragmentShaderSource']=this['fragmentShaderSource'],_0x3e323f['uniformMap']=this['uniformMap'],_0x3e323f['outputTexture']=this[_0x445859(-0x5d,-0x3f)],_0x3e323f[_0x445859(-0xab,-0x5b)]=!![],new ComputeCommand(_0x3e323f);}else throw new Error('Unknown\x20command\x20type');}}[_0x459df4(0x46,0x7c)](_0x1f23c6,_0x34fcd6){function _0x5be2e3(_0x1846b1,_0x38b998){return _0x459df4(_0x1846b1- -0x153,_0x38b998);}function _0x34481f(_0x23096f,_0x5cf530){return _0x35d9d0(_0x5cf530- -0x3b2,_0x23096f);}this['geometry']=_0x34fcd6,defined(this['commandToExecute'])&&(this[_0x5be2e3(-0x1d8,-0x1a0)]['vertexArray']=VertexArray$1[_0x34481f(0x9e,0x9c)]({'context':_0x1f23c6,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1[_0x34481f(0x10b,0x10b)]}));}['update'](_0x31f2ec){function _0x36dd52(_0x463ed4,_0x222dd7){return _0x459df4(_0x463ed4-0x355,_0x222dd7);}if(!this['isDynamic']())return;if(!this['show']||!defined(_0x31f2ec))return;function _0x558796(_0x398492,_0x27d146){return _0x459df4(_0x27d146-0x37e,_0x398492);}!defined(this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x31f2ec[_0x36dd52(0x360,0x362)]));defined(this['preExecute'])&&this[_0x558796(0x314,0x378)]();if(!_0x31f2ec['commandList']){console[_0x36dd52(0x2bd,0x25d)](_0x558796(0x423,0x3ab));return;}defined(this['clearCommand'])&&_0x31f2ec['commandList'][_0x558796(0x362,0x39b)](this[_0x36dd52(0x331,0x2e6)]),defined(this['commandToExecute'])&&_0x31f2ec[_0x558796(0x345,0x398)]['push'](this['commandToExecute']);}[_0x459df4(0x3b,-0x46)](){return![];}['destroy'](){if(defined(this['commandToExecute'])){var _0x579229;(_0x579229=this['commandToExecute']['shaderProgram'])===null||_0x579229===void 0x0||_0x579229['destroy'](),this[_0x39bec4(0x154,0x1d4)]['shaderProgram']=undefined;}function _0x39bec4(_0x2eed44,_0x2ef906){return _0x35d9d0(_0x2ef906- -0x287,_0x2eed44);}return destroyObject(this);}}function deepMerge(_0x25c417,_0x274a83){if(!_0x25c417)return _0x274a83;function _0x2e7d57(_0x1d4689,_0x96f0e1){return _0x35d9d0(_0x1d4689- -0x60a,_0x96f0e1);}if(!_0x274a83)return _0x25c417;const _0x4bb5fb={..._0x274a83},_0x522180=_0x4bb5fb;for(const _0x5154a3 in _0x25c417){if(Object['prototype']['hasOwnProperty']['call'](_0x25c417,_0x5154a3)){const _0x5c52bc=_0x25c417[_0x5154a3],_0xc13a3a=_0x274a83[_0x5154a3];if(Array['isArray'](_0x5c52bc)){_0x522180[_0x5154a3]=_0x5c52bc[_0x2e7d57(-0x102,-0xc0)]();continue;}if(_0x5c52bc&&typeof _0x5c52bc===_0x2e7d57(-0x161,-0x182)){_0x522180[_0x5154a3]=deepMerge(_0x5c52bc,_0xc13a3a||{});continue;}_0x5c52bc!==undefined&&(_0x522180[_0x5154a3]=_0x5c52bc);}}function _0xf36469(_0x18eaad,_0xc9a573){return _0x459df4(_0x18eaad-0x5d0,_0xc9a573);}return _0x522180;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x35d9d0(0x4f8,0x49a)];class WindParticlesComputing{constructor(_0x4dca07,_0x4a37fd,_0x1fea5b,_0x41d124,_0x1c31ad){this['context']=_0x4dca07;function _0xe2c0df(_0x229743,_0x1e5ff8){return _0x35d9d0(_0x229743- -0x8c,_0x1e5ff8);}this['options']=_0x1fea5b,this['viewerParameters']=_0x41d124,this[_0xe2c0df(0x4c2,0x532)]=_0x4a37fd,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x139706={};_0x139706['scene']=_0x1c31ad,_0x139706['samplingWindow']=0x1,_0x139706['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x139706),this[_0x59abc3(-0x1a7,-0x158)](),this['createWindTextures']();function _0x59abc3(_0x476f12,_0x50e285){return _0x459df4(_0x50e285- -0x129,_0x476f12);}this[_0x59abc3(-0x1ad,-0x1a2)](),this[_0x59abc3(-0x14f,-0x1c0)]();}['initFrameRate'](){const _0x2ae435=()=>{function _0x51ad1c(_0x122eb8,_0xb82112){return _0x4ca2(_0xb82112- -0x2c0,_0x122eb8);}function _0x4237fa(_0xf13faa,_0xde77b1){return _0x4ca2(_0xde77b1- -0x32c,_0xf13faa);}this[_0x4237fa(-0x140,-0x122)]['lastFramesPerSecond']>0x14&&(this['frameRate']=this['frameRateMonitor']['lastFramesPerSecond'],this[_0x4237fa(-0x192,-0x17d)]=0x3c/Math['max'](this['frameRate'],0x1));};_0x2ae435();const _0x41b3ea=setInterval(_0x2ae435,0x3e8);function _0x1a8e83(_0x250477,_0x113f10){return _0x459df4(_0x113f10-0x5de,_0x250477);}const _0x4e59d3=this[_0x1a8e83(0x53d,0x5c9)]['bind'](this);this['destroy']=()=>{clearInterval(_0x41b3ea),_0x4e59d3();};}[_0x459df4(-0x83,-0x9e)](){const _0x428a86={};_0x428a86[_0x33d957(0x29a,0x2b3)]=TextureMinificationFilter$1['LINEAR'],_0x428a86['magnificationFilter']=TextureMagnificationFilter$1[_0x2d769c(0x3d7,0x40c)];function _0x33d957(_0x2dae3a,_0x47cf0c){return _0x35d9d0(_0x47cf0c- -0x223,_0x2dae3a);}const _0x3ed7ff={'context':this[_0x2d769c(0x3fb,0x45c)],'width':this[_0x33d957(0x34b,0x32b)]['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1[_0x33d957(0x213,0x28f)],'pixelDatatype':PixelDatatype$1[_0x2d769c(0x468,0x40b)],'flipY':this[_0x2d769c(0x402,0x45a)]['flipY']??![],'sampler':new Sampler$1(_0x428a86)};function _0x2d769c(_0x21c03e,_0x3d5416){return _0x35d9d0(_0x3d5416- -0x8f,_0x21c03e);}this['windTextures']={'U':new Texture$1({..._0x3ed7ff,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x3ed7ff,'source':{'arrayBufferView':new Float32Array(this['windData']['v'][_0x2d769c(0x42c,0x41b)])}})};}[_0x35d9d0(0x467,0x4c6)](){const _0x4f9b08={};_0x4f9b08['minificationFilter']=TextureMinificationFilter$1['NEAREST'];function _0x2e4689(_0x249eb1,_0x59a482){return _0x35d9d0(_0x59a482- -0x545,_0x249eb1);}_0x4f9b08['magnificationFilter']=TextureMagnificationFilter$1[_0x34bfd8(0x29e,0x2f5)];const _0x865a={'context':this['context'],'width':this[_0x34bfd8(0x2e3,0x365)][_0x34bfd8(0x2ce,0x2f4)],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x34bfd8(0x31c,0x314)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0x34bfd8(0x2ce,0x28b)]*this['options'][_0x2e4689(-0xd1,-0x71)]*0x4)[_0x34bfd8(0x2ad,0x2d8)](0x0)},'sampler':new Sampler$1(_0x4f9b08)};function _0x34bfd8(_0x2e1874,_0x5d6cb9){return _0x35d9d0(_0x2e1874- -0x206,_0x5d6cb9);}this[_0x2e4689(-0x68,-0xd8)]={'previousParticlesPosition':new Texture$1(_0x865a),'currentParticlesPosition':new Texture$1(_0x865a),'nextParticlesPosition':new Texture$1(_0x865a),'postProcessingPosition':new Texture$1(_0x865a),'particlesSpeed':new Texture$1(_0x865a)};}['destroyParticlesTextures'](){function _0x5d1f79(_0x1178f2,_0x5804e2){return _0x35d9d0(_0x5804e2- -0x285,_0x1178f2);}function _0x36f239(_0x265a89,_0x361066){return _0x459df4(_0x265a89-0x4e1,_0x361066);}Object[_0x5d1f79(0x253,0x202)](this['particlesTextures'])[_0x36f239(0x48b,0x511)](_0xadf8c7=>_0xadf8c7['destroy']());}[_0x35d9d0(0x449,0x46a)](){function _0x44c0be(_0x2a77f1,_0x288bb5){return _0x459df4(_0x2a77f1-0x5e7,_0x288bb5);}function _0x141d5b(_0x523025,_0x250dcb){return _0x35d9d0(_0x250dcb- -0x565,_0x523025);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this[_0x44c0be(0x57e,0x5a1)]['V'],'uRange':()=>new Cartesian2$1(this[_0x141d5b(-0x71,-0x17)]['u']['min'],this[_0x141d5b(0x6f,-0x17)]['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x141d5b(-0xb4,-0x8e)],this['windData']['v'][_0x141d5b(-0x9d,-0x90)]),'speedRange':()=>new Cartesian2$1(this[_0x141d5b(-0x6f,-0x17)][_0x44c0be(0x603,0x690)][_0x44c0be(0x5de,0x668)],this['windData']['speed']['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x4c27d9(_0x1abca3,_0x242bb6){return _0x141d5b(_0x1abca3,_0x242bb6-0x246);}function _0x204eb0(_0x22aa59,_0x21d672){return _0x44c0be(_0x22aa59- -0x393,_0x21d672);}return(this['viewerParameters']['pixelSize']+0x32)*this[_0x4c27d9(0x195,0x1ca)][_0x4c27d9(0x26a,0x236)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData'][_0x141d5b(-0x85,-0xaf)]),'minimum':()=>new Cartesian2$1(this[_0x141d5b(0x1c,-0x17)][_0x44c0be(0x58a,0x59f)]['west'],this['windData'][_0x44c0be(0x58a,0x5ac)]['south']),'maximum':()=>new Cartesian2$1(this[_0x141d5b(-0x6b,-0x17)]['bounds']['east'],this['windData'][_0x141d5b(-0xf6,-0xe2)]['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x44c0be(0x574,0x5d4)]['particlesSpeed'],'preExecute':()=>{const _0x38445a=this['particlesTextures']['previousParticlesPosition'];function _0x7b1020(_0x1fc078,_0x564910){return _0x44c0be(_0x564910- -0x92,_0x1fc078);}this['particlesTextures']['previousParticlesPosition']=this[_0x4cfb78(0x6b,0x24)]['currentParticlesPosition'],this[_0x4cfb78(-0x47,0x24)]['currentParticlesPosition']=this[_0x4cfb78(-0x18,0x24)]['postProcessingPosition'];function _0x4cfb78(_0x51eade,_0x529ace){return _0x44c0be(_0x529ace- -0x550,_0x51eade);}this[_0x7b1020(0x4ac,0x4e2)][_0x4cfb78(0x3a,0xaa)]=_0x38445a,this['primitives'][_0x7b1020(0x57d,0x555)]['commandToExecute']&&(this[_0x4cfb78(0x3a,0x15)][_0x7b1020(0x52d,0x555)][_0x4cfb78(-0x26,0x12)][_0x4cfb78(0x3b,0x77)]=this[_0x7b1020(0x554,0x4e2)][_0x4cfb78(0x141,0xd6)]);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x141d5b(-0x98,-0xf8)]['currentParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x44c0be(0x626,0x5de)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this[_0x44c0be(0x574,0x4ec)][_0x44c0be(0x5c0,0x5eb)],'preExecute':()=>{function _0x12ebe8(_0xa4e4bf,_0x316ac3){return _0x44c0be(_0x316ac3- -0x350,_0xa4e4bf);}function _0x2523d8(_0x2e4a27,_0x40acbb){return _0x44c0be(_0x40acbb- -0x4ef,_0x2e4a27);}this[_0x2523d8(0x75,0x76)][_0x12ebe8(0x195,0x203)][_0x2523d8(0xae,0x73)]&&(this['primitives']['updatePosition']['commandToExecute'][_0x12ebe8(0x2c5,0x277)]=this['particlesTextures'][_0x12ebe8(0x208,0x270)]);},'isDynamic':()=>this[_0x44c0be(0x5f0,0x5c0)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x44c0be(0x626,0x5bb)],'lonRange':()=>this[_0x44c0be(0x624,0x650)][_0x44c0be(0x5ec,0x581)],'latRange':()=>this['viewerParameters'][_0x141d5b(0x50,-0x30)],'dataLonRange':()=>new Cartesian2$1(this['windData'][_0x141d5b(-0x165,-0xe2)][_0x141d5b(-0xd5,-0x102)],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x141d5b(-0x45,-0x17)][_0x141d5b(-0x14a,-0xe2)][_0x44c0be(0x557,0x5d8)],this['windData']['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this[_0x44c0be(0x5f0,0x64a)]['dropRate'],'dropRateBump':()=>this[_0x44c0be(0x5f0,0x5d6)]['dropRateBump'],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures'][_0x141d5b(-0xb7,-0x72)],'preExecute':()=>{function _0xc59701(_0x17bc49,_0xcbd77e){return _0x141d5b(_0x17bc49,_0xcbd77e-0x10b);}function _0x18d655(_0xa10375,_0x4d03f5){return _0x44c0be(_0x4d03f5- -0x186,_0xa10375);}this[_0x18d655(0x3b8,0x3df)]['postProcessingPosition']['commandToExecute']&&(this['primitives'][_0xc59701(0xcf,0x99)]['commandToExecute']['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this['options']['dynamic']})};}[_0x35d9d0(0x47a,0x469)](){this['windTextures']['U']['destroy'](),this['windTextures']['V']['destroy'](),this['createWindTextures']();}['updateWindData'](_0x5bb428){function _0x259ab3(_0x10c262,_0x596a30){return _0x459df4(_0x596a30-0x496,_0x10c262);}this[_0x259ab3(0x497,0x504)]=_0x5bb428,this['reCreateWindTextures']();}['updateOptions'](_0x1e9c98){function _0x176b5e(_0x3f5a02,_0xa34db9){return _0x459df4(_0x3f5a02-0x55d,_0xa34db9);}function _0xb15c5a(_0xbb88af,_0x3d4110){return _0x35d9d0(_0xbb88af- -0x49,_0x3d4110);}const _0x509fb1=_0x1e9c98['flipY']!==undefined&&_0x1e9c98['flipY']!==this[_0xb15c5a(0x4a0,0x4f8)]['flipY'];this[_0x176b5e(0x566,0x50b)]=deepMerge(_0x1e9c98,this[_0x176b5e(0x566,0x589)]),_0x509fb1&&this['reCreateWindTextures']();}['processWindData'](_0x35412f){const {array:_0x2bea5b}=_0x35412f;let {min:_0x517250,max:_0xd31beb}=_0x35412f;const _0x4c5e4a=new Float32Array(_0x2bea5b['length']);_0x517250===undefined&&(console[_0x5848e4(-0xcd,-0x156)]('min\x20is\x20undefined,\x20calculate\x20min'),_0x517250=Math[_0x5848e4(-0x103,-0xc7)](..._0x2bea5b));_0xd31beb===undefined&&(console[_0x3db2aa(-0x250,-0x2ab)]('max\x20is\x20undefined,\x20calculate\x20max'),_0xd31beb=Math['max'](..._0x2bea5b));const _0x1f2797=Math[_0x5848e4(-0x105,-0xc9)](Math['abs'](_0x517250),Math[_0x5848e4(-0x126,-0x101)](_0xd31beb));for(let _0x21f89a=0x0;_0x21f89a<_0x2bea5b[_0x3db2aa(-0x257,-0x2a3)];_0x21f89a++){const _0x14563b=_0x2bea5b[_0x21f89a]/_0x1f2797;_0x4c5e4a[_0x21f89a]=_0x14563b;}function _0x3db2aa(_0x31f8f9,_0x49e43e){return _0x35d9d0(_0x31f8f9- -0x698,_0x49e43e);}function _0x5848e4(_0x3ea85a,_0x4e180a){return _0x35d9d0(_0x4e180a- -0x59e,_0x3ea85a);}return _0x4c5e4a;}[_0x459df4(-0x15,-0x4e)](){Object[_0x244ebf(0x265,0x2b8)](this[_0x244ebf(0x255,0x2d8)])['forEach'](_0x3ab52b=>_0x3ab52b['destroy']());function _0x244ebf(_0x2c9baa,_0x2dab32){return _0x459df4(_0x2c9baa-0x2be,_0x2dab32);}Object['values'](this[_0x384272(0x341,0x2d9)])['forEach'](_0x4580b8=>_0x4580b8['destroy']());function _0x384272(_0x27a752,_0x30665c){return _0x35d9d0(_0x30665c- -0x194,_0x27a752);}Object[_0x244ebf(0x265,0x2c5)](this['primitives'])['forEach'](_0x353021=>_0x353021['destroy']()),this[_0x244ebf(0x2a4,0x323)][_0x384272(0x333,0x337)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x35d9d0(0x4f8,0x550)];class WindParticlesRendering{constructor(_0x652298,_0x4583c2,_0x357498,_0x108afe){function _0x14f03f(_0x2d6837,_0x556b4d){return _0x35d9d0(_0x556b4d- -0xaf,_0x2d6837);}this['context']=_0x652298,this[_0x1109c8(0x297,0x242)]=_0x4583c2,this['viewerParameters']=_0x357498,this['computing']=_0x108afe;(typeof this['options']['particlesTextureSize']!==_0x14f03f(0x361,0x3b0)||this[_0x1109c8(0x29d,0x242)]['particlesTextureSize']<=0x0)&&(console[_0x14f03f(0x3ce,0x390)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options'][_0x1109c8(0x268,0x22d)]=0x100);this['colorTable']=this[_0x14f03f(0x437,0x3d1)]();function _0x1109c8(_0x54ad80,_0x5d7750){return _0x35d9d0(_0x5d7750- -0x2a7,_0x54ad80);}this['textures']=this['createRenderingTextures'](),this[_0x1109c8(0x250,0x1c8)]=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}['createRenderingTextures'](){const _0x13009a={};_0x13009a[_0x57bb0b(-0x153,-0x137)]=this[_0x57bb0b(-0x118,-0x137)],_0x13009a[_0x172583(-0xb6,-0x61)]=this[_0x172583(-0x16,0xf)][_0x172583(0x1,-0x9)];function _0x57bb0b(_0x8e9774,_0x2db83c){return _0x459df4(_0x2db83c- -0x142,_0x8e9774);}_0x13009a[_0x172583(-0x4b,0x3)]=this['context']['drawingBufferHeight'],_0x13009a['pixelFormat']=PixelFormat[_0x172583(0x21,-0x26)],_0x13009a[_0x57bb0b(-0x11f,-0x12d)]=PixelDatatype['UNSIGNED_BYTE'];const _0x41bb1e=_0x13009a,_0x4f0b20={};_0x4f0b20[_0x57bb0b(-0x16c,-0x137)]=this[_0x172583(-0x16,0x2f)],_0x4f0b20[_0x172583(-0xb6,-0x94)]=this['context']['drawingBufferWidth'],_0x4f0b20[_0x57bb0b(-0x1a1,-0x16c)]=this['context']['drawingBufferHeight'],_0x4f0b20['pixelFormat']=PixelFormat[_0x172583(-0x78,0x6)],_0x4f0b20[_0x172583(-0xc,-0x4a)]=PixelDatatype['UNSIGNED_INT'];function _0x172583(_0x2178f4,_0x114b61){return _0x35d9d0(_0x2178f4- -0x501,_0x114b61);}const _0x1131c3=_0x4f0b20;return{'segmentsColor':new Texture(_0x41bb1e),'segmentsDepth':new Texture(_0x1131c3)};}[_0x459df4(0x51,-0x2e)](){function _0x5481cf(_0x2be266,_0xa1876d){return _0x459df4(_0xa1876d-0x5f5,_0x2be266);}const _0xa13ec0={};_0xa13ec0['context']=this[_0x333fce(-0xf,0x6b)],_0xa13ec0[_0x333fce(-0x21,-0x6)]=[this['textures']['segmentsColor']];function _0x333fce(_0x36e9d3,_0x51e76f){return _0x459df4(_0x36e9d3- -0x1a,_0x51e76f);}return _0xa13ec0[_0x333fce(0x2f,0x88)]=this[_0x5481cf(0x661,0x601)]['segmentsDepth'],{'segments':new Framebuffer(_0xa13ec0)};}[_0x35d9d0(0x553,0x579)](){function _0x3265e7(_0x3bb10f,_0xc9818f){return _0x35d9d0(_0xc9818f- -0x381,_0x3bb10f);}function _0x54277f(_0xdb1f03,_0x21713d){return _0x35d9d0(_0x21713d- -0x232,_0xdb1f03);}Object[_0x54277f(0x279,0x255)](this['framebuffers'])[_0x3265e7(0xdf,0x109)](_0x1ea24a=>{function _0x51c8ce(_0x439685,_0x3afd36){return _0x3265e7(_0x439685,_0x3afd36- -0x176);}_0x1ea24a[_0x51c8ce(0x28,-0x2c)]();});}['createColorTableTexture'](){function _0x43b501(_0x4c13d6,_0xdd3b4f){return _0x459df4(_0x4c13d6-0x144,_0xdd3b4f);}const _0x30a0b2=new Float32Array(this['options']['colors']['flatMap'](_0x5890a8=>{function _0x3bab6c(_0x14bb55,_0x20d41d){return _0x4ca2(_0x20d41d- -0x373,_0x14bb55);}const _0x5cff60=Color$1['fromCssColorString'](_0x5890a8);return[_0x5cff60['red'],_0x5cff60['green'],_0x5cff60['blue'],_0x5cff60[_0x3bab6c(-0x21b,-0x1ae)]];})),_0x4231c5={};_0x4231c5['minificationFilter']=TextureMinificationFilter['LINEAR'],_0x4231c5['magnificationFilter']=TextureMagnificationFilter['LINEAR'],_0x4231c5[_0x43b501(0xba,0x4b)]=TextureWrap[_0x25b035(0x33d,0x32b)];function _0x25b035(_0x21dff8,_0x4c28a3){return _0x459df4(_0x4c28a3-0x346,_0x21dff8);}return _0x4231c5[_0x25b035(0x372,0x355)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this[_0x25b035(0x3b9,0x351)],'width':this[_0x25b035(0x381,0x34f)][_0x43b501(0x182,0x1d7)][_0x25b035(0x27f,0x2a7)],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x4231c5),'source':{'width':this['options'][_0x25b035(0x3a0,0x384)]['length'],'height':0x1,'arrayBufferView':_0x30a0b2}});}[_0x35d9d0(0x47e,0x48b)](){function _0x50fb5a(_0x3d2e18,_0x37e83d){return _0x459df4(_0x3d2e18-0x2a5,_0x37e83d);}const _0x5e48de=0x4,_0x5cead2=this['options']['particlesTextureSize'];function _0xe8b0f(_0x3b9dc0,_0x24e966){return _0x35d9d0(_0x24e966-0x6a,_0x3b9dc0);}let _0x340867=[];for(let _0x4c8fa6=0x0;_0x4c8fa6<_0x5cead2;_0x4c8fa6++){for(let _0x49ee91=0x0;_0x49ee91<_0x5cead2;_0x49ee91++){for(let _0x4dd129=0x0;_0x4dd129<_0x5e48de;_0x4dd129++){_0x340867['push'](_0x4c8fa6/_0x5cead2),_0x340867[_0x50fb5a(0x2c2,0x24e)](_0x49ee91/_0x5cead2);}}}_0x340867=new Float32Array(_0x340867);const _0x2c924f=this[_0x50fb5a(0x2ae,0x320)][_0x50fb5a(0x299,0x240)]**0x2;let _0x485427=[];for(let _0x3f796c=0x0;_0x3f796c<_0x2c924f;_0x3f796c++){_0x485427['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x485427=new Float32Array(_0x485427);let _0x607e5a=[];for(let _0x497a4e=0x0,_0x1e2d5e=0x0;_0x497a4e<_0x2c924f;_0x497a4e++){_0x607e5a['push'](_0x1e2d5e+0x0,_0x1e2d5e+0x1,_0x1e2d5e+0x2,_0x1e2d5e+0x2,_0x1e2d5e+0x1,_0x1e2d5e+0x3),_0x1e2d5e+=_0x5e48de;}_0x607e5a=new Uint32Array(_0x607e5a);const _0x375bda={};_0x375bda[_0xe8b0f(0x45f,0x4bb)]=ComponentDatatype[_0x50fb5a(0x25f,0x1fc)],_0x375bda['componentsPerAttribute']=0x2,_0x375bda[_0xe8b0f(0x4d2,0x4f1)]=_0x340867;const _0x2ca12a={};_0x2ca12a['componentDatatype']=ComponentDatatype[_0xe8b0f(0x4a5,0x504)],_0x2ca12a['componentsPerAttribute']=0x3,_0x2ca12a['values']=_0x485427;const _0x982b2e=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x375bda),'normal':new GeometryAttribute(_0x2ca12a)}),'indices':_0x607e5a});return _0x982b2e;}[_0x35d9d0(0x514,0x4a7)](_0x360af0){const _0x17e668={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x360af0};function _0x3a267a(_0x5dc6c7,_0x5b0d58){return _0x35d9d0(_0x5b0d58- -0x586,_0x5dc6c7);}return Appearance[_0x3a267a(-0x9a,-0x39)](!![],![],_0x17e668);}['createPrimitives'](){const _0x8290d3={};_0x8290d3['st']=0x0,_0x8290d3[_0x467e71(-0x167,-0x163)]=0x1;function _0x467e71(_0x3bbefe,_0x93f6e6){return _0x459df4(_0x93f6e6- -0x19c,_0x3bbefe);}const _0x3a279c={};function _0xeb6fbb(_0x200c0f,_0x4491e0){return _0x459df4(_0x200c0f-0x388,_0x4491e0);}_0x3a279c['enabled']=!![];const _0xa58d7c={};_0xa58d7c['enabled']=!![],_0xa58d7c[_0xeb6fbb(0x300,0x306)]=WebGLRenderingContext[_0x467e71(-0xfe,-0x16b)],_0xa58d7c['blendFuncSource']=WebGLRenderingContext[_0xeb6fbb(0x34a,0x2f5)],_0xa58d7c[_0xeb6fbb(0x3d8,0x455)]=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x24589a={};_0x24589a['viewport']=undefined,_0x24589a['depthTest']=_0x3a279c,_0x24589a['depthMask']=!![],_0x24589a[_0xeb6fbb(0x34d,0x340)]=_0xa58d7c;const _0x2ea750=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x8290d3,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x467e71(-0x26f,-0x204)],'uniformMap':{'previousParticlesPosition':()=>this['computing'][_0x467e71(-0x24e,-0x20f)][_0xeb6fbb(0x37b,0x370)],'currentParticlesPosition':()=>this['computing']['particlesTextures'][_0xeb6fbb(0x2fa,0x370)],'postProcessingPosition':()=>this[_0xeb6fbb(0x301,0x34c)]['particlesTextures'][_0x467e71(-0x1c8,-0x189)],'particlesSpeed':()=>this[_0x467e71(-0x1b8,-0x223)]['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this[_0xeb6fbb(0x301,0x2ee)]['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{var _0x28990b,_0x1a883f;function _0x52b81a(_0x51d630,_0x1d446d){return _0x467e71(_0x51d630,_0x1d446d-0x3a5);}const _0x306bb8=new Cartesian2(((_0x28990b=this['options']['domain'])===null||_0x28990b===void 0x0?void 0x0:_0x28990b['min'])??this[_0x52b81a(0x177,0x182)]['windData']['speed'][_0x52b81a(0x1a2,0x200)],((_0x1a883f=this['options'][_0x52b81a(0x191,0x1bc)])===null||_0x1a883f===void 0x0?void 0x0:_0x1a883f[_0x52b81a(0x1b1,0x1fe)])??this['computing']['windData']['speed']['max']);function _0x486056(_0x47530e,_0x344482){return _0xeb6fbb(_0x47530e-0x27e,_0x344482);}return _0x306bb8;},'displayRange':()=>{var _0x599b31,_0x2c9647;function _0x228294(_0xd75d32,_0x43e358){return _0xeb6fbb(_0x43e358- -0x158,_0xd75d32);}function _0x326f30(_0x1f39c6,_0x3ac7ec){return _0xeb6fbb(_0x1f39c6- -0x8c,_0x3ac7ec);}const _0x23db80=new Cartesian2(((_0x599b31=this[_0x326f30(0x305,0x2bf)][_0x326f30(0x34f,0x2da)])===null||_0x599b31===void 0x0?void 0x0:_0x599b31['min'])??this[_0x228294(0x13e,0x1a9)][_0x228294(0x2ae,0x29e)]['speed']['min'],((_0x2c9647=this[_0x326f30(0x305,0x353)]['displayRange'])===null||_0x2c9647===void 0x0?void 0x0:_0x2c9647[_0x326f30(0x2f1,0x307)])??this[_0x326f30(0x275,0x280)][_0x326f30(0x36a,0x367)][_0x228294(0x1ec,0x24c)]['max']);return _0x23db80;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this[_0xeb6fbb(0x393,0x38a)]['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters'][_0xeb6fbb(0x3e1,0x36e)],'lineWidth':()=>{function _0x387005(_0x19f2b3,_0x423a39){return _0xeb6fbb(_0x423a39- -0x46d,_0x19f2b3);}const _0x5a39ce={};_0x5a39ce[_0x5db07d(0x3bb,0x3d8)]=0x1,_0x5a39ce[_0x5db07d(0x3b9,0x351)]=0x2;function _0x5db07d(_0x32ec38,_0x533d6b){return _0xeb6fbb(_0x32ec38-0x3c,_0x533d6b);}const _0x4460e8=this['options']['lineWidth']||_0x5a39ce;return new Cartesian2(_0x4460e8['min'],_0x4460e8[_0x387005(-0x106,-0xf0)]);},'lineLength':()=>{const _0x4c5bdd={};function _0x429ceb(_0x2f7d0e,_0x561c88){return _0xeb6fbb(_0x561c88-0x4c,_0x2f7d0e);}_0x4c5bdd['min']=0x14,_0x4c5bdd['max']=0x64;const _0x4f342c=this['options']['lineLength']||_0x4c5bdd;return new Cartesian2(_0x4f342c[_0x429ceb(0x438,0x3cb)],_0x4f342c['max']);},'is3D':()=>this['viewerParameters']['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0xeb6fbb(0x394,0x34b)]['segmentsDepth']},'vertexShaderSource':ShaderManager[_0x467e71(-0x128,-0x18c)](),'fragmentShaderSource':ShaderManager[_0x467e71(-0x120,-0x194)](),'rawRenderState':this['createRawRenderState'](_0x24589a)}),_0x10db72={};return _0x10db72['segments']=_0x2ea750,_0x10db72;}['onParticlesTextureSizeChange'](){function _0x3bebb9(_0x403d23,_0x58248e){return _0x35d9d0(_0x403d23- -0x1b0,_0x58248e);}const _0x497125=this['createSegmentsGeometry']();this['primitives']['segments'][_0x3bebb9(0x347,0x2e5)]=_0x497125;const _0x18c47f={};_0x18c47f['context']=this['context'],_0x18c47f['geometry']=_0x497125;function _0x289a4e(_0xccd851,_0x4e7887){return _0x35d9d0(_0xccd851- -0x54b,_0x4e7887);}_0x18c47f['attributeLocations']=this[_0x289a4e(-0xed,-0xeb)][_0x289a4e(-0x9e,-0xdc)]['attributeLocations'],_0x18c47f[_0x289a4e(-0x41,-0x78)]=BufferUsage['STATIC_DRAW'];const _0xf420aa=VertexArray[_0x3bebb9(0x29e,0x305)](_0x18c47f);this[_0x289a4e(-0xed,-0xc0)]['segments']['commandToExecute']&&(this['primitives']['segments'][_0x3bebb9(0x2ab,0x26a)]['vertexArray']=_0xf420aa);}[_0x459df4(-0x1f,-0x97)](){this['colorTable'][_0x458477(0x2d1,0x309)]();function _0x304939(_0x3c6dec,_0x476ed3){return _0x35d9d0(_0x3c6dec-0x125,_0x476ed3);}function _0x458477(_0x5d2ce5,_0x8f8674){return _0x459df4(_0x5d2ce5-0x2e6,_0x8f8674);}this['colorTable']=this[_0x304939(0x5a5,0x56b)]();}[_0x459df4(0x24,-0x3f)](_0x5c3790){function _0x22a476(_0x16c88a,_0x578c91){return _0x459df4(_0x578c91-0x30a,_0x16c88a);}const _0x34ee46=_0x5c3790[_0x484f01(0x3c8,0x40e)]&&JSON['stringify'](_0x5c3790[_0x22a476(0x35f,0x348)])!==JSON['stringify'](this['options']['colors']);this['options']=deepMerge(_0x5c3790,this['options']);function _0x484f01(_0x36fb33,_0x4e0565){return _0x459df4(_0x4e0565-0x3d0,_0x36fb33);}_0x34ee46&&this[_0x22a476(0x2e0,0x2eb)]();}['destroy'](){Object[_0xa6be1d(0xf3,0xf5)](this[_0xa6be1d(0x67,0xdd)])['forEach'](_0xb4b27f=>{function _0x2bdc08(_0x3c30ad,_0x136408){return _0x480d12(_0x136408,_0x3c30ad-0x562);}_0xb4b27f[_0x2bdc08(0x56e,0x531)]();}),Object['values'](this[_0xa6be1d(0x47,0xcc)])['forEach'](_0x3e7534=>{_0x3e7534['destroy']();});function _0x480d12(_0x22f15e,_0x13b61b){return _0x35d9d0(_0x13b61b- -0x4bf,_0x22f15e);}function _0xa6be1d(_0x542c2f,_0x31f6f5){return _0x459df4(_0x31f6f5-0x14e,_0x542c2f);}this[_0x480d12(0xe6,0x81)]['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x459df4(0x18,0x4)];class WindParticleSystem{constructor(_0x1a2f8e,_0x2be13d,_0x39c8a8,_0x27201b,_0x4f94d3){this['context']=_0x1a2f8e,this['options']=_0x39c8a8,this['viewerParameters']=_0x27201b,this['computing']=new WindParticlesComputing(_0x1a2f8e,_0x2be13d,_0x39c8a8,_0x27201b,_0x4f94d3),this['rendering']=new WindParticlesRendering(_0x1a2f8e,_0x39c8a8,_0x27201b,this[_0x50c4b6(-0x15,-0x78)]);function _0x50c4b6(_0x242e2c,_0x140fcb){return _0x459df4(_0x242e2c-0x72,_0x140fcb);}this['clearFramebuffers']();}[_0x459df4(-0x70,-0x57)](){const _0xf53ea5=[this['computing'][_0x50d0b5(0x1f4,0x208)]['calculateSpeed'],this['computing'][_0x256505(0x430,0x400)]['updatePosition'],this[_0x50d0b5(0x1ef,0x260)][_0x256505(0x37f,0x400)][_0x256505(0x50e,0x495)],this[_0x256505(0x576,0x4ec)][_0x256505(0x3e5,0x400)][_0x50d0b5(0x243,0x253)]];function _0x256505(_0x15f423,_0x2825bf){return _0x459df4(_0x2825bf-0x482,_0x15f423);}function _0x50d0b5(_0x3e0898,_0x349fb1){return _0x459df4(_0x3e0898-0x276,_0x349fb1);}return _0xf53ea5;}[_0x459df4(-0x22,0x28)](){const _0x51ca22=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x3d4d61(0x49c,0x499)]});function _0x29244d(_0x1e800e,_0x58adc0){return _0x459df4(_0x1e800e-0x17a,_0x58adc0);}function _0x3d4d61(_0x59a2f9,_0x1f844d){return _0x35d9d0(_0x59a2f9- -0x51,_0x1f844d);}Object['keys'](this['rendering']['framebuffers'])[_0x3d4d61(0x439,0x495)](_0x1f973c=>{function _0x5535ee(_0x6c7260,_0x57b0a6){return _0x29244d(_0x57b0a6-0x1bb,_0x6c7260);}_0x51ca22['framebuffer']=this[_0x304470(0x53c,0x4d2)]['framebuffers'][_0x1f973c];function _0x304470(_0x4e4044,_0x396021){return _0x3d4d61(_0x4e4044-0x43,_0x396021);}_0x51ca22[_0x304470(0x488,0x44f)](this[_0x304470(0x4dd,0x4be)]);});}[_0x35d9d0(0x494,0x495)](_0x443282){let _0x27273f=![];_0x443282[_0x1526ab(0x104,0x127)]&&this['options']['particlesTextureSize']!==_0x443282['particlesTextureSize']&&(_0x27273f=!![]);const _0x258251=deepMerge(_0x443282,this['options']);if(_0x258251[_0x47a7a8(0x380,0x3ae)]<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this[_0x1526ab(0x1a9,0x13c)]=_0x258251;function _0x1526ab(_0x1a74bc,_0xe368be){return _0x35d9d0(_0xe368be- -0x3ad,_0x1a74bc);}this[_0x47a7a8(0x448,0x424)][_0x47a7a8(0x457,0x3de)](_0x443282);function _0x47a7a8(_0xee40a9,_0x55bf08){return _0x459df4(_0x55bf08-0x3ba,_0xee40a9);}this[_0x1526ab(0x78,0xac)]['updateOptions'](_0x443282),_0x27273f&&(this[_0x1526ab(0x8e,0xac)][_0x47a7a8(0x30d,0x33c)](),this[_0x47a7a8(0x2ae,0x333)]['createParticlesTextures'](),this[_0x1526ab(0x1fe,0x19d)]['onParticlesTextureSizeChange']());}[_0x459df4(-0x26,0x43)](_0x42ef06){function _0x3c488e(_0x1fd09f,_0x171313){return _0x35d9d0(_0x171313- -0x4cb,_0x1fd09f);}this['viewerParameters']=_0x42ef06,this['computing']['viewerParameters']=_0x42ef06,this[_0x3c488e(0xf7,0x7f)]['viewerParameters']=_0x42ef06;}[_0x459df4(-0x15,-0xa1)](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x580d24={};function _0x459df4(_0x21a961,_0x5a9e78){return _0x4ca2(_0x21a961- -0x224,_0x5a9e78);}_0x580d24['min']=0x1,_0x580d24[_0x35d9d0(0x4d5,0x51d)]=0x2;const _0x5c74cb={};_0x5c74cb['min']=0x14,_0x5c74cb[_0x459df4(-0xb,-0x3c)]=0x64;const _0x3db33a={};function _0x4ca2(_0x267a2a,_0x58dab9){const _0x4d9cb4=_0x4d9c();return _0x4ca2=function(_0x4ca256,_0x21962d){_0x4ca256=_0x4ca256-0x180;let _0x5792ee=_0x4d9cb4[_0x4ca256];return _0x5792ee;},_0x4ca2(_0x267a2a,_0x58dab9);}_0x3db33a[_0x459df4(-0xc,-0x9)]=0x64,_0x3db33a['fixedHeight']=0x0,_0x3db33a[_0x459df4(-0x65,0x27)]=_0x580d24,_0x3db33a['lineLength']=_0x5c74cb,_0x3db33a['speedFactor']=0x1,_0x3db33a['dropRate']=0.003,_0x3db33a['dropRateBump']=0.001,_0x3db33a['colors']=['rgb(206,255,255)'],_0x3db33a[_0x459df4(-0x30,-0x88)]=![],_0x3db33a[_0x35d9d0(0x536,0x52f)]=!![];const DEF_OPTIONS=_0x3db33a;class WindLayer extends BaseLayer$1{constructor(_0x21bb93={}){_0x21bb93={...DEF_OPTIONS,..._0x21bb93};function _0x33c172(_0x4c4a49,_0x3f9b87){return _0x459df4(_0x4c4a49-0x4c7,_0x3f9b87);}super(_0x21bb93),this[_0x33c172(0x472,0x4c9)](_0x21bb93,_0x21bb93);}get['layer'](){return this['primitives'];}get[_0x35d9d0(0x4e2,0x48a)](){function _0x103857(_0x346049,_0x528cfc){return _0x459df4(_0x528cfc-0x52c,_0x346049);}function _0x7e479c(_0x32a17e,_0x2dda33){return _0x459df4(_0x2dda33-0x3cb,_0x32a17e);}return this[_0x7e479c(0x3a0,0x3d4)][_0x7e479c(0x40c,0x3cd)];}set['data'](_0x3c9276){this['options'][_0x5df282(-0xf8,-0x178)]=_0x3c9276;function _0x5df282(_0xad7b2a,_0x5acd92){return _0x35d9d0(_0xad7b2a- -0x5da,_0x5acd92);}this['setData'](_0x3c9276);}get[_0x459df4(0x3e,0x60)](){function _0x19eb4b(_0x4055d3,_0x1e46ab){return _0x459df4(_0x1e46ab-0xce,_0x4055d3);}return this[_0x19eb4b(0x80,0xd7)]['colors'];}set['colors'](_0x37484b){this[_0x2e48dd(0x57a,0x558)][_0x2daf34(0x57f,0x527)]=_0x37484b;function _0x2daf34(_0x565ba6,_0x45e2fd){return _0x459df4(_0x565ba6-0x541,_0x45e2fd);}const _0x5554d7={};function _0x2e48dd(_0x25db97,_0x3976e3){return _0x459df4(_0x3976e3-0x54f,_0x25db97);}_0x5554d7[_0x2daf34(0x57f,0x5cf)]=_0x37484b,this['_setOptionsHook'](this[_0x2daf34(0x54a,0x551)],_0x5554d7);}[_0x35d9d0(0x43c,0x416)](){}['_addedHook'](){function _0x50867b(_0x4423a0,_0x20d6a3){return _0x459df4(_0x4423a0-0x8c,_0x20d6a3);}this['scene']=this['_map']['scene'],this[_0x23d90c(0x35f,0x3d6)]=this['_map']['camera'];function _0x23d90c(_0x64a1,_0x24f851){return _0x459df4(_0x64a1-0x305,_0x24f851);}this['options'][_0x23d90c(0x307,0x282)]&&this['setData'](this['options']['data']);if(!this[_0x50867b(0xfa,0x110)])return;this['viewerParameters']={'lonRange':new Cesium$1[(_0x23d90c(0x26a,0x266))](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene']['context'],this['windData'],this[_0x23d90c(0x30e,0x2a8)],this['viewerParameters'],this['scene']),this['primitives']=this[_0x23d90c(0x345,0x3b5)]['getPrimitives'](),this[_0x50867b(0xa,-0x5b)]['forEach'](_0xf00459=>{function _0x2905a0(_0x54be79,_0xccc2ee){return _0x23d90c(_0xccc2ee-0x231,_0x54be79);}this[_0x2905a0(0x614,0x595)]['primitives']['add'](_0xf00459);}),this[_0x23d90c(0x35f,0x349)][_0x23d90c(0x359,0x3b2)]=0.01,this['camera']['changed'][_0x50867b(0x44,0xd1)](this['updateViewerParameters'][_0x23d90c(0x357,0x318)](this)),this[_0x50867b(0xeb,0x164)][_0x50867b(0xbb,0x45)]['addEventListener'](this['updateViewerParameters']['bind'](this)),window['addEventListener']('resize',this['updateViewerParameters']['bind'](this));}[_0x459df4(-0x14,-0x52)](){this['camera']['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this)),this['scene'][_0x864516(0x57,0x80)]['removeEventListener'](this['updateViewerParameters'][_0x864516(0xae,0xa3)](this));function _0x464b53(_0x2ecd28,_0xaf8a05){return _0x459df4(_0x2ecd28- -0x195,_0xaf8a05);}window[_0x464b53(-0x1ef,-0x1f1)](_0x464b53(-0x1e8,-0x16e),this['updateViewerParameters'][_0x864516(0x12b,0xa3)](this));function _0x864516(_0x1fd02b,_0x4860ee){return _0x35d9d0(_0x4860ee- -0x48f,_0x1fd02b);}this['primitives']&&(this['primitives']['forEach'](_0x52d010=>{function _0x9b22c7(_0x1e1cc5,_0x30d359){return _0x864516(_0x30d359,_0x1e1cc5-0x45f);}this[_0x9b22c7(0x50f,0x4e4)]['primitives']['remove'](_0x52d010);}),delete this[_0x864516(0x33,-0x31)]),this[_0x464b53(-0x155,-0x1d8)]&&(this[_0x864516(0xda,0x91)]['destroy'](),delete this[_0x464b53(-0x155,-0x1b7)]);}[_0x35d9d0(0x4ac,0x455)](_0x4c734c,_0x1f3dba){this[_0x1c2859(0x265,0x2aa)]=this['processWindData'](_0x4c734c);function _0x4ff58f(_0x30828f,_0x50c47c){return _0x35d9d0(_0x30828f- -0x4b0,_0x50c47c);}if(_0x1f3dba){this['_removedHook'](),this[_0x1c2859(0x197,0x217)]();return;}function _0x1c2859(_0x48dbef,_0x2e2a24){return _0x35d9d0(_0x2e2a24- -0x2a4,_0x48dbef);}this['particleSystem']?(this['particleSystem'][_0x1c2859(0x18e,0x1b5)][_0x4ff58f(0x21,-0x9)](this[_0x4ff58f(0x9e,0xf1)]),this['scene']['requestRender']()):this[_0x1c2859(0x215,0x217)]();}['_setOptionsHook'](_0x21ecb0,_0x4ff079){function _0x3500b6(_0x107fb6,_0x2143c4){return _0x35d9d0(_0x2143c4-0x6b,_0x107fb6);}this['particleSystem']&&(this['particleSystem']['changeOptions'](_0x4ff079),this[_0x3500b6(0x60f,0x5aa)]['requestRender']());}['processWindData'](_0x2f446a){var _0x2a9826,_0x5e397e;const _0x25a089={..._0x2f446a},_0x471a2d=_0x25a089;!_0x471a2d['height']&&_0x471a2d['rows']&&(_0x471a2d[_0x2d5ed6(0x258,0x27e)]=_0x471a2d['rows']);!_0x471a2d[_0x2d5ed6(0x27b,0x213)]&&_0x471a2d[_0x2d5ed6(0x367,0x318)]&&(_0x471a2d[_0x5de8bc(0x377,0x393)]=_0x471a2d['cols']);!_0x471a2d[_0x2d5ed6(0x1e7,0x24b)]&&(_0x471a2d['bounds']={'west':_0x471a2d[_0x2d5ed6(0x353,0x2ec)],'south':_0x471a2d['ymin'],'east':_0x471a2d[_0x2d5ed6(0x245,0x224)],'north':_0x471a2d[_0x5de8bc(0x3ab,0x342)]});function _0x5de8bc(_0x36c89e,_0x46a618){return _0x459df4(_0x36c89e-0x40c,_0x46a618);}if(!_0x471a2d['u']){const _0x53063b={};_0x53063b[_0x5de8bc(0x3d6,0x3c2)]=_0x2f446a['udata'],_0x53063b['min']=_0x2f446a['umin'],_0x53063b['max']=_0x2f446a['umax'],_0x471a2d['u']=_0x53063b;}if(!_0x471a2d['v']){const _0x35d852={};_0x35d852[_0x5de8bc(0x3d6,0x37f)]=_0x2f446a[_0x5de8bc(0x42b,0x3da)],_0x35d852['min']=_0x2f446a[_0x2d5ed6(0x2b4,0x2a9)],_0x35d852[_0x2d5ed6(0x2bc,0x29d)]=_0x2f446a['vmax'],_0x471a2d['v']=_0x35d852;}function _0x2d5ed6(_0x14df0d,_0x27a817){return _0x459df4(_0x27a817-0x2a8,_0x14df0d);}if(((_0x2a9826=_0x471a2d[_0x2d5ed6(0x2f7,0x2c4)])===null||_0x2a9826===void 0x0?void 0x0:_0x2a9826[_0x5de8bc(0x403,0x431)])===undefined||((_0x5e397e=_0x471a2d['speed'])===null||_0x5e397e===void 0x0?void 0x0:_0x5e397e['max'])===undefined||_0x471a2d[_0x2d5ed6(0x29c,0x2c4)][_0x2d5ed6(0x230,0x272)]===undefined){const _0x5a2b89={'array':new Float32Array(_0x471a2d['u'][_0x2d5ed6(0x2cf,0x272)]['length']),'min':Number['MAX_VALUE'],'max':Number[_0x2d5ed6(0x218,0x280)]};for(let _0x58808d=0x0;_0x58808d<_0x471a2d['u']['array'][_0x5de8bc(0x36d,0x3bf)];_0x58808d++){_0x5a2b89['array'][_0x58808d]=Math[_0x2d5ed6(0x343,0x30b)](_0x471a2d['u'][_0x5de8bc(0x3d6,0x3be)][_0x58808d]*_0x471a2d['u'][_0x2d5ed6(0x24f,0x272)][_0x58808d]+_0x471a2d['v']['array'][_0x58808d]*_0x471a2d['v'][_0x5de8bc(0x3d6,0x41f)][_0x58808d]),_0x5a2b89[_0x2d5ed6(0x280,0x272)][_0x58808d]!==0x0&&(_0x5a2b89[_0x2d5ed6(0x259,0x29f)]=Math[_0x5de8bc(0x403,0x44c)](_0x5a2b89['min'],_0x5a2b89['array'][_0x58808d]),_0x5a2b89['max']=Math[_0x2d5ed6(0x27e,0x29d)](_0x5a2b89[_0x2d5ed6(0x220,0x29d)],_0x5a2b89['array'][_0x58808d]));}_0x471a2d['speed']=_0x5a2b89;}return _0x471a2d;}['updateViewerParameters'](){var _0x2e29f5;const _0x127261=this[_0x5c1922(0x505,0x513)],_0x54db41=_0x127261['canvas'],_0x1ab2cb={};_0x1ab2cb['x']=0x0,_0x1ab2cb['y']=0x0;const _0x121da6={};_0x121da6['x']=0x0,_0x121da6['y']=_0x54db41[_0x7871bd(0x53e,0x512)];const _0x3c2adf={};_0x3c2adf['x']=_0x54db41['clientWidth'],_0x3c2adf['y']=0x0;const _0x31f8c3={};_0x31f8c3['x']=_0x54db41[_0x5c1922(0x4bf,0x452)],_0x31f8c3['y']=_0x54db41['clientHeight'];const _0x111453=[_0x1ab2cb,_0x121da6,_0x3c2adf,_0x31f8c3];let _0x25f9e1=0xb4,_0x5d9ef1=-0xb4;function _0x7871bd(_0x3e0fca,_0x3c1c4e){return _0x459df4(_0x3c1c4e-0x530,_0x3e0fca);}let _0x1b8594=0x5a,_0x5da24e=-0x5a,_0x479719=![];for(const _0x918777 of _0x111453){const _0xc85481=_0x127261[_0x5c1922(0x500,0x4ba)]['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x918777['x'],_0x918777['y']),_0x127261[_0x7871bd(0x445,0x497)]['ellipsoid']);if(!_0xc85481){_0x479719=!![];break;}const _0x226ace=_0x127261['globe']['ellipsoid']['cartesianToCartographic'](_0xc85481),_0x58590e=Cesium$1[_0x7871bd(0x52d,0x4ef)]['toDegrees'](_0x226ace['longitude']),_0x3fd10b=Cesium$1['Math']['toDegrees'](_0x226ace['latitude']);_0x25f9e1=Math['min'](_0x25f9e1,_0x58590e),_0x5d9ef1=Math['max'](_0x5d9ef1,_0x58590e),_0x1b8594=Math[_0x5c1922(0x49d,0x518)](_0x1b8594,_0x3fd10b),_0x5da24e=Math['max'](_0x5da24e,_0x3fd10b);}function _0x5c1922(_0x3e28a4,_0xfa38a3){return _0x35d9d0(_0x3e28a4- -0x3a,_0xfa38a3);}if(!_0x479719){const _0x3b8b36=new Cesium$1[(_0x7871bd(0x4c3,0x495))](Math['max'](this['windData']['bounds']['west'],_0x25f9e1),Math[_0x7871bd(0x4f6,0x527)](this['windData']['bounds']['east'],_0x5d9ef1)),_0x2c7a53=new Cesium$1['Cartesian2'](Math['max'](this['windData'][_0x5c1922(0x449,0x3fb)][_0x5c1922(0x416,0x454)],_0x1b8594),Math['min'](this['windData']['bounds']['north'],_0x5da24e)),_0x9c189d=(_0x3b8b36['y']-_0x3b8b36['x'])*0.05,_0x110012=(_0x2c7a53['y']-_0x2c7a53['x'])*0.05;_0x3b8b36['x']=Math['max'](this['windData']['bounds'][_0x7871bd(0x46c,0x4b3)],_0x3b8b36['x']-_0x9c189d),_0x3b8b36['y']=Math['min'](this['windData']['bounds'][_0x7871bd(0x426,0x496)],_0x3b8b36['y']+_0x9c189d),_0x2c7a53['x']=Math['max'](this[_0x7871bd(0x58e,0x59e)][_0x5c1922(0x449,0x4c9)]['south'],_0x2c7a53['x']-_0x110012),_0x2c7a53['y']=Math[_0x7871bd(0x52b,0x527)](this['windData'][_0x7871bd(0x4e8,0x4d3)]['north'],_0x2c7a53['y']+_0x110012),this[_0x5c1922(0x4e3,0x4e8)][_0x5c1922(0x4ab,0x47e)]=_0x3b8b36,this[_0x7871bd(0x5e3,0x56d)][_0x5c1922(0x4fb,0x54d)]=_0x2c7a53;const _0x87562a=this['windData']['bounds']['east']-this['windData']['bounds']['west'],_0x18b792=this[_0x7871bd(0x522,0x59e)]['bounds']['north']-this['windData'][_0x5c1922(0x449,0x410)][_0x7871bd(0x4e3,0x4a0)],_0x518619=(_0x3b8b36['y']-_0x3b8b36['x'])/_0x87562a,_0xbe7366=(_0x2c7a53['y']-_0x2c7a53['x'])/_0x18b792,_0x3dc5d4=Math[_0x7871bd(0x55a,0x527)](_0x518619,_0xbe7366),_0x4eaa49=0x3e8*_0x3dc5d4;_0x4eaa49>0x0&&(this['viewerParameters']['pixelSize']=Math['max'](0x0,Math[_0x5c1922(0x49d,0x47e)](0x3e8,_0x4eaa49)));}this['viewerParameters'][_0x7871bd(0x57b,0x594)]=this['scene'][_0x5c1922(0x495,0x504)],(_0x2e29f5=this[_0x5c1922(0x4e6,0x567)])===null||_0x2e29f5===void 0x0||_0x2e29f5['applyViewerParameters'](this['viewerParameters']);}['getDataAtLonLat'](_0x29a3e2,_0x4b3f0f){const {bounds:_0xb5e480,width:_0x355ae8,height:_0x49275f,u:_0x2f23f9,v:_0x4c93da,speed:_0x319662}=this['windData'],{flipY:_0x5f4c87}=this['options'];if(_0x29a3e2<_0xb5e480[_0x4a5d15(0x1c5,0x244)]||_0x29a3e2>_0xb5e480['east']||_0x4b3f0f<_0xb5e480['south']||_0x4b3f0f>_0xb5e480['north'])return null;const _0x37163d=(_0x29a3e2-_0xb5e480[_0x4a5d15(0x1c5,0x1eb)])/(_0xb5e480['east']-_0xb5e480['west'])*(_0x355ae8-0x1);let _0x4edf6b=(_0x4b3f0f-_0xb5e480['south'])/(_0xb5e480['north']-_0xb5e480['south'])*(_0x49275f-0x1);_0x5f4c87&&(_0x4edf6b=_0x49275f-0x1-_0x4edf6b);const _0x1c34bd=Math['floor'](_0x37163d),_0x5215fa=Math['floor'](_0x4edf6b);function _0x2aff6a(_0x52f2b5,_0xe038c2){return _0x459df4(_0xe038c2-0x4c6,_0x52f2b5);}const _0x29a79d=Math[_0x2aff6a(0x4a8,0x4fd)](_0x37163d),_0x5ef180=Math[_0x2aff6a(0x4af,0x4bd)](_0x29a79d+0x1,_0x355ae8-0x1);function _0x4a5d15(_0x2b1367,_0x2d7cd4){return _0x35d9d0(_0x2b1367- -0x29e,_0x2d7cd4);}const _0x517176=Math['floor'](_0x4edf6b),_0x4a9cdd=Math['min'](_0x517176+0x1,_0x49275f-0x1),_0x3fe510=_0x37163d-_0x29a79d,_0xb77067=_0x4edf6b-_0x517176,_0x2b706e=_0x5215fa*_0x355ae8+_0x1c34bd,_0x267c3a=_0x517176*_0x355ae8+_0x29a79d,_0x1ecb8f=_0x517176*_0x355ae8+_0x5ef180,_0x573233=_0x4a9cdd*_0x355ae8+_0x29a79d,_0x432215=_0x4a9cdd*_0x355ae8+_0x5ef180,_0x449a85=_0x2f23f9['array'][_0x267c3a],_0x32dec2=_0x2f23f9['array'][_0x1ecb8f],_0x16d795=_0x2f23f9[_0x4a5d15(0x20c,0x1d3)][_0x573233],_0x480ec6=_0x2f23f9['array'][_0x432215],_0x8b3c54=(0x1-_0x3fe510)*(0x1-_0xb77067)*_0x449a85+_0x3fe510*(0x1-_0xb77067)*_0x32dec2+(0x1-_0x3fe510)*_0xb77067*_0x16d795+_0x3fe510*_0xb77067*_0x480ec6,_0x1fd02a=_0x4c93da[_0x2aff6a(0x435,0x490)][_0x267c3a],_0xf2a09e=_0x4c93da['array'][_0x1ecb8f],_0xd8db8d=_0x4c93da[_0x2aff6a(0x500,0x490)][_0x573233],_0x1fc057=_0x4c93da['array'][_0x432215],_0xe32fca=(0x1-_0x3fe510)*(0x1-_0xb77067)*_0x1fd02a+_0x3fe510*(0x1-_0xb77067)*_0xf2a09e+(0x1-_0x3fe510)*_0xb77067*_0xd8db8d+_0x3fe510*_0xb77067*_0x1fc057,_0x3a6f7e=Math['sqrt'](_0x8b3c54*_0x8b3c54+_0xe32fca*_0xe32fca),_0x4f1aa0={};_0x4f1aa0['u']=_0x2f23f9[_0x4a5d15(0x20c,0x1b1)][_0x2b706e],_0x4f1aa0['v']=_0x4c93da['array'][_0x2b706e],_0x4f1aa0['speed']=_0x319662['array'][_0x2b706e];const _0x379972={};_0x379972['u']=_0x8b3c54,_0x379972['v']=_0xe32fca,_0x379972['speed']=_0x3a6f7e;const _0x11fafe={};return _0x11fafe['original']=_0x4f1aa0,_0x11fafe['interpolated']=_0x379972,_0x11fafe;}}mars3d__namespace['LayerUtil'][_0x459df4(-0xa2,-0x66)]('wind',WindLayer),mars3d__namespace['layer'][_0x459df4(-0x6c,-0x30)]=WindLayer;class CanvasParticle{constructor(){this['lng']=null;function _0xd272bd(_0x165731,_0x2802de){return _0x35d9d0(_0x165731- -0x60f,_0x2802de);}function _0x5926fd(_0x14aa82,_0x264f82){return _0x35d9d0(_0x264f82- -0x129,_0x14aa82);}this[_0xd272bd(-0x1a6,-0x156)]=null,this['tlng']=null,this[_0xd272bd(-0xe8,-0xd4)]=null,this['age']=null,this[_0x5926fd(0x38b,0x3d3)]=null;}[_0x459df4(-0x15,-0xa)](){for(const _0x5251a9 in this){delete this[_0x5251a9];}}}class CanvasWindField{constructor(_0x1f1b38){function _0x4e9d2f(_0x6ed3ae,_0x532305){return _0x35d9d0(_0x6ed3ae-0x4b,_0x532305);}this[_0x4e9d2f(0x4b0,0x427)](_0x1f1b38);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x593e37){function _0x4a6c16(_0x3e6ae7,_0x543f31){return _0x459df4(_0x3e6ae7-0x1d4,_0x543f31);}this['_speedRate']=(0x64-(_0x593e37>0x63?0x63:_0x593e37))*0x64;function _0x14179f(_0x320abd,_0xa51ffc){return _0x35d9d0(_0x320abd-0xaf,_0xa51ffc);}this[_0x4a6c16(0x230,0x290)]=[(this[_0x4a6c16(0x150,0xf0)]-this['xmin'])/this['_speedRate'],(this['ymax']-this['ymin'])/this[_0x4a6c16(0x185,0x170)]];}get[_0x35d9d0(0x4e6,0x494)](){return this['_maxAge'];}set['maxAge'](_0x4df302){function _0x232c7a(_0x2660c4,_0x154fa5){return _0x459df4(_0x2660c4- -0x19d,_0x154fa5);}this[_0x232c7a(-0x1d5,-0x258)]=_0x4df302;}['setOptions'](_0xeb6f29){this[_0x483482(0x4a4,0x426)]=_0xeb6f29,this['maxAge']=_0xeb6f29['maxAge']||0x78,this['speedRate']=_0xeb6f29[_0x483482(0x472,0x484)]||0x32;function _0x483482(_0xc8fe04,_0x2a5e9e){return _0x459df4(_0xc8fe04-0x49b,_0x2a5e9e);}function _0x533c88(_0x354e95,_0x3954a8){return _0x459df4(_0x3954a8-0x2ad,_0x354e95);}this['particles']=[];const _0x552289=_0xeb6f29[_0x483482(0x4f6,0x534)]||0x1000;for(let _0x17664e=0x0;_0x17664e<_0x552289;_0x17664e++){const _0x41bc60=this[_0x533c88(0x271,0x278)](new CanvasParticle());this['particles']['push'](_0x41bc60);}}['setDate'](_0x4ef289){this['rows']=_0x4ef289[_0x3d8a3f(0x7,0xd)];function _0x17013b(_0x3c8ad4,_0x803a00){return _0x459df4(_0x803a00- -0x140,_0x3c8ad4);}this['cols']=_0x4ef289['cols'];function _0x3d8a3f(_0x2e7bb6,_0x102094){return _0x459df4(_0x102094- -0x58,_0x2e7bb6);}this[_0x17013b(-0x188,-0xfc)]=_0x4ef289['xmin'],this['xmax']=_0x4ef289['xmax'],this[_0x17013b(-0xd5,-0xd4)]=_0x4ef289[_0x17013b(-0x10a,-0xd4)],this['ymax']=_0x4ef289[_0x3d8a3f(-0x68,-0xb9)],this[_0x3d8a3f(-0xd7,-0x5a)]=[];const _0x1f2d45=_0x4ef289['udata'],_0x1150d8=_0x4ef289['vdata'];let _0x594906=![];_0x1f2d45[_0x3d8a3f(-0x173,-0xf7)]===this['rows']&&_0x1f2d45[0x0]['length']===this[_0x17013b(-0xfe,-0xd0)]&&(_0x594906=!![]);let _0xfe1430=0x0,_0xd8e249=null,_0x1e83af=null;for(let _0x2a4721=0x0;_0x2a4721<this['rows'];_0x2a4721++){_0xd8e249=[];for(let _0x2952e8=0x0;_0x2952e8<this['cols'];_0x2952e8++,_0xfe1430++){_0x594906?_0x1e83af=this[_0x3d8a3f(-0x84,-0xd8)](_0x1f2d45[_0x2a4721][_0x2952e8],_0x1150d8[_0x2a4721][_0x2952e8]):_0x1e83af=this[_0x17013b(-0x14b,-0x1c0)](_0x1f2d45[_0xfe1430],_0x1150d8[_0xfe1430]),_0xd8e249['push'](_0x1e83af);}this[_0x17013b(-0x174,-0x142)]['push'](_0xd8e249);}!this['options']['flipY']&&this[_0x17013b(-0x107,-0x142)]['reverse']();}['clear'](){delete this[_0x5a6a69(0xb3,0x4f)],delete this['cols'],delete this['xmin'];function _0x5a6a69(_0x48674e,_0x5c33d8){return _0x35d9d0(_0x48674e- -0x492,_0x5c33d8);}delete this['xmax'],delete this[_0x1a8112(0x1f4,0x192)];function _0x1a8112(_0x447eff,_0xb348e){return _0x459df4(_0xb348e-0x126,_0x447eff);}delete this['ymax'],delete this['grid'],delete this[_0x5a6a69(0x15,-0x2b)];}[_0x35d9d0(0x4f6,0x545)](_0x297dde,_0x3576cd){const _0x3af96e=(_0x297dde-this['xmin'])/(this[_0x1fc661(-0x174,-0x101)]-this['xmin'])*(this[_0x1fc661(0x22,-0xd)]-0x1);function _0x1fc661(_0xc758ca,_0x5b2f84){return _0x459df4(_0x5b2f84- -0x7d,_0xc758ca);}function _0x43111a(_0x288263,_0x1ebb5f){return _0x35d9d0(_0x1ebb5f- -0x186,_0x288263);}const _0x24dc6a=(this['ymax']-_0x3576cd)/(this['ymax']-this['ymin'])*(this[_0x1fc661(-0x27,-0x18)]-0x1);return[_0x3af96e,_0x24dc6a];}['getUVByXY'](_0x5b4f5b,_0x4107f2){if(_0x5b4f5b<0x0||_0x5b4f5b>=this['cols']||_0x4107f2>=this[_0x104ef6(0x568,0x4ee)])return[0x0,0x0,0x0];const _0x14c671=Math['floor'](_0x5b4f5b);function _0x104ef6(_0x253a05,_0x2611ab){return _0x35d9d0(_0x2611ab- -0x57,_0x253a05);}const _0x20133b=Math['floor'](_0x4107f2);if(_0x14c671===_0x5b4f5b&&_0x20133b===_0x4107f2)return this['grid'][_0x4107f2][_0x5b4f5b];const _0x33050e=_0x14c671+0x1,_0x265caf=_0x20133b+0x1;function _0x32b644(_0x35a15b,_0xd68719){return _0x35d9d0(_0xd68719- -0x354,_0x35a15b);}const _0x112658=this['getUVByXY'](_0x14c671,_0x20133b),_0x1532b0=this['getUVByXY'](_0x33050e,_0x20133b),_0x318c3f=this['getUVByXY'](_0x14c671,_0x265caf),_0x474279=this[_0x32b644(0x14f,0x1cf)](_0x33050e,_0x265caf);let _0x5ae5bb=null;try{_0x5ae5bb=this[_0x32b644(0xab,0x130)](_0x5b4f5b-_0x14c671,_0x4107f2-_0x20133b,_0x112658,_0x1532b0,_0x318c3f,_0x474279);}catch(_0xa60e77){console['log'](_0x5b4f5b,_0x4107f2);}return _0x5ae5bb;}['_bilinearInterpolation'](_0x1a6f83,_0x53a484,_0x2b7f9a,_0x1cd0ad,_0x2db1fd,_0x28fae4){const _0x1e190d=0x1-_0x1a6f83,_0x1fdcab=0x1-_0x53a484,_0x15d01f=_0x1e190d*_0x1fdcab,_0xe8379b=_0x1a6f83*_0x1fdcab,_0x52862a=_0x1e190d*_0x53a484,_0x49166b=_0x1a6f83*_0x53a484,_0x2ace2c=_0x2b7f9a[0x0]*_0x15d01f+_0x1cd0ad[0x0]*_0xe8379b+_0x2db1fd[0x0]*_0x52862a+_0x28fae4[0x0]*_0x49166b,_0x3ed0d8=_0x2b7f9a[0x1]*_0x15d01f+_0x1cd0ad[0x1]*_0xe8379b+_0x2db1fd[0x1]*_0x52862a+_0x28fae4[0x1]*_0x49166b;return this['_calcUV'](_0x2ace2c,_0x3ed0d8);}['_calcUV'](_0x280c3c,_0x27d51d){return[+_0x280c3c,+_0x27d51d,Math['sqrt'](_0x280c3c*_0x280c3c+_0x27d51d*_0x27d51d)];}['getUVByPoint'](_0x262a1c,_0x2b4eef){if(!this[_0x4bb8c0(0x548,0x595)](_0x262a1c,_0x2b4eef))return null;function _0x4bb8c0(_0x14a11d,_0x2fde66){return _0x35d9d0(_0x14a11d-0x64,_0x2fde66);}const _0x2b532f=this['toGridXY'](_0x262a1c,_0x2b4eef);function _0x1c1675(_0xe5cd72,_0x139457){return _0x459df4(_0x139457-0xf0,_0xe5cd72);}const _0x1a36e9=this[_0x1c1675(0x141,0x133)](_0x2b532f[0x0],_0x2b532f[0x1]);return _0x1a36e9;}['isInExtent'](_0x4009d1,_0x343aa3){function _0x2cef24(_0x45b82f,_0x5da7b0){return _0x459df4(_0x45b82f-0x2e5,_0x5da7b0);}return _0x4009d1>=this['xmin']&&_0x4009d1<=this[_0x2cef24(0x261,0x1ea)]&&_0x343aa3>=this['ymin']&&_0x343aa3<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x186460=fRandomByfloat(this[_0x41f8ba(0x561,0x5c0)],this[_0x4dc941(0x32,0x89)]),_0x233ba3=fRandomByfloat(this['ymin'],this[_0x41f8ba(0x49d,0x51b)]),_0x346654={};function _0x4dc941(_0x43a7fa,_0x5a5a1c){return _0x459df4(_0x5a5a1c-0x10d,_0x43a7fa);}function _0x41f8ba(_0x9fca44,_0x27368e){return _0x35d9d0(_0x27368e-0x9c,_0x9fca44);}return _0x346654['lat']=_0x233ba3,_0x346654['lng']=_0x186460,_0x346654;}['getParticles'](){let _0x1e7415,_0x58a6dc,_0x510bae;for(let _0x9cd07b=0x0,_0x21dd03=this['particles']['length'];_0x9cd07b<_0x21dd03;_0x9cd07b++){let _0x32a48e=this[_0x2e5e47(0x28a,0x2d8)][_0x9cd07b];_0x32a48e[_0x3efeeb(0x26c,0x2e8)]<=0x0&&(_0x32a48e=this['_randomParticle'](_0x32a48e));if(_0x32a48e[_0x2e5e47(0x386,0x33a)]>0x0){const _0x491fe7=_0x32a48e['tlng'],_0x5c4c33=_0x32a48e[_0x3efeeb(0x28a,0x215)];_0x510bae=this['getUVByPoint'](_0x491fe7,_0x5c4c33),_0x510bae?(_0x1e7415=_0x491fe7+this[_0x2e5e47(0x2ed,0x36d)][0x0]*_0x510bae[0x0],_0x58a6dc=_0x5c4c33+this['_calc_speedRate'][0x1]*_0x510bae[0x1],_0x32a48e[_0x3efeeb(0x1c4,0x245)]=_0x491fe7,_0x32a48e[_0x2e5e47(0x244,0x29a)]=_0x5c4c33,_0x32a48e['tlng']=_0x1e7415,_0x32a48e['tlat']=_0x58a6dc,_0x32a48e[_0x2e5e47(0x2c6,0x32d)]=_0x510bae[0x2],_0x32a48e[_0x3efeeb(0x26c,0x289)]--):_0x32a48e[_0x2e5e47(0x2b7,0x33a)]=0x0;}}function _0x2e5e47(_0x5893da,_0x3e176d){return _0x459df4(_0x3e176d-0x311,_0x5893da);}function _0x3efeeb(_0x3cd4b2,_0x1a6bac){return _0x459df4(_0x3cd4b2-0x243,_0x1a6bac);}return this['particles'];}[_0x459df4(-0x35,0x24)](_0x137c5a){let _0x151dff,_0x240249;for(let _0x481cf2=0x0;_0x481cf2<0x1e;_0x481cf2++){_0x151dff=this['getRandomLatLng'](),_0x240249=this['getUVByPoint'](_0x151dff[_0x5108f8(0x5e6,0x575)],_0x151dff['lat']);if(_0x240249&&_0x240249[0x2]>0x0)break;}if(!_0x240249)return _0x137c5a;const _0x574c9d=_0x151dff[_0x38851d(-0x4,-0x5a)]+this[_0x38851d(0xfb,0x81)][0x0]*_0x240249[0x0],_0x3fa547=_0x151dff['lat']+this['_calc_speedRate'][0x1]*_0x240249[0x1];_0x137c5a[_0x5108f8(0x571,0x575)]=_0x151dff[_0x38851d(-0xbd,-0x5a)],_0x137c5a[_0x38851d(-0x38,-0x52)]=_0x151dff[_0x5108f8(0x576,0x57d)];function _0x38851d(_0x53ed1c,_0x1653a4){return _0x35d9d0(_0x1653a4- -0x4bb,_0x53ed1c);}function _0x5108f8(_0xc0697c,_0x18beb4){return _0x35d9d0(_0x18beb4-0x114,_0xc0697c);}return _0x137c5a['tlng']=_0x574c9d,_0x137c5a['tlat']=_0x3fa547,_0x137c5a['age']=Math['round'](0xa+Math['random']()*this['maxAge']),_0x137c5a[_0x38851d(0x74,0x41)]=_0x240249[0x2],_0x137c5a;}['destroy'](){for(const _0x5c7da4 in this){delete this[_0x5c7da4];}}}function fRandomByfloat(_0x1efc70,_0x4847e5){function _0x4cf328(_0x5e9782,_0x7f9017){return _0x35d9d0(_0x5e9782- -0x10d,_0x7f9017);}return _0x1efc70+Math[_0x4cf328(0x359,0x30e)]()*(_0x4847e5-_0x1efc70);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x459df4(-0x5b,-0x3b)];class CanvasWindLayer extends BaseLayer{constructor(_0x3e7cf3={}){super(_0x3e7cf3),this['_setOptionsHook'](_0x3e7cf3);function _0x381005(_0x39dbcd,_0x541ab6){return _0x35d9d0(_0x39dbcd- -0xcf,_0x541ab6);}this['canvas']=null,_0x3e7cf3['colors']&&_0x3e7cf3[_0x381005(0x418,0x3a0)]&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x3e7cf3));}['_setOptionsHook'](_0x8c4742,_0x38b389){this[_0x56511e(0x3d1,0x3ab)]=0x3e8/(_0x8c4742['frameRate']||0xa),this['_pointerEvents']=this[_0x56511e(0x3aa,0x35f)]['pointerEvents']??![],this['color']=_0x8c4742[_0x56511e(0x353,0x2fd)]||_0x46a4ec(-0x12b,-0x113);function _0x46a4ec(_0x1461b8,_0x3379eb){return _0x35d9d0(_0x3379eb- -0x557,_0x1461b8);}this[_0x56511e(0x33c,0x3a0)]=_0x8c4742['lineWidth']||0x1,this['fixedHeight']=_0x8c4742['fixedHeight']??0x0,this[_0x56511e(0x371,0x363)]=_0x8c4742[_0x46a4ec(-0xfc,-0xa7)]??![];function _0x56511e(_0x2c7299,_0x3a11bd){return _0x35d9d0(_0x2c7299- -0x13f,_0x3a11bd);}this['windField']&&this[_0x56511e(0x310,0x34b)]['setOptions'](_0x8c4742);}get['layer'](){function _0x542d9a(_0x3d8161,_0x1b444c){return _0x35d9d0(_0x1b444c- -0x440,_0x3d8161);}return this[_0x542d9a(-0x19,0x39)];}get['canvasWidth'](){function _0x4357a6(_0x1f1b7e,_0x432d4d){return _0x459df4(_0x432d4d-0x67,_0x1f1b7e);}function _0x3d32b6(_0xd98841,_0x4920bd){return _0x35d9d0(_0xd98841- -0x543,_0x4920bd);}return this['_map'][_0x4357a6(0x137,0xc6)][_0x4357a6(-0x7d,0x0)]['clientWidth'];}get['canvasHeight'](){return this['_map']['scene']['canvas']['clientHeight'];}get[_0x459df4(-0x6b,-0xb1)](){return this['_pointerEvents'];}set[_0x35d9d0(0x475,0x427)](_0x57ce7f){function _0x4e4e90(_0x4d0c64,_0x4bfa7b){return _0x35d9d0(_0x4bfa7b- -0x507,_0x4d0c64);}this['_pointerEvents']=_0x57ce7f;if(!this[_0x4e4e90(-0x6d,-0x8e)])return;function _0x3854df(_0x5ae8e7,_0x3074a4){return _0x459df4(_0x3074a4-0xf5,_0x5ae8e7);}_0x57ce7f?this['canvas']['style']['pointer-events']='all':this['canvas']['style'][_0x4e4e90(-0x16,-0x9)]='none';}get[_0x459df4(0x5b,-0xf)](){function _0x3125a8(_0x4710c8,_0x50f1a1){return _0x459df4(_0x50f1a1-0x378,_0x4710c8);}function _0x253129(_0x189464,_0x4feb55){return _0x35d9d0(_0x4feb55- -0x2e8,_0x189464);}return this[_0x3125a8(0x366,0x381)][_0x253129(0x223,0x253)];}set['particlesNumber'](_0x8ac29){function _0x426875(_0x2618c8,_0x308e3c){return _0x459df4(_0x2618c8-0x21e,_0x308e3c);}this['options'][_0x426875(0x279,0x2e7)]=_0x8ac29,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x50e8dd(_0xfd2e26,_0x4b42e2){return _0x459df4(_0xfd2e26- -0x113,_0x4b42e2);}function _0x24b5f6(_0x5a0980,_0x2a6d3a){return _0x35d9d0(_0x2a6d3a- -0x3d8,_0x5a0980);}return this[_0x50e8dd(-0x10a,-0x17f)][_0x50e8dd(-0x13c,-0xce)];}set['speedRate'](_0x527c3f){function _0x2dcae9(_0x24882d,_0xd1f392){return _0x459df4(_0xd1f392- -0x19d,_0x24882d);}function _0x99eb8e(_0x366d93,_0x4c74e9){return _0x459df4(_0x4c74e9-0x23f,_0x366d93);}this['options'][_0x2dcae9(-0x243,-0x1c6)]=_0x527c3f,this[_0x99eb8e(0x1e2,0x1ae)]&&(this[_0x99eb8e(0x1e7,0x1ae)][_0x99eb8e(0x22b,0x216)]=_0x527c3f);}get['maxAge'](){return this['options']['maxAge'];}set['maxAge'](_0x34067f){function _0x5afb3d(_0x118adf,_0x436354){return _0x35d9d0(_0x436354- -0x1e3,_0x118adf);}this['options']['maxAge']=_0x34067f;function _0x252ab8(_0x46e6bd,_0x5be3ff){return _0x35d9d0(_0x46e6bd- -0x686,_0x5be3ff);}this[_0x252ab8(-0x237,-0x202)]&&(this[_0x252ab8(-0x237,-0x289)][_0x5afb3d(0x33a,0x303)]=_0x34067f);}get['data'](){function _0x229c41(_0x25f865,_0x1ac71d){return _0x35d9d0(_0x1ac71d- -0x2a3,_0x25f865);}return this[_0x229c41(0x285,0x2ab)];}set['data'](_0x157eec){function _0xb20757(_0xbcc00c,_0x3d43c2){return _0x459df4(_0x3d43c2-0x17,_0xbcc00c);}this[_0xb20757(0x49,-0x1d)](_0x157eec);}get['rectangle'](){let _0x39b996=this['windData']['xmin'],_0x292251=this[_0x5420b4(-0xce,-0x5b)]['xmax'],_0x3cbdbe=this[_0x5420b4(-0xc0,-0x5b)][_0x2eb980(0x2a5,0x2b8)],_0x5ea889=this['windData'][_0x2eb980(0x16e,0x1eb)];_0x292251>=0x167&&_0x39b996===0x0&&(_0x39b996=-0xb4,_0x292251=0xb4);_0x39b996=Math['max'](_0x39b996,-0xb4);function _0x5420b4(_0x1655e1,_0x3b1c5e){return _0x459df4(_0x3b1c5e- -0xc9,_0x1655e1);}_0x292251=Math['min'](_0x292251,0xb4),_0x3cbdbe=Math[_0x2eb980(0x1e6,0x241)](_0x3cbdbe,-0x5a);function _0x2eb980(_0x54be51,_0xf62e14){return _0x35d9d0(_0xf62e14- -0x294,_0x54be51);}return _0x5ea889=Math[_0x2eb980(0x1ff,0x243)](_0x5ea889,0x5a),Cesium[_0x5420b4(-0xe5,-0x12c)][_0x5420b4(-0x7d,-0xcc)](_0x39b996,_0x3cbdbe,_0x292251,_0x5ea889);}['_showHook'](_0x1579e8){function _0x303abc(_0x3d8664,_0x41f400){return _0x35d9d0(_0x3d8664-0x12,_0x41f400);}function _0x13186a(_0x16bb01,_0x374c7b){return _0x35d9d0(_0x16bb01- -0x121,_0x374c7b);}_0x1579e8?this[_0x303abc(0x4cd,0x4bb)]():(this[_0x13186a(0x42d,0x3cb)]&&(this['options'][_0x13186a(0x3c1,0x412)]=this['windData']),this['_removedHook']());}[_0x35d9d0(0x43c,0x420)](){function _0x3a9b4f(_0x3a197a,_0x2e6c30){return _0x459df4(_0x3a197a- -0x193,_0x2e6c30);}function _0x1b5157(_0x22fcb4,_0x3927aa){return _0x35d9d0(_0x3927aa- -0xc1,_0x22fcb4);}this[_0x3a9b4f(-0x18a,-0x15f)]['worker']?this['initWorker']():this[_0x1b5157(0x3cb,0x38e)]=new CanvasWindField(this[_0x3a9b4f(-0x18a,-0x1a6)]);}[_0x459df4(-0x25,-0x37)](){function _0x12fc51(_0x40cdf0,_0x3b8056){return _0x35d9d0(_0x3b8056- -0x67d,_0x40cdf0);}this['canvas']=this['_createCanvas']();const _0x3f513b={};_0x3f513b['willReadFrequently']=!![],this['canvasContext']=this[_0x1d55c9(-0x34,-0x1f)][_0x12fc51(-0x132,-0x1b0)]('2d',_0x3f513b),this['bindEvent']();function _0x1d55c9(_0x50929f,_0x224511){return _0x35d9d0(_0x50929f- -0x4ad,_0x224511);}this['options'][_0x1d55c9(0x35,-0x23)]&&this['setData'](this['options'][_0x12fc51(-0x15b,-0x19b)]);}['_removedHook'](){this['clear'](),this['unbindEvent']();function _0x289125(_0x572477,_0xfa9a4d){return _0x459df4(_0x572477- -0x164,_0xfa9a4d);}function _0x55e737(_0xadd627,_0x37bfec){return _0x459df4(_0x37bfec- -0xd6,_0xadd627);}this['canvas']&&(this[_0x55e737(-0x13b,-0x11a)]['container'][_0x55e737(-0xc8,-0x14e)](this['canvas']),delete this['canvas']);}['_createCanvas'](){const _0x5db8b2=mars3d__namespace['DomUtil'][_0x333e2f(0x3b9,0x407)](_0x1d790d(-0x159,-0x18a),_0x1d790d(-0x7e,-0x100),this[_0x1d790d(-0x136,-0xcf)][_0x333e2f(0x482,0x4a1)]);_0x5db8b2[_0x1d790d(-0x15c,-0x1ca)]['position']=_0x1d790d(-0x124,-0x133);function _0x1d790d(_0x52d7be,_0xaad1df){return _0x459df4(_0x52d7be- -0xf2,_0xaad1df);}_0x5db8b2[_0x1d790d(-0x15c,-0x10b)]['top']='0px',_0x5db8b2[_0x333e2f(0x3cb,0x3cb)][_0x333e2f(0x3c6,0x3f0)]='0px',_0x5db8b2['style'][_0x1d790d(-0x187,-0x135)]=this[_0x1d790d(-0x136,-0x1ba)][_0x1d790d(-0x93,-0x111)]['canvas'][_0x1d790d(-0xd9,-0xf1)]+'px';function _0x333e2f(_0x16662d,_0x18ecd8){return _0x35d9d0(_0x16662d- -0xab,_0x18ecd8);}return _0x5db8b2[_0x333e2f(0x3cb,0x38a)]['height']=this['_map'][_0x333e2f(0x494,0x417)][_0x1d790d(-0x159,-0x1b5)]['clientHeight']+'px',_0x5db8b2['style'][_0x333e2f(0x3ca,0x3fd)]=this['_pointerEvents']?_0x333e2f(0x47f,0x419):'none',_0x5db8b2[_0x1d790d(-0x15c,-0xf5)][_0x333e2f(0x423,0x47f)]=this['options']['zIndex']??0x9,_0x5db8b2['width']=this[_0x1d790d(-0x136,-0x162)]['scene']['canvas'][_0x1d790d(-0xd9,-0xf8)],_0x5db8b2[_0x333e2f(0x40b,0x3cf)]=this['_map']['scene']['canvas'][_0x333e2f(0x417,0x3d8)],_0x5db8b2;}['resize'](){function _0x2f5876(_0x46f461,_0x32853f){return _0x35d9d0(_0x32853f-0x8,_0x46f461);}function _0x27564a(_0x1108d3,_0x4e1d5e){return _0x459df4(_0x4e1d5e-0x309,_0x1108d3);}this['canvas']&&(this['canvas'][_0x27564a(0x2e4,0x29f)]['width']=this['_map']['scene'][_0x27564a(0x228,0x2a2)]['clientWidth']+'px',this[_0x27564a(0x256,0x2a2)][_0x27564a(0x2e7,0x29f)][_0x2f5876(0x4a9,0x4be)]=this[_0x27564a(0x2cf,0x2c5)][_0x27564a(0x2e9,0x368)]['canvas']['clientHeight']+'px',this['canvas']['width']=this['_map'][_0x27564a(0x344,0x368)]['canvas'][_0x2f5876(0x4c1,0x501)],this[_0x27564a(0x22b,0x2a2)]['height']=this['_map'][_0x2f5876(0x5ce,0x547)][_0x2f5876(0x481,0x481)][_0x2f5876(0x528,0x4ca)]);}['bindEvent'](){const _0x5ca26e=this;let _0x2f09ce=Date[_0x47df9b(0x37c,0x2fd)]();(function _0x32ae9c(){if(_0x5ca26e[_0x18cfbc(0x409,0x472)])return;function _0x107531(_0x3bd0cb,_0x13f28e){return _0x47df9b(_0x13f28e,_0x3bd0cb-0x223);}function _0x18cfbc(_0x51cb5e,_0x26f441){return _0x47df9b(_0x26f441,_0x51cb5e-0x77);}_0x5ca26e[_0x107531(0x551,0x4ce)]=window[_0x107531(0x4cc,0x466)](_0x32ae9c);if(_0x5ca26e[_0x107531(0x4e0,0x470)]&&_0x5ca26e[_0x18cfbc(0x32c,0x35c)]){const _0x509169=Date['now'](),_0xa5e0db=_0x509169-_0x2f09ce;_0xa5e0db>_0x5ca26e['frameTime']&&(_0x2f09ce=_0x509169-_0xa5e0db%_0x5ca26e[_0x107531(0x599,0x578)],_0x5ca26e['update']());}}(),window['addEventListener'](_0x46f037(0x1cc,0x1c9),this[_0x46f037(0x19c,0x1c9)][_0x47df9b(0x37c,0x398)](this),![]));function _0x46f037(_0x2c0c80,_0x69262e){return _0x459df4(_0x69262e-0x21c,_0x2c0c80);}this[_0x46f037(0x163,0x1ca)]=![],this['mouse_move']=![];function _0x47df9b(_0x4e5bce,_0x46baca){return _0x35d9d0(_0x46baca- -0x19a,_0x4e5bce);}this[_0x46f037(0x1b0,0x225)]['mouseHidden']&&(this[_0x47df9b(0x294,0x302)]['on'](mars3d__namespace['EventType'][_0x46f037(0x1ea,0x200)],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace[_0x47df9b(0x25d,0x2e8)][_0x46f037(0x234,0x252)],this[_0x46f037(0x279,0x283)],this),this[_0x47df9b(0x2d6,0x302)]['on'](mars3d__namespace[_0x46f037(0x191,0x1be)]['mouseUp'],this[_0x47df9b(0x26a,0x2d2)],this));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']),delete this[_0x329159(0x200,0x250)];function _0x329159(_0x319471,_0xaf4582){return _0x35d9d0(_0x319471- -0x2c8,_0xaf4582);}function _0x6c2bd9(_0x5dfa68,_0x2b2ad8){return _0x35d9d0(_0x5dfa68- -0x140,_0x2b2ad8);}window[_0x329159(0x1be,0x22c)]('resize',this['resize']),this['options']['mouseHidden']&&(this[_0x6c2bd9(0x35c,0x2fa)]['off'](mars3d__namespace['EventType']['wheel'],this[_0x6c2bd9(0x363,0x3d1)],this),this['_map']['off'](mars3d__namespace[_0x6c2bd9(0x342,0x337)]['mouseDown'],this[_0x6c2bd9(0x407,0x44d)],this),this[_0x329159(0x1d4,0x1b5)]['off'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this[_0x6c2bd9(0x35c,0x32b)][_0x329159(0x1ab,0x22c)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x46f708){function _0x363da0(_0x2c4587,_0x1c719e){return _0x35d9d0(_0x2c4587- -0x47e,_0x1c719e);}clearTimeout(this[_0x2295a1(0x1e,0x3c)]);if(!this[_0x363da0(-0x27,-0x82)]||!this[_0x363da0(-0x5,-0x88)])return;this['canvas'][_0x2295a1(-0x50,-0x4f)][_0x363da0(0xd3,0x67)]='hidden';function _0x2295a1(_0x20b229,_0x2ff087){return _0x459df4(_0x2ff087-0x1b,_0x20b229);}this['refreshTimer']=setTimeout(()=>{function _0x3fc0ac(_0x2015a8,_0x242506){return _0x2295a1(_0x2015a8,_0x242506-0xd1);}if(!this['show'])return;this['redraw']();function _0x5900f9(_0x395443,_0x3c61f5){return _0x2295a1(_0x395443,_0x3c61f5-0x1ec);}this[_0x3fc0ac(0xdb,0x85)]['style'][_0x5900f9(0x237,0x278)]='visible';},0xc8);}['_onMouseDownEvent'](_0x1aa083){this['mouse_down']=!![],this['_map'][_0x46722e(0x29d,0x273)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x46722e(_0x448cbc,_0x57b1a1){return _0x35d9d0(_0x448cbc- -0x1d6,_0x57b1a1);}function _0x2202b4(_0x5addff,_0x440b97){return _0x459df4(_0x440b97-0x463,_0x5addff);}this[_0x46722e(0x2c6,0x297)]['on'](mars3d__namespace[_0x46722e(0x2ac,0x2a9)]['mouseMove'],this['_onMouseMoveEvent'],this);}[_0x35d9d0(0x44a,0x42b)](_0x3d4727){if(!this[_0x444920(0x564,0x508)]||!this[_0x58a342(0x212,0x232)])return;function _0x58a342(_0x326abd,_0x277c0c){return _0x459df4(_0x277c0c-0x299,_0x326abd);}function _0x444920(_0x4cb73b,_0x3f9311){return _0x35d9d0(_0x4cb73b-0x10d,_0x3f9311);}this[_0x58a342(0x230,0x247)]&&(this[_0x444920(0x586,0x57e)][_0x58a342(0x230,0x22f)]['visibility']=_0x444920(0x54d,0x545),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x317e69){if(!this['show']||!this[_0xc58733(-0xac,-0x31)])return;this['_map']['off'](mars3d__namespace['EventType'][_0x413af0(0x496,0x4e1)],this['_onMouseMoveEvent'],this);function _0xc58733(_0x3b5097,_0x468f57){return _0x35d9d0(_0x468f57- -0x4aa,_0x3b5097);}this['mouse_down']&&this['mouse_move']&&this[_0xc58733(0x5c,0x32)]();this['canvas'][_0xc58733(0x6,-0x34)]['visibility']=_0x413af0(0x4d7,0x543);function _0x413af0(_0x5ddea2,_0x2f0431){return _0x459df4(_0x5ddea2-0x488,_0x2f0431);}this[_0xc58733(0x5d,-0x1c)]=![],this['mouse_move']=![];}[_0x35d9d0(0x4ac,0x4a9)](_0xceaaa){this[_0x16e63a(0x463,0x42a)]();function _0x37bd69(_0x52a806,_0x3a5b0d){return _0x459df4(_0x52a806-0x4f5,_0x3a5b0d);}function _0x16e63a(_0x7b78ae,_0x52ef2b){return _0x35d9d0(_0x7b78ae- -0xb7,_0x52ef2b);}this['windData']=_0xceaaa,this['windField']['setDate'](_0xceaaa),this[_0x16e63a(0x425,0x439)]();}['redraw'](){if(!this['show'])return;this['windField']['setOptions'](this['options']),this['update']();}[_0x35d9d0(0x53e,0x5a9)](){function _0x65ca43(_0x102751,_0xbc6e9f){return _0x35d9d0(_0xbc6e9f- -0x4d8,_0x102751);}if(this[_0xea41a9(0x29f,0x325)])return;this['_updateIng']=!![];function _0xea41a9(_0x2abccb,_0x34feb7){return _0x35d9d0(_0x2abccb- -0x279,_0x34feb7);}if(this['worker'])this['windField'][_0xea41a9(0x2c5,0x34f)]();else{const _0x56d9a7=this['windField']['getParticles']();this['_drawLines'](_0x56d9a7);}this['_updateIng']=![];}['_drawLines'](_0x10cf1b){this['_canvasParticles']=_0x10cf1b,this['canvasContext']['globalCompositeOperation']='destination-in';function _0x4d860d(_0x397ba5,_0x5287f8){return _0x459df4(_0x397ba5-0x601,_0x5287f8);}this['canvasContext'][_0x481570(0x296,0x25c)](0x0,0x0,this['canvasWidth'],this[_0x4d860d(0x621,0x691)]),this[_0x481570(0x1ed,0x1d6)]['globalCompositeOperation']='lighter',this[_0x481570(0x1ed,0x1bc)]['globalAlpha']=0.9;const _0x33ddea=this[_0x4d860d(0x5bd,0x577)]['scene']['mode']!==Cesium['SceneMode'][_0x481570(0x1a9,0x131)],_0x3cea1b=this[_0x4d860d(0x5d6,0x641)]*0.25;function _0x481570(_0x3f431f,_0x45383b){return _0x459df4(_0x3f431f-0x234,_0x45383b);}if(this[_0x481570(0x1ae,0x149)])for(let _0x442206=0x0,_0x3ccb41=_0x10cf1b['length'];_0x442206<_0x3ccb41;_0x442206++){const _0x15634b=_0x10cf1b[_0x442206],_0x3405ea=this[_0x4d860d(0x5f9,0x680)](_0x15634b,_0x15634b[_0x4d860d(0x582,0x5bd)],_0x15634b['lat'],_0x15634b['alt']),_0x4285d4=this['_tomap'](_0x15634b,_0x15634b[_0x481570(0x27c,0x292)],_0x15634b[_0x4d860d(0x648,0x63b)],_0x15634b[_0x481570(0x196,0x156)]);if(!_0x3405ea||!_0x4285d4)continue;if(_0x33ddea&&Math['abs'](_0x3405ea[0x0]-_0x4285d4[0x0])>=_0x3cea1b)continue;this['canvasContext'][_0x4d860d(0x667,0x65a)](),this[_0x4d860d(0x5ba,0x5d6)]['lineWidth']=this[_0x4d860d(0x59c,0x511)],this['canvasContext']['strokeStyle']=this[_0x481570(0x1ae,0x193)][_0x4d860d(0x615,0x678)](_0x15634b['speed']),this[_0x4d860d(0x5ba,0x53c)]['moveTo'](_0x3405ea[0x0],_0x3405ea[0x1]),this[_0x481570(0x1ed,0x167)]['lineTo'](_0x4285d4[0x0],_0x4285d4[0x1]),this[_0x481570(0x1ed,0x1d4)][_0x481570(0x262,0x27f)]();}else{this['canvasContext'][_0x4d860d(0x667,0x5ff)](),this['canvasContext'][_0x481570(0x1cf,0x19f)]=this[_0x481570(0x1cf,0x256)],this[_0x481570(0x1ed,0x216)]['strokeStyle']=this[_0x4d860d(0x5b3,0x54e)];for(let _0x57c6ec=0x0,_0x379982=_0x10cf1b['length'];_0x57c6ec<_0x379982;_0x57c6ec++){const _0x295645=_0x10cf1b[_0x57c6ec],_0x2e8f07=this['_tomap'](_0x295645,_0x295645['lng'],_0x295645['lat'],_0x295645[_0x481570(0x203,0x250)]),_0x5babb1=this[_0x481570(0x22c,0x296)](_0x295645,_0x295645[_0x481570(0x27c,0x2d4)],_0x295645['tlat'],_0x295645[_0x481570(0x196,0x119)]);if(!_0x2e8f07||!_0x5babb1)continue;if(_0x33ddea&&Math[_0x4d860d(0x5be,0x622)](_0x2e8f07[0x0]-_0x5babb1[0x0])>=_0x3cea1b)continue;this['canvasContext'][_0x481570(0x27f,0x244)](_0x2e8f07[0x0],_0x2e8f07[0x1]),this['canvasContext'][_0x4d860d(0x5f1,0x603)](_0x5babb1[0x0],_0x5babb1[0x1]);}this['canvasContext']['stroke']();}}[_0x35d9d0(0x4d8,0x4a1)](_0xf9a9ee,_0x4ee1a3,_0x385bcd,_0x19fc0a){function _0x83e325(_0x15967a,_0x2ffd2d){return _0x35d9d0(_0x15967a-0x120,_0x2ffd2d);}function _0x55e5e2(_0x1435f5,_0x55602d){return _0x35d9d0(_0x55602d- -0x4c7,_0x1435f5);}const _0x4776b5=Cesium['Cartesian3']['fromDegrees'](_0x4ee1a3,_0x385bcd,_0x19fc0a??this[_0x83e325(0x5ea,0x641)]),_0x287412=this['_map']['scene'];if(_0x287412['mode']===Cesium[_0x55e5e2(0xe6,0x84)][_0x55e5e2(-0xc3,-0x72)]){const _0x2b9048=new Cesium[(_0x83e325(0x58a,0x5c6))](_0x287412['globe'][_0x55e5e2(0xbf,0x4e)],_0x287412['camera'][_0x83e325(0x612,0x5c8)]),_0x4c8722=_0x2b9048['isPointVisible'](_0x4776b5);if(!_0x4c8722)return _0xf9a9ee[_0x83e325(0x629,0x6aa)]=0x0,null;}const _0x26ca63=mars3d__namespace['PointTrans']['toWindowCoordinates'](this['_map']['scene'],_0x4776b5);return _0x26ca63?[_0x26ca63['x'],_0x26ca63['y']]:null;}['clear'](){this[_0x5c09e2(0x503,0x502)][_0x5c09e2(0x540,0x5cd)]();function _0x5c09e2(_0x369804,_0x3e3f62){return _0x459df4(_0x3e3f62-0x593,_0x369804);}function _0x4600b1(_0x77d25c,_0x2e64f3){return _0x459df4(_0x2e64f3-0x429,_0x77d25c);}delete this['windData'];}['initWorker'](){function _0x4848be(_0x1c7265,_0x1fb682){return _0x35d9d0(_0x1fb682- -0x6b,_0x1c7265);}this[_0x4848be(0x3ba,0x435)]=new Worker(this['options'][_0x4848be(0x48b,0x435)]);function _0x4d902b(_0x298393,_0x113f81){return _0x35d9d0(_0x113f81- -0x466,_0x298393);}this[_0x4848be(0x3fe,0x435)]['onmessage']=_0x347e2a=>{function _0x2bb248(_0x7acb6,_0x5efed6){return _0x4848be(_0x7acb6,_0x5efed6- -0x230);}function _0x4e7cc3(_0x2310e6,_0x699143){return _0x4848be(_0x699143,_0x2310e6- -0x4d);}this['_drawLines'](_0x347e2a[_0x2bb248(0x2a6,0x247)][_0x4e7cc3(0x3ef,0x42d)]),this['_updateIng2']=![];},this['windField']={'init':_0x4802e8=>{function _0x37539a(_0x1bf485,_0x4dfa60){return _0x4d902b(_0x1bf485,_0x4dfa60-0x2a2);}function _0x4402c3(_0x372d67,_0x53d70d){return _0x4d902b(_0x372d67,_0x53d70d-0x165);}const _0x2d1df2={};_0x2d1df2[_0x4402c3(0x1d0,0x212)]='init',_0x2d1df2['options']=_0x4802e8,this[_0x4402c3(0x227,0x19f)]['postMessage'](_0x2d1df2);},'setOptions':_0x3955bd=>{const _0x474b8e={};_0x474b8e['type']='setOptions',_0x474b8e['options']=_0x3955bd,this['worker']['postMessage'](_0x474b8e);},'setDate':_0x42b0b3=>{const _0x1a615b={};function _0x3115d6(_0x3776aa,_0x27842e){return _0x4848be(_0x27842e,_0x3776aa- -0x297);}_0x1a615b['type']=_0x37e49a(0x453,0x4a6);function _0x37e49a(_0x1a52d1,_0x3041cf){return _0x4d902b(_0x3041cf,_0x1a52d1-0x3f0);}_0x1a615b['data']=_0x42b0b3,this['worker'][_0x37e49a(0x469,0x433)](_0x1a615b);},'update':()=>{if(this['_updateIng2'])return;function _0x34aac1(_0x5df369,_0x450a94){return _0x4848be(_0x450a94,_0x5df369- -0x3e9);}this['_updateIng2']=!![];const _0x58cb99={};_0x58cb99['type']=_0x34aac1(0xea,0x76),this['worker']['postMessage'](_0x58cb99);},'clear':()=>{const _0x314576={};_0x314576['type']='clear',this['worker']['postMessage'](_0x314576);}},this['windField']['init'](this['options']);}}mars3d__namespace['LayerUtil']['register'](_0x35d9d0(0x505,0x52e),CanvasWindLayer),mars3d__namespace[_0x35d9d0(0x54f,0x54d)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x459df4(0x45,0xca)]=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports[_0x35d9d0(0x525,0x53b)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x35d9d0(0x474,0x477)]=WindLayer,exports['WindUtil']=WindUtil;const _0x1817fc={};_0x1817fc['value']=!![],Object['defineProperty'](exports,'__esModule',_0x1817fc);
}));
