/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.5
 * 编译日期：2024-10-25 09:14
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x33c99e,_0x434c51){function _0x97097b(_0xc4191d,_0x13d548){return _0x5386(_0xc4191d- -0x2ed,_0x13d548);}function _0x3a522e(_0x49c0c7,_0x3ec1a9){return _0x5386(_0x3ec1a9-0x1aa,_0x49c0c7);}const _0x5de7c0=_0x33c99e();while(!![]){try{const _0x57be7b=-parseInt(_0x97097b(-0x24f,-0x287))/0x1*(-parseInt(_0x97097b(-0x1d6,-0x191))/0x2)+-parseInt(_0x3a522e(0x217,0x2ac))/0x3*(parseInt(_0x3a522e(0x1d0,0x237))/0x4)+parseInt(_0x3a522e(0x35a,0x341))/0x5*(parseInt(_0x97097b(-0x1cf,-0x24e))/0x6)+-parseInt(_0x97097b(-0x1d0,-0x251))/0x7*(-parseInt(_0x97097b(-0x19a,-0x1f1))/0x8)+-parseInt(_0x3a522e(0x246,0x222))/0x9*(-parseInt(_0x3a522e(0x2c1,0x306))/0xa)+parseInt(_0x3a522e(0x2c6,0x2b3))/0xb*(-parseInt(_0x97097b(-0x27b,-0x2d6))/0xc)+-parseInt(_0x3a522e(0x233,0x235))/0xd;if(_0x57be7b===_0x434c51)break;else _0x5de7c0['push'](_0x5de7c0['shift']());}catch(_0x2b3bf3){_0x5de7c0['push'](_0x5de7c0['shift']());}}}(_0x32a2,0x5ad9c));function _interopNamespace(_0x5473a6){if(_0x5473a6&&_0x5473a6['__esModule'])return _0x5473a6;function _0x564819(_0x2d422a,_0x4a9bc5){return _0x5386(_0x4a9bc5-0x1fe,_0x2d422a);}var _0x26c83a=Object[_0x51a1e0(-0x81,-0x5)](null);_0x5473a6&&Object['keys'](_0x5473a6)['forEach'](function(_0x18dfe3){function _0x48518e(_0x3d1da5,_0x5b52f4){return _0x51a1e0(_0x3d1da5- -0x160,_0x5b52f4);}if(_0x18dfe3!=='default'){var _0x5e3a07=Object['getOwnPropertyDescriptor'](_0x5473a6,_0x18dfe3);Object['defineProperty'](_0x26c83a,_0x18dfe3,_0x5e3a07[_0x48518e(-0x147,-0xed)]?_0x5e3a07:{'enumerable':!![],'get':function(){return _0x5473a6[_0x18dfe3];}});}});_0x26c83a[_0x564819(0x276,0x2b1)]=_0x5473a6;function _0x51a1e0(_0x3c685b,_0x4c76e3){return _0x5386(_0x3c685b- -0x107,_0x4c76e3);}return _0x26c83a;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0xb96db7,_0x2eadf8){function _0x28d7ae(_0x38ea0e,_0x3984fa){return _0x5386(_0x38ea0e- -0x18f,_0x3984fa);}const _0xb88a40=_0xb96db7*Math['cos'](Cesium$7[_0x28d7ae(-0x38,0x50)]['toRadians'](_0x2eadf8));return _0xb88a40;}function getV(_0x4b0957,_0x67ac13){function _0x3bc5d(_0x4c4b8b,_0x357ff1){return _0x5386(_0x4c4b8b-0x374,_0x357ff1);}const _0x5304f3=_0x4b0957*Math['sin'](Cesium$7[_0x3bc5d(0x4cb,0x480)]['toRadians'](_0x67ac13));return _0x5304f3;}function getSpeed(_0x3a3000,_0x4b5a50){function _0x12d90d(_0x4c0ecf,_0x4c0138){return _0x5386(_0x4c0ecf- -0x2d2,_0x4c0138);}const _0x303725=Math[_0x12d90d(-0x203,-0x23b)](Math['pow'](_0x3a3000,0x2)+Math[_0x12d90d(-0x1a1,-0x1dd)](_0x4b5a50,0x2));function _0x2aa407(_0x1a51c6,_0x50ff69){return _0x5386(_0x1a51c6-0xa9,_0x50ff69);}return _0x303725;}function getDirection(_0x38a055,_0x10bdc7){function _0x1cea9a(_0x52db21,_0x1b5294){return _0x5386(_0x52db21-0x17,_0x1b5294);}let _0x155f4d=Cesium$7[_0x1cea9a(0x16e,0x1f6)]['toDegrees'](Math['atan2'](_0x10bdc7,_0x38a055));return _0x155f4d+=_0x155f4d<0x0?0x168:0x0,_0x155f4d;}const _0x7610a={};_0x7610a[_0x2c1188(0x4be,0x522)]=null,_0x7610a[_0x2c1188(0x56e,0x5fe)]=getU,_0x7610a['getV']=getV,_0x7610a['getSpeed']=getSpeed,_0x7610a['getDirection']=getDirection;function _0x5386(_0x555cd1,_0x4c4216){const _0x32a238=_0x32a2();return _0x5386=function(_0x538698,_0x4e661c){_0x538698=_0x538698-0x72;let _0x4d62ec=_0x32a238[_0x538698];return _0x4d62ec;},_0x5386(_0x555cd1,_0x4c4216);}var WindUtil=_0x7610a;const Cesium$6=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x25f3d3){this['commandType']=_0x25f3d3[_0x5e8a8b(0x1e2,0x1e5)],this[_0x11ed9e(-0xa5,-0x93)]=_0x25f3d3[_0x11ed9e(-0x10c,-0x93)],this[_0x5e8a8b(0x1d2,0x1fe)]=_0x25f3d3[_0x11ed9e(-0x1b,-0x99)],this['primitiveType']=_0x25f3d3['primitiveType'],this['uniformMap']=_0x25f3d3['uniformMap'],this['vertexShaderSource']=_0x25f3d3[_0x5e8a8b(0x1d7,0x147)],this[_0x11ed9e(-0xae,-0x8b)]=_0x25f3d3[_0x5e8a8b(0x1e0,0x1b0)];function _0x5e8a8b(_0x101ae9,_0x1d89cf){return _0x2c1188(_0x101ae9- -0x37c,_0x1d89cf);}this['rawRenderState']=_0x25f3d3[_0x11ed9e(-0x127,-0x148)],this[_0x5e8a8b(0x115,0x1a9)]=_0x25f3d3[_0x5e8a8b(0x115,0xe9)],this['outputTexture']=_0x25f3d3[_0x5e8a8b(0xc6,0x56)],this['autoClear']=_0x25f3d3['autoClear']??![],this['preExecute']=_0x25f3d3[_0x5e8a8b(0x185,0x172)],this['show']=!![],this[_0x5e8a8b(0x1ea,0x25b)]=undefined;function _0x11ed9e(_0x4adda9,_0x2e9e0c){return _0x508321(_0x4adda9,_0x2e9e0c- -0x497);}this['clearCommand']=undefined,this['autoClear']&&(this['clearCommand']=new Cesium$6['ClearCommand']({'color':new Cesium$6['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x5e8a8b(0x115,0xe0)],'pass':Cesium$6['Pass'][_0x11ed9e(-0xeb,-0xfa)]}));}['createCommand'](_0x5b90f9){function _0x45b663(_0x32f041,_0x9bcd2){return _0x508321(_0x32f041,_0x9bcd2- -0x172);}function _0x529694(_0x139578,_0x7b31ec){return _0x508321(_0x139578,_0x7b31ec- -0x1cd);}switch(this['commandType']){case'Draw':{const _0x22f058=Cesium$6['VertexArray'][_0x529694(0xe9,0x15b)]({'context':_0x5b90f9,'geometry':this['geometry'],'attributeLocations':this[_0x529694(0x217,0x231)],'bufferUsage':Cesium$6['BufferUsage'][_0x45b663(0x257,0x22c)]}),_0x2331c1={};_0x2331c1[_0x529694(0x2a5,0x254)]=_0x5b90f9,_0x2331c1['attributeLocations']=this[_0x45b663(0x22a,0x28c)],_0x2331c1['vertexShaderSource']=this['vertexShaderSource'],_0x2331c1['fragmentShaderSource']=this[_0x529694(0x2b2,0x23f)];const _0x15c7d9=Cesium$6[_0x529694(0x200,0x1ab)][_0x529694(0x1e1,0x1c8)](_0x2331c1),_0x2c7d36=Cesium$6[_0x45b663(0x25a,0x294)]['fromCache'](this[_0x529694(0x17f,0x182)]);return new Cesium$6[(_0x529694(0x22f,0x215))]({'owner':this,'vertexArray':_0x22f058,'primitiveType':this['primitiveType'],'uniformMap':this[_0x529694(0x240,0x1e8)],'modelMatrix':Cesium$6['Matrix4']['IDENTITY'],'shaderProgram':_0x15c7d9,'framebuffer':this['framebuffer'],'renderState':_0x2c7d36,'pass':Cesium$6[_0x529694(0x111,0x188)]['OPAQUE']});}case _0x529694(0x17a,0x213):{const _0x57b185={};return _0x57b185['owner']=this,_0x57b185['fragmentShaderSource']=this[_0x45b663(0x209,0x29a)],_0x57b185['uniformMap']=this[_0x529694(0x15f,0x1e8)],_0x57b185['outputTexture']=this['outputTexture'],_0x57b185['persists']=!![],new Cesium$6[(_0x529694(0x1e9,0x20c))](_0x57b185);}}}[_0x508321(0x3b9,0x3f9)](_0x522b63,_0x47ee31){this['geometry']=_0x47ee31;function _0x1f4100(_0x48c881,_0x20e0af){return _0x2c1188(_0x48c881- -0x36e,_0x20e0af);}function _0x3e713b(_0x4b09cf,_0x4c707f){return _0x508321(_0x4b09cf,_0x4c707f- -0x617);}const _0x398cfd=Cesium$6[_0x1f4100(0x114,0x10d)]['fromGeometry']({'context':_0x522b63,'geometry':this['geometry'],'attributeLocations':this[_0x3e713b(-0x2b2,-0x219)],'bufferUsage':Cesium$6['BufferUsage'][_0x3e713b(-0x223,-0x279)]});this['commandToExecute']['vertexArray']=_0x398cfd;}[_0x2c1188(0x52b,0x502)](_0x4ee5b8){function _0xb818c9(_0x5125bf,_0x4bce3a){return _0x2c1188(_0x4bce3a- -0x529,_0x5125bf);}if(!this['show'])return;function _0x5e0124(_0x4a663d,_0x3d2b5e){return _0x2c1188(_0x3d2b5e-0x2,_0x4a663d);}if(_0x4ee5b8[_0x5e0124(0x410,0x498)]!==Cesium$6['SceneMode']['SCENE3D'])return;!Cesium$6['defined'](this['commandToExecute'])&&(this[_0x5e0124(0x54e,0x568)]=this['createCommand'](_0x4ee5b8['context'])),Cesium$6[_0x5e0124(0x4d6,0x48a)](this['preExecute'])&&this[_0x5e0124(0x494,0x503)](),Cesium$6['defined'](this[_0x5e0124(0x506,0x4bc)])&&_0x4ee5b8[_0x5e0124(0x5ef,0x56e)]['push'](this[_0xb818c9(-0x73,-0x6f)]),_0x4ee5b8[_0x5e0124(0x582,0x56e)]['push'](this['commandToExecute']);}[_0x2c1188(0x4df,0x51b)](){return![];}[_0x508321(0x393,0x318)](){if(this['clearCommand']){var _0xce6be9,_0x1dc7a4;(_0xce6be9=this['clearCommand'])!==null&&_0xce6be9!==void 0x0&&_0xce6be9['vertexArray']&&this[_0xb188e9(-0xd7,-0x142)][_0xb188e9(-0xd8,-0xab)][_0xb188e9(-0x129,-0x150)](),(_0x1dc7a4=this['clearCommand'])!==null&&_0x1dc7a4!==void 0x0&&_0x1dc7a4[_0x538048(0x15d,0xf1)]&&this['clearCommand']['shaderProgram'][_0xb188e9(-0x129,-0xc7)](),delete this['clearCommand'];}this['commandToExecute']&&(this['commandToExecute']['vertexArray']&&this['commandToExecute'][_0x538048(0x136,0x15e)][_0x538048(0x74,0x10d)](),this['commandToExecute']['shaderProgram']&&this['commandToExecute']['shaderProgram']['destroy'](),delete this[_0x538048(0x1b7,0x20b)]);function _0x538048(_0x3de06a,_0x5a9c2b){return _0x508321(_0x3de06a,_0x5a9c2b- -0x20b);}function _0xb188e9(_0xf0e6d9,_0x3213f4){return _0x2c1188(_0xf0e6d9- -0x591,_0x3213f4);}return Cesium$6['destroyObject'](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0x1007ef=function(){const _0xdb52a=new Cesium$5[(_0x54b5c6(0xc8,0xe4))]({'attributes':new Cesium$5['GeometryAttributes']({'position':new Cesium$5[(_0x154660(0x1be,0x18f))]({'componentDatatype':Cesium$5[_0x54b5c6(0x89,0x2f)]['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5[(_0x154660(0x1be,0x257))]({'componentDatatype':Cesium$5[_0x154660(0x1dc,0x20a)][_0x54b5c6(-0x7,0x58)],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});function _0x54b5c6(_0x4fb4b1,_0x46f744){return _0x5386(_0x46f744- -0x72,_0x4fb4b1);}function _0x154660(_0x19840c,_0x4a27e0){return _0x5386(_0x19840c-0x13b,_0x4a27e0);}return _0xdb52a;},_0x307a0e=function(_0x1a5703,_0x544a55){if(Cesium$5['defined'](_0x544a55)){const _0x2a78cc={};_0x2a78cc[_0xfa6d65(0x1db,0x1b2)]=_0x544a55,_0x1a5703['source']=_0x2a78cc;}function _0x3d80fa(_0x1be9db,_0x3504f7){return _0x5386(_0x3504f7- -0x1d7,_0x1be9db);}function _0xfa6d65(_0x957d38,_0x1495ce){return _0x5386(_0x1495ce-0xeb,_0x957d38);}const _0x53c05b=new Cesium$5[(_0xfa6d65(0x25b,0x1d1))](_0x1a5703);return _0x53c05b;};function _0x2893bb(_0x297836,_0x44aff9){return _0x2c1188(_0x44aff9- -0x1ed,_0x297836);}const _0x589a24=function(_0x455daf,_0x4f818f,_0x348836){const _0x47699f={};_0x47699f['context']=_0x455daf,_0x47699f['colorTextures']=[_0x4f818f],_0x47699f['depthTexture']=_0x348836;const _0xbe145=new Cesium$5['Framebuffer'](_0x47699f);return _0xbe145;},_0x277670=function(_0x581b36){const _0x469fe5=!![],_0x49b64e=![],_0x364146={};_0x364146[_0x4000d3(-0x108,-0x163)]=_0x581b36['viewport'],_0x364146[_0xdcd1b9(0xe3,0x16e)]=_0x581b36['depthTest'];function _0x4000d3(_0x453ac9,_0x23189f){return _0x5386(_0x23189f- -0x205,_0x453ac9);}_0x364146['depthMask']=_0x581b36['depthMask'],_0x364146[_0x4000d3(-0xbc,-0xab)]=_0x581b36['blending'];const _0x315af6=_0x364146;function _0xdcd1b9(_0x161308,_0x354ea7){return _0x5386(_0x161308- -0x25,_0x354ea7);}const _0x4a7c3e=Cesium$5['Appearance']['getDefaultRenderState'](_0x469fe5,_0x49b64e,_0x315af6);return _0x4a7c3e;},_0x525d3e=function(_0x535178){const _0x3291e1={},_0x2e5d73=Cesium$5['Math']['mod'](_0x535178[_0x4df372(-0x9c,-0x34)],Cesium$5[_0x360618(-0x291,-0x22a)]['TWO_PI']),_0x1d6e07=Cesium$5[_0x360618(-0x236,-0x22a)]['mod'](_0x535178[_0x360618(-0x204,-0x288)],Cesium$5['Math'][_0x4df372(-0x28,-0x89)]),_0x38c54b=_0x535178['width'];let _0x2c019b,_0x47b810;_0x38c54b>Cesium$5['Math']['THREE_PI_OVER_TWO']?(_0x2c019b=0x0,_0x47b810=Cesium$5['Math']['TWO_PI']):_0x1d6e07-_0x2e5d73<_0x38c54b?(_0x2c019b=_0x2e5d73,_0x47b810=_0x2e5d73+_0x38c54b):(_0x2c019b=_0x2e5d73,_0x47b810=_0x1d6e07);_0x3291e1['lon']={'min':Cesium$5['Math']['toDegrees'](_0x2c019b),'max':Cesium$5[_0x4df372(-0x82,-0xf)][_0x4df372(-0x82,-0x90)](_0x47b810)};const _0x3116de=_0x535178['south'],_0x31f71b=_0x535178['north'];function _0x360618(_0x1905d8,_0x1dd2b4){return _0x5386(_0x1dd2b4- -0x381,_0x1905d8);}function _0x4df372(_0x37c4c7,_0x2640ac){return _0x5386(_0x2640ac- -0x166,_0x37c4c7);}const _0x2f3dda=_0x535178['height'],_0x2c06e4=_0x2f3dda>Cesium$5[_0x4df372(-0x19,-0xf)]['PI']/0xc?_0x2f3dda/0x2:0x0;let _0x3f3cd4=Cesium$5['Math']['clampToLatitudeRange'](_0x3116de-_0x2c06e4),_0x3c47d9=Cesium$5[_0x360618(-0x1d8,-0x22a)][_0x4df372(-0x3f,0x20)](_0x31f71b+_0x2c06e4);return _0x3f3cd4<-Cesium$5[_0x360618(-0x24c,-0x22a)][_0x4df372(-0x11e,-0xda)]&&(_0x3f3cd4=-Cesium$5['Math']['PI_OVER_TWO']),_0x3c47d9>Cesium$5['Math']['PI_OVER_THREE']&&(_0x3c47d9=Cesium$5['Math'][_0x4df372(0x82,0x37)]),_0x3291e1[_0x4df372(-0xdc,-0xeb)]={'min':Cesium$5['Math']['toDegrees'](_0x3f3cd4),'max':Cesium$5[_0x4df372(0x24,-0xf)]['toDegrees'](_0x3c47d9)},_0x3291e1;},_0x3f3922={};_0x3f3922['getFullscreenQuad']=_0x1007ef,_0x3f3922[_0x2893bb(0x292,0x29c)]=_0x307a0e,_0x3f3922['createFramebuffer']=_0x589a24,_0x3f3922[_0x416782(-0x28d,-0x280)]=_0x277670;function _0x416782(_0x3605e2,_0x4b6d7e){return _0x508321(_0x4b6d7e,_0x3605e2- -0x652);}return _0x3f3922[_0x416782(-0x341,-0x3cf)]=_0x525d3e,_0x3f3922;}());var fullscreenVert=_0x2c1188(0x499,0x518),screenDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20trailsColor;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a',segmentDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20bool\x20colour;\x0a\x0ain\x20float\x20heightNormalization;\x0ain\x20float\x20speedNormalization;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speedNormalization\x20>\x20zero)\x20{\x0a\x20\x20\x20\x20if(colour)\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(heightNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',segmentDrawVert='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20lines\x20drawing\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0auniform\x20vec2\x20hRange;\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0aout\x20float\x20heightNormalization;\x0aout\x20float\x20speedNormalization;\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight\x20+\x20lonLatLev.z;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0f,\x20360.0f)\x20-\x20180.0f;\x0a\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0f;\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(speed.z\x20-\x20wSpeedRange.x)\x20/\x20(wSpeedRange.y\x20-\x20wSpeedRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20vec3\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rgb;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x20\x20\x20\x20//\x20render\x20lines\x20with\x20triangles\x20and\x20miter\x20joint\x0a\x20\x20\x20\x20//\x20read\x20https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html\x20for\x20detail\x0a\x20\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20projectedCoordinates.next,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.next\x20+\x20offset;\x0a\x20\x20}\x0a\x0a\x20\x20heightNormalization\x20=\x20(currentPosition.z\x20-\x20hRange.x)\x20/\x20(hRange.y\x20-\x20hRange.x);\x0a\x0a\x20\x20speedNormalization\x20=\x20texture(particlesSpeed,\x20particleIndex).a;\x0a}\x0a',trailDrawFrag='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0aout\x20vec4\x20fragColor;\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0f\x20*\x20trailsColor)\x20/\x20255.0f;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20if(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20pointsColor;\x0a\x20\x20}\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20trailsColor;\x0a\x20\x20}\x0a\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a';const Cesium$4=mars3d__namespace['Cesium'];class ParticlesRendering{constructor(_0x2614e3,_0x6ce223,_0x1b1293,_0x4bdda6,_0x4dfc93){this['colour']=_0x1b1293['colors']==='height';function _0x3977ba(_0x54b09c,_0x272f4f){return _0x2c1188(_0x54b09c- -0x78a,_0x272f4f);}this['createRenderingTextures'](_0x2614e3,_0x6ce223,_0x1b1293['colors']);function _0x212083(_0x3e79a0,_0x5cb692){return _0x508321(_0x5cb692,_0x3e79a0- -0x49);}this[_0x212083(0x2cc,0x30f)](_0x2614e3),this[_0x212083(0x381,0x40a)](_0x2614e3,_0x6ce223,_0x1b1293,_0x4bdda6,_0x4dfc93);}['createRenderingTextures'](_0x4ebc13,_0x33748d,_0x102e06){const _0x380380={};_0x380380[_0x577cf5(0x45,-0x30)]=_0x4ebc13,_0x380380['width']=_0x4ebc13['drawingBufferWidth'],_0x380380['height']=_0x4ebc13['drawingBufferHeight'],_0x380380[_0x6f03c9(0xc3,0x115)]=Cesium$4['PixelFormat']['RGBA'],_0x380380['pixelDatatype']=Cesium$4['PixelDatatype']['UNSIGNED_BYTE'];const _0x4ce59b=_0x380380,_0x32e13d={};_0x32e13d[_0x577cf5(-0x92,-0x30)]=_0x4ebc13;function _0x6f03c9(_0x4b2e0d,_0x21b6ce){return _0x508321(_0x4b2e0d,_0x21b6ce- -0x2d3);}_0x32e13d[_0x6f03c9(0x31,0xbd)]=_0x4ebc13[_0x6f03c9(0x2f,0x8b)],_0x32e13d['height']=_0x4ebc13['drawingBufferHeight'],_0x32e13d['pixelFormat']=Cesium$4['PixelFormat'][_0x577cf5(-0x1b2,-0x11a)],_0x32e13d[_0x6f03c9(0x18c,0x117)]=Cesium$4['PixelDatatype'][_0x577cf5(0x26,-0x40)];function _0x577cf5(_0x190bd6,_0x490946){return _0x508321(_0x190bd6,_0x490946- -0x451);}const _0x45eba7=_0x32e13d,_0x8693a3=_0x102e06[_0x577cf5(-0x15b,-0x127)],_0x5a0837=new Float32Array(_0x8693a3*0x3);for(let _0x2b5083=0x0;_0x2b5083<_0x8693a3;_0x2b5083++){const _0x4abfea=Cesium$4[_0x6f03c9(0xe6,0xf3)]['fromCssColorString'](_0x102e06[_0x2b5083]);_0x5a0837[0x3*_0x2b5083]=_0x4abfea[_0x577cf5(-0x29,-0x9b)],_0x5a0837[0x3*_0x2b5083+0x1]=_0x4abfea['green'],_0x5a0837[0x3*_0x2b5083+0x2]=_0x4abfea['blue'];}const _0x352603={'context':_0x4ebc13,'width':_0x8693a3,'height':0x1,'pixelFormat':Cesium$4['PixelFormat'][_0x6f03c9(0x11e,0x12d)],'pixelDatatype':Cesium$4[_0x6f03c9(0xc0,0x83)]['FLOAT'],'sampler':new Cesium$4[(_0x577cf5(-0x15b,-0xcf))]({'minificationFilter':Cesium$4['TextureMinificationFilter']['LINEAR'],'magnificationFilter':Cesium$4[_0x6f03c9(0x168,0xf0)]['LINEAR']})};this['textures']={'segmentsColor':Util['createTexture'](_0x4ce59b),'segmentsDepth':Util['createTexture'](_0x45eba7),'currentTrailsColor':Util['createTexture'](_0x4ce59b),'currentTrailsDepth':Util[_0x6f03c9(-0x1a,0x66)](_0x45eba7),'nextTrailsColor':Util['createTexture'](_0x4ce59b),'nextTrailsDepth':Util[_0x6f03c9(0x40,0x66)](_0x45eba7),'colorTable':Util['createTexture'](_0x352603,_0x5a0837)};}['createRenderingFramebuffers'](_0x23bcf9){function _0xd72ed5(_0x2fc416,_0x48a3b3){return _0x2c1188(_0x48a3b3- -0xbc,_0x2fc416);}function _0xc077e3(_0x3ade6e,_0x3fda55){return _0x2c1188(_0x3fda55- -0x2c8,_0x3ade6e);}this[_0xd72ed5(0x3c6,0x3c1)]={'segments':Util['createFramebuffer'](_0x23bcf9,this['textures'][_0xd72ed5(0x4f5,0x49e)],this['textures'][_0xd72ed5(0x3bc,0x3ab)]),'currentTrails':Util[_0xd72ed5(0x339,0x39d)](_0x23bcf9,this[_0xc077e3(0x23c,0x1c7)]['currentTrailsColor'],this['textures']['currentTrailsDepth']),'nextTrails':Util[_0xc077e3(0x17c,0x191)](_0x23bcf9,this[_0xc077e3(0x19f,0x1c7)][_0xc077e3(0x1bb,0x18c)],this['textures']['nextTrailsDepth'])};}[_0x508321(0x354,0x3cb)](_0x2f9f5d){const _0x319e27=0x4;let _0x3676a4=[];for(let _0x58136d=0x0;_0x58136d<_0x2f9f5d['particlesTextureSize'];_0x58136d++){for(let _0x4a4bc2=0x0;_0x4a4bc2<_0x2f9f5d['particlesTextureSize'];_0x4a4bc2++){for(let _0x35019d=0x0;_0x35019d<_0x319e27;_0x35019d++){_0x3676a4['push'](_0x58136d/_0x2f9f5d[_0x555376(-0x242,-0x1cc)]),_0x3676a4['push'](_0x4a4bc2/_0x2f9f5d[_0x555376(-0x1a6,-0x1cc)]);}}}function _0x555376(_0x24840c,_0x161598){return _0x2c1188(_0x161598- -0x63c,_0x24840c);}_0x3676a4=new Float32Array(_0x3676a4);let _0xffbdce=[];for(let _0x524750=0x0;_0x524750<_0x2f9f5d['maxParticles'];_0x524750++){_0xffbdce[_0x555376(-0x1f5,-0x15b)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0xffbdce=new Float32Array(_0xffbdce);let _0x2d6b58=[];function _0x1ef90e(_0x2dace4,_0x5d67b8){return _0x2c1188(_0x5d67b8- -0x705,_0x2dace4);}for(let _0x565451=0x0,_0x13c171=0x0;_0x565451<_0x2f9f5d['maxParticles'];_0x565451++){_0x2d6b58['push'](_0x13c171+0x0,_0x13c171+0x1,_0x13c171+0x2,_0x13c171+0x2,_0x13c171+0x1,_0x13c171+0x3),_0x13c171+=_0x319e27;}_0x2d6b58=new Uint32Array(_0x2d6b58);const _0x25541f=new Cesium$4[(_0x1ef90e(-0x195,-0x1e4))]({'attributes':new Cesium$4[(_0x555376(-0x15d,-0x100))]({'st':new Cesium$4[(_0x555376(-0x207,-0x1ee))]({'componentDatatype':Cesium$4['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x2,'values':_0x3676a4}),'normal':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x3,'values':_0xffbdce})}),'indices':_0x2d6b58});return _0x25541f;}[_0x508321(0x336,0x3ca)](_0x5d85d8,_0x2b63e1,_0x57a21a,_0x749d81,_0x16b57e){const _0x1e00e0=this,_0x116875={};_0x116875['st']=0x0,_0x116875['normal']=0x1;const _0x5d91a0={};_0x5d91a0['sources']=[segmentDrawVert];const _0x9b9574={};_0x9b9574[_0x139947(0x49e,0x403)]=[segmentDrawFrag];const _0x4a93b2={};_0x4a93b2['enabled']=!![];const _0x1fa0ec={};_0x1fa0ec[_0x52ed0a(0xf8,0x11b)]=undefined,_0x1fa0ec[_0x139947(0x3ef,0x3b0)]=_0x4a93b2,_0x1fa0ec['depthMask']=!![];const _0x17d4ec={};_0x17d4ec['position']=0x0;function _0x52ed0a(_0xbf9abb,_0x3f2ca2){return _0x508321(_0xbf9abb,_0x3f2ca2- -0x202);}_0x17d4ec['st']=0x1;const _0x5721be={};_0x5721be['defines']=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x5721be[_0x52ed0a(0x1ac,0x1d4)]=[fullscreenVert];const _0x435911={};_0x435911[_0x139947(0x368,0x3e9)]=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x435911[_0x52ed0a(0x220,0x1d4)]=[trailDrawFrag];const _0xb0dff={};_0xb0dff[_0x52ed0a(0x218,0x198)]=0x0,_0xb0dff['st']=0x1;const _0x1792f4={};_0x1792f4[_0x52ed0a(0x1ab,0x1ba)]=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x1792f4[_0x52ed0a(0x1fa,0x1d4)]=[fullscreenVert];const _0x8799f6={};_0x8799f6[_0x52ed0a(0x12e,0x1ba)]=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x8799f6[_0x139947(0x3a2,0x403)]=[screenDrawFrag];const _0xa79578={};_0xa79578[_0x52ed0a(0x1ec,0x209)]=![];function _0x139947(_0x4b8fd9,_0x217c36){return _0x2c1188(_0x217c36- -0x123,_0x4b8fd9);}const _0x786b72={};_0x786b72['enabled']=!![],this[_0x52ed0a(0x14b,0x158)]={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x116875,'geometry':this['createSegmentsGeometry'](_0x57a21a),'primitiveType':Cesium$4[_0x52ed0a(0x9f,0xed)]['TRIANGLES'],'uniformMap':{'previousParticlesPosition':function(){function _0x25dc27(_0x45f168,_0x4ea828){return _0x139947(_0x4ea828,_0x45f168- -0x171);}return _0x16b57e[_0x25dc27(0x220,0x240)]['previousParticlesPosition'];},'currentParticlesPosition':function(){function _0x3872cd(_0x7d00c7,_0x4d9b2d){return _0x139947(_0x7d00c7,_0x4d9b2d- -0x163);}return _0x16b57e[_0x3872cd(0x20a,0x22e)]['currentParticlesPosition'];},'postProcessingPosition':function(){function _0x5eec48(_0x33a786,_0x186cdb){return _0x52ed0a(_0x33a786,_0x186cdb- -0x149);}return _0x16b57e['particlesTextures'][_0x5eec48(-0x20,0x56)];},'particlesSpeed':function(){function _0x58d955(_0x705770,_0x29fbce){return _0x52ed0a(_0x29fbce,_0x705770- -0x176);}return _0x16b57e[_0x58d955(-0x14,-0x7e)]['particlesSpeed'];},'colorTable':function(){function _0x224cad(_0x161c4a,_0x238343){return _0x139947(_0x238343,_0x161c4a-0x85);}return _0x1e00e0['textures'][_0x224cad(0x448,0x3ae)];},'aspect':function(){return _0x5d85d8['drawingBufferWidth']/_0x5d85d8['drawingBufferHeight'];},'H':function(){return _0x2b63e1['H']['array'];},'hRange':function(){function _0xedf887(_0x45748f,_0x466107){return _0x139947(_0x45748f,_0x466107- -0x220);}return new Cesium$4['Cartesian2'](_0x2b63e1['H']['min'],_0x2b63e1['H'][_0xedf887(0x299,0x21c)]);},'uSpeedRange':function(){function _0x3e29c9(_0x4b8d26,_0x18e431){return _0x139947(_0x4b8d26,_0x18e431- -0xf6);}return new Cesium$4[(_0x3e29c9(0x296,0x2f1))](_0x2b63e1['U']['min'],_0x2b63e1['U']['max']);},'vSpeedRange':function(){function _0x1cd52d(_0x440c56,_0x354736){return _0x52ed0a(_0x354736,_0x440c56- -0x3cc);}return new Cesium$4['Cartesian2'](_0x2b63e1['V'][_0x1cd52d(-0x248,-0x28f)],_0x2b63e1['V']['max']);},'wSpeedRange':function(){function _0x5f5129(_0x309e98,_0x1107be){return _0x139947(_0x309e98,_0x1107be- -0xe7);}return new Cesium$4['Cartesian2'](_0x2b63e1['W'][_0x5f5129(0x306,0x2cc)],_0x2b63e1['W']['max']);},'pixelSize':function(){return _0x749d81['pixelSize'];},'lineWidth':function(){function _0xba847c(_0x4aeaaf,_0x3bbd49){return _0x139947(_0x4aeaaf,_0x3bbd49- -0x449);}return _0x57a21a[_0xba847c(-0xb9,-0x79)];},'particleHeight':function(){function _0x2b337e(_0x12b2b0,_0x4aa08d){return _0x52ed0a(_0x12b2b0,_0x4aa08d- -0x22a);}return _0x57a21a[_0x2b337e(-0xf4,-0xe5)];},'colour':function(){function _0x331660(_0xb277c1,_0x283447){return _0x139947(_0x283447,_0xb277c1- -0x402);}return _0x1e00e0[_0x331660(0x1b,0x79)];}},'vertexShaderSource':new Cesium$4[(_0x52ed0a(0x170,0xf8))](_0x5d91a0),'fragmentShaderSource':new Cesium$4[(_0x52ed0a(0x168,0xf8))](_0x9b9574),'rawRenderState':Util['createRawRenderState'](_0x1fa0ec),'framebuffer':this['framebuffers']['segments'],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x17d4ec,'geometry':Util[_0x139947(0x28a,0x321)](),'primitiveType':Cesium$4[_0x52ed0a(0x96,0xed)][_0x52ed0a(0x1fb,0x1bb)],'uniformMap':{'segmentsColorTexture':function(){function _0x5d0a33(_0xa60bbf,_0x167b22){return _0x139947(_0x167b22,_0xa60bbf- -0x440);}return _0x1e00e0[_0x5d0a33(-0xd4,-0x168)]['segmentsColor'];},'segmentsDepthTexture':function(){function _0x146977(_0x1c6b30,_0x4c6907){return _0x52ed0a(_0x4c6907,_0x1c6b30- -0x15e);}return _0x1e00e0['textures'][_0x146977(-0x49,-0x15)];},'currentTrailsColor':function(){function _0x3b4053(_0x83f1fe,_0x40f6c4){return _0x139947(_0x40f6c4,_0x83f1fe- -0x95);}return _0x1e00e0['framebuffers'][_0x3b4053(0x3b1,0x3b6)]['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x114a90(_0x927c3b,_0x2acf35){return _0x52ed0a(_0x2acf35,_0x927c3b-0x146);}return _0x1e00e0['framebuffers'][_0x114a90(0x35d,0x309)]['depthTexture'];},'fadeOpacity':function(){function _0x5835ba(_0x3704fc,_0x400d78){return _0x52ed0a(_0x3704fc,_0x400d78- -0x13f);}return _0x57a21a[_0x5835ba(0x2c,0x4d)];}},'vertexShaderSource':new Cesium$4[(_0x52ed0a(0x14c,0xf8))](_0x5721be),'fragmentShaderSource':new Cesium$4[(_0x139947(0x2a7,0x327))](_0x435911),'rawRenderState':Util[_0x139947(0x43a,0x3f2)]({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction']['ALWAYS']},'depthMask':!![]}),'framebuffer':this['framebuffers']['nextTrails'],'autoClear':!![],'preExecute':function(){function _0x3989aa(_0x38d131,_0x5db66b){return _0x139947(_0x5db66b,_0x38d131- -0x210);}if(_0x57a21a[_0x46c268(0x4b0,0x4cf)]){const _0x596e13=_0x1e00e0['framebuffers']['currentTrails'];_0x1e00e0['framebuffers'][_0x46c268(0x521,0x509)]=_0x1e00e0['framebuffers']['nextTrails'],_0x1e00e0['framebuffers'][_0x3989aa(0x14e,0x1e9)]=_0x596e13;}function _0x46c268(_0x299cb9,_0x32b2bd){return _0x139947(_0x32b2bd,_0x299cb9-0xdb);}_0x1e00e0['primitives'][_0x3989aa(0x114,0xe5)][_0x46c268(0x51e,0x4ca)][_0x46c268(0x449,0x45f)]=_0x1e00e0['framebuffers'][_0x46c268(0x439,0x3b3)],_0x1e00e0['primitives'][_0x46c268(0x3ff,0x3b8)][_0x46c268(0x472,0x3fa)]['framebuffer']=_0x1e00e0['framebuffers']['nextTrails'];}}),'screen':new CustomPrimitive({'commandType':_0x139947(0x400,0x3c1),'attributeLocations':_0xb0dff,'geometry':Util[_0x139947(0x30f,0x321)](),'primitiveType':Cesium$4[_0x139947(0x2bd,0x31c)]['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){function _0x19a2c3(_0x44135a,_0x4dac48){return _0x52ed0a(_0x44135a,_0x4dac48-0x25e);}return _0x1e00e0['framebuffers']['nextTrails'][_0x19a2c3(0x409,0x3c3)](0x0);},'trailsDepthTexture':function(){return _0x1e00e0['framebuffers']['nextTrails']['depthTexture'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x1792f4),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x8799f6),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0xa79578,'depthMask':!![],'blending':_0x786b72}),'framebuffer':undefined})};}}var CalculateSpeedShader=_0x2c1188(0x4bd,0x4ed),PostProcessingPositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x0a\x0auniform\x20sampler2D\x20H;\x20//\x20particles\x20height\x20textures\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0auniform\x20vec2\x20viewerLonRange;\x0auniform\x20vec2\x20viewerLatRange;\x0a\x0aconst\x20float\x20randomCoefficient\x20=\x200.1f;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0aconst\x20float\x20dropRate\x20=\x200.1f;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0aconst\x20float\x20dropRateBump\x20=\x200.1f;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0avec4\x20getTextureValue(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20vec4\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D);\x0a\x20\x20return\x20result;\x0a}\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0abool\x20particleNoSpeed(vec3\x20particle)\x20{\x0a\x20\x20vec4\x20speed\x20=\x20getTextureValue(particlesSpeed,\x20particle);\x0a\x20\x20return\x20speed.r\x20==\x200.0f\x20&&\x20speed.g\x20==\x200.0f;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0f);\x0a\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20float\x20height\x20=\x20getTextureValue(H,\x20vec3(randomLon,\x20randomLat,\x20lev)).r;\x0a\x0a\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20height);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20viewerLatRange.x\x20||\x20particle.y\x20>\x20viewerLatRange.y\x20||\x20particle.x\x20<\x20viewerLonRange.x\x20||\x20particle.x\x20>\x20viewerLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x0a}\x0a',UpdatePositionShader='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x20Unit\x20converted\x20to\x20degrees\x20of\x20longitude\x20and\x20latitude\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20speed;\x0a\x20\x20if(length(speed.rgb)\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a';const Cesium$3=mars3d__namespace['Cesium'];class ParticlesComputing{constructor(_0x4a8afe,_0xb05b79,_0x1a030b,_0x116865){this[_0x30d78c(-0x57,-0xf1)]=_0xb05b79,this['createWindTextures'](_0x4a8afe,_0xb05b79),this['createParticlesTextures'](_0x4a8afe,_0x1a030b,_0x116865);function _0x26005b(_0x2ac0ae,_0x23e565){return _0x2c1188(_0x2ac0ae- -0x6b9,_0x23e565);}function _0x30d78c(_0x36402a,_0x2495fd){return _0x508321(_0x36402a,_0x2495fd- -0x4d5);}this[_0x26005b(-0x156,-0x117)](_0xb05b79,_0x1a030b,_0x116865);}['createWindTextures'](_0x390dfb,_0x169e48){function _0x47e73f(_0x14e50c,_0x503a38){return _0x508321(_0x503a38,_0x14e50c- -0x52a);}var _0x52c99f;function _0x59bc07(_0x5d53c7,_0x5954c0){return _0x2c1188(_0x5954c0- -0x406,_0x5d53c7);}const _0x3cbb8a={'context':_0x390dfb,'width':_0x169e48[_0x59bc07(0x9,0x79)]['lon'],'height':_0x169e48[_0x47e73f(-0x1fb,-0x23f)]['lat']*(_0x169e48['dimensions'][_0x47e73f(-0x14d,-0x11e)]||0x1),'pixelFormat':Cesium$3['PixelFormat'][_0x47e73f(-0x1c8,-0x261)],'pixelDatatype':Cesium$3[_0x59bc07(0x74,0xa0)][_0x47e73f(-0x1e5,-0x213)],'flipY':![],'sampler':new Cesium$3[(_0x47e73f(-0x1a8,-0x211))]({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x59bc07(0xe0,0x54)]})};this['windTextures']={'U':Util['createTexture'](_0x3cbb8a,_0x169e48['U']['array']),'V':Util[_0x59bc07(0xbc,0x83)](_0x3cbb8a,_0x169e48['V']['array']),'W':Util['createTexture'](_0x3cbb8a,((_0x52c99f=_0x169e48['W'])===null||_0x52c99f===void 0x0?void 0x0:_0x52c99f['array'])??_0x169e48['U'][_0x47e73f(-0x132,-0x132)]),'H':Util['createTexture'](_0x3cbb8a,_0x169e48['H']['array'])};}[_0x2c1188(0x503,0x4cc)](_0x14d5b2,_0x254247,_0x20ac1e){function _0xd12deb(_0x59c11b,_0x26f152){return _0x508321(_0x59c11b,_0x26f152- -0xae);}const _0x8ee349={'context':_0x14d5b2,'width':_0x254247['particlesTextureSize'],'height':_0x254247['particlesTextureSize'],'pixelFormat':Cesium$3[_0xd12deb(0x39f,0x314)]['RGBA'],'pixelDatatype':Cesium$3['PixelDatatype']['FLOAT'],'flipY':![],'sampler':new Cesium$3[(_0x3b4599(-0x15c,-0xf0))]({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3[_0x3b4599(-0x56,-0xaf)][_0xd12deb(0x255,0x25c)]})},_0x19cd52=this[_0x3b4599(-0x64,-0xd6)](_0x254247['maxParticles'],_0x20ac1e);function _0x3b4599(_0x2a8ee2,_0x4c27d2){return _0x2c1188(_0x4c27d2- -0x5c2,_0x2a8ee2);}const _0x3c5262=new Float32Array(0x4*_0x254247['maxParticles'])['fill'](0x0);this['particlesTextures']={'previousParticlesPosition':Util['createTexture'](_0x8ee349,_0x19cd52),'currentParticlesPosition':Util['createTexture'](_0x8ee349,_0x19cd52),'nextParticlesPosition':Util['createTexture'](_0x8ee349,_0x19cd52),'postProcessingPosition':Util['createTexture'](_0x8ee349,_0x19cd52),'particlesSpeed':Util['createTexture'](_0x8ee349,_0x3c5262)};}['randomizeParticles'](_0x40e8ce,_0x514695){function _0x54bce6(_0xb3d334,_0x4a2352){return _0x2c1188(_0xb3d334- -0x480,_0x4a2352);}const _0x5a7ed1=new Float32Array(0x4*_0x40e8ce);function _0x2d5016(_0x419cd3,_0x9451b2){return _0x2c1188(_0x419cd3- -0x1ed,_0x9451b2);}for(let _0x174714=0x0;_0x174714<_0x40e8ce;_0x174714++){_0x5a7ed1[0x4*_0x174714]=Cesium$3[_0x54bce6(0xa2,0x12b)]['randomBetween'](_0x514695[_0x54bce6(0x1c,-0x18)]['x'],_0x514695['lonRange']['y']),_0x5a7ed1[0x4*_0x174714+0x1]=Cesium$3['Math']['randomBetween'](_0x514695['latRange']['x'],_0x514695['latRange']['y']),_0x5a7ed1[0x4*_0x174714+0x2]=Cesium$3['Math']['randomBetween'](this['data']['lev'][_0x2d5016(0x2e9,0x34b)],this['data'][_0x54bce6(0xad,0xbb)][_0x2d5016(0x372,0x312)]),_0x5a7ed1[0x4*_0x174714+0x3]=0x0;}return _0x5a7ed1;}[_0x2c1188(0x45b,0x43f)](_0x7a8a82){const _0x3f373f=[_0x7a8a82['dimensions'][_0x1ccd76(0x2d7,0x351)],_0x7a8a82[_0x30d340(-0x133,-0x186)]['lat'],_0x7a8a82[_0x1ccd76(0x237,0x2a2)][_0x1ccd76(0x2e5,0x2ac)]];function _0x30d340(_0x93d761,_0x212219){return _0x508321(_0x93d761,_0x212219- -0x4b5);}const _0x50b1fb=[_0x7a8a82['lon']['min'],_0x7a8a82['lat']['min'],_0x7a8a82['lev']['min']],_0xfdcb22=[_0x7a8a82[_0x1ccd76(0x2d7,0x257)]['max'],_0x7a8a82['lat']['max'],_0x7a8a82['lev']['max']],_0x9a3f4e=[(_0xfdcb22[0x0]-_0x50b1fb[0x0])/(_0x3f373f[0x0]-0x1),(_0xfdcb22[0x1]-_0x50b1fb[0x1])/(_0x3f373f[0x1]-0x1),_0x3f373f[0x2]>0x1?(_0xfdcb22[0x2]-_0x50b1fb[0x2])/(_0x3f373f[0x2]-0x1):0x1],_0x5741d2=Math['floor'](Math['random']()*_0x7a8a82['U']['array']['length']),_0x116c24=_0x5741d2%(_0x3f373f[0x0]*_0x3f373f[0x1]),_0x491937=Math[_0x1ccd76(0x22f,0x2a3)](_0x116c24/_0x3f373f[0x0]),_0x3ae7bb=_0x116c24%_0x3f373f[0x0],_0x1c0c0a=Cesium$3['Math']['randomBetween'](_0x50b1fb[0x0]+_0x3ae7bb*_0x9a3f4e[0x0],_0x50b1fb[0x0]+(_0x3ae7bb+0x1)*_0x9a3f4e[0x0]);function _0x1ccd76(_0x3a0ca5,_0x1fb313){return _0x508321(_0x1fb313,_0x3a0ca5- -0xf8);}const _0x3575c0=Cesium$3['Math']['randomBetween'](_0x50b1fb[0x1]+(_0x491937-0x1)*_0x9a3f4e[0x1],_0x50b1fb[0x1]+_0x491937*_0x9a3f4e[0x1]),_0x1760ab=_0x7a8a82['H'][_0x1ccd76(0x300,0x286)][_0x5741d2]||0x0;return[_0x1c0c0a,_0x3575c0,_0x1760ab];}[_0x2c1188(0x552,0x5ec)](){function _0x14a5be(_0x56269c,_0x1ea217){return _0x508321(_0x1ea217,_0x56269c- -0x81);}function _0x726171(_0x165fc5,_0x1e9b99){return _0x2c1188(_0x165fc5- -0x415,_0x1e9b99);}Object[_0x14a5be(0x35e,0x308)](this[_0x14a5be(0x2e3,0x265)])[_0x726171(0x51,-0x13)](_0xa1c89f=>{this['particlesTextures'][_0xa1c89f]['destroy']();});}['createComputingPrimitives'](_0x15bf98,_0x599fce,_0x208e28){const _0x126c48=new Cesium$3[(_0x1b9234(-0xff,-0xb0))](_0x15bf98['dimensions'][_0x5a989e(0x47b,0x47a)],_0x15bf98['dimensions'][_0x1b9234(-0x108,-0x9f)],_0x15bf98[_0x1b9234(-0xcf,-0x6f)]['lev']),_0x5ae3c9=new Cesium$3['Cartesian3'](_0x15bf98['lon'][_0x1b9234(-0x78,0x1b)],_0x15bf98[_0x1b9234(-0x108,-0x19d)]['min'],_0x15bf98[_0x5a989e(0x426,0x488)]['min']),_0x35673b=new Cesium$3['Cartesian3'](_0x15bf98['lon']['max'],_0x15bf98['lat'][_0x5a989e(0x484,0x4ba)],_0x15bf98[_0x5a989e(0x401,0x488)]['max']),_0x75d627=new Cesium$3['Cartesian3']((_0x35673b['x']-_0x5ae3c9['x'])/(_0x126c48['x']-0x1),(_0x35673b['y']-_0x5ae3c9['y'])/(_0x126c48['y']-0x1),_0x126c48['z']>0x1?(_0x35673b['z']-_0x5ae3c9['z'])/(_0x126c48['z']-0x1):0x1),_0x28c8a0=new Cesium$3['Cartesian2'](_0x15bf98['lon']['min'],_0x15bf98['lon']['max']),_0x3ee022=new Cesium$3['Cartesian2'](_0x15bf98['lat'][_0x5a989e(0x3b8,0x431)],_0x15bf98['lat']['max']),_0x24d82c=new Cesium$3['Cartesian2'](_0x15bf98['U']['min'],_0x15bf98['U'][_0x1b9234(0x11,-0x3c)]),_0x26748f=new Cesium$3['Cartesian2'](_0x15bf98['V'][_0x5a989e(0x43e,0x431)],_0x15bf98['V'][_0x1b9234(0x11,-0x48)]),_0x22642c=new Cesium$3[(_0x5a989e(0x46c,0x465))](_0x15bf98['W']['min'],_0x15bf98['W']['max']),_0x1e14bb=this,_0x32cc37={};_0x32cc37['U']=function(){return _0x1e14bb['windTextures']['U'];},_0x32cc37['V']=function(){return _0x1e14bb['windTextures']['V'];},_0x32cc37['W']=function(){return _0x1e14bb['windTextures']['W'];},_0x32cc37['currentParticlesPosition']=function(){function _0x4b49b1(_0x4d7b3c,_0x15ea1b){return _0x1b9234(_0x15ea1b-0x20a,_0x4d7b3c);}return _0x1e14bb['particlesTextures'][_0x4b49b1(0x293,0x21c)];},_0x32cc37[_0x1b9234(-0x3d,-0x3a)]=function(){return _0x126c48;},_0x32cc37[_0x1b9234(-0xac,-0x109)]=function(){return _0x5ae3c9;},_0x32cc37[_0x1b9234(-0x24,0x58)]=function(){return _0x35673b;},_0x32cc37['interval']=function(){return _0x75d627;},_0x32cc37['uSpeedRange']=function(){return _0x24d82c;},_0x32cc37[_0x1b9234(-0x92,-0xe2)]=function(){return _0x26748f;};function _0x1b9234(_0x3200a3,_0x154f46){return _0x2c1188(_0x3200a3- -0x54e,_0x154f46);}_0x32cc37[_0x5a989e(0x3d7,0x3e5)]=function(){return _0x22642c;},_0x32cc37['speedScaleFactor']=function(){function _0x100cc0(_0x181ae3,_0x2f276a){return _0x5a989e(_0x181ae3,_0x2f276a- -0x169);}return _0x208e28['pixelSize']*_0x599fce[_0x100cc0(0x326,0x315)];};const _0x17a284={};_0x17a284['sources']=[CalculateSpeedShader];const _0x411e28={};_0x411e28[_0x1b9234(-0x28,0x4c)]=[UpdatePositionShader];const _0x50f7cd={};_0x50f7cd['sources']=[PostProcessingPositionShader];function _0x5a989e(_0x140778,_0x82ee8a){return _0x2c1188(_0x82ee8a- -0xa5,_0x140778);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':_0x32cc37,'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x17a284),'outputTexture':this[_0x1b9234(-0x9a,-0x12f)][_0x5a989e(0x3fb,0x3e9)],'preExecute':function(){if(_0x599fce!==undefined&&_0x599fce['dynamic']){const _0x573580=_0x1e14bb['particlesTextures']['previousParticlesPosition'];_0x1e14bb['particlesTextures']['previousParticlesPosition']=_0x1e14bb['particlesTextures'][_0x1b3ca9(0x5c1,0x57b)],_0x1e14bb[_0x1b3ca9(0x52f,0x4cf)]['currentParticlesPosition']=_0x1e14bb['particlesTextures'][_0x1b3ca9(0x59a,0x50c)],_0x1e14bb[_0x1b3ca9(0x463,0x4cf)]['postProcessingPosition']=_0x573580;}function _0x5e5aa9(_0x5d919a,_0x29c6a0){return _0x1b9234(_0x29c6a0-0x24,_0x5d919a);}function _0x1b3ca9(_0x50e685,_0x3b6877){return _0x5a989e(_0x50e685,_0x3b6877-0xc0);}_0x1e14bb[_0x1b3ca9(0x474,0x4c5)]['calculateSpeed']['commandToExecute'][_0x5e5aa9(-0x161,-0xe8)]=_0x1e14bb[_0x1b3ca9(0x4d4,0x4cf)]['particlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':_0x5a989e(0x4ae,0x48b),'uniformMap':{'currentParticlesPosition':function(){return _0x1e14bb['particlesTextures']['currentParticlesPosition'];},'particlesSpeed':function(){return _0x1e14bb['particlesTextures']['particlesSpeed'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x411e28),'outputTexture':this['particlesTextures'][_0x1b9234(-0x5f,-0x82)],'preExecute':function(){function _0x4e131c(_0x55e043,_0x275ae2){return _0x5a989e(_0x55e043,_0x275ae2- -0x21d);}function _0x43d807(_0x586e8a,_0x3ae957){return _0x1b9234(_0x586e8a- -0x4,_0x3ae957);}_0x1e14bb[_0x43d807(-0xa8,-0x4d)]['updatePosition']['commandToExecute'][_0x4e131c(0xee,0x180)]=_0x1e14bb['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x5a989e(0x505,0x48b),'uniformMap':{'nextParticlesPosition':function(){function _0x8a777b(_0x44e5a8,_0xc5a39){return _0x1b9234(_0x44e5a8-0x70,_0xc5a39);}return _0x1e14bb['particlesTextures'][_0x8a777b(0x11,0x82)];},'particlesSpeed':function(){function _0x29e109(_0x2a9f64,_0x3d7a57){return _0x1b9234(_0x2a9f64- -0x83,_0x3d7a57);}return _0x1e14bb[_0x29e109(-0x11d,-0xef)]['particlesSpeed'];},'viewerLonRange':function(){function _0x276451(_0x453ebe,_0x16aff5){return _0x1b9234(_0x16aff5- -0x1b3,_0x453ebe);}return _0x208e28[_0x276451(-0x25f,-0x265)];},'viewerLatRange':function(){return _0x208e28['latRange'];},'lonRange':function(){return _0x28c8a0;},'latRange':function(){return _0x3ee022;},'dimension':function(){return _0x126c48;},'minimum':function(){return _0x5ae3c9;},'maximum':function(){return _0x35673b;},'interval':function(){return _0x75d627;},'H':function(){function _0x16fafe(_0x55b4d2,_0x50b096){return _0x5a989e(_0x55b4d2,_0x50b096-0x50);}return _0x1e14bb[_0x16fafe(0x51c,0x4fa)]['H'];},'randomCoefficient':function(){const _0x988571=Math[_0x1378fb(0x289,0x2a0)]();function _0x1378fb(_0x3408d3,_0x39a29b){return _0x1b9234(_0x3408d3-0x2e7,_0x39a29b);}return _0x988571;},'dropRate':function(){return _0x599fce['dropRate'];},'dropRateBump':function(){function _0x2e70ab(_0x46f111,_0x5a80b3){return _0x1b9234(_0x46f111-0x4d6,_0x5a80b3);}return _0x599fce[_0x2e70ab(0x45d,0x4cb)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x50f7cd),'outputTexture':this[_0x1b9234(-0x9a,-0x21)][_0x5a989e(0x409,0x44c)],'preExecute':function(){function _0x1587dc(_0x563a88,_0x2cb925){return _0x1b9234(_0x563a88-0x359,_0x2cb925);}function _0x15d373(_0x50095d,_0x180154){return _0x5a989e(_0x180154,_0x50095d- -0x45d);}_0x1e14bb['primitives']['postProcessingPosition']['commandToExecute'][_0x15d373(-0xc0,-0x110)]=_0x1e14bb[_0x1587dc(0x2bf,0x25f)][_0x1587dc(0x2fc,0x264)];}})};}}const Cesium$2=mars3d__namespace[_0x2c1188(0x4c6,0x538)];class ParticleSystem{constructor(_0x40f61e,_0xb7bbf4,_0x1febf0,_0x1ccb58){this['context']=_0x40f61e,_0xb7bbf4={..._0xb7bbf4};_0xb7bbf4['udata']&&_0xb7bbf4['vdata']&&(_0xb7bbf4['dimensions']={},_0xb7bbf4[_0x5530b4(0x299,0x304)]['lon']=_0xb7bbf4['cols'],_0xb7bbf4[_0x3ded5c(-0x278,-0x289)]['lat']=_0xb7bbf4['rows'],_0xb7bbf4[_0x3ded5c(-0x292,-0x289)]['lev']=_0xb7bbf4['lev']||0x1,_0xb7bbf4[_0x3ded5c(-0x1c0,-0x1e9)]={},_0xb7bbf4['lon'][_0x5530b4(0x2f0,0x36d)]=_0xb7bbf4['xmin'],_0xb7bbf4[_0x3ded5c(-0x1db,-0x1e9)][_0x3ded5c(-0x157,-0x1a9)]=_0xb7bbf4[_0x5530b4(0x2c5,0x23e)],_0xb7bbf4['lat']={},_0xb7bbf4['lat']['min']=_0xb7bbf4['ymin'],_0xb7bbf4[_0x3ded5c(-0x291,-0x2c2)]['max']=_0xb7bbf4['ymax'],_0xb7bbf4['lev']={},_0xb7bbf4['lev'][_0x5530b4(0x2f0,0x28e)]=_0xb7bbf4['levmin']??0x1,_0xb7bbf4[_0x5530b4(0x347,0x380)]['max']=_0xb7bbf4[_0x3ded5c(-0x279,-0x1f9)]??0x1,_0xb7bbf4['U']={},_0xb7bbf4['U']['array']=new Float32Array(_0xb7bbf4['udata']),_0xb7bbf4['U'][_0x5530b4(0x2f0,0x31a)]=_0xb7bbf4['umin']??Math[_0x3ded5c(-0x1e8,-0x232)](..._0xb7bbf4['udata']),_0xb7bbf4['U']['max']=_0xb7bbf4[_0x5530b4(0x2d5,0x36d)]??Math['max'](..._0xb7bbf4[_0x5530b4(0x319,0x299)]),_0xb7bbf4['V']={},_0xb7bbf4['V']['array']=new Float32Array(_0xb7bbf4[_0x3ded5c(-0x20e,-0x28f)]),_0xb7bbf4['V'][_0x3ded5c(-0x1ae,-0x232)]=_0xb7bbf4[_0x5530b4(0x2cf,0x298)]??Math['min'](..._0xb7bbf4['vdata']),_0xb7bbf4['V']['max']=_0xb7bbf4[_0x5530b4(0x265,0x25a)]??Math['max'](..._0xb7bbf4['vdata']));!_0xb7bbf4['W']&&(_0xb7bbf4['W']={'array':new Float32Array(_0xb7bbf4['U'][_0x3ded5c(-0x19c,-0x1c0)]['length']),'min':0x0,'max':0x0});if(!_0xb7bbf4['H']){var _0x202b2c;_0xb7bbf4['H']={'array':new Float32Array(_0xb7bbf4['U']['array']['length']),'min':0x0,'max':0x0};if((_0x202b2c=_0xb7bbf4[_0x3ded5c(-0x209,-0x1db)])!==null&&_0x202b2c!==void 0x0&&_0x202b2c[_0x5530b4(0x362,0x37b)]){const {lon:_0x164a01,lat:_0x5d3087,lev:_0x3776a8}=_0xb7bbf4[_0x5530b4(0x299,0x269)];for(let _0x561b2a=0x0;_0x561b2a<_0x3776a8;_0x561b2a++){for(let _0x323269=0x0;_0x323269<_0x5d3087;_0x323269++){for(let _0x142613=0x0;_0x142613<_0x164a01;_0x142613++){const _0x58d93d=_0x561b2a*(_0x164a01*_0x5d3087)+_0x323269*_0x164a01+_0x142613;_0xb7bbf4['H'][_0x3ded5c(-0x246,-0x1c0)][_0x58d93d]=_0xb7bbf4['lev']['array'][_0x561b2a];}}}_0xb7bbf4['H']['min']=Math['min'](..._0xb7bbf4['lev']['array']),_0xb7bbf4['H']['max']=Math[_0x3ded5c(-0x1a2,-0x1a9)](..._0xb7bbf4['lev'][_0x5530b4(0x362,0x343)]);}}this['data']=_0xb7bbf4,this['options']=_0x1febf0;function _0x5530b4(_0x11685a,_0x328253){return _0x2c1188(_0x11685a- -0x1e6,_0x328253);}this[_0x3ded5c(-0x307,-0x29d)]=_0x1ccb58,this['particlesComputing']=new ParticlesComputing(this['context'],this[_0x5530b4(0x34e,0x2c4)],this['options'],this['viewerParameters']);function _0x3ded5c(_0x310306,_0x40bf64){return _0x2c1188(_0x40bf64- -0x708,_0x310306);}this['particlesRendering']=new ParticlesRendering(this[_0x5530b4(0x38b,0x411)],this['data'],this[_0x5530b4(0x35f,0x3ea)],this['viewerParameters'],this['particlesComputing']);}['canvasResize'](_0x560681){this[_0x6a5aee(-0x298,-0x236)][_0x6a5aee(-0x1ca,-0x259)]();function _0x6a5aee(_0x3e0966,_0x1918ef){return _0x2c1188(_0x3e0966- -0x71c,_0x1918ef);}Object['keys'](this[_0x6a5aee(-0x298,-0x203)][_0x6a5aee(-0x1cd,-0x13f)])['forEach'](_0x20efa3=>{this['particlesComputing']['windTextures'][_0x20efa3]['destroy']();});function _0xcd972f(_0x1a29d4,_0x30cb69){return _0x2c1188(_0x1a29d4- -0xa0,_0x30cb69);}this['particlesRendering']['textures']['colorTable']['destroy'](),Object['keys'](this['particlesRendering']['framebuffers'])[_0xcd972f(0x3c6,0x39a)](_0x28d194=>{function _0x4a658e(_0x201341,_0x4f3b6f){return _0x6a5aee(_0x201341-0x445,_0x4f3b6f);}function _0x17fa46(_0x5b7720,_0x438f96){return _0xcd972f(_0x5b7720- -0x16d,_0x438f96);}this[_0x4a658e(0x205,0x1ca)][_0x4a658e(0x1a6,0x1a9)][_0x28d194]['destroy']();}),this['context']=_0x560681,this['particlesComputing']=new ParticlesComputing(this['context'],this['data'],this[_0xcd972f(0x4a5,0x4a1)],this[_0x6a5aee(-0x2b1,-0x31a)]),this[_0xcd972f(0x43c,0x428)]=new ParticlesRendering(this['context'],this[_0x6a5aee(-0x1e8,-0x17a)],this[_0x6a5aee(-0x1d7,-0x1e6)],this[_0xcd972f(0x3cb,0x3fa)],this['particlesComputing']);}[_0x2c1188(0x49e,0x538)](){function _0x39b56a(_0x522fce,_0x55f4b4){return _0x508321(_0x55f4b4,_0x522fce- -0x155);}const _0x2037aa=new Cesium$2['ClearCommand']({'color':new Cesium$2['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x39b56a(0x200,0x296)]['OPAQUE']});function _0x3d3bc0(_0x39f0b1,_0x1e95d3){return _0x2c1188(_0x1e95d3- -0x34d,_0x39f0b1);}Object['keys'](this[_0x3d3bc0(0x1bb,0x18f)]['framebuffers'])['forEach'](_0x407632=>{function _0x20c99e(_0x4b7389,_0x5502ae){return _0x39b56a(_0x4b7389- -0x29,_0x5502ae);}_0x2037aa[_0x20c99e(0x1c3,0x251)]=this[_0x20c99e(0x20e,0x239)][_0x20c99e(0x1af,0x1a7)][_0x407632];function _0x5d333f(_0x4660dc,_0x2b1c9e){return _0x3d3bc0(_0x2b1c9e,_0x4660dc-0xaa);}_0x2037aa[_0x5d333f(0x2b5,0x240)](this['context']);});}[_0x2c1188(0x570,0x54a)](_0x293d30,_0x3794c2=!![]){function _0x349c4a(_0x1ee54f,_0xd9f52d){return _0x2c1188(_0x1ee54f- -0x3b0,_0xd9f52d);}function _0x122b26(_0xa0e063,_0x1e50bc){return _0x508321(_0x1e50bc,_0xa0e063- -0x11f);}_0x3794c2&&(this[_0x122b26(0x22f,0x1fd)](),this[_0x122b26(0x215,0x204)][_0x122b26(0x2e3,0x270)](),this[_0x122b26(0x215,0x2a2)]['createParticlesTextures'](this['context'],this['options'],this[_0x122b26(0x1fc,0x1cc)]));if(_0x293d30){var _0x559de0;const _0xeb7757=this['particlesRendering']['createSegmentsGeometry'](this[_0x349c4a(0x195,0x17a)]);this['particlesRendering'][_0x122b26(0x23b,0x2b2)][_0x122b26(0x2fc,0x2ef)][_0x349c4a(0x1a4,0x1a9)]=_0xeb7757;const _0x1052c3=Cesium$2[_0x349c4a(0xd2,0x9e)]['fromGeometry']({'context':this['context'],'geometry':_0xeb7757,'attributeLocations':this[_0x349c4a(0x12c,0x137)][_0x349c4a(0xfa,0x137)]['segments'][_0x122b26(0x2df,0x367)],'bufferUsage':Cesium$2['BufferUsage'][_0x349c4a(0x13e,0x199)]});(_0x559de0=this['particlesRendering'][_0x349c4a(0xfa,0xeb)])!==null&&_0x559de0!==void 0x0&&(_0x559de0=_0x559de0['segments'])!==null&&_0x559de0!==void 0x0&&_0x559de0['commandToExecute']&&(this['particlesRendering'][_0x349c4a(0xfa,0x131)]['segments'][_0x122b26(0x2f7,0x280)][_0x349c4a(0x109,0xb2)]=_0x1052c3);}}['setOptions'](_0x5950cd){let _0x1229c5=![];this['options']['maxParticles']!==_0x5950cd['maxParticles']&&(_0x1229c5=!![]);function _0x4066e4(_0x5ddd4c,_0xb2948c){return _0x2c1188(_0xb2948c- -0x475,_0x5ddd4c);}function _0x26ff61(_0x26445f,_0x4dcb47){return _0x2c1188(_0x26445f- -0x2f,_0x4dcb47);}Object['keys'](_0x5950cd)[_0x26ff61(0x437,0x3ad)](_0x406b40=>{function _0x36424b(_0x28a464,_0xc12f2d){return _0x26ff61(_0x28a464-0x1f,_0xc12f2d);}this[_0x36424b(0x535,0x54a)][_0x406b40]=_0x5950cd[_0x406b40];}),this[_0x26ff61(0x541,0x4f9)](_0x1229c5,_0x5950cd['dynamic']);}[_0x2c1188(0x4f2,0x462)](_0xb7a2f9){function _0x2b49a9(_0x34c6f7,_0x16127a){return _0x2c1188(_0x34c6f7- -0x8f,_0x16127a);}Object['keys'](_0xb7a2f9)['forEach'](_0x3fc0aa=>{this['viewerParameters'][_0x3fc0aa]=_0xb7a2f9[_0x3fc0aa];});function _0x235ad6(_0x710482,_0x28fccf){return _0x508321(_0x28fccf,_0x710482- -0x5ce);}this['refreshParticles'](![]),!this[_0x235ad6(-0x1d9,-0x263)][_0x235ad6(-0x226,-0x1b3)]&&(this[_0x235ad6(-0x1d9,-0x1d5)]['dynamic']=!![],this['setOptions'](this[_0x2b49a9(0x4b6,0x488)]),setTimeout(()=>{function _0x18dcb0(_0x4c9c36,_0xbdf7c1){return _0x2b49a9(_0x4c9c36- -0x1ba,_0xbdf7c1);}function _0x3bb360(_0x4ff40e,_0x485172){return _0x2b49a9(_0x4ff40e- -0x50a,_0x485172);}this[_0x18dcb0(0x2fc,0x32b)]['dynamic']=![],this[_0x3bb360(-0xd0,-0x157)](this['options']);},0x1f4));}['destroy'](){clearTimeout(this['canrefresh']);function _0xdd5498(_0x26ea1e,_0x380967){return _0x508321(_0x380967,_0x26ea1e- -0x25b);}function _0x1d29e7(_0x1cdb4b,_0x53a561){return _0x508321(_0x53a561,_0x1cdb4b- -0x2da);}this[_0x1d29e7(0x5a,-0x2f)][_0x1d29e7(0x128,0x134)](),Object['keys'](this[_0x1d29e7(0x5a,0xdb)]['windTextures'])['forEach'](_0x2f33d3=>{this['particlesComputing']['windTextures'][_0x2f33d3]['destroy']();}),this[_0x1d29e7(0xb2,0xc7)][_0xdd5498(0xe4,0x140)][_0xdd5498(0x13b,0x145)]['destroy'](),Object[_0xdd5498(0x184,0x19d)](this[_0x1d29e7(0xb2,0xcb)]['framebuffers'])['forEach'](_0x37e437=>{function _0x48abec(_0x587950,_0xe885b4){return _0xdd5498(_0x587950- -0x5d,_0xe885b4);}this['particlesRendering']['framebuffers'][_0x37e437][_0x48abec(0x60,0xba)]();});for(const _0x6c2a0b in this){delete this[_0x6c2a0b];}}}function _0x508321(_0x127357,_0x9f5e71){return _0x5386(_0x9f5e71-0x27b,_0x127357);}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x508321(0x39e,0x3a7)],_0x659178={};_0x659178['particlesNumber']=0x1000,_0x659178['fixedHeight']=0x0,_0x659178[_0x508321(0x378,0x38e)]=0.996,_0x659178['dropRate']=0.003,_0x659178[_0x508321(0x34d,0x385)]=0.01,_0x659178['speedFactor']=0.5,_0x659178['lineWidth']=0x2,_0x659178[_0x2c1188(0x4cc,0x552)]=[_0x2c1188(0x450,0x4e8)],_0x659178['dynamic']=!![];const DEF_OPTIONS=_0x659178;class WindLayer extends BaseLayer$1{constructor(_0x59da23={}){_0x59da23={...DEF_OPTIONS,..._0x59da23},super(_0x59da23);function _0x6e1ece(_0x474e71,_0x3f32ce){return _0x508321(_0x3f32ce,_0x474e71- -0x64d);}this[_0x6e1ece(-0x329,-0x319)](_0x59da23);}get['layer'](){function _0x2a8b09(_0x282b4b,_0x2f8a08){return _0x2c1188(_0x282b4b-0x1,_0x2f8a08);}return this[_0x2a8b09(0x4ab,0x479)];}get['data'](){return this['_data'];}set[_0x508321(0x3f4,0x3e4)](_0x2908e1){function _0x592462(_0x1367d2,_0x102b5a){return _0x2c1188(_0x1367d2- -0x104,_0x102b5a);}this[_0x592462(0x428,0x397)](_0x2908e1);}get['colors'](){function _0x390d65(_0x1f78c7,_0x5aaebb){return _0x2c1188(_0x1f78c7- -0x21f,_0x5aaebb);}return this[_0x390d65(0x326,0x32d)]['colors'];}set[_0x2c1188(0x4cc,0x479)](_0x588e04){this[_0x272193(0x504,0x533)][_0x31d390(0x3ae,0x3be)]=_0x588e04;function _0x272193(_0x1aac6c,_0x870800){return _0x2c1188(_0x1aac6c- -0x41,_0x870800);}if(this['particleSystem']){const _0x2ee6df={};_0x2ee6df[_0x272193(0x48b,0x44b)]=_0x588e04,this['particleSystem'][_0x31d390(0x3ab,0x3dd)](_0x2ee6df);}function _0x31d390(_0x512ffb,_0x4214c7){return _0x2c1188(_0x512ffb- -0x11e,_0x4214c7);}this['resize']();}['_mountedHook'](){}['_addedHook'](){this['scene']=this[_0x4e6f11(0x114,0xad)][_0x371d05(-0x1e3,-0x254)],this['camera']=this['_map'][_0x371d05(-0x1ce,-0x22e)],this[_0x4e6f11(0x10e,0x126)]=new Cesium$1['PrimitiveCollection'](),this['_map']['scene'][_0x4e6f11(0x10e,0x103)][_0x4e6f11(0x1bd,0x15a)](this['primitives']),this[_0x4e6f11(0xcf,0x159)]={'lonRange':new Cesium$1['Cartesian2'](),'latRange':new Cesium$1[(_0x371d05(-0x1dd,-0x198))](),'pixelSize':0x0,'lonDisplayRange':new Cesium$1['Cartesian2'](),'latDisplayRange':new Cesium$1[(_0x4e6f11(0x16e,0x134))]()},this[_0x371d05(-0x1ed,-0x27e)]=new Cesium$1[(_0x371d05(-0x295,-0x285))](Cesium$1['Cartesian3'][_0x371d05(-0x2a7,-0x29f)],Cesium$1['Ellipsoid'][_0x4e6f11(0xc7,0x10e)][_0x371d05(-0x1f1,-0x1b2)]),this['updateViewerParameters'](),window['addEventListener']('resize',this['resize']['bind'](this),![]),this[_0x4e6f11(0x1b0,0x1f2)]=![],this['mouse_move']=![],this['_map']['on'](mars3d__namespace['EventType']['wheel'],this[_0x4e6f11(0xa9,0x4a)],this),this['_map']['on'](mars3d__namespace[_0x371d05(-0x1a8,-0x221)]['mouseDown'],this['_onMouseDownEvent'],this);function _0x371d05(_0x530c4b,_0x189783){return _0x508321(_0x189783,_0x530c4b- -0x597);}this[_0x371d05(-0x237,-0x237)]['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x4e6f11(0x184,0x1a2)],this),this[_0x371d05(-0x237,-0x2a2)]['on'](mars3d__namespace[_0x4e6f11(0x1a3,0x21c)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0x4e6f11(_0x39aa56,_0x4a5a81){return _0x2c1188(_0x39aa56- -0x39c,_0x4a5a81);}this['_data']&&this['setData'](this['_data']);}['_removedHook'](){window['removeEventListener'](_0x5cb203(0x21d,0x1ec),this['resize']),this['_map']['off'](mars3d__namespace[_0x5cb203(0x295,0x266)]['preRender'],this['_onMap_preRenderEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this);function _0x5cb203(_0x4d7f0b,_0x22323e){return _0x2c1188(_0x4d7f0b- -0x2aa,_0x22323e);}this['_map'][_0x5cb203(0x291,0x2ec)](mars3d__namespace[_0x5cb203(0x295,0x21e)][_0x4a7730(-0x4,-0x22)],this['_onMouseDownEvent'],this);function _0x4a7730(_0x556ce8,_0x2bf0d3){return _0x508321(_0x556ce8,_0x2bf0d3- -0x3ef);}this[_0x4a7730(-0x62,-0x8f)]['off'](mars3d__namespace['EventType']['mouseUp'],this[_0x4a7730(-0x25,-0x1f)],this),this[_0x5cb203(0x206,0x1b5)][_0x5cb203(0x291,0x2cf)](mars3d__namespace[_0x4a7730(-0x25,0x0)]['mouseMove'],this['_onMouseMoveEvent'],this),this['primitives']['removeAll'](),this[_0x5cb203(0x206,0x245)]['scene'][_0x4a7730(-0x59,-0x95)]['remove'](this['primitives']);}['resize'](){function _0xe44b82(_0x49c143,_0x2fc5ae){return _0x2c1188(_0x49c143- -0x74,_0x2fc5ae);}function _0x500aaa(_0x1a233f,_0x1947ba){return _0x508321(_0x1a233f,_0x1947ba- -0x544);}if(!this[_0x500aaa(-0x131,-0x17d)]||!this[_0x500aaa(-0x246,-0x219)])return;this['primitives'][_0xe44b82(0x4a3,0x431)]=![],this[_0xe44b82(0x436,0x495)]['removeAll'](),this[_0xe44b82(0x43c,0x488)][_0xe44b82(0x433,0x491)](mars3d__namespace[_0xe44b82(0x4cb,0x51b)][_0x500aaa(-0x1b0,-0x1dc)],this['_onMap_preRenderEvent'],this);}['_onMap_preRenderEvent'](_0x9ca223){this[_0x416cf5(0x2c,-0x1e)][_0x416cf5(0xee,0x123)](this['scene']['context']),this['addPrimitives']();function _0x7607aa(_0x15194c,_0x24632d){return _0x508321(_0x24632d,_0x15194c- -0x93);}function _0x416cf5(_0x406df7,_0x57c577){return _0x2c1188(_0x406df7- -0x44f,_0x57c577);}this['primitives'][_0x416cf5(0xc8,0x159)]=!![];}['_onMapWhellEvent'](_0x478cdb){function _0x2a340d(_0x569b22,_0x27f713){return _0x508321(_0x569b22,_0x27f713-0xf6);}function _0x159636(_0x2324b6,_0x3ea6b8){return _0x2c1188(_0x2324b6- -0x648,_0x3ea6b8);}clearTimeout(this[_0x2a340d(0x44f,0x49b)]);if(!this['show']||!this['particleSystem'])return;this['primitives'][_0x2a340d(0x534,0x4bd)]=![],this[_0x159636(-0x153,-0x158)]=setTimeout(()=>{if(!this['show'])return;this['redraw']();},0xc8);}['_onMouseDownEvent'](_0x15e185){this['mouse_down']=!![];}[_0x508321(0x37d,0x3ae)](_0x5bfe29){function _0x193b9f(_0x4caa2e,_0x1416ec){return _0x508321(_0x4caa2e,_0x1416ec- -0x42c);}if(!this[_0x164d5a(-0x100,-0xfa)]||!this['particleSystem'])return;function _0x164d5a(_0x55aea2,_0x2f46bc){return _0x508321(_0x55aea2,_0x2f46bc- -0x4c1);}this[_0x193b9f(-0x9b,-0x30)]&&(this['primitives'][_0x164d5a(-0x63,-0xfa)]=![],this[_0x164d5a(-0x191,-0x151)]=!![]);}['_onMouseUpEvent'](_0x4276c8){if(!this['show']||!this['particleSystem'])return;this['mouse_down']&&this['mouse_move']&&this[_0x5c609c(-0xb,-0x2f)]();function _0x3c6ec7(_0x38b3e7,_0x1692e5){return _0x2c1188(_0x38b3e7- -0x5cc,_0x1692e5);}function _0x5c609c(_0x560632,_0x324824){return _0x508321(_0x324824,_0x560632- -0x38a);}this['primitives']['show']=!![],this[_0x5c609c(0x72,0xa)]=![],this['mouse_move']=![];}['redraw'](){if(!this['_map']||!this[_0x126d84(0x253,0x2c5)])return;function _0x126d84(_0x5a537c,_0x552c2f){return _0x508321(_0x552c2f,_0x5a537c- -0x174);}this['updateViewerParameters'](),this[_0x126d84(0x1b7,0x1b2)]['applyViewerParameters'](this[_0x1ae30c(0x327,0x2e6)]);function _0x1ae30c(_0x22c6bc,_0xa2d63c){return _0x2c1188(_0x22c6bc- -0x144,_0xa2d63c);}this['primitives'][_0x1ae30c(0x3d3,0x458)]=!![];}[_0x508321(0x405,0x3dc)](_0x41d848){function _0x10f712(_0x1fd98f,_0x5b3fd0){return _0x2c1188(_0x1fd98f- -0x14a,_0x5b3fd0);}this['_data']=_0x41d848;function _0x1558ff(_0x16df2d,_0x378274){return _0x508321(_0x378274,_0x16df2d-0x11a);}this[_0x10f712(0x331,0x3ac)]&&this[_0x10f712(0x331,0x39e)]['destroy'](),this['particleSystem']=new ParticleSystem(this['scene']['context'],_0x41d848,this[_0x1558ff(0x42e,0x3f8)](),this['viewerParameters']),this['addPrimitives']();}['_setOptionsHook'](_0xceca3d,_0x3d5f90){if(_0xceca3d)for(const _0xa61b91 in _0xceca3d){this[_0xa61b91]=_0xceca3d[_0xa61b91];}this['particleSystem']&&this['particleSystem']['setOptions'](this['getOptions']());}['getOptions'](){function _0x477624(_0x236d86,_0x49766c){return _0x508321(_0x236d86,_0x49766c- -0x426);}const _0x4e95b7=Math[_0x4a66a5(-0x1c3,-0x241)](Math[_0x4a66a5(-0x20d,-0x23b)](this['particlesNumber']));this['particlesNumber']=_0x4e95b7*_0x4e95b7;const _0x2a9507={};_0x2a9507[_0x4a66a5(-0x262,-0x265)]=_0x4e95b7,_0x2a9507['maxParticles']=this[_0x4a66a5(-0x1ae,-0x1dc)],_0x2a9507[_0x477624(-0x4d,-0xaa)]=this[_0x4a66a5(-0x180,-0x209)],_0x2a9507[_0x477624(-0xb6,-0xdf)]=this['fixedHeight'];function _0x4a66a5(_0x4e2d01,_0x2b554c){return _0x508321(_0x4e2d01,_0x2b554c- -0x585);}return _0x2a9507[_0x477624(-0x4c,-0x98)]=this['fadeOpacity'],_0x2a9507['dropRate']=this['dropRate'],_0x2a9507['dropRateBump']=this['dropRateBump'],_0x2a9507['speedFactor']=this['speedFactor'],_0x2a9507[_0x4a66a5(-0x153,-0x1e2)]=this['lineWidth'],_0x2a9507['dynamic']=this[_0x4a66a5(-0x209,-0x1dd)],_0x2a9507;}[_0x2c1188(0x4a3,0x529)](){function _0x39b6a8(_0x57c5f3,_0x4264c3){return _0x2c1188(_0x4264c3- -0x25d,_0x57c5f3);}this['primitives']['add'](this['particleSystem'][_0x39b6a8(0x260,0x227)]['primitives'][_0x112a8c(0x228,0x2b4)]),this['primitives'][_0x112a8c(0x21d,0x19b)](this['particleSystem']['particlesComputing']['primitives']['updatePosition']),this['primitives'][_0x112a8c(0x21d,0x23c)](this['particleSystem'][_0x39b6a8(0x2b7,0x227)][_0x112a8c(0x16e,0xfa)][_0x39b6a8(0x302,0x294)]),this[_0x112a8c(0x16e,0x1b9)][_0x39b6a8(0x26a,0x2fc)](this['particleSystem']['particlesRendering']['primitives'][_0x112a8c(0x22f,0x299)]),this[_0x39b6a8(0x273,0x24d)]['add'](this[_0x112a8c(0x13f,0x147)]['particlesRendering']['primitives']['trails']);function _0x112a8c(_0x2d7a55,_0x5e7f1a){return _0x508321(_0x5e7f1a,_0x2d7a55- -0x1ec);}this['primitives'][_0x112a8c(0x21d,0x2a4)](this['particleSystem']['particlesRendering']['primitives'][_0x39b6a8(0x24a,0x2dc)]);}[_0x508321(0x3b8,0x389)](){let _0x352e0a=this['camera']['computeViewRectangle'](this['scene']['globe'][_0x1cf274(0x291,0x296)]);if(!_0x352e0a){const _0x411f01=this['_map']['getExtent']();_0x352e0a=Cesium$1[_0x4d5458(0x2d7,0x354)][_0x4d5458(0x331,0x388)](_0x411f01[_0x1cf274(0x2e5,0x2e6)],_0x411f01['ymin'],_0x411f01['xmax'],_0x411f01[_0x4d5458(0x384,0x3ff)]);}const _0xe72964=Util[_0x4d5458(0x3e2,0x359)](_0x352e0a);function _0x1cf274(_0x6bc1fc,_0xb0a96f){return _0x508321(_0xb0a96f,_0x6bc1fc- -0xbf);}function _0x4d5458(_0x366738,_0x3630f8){return _0x2c1188(_0x3630f8- -0x108,_0x366738);}this[_0x1cf274(0x25f,0x280)]?(this[_0x4d5458(0x3b9,0x363)]['lonRange']['x']=Math['max'](_0xe72964[_0x4d5458(0x3e6,0x417)]['min'],this[_0x1cf274(0x25f,0x2f9)][_0x4d5458(0x393,0x3ec)]),this[_0x4d5458(0x327,0x363)][_0x4d5458(0x3aa,0x394)]['y']=Math['min'](_0xe72964['lon'][_0x1cf274(0x350,0x388)],this[_0x1cf274(0x25f,0x2d3)][_0x1cf274(0x29c,0x235)]),this['viewerParameters']['latRange']['x']=Math['max'](_0xe72964['lat'][_0x4d5458(0x403,0x3ce)],this[_0x4d5458(0x367,0x366)][_0x4d5458(0x326,0x36e)]),this[_0x1cf274(0x25c,0x2d8)][_0x4d5458(0x38b,0x3a7)]['y']=Math['min'](_0xe72964['lat'][_0x1cf274(0x350,0x316)],this[_0x1cf274(0x25f,0x22b)][_0x1cf274(0x2f8,0x26c)])):(this['viewerParameters']['lonRange']['x']=_0xe72964['lon']['min'],this['viewerParameters']['lonRange']['y']=_0xe72964['lon']['max'],this['viewerParameters']['latRange']['x']=_0xe72964['lat']['min'],this[_0x4d5458(0x3b9,0x363)]['latRange']['y']=_0xe72964['lat'][_0x4d5458(0x4ad,0x457)]);let _0x4c8ccd=this['camera']['getPixelSize'](this[_0x1cf274(0x2eb,0x2d8)],this['scene'][_0x1cf274(0x29f,0x30f)],this[_0x1cf274(0x2f5,0x2a5)][_0x1cf274(0x328,0x3a0)]);const _0x13815b=this['scene'][_0x1cf274(0x328,0x32f)]*0.3;_0x4c8ccd<_0x13815b&&(_0x4c8ccd=_0x13815b),this['viewerParameters']['pixelSize']=_0x4c8ccd;}}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace[_0x508321(0x3bc,0x3f6)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){this[_0x5e3be2(-0x35,0x19)]=null,this['lat']=null,this[_0x37fa6f(0x537,0x4d7)]=null,this['tlat']=null,this[_0x5e3be2(-0x138,-0xdc)]=null;function _0x37fa6f(_0x337c95,_0x2495d9){return _0x2c1188(_0x2495d9- -0x6a,_0x337c95);}function _0x5e3be2(_0x264197,_0x1e45fe){return _0x2c1188(_0x1e45fe- -0x53e,_0x264197);}this['speed']=null;}['destroy'](){for(const _0x379f45 in this){delete this[_0x379f45];}}}class CanvasWindField{constructor(_0x3efcdf){this['setOptions'](_0x3efcdf);}get['speedRate'](){function _0x3ae68a(_0x3c8c1c,_0x473f0a){return _0x2c1188(_0x473f0a- -0x67e,_0x3c8c1c);}return this[_0x3ae68a(-0x1ac,-0x1a7)];}set['speedRate'](_0x39c279){this[_0x341e0e(0x37a,0x362)]=(0x64-(_0x39c279>0x63?0x63:_0x39c279))*0x64;function _0x341e0e(_0x1da506,_0x5667d6){return _0x508321(_0x1da506,_0x5667d6- -0x25);}function _0xeb1570(_0x58647f,_0x43a730){return _0x508321(_0x58647f,_0x43a730- -0x1af);}this['_calc_speedRate']=[(this['xmax']-this[_0xeb1570(0x222,0x1f5)])/this['_speedRate'],(this['ymax']-this['ymin'])/this['_speedRate']];}get[_0x2c1188(0x54d,0x50c)](){return this['_maxAge'];}set[_0x508321(0x486,0x3fd)](_0x2539b4){this['_maxAge']=_0x2539b4;}['setOptions'](_0x4ce288){this[_0x5acf55(0x4ad,0x4ee)]=_0x4ce288,this[_0x5acf55(0x4b5,0x478)]=_0x4ce288['maxAge']||0x78,this['speedRate']=_0x4ce288['speedRate']||0x32;function _0x28df74(_0x3ec4ce,_0x5d8dc7){return _0x2c1188(_0x5d8dc7- -0x5bc,_0x3ec4ce);}this['particles']=[];const _0x2ee9b8=_0x4ce288[_0x28df74(-0xe4,-0xc3)]||0x1000;function _0x5acf55(_0x4eaa47,_0x5186f8){return _0x508321(_0x5186f8,_0x4eaa47-0xb8);}for(let _0x8bff2f=0x0;_0x8bff2f<_0x2ee9b8;_0x8bff2f++){const _0x3ce6b7=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x3ce6b7);}}['setDate'](_0x2b1add){this[_0x3c1a23(0x357,0x30c)]=_0x2b1add['rows'],this['cols']=_0x2b1add[_0x3c1a23(0x3d0,0x361)];function _0x14498b(_0x429f6e,_0xcd78b3){return _0x508321(_0x429f6e,_0xcd78b3- -0x39d);}this[_0x3c1a23(0x386,0x3fb)]=_0x2b1add[_0x3c1a23(0x386,0x396)],this['xmax']=_0x2b1add['xmax'],this[_0x14498b(-0x86,-0x77)]=_0x2b1add['ymin'],this[_0x14498b(0x2b,0x1a)]=_0x2b1add[_0x14498b(0x31,0x1a)],this[_0x14498b(0x4f,0x80)]=[];const _0x46a020=_0x2b1add['udata'],_0x16fe22=_0x2b1add[_0x14498b(0x2,-0x74)];let _0x3cabea=![];_0x46a020['length']===this['rows']&&_0x46a020[0x0]['length']===this['cols']&&(_0x3cabea=!![]);let _0x46368d=0x0,_0x395b37=null,_0x56a9ec=null;for(let _0x311efa=0x0;_0x311efa<this['rows'];_0x311efa++){_0x395b37=[];for(let _0x4666e4=0x0;_0x4666e4<this['cols'];_0x4666e4++,_0x46368d++){_0x3cabea?_0x56a9ec=this['_calcUV'](_0x46a020[_0x311efa][_0x4666e4],_0x16fe22[_0x311efa][_0x4666e4]):_0x56a9ec=this['_calcUV'](_0x46a020[_0x46368d],_0x16fe22[_0x46368d]),_0x395b37['push'](_0x56a9ec);}this['grid'][_0x14498b(0x7a,-0xc)](_0x395b37);}function _0x3c1a23(_0x5e2585,_0x2887d2){return _0x2c1188(_0x5e2585- -0x16e,_0x2887d2);}this['options']['reverseY']&&this['grid'][_0x3c1a23(0x36a,0x35a)]();}['clear'](){delete this['rows'],delete this['cols'];function _0x1ad885(_0x533f97,_0x1c6ce6){return _0x2c1188(_0x533f97- -0x9c,_0x1c6ce6);}delete this['xmin'],delete this[_0x1ad885(0x40f,0x378)],delete this[_0x1ad885(0x3da,0x40c)];function _0xa1cabd(_0x572a06,_0x49d1c3){return _0x2c1188(_0x572a06- -0x631,_0x49d1c3);}delete this[_0xa1cabd(-0x12a,-0x162)],delete this['grid'],delete this['particles'];}[_0x508321(0x385,0x36f)](_0x5d0b4c,_0x27078f){const _0x5d66b5=(_0x5d0b4c-this['xmin'])/(this[_0x2b6400(-0x286,-0x2ef)]-this['xmin'])*(this['cols']-0x1),_0x6b1362=(this['ymax']-_0x27078f)/(this['ymax']-this['ymin'])*(this[_0x23613f(0x46c,0x43e)]-0x1);function _0x2b6400(_0x306fea,_0x237af7){return _0x2c1188(_0x237af7- -0x79a,_0x306fea);}function _0x23613f(_0x8666cd,_0x5c4434){return _0x2c1188(_0x5c4434- -0x87,_0x8666cd);}return[_0x5d66b5,_0x6b1362];}['getUVByXY'](_0x35acd3,_0xd2b991){function _0x47e65c(_0x626532,_0x129aa9){return _0x508321(_0x626532,_0x129aa9- -0x4fd);}if(_0x35acd3<0x0||_0x35acd3>=this['cols']||_0xd2b991>=this['rows'])return[0x0,0x0,0x0];const _0x1fee88=Math[_0x10dd44(0x276,0x244)](_0x35acd3),_0x2abbbc=Math[_0x47e65c(-0x144,-0x1d6)](_0xd2b991);if(_0x1fee88===_0x35acd3&&_0x2abbbc===_0xd2b991)return this['grid'][_0xd2b991][_0x35acd3];const _0x232746=_0x1fee88+0x1,_0x2dfe0a=_0x2abbbc+0x1,_0x36259e=this[_0x47e65c(-0x103,-0x17f)](_0x1fee88,_0x2abbbc),_0x2bf6d8=this[_0x47e65c(-0xf3,-0x17f)](_0x232746,_0x2abbbc);function _0x10dd44(_0x4b5519,_0x19bfe0){return _0x508321(_0x4b5519,_0x19bfe0- -0xe3);}const _0x11afd1=this[_0x47e65c(-0x13e,-0x17f)](_0x1fee88,_0x2dfe0a),_0x490c80=this[_0x10dd44(0x2f5,0x29b)](_0x232746,_0x2dfe0a);let _0x362c7d=null;try{_0x362c7d=this['_bilinearInterpolation'](_0x35acd3-_0x1fee88,_0xd2b991-_0x2abbbc,_0x36259e,_0x2bf6d8,_0x11afd1,_0x490c80);}catch(_0xa03be){console['log'](_0x35acd3,_0xd2b991);}return _0x362c7d;}['_bilinearInterpolation'](_0x50e48c,_0x5d966f,_0x4b984a,_0x59d5ca,_0x5ef3f0,_0x4a4ee5){const _0x44e6a2=0x1-_0x50e48c,_0x21274f=0x1-_0x5d966f,_0x552e3f=_0x44e6a2*_0x21274f,_0x466d72=_0x50e48c*_0x21274f,_0x1efe1e=_0x44e6a2*_0x5d966f,_0x19b900=_0x50e48c*_0x5d966f,_0x20bf4a=_0x4b984a[0x0]*_0x552e3f+_0x59d5ca[0x0]*_0x466d72+_0x5ef3f0[0x0]*_0x1efe1e+_0x4a4ee5[0x0]*_0x19b900,_0x1026ba=_0x4b984a[0x1]*_0x552e3f+_0x59d5ca[0x1]*_0x466d72+_0x5ef3f0[0x1]*_0x1efe1e+_0x4a4ee5[0x1]*_0x19b900;return this['_calcUV'](_0x20bf4a,_0x1026ba);}[_0x508321(0x334,0x30e)](_0x230f3a,_0x3c9261){return[+_0x230f3a,+_0x3c9261,Math['sqrt'](_0x230f3a*_0x230f3a+_0x3c9261*_0x3c9261)];}[_0x2c1188(0x4db,0x519)](_0x26005f,_0x56b2e3){if(!this['isInExtent'](_0x26005f,_0x56b2e3))return null;function _0x5676f5(_0x33ebce,_0x11a4c7){return _0x508321(_0x33ebce,_0x11a4c7-0x109);}const _0x3bd40b=this[_0x5676f5(0x3ef,0x478)](_0x26005f,_0x56b2e3),_0x4f62c1=this['getUVByXY'](_0x3bd40b[0x0],_0x3bd40b[0x1]);return _0x4f62c1;}['isInExtent'](_0x5ec8cc,_0x4b4f61){return _0x5ec8cc>=this['xmin']&&_0x5ec8cc<=this['xmax']&&_0x4b4f61>=this['ymin']&&_0x4b4f61<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x214a95=fRandomByfloat(this['xmin'],this['xmax']);function _0x2980d0(_0x1fbd1e,_0xe8cfb8){return _0x508321(_0xe8cfb8,_0x1fbd1e- -0x2d3);}const _0x4eb92d=fRandomByfloat(this[_0x2980d0(0x53,0x2f)],this['ymax']),_0x2a24e7={};_0x2a24e7[_0x2980d0(0x23,-0x4f)]=_0x4eb92d;function _0x5058f9(_0x2955d2,_0x57ed1e){return _0x508321(_0x57ed1e,_0x2955d2- -0x539);}return _0x2a24e7['lng']=_0x214a95,_0x2a24e7;}['getParticles'](){let _0x136ef5,_0x2cc3ef,_0x11d573;function _0x125576(_0x2de2ec,_0x36a669){return _0x508321(_0x2de2ec,_0x36a669- -0x3e);}for(let _0x3aeb64=0x0,_0x4fde82=this[_0x89fc60(0x20d,0x1a5)]['length'];_0x3aeb64<_0x4fde82;_0x3aeb64++){let _0x52b8b8=this[_0x125576(0x3e1,0x3b5)][_0x3aeb64];_0x52b8b8['age']<=0x0&&(_0x52b8b8=this['_randomParticle'](_0x52b8b8));if(_0x52b8b8[_0x89fc60(0x12c,0xb9)]>0x0){const _0x3b9311=_0x52b8b8[_0x125576(0x3fd,0x3b3)],_0x212ca5=_0x52b8b8[_0x89fc60(0x214,0x27b)];_0x11d573=this[_0x125576(0x39a,0x34d)](_0x3b9311,_0x212ca5),_0x11d573?(_0x136ef5=_0x3b9311+this[_0x89fc60(0x1da,0x270)][0x0]*_0x11d573[0x0],_0x2cc3ef=_0x212ca5+this[_0x89fc60(0x1da,0x1f2)][0x1]*_0x11d573[0x1],_0x52b8b8['lng']=_0x3b9311,_0x52b8b8[_0x89fc60(0x110,0x1a4)]=_0x212ca5,_0x52b8b8['tlng']=_0x136ef5,_0x52b8b8[_0x89fc60(0x214,0x1e0)]=_0x2cc3ef,_0x52b8b8['speed']=_0x11d573[0x2],_0x52b8b8[_0x89fc60(0x12c,0x12d)]--):_0x52b8b8['age']=0x0;}}function _0x89fc60(_0x56f132,_0x2a7ca6){return _0x2c1188(_0x56f132- -0x336,_0x2a7ca6);}return this['particles'];}[_0x2c1188(0x547,0x590)](_0x13f56d){let _0x156c35,_0x238af5;for(let _0x151191=0x0;_0x151191<0x1e;_0x151191++){_0x156c35=this[_0x271f44(0x486,0x453)](),_0x238af5=this[_0x271f44(0x54a,0x4e6)](_0x156c35[_0x4711ed(-0x235,-0x2c1)],_0x156c35['lat']);if(_0x238af5&&_0x238af5[0x2]>0x0)break;}function _0x4711ed(_0x1e68f3,_0x354d1c){return _0x2c1188(_0x1e68f3- -0x78c,_0x354d1c);}function _0x271f44(_0x5539fc,_0x2d2ca4){return _0x2c1188(_0x2d2ca4-0xb,_0x5539fc);}if(!_0x238af5)return _0x13f56d;const _0x18464e=_0x156c35[_0x4711ed(-0x235,-0x1cc)]+this['_calc_speedRate'][0x0]*_0x238af5[0x0],_0x194b43=_0x156c35['lat']+this['_calc_speedRate'][0x1]*_0x238af5[0x1];return _0x13f56d['lng']=_0x156c35[_0x271f44(0x52a,0x562)],_0x13f56d[_0x271f44(0x47a,0x451)]=_0x156c35['lat'],_0x13f56d['tlng']=_0x18464e,_0x13f56d['tlat']=_0x194b43,_0x13f56d['age']=Math['round'](Math[_0x4711ed(-0x29c,-0x2a9)]()*this[_0x271f44(0x510,0x558)]),_0x13f56d[_0x4711ed(-0x33f,-0x3aa)]=_0x238af5[0x2],_0x13f56d;}['destroy'](){for(const _0x5f1d10 in this){delete this[_0x5f1d10];}}}function fRandomByfloat(_0x1196f0,_0x17cf9e){return _0x1196f0+Math['random']()*(_0x17cf9e-_0x1196f0);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x23e0b7={}){function _0x2df283(_0xafe443,_0x221184){return _0x2c1188(_0x221184- -0x2cb,_0xafe443);}super(_0x23e0b7),this[_0xc0fa3b(-0x252,-0x25c)](_0x23e0b7),this['canvas']=null;function _0xc0fa3b(_0x549156,_0x21fc25){return _0x2c1188(_0x549156- -0x6c6,_0x21fc25);}_0x23e0b7['colors']&&_0x23e0b7[_0xc0fa3b(-0x169,-0x19c)]&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x23e0b7));}['_setOptionsHook'](_0x5a3226,_0x4eef12){function _0x35c68c(_0x246e74,_0x24fad9){return _0x2c1188(_0x24fad9- -0x489,_0x246e74);}this[_0x4f166b(0x51,-0x7)]=0x3e8/(_0x5a3226['frameRate']||0xa),this[_0x4f166b(0x54,0x57)]=this['options']['pointerEvents']??![],this[_0x35c68c(0xc6,0x47)]=_0x5a3226[_0x35c68c(-0x2d,0x47)]||_0x4f166b(0xb,-0x6a);function _0x4f166b(_0x17f85b,_0x4d6ccf){return _0x2c1188(_0x17f85b- -0x4b7,_0x4d6ccf);}this['lineWidth']=_0x5a3226['lineWidth']||0x1,this[_0x4f166b(-0x45,0x55)]=_0x5a3226[_0x35c68c(-0x27,-0x17)]??0x0,this['reverseY']=_0x5a3226['reverseY']??![],this[_0x35c68c(0x36,0x79)]&&this[_0x4f166b(0x4b,0x7c)][_0x4f166b(0x12,-0x78)](_0x5a3226);}get[_0x508321(0x385,0x3f6)](){return this['canvas'];}get['canvasWidth'](){function _0x590d46(_0x45a9a6,_0x6be7d1){return _0x508321(_0x6be7d1,_0x45a9a6-0xae);}function _0x1a480a(_0x507726,_0xb4409e){return _0x2c1188(_0xb4409e- -0x21e,_0x507726);}return this['_map'][_0x1a480a(0x2c5,0x2e6)]['canvas'][_0x1a480a(0x2e3,0x286)];}get['canvasHeight'](){return this['_map']['scene']['canvas']['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x2c1188(0x453,0x43b)](_0x33b504){this[_0x22028f(-0xb3,-0x11f)]=_0x33b504;function _0x5e7b7b(_0x30c957,_0x32b945){return _0x2c1188(_0x32b945- -0x1c3,_0x30c957);}function _0x22028f(_0x3fa529,_0x2ab532){return _0x2c1188(_0x2ab532- -0x62a,_0x3fa529);}if(!this['canvas'])return;_0x33b504?this[_0x5e7b7b(0x2ca,0x286)]['style'][_0x5e7b7b(0x2e4,0x307)]='all':this['canvas'][_0x22028f(-0x1a1,-0x106)][_0x22028f(-0x184,-0x160)]=_0x5e7b7b(0x207,0x27e);}get['particlesNumber'](){return this['options']['particlesNumber'];}set['particlesNumber'](_0xb35f77){this['options']['particlesNumber']=_0xb35f77,mars3d__namespace['Util']['funDebounce'](this['redraw'],0x1f4)();}get[_0x2c1188(0x51c,0x599)](){function _0x95bb55(_0x349911,_0x478a46){return _0x508321(_0x478a46,_0x349911-0x32);}return this['options'][_0x95bb55(0x3fe,0x462)];}set[_0x508321(0x391,0x3cc)](_0x4fc852){function _0x1418ca(_0x3577f2,_0x3095e7){return _0x2c1188(_0x3095e7- -0x187,_0x3577f2);}function _0x1bff5d(_0x89c349,_0x3371d0){return _0x2c1188(_0x89c349- -0x3dc,_0x3371d0);}this['options']['speedRate']=_0x4fc852,this['windField']&&(this[_0x1418ca(0x313,0x37b)][_0x1bff5d(0x140,0x176)]=_0x4fc852);}get[_0x2c1188(0x54d,0x5b6)](){return this['options']['maxAge'];}set[_0x508321(0x3be,0x3fd)](_0x195ba3){this[_0x133e6e(-0x1a0,-0x19c)]['maxAge']=_0x195ba3;function _0x133e6e(_0x22a4ad,_0x3e46fb){return _0x2c1188(_0x3e46fb- -0x6e1,_0x22a4ad);}function _0x437178(_0x2252c6,_0x931826){return _0x2c1188(_0x931826- -0xd6,_0x2252c6);}this[_0x437178(0x422,0x42c)]&&(this['windField'][_0x437178(0x449,0x477)]=_0x195ba3);}get['data'](){function _0x9feaa4(_0x13d89f,_0x41a6a4){return _0x508321(_0x13d89f,_0x41a6a4-0xd5);}return this[_0x9feaa4(0x49a,0x4c7)];}set['data'](_0x245041){function _0x5bf85c(_0x3dc9c3,_0x49ba4a){return _0x2c1188(_0x3dc9c3- -0x49,_0x49ba4a);}this[_0x5bf85c(0x4e3,0x4b6)](_0x245041);}get[_0x508321(0x334,0x3be)](){function _0x1ce50d(_0x5a619f,_0x501b60){return _0x508321(_0x5a619f,_0x501b60- -0x582);}let _0xd798cc=this['windData']['xmin'],_0x33e702=this[_0x1ce50d(-0x1a2,-0x190)][_0x3d6d5f(0x323,0x35b)],_0x4dceda=this['windData'][_0x3d6d5f(0x2ee,0x343)],_0x36898a=this['windData']['ymax'];_0x33e702>=0x167&&_0xd798cc===0x0&&(_0xd798cc=-0xb4,_0x33e702=0xb4);_0xd798cc=Math['max'](_0xd798cc,-0xb4),_0x33e702=Math[_0x3d6d5f(0x34e,0x3b0)](_0x33e702,0xb4);function _0x3d6d5f(_0x358370,_0x50770c){return _0x2c1188(_0x358370- -0x188,_0x50770c);}return _0x4dceda=Math['max'](_0x4dceda,-0x5a),_0x36898a=Math[_0x1ce50d(-0x1c5,-0x1fc)](_0x36898a,0x5a),Cesium['Rectangle'][_0x1ce50d(-0x2ad,-0x242)](_0xd798cc,_0x4dceda,_0x33e702,_0x36898a);}['_showHook'](_0x5ba61b){function _0x39fbb0(_0x141450,_0x471bf0){return _0x2c1188(_0x471bf0- -0x1e4,_0x141450);}function _0x308afe(_0x4a1f2c,_0x8bbc5){return _0x508321(_0x8bbc5,_0x4a1f2c- -0x47b);}_0x5ba61b?this['_addedHook']():(this[_0x308afe(-0x89,-0x28)]&&(this[_0x308afe(-0x86,-0xb4)]['data']=this[_0x308afe(-0x89,-0x7b)]),this['_removedHook']());}['_mountedHook'](){function _0x13e7f6(_0x5d9dbe,_0x3d9e17){return _0x508321(_0x3d9e17,_0x5d9dbe- -0x4a2);}function _0xdf0461(_0x5ce200,_0x2b5cba){return _0x2c1188(_0x2b5cba- -0xf4,_0x5ce200);}this[_0xdf0461(0x4dd,0x451)][_0x13e7f6(-0x8d,-0xa5)]?this['initWorker']():this[_0x13e7f6(-0xf0,-0x68)]=new CanvasWindField(this[_0x13e7f6(-0xad,-0xe7)]);}[_0x508321(0x406,0x397)](){function _0x31805f(_0xf68abd,_0xf190c5){return _0x508321(_0xf190c5,_0xf68abd-0x3f);}this['canvas']=this[_0x31805f(0x424,0x3d4)]();const _0x9d624c={};function _0x43a014(_0x5ee979,_0x30cca1){return _0x2c1188(_0x5ee979- -0x41b,_0x30cca1);}_0x9d624c['willReadFrequently']=!![],this[_0x31805f(0x32d,0x2d9)]=this['canvas']['getContext']('2d',_0x9d624c),this['bindEvent'](),this[_0x31805f(0x434,0x3bc)][_0x31805f(0x423,0x4b8)]&&this['setData'](this['options'][_0x31805f(0x423,0x44e)]);}['_removedHook'](){this[_0x9d01e5(0x48b,0x4af)]();function _0x54ec7f(_0x4c3a5e,_0x30e798){return _0x2c1188(_0x30e798- -0x690,_0x4c3a5e);}function _0x9d01e5(_0x548d60,_0x2095e4){return _0x508321(_0x548d60,_0x2095e4-0x164);}this[_0x9d01e5(0x4fa,0x54a)](),this['canvas']&&(this['_map'][_0x9d01e5(0x44d,0x4c1)]['removeChild'](this[_0x54ec7f(-0x293,-0x247)]),delete this['canvas']);}['_createCanvas'](){const _0x474902=mars3d__namespace['DomUtil']['create'](_0x4a5643(0x151,0x1c6),_0x4a5643(0x271,0x215),this[_0x4a5643(0x27f,0x22d)]['container']);_0x474902[_0x4a5643(0x312,0x2a1)]['position']='absolute',_0x474902['style']['top']='0px',_0x474902[_0x4a5643(0x33b,0x2a1)][_0x1459fb(-0x198,-0x15c)]='0px',_0x474902['style']['width']=this[_0x4a5643(0x238,0x22d)][_0x1459fb(-0x15e,-0x11b)]['canvas'][_0x4a5643(0x285,0x221)]+'px',_0x474902[_0x1459fb(-0xb1,-0xfb)][_0x1459fb(-0x1e2,-0x16c)]=this['_map'][_0x4a5643(0x277,0x281)]['canvas']['clientHeight']+'px',_0x474902[_0x4a5643(0x2b8,0x2a1)][_0x4a5643(0x24e,0x1d0)]=this[_0x4a5643(0x258,0x288)]?_0x1459fb(-0x17c,-0x19f):_0x1459fb(-0x245,-0x1de),_0x474902[_0x4a5643(0x280,0x2a1)]['zIndex']=this[_0x4a5643(0x317,0x2c2)][_0x4a5643(0x184,0x1d2)]??0x9;function _0x1459fb(_0x3df494,_0x49dbd6){return _0x508321(_0x3df494,_0x49dbd6- -0x4cf);}_0x474902['width']=this[_0x1459fb(-0x17e,-0x16f)]['scene']['canvas']['clientWidth'];function _0x4a5643(_0x444b74,_0x59e0c1){return _0x508321(_0x444b74,_0x59e0c1- -0x133);}return _0x474902['height']=this['_map']['scene']['canvas']['clientHeight'],_0x474902;}['resize'](){function _0x5938d2(_0xf0f69d,_0xd30404){return _0x508321(_0xd30404,_0xf0f69d- -0x3ac);}function _0x34955a(_0x1df7c8,_0x14efe3){return _0x508321(_0x14efe3,_0x1df7c8- -0x17b);}this[_0x34955a(0x17e,0x19e)]&&(this[_0x5938d2(-0xb3,-0xec)][_0x34955a(0x259,0x217)][_0x34955a(0x215,0x298)]=this[_0x34955a(0x1e5,0x1ea)]['scene']['canvas'][_0x5938d2(-0x58,-0x1e)]+'px',this['canvas']['style'][_0x34955a(0x1e8,0x270)]=this['_map']['scene']['canvas'][_0x5938d2(-0x8d,-0xc0)]+'px',this[_0x34955a(0x17e,0x20e)]['width']=this['_map']['scene'][_0x5938d2(-0xb3,-0x97)]['clientWidth'],this['canvas']['height']=this['_map']['scene']['canvas']['clientHeight']);}[_0x508321(0x42b,0x417)](){function _0x4552f3(_0x1e877e,_0x13ca61){return _0x508321(_0x1e877e,_0x13ca61- -0x1ac);}function _0x217253(_0x319185,_0x52a2bc){return _0x508321(_0x52a2bc,_0x319185- -0x2a7);}const _0xfe2c99=this;let _0x1c8dfa=Date[_0x217253(0xb5,0x47)]();(function _0x415b56(){if(_0xfe2c99['isDestroy'])return;function _0x1ef5dc(_0x196736,_0x4c0088){return _0x217253(_0x196736- -0x2c0,_0x4c0088);}_0xfe2c99['_animateFrame']=window[_0x1ef5dc(-0x148,-0x100)](_0x415b56);function _0x370d6e(_0x1bfb23,_0x1b921d){return _0x217253(_0x1b921d-0x2e0,_0x1bfb23);}if(_0xfe2c99[_0x1ef5dc(-0x1a0,-0x111)]&&_0xfe2c99['windField']){const _0x591267=Date[_0x1ef5dc(-0x20b,-0x1e4)](),_0x4e3186=_0x591267-_0x1c8dfa;_0x4e3186>_0xfe2c99['frameTime']&&(_0x1c8dfa=_0x591267-_0x4e3186%_0xfe2c99[_0x370d6e(0x3f0,0x3f1)],_0xfe2c99['update']());}}(),window['addEventListener']('resize',this['resize']['bind'](this),![]),this[_0x4552f3(0x26d,0x250)]=![],this['mouse_move']=![],this[_0x217253(0x14e,0x1bb)]['mouseHidden']&&(this[_0x217253(0xb9,0x41)]['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x217253(0xb9,0x91)]['on'](mars3d__namespace[_0x4552f3(0x231,0x243)][_0x217253(0x126,0x194)],this[_0x217253(0xe3,0x138)],this),this['_map']['on'](mars3d__namespace[_0x4552f3(0x25e,0x243)][_0x217253(0x9c,0x135)],this[_0x217253(0x129,0x181)],this)));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']),delete this[_0x52da52(-0x2aa,-0x235)],window[_0x583d94(0xc,-0x1c)]('resize',this['resize']);function _0x52da52(_0x37ad4a,_0x1f440e){return _0x508321(_0x37ad4a,_0x1f440e- -0x5b6);}function _0x583d94(_0x331b66,_0x52f17b){return _0x508321(_0x331b66,_0x52f17b- -0x417);}this[_0x52da52(-0x155,-0x1c1)][_0x52da52(-0x159,-0x1f2)]&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace[_0x52da52(-0x158,-0x1c7)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0x583d94(-0xfe,-0xd4)],this['_onMouseUpEvent'],this),this[_0x52da52(-0x2f1,-0x256)]['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x28fe36){function _0xa91b86(_0x836d59,_0x3c07fd){return _0x508321(_0x3c07fd,_0x836d59-0x4d);}if(!this['show']||!this[_0xa91b86(0x346,0x378)])return;this[_0x129351(0x25c,0x2df)]['style'][_0xa91b86(0x382,0x3e6)]=_0xa91b86(0x383,0x32d);function _0x129351(_0x8b649e,_0x138fdc){return _0x508321(_0x138fdc,_0x8b649e- -0x9d);}mars3d__namespace['Util']['funThrottle'](()=>{function _0xead05d(_0x386ce9,_0x14dfdc){return _0xa91b86(_0x14dfdc-0x74,_0x386ce9);}function _0x44d1cc(_0x51d84b,_0x2f6e2e){return _0x129351(_0x2f6e2e- -0x5bc,_0x51d84b);}this[_0x44d1cc(-0x28a,-0x2da)](),this['canvas']['style']['visibility']=_0x44d1cc(-0x29d,-0x265);},0xc8)();}[_0x508321(0x3af,0x38a)](_0x239f91){this['mouse_down']=!![];function _0x375fec(_0x5ac226,_0x3bcbb4){return _0x2c1188(_0x3bcbb4- -0x29a,_0x5ac226);}function _0x1050c5(_0x3d059b,_0x2e59aa){return _0x2c1188(_0x2e59aa- -0x781,_0x3d059b);}this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace[_0x375fec(0x21d,0x2a5)][_0x375fec(0x25a,0x28e)],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x473f48){function _0x35950c(_0x29670c,_0x57a0cd){return _0x2c1188(_0x57a0cd- -0x636,_0x29670c);}if(!this['show']||!this['canvas'])return;function _0xaa2f62(_0x3e85dc,_0x2a67ac){return _0x508321(_0x2a67ac,_0x3e85dc- -0x146);}this[_0x35950c(-0xd4,-0xea)]&&(this['canvas'][_0x35950c(-0x125,-0x112)][_0x35950c(-0x1eb,-0x1b1)]=_0xaa2f62(0x1f0,0x19e),this[_0x35950c(-0x185,-0x176)]=!![]);}[_0x508321(0x348,0x3d0)](_0x5c1736){if(!this[_0x4a8d3c(-0x1e6,-0x23c)]||!this[_0x4adc8a(0x437,0x3c2)])return;this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);this['mouse_down']&&this[_0x4adc8a(0x4ae,0x469)]&&this['redraw']();function _0x4adc8a(_0x535ff6,_0x10286e){return _0x2c1188(_0x535ff6- -0x12,_0x10286e);}this['canvas']['style']['visibility']='visible';function _0x4a8d3c(_0x3fca61,_0x225732){return _0x508321(_0x225732,_0x3fca61- -0x5ad);}this['mouse_down']=![],this['mouse_move']=![];}['setData'](_0x28708c){this[_0x1e65c1(0x108,0x174)](),this['windData']=_0x28708c,this[_0x1e65c1(0x259,0x1db)][_0x51f22e(0x26c,0x27d)](_0x28708c);function _0x51f22e(_0x51e822,_0x38f691){return _0x2c1188(_0x38f691- -0x29b,_0x51e822);}function _0x1e65c1(_0x4e27c2,_0x481ffe){return _0x508321(_0x4e27c2,_0x481ffe- -0x1d7);}this['redraw']();}[_0x2c1188(0x4cf,0x50f)](){if(!this[_0x1a77d5(0x3bb,0x40d)])return;function _0x1a77d5(_0x2c6a46,_0x196c2c){return _0x508321(_0x2c6a46,_0x196c2c-0x46);}this['windField'][_0x29e273(0x261,0x226)](this[_0x29e273(0x2dd,0x275)]);function _0x29e273(_0x27cd53,_0x3c1f9d){return _0x508321(_0x3c1f9d,_0x27cd53- -0x118);}this['update']();}['update'](){if(this[_0x59a8d0(-0x378,-0x2f7)])return;function _0x134de8(_0x716a7b,_0x36ed7c){return _0x508321(_0x716a7b,_0x36ed7c-0x73);}this['_updateIng']=!![];if(this[_0x59a8d0(-0x1c3,-0x1f2)])this[_0x59a8d0(-0x271,-0x255)]['update']();else{const _0x5dc4ac=this['windField']['getParticles']();this['_drawLines'](_0x5dc4ac);}function _0x59a8d0(_0xc99975,_0x1433fb){return _0x2c1188(_0x1433fb- -0x757,_0xc99975);}this['_updateIng']=![];}['_drawLines'](_0x2132aa){this[_0x295bd3(-0x1b1,-0x190)]=_0x2132aa,this['canvasContext'][_0x33a5e9(-0x2e1,-0x34e)]=_0x295bd3(-0x15f,-0x14c);function _0x33a5e9(_0x273217,_0x448e6b){return _0x508321(_0x448e6b,_0x273217- -0x652);}this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this[_0x33a5e9(-0x2a2,-0x278)]),this[_0x295bd3(-0x21c,-0x280)][_0x295bd3(-0x199,-0x196)]='lighter',this['canvasContext']['globalAlpha']=0.9;function _0x295bd3(_0x1ca779,_0x5b3776){return _0x2c1188(_0x1ca779- -0x65a,_0x5b3776);}const _0x12ddef=this[_0x295bd3(-0x1aa,-0x1fb)][_0x33a5e9(-0x29e,-0x271)]['mode']!==Cesium[_0x295bd3(-0x1d7,-0x21e)]['SCENE3D'],_0xa5168e=this['canvasWidth']*0.25;if(this[_0x295bd3(-0x1cd,-0x172)])for(let _0x188a34=0x0,_0x33d4b4=_0x2132aa['length'];_0x188a34<_0x33d4b4;_0x188a34++){const _0x39b470=_0x2132aa[_0x188a34],_0x4a1ede=this['_tomap'](_0x39b470,_0x39b470['lng'],_0x39b470[_0x33a5e9(-0x35c,-0x2c6)],_0x39b470[_0x33a5e9(-0x2c5,-0x350)]),_0x3b726c=this[_0x33a5e9(-0x331,-0x39c)](_0x39b470,_0x39b470['tlng'],_0x39b470['tlat'],_0x39b470[_0x33a5e9(-0x26f,-0x264)]);if(!_0x4a1ede||!_0x3b726c)continue;if(_0x12ddef&&Math[_0x33a5e9(-0x345,-0x31e)](_0x4a1ede[0x0]-_0x3b726c[0x0])>=_0xa5168e)continue;this['canvasContext'][_0x295bd3(-0x1cf,-0x19a)](),this['canvasContext'][_0x295bd3(-0x167,-0x170)]=this['lineWidth'],this[_0x295bd3(-0x21c,-0x2a2)][_0x295bd3(-0x18f,-0x136)]=this['_colorRamp'][_0x33a5e9(-0x316,-0x383)](_0x39b470['speed']),this[_0x33a5e9(-0x364,-0x350)]['moveTo'](_0x4a1ede[0x0],_0x4a1ede[0x1]),this['canvasContext']['lineTo'](_0x3b726c[0x0],_0x3b726c[0x1]),this['canvasContext']['stroke']();}else{this[_0x33a5e9(-0x364,-0x379)]['beginPath'](),this['canvasContext'][_0x33a5e9(-0x2af,-0x290)]=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x33a5e9(-0x2d2,-0x34c)];for(let _0x1a58ab=0x0,_0x34b931=_0x2132aa['length'];_0x1a58ab<_0x34b931;_0x1a58ab++){const _0x559619=_0x2132aa[_0x1a58ab],_0x2bcd2d=this['_tomap'](_0x559619,_0x559619['lng'],_0x559619['lat'],_0x559619[_0x33a5e9(-0x2c5,-0x320)]),_0x567477=this[_0x33a5e9(-0x331,-0x2da)](_0x559619,_0x559619['tlng'],_0x559619[_0x33a5e9(-0x258,-0x1cd)],_0x559619['talt']);if(!_0x2bcd2d||!_0x567477)continue;if(_0x12ddef&&Math['abs'](_0x2bcd2d[0x0]-_0x567477[0x0])>=_0xa5168e)continue;this['canvasContext']['moveTo'](_0x2bcd2d[0x0],_0x2bcd2d[0x1]),this[_0x295bd3(-0x21c,-0x218)]['lineTo'](_0x567477[0x0],_0x567477[0x1]);}this[_0x33a5e9(-0x364,-0x2fb)]['stroke']();}}[_0x508321(0x32c,0x321)](_0x3558f1,_0x20ecc3,_0x748a6,_0x2e2e27){function _0x24ab54(_0x4e6d06,_0x193858){return _0x2c1188(_0x193858- -0x603,_0x4e6d06);}const _0x3fb4f2=Cesium['Cartesian3']['fromDegrees'](_0x20ecc3,_0x748a6,_0x2e2e27??this['fixedHeight']);function _0x6a6123(_0xeef4ef,_0x577667){return _0x2c1188(_0x577667- -0x359,_0xeef4ef);}const _0x360531=this[_0x6a6123(0x1cc,0x157)][_0x24ab54(-0x8c,-0xff)];if(_0x360531['mode']===Cesium['SceneMode']['SCENE3D']){const _0x471f76=new Cesium['EllipsoidalOccluder'](_0x360531['globe'][_0x6a6123(0xf3,0x147)],_0x360531['camera'][_0x6a6123(0x1bd,0x1fc)]),_0xf5f879=_0x471f76['isPointVisible'](_0x3fb4f2);if(!_0xf5f879)return _0x3558f1[_0x24ab54(-0x19b,-0x1a1)]=0x0,null;}const _0x3d69b8=mars3d__namespace[_0x6a6123(0x1be,0x18a)][_0x6a6123(0x1d2,0x1d8)](this['_map']['scene'],_0x3fb4f2);return _0x3d69b8?[_0x3d69b8['x'],_0x3d69b8['y']]:null;}['clear'](){function _0x50f586(_0x4dcfa1,_0x2539bb){return _0x508321(_0x2539bb,_0x4dcfa1-0xf9);}this['windField'][_0x50f586(0x444,0x4bc)](),delete this['windData'];}['initWorker'](){this['worker']=new Worker(this['options']['worker']),this['worker'][_0x38b5c3(0x23a,0x256)]=_0x250315=>{function _0xadf24a(_0x5c755f,_0x3f4f1c){return _0x38b5c3(_0x5c755f- -0x546,_0x3f4f1c);}this[_0xadf24a(-0x217,-0x22f)](_0x250315['data']['particles']),this['_updateIng2']=![];};function _0xa9f6b3(_0x2b1298,_0x5a8450){return _0x508321(_0x2b1298,_0x5a8450- -0x1d9);}function _0x38b5c3(_0x1caad3,_0x313c78){return _0x508321(_0x313c78,_0x1caad3- -0xeb);}this['windField']={'init':_0x45c627=>{function _0x23e857(_0x537114,_0x34c7a4){return _0x38b5c3(_0x34c7a4- -0x2a4,_0x537114);}const _0x30d931={};function _0x4e876f(_0x2230c8,_0x5c0a96){return _0x38b5c3(_0x5c0a96- -0x3a9,_0x2230c8);}_0x30d931['type']='init',_0x30d931[_0x4e876f(-0x33,-0x9f)]=_0x45c627,this[_0x23e857(0x11d,0x86)][_0x23e857(-0x7e,-0x42)](_0x30d931);},'setOptions':_0x1c0280=>{const _0x5e6783={};_0x5e6783['type']=_0x5b8440(-0x17b,-0x1f6),_0x5e6783['options']=_0x1c0280;function _0x3f8aa3(_0x414254,_0x18f057){return _0x38b5c3(_0x18f057- -0x3c1,_0x414254);}function _0x5b8440(_0x4c3c7b,_0x4fb2d2){return _0x38b5c3(_0x4fb2d2- -0x484,_0x4c3c7b);}this['worker'][_0x5b8440(-0x29d,-0x222)](_0x5e6783);},'setDate':_0x3596ba=>{const _0x4bf2d2={};_0x4bf2d2['type']='setDate',_0x4bf2d2['data']=_0x3596ba;function _0x12b1f2(_0x5acd83,_0xb9b7e5){return _0x38b5c3(_0x5acd83- -0x27e,_0xb9b7e5);}this[_0x12b1f2(0xac,0xf8)]['postMessage'](_0x4bf2d2);},'update':()=>{if(this['_updateIng2'])return;this[_0x2e56f2(-0x26a,-0x21f)]=!![];function _0x56a1fa(_0x3610a9,_0x17b23c){return _0x38b5c3(_0x3610a9-0x1ea,_0x17b23c);}const _0x18451f={};_0x18451f[_0x2e56f2(-0x2b6,-0x22b)]='update';function _0x2e56f2(_0x44ed0d,_0x3540da){return _0x38b5c3(_0x44ed0d- -0x4e5,_0x3540da);}this[_0x2e56f2(-0x1bb,-0x187)][_0x56a1fa(0x44c,0x42f)](_0x18451f);},'clear':()=>{function _0x4f82f9(_0x48467c,_0x3c15ff){return _0x38b5c3(_0x48467c- -0x47e,_0x3c15ff);}const _0x6fe39c={};function _0x5854ac(_0x24a21d,_0x32588b){return _0x38b5c3(_0x32588b-0x54,_0x24a21d);}_0x6fe39c['type']='clear',this[_0x5854ac(0x3fc,0x37e)][_0x4f82f9(-0x21c,-0x1e1)](_0x6fe39c);}},this[_0xa9f6b3(0x1b3,0x1d9)]['init'](this[_0xa9f6b3(0x229,0x21c)]);}}mars3d__namespace[_0x2c1188(0x45f,0x3d6)][_0x2c1188(0x473,0x3e4)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer'][_0x2c1188(0x47c,0x411)]=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil;function _0x2c1188(_0x5f3b36,_0x319c02){return _0x5386(_0x5f3b36-0x3cb,_0x319c02);}exports[_0x508321(0x42c,0x3de)]=CanvasWindField,exports[_0x508321(0x2e6,0x32c)]=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x1090d3={};_0x1090d3['value']=!![],Object['defineProperty'](exports,_0x2c1188(0x509,0x50e),_0x1090d3);function _0x32a2(){const _0x47fe2c=['data','_createCanvas','unbindEvent','drawingBufferHeight','pixelFormat','screen','pixelDatatype','off','GeometryAttributes','canvasResize','cols','EventType','colour','tlng','windData','particles','visible','options','layer','_randomParticle','array','setGeometry','tlat','removeEventListener','mouse_down','maxAge','attributeLocations','windTextures','RGB','clampToLatitudeRange','destroyParticlesTextures','vertexShaderSource','geometry','positionWC','RenderState','lng','execute','add','segmentsColor','enabled','fragmentShaderSource','steps','commandType','max','currentParticlesPosition','UNSIGNED_INT','1170955aoedKq','createComputingPrimitives','calculateSpeed','worker','commandToExecute','bindEvent','PI_OVER_TWO','currentTrails','_drawLines','segments','commandList','grid','getU','requestAnimationFrame','refreshParticles','context','24xFrlCj','canvasContext','PrimitiveType','ZERO','none','outputTexture','641178sSKWlY','getFullscreenQuad','_onMapWhellEvent','lat','trails','getRandomLatLng','canvas','ShaderSource','vmax','shaderProgram','speed','GeometryAttribute','Cartesian3','rgb(206,255,255)','create','BoundingSphere','pointerEvents','nextTrailsColor','zIndex','10179182UVAKiD','PI_OVER_THREE','224232UCXeAy','createFramebuffer','NEAREST','getValidRange','Rectangle','abs','_calcUV','LayerUtil','_updateIng','viewRectangleToLonLatRange','age','WGS84','getOptions','createRenderingFramebuffers','forEach','segmentsDepth','destroy','433477pQuyPP','type','viewerParameters','ComponentDatatype','viewport','_data','clientHeight','particlesTextureSize','_tomap','fixedHeight','register','_setOptionsHook','onmessage','ymin','floor','fromGeometry','vdata','length','particleSystem','CanvasWindLayer','framebuffers','default','dimensions','auto','nextTrails','VertexArray','SceneMode','particlesComputing','visibility','hidden','DEPTH_COMPONENT','defined','createTexture','wSpeedRange','beginPath','getColor','_colorRamp','particlesSpeed','textures','fromDegrees','framebuffer','arrayBufferView','mouseUp','ceil','FLOAT','mode','particleHeight','mars3d-canvasWind','#version\x20300\x20es\x0a\x0ain\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20gl_Position\x20=\x20vec4(position,\x201.0f);\x0a}\x0a','sqrt','clear','lonRange','postMessage','clearFramebuffers','rawRenderState','ellipsoid','toDegrees','minimum','addPrimitives','clientWidth','Pass','PixelDatatype','once','TWO_PI','_canvasParticles','primitives','xmax','now','container','drawingBufferWidth','latRange','_map','Texture','RED','height','particlesTextures','vmin','_updateIng2','getColorTexture','preRender','vertexArray','clearCommand','umax','vSpeedRange','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20W;\x20//\x20upward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0auniform\x20float\x20speedScaleFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20//\x20map\x20the\x20z-axis\x20value\x20to\x20the\x20nearest\x20bit\x20plane\x20to\x20ensure\x20that\x20the\x20result\x20is\x20an\x20integer\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205,\x207,\x208,\x209],\x20width\x20=\x202,\x20height\x20=\x202,\x20level\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x206\x207\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x202\x203\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0afloat\x20interpolateTexture(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x201.0f\x20*\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x201.0f\x20*\x20interval.y;\x0a\x0a\x20\x20float\x20lon0_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon1_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon0_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat1,\x20lev));\x0a\x20\x20float\x20lon1_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat1,\x20lev));\x0a\x0a\x20\x20float\x20lon_lat0\x20=\x20mix(lon0_lat0,\x20lon1_lat0,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat1\x20=\x20mix(lon0_lat1,\x20lon1_lat1,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat\x20=\x20mix(lon_lat0,\x20lon_lat1,\x20lat\x20-\x20lat0);\x0a\x20\x20return\x20lon_lat;\x0a}\x0a\x0avec3\x20linearInterpolation(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bilinear_interpolation\x0a\x20\x20float\x20u\x20=\x20interpolateTexture(U,\x20lonLatLev);\x0a\x20\x20float\x20v\x20=\x20interpolateTexture(V,\x20lonLatLev);\x0a\x20\x20float\x20w\x20=\x20interpolateTexture(W,\x20lonLatLev);\x0a\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec3\x20convertSpeedUnitToLonLat(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20float\x20w\x20=\x20speed.z;\x0a\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20return\x20windVectorInLonLatLev;\x0a}\x0a\x0avec3\x20calculateSpeedByRungeKutta2(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec3\x20y_n\x20=\x20lonLatLev;\x0a\x20\x20vec3\x20f_n\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec3\x20speed\x20=\x20h\x20*\x20linearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20getRange(vec2\x20range)\x20{\x0a\x20\x20float\x20x1\x20=\x200.0f\x20-\x20range.x;\x0a\x20\x20float\x20x2\x20=\x20range.y\x20-\x200.0f;\x0a\x20\x20if(x1\x20<\x200.0f\x20||\x20x2\x20<\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(abs(x1),\x20abs(x2));\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x20abs(max(x1,\x20x2)));\x0a\x20\x20}\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20vec2\x20uRange\x20=\x20getRange(uSpeedRange);\x0a\x20\x20vec2\x20vRange\x20=\x20getRange(vSpeedRange);\x0a\x20\x20vec2\x20wRange\x20=\x20getRange(wSpeedRange);\x0a\x20\x20if(length(speed.xyz)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x200.0f;\x0a\x20\x20}\x0a\x0a\x20\x20percent.x\x20=\x20(abs(speed.x)\x20-\x20uRange.x)\x20/\x20(uRange.y\x20-\x20uRange.x);\x0a\x20\x20percent.y\x20=\x20(abs(speed.y)\x20-\x20vRange.x)\x20/\x20(vRange.y\x20-\x20vRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(abs(speed.z)\x20-\x20wRange.x)\x20/\x20(wRange.y\x20-\x20wRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speedOrigin\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLatLev);\x0a\x20\x20vec3\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLatLev,\x20speed);\x0a\x0a\x20\x20vec4\x20particleSpeed\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speed\x20/\x20speedScaleFactor));\x0a\x20\x20\x20\x20//\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','__proto__','toGridXY','mouse_move','globalCompositeOperation','#ffffff','left','east','rows','Cesium','resize','ShaderProgram','setOptions','pointer-events','strokeStyle','colors','3wMRydh','getUVByXY','redraw','color','_animateFrame','Sampler','depthTest','3754718UQKDtA','dropRateBump','min','_speedRate','reverse','updateViewerParameters','_onMouseDownEvent','getUVByPoint','particlesRendering','alt','fadeOpacity','isDestroyed','width','push','2QhyaOJ','PointTrans','Draw','fromCache','colorTable','_addedHook','3596488NVRFKe','6VVXkwN','position','get','randomizeParticles','OPAQUE','STATIC_DRAW','nextParticlesPosition','random','postProcessingPosition','applyViewerParameters','lineWidth','xmin','refreshTimer','minimumRadius','BaseLayer','dynamic','particlesNumber','globeBoundingSphere','destination-in','pow','west','_onMouseMoveEvent','udata','canvasHeight','preExecute','windField','createParticlesTextures','scene','uniformMap','red','ymax','frameTime','__esModule','Cartesian2','_pointerEvents','defines','TRIANGLES','rectangle','levmax','_calc_speedRate','dimension','PixelFormat','TextureMagnificationFilter','mouseHidden','createRawRenderState','Color','show','setDate','camera','createRenderingPrimitives','createSegmentsGeometry','speedRate','mouseDown','8YzYGfz','lon','_onMouseUpEvent','Geometry','Math','speedFactor','style','blending','sources','100Ustcwl','mouseMove','ComputeCommand','maximum','update','setData','lev','CanvasWindField','keys','Compute','toWindowCoordinates','DrawCommand','talt'];_0x32a2=function(){return _0x47fe2c;};return _0x32a2();}
}));
