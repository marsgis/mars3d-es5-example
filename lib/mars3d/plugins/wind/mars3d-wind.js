/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.6
 * 编译日期：2024-11-05 23:22
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x5ef79b,_0x136d7a){function _0x3d2545(_0x8819d3,_0x4e58c8){return _0x4650(_0x4e58c8-0x11e,_0x8819d3);}const _0xd72853=_0x5ef79b();function _0xcfe8c3(_0x888b59,_0x525587){return _0x4650(_0x888b59- -0x258,_0x525587);}while(!![]){try{const _0x106ca0=-parseInt(_0x3d2545(0x21d,0x285))/0x1*(-parseInt(_0x3d2545(0x271,0x209))/0x2)+parseInt(_0x3d2545(0x260,0x1f8))/0x3+parseInt(_0xcfe8c3(-0xb0,-0x123))/0x4*(-parseInt(_0x3d2545(0x2fe,0x2a2))/0x5)+-parseInt(_0x3d2545(0x27e,0x24c))/0x6*(parseInt(_0x3d2545(0x1b5,0x249))/0x7)+-parseInt(_0xcfe8c3(-0x4d,0x3f))/0x8+parseInt(_0xcfe8c3(-0x9d,-0xd1))/0x9+parseInt(_0x3d2545(0x2cb,0x2ba))/0xa*(parseInt(_0x3d2545(0x25f,0x20e))/0xb);if(_0x106ca0===_0x136d7a)break;else _0xd72853['push'](_0xd72853['shift']());}catch(_0x4e6190){_0xd72853['push'](_0xd72853['shift']());}}}(_0x2d76,0xcd4c0));function _interopNamespace(_0x4e8dce){if(_0x4e8dce&&_0x4e8dce[_0x45c491(-0xf2,-0xa7)])return _0x4e8dce;var _0x81a696=Object[_0x45c491(-0x17d,-0x1ce)](null);_0x4e8dce&&Object['keys'](_0x4e8dce)[_0xa7d0d5(0xda,0x166)](function(_0x5e6cd5){if(_0x5e6cd5!=='default'){var _0x5df617=Object['getOwnPropertyDescriptor'](_0x4e8dce,_0x5e6cd5);Object['defineProperty'](_0x81a696,_0x5e6cd5,_0x5df617['get']?_0x5df617:{'enumerable':!![],'get':function(){return _0x4e8dce[_0x5e6cd5];}});}});_0x81a696['default']=_0x4e8dce;function _0x45c491(_0x5199ff,_0xdf76e4){return _0x4650(_0x5199ff- -0x289,_0xdf76e4);}function _0xa7d0d5(_0x4cfa56,_0x57f77e){return _0x4650(_0x4cfa56- -0x4,_0x57f77e);}return _0x81a696;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0x3503b1,_0x198e4b){function _0xb05d17(_0x44be5c,_0x52f008){return _0x4650(_0x44be5c-0xe9,_0x52f008);}function _0x2afbf7(_0x4c9ca1,_0xa380c){return _0x4650(_0xa380c-0x18d,_0x4c9ca1);}const _0x4af814=_0x3503b1*Math[_0x2afbf7(0x388,0x368)](Cesium$7[_0x2afbf7(0x2ac,0x2a8)]['toRadians'](_0x198e4b));return _0x4af814;}function getV(_0x558804,_0x561da0){const _0x1515c4=_0x558804*Math['sin'](Cesium$7[_0x49b590(0x15e,0xd8)]['toRadians'](_0x561da0));function _0x49b590(_0x51601c,_0x33eb6a){return _0x4650(_0x51601c-0x43,_0x33eb6a);}return _0x1515c4;}function getSpeed(_0x2151cc,_0xf595d){function _0x597a85(_0xbceaa0,_0x80317a){return _0x4650(_0x80317a- -0x23f,_0xbceaa0);}const _0x6ef7b3=Math['sqrt'](Math['pow'](_0x2151cc,0x2)+Math[_0x597a85(-0xe2,-0x14a)](_0xf595d,0x2));return _0x6ef7b3;}function getDirection(_0x45ec65,_0x176ee5){function _0x3cd0b7(_0x55fe75,_0x1b487f){return _0x4650(_0x1b487f- -0x144,_0x55fe75);}let _0x21d3f0=Cesium$7['Math'][_0x3cd0b7(-0xd,0x29)](Math['atan2'](_0x176ee5,_0x45ec65));return _0x21d3f0+=_0x21d3f0<0x0?0x168:0x0,_0x21d3f0;}function _0x20a044(_0x4a6bdf,_0xcc6723){return _0x4650(_0xcc6723- -0x2f4,_0x4a6bdf);}const _0x2fc72f={};_0x2fc72f['__proto__']=null,_0x2fc72f['getU']=getU,_0x2fc72f[_0x20a044(-0x13a,-0x1bc)]=getV,_0x2fc72f['getSpeed']=getSpeed,_0x2fc72f['getDirection']=getDirection;var WindUtil=_0x2fc72f;const Cesium$6=mars3d__namespace[_0x20a044(-0x147,-0x183)];function _0x5218ea(_0xe15cbd,_0xc72324){return _0x4650(_0xe15cbd-0x9f,_0xc72324);}class CustomPrimitive{constructor(_0x4a33c6){this['commandType']=_0x4a33c6['commandType'],this[_0x43e748(-0x181,-0x1eb)]=_0x4a33c6['geometry'];function _0x4e4b9f(_0xc73800,_0x239ee3){return _0x20a044(_0x239ee3,_0xc73800-0x1cb);}this[_0x4e4b9f(-0x51,-0x92)]=_0x4a33c6['attributeLocations'],this['primitiveType']=_0x4a33c6[_0x43e748(-0x16e,-0x1a1)],this['uniformMap']=_0x4a33c6['uniformMap'],this[_0x4e4b9f(0x8d,0xc)]=_0x4a33c6['vertexShaderSource'],this[_0x4e4b9f(0x1d,0x7)]=_0x4a33c6['fragmentShaderSource'];function _0x43e748(_0x32fff7,_0x2fdcaa){return _0x20a044(_0x2fdcaa,_0x32fff7- -0x2e);}this['rawRenderState']=_0x4a33c6['rawRenderState'],this['framebuffer']=_0x4a33c6[_0x4e4b9f(0x19,0x8c)],this[_0x43e748(-0x1f2,-0x1b3)]=_0x4a33c6[_0x43e748(-0x1f2,-0x273)],this[_0x43e748(-0x145,-0xf5)]=_0x4a33c6[_0x43e748(-0x145,-0x140)]??![],this['preExecute']=_0x4a33c6['preExecute'],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this[_0x43e748(-0x145,-0x159)]&&(this[_0x4e4b9f(0x79,0x7)]=new Cesium$6['ClearCommand']({'color':new Cesium$6['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6['Pass']['OPAQUE']}));}['createCommand'](_0x1a5603){function _0x4088f8(_0x5621cc,_0x359782){return _0x20a044(_0x359782,_0x5621cc-0x565);}function _0x305b8d(_0x464a4e,_0x5f4849){return _0x20a044(_0x464a4e,_0x5f4849-0x2ed);}switch(this['commandType']){case'Draw':{const _0x2c17f3=Cesium$6[_0x305b8d(0xf1,0x15a)]['fromGeometry']({'context':_0x1a5603,'geometry':this['geometry'],'attributeLocations':this[_0x4088f8(0x349,0x2fd)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']}),_0x3f5917={};_0x3f5917[_0x4088f8(0x3c1,0x37b)]=_0x1a5603,_0x3f5917['attributeLocations']=this[_0x4088f8(0x349,0x39d)],_0x3f5917['vertexShaderSource']=this['vertexShaderSource'],_0x3f5917['fragmentShaderSource']=this[_0x305b8d(0x125,0x13f)];const _0x585106=Cesium$6[_0x305b8d(0x64,0xe0)]['fromCache'](_0x3f5917),_0x2e3ece=Cesium$6[_0x305b8d(0xc0,0xe8)][_0x305b8d(0x180,0xf9)](this['rawRenderState']);return new Cesium$6['DrawCommand']({'owner':this,'vertexArray':_0x2c17f3,'primitiveType':this[_0x305b8d(0x16c,0x1ad)],'uniformMap':this[_0x4088f8(0x39e,0x37b)],'modelMatrix':Cesium$6['Matrix4'][_0x305b8d(0x1d3,0x200)],'shaderProgram':_0x585106,'framebuffer':this[_0x4088f8(0x3b3,0x332)],'renderState':_0x2e3ece,'pass':Cesium$6[_0x305b8d(0x196,0x111)]['OPAQUE']});}case _0x4088f8(0x3d3,0x45a):{const _0x9cc63d={};return _0x9cc63d[_0x4088f8(0x3e0,0x370)]=this,_0x9cc63d[_0x4088f8(0x3b7,0x423)]=this['fragmentShaderSource'],_0x9cc63d['uniformMap']=this[_0x305b8d(0xa3,0x126)],_0x9cc63d['outputTexture']=this['outputTexture'],_0x9cc63d['persists']=!![],new Cesium$6[(_0x4088f8(0x41f,0x408))](_0x9cc63d);}}}[_0x20a044(-0x88,-0xf8)](_0x52e07c,_0x4cd6f9){this[_0x32a288(-0x2a5,-0x20d)]=_0x4cd6f9;const _0x2c817a=Cesium$6['VertexArray'][_0x5175b8(0x2ff,0x31e)]({'context':_0x52e07c,'geometry':this[_0x5175b8(0x395,0x3e4)],'attributeLocations':this[_0x5175b8(0x28e,0x31b)],'bufferUsage':Cesium$6[_0x5175b8(0x2d8,0x323)]['STATIC_DRAW']});function _0x5175b8(_0x3ee6b8,_0x3b15c8){return _0x5218ea(_0x3b15c8-0x1a4,_0x3ee6b8);}function _0x32a288(_0x446a49,_0x88b2ac){return _0x20a044(_0x446a49,_0x88b2ac- -0xba);}this[_0x5175b8(0x394,0x335)]['vertexArray']=_0x2c817a;}[_0x5218ea(0x2a9,0x314)](_0x656ad6){if(!this[_0x23a68a(0x28f,0x249)])return;if(_0x656ad6['mode']!==Cesium$6[_0x23a68a(0x28c,0x2ed)]['SCENE3D'])return;!Cesium$6['defined'](this['commandToExecute'])&&(this['commandToExecute']=this[_0x23a68a(0x246,0x22f)](_0x656ad6[_0x35c84a(-0x60,-0xe7)]));Cesium$6['defined'](this[_0x35c84a(-0x3f,-0x8d)])&&this[_0x23a68a(0x2ac,0x2c7)]();Cesium$6['defined'](this['clearCommand'])&&_0x656ad6['commandList']['push'](this['clearCommand']);function _0x23a68a(_0xbc7599,_0x579dd4){return _0x5218ea(_0x579dd4-0x7e,_0xbc7599);}function _0x35c84a(_0x2b7da5,_0x83203f){return _0x5218ea(_0x83203f- -0x2d6,_0x2b7da5);}_0x656ad6['commandList']['push'](this[_0x23a68a(0x1e3,0x20f)]);}['isDestroyed'](){return![];}['destroy'](){if(this[_0x45bbcd(0x2dc,0x2d6)]){var _0x557c4b,_0x43b3ab;(_0x557c4b=this['clearCommand'])!==null&&_0x557c4b!==void 0x0&&_0x557c4b[_0x211bd(0xd3,0x6a)]&&this['clearCommand']['vertexArray']['destroy'](),(_0x43b3ab=this[_0x45bbcd(0x2dc,0x306)])!==null&&_0x43b3ab!==void 0x0&&_0x43b3ab[_0x45bbcd(0x22d,0x210)]&&this[_0x211bd(0xc2,0x158)][_0x45bbcd(0x22d,0x2bc)][_0x211bd(0x11,0x9)](),delete this['clearCommand'];}function _0x45bbcd(_0x4894ec,_0x158e57){return _0x5218ea(_0x4894ec-0x9b,_0x158e57);}this['commandToExecute']&&(this['commandToExecute'][_0x211bd(0xd3,0x106)]&&this['commandToExecute']['vertexArray'][_0x45bbcd(0x22b,0x1ad)](),this[_0x211bd(0x12,0x12)]['shaderProgram']&&this['commandToExecute']['shaderProgram']['destroy'](),delete this['commandToExecute']);function _0x211bd(_0x2ef901,_0x18f071){return _0x5218ea(_0x2ef901- -0x17f,_0x18f071);}return Cesium$6[_0x211bd(0x129,0xd4)](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0xa7ff09=function(){const _0x8d8df7=new Cesium$5['Geometry']({'attributes':new Cesium$5['GeometryAttributes']({'position':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0xd2aafe(-0x2b,-0xbc)][_0xd2aafe(-0x166,-0x171)],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0xd2aafe(-0x124,-0xbc)]['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});function _0x223c73(_0x356bd6,_0xe65b05){return _0x4650(_0x356bd6-0x23f,_0xe65b05);}function _0xd2aafe(_0x511a89,_0x11188e){return _0x4650(_0x11188e- -0x269,_0x511a89);}return _0x8d8df7;},_0x2985af=function(_0x15a956,_0x3738f8){if(Cesium$5['defined'](_0x3738f8)){const _0x5d6e9d={};_0x5d6e9d['arrayBufferView']=_0x3738f8,_0x15a956['source']=_0x5d6e9d;}const _0x107b87=new Cesium$5['Texture'](_0x15a956);return _0x107b87;},_0x322aaa=function(_0x54a730,_0xf98c3e,_0x172a3e){const _0x519330={};_0x519330[_0x394aa7(0x19e,0x14c)]=_0x54a730,_0x519330['colorTextures']=[_0xf98c3e],_0x519330['depthTexture']=_0x172a3e;function _0x394aa7(_0x413503,_0x150a5d){return _0x4650(_0x150a5d- -0x4,_0x413503);}function _0x530ade(_0x17da42,_0x4c4b5f){return _0x4650(_0x17da42- -0x1ec,_0x4c4b5f);}const _0x18f34b=new Cesium$5[(_0x530ade(-0x29,-0xc3))](_0x519330);return _0x18f34b;},_0x2dd160=function(_0x538b4c){function _0x5db454(_0x1abf69,_0x1dfebb){return _0x4650(_0x1abf69- -0x1ac,_0x1dfebb);}const _0xa91da1=!![],_0x1839f8=![],_0x408814={};_0x408814['viewport']=_0x538b4c[_0x6df795(-0x11e,-0x12a)],_0x408814[_0x5db454(-0xf,0x44)]=_0x538b4c[_0x6df795(-0x10e,-0x168)],_0x408814['depthMask']=_0x538b4c['depthMask'],_0x408814['blending']=_0x538b4c[_0x6df795(-0x1b0,-0x18f)];const _0x187b5a=_0x408814;function _0x6df795(_0x550381,_0x11e6f8){return _0x4650(_0x550381- -0x2ab,_0x11e6f8);}const _0x4b94e2=Cesium$5[_0x5db454(0x1f,0x3e)]['getDefaultRenderState'](_0xa91da1,_0x1839f8,_0x187b5a);return _0x4b94e2;},_0x96ed1b=function(_0x79f5a8){const _0x1d5564={},_0x23452f=Cesium$5['Math']['mod'](_0x79f5a8['west'],Cesium$5[_0x3c2c82(0x41c,0x4aa)][_0x2dd15a(0x280,0x311)]);function _0x3c2c82(_0xbc38a,_0x4a2003){return _0x4650(_0x4a2003-0x38f,_0xbc38a);}const _0x30b9a9=Cesium$5['Math']['mod'](_0x79f5a8[_0x2dd15a(0x33c,0x35e)],Cesium$5['Math']['TWO_PI']),_0x285982=_0x79f5a8[_0x3c2c82(0x51c,0x549)];let _0x309f51,_0x2ee9a8;_0x285982>Cesium$5['Math'][_0x2dd15a(0x25e,0x1f2)]?(_0x309f51=0x0,_0x2ee9a8=Cesium$5[_0x3c2c82(0x43b,0x4aa)]['TWO_PI']):_0x30b9a9-_0x23452f<_0x285982?(_0x309f51=_0x23452f,_0x2ee9a8=_0x23452f+_0x285982):(_0x309f51=_0x23452f,_0x2ee9a8=_0x30b9a9);_0x1d5564[_0x3c2c82(0x53a,0x58a)]={'min':Cesium$5['Math'][_0x2dd15a(0x2e5,0x34b)](_0x309f51),'max':Cesium$5[_0x3c2c82(0x420,0x4aa)][_0x2dd15a(0x2e5,0x260)](_0x2ee9a8)};const _0x572eb4=_0x79f5a8[_0x3c2c82(0x546,0x4de)],_0x32556f=_0x79f5a8[_0x3c2c82(0x540,0x567)],_0x47511b=_0x79f5a8['height'],_0x2ec80d=_0x47511b>Cesium$5[_0x3c2c82(0x4f0,0x4aa)]['PI']/0xc?_0x47511b/0x2:0x0;let _0xcd8fae=Cesium$5[_0x3c2c82(0x4f3,0x4aa)][_0x3c2c82(0x4cc,0x522)](_0x572eb4-_0x2ec80d),_0x5a13c5=Cesium$5['Math']['clampToLatitudeRange'](_0x32556f+_0x2ec80d);_0xcd8fae<-Cesium$5['Math'][_0x3c2c82(0x569,0x561)]&&(_0xcd8fae=-Cesium$5[_0x2dd15a(0x293,0x212)][_0x2dd15a(0x2c1,0x2c9)]);function _0x2dd15a(_0x1cf8e3,_0xa13673){return _0x4650(_0x1cf8e3-0x178,_0xa13673);}return _0x5a13c5>Cesium$5[_0x3c2c82(0x496,0x4aa)]['PI_OVER_THREE']&&(_0x5a13c5=Cesium$5['Math']['PI_OVER_TWO']),_0x1d5564['lat']={'min':Cesium$5['Math']['toDegrees'](_0xcd8fae),'max':Cesium$5['Math']['toDegrees'](_0x5a13c5)},_0x1d5564;},_0x2175ae={};_0x2175ae['getFullscreenQuad']=_0xa7ff09,_0x2175ae['createTexture']=_0x2985af,_0x2175ae['createFramebuffer']=_0x322aaa,_0x2175ae[_0x4144b7(0x22c,0x1dc)]=_0x2dd160,_0x2175ae['viewRectangleToLonLatRange']=_0x96ed1b;function _0x4144b7(_0x38c9e0,_0x25f1bd){return _0x20a044(_0x38c9e0,_0x25f1bd-0x2ce);}return _0x2175ae;}());var fullscreenVert='#version\x20300\x20es\x0a\x0ain\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20gl_Position\x20=\x20vec4(position,\x201.0f);\x0a}\x0a',screenDrawFrag=_0x5218ea(0x274,0x265),segmentDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20bool\x20colour;\x0a\x0ain\x20float\x20heightNormalization;\x0ain\x20float\x20speedNormalization;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speedNormalization\x20>\x20zero)\x20{\x0a\x20\x20\x20\x20if(colour)\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(heightNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',segmentDrawVert='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20lines\x20drawing\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0auniform\x20vec2\x20hRange;\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0aout\x20float\x20heightNormalization;\x0aout\x20float\x20speedNormalization;\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight\x20+\x20lonLatLev.z;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0f,\x20360.0f)\x20-\x20180.0f;\x0a\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0f;\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(speed.z\x20-\x20wSpeedRange.x)\x20/\x20(wSpeedRange.y\x20-\x20wSpeedRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20vec3\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rgb;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x20\x20\x20\x20//\x20render\x20lines\x20with\x20triangles\x20and\x20miter\x20joint\x0a\x20\x20\x20\x20//\x20read\x20https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html\x20for\x20detail\x0a\x20\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20projectedCoordinates.next,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.next\x20+\x20offset;\x0a\x20\x20}\x0a\x0a\x20\x20heightNormalization\x20=\x20(currentPosition.z\x20-\x20hRange.x)\x20/\x20(hRange.y\x20-\x20hRange.x);\x0a\x0a\x20\x20speedNormalization\x20=\x20texture(particlesSpeed,\x20particleIndex).a;\x0a}\x0a',trailDrawFrag='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0aout\x20vec4\x20fragColor;\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0f\x20*\x20trailsColor)\x20/\x20255.0f;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20if(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20pointsColor;\x0a\x20\x20}\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20trailsColor;\x0a\x20\x20}\x0a\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a';function _0x2d76(){const _0x6c17c5=['xmin','addEventListener','635lbxhAi','_onMouseDownEvent','camera','mouse_move','getUVByXY','WindUtil','tlng','ShaderSource','TextureMinificationFilter','viewport','canvasHeight','_animateFrame','dropRateBump','add','speedScaleFactor','clampToLatitudeRange','defineProperty','preRender','_calcUV','__esModule','grid','onmessage','clientHeight','PrimitiveType','3501340VhxYlB','depthTest','windData','getContext','CanvasWindField','geometry','clearCommand','DEPTH_COMPONENT','zIndex','getParticles','worker','_tomap','13660dpvcKX','min','preExecute','_speedRate','removeEventListener','ComponentDatatype','ComputeCommand','Geometry','removeAll','canvasWidth','speedRate','vertexArray','primitiveType','isPointVisible','vertexShaderSource','clear','EventType','setDate','width','6358068lqmeiP','UNSIGNED_INT','computeViewRectangle','layer','randomBetween','redraw','applyViewerParameters','_updateIng','Framebuffer','east','Cartesian2','wheel','speed','windTextures','particlesTextureSize','latRange','Appearance','colors','globeBoundingSphere','_canvasParticles','TRIANGLES','SceneMode','0px','PI_OVER_THREE','lonRange','off','#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20trailsColor;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a','_removedHook','particlesNumber','north','Color','dropRate','cos','resize','autoClear','getColor','windField','_maxAge','lighter','bind','WindLayer','dynamic','getFullscreenQuad','UNSIGNED_BYTE','calculateSpeed','pointerEvents','sqrt','log','tlat','visible','red','init','fadeOpacity','canvasContext','fixedHeight','mouseUp','mars3d-canvasWind','drawingBufferWidth','currentParticlesPosition','refreshTimer','_map','NEAREST','createTexture','random','lon','setGeometry','canvasResize','vmin','positionWC','maxParticles','canvas','createRawRenderState','GeometryAttribute','globe','options','dimensions','IDENTITY','wind','destroyObject','update','12468352GZFyvm','getOptions','attributeLocations','scene','1924554OoTusG','fromGeometry','speedFactor','rgb(206,255,255)','forEach','vdata','BufferUsage','wSpeedRange','frameRate','maxAge','_colorRamp','CanvasWindLayer','THREE_PI_OVER_TWO','ShaderProgram','umax','colour','STATIC_DRAW','32988peJdTf','ZERO','createRenderingPrimitives','_calc_speedRate','RenderState','66tYPBwW','destroy','commandToExecute','shaderProgram','particleHeight','pow','particlesSpeed','_addedHook','FLOAT','_onMouseUpEvent','reverse','blending','RGBA','rows','left','Cartesian3','fromCache','BaseLayer','lev','hidden','data','lineWidth','createSegmentsGeometry','OPAQUE','TWO_PI','Sampler','fill','TextureMagnificationFilter','create','beginPath','ymin','ymax','absolute','reverseY','createCommand','_createCanvas','DomUtil','keys','Ellipsoid','xmax','Pass','_mountedHook','mouseDown','Math','particlesTextures','type','round','age','length','createWindTextures','previousParticlesPosition','defines','push','LayerUtil','pixelFormat','EllipsoidalOccluder','lineTo','viewRectangleToLonLatRange','postMessage','2933tSbpmG','show','uniformMap','21570rYpdVX','fromDegrees','outputTexture','udata','style','talt','globalCompositeOperation','_pointerEvents','mouseMove','textures','getV','array','segments','screen','_bilinearInterpolation','segmentsColor','all','initWorker','willReadFrequently','randomizeParticles','framebuffer','setOptions','levmin','destroyParticlesTextures','fragmentShaderSource','max','mouse_down','PI_OVER_TWO','visibility','lat','particlesComputing','cols','mode','south','context','addPrimitives','remove','sources','currentTrails','DISABLE_GL_POSITION_LOG_DEPTH','postProcessingPosition','ellipsoid','PixelDatatype','_drawLines','primitives','updateViewerParameters','lng','particles','createParticlesTextures','_updateIng2','_data','VertexArray','Compute','_onMouseMoveEvent','createFramebuffer','getUVByPoint','pixelDatatype','54RxxwPa','drawingBufferHeight','particlesRendering','floor','position','setData','toDegrees','color','owner','refreshParticles','Cesium','nextTrailsDepth','dimension','createRenderingTextures','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x0a\x0auniform\x20sampler2D\x20H;\x20//\x20particles\x20height\x20textures\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0auniform\x20vec2\x20viewerLonRange;\x0auniform\x20vec2\x20viewerLatRange;\x0a\x0aconst\x20float\x20randomCoefficient\x20=\x200.1f;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0aconst\x20float\x20dropRate\x20=\x200.1f;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0aconst\x20float\x20dropRateBump\x20=\x200.1f;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0avec4\x20getTextureValue(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20vec4\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D);\x0a\x20\x20return\x20result;\x0a}\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0abool\x20particleNoSpeed(vec3\x20particle)\x20{\x0a\x20\x20vec4\x20speed\x20=\x20getTextureValue(particlesSpeed,\x20particle);\x0a\x20\x20return\x20speed.r\x20==\x200.0f\x20&&\x20speed.g\x20==\x200.0f;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0f);\x0a\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20float\x20height\x20=\x20getTextureValue(H,\x20vec3(randomLon,\x20randomLat,\x20lev)).r;\x0a\x0a\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20height);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20viewerLatRange.x\x20||\x20particle.y\x20>\x20viewerLatRange.y\x20||\x20particle.x\x20<\x20viewerLonRange.x\x20||\x20particle.x\x20>\x20viewerLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x0a}\x0a','nextTrails','getColorTexture','segmentsDepth','height','framebuffers','auto','normal','viewerParameters','frameTime','strokeStyle','particleSystem','_onMapWhellEvent'];_0x2d76=function(){return _0x6c17c5;};return _0x2d76();}const Cesium$4=mars3d__namespace['Cesium'];class ParticlesRendering{constructor(_0x318d61,_0xcbeec5,_0x52db64,_0x58af20,_0x3c756b){function _0x33d33c(_0x112b53,_0x517d49){return _0x5218ea(_0x112b53- -0x305,_0x517d49);}this[_0x33d33c(-0x17d,-0x1d3)]=_0x52db64['colors']==='height';function _0x3edb81(_0x23200f,_0x4709c0){return _0x20a044(_0x23200f,_0x4709c0-0x84);}this[_0x33d33c(-0xf2,-0x171)](_0x318d61,_0xcbeec5,_0x52db64['colors']),this['createRenderingFramebuffers'](_0x318d61),this[_0x3edb81(-0x129,-0x183)](_0x318d61,_0xcbeec5,_0x52db64,_0x58af20,_0x3c756b);}['createRenderingTextures'](_0x28b9eb,_0x5e0ce6,_0x6857db){const _0x44e182={};function _0x5d06f8(_0x16881b,_0x3c6aa2){return _0x5218ea(_0x3c6aa2-0x28a,_0x16881b);}function _0x4a48e1(_0x48508f,_0x2f9c8a){return _0x20a044(_0x2f9c8a,_0x48508f-0x338);}_0x44e182[_0x4a48e1(0x194,0x196)]=_0x28b9eb,_0x44e182[_0x4a48e1(0x1fe,0x1ea)]=_0x28b9eb['drawingBufferWidth'],_0x44e182[_0x5d06f8(0x40d,0x4a2)]=_0x28b9eb[_0x4a48e1(0x1ac,0x1e8)],_0x44e182[_0x5d06f8(0x48d,0x44f)]=Cesium$4['PixelFormat'][_0x4a48e1(0x140,0x1d8)],_0x44e182['pixelDatatype']=Cesium$4['PixelDatatype'][_0x5d06f8(0x577,0x50f)];const _0x1b428d=_0x44e182,_0x3bfd0c={};_0x3bfd0c['context']=_0x28b9eb,_0x3bfd0c['width']=_0x28b9eb['drawingBufferWidth'],_0x3bfd0c[_0x4a48e1(0x1bd,0x175)]=_0x28b9eb[_0x4a48e1(0x1ac,0x243)],_0x3bfd0c['pixelFormat']=Cesium$4['PixelFormat'][_0x5d06f8(0x565,0x4cc)],_0x3bfd0c[_0x5d06f8(0x488,0x48f)]=Cesium$4[_0x4a48e1(0x19c,0x114)][_0x5d06f8(0x4fd,0x4e5)];const _0x420891=_0x3bfd0c,_0x5bedfb=_0x6857db['length'],_0x18528d=new Float32Array(_0x5bedfb*0x3);for(let _0x2c45b8=0x0;_0x2c45b8<_0x5bedfb;_0x2c45b8++){const _0x567de9=Cesium$4['Color']['fromCssColorString'](_0x6857db[_0x2c45b8]);_0x18528d[0x3*_0x2c45b8]=_0x567de9[_0x4a48e1(0x231,0x285)],_0x18528d[0x3*_0x2c45b8+0x1]=_0x567de9['green'],_0x18528d[0x3*_0x2c45b8+0x2]=_0x567de9['blue'];}const _0x5cccb6={'context':_0x28b9eb,'width':_0x5bedfb,'height':0x1,'pixelFormat':Cesium$4['PixelFormat']['RGB'],'pixelDatatype':Cesium$4[_0x5d06f8(0x4d4,0x481)]['FLOAT'],'sampler':new Cesium$4[(_0x5d06f8(0x3c1,0x432))]({'minificationFilter':Cesium$4['TextureMinificationFilter']['LINEAR'],'magnificationFilter':Cesium$4['TextureMagnificationFilter']['LINEAR']})};this['textures']={'segmentsColor':Util[_0x5d06f8(0x4f6,0x522)](_0x1b428d),'segmentsDepth':Util['createTexture'](_0x420891),'currentTrailsColor':Util['createTexture'](_0x1b428d),'currentTrailsDepth':Util['createTexture'](_0x420891),'nextTrailsColor':Util['createTexture'](_0x1b428d),'nextTrailsDepth':Util['createTexture'](_0x420891),'colorTable':Util['createTexture'](_0x5cccb6,_0x18528d)};}['createRenderingFramebuffers'](_0x1ad71f){function _0x4733c3(_0x535df5,_0x553951){return _0x20a044(_0x553951,_0x535df5-0x532);}function _0x3a45f3(_0x40da39,_0x505b2e){return _0x20a044(_0x505b2e,_0x40da39-0x61c);}this['framebuffers']={'segments':Util[_0x4733c3(0x3a2,0x3e6)](_0x1ad71f,this['textures']['segmentsColor'],this[_0x4733c3(0x375,0x35b)][_0x3a45f3(0x4a0,0x529)]),'currentTrails':Util['createFramebuffer'](_0x1ad71f,this['textures']['currentTrailsColor'],this['textures']['currentTrailsDepth']),'nextTrails':Util['createFramebuffer'](_0x1ad71f,this['textures']['nextTrailsColor'],this[_0x3a45f3(0x45f,0x4a1)][_0x3a45f3(0x49a,0x4df)])};}['createSegmentsGeometry'](_0x5a42ae){const _0x359aba=0x4;let _0x5a0dbe=[];for(let _0x2a48d4=0x0;_0x2a48d4<_0x5a42ae[_0x599961(0x32c,0x2ed)];_0x2a48d4++){for(let _0x16d11e=0x0;_0x16d11e<_0x5a42ae[_0x38bbca(0x56,0xa5)];_0x16d11e++){for(let _0x183798=0x0;_0x183798<_0x359aba;_0x183798++){_0x5a0dbe['push'](_0x2a48d4/_0x5a42ae['particlesTextureSize']),_0x5a0dbe[_0x38bbca(-0x45,0x0)](_0x16d11e/_0x5a42ae['particlesTextureSize']);}}}function _0x599961(_0x36bd0a,_0x52d889){return _0x5218ea(_0x52d889-0x85,_0x36bd0a);}function _0x38bbca(_0x43d6ec,_0x2a522c){return _0x20a044(_0x43d6ec,_0x2a522c-0x1d0);}_0x5a0dbe=new Float32Array(_0x5a0dbe);let _0x3a934d=[];for(let _0x47aa91=0x0;_0x47aa91<_0x5a42ae[_0x599961(0x38a,0x324)];_0x47aa91++){_0x3a934d['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x3a934d=new Float32Array(_0x3a934d);let _0x303b4c=[];for(let _0x569fb4=0x0,_0x3788cb=0x0;_0x569fb4<_0x5a42ae['maxParticles'];_0x569fb4++){_0x303b4c['push'](_0x3788cb+0x0,_0x3788cb+0x1,_0x3788cb+0x2,_0x3788cb+0x2,_0x3788cb+0x1,_0x3788cb+0x3),_0x3788cb+=_0x359aba;}_0x303b4c=new Uint32Array(_0x303b4c);const _0x5da536=new Cesium$4[(_0x38bbca(0xa8,0x8b))]({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4[(_0x38bbca(0xf1,0xdf))]({'componentDatatype':Cesium$4[_0x38bbca(0xbd,0x89)]['FLOAT'],'componentsPerAttribute':0x2,'values':_0x5a0dbe}),'normal':new Cesium$4[(_0x38bbca(0x148,0xdf))]({'componentDatatype':Cesium$4['ComponentDatatype'][_0x599961(0x18d,0x21c)],'componentsPerAttribute':0x3,'values':_0x3a934d})}),'indices':_0x303b4c});return _0x5da536;}['createRenderingPrimitives'](_0x464a76,_0x3df0aa,_0x232718,_0x3c7b00,_0x1e16eb){function _0x310cce(_0x3ffad5,_0x7750fb){return _0x20a044(_0x7750fb,_0x3ffad5-0x38f);}const _0x56512f=this,_0x1332d3={};_0x1332d3['st']=0x0,_0x1332d3[_0x259c91(0x3ab,0x31d)]=0x1;const _0x21388e={};_0x21388e['sources']=[segmentDrawVert];const _0x14b7ac={};_0x14b7ac[_0x259c91(0x382,0x30c)]=[segmentDrawFrag];const _0x5a1158={};_0x5a1158['enabled']=!![];const _0x2a15fd={};_0x2a15fd[_0x310cce(0x228,0x232)]=undefined,_0x2a15fd['depthTest']=_0x5a1158,_0x2a15fd['depthMask']=!![];const _0x5f1814={};_0x5f1814[_0x259c91(0x39a,0x396)]=0x0,_0x5f1814['st']=0x1;const _0x8a54ba={};_0x8a54ba[_0x310cce(0x1be,0x187)]=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x8a54ba['sources']=[fullscreenVert];const _0xbe768a={};_0xbe768a[_0x259c91(0x352,0x309)]=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0xbe768a[_0x259c91(0x382,0x36c)]=[trailDrawFrag];const _0x1e5770={};_0x1e5770[_0x310cce(0x206,0x219)]=0x0,_0x1e5770['st']=0x1;function _0x259c91(_0x153577,_0x4d882c){return _0x20a044(_0x4d882c,_0x153577-0x523);}const _0x53e8db={};_0x53e8db[_0x310cce(0x1be,0x208)]=[_0x259c91(0x384,0x376)],_0x53e8db['sources']=[fullscreenVert];const _0xb8683a={};_0xb8683a['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0xb8683a['sources']=[screenDrawFrag];const _0x154c98={};_0x154c98['enabled']=![];const _0x550b5b={};_0x550b5b['enabled']=!![],this[_0x259c91(0x389,0x3e4)]={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x1332d3,'geometry':this['createSegmentsGeometry'](_0x232718),'primitiveType':Cesium$4['PrimitiveType'][_0x310cce(0x26a,0x27d)],'uniformMap':{'previousParticlesPosition':function(){return _0x1e16eb['particlesTextures']['previousParticlesPosition'];},'currentParticlesPosition':function(){return _0x1e16eb['particlesTextures']['currentParticlesPosition'];},'postProcessingPosition':function(){return _0x1e16eb['particlesTextures']['postProcessingPosition'];},'particlesSpeed':function(){function _0x24e74f(_0x2ad57f,_0x2f5111){return _0x259c91(_0x2f5111-0x1ac,_0x2ad57f);}return _0x1e16eb['particlesTextures'][_0x24e74f(0x460,0x4d1)];},'colorTable':function(){return _0x56512f['textures']['colorTable'];},'aspect':function(){function _0x48b7ea(_0x3e1a0e,_0x125c74){return _0x310cce(_0x125c74-0x29f,_0x3e1a0e);}function _0xc13e97(_0x33938d,_0x3c1863){return _0x259c91(_0x3c1863- -0x547,_0x33938d);}return _0x464a76[_0x48b7ea(0x59c,0x52e)]/_0x464a76[_0xc13e97(-0x209,-0x1b0)];},'H':function(){return _0x3df0aa['H']['array'];},'hRange':function(){function _0x444ec4(_0xc654cd,_0x2cda8b){return _0x310cce(_0xc654cd- -0x1fb,_0x2cda8b);}return new Cesium$4['Cartesian2'](_0x3df0aa['H']['min'],_0x3df0aa['H'][_0x444ec4(-0x19,-0x6f)]);},'uSpeedRange':function(){function _0x29faeb(_0x4ec899,_0x2bf4ce){return _0x310cce(_0x4ec899- -0x22a,_0x2bf4ce);}function _0x30509c(_0x53ad18,_0x4bf9cc){return _0x310cce(_0x4bf9cc- -0x24,_0x53ad18);}return new Cesium$4['Cartesian2'](_0x3df0aa['U'][_0x29faeb(0x1a,0x15)],_0x3df0aa['U'][_0x30509c(0x180,0x1be)]);},'vSpeedRange':function(){function _0x318b40(_0x21e7e9,_0x315ab3){return _0x259c91(_0x21e7e9- -0x2ef,_0x315ab3);}function _0x5b8eb7(_0x5c2faa,_0x4c3dff){return _0x259c91(_0x5c2faa- -0x1c6,_0x4c3dff);}return new Cesium$4[(_0x318b40(0x105,0xf0))](_0x3df0aa['V'][_0x318b40(0xe9,0x124)],_0x3df0aa['V'][_0x5b8eb7(0x1b0,0x1fd)]);},'wSpeedRange':function(){function _0x2e805a(_0x34489d,_0x534e1a){return _0x310cce(_0x534e1a-0x2eb,_0x34489d);}function _0x1b2e8e(_0x48739d,_0x3df9bb){return _0x259c91(_0x48739d- -0x138,_0x3df9bb);}return new Cesium$4[(_0x1b2e8e(0x2bc,0x322))](_0x3df0aa['W'][_0x2e805a(0x592,0x52f)],_0x3df0aa['W'][_0x2e805a(0x48e,0x4cd)]);},'pixelSize':function(){return _0x3c7b00['pixelSize'];},'lineWidth':function(){return _0x232718['lineWidth'];},'particleHeight':function(){return _0x232718['particleHeight'];},'colour':function(){function _0x4d2308(_0x1ec934,_0x5d5034){return _0x259c91(_0x1ec934- -0x50a,_0x5d5034);}return _0x56512f[_0x4d2308(-0x1f2,-0x26d)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x21388e),'fragmentShaderSource':new Cesium$4[(_0x310cce(0x226,0x25c))](_0x14b7ac),'rawRenderState':Util[_0x310cce(0x29d,0x285)](_0x2a15fd),'framebuffer':this['framebuffers'][_0x259c91(0x369,0x367)],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x5f1814,'geometry':Util[_0x259c91(0x414,0x39d)](),'primitiveType':Cesium$4[_0x310cce(0x236,0x296)][_0x310cce(0x26a,0x1ea)],'uniformMap':{'segmentsColorTexture':function(){function _0x42e316(_0x2beba1,_0x19570c){return _0x259c91(_0x19570c- -0x4ef,_0x2beba1);}return _0x56512f['textures'][_0x42e316(-0x122,-0x183)];},'segmentsDepthTexture':function(){function _0x3a9a9c(_0x27066a,_0x45043e){return _0x259c91(_0x27066a-0x117,_0x45043e);}function _0x3c91a8(_0x254019,_0xe47d00){return _0x259c91(_0xe47d00- -0x1bf,_0x254019);}return _0x56512f[_0x3c91a8(0x110,0x1a7)][_0x3a9a9c(0x4be,0x49c)];},'currentTrailsColor':function(){return _0x56512f['framebuffers']['currentTrails']['getColorTexture'](0x0);},'trailsDepthTexture':function(){return _0x56512f['framebuffers']['currentTrails']['depthTexture'];},'fadeOpacity':function(){function _0x47a5c5(_0x278d15,_0x16ff3c){return _0x259c91(_0x16ff3c- -0x29a,_0x278d15);}return _0x232718[_0x47a5c5(0x14e,0x184)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x8a54ba),'fragmentShaderSource':new Cesium$4[(_0x259c91(0x3ba,0x3df))](_0xbe768a),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction']['ALWAYS']},'depthMask':!![]}),'framebuffer':this[_0x310cce(0x215,0x1c4)]['nextTrails'],'autoClear':!![],'preExecute':function(){function _0x43bf1c(_0x1e3e23,_0x37a04f){return _0x310cce(_0x37a04f-0x29b,_0x1e3e23);}function _0x3e2d46(_0x183581,_0x2e209d){return _0x259c91(_0x183581- -0x2e5,_0x2e209d);}if(_0x232718[_0x43bf1c(0x499,0x51a)]){const _0x302a8d=_0x56512f[_0x43bf1c(0x52b,0x4b0)][_0x43bf1c(0x43c,0x48a)];_0x56512f['framebuffers']['currentTrails']=_0x56512f[_0x43bf1c(0x46a,0x4b0)]['nextTrails'],_0x56512f['framebuffers']['nextTrails']=_0x302a8d;}_0x56512f['primitives']['trails'][_0x43bf1c(0x488,0x428)][_0x43bf1c(0x4e9,0x478)]=_0x56512f['framebuffers'][_0x3e2d46(0xc0,0x33)],_0x56512f[_0x43bf1c(0x402,0x490)]['trails']['clearCommand']['framebuffer']=_0x56512f['framebuffers'][_0x3e2d46(0xc0,0x7b)];}}),'screen':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x1e5770,'geometry':Util[_0x259c91(0x414,0x37d)](),'primitiveType':Cesium$4['PrimitiveType'][_0x310cce(0x26a,0x222)],'uniformMap':{'trailsColorTexture':function(){function _0x3779a5(_0x399f47,_0x2d53fc){return _0x259c91(_0x399f47- -0x40,_0x2d53fc);}function _0x50553d(_0x56ba4f,_0x41a85c){return _0x310cce(_0x41a85c- -0x363,_0x56ba4f);}return _0x56512f['framebuffers'][_0x50553d(-0x1af,-0x152)][_0x3779a5(0x366,0x2e8)](0x0);},'trailsDepthTexture':function(){function _0x3667d2(_0x473d6b,_0x2c4884){return _0x310cce(_0x473d6b-0x153,_0x2c4884);}function _0x290067(_0x3e4a1f,_0x244ce5){return _0x310cce(_0x244ce5- -0x463,_0x3e4a1f);}return _0x56512f[_0x290067(-0x1c4,-0x24e)][_0x290067(-0x1d4,-0x252)]['depthTexture'];}},'vertexShaderSource':new Cesium$4[(_0x310cce(0x226,0x29f))](_0x53e8db),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0xb8683a),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0x154c98,'depthMask':!![],'blending':_0x550b5b}),'framebuffer':undefined})};}}var CalculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20W;\x20//\x20upward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0auniform\x20float\x20speedScaleFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20//\x20map\x20the\x20z-axis\x20value\x20to\x20the\x20nearest\x20bit\x20plane\x20to\x20ensure\x20that\x20the\x20result\x20is\x20an\x20integer\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205,\x207,\x208,\x209],\x20width\x20=\x202,\x20height\x20=\x202,\x20level\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x206\x207\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x202\x203\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0afloat\x20interpolateTexture(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x201.0f\x20*\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x201.0f\x20*\x20interval.y;\x0a\x0a\x20\x20float\x20lon0_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon1_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon0_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat1,\x20lev));\x0a\x20\x20float\x20lon1_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat1,\x20lev));\x0a\x0a\x20\x20float\x20lon_lat0\x20=\x20mix(lon0_lat0,\x20lon1_lat0,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat1\x20=\x20mix(lon0_lat1,\x20lon1_lat1,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat\x20=\x20mix(lon_lat0,\x20lon_lat1,\x20lat\x20-\x20lat0);\x0a\x20\x20return\x20lon_lat;\x0a}\x0a\x0avec3\x20linearInterpolation(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bilinear_interpolation\x0a\x20\x20float\x20u\x20=\x20interpolateTexture(U,\x20lonLatLev);\x0a\x20\x20float\x20v\x20=\x20interpolateTexture(V,\x20lonLatLev);\x0a\x20\x20float\x20w\x20=\x20interpolateTexture(W,\x20lonLatLev);\x0a\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec3\x20convertSpeedUnitToLonLat(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20float\x20w\x20=\x20speed.z;\x0a\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20return\x20windVectorInLonLatLev;\x0a}\x0a\x0avec3\x20calculateSpeedByRungeKutta2(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec3\x20y_n\x20=\x20lonLatLev;\x0a\x20\x20vec3\x20f_n\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec3\x20speed\x20=\x20h\x20*\x20linearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20getRange(vec2\x20range)\x20{\x0a\x20\x20float\x20x1\x20=\x200.0f\x20-\x20range.x;\x0a\x20\x20float\x20x2\x20=\x20range.y\x20-\x200.0f;\x0a\x20\x20if(x1\x20<\x200.0f\x20||\x20x2\x20<\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(abs(x1),\x20abs(x2));\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x20abs(max(x1,\x20x2)));\x0a\x20\x20}\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20vec2\x20uRange\x20=\x20getRange(uSpeedRange);\x0a\x20\x20vec2\x20vRange\x20=\x20getRange(vSpeedRange);\x0a\x20\x20vec2\x20wRange\x20=\x20getRange(wSpeedRange);\x0a\x20\x20if(length(speed.xyz)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x200.0f;\x0a\x20\x20}\x0a\x0a\x20\x20percent.x\x20=\x20(abs(speed.x)\x20-\x20uRange.x)\x20/\x20(uRange.y\x20-\x20uRange.x);\x0a\x20\x20percent.y\x20=\x20(abs(speed.y)\x20-\x20vRange.x)\x20/\x20(vRange.y\x20-\x20vRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(abs(speed.z)\x20-\x20wRange.x)\x20/\x20(wRange.y\x20-\x20wRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speedOrigin\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLatLev);\x0a\x20\x20vec3\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLatLev,\x20speed);\x0a\x0a\x20\x20vec4\x20particleSpeed\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speed\x20/\x20speedScaleFactor));\x0a\x20\x20\x20\x20//\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',PostProcessingPositionShader=_0x20a044(-0x1c6,-0x17f),UpdatePositionShader='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x20Unit\x20converted\x20to\x20degrees\x20of\x20longitude\x20and\x20latitude\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20speed;\x0a\x20\x20if(length(speed.rgb)\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a';const Cesium$3=mars3d__namespace[_0x20a044(-0x144,-0x183)];class ParticlesComputing{constructor(_0x5573fc,_0x25a3fc,_0x570e6c,_0x2924f7){this['data']=_0x25a3fc;function _0x3e7682(_0x57e61c,_0x340fbc){return _0x20a044(_0x57e61c,_0x340fbc- -0x44);}this[_0x3e7682(-0x214,-0x217)](_0x5573fc,_0x25a3fc),this['createParticlesTextures'](_0x5573fc,_0x570e6c,_0x2924f7),this['createComputingPrimitives'](_0x25a3fc,_0x570e6c,_0x2924f7);}[_0x20a044(-0x1c2,-0x1d3)](_0x2766d6,_0x52c76e){function _0x37ad07(_0x1de2f3,_0x5e40ba){return _0x20a044(_0x1de2f3,_0x5e40ba-0x329);}var _0x142606;const _0x2ca48f={'context':_0x2766d6,'width':_0x52c76e[_0x37ad07(0x206,0x23b)][_0xb51c1b(0x4bb,0x4d7)],'height':_0x52c76e['dimensions'][_0xb51c1b(0x4bf,0x427)]*(_0x52c76e['dimensions'][_0x37ad07(0xf5,0x137)]||0x1),'pixelFormat':Cesium$3['PixelFormat']['RED'],'pixelDatatype':Cesium$3[_0x37ad07(0x13f,0x18d)]['FLOAT'],'flipY':![],'sampler':new Cesium$3[(_0x37ad07(0x184,0x13e))]({'minificationFilter':Cesium$3['TextureMinificationFilter'][_0x37ad07(0x1e9,0x22d)],'magnificationFilter':Cesium$3[_0xb51c1b(0x3f4,0x3e7)][_0x37ad07(0x288,0x22d)]})};function _0xb51c1b(_0x5e043b,_0x38df4e){return _0x5218ea(_0x38df4e-0x23d,_0x5e043b);}this['windTextures']={'U':Util['createTexture'](_0x2ca48f,_0x52c76e['U']['array']),'V':Util[_0xb51c1b(0x4a9,0x4d5)](_0x2ca48f,_0x52c76e['V'][_0x37ad07(0x190,0x16e)]),'W':Util['createTexture'](_0x2ca48f,((_0x142606=_0x52c76e['W'])===null||_0x142606===void 0x0?void 0x0:_0x142606['array'])??_0x52c76e['U']['array']),'H':Util[_0x37ad07(0x2c3,0x22e)](_0x2ca48f,_0x52c76e['H']['array'])};}[_0x20a044(-0x194,-0x196)](_0xaeee39,_0x1ad770,_0x32cfb8){const _0xbe1e6b={'context':_0xaeee39,'width':_0x1ad770['particlesTextureSize'],'height':_0x1ad770[_0x54ff07(0x2f5,0x2f5)],'pixelFormat':Cesium$3['PixelFormat'][_0x54ff07(0x266,0x228)],'pixelDatatype':Cesium$3['PixelDatatype'][_0x54ff07(0x1de,0x224)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0x54ff07(0x341,0x2b8)][_0x18b042(0x3da,0x3ac)],'magnificationFilter':Cesium$3['TextureMagnificationFilter']['NEAREST']})},_0x4b10e3=this[_0x54ff07(0x296,0x26d)](_0x1ad770['maxParticles'],_0x32cfb8),_0x244814=new Float32Array(0x4*_0x1ad770['maxParticles'])[_0x18b042(0x2ec,0x29a)](0x0);function _0x54ff07(_0x227bfd,_0x25be7b){return _0x5218ea(_0x25be7b-0x8d,_0x227bfd);}function _0x18b042(_0x4e8abf,_0x3862e5){return _0x5218ea(_0x4e8abf-0x143,_0x3862e5);}this[_0x18b042(0x2fe,0x265)]={'previousParticlesPosition':Util[_0x54ff07(0x2b3,0x325)](_0xbe1e6b,_0x4b10e3),'currentParticlesPosition':Util['createTexture'](_0xbe1e6b,_0x4b10e3),'nextParticlesPosition':Util['createTexture'](_0xbe1e6b,_0x4b10e3),'postProcessingPosition':Util[_0x54ff07(0x331,0x325)](_0xbe1e6b,_0x4b10e3),'particlesSpeed':Util['createTexture'](_0xbe1e6b,_0x244814)};}['randomizeParticles'](_0x50d227,_0xd31b7c){const _0x1824c1=new Float32Array(0x4*_0x50d227);function _0x49d3ca(_0x7b3a64,_0x487638){return _0x5218ea(_0x7b3a64-0x11f,_0x487638);}for(let _0x183e30=0x0;_0x183e30<_0x50d227;_0x183e30++){_0x1824c1[0x4*_0x183e30]=Cesium$3[_0x49d3ca(0x2d9,0x277)][_0x49d3ca(0x37d,0x3d2)](_0xd31b7c[_0x40efda(0x2ef,0x2e8)]['x'],_0xd31b7c['lonRange']['y']),_0x1824c1[0x4*_0x183e30+0x1]=Cesium$3['Math']['randomBetween'](_0xd31b7c['latRange']['x'],_0xd31b7c['latRange']['y']),_0x1824c1[0x4*_0x183e30+0x2]=Cesium$3['Math']['randomBetween'](this[_0x40efda(0x220,0x1d2)]['lev'][_0x49d3ca(0x367,0x347)],this[_0x49d3ca(0x2c2,0x2a2)][_0x40efda(0x21e,0x252)]['max']),_0x1824c1[0x4*_0x183e30+0x3]=0x0;}function _0x40efda(_0xbb9c41,_0x55ab8e){return _0x5218ea(_0xbb9c41-0x7d,_0x55ab8e);}return _0x1824c1;}['getValidRange'](_0x2ca0cf){const _0x5418c7=[_0x2ca0cf[_0x2b056e(0x315,0x2bb)][_0x2b056e(0x30a,0x2e0)],_0x2ca0cf['dimensions']['lat'],_0x2ca0cf[_0x2ba953(0x10d,0xe5)]['lev']];function _0x2ba953(_0x5efe51,_0x4085fe){return _0x5218ea(_0x4085fe- -0x1c0,_0x5efe51);}const _0x3e8c83=[_0x2ca0cf['lon']['min'],_0x2ca0cf['lat'][_0x2ba953(0xdb,0x88)],_0x2ca0cf[_0x2ba953(0x42,-0x1f)]['min']],_0x594f67=[_0x2ca0cf[_0x2b056e(0x30a,0x2c7)][_0x2b056e(0x256,0x2ba)],_0x2ca0cf['lat'][_0x2ba953(-0x48,0x26)],_0x2ca0cf['lev']['max']];function _0x2b056e(_0x21740d,_0x2cc7f5){return _0x5218ea(_0x21740d-0x70,_0x2cc7f5);}const _0x30b95e=[(_0x594f67[0x0]-_0x3e8c83[0x0])/(_0x5418c7[0x0]-0x1),(_0x594f67[0x1]-_0x3e8c83[0x1])/(_0x5418c7[0x1]-0x1),_0x5418c7[0x2]>0x1?(_0x594f67[0x2]-_0x3e8c83[0x2])/(_0x5418c7[0x2]-0x1):0x1],_0x1032b0=Math[_0x2ba953(0x2c,0x49)](Math['random']()*_0x2ca0cf['U'][_0x2ba953(-0x1e,0x18)]['length']),_0x3d4b1b=_0x1032b0%(_0x5418c7[0x0]*_0x5418c7[0x1]),_0x43dac3=Math['floor'](_0x3d4b1b/_0x5418c7[0x0]),_0x3be062=_0x3d4b1b%_0x5418c7[0x0],_0x3e83e1=Cesium$3['Math']['randomBetween'](_0x3e8c83[0x0]+_0x3be062*_0x30b95e[0x0],_0x3e8c83[0x0]+(_0x3be062+0x1)*_0x30b95e[0x0]),_0x1d6003=Cesium$3['Math']['randomBetween'](_0x3e8c83[0x1]+(_0x43dac3-0x1)*_0x30b95e[0x1],_0x3e8c83[0x1]+_0x43dac3*_0x30b95e[0x1]),_0x22ce8f=_0x2ca0cf['H'][_0x2ba953(-0x30,0x18)][_0x1032b0]||0x0;return[_0x3e83e1,_0x1d6003,_0x22ce8f];}['destroyParticlesTextures'](){function _0x23a81e(_0x56915c,_0x50b1ab){return _0x5218ea(_0x56915c-0x10b,_0x50b1ab);}function _0x5925b2(_0x2d7a8e,_0x3406f9){return _0x5218ea(_0x2d7a8e- -0x3c8,_0x3406f9);}Object['keys'](this[_0x5925b2(-0x20d,-0x1b1)])[_0x5925b2(-0x24b,-0x281)](_0x9979cb=>{this['particlesTextures'][_0x9979cb]['destroy']();});}['createComputingPrimitives'](_0x4cb26c,_0x24a00e,_0x2e339a){const _0xcae38a=new Cesium$3['Cartesian3'](_0x4cb26c[_0x3a7f5a(0xa,-0x82)]['lon'],_0x4cb26c['dimensions'][_0x3a7f5a(-0xb1,-0x89)],_0x4cb26c['dimensions']['lev']),_0x107ac5=new Cesium$3['Cartesian3'](_0x4cb26c['lon'][_0x341407(0x323,0x349)],_0x4cb26c['lat']['min'],_0x4cb26c['lev']['min']),_0x5b0a24=new Cesium$3['Cartesian3'](_0x4cb26c['lon'][_0x3a7f5a(-0xb5,-0xb1)],_0x4cb26c['lat']['max'],_0x4cb26c['lev']['max']),_0x16624e=new Cesium$3[(_0x341407(0x2d1,0x29f))]((_0x5b0a24['x']-_0x107ac5['x'])/(_0xcae38a['x']-0x1),(_0x5b0a24['y']-_0x107ac5['y'])/(_0xcae38a['y']-0x1),_0xcae38a['z']>0x1?(_0x5b0a24['z']-_0x107ac5['z'])/(_0xcae38a['z']-0x1):0x1),_0x252577=new Cesium$3['Cartesian2'](_0x4cb26c['lon']['min'],_0x4cb26c['lon']['max']),_0x14428e=new Cesium$3['Cartesian2'](_0x4cb26c['lat'][_0x341407(0x36f,0x349)],_0x4cb26c['lat']['max']),_0x1582e7=new Cesium$3['Cartesian2'](_0x4cb26c['U'][_0x341407(0x362,0x349)],_0x4cb26c['U']['max']);function _0x341407(_0x2aa072,_0x59c426){return _0x20a044(_0x2aa072,_0x59c426-0x494);}const _0xdc8243=new Cesium$3[(_0x3a7f5a(-0x37,-0x28))](_0x4cb26c['V']['min'],_0x4cb26c['V'][_0x341407(0x294,0x2e7)]),_0x30ad03=new Cesium$3['Cartesian2'](_0x4cb26c['W']['min'],_0x4cb26c['W']['max']),_0x3ff8ba=this;function _0x3a7f5a(_0x175339,_0x13858b){return _0x20a044(_0x13858b,_0x175339-0xf8);}const _0x5bff1f={};_0x5bff1f['U']=function(){return _0x3ff8ba['windTextures']['U'];},_0x5bff1f['V']=function(){return _0x3ff8ba['windTextures']['V'];},_0x5bff1f['W']=function(){function _0x3fa78a(_0x5a2fe4,_0x3aa3b2){return _0x341407(_0x3aa3b2,_0x5a2fe4-0x16b);}return _0x3ff8ba[_0x3fa78a(0x4d3,0x544)]['W'];},_0x5bff1f[_0x341407(0x3ae,0x395)]=function(){function _0x4cb408(_0x5c6da9,_0x18f097){return _0x3a7f5a(_0x5c6da9-0x520,_0x18f097);}return _0x3ff8ba['particlesTextures'][_0x4cb408(0x519,0x4e3)];},_0x5bff1f[_0x341407(0x37e,0x313)]=function(){return _0xcae38a;},_0x5bff1f['minimum']=function(){return _0x107ac5;},_0x5bff1f['maximum']=function(){return _0x5b0a24;},_0x5bff1f['interval']=function(){return _0x16624e;},_0x5bff1f['uSpeedRange']=function(){return _0x1582e7;},_0x5bff1f['vSpeedRange']=function(){return _0xdc8243;},_0x5bff1f[_0x3a7f5a(-0x11b,-0xfd)]=function(){return _0x30ad03;},_0x5bff1f[_0x341407(0x2ca,0x332)]=function(){return _0x2e339a['pixelSize']*_0x24a00e['speedFactor'];};const _0x21a2c1={};_0x21a2c1['sources']=[CalculateSpeedShader];const _0x2c31a8={};_0x2c31a8['sources']=[UpdatePositionShader];const _0x2fe0ed={};_0x2fe0ed['sources']=[PostProcessingPositionShader],this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x341407(0x330,0x302),'uniformMap':_0x5bff1f,'fragmentShaderSource':new Cesium$3[(_0x3a7f5a(-0x71,0xd))](_0x21a2c1),'outputTexture':this[_0x3a7f5a(-0xe0,-0xb7)]['particlesSpeed'],'preExecute':function(){if(_0x24a00e!==undefined&&_0x24a00e['dynamic']){const _0x120792=_0x3ff8ba['particlesTextures']['previousParticlesPosition'];_0x3ff8ba[_0x4df67f(0x4a1,0x4bb)][_0xd72d3f(0x462,0x4b6)]=_0x3ff8ba[_0x4df67f(0x467,0x4bb)]['currentParticlesPosition'],_0x3ff8ba[_0xd72d3f(0x542,0x4b0)]['currentParticlesPosition']=_0x3ff8ba['particlesTextures']['postProcessingPosition'],_0x3ff8ba['particlesTextures']['postProcessingPosition']=_0x120792;}function _0x4df67f(_0x176ed4,_0x70e089){return _0x341407(_0x176ed4,_0x70e089-0x1ff);}function _0xd72d3f(_0x32679f,_0x4a29e2){return _0x341407(_0x32679f,_0x4a29e2-0x1f4);}_0x3ff8ba['primitives'][_0x4df67f(0x59e,0x586)]['commandToExecute'][_0x4df67f(0x488,0x4cf)]=_0x3ff8ba['particlesTextures']['particlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':function(){return _0x3ff8ba['particlesTextures']['currentParticlesPosition'];},'particlesSpeed':function(){function _0xdab257(_0x47efd5,_0x1c23b6){return _0x3a7f5a(_0x47efd5-0x302,_0x1c23b6);}function _0x3796ea(_0x5ebb29,_0x4ce948){return _0x341407(_0x4ce948,_0x5ebb29-0x117);}return _0x3ff8ba[_0xdab257(0x222,0x264)][_0x3796ea(0x3ad,0x345)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x2c31a8),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':function(){function _0x1a8199(_0xb2887b,_0x26a73e){return _0x3a7f5a(_0xb2887b-0x502,_0x26a73e);}function _0x5b7224(_0x3b7f1c,_0x17dc68){return _0x3a7f5a(_0x17dc68-0x5d2,_0x3b7f1c);}_0x3ff8ba['primitives']['updatePosition']['commandToExecute'][_0x5b7224(0x4dd,0x506)]=_0x3ff8ba[_0x1a8199(0x422,0x38b)]['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':function(){function _0x30c01c(_0x452f77,_0x4e2d15){return _0x341407(_0x452f77,_0x4e2d15- -0x208);}return _0x3ff8ba[_0x30c01c(0x12b,0xb4)]['nextParticlesPosition'];},'particlesSpeed':function(){function _0x586b48(_0xfe48f4,_0x84153d){return _0x3a7f5a(_0x84153d-0x25c,_0xfe48f4);}function _0x2da93b(_0x2fab5a,_0x4f212e){return _0x3a7f5a(_0x2fab5a-0x136,_0x4f212e);}return _0x3ff8ba[_0x586b48(0x148,0x17c)][_0x586b48(0x1e4,0x156)];},'viewerLonRange':function(){return _0x2e339a['lonRange'];},'viewerLatRange':function(){return _0x2e339a['latRange'];},'lonRange':function(){return _0x252577;},'latRange':function(){return _0x14428e;},'dimension':function(){return _0xcae38a;},'minimum':function(){return _0x107ac5;},'maximum':function(){return _0x5b0a24;},'interval':function(){return _0x16624e;},'H':function(){return _0x3ff8ba['windTextures']['H'];},'randomCoefficient':function(){const _0x223298=Math['random']();return _0x223298;},'dropRate':function(){function _0x238d8e(_0x228dc5,_0x413406){return _0x3a7f5a(_0x413406- -0x3c,_0x228dc5);}return _0x24a00e[_0x238d8e(-0xe5,-0x5e)];},'dropRateBump':function(){return _0x24a00e['dropRateBump'];}},'fragmentShaderSource':new Cesium$3[(_0x3a7f5a(-0x71,-0xa9))](_0x2fe0ed),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':function(){_0x3ff8ba['primitives']['postProcessingPosition']['commandToExecute']['outputTexture']=_0x3ff8ba['particlesTextures']['postProcessingPosition'];}})};}}const Cesium$2=mars3d__namespace[_0x20a044(-0xf7,-0x183)];class ParticleSystem{constructor(_0x1395d8,_0x2846cc,_0x488cfa,_0x1ec2bf){this[_0x303604(0x89,0xcd)]=_0x1395d8,_0x2846cc={..._0x2846cc};_0x2846cc['udata']&&_0x2846cc['vdata']&&(_0x2846cc[_0x2b1b39(0x452,0x3fd)]={},_0x2846cc[_0x303604(0xf8,0x183)]['lon']=_0x2846cc[_0x2b1b39(0x314,0x344)],_0x2846cc['dimensions']['lat']=_0x2846cc[_0x2b1b39(0x2dd,0x2f4)],_0x2846cc['dimensions']['lev']=_0x2846cc['lev']||0x1,_0x2846cc['lon']={},_0x2846cc['lon']['min']=_0x2846cc['xmin'],_0x2846cc['lon']['max']=_0x2846cc[_0x2b1b39(0x304,0x30e)],_0x2846cc[_0x2b1b39(0x30f,0x342)]={},_0x2846cc[_0x2b1b39(0x3bc,0x342)][_0x2b1b39(0x39a,0x3a0)]=_0x2846cc[_0x2b1b39(0x319,0x305)],_0x2846cc['lat']['max']=_0x2846cc[_0x2b1b39(0x2fa,0x306)],_0x2846cc[_0x303604(0x38,0x7f)]={},_0x2846cc['lev'][_0x303604(0xae,0x126)]=_0x2846cc[_0x2b1b39(0x387,0x33b)]??0x1,_0x2846cc[_0x2b1b39(0x342,0x2f9)][_0x303604(0xa8,0xc4)]=_0x2846cc['levmax']??0x1,_0x2846cc['U']={},_0x2846cc['U'][_0x303604(0x138,0xb6)]=new Float32Array(_0x2846cc[_0x303604(0x8e,0xae)]),_0x2846cc['U'][_0x2b1b39(0x31c,0x3a0)]=_0x2846cc['umin']??Math['min'](..._0x2846cc['udata']),_0x2846cc['U'][_0x2b1b39(0x383,0x33e)]=_0x2846cc[_0x2b1b39(0x33d,0x2df)]??Math['max'](..._0x2846cc['udata']),_0x2846cc['V']={},_0x2846cc['V']['array']=new Float32Array(_0x2846cc['vdata']),_0x2846cc['V']['min']=_0x2846cc[_0x2b1b39(0x468,0x3f5)]??Math[_0x303604(0x174,0x126)](..._0x2846cc[_0x2b1b39(0x254,0x2d6)]),_0x2846cc['V']['max']=_0x2846cc['vmax']??Math[_0x303604(0x154,0xc4)](..._0x2846cc['vdata']));!_0x2846cc['W']&&(_0x2846cc['W']={'array':new Float32Array(_0x2846cc['U']['array']['length']),'min':0x0,'max':0x0});function _0x2b1b39(_0x20c74d,_0x2e6be5){return _0x5218ea(_0x2e6be5-0x158,_0x20c74d);}if(!_0x2846cc['H']){var _0x5f409e;_0x2846cc['H']={'array':new Float32Array(_0x2846cc['U']['array'][_0x303604(0x5f,0x9d)]),'min':0x0,'max':0x0};if((_0x5f409e=_0x2846cc[_0x2b1b39(0x30c,0x2f9)])!==null&&_0x5f409e!==void 0x0&&_0x5f409e['array']){const {lon:_0x2bba8a,lat:_0x4d38d9,lev:_0x1ff7d9}=_0x2846cc['dimensions'];for(let _0x1abbac=0x0;_0x1abbac<_0x1ff7d9;_0x1abbac++){for(let _0x3432c5=0x0;_0x3432c5<_0x4d38d9;_0x3432c5++){for(let _0x221457=0x0;_0x221457<_0x2bba8a;_0x221457++){const _0x5ea507=_0x1abbac*(_0x2bba8a*_0x4d38d9)+_0x3432c5*_0x2bba8a+_0x221457;_0x2846cc['H']['array'][_0x5ea507]=_0x2846cc['lev'][_0x2b1b39(0x2e6,0x330)][_0x1abbac];}}}_0x2846cc['H']['min']=Math[_0x2b1b39(0x3eb,0x3a0)](..._0x2846cc[_0x303604(0x78,0x7f)][_0x303604(0x11b,0xb6)]),_0x2846cc['H'][_0x303604(0xf1,0xc4)]=Math[_0x2b1b39(0x36d,0x33e)](..._0x2846cc[_0x303604(0x20,0x7f)]['array']);}}function _0x303604(_0x4af192,_0x3216d5){return _0x20a044(_0x4af192,_0x3216d5-0x271);}this['data']=_0x2846cc,this['options']=_0x488cfa,this['viewerParameters']=_0x1ec2bf,this[_0x2b1b39(0x3ab,0x343)]=new ParticlesComputing(this[_0x2b1b39(0x3d1,0x347)],this['data'],this['options'],this['viewerParameters']),this['particlesRendering']=new ParticlesRendering(this['context'],this['data'],this['options'],this[_0x303604(0xf3,0xfa)],this[_0x303604(0x9f,0xc9)]);}[_0x5218ea(0x29c,0x232)](_0x49a50e){this[_0x190c4d(-0x106,-0x7a)][_0x190c4d(-0x1c,-0x81)]();function _0x190c4d(_0x3ffce5,_0x56ea69){return _0x20a044(_0x3ffce5,_0x56ea69-0x12e);}function _0x42608a(_0x2eaf45,_0x289c65){return _0x5218ea(_0x289c65- -0x383,_0x2eaf45);}Object['keys'](this[_0x190c4d(-0xf6,-0x7a)][_0x42608a(-0x16d,-0x11c)])[_0x42608a(-0x253,-0x206)](_0x2a117d=>{function _0x269132(_0x164afe,_0x1a81a7){return _0x42608a(_0x164afe,_0x1a81a7-0x562);}this[_0x269132(0x3cd,0x3ca)]['windTextures'][_0x2a117d]['destroy']();}),this[_0x190c4d(-0xb,-0x5d)]['textures']['colorTable']['destroy'](),Object[_0x190c4d(-0x102,-0xb1)](this[_0x42608a(-0x14a,-0x17b)][_0x190c4d(-0x3,-0x4c)])[_0x190c4d(-0x11b,-0xe8)](_0x3ca06b=>{function _0x36d2f5(_0x1d68a5,_0x1cd49f){return _0x42608a(_0x1cd49f,_0x1d68a5-0x2a9);}function _0x37e912(_0x478e61,_0x238e9d){return _0x190c4d(_0x478e61,_0x238e9d- -0x119);}this[_0x36d2f5(0x12e,0x1a9)]['framebuffers'][_0x3ca06b][_0x37e912(-0x227,-0x1ee)]();}),this[_0x42608a(-0x16e,-0x194)]=_0x49a50e,this[_0x42608a(-0x17e,-0x198)]=new ParticlesComputing(this['context'],this[_0x190c4d(-0x7c,-0xc2)],this['options'],this[_0x190c4d(-0x76,-0x49)]),this[_0x190c4d(-0xe6,-0x5d)]=new ParticlesRendering(this['context'],this['data'],this['options'],this[_0x190c4d(0x4b,-0x49)],this[_0x42608a(-0x1da,-0x198)]);}['clearFramebuffers'](){function _0x36e9a3(_0x356df4,_0x2053e6){return _0x5218ea(_0x2053e6-0x248,_0x356df4);}const _0x18ce1d=new Cesium$2['ClearCommand']({'color':new Cesium$2[(_0xf7110a(-0x189,-0x182))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2['Pass'][_0xf7110a(-0x25b,-0x24d)]});function _0xf7110a(_0x32cadd,_0x4b07dc){return _0x20a044(_0x4b07dc,_0x32cadd- -0x6e);}Object[_0x36e9a3(0x3e2,0x3fc)](this['particlesRendering']['framebuffers'])['forEach'](_0x581d68=>{_0x18ce1d['framebuffer']=this[_0x44761e(0x345,0x37f)]['framebuffers'][_0x581d68];function _0x44761e(_0x2b7323,_0x13008f){return _0x36e9a3(_0x2b7323,_0x13008f- -0xd1);}_0x18ce1d['execute'](this['context']);});}[_0x20a044(-0x199,-0x184)](_0x407501,_0x1f0f53=!![]){function _0x305639(_0xdc36a3,_0x14d102){return _0x5218ea(_0xdc36a3-0x102,_0x14d102);}function _0x2fc2f5(_0x4234ca,_0x416248){return _0x20a044(_0x4234ca,_0x416248-0x15a);}_0x1f0f53&&(this['clearFramebuffers'](),this['particlesComputing']['destroyParticlesTextures'](),this['particlesComputing']['createParticlesTextures'](this[_0x305639(0x2f1,0x388)],this[_0x2fc2f5(-0x2f,0x6b)],this[_0x2fc2f5(-0x8f,-0x1d)]));if(_0x407501){var _0x51adf4;const _0x87f520=this['particlesRendering'][_0x2fc2f5(-0x3d,-0x94)](this['options']);this['particlesRendering']['primitives']['segments'][_0x305639(0x342,0x319)]=_0x87f520;const _0x4d2643=Cesium$2['VertexArray']['fromGeometry']({'context':this[_0x305639(0x2f1,0x304)],'geometry':_0x87f520,'attributeLocations':this['particlesRendering']['primitives']['segments'][_0x305639(0x279,0x287)],'bufferUsage':Cesium$2['BufferUsage'][_0x2fc2f5(-0xe0,-0xb0)]});(_0x51adf4=this['particlesRendering']['primitives'])!==null&&_0x51adf4!==void 0x0&&(_0x51adf4=_0x51adf4[_0x2fc2f5(-0x57,-0x60)])!==null&&_0x51adf4!==void 0x0&&_0x51adf4['commandToExecute']&&(this['particlesRendering']['primitives'][_0x2fc2f5(-0x5d,-0x60)][_0x305639(0x293,0x2ec)][_0x2fc2f5(-0x62,0x19)]=_0x4d2643);}}[_0x5218ea(0x1e2,0x151)](_0x1a3e7f){let _0x1b728f=![];this['options']['maxParticles']!==_0x1a3e7f[_0x56d35a(-0x1b2,-0x1ad)]&&(_0x1b728f=!![]);function _0x25812f(_0x151708,_0x4c4e66){return _0x20a044(_0x4c4e66,_0x151708-0x549);}function _0x56d35a(_0x3e3d19,_0x102705){return _0x20a044(_0x3e3d19,_0x102705- -0xb9);}Object['keys'](_0x1a3e7f)[_0x25812f(0x333,0x326)](_0x335ad7=>{this['options'][_0x335ad7]=_0x1a3e7f[_0x335ad7];}),this[_0x56d35a(-0x24b,-0x23d)](_0x1b728f,_0x1a3e7f[_0x56d35a(-0x257,-0x1c9)]);}[_0x5218ea(0x260,0x1eb)](_0x564c52){function _0x4c1409(_0x23674a,_0x18156d){return _0x20a044(_0x23674a,_0x18156d-0x7c);}Object['keys'](_0x564c52)['forEach'](_0x527710=>{this['viewerParameters'][_0x527710]=_0x564c52[_0x527710];});function _0x2ff6fc(_0x16ff1a,_0xb5f47c){return _0x5218ea(_0xb5f47c-0x1b4,_0x16ff1a);}this[_0x2ff6fc(0x43b,0x3c3)](![]),!this['options']['dynamic']&&(this[_0x4c1409(0xd,-0x73)][_0x2ff6fc(0x416,0x437)]=!![],this['setOptions'](this[_0x4c1409(-0x9,-0x73)]),setTimeout(()=>{function _0x142eeb(_0x741f44,_0x24f87b){return _0x4c1409(_0x741f44,_0x24f87b- -0x8a);}this['options']['dynamic']=![],this[_0x142eeb(-0x17f,-0x1bf)](this['options']);},0x1f4));}[_0x5218ea(0x190,0x1e1)](){clearTimeout(this['canrefresh']);function _0x331970(_0x1d5773,_0x27dffd){return _0x20a044(_0x27dffd,_0x1d5773-0x419);}this[_0x5a7dc9(-0x174,-0xf9)][_0x331970(0x26a,0x216)](),Object['keys'](this[_0x5a7dc9(-0x174,-0x16e)]['windTextures'])['forEach'](_0x44a375=>{function _0x9507ce(_0x3d5dea,_0x9f0b0f){return _0x331970(_0x3d5dea- -0x2e2,_0x9f0b0f);}function _0x18680f(_0x19a27a,_0x1db0d0){return _0x331970(_0x19a27a- -0x43c,_0x1db0d0);}this[_0x9507ce(-0x71,-0xb5)]['windTextures'][_0x44a375][_0x9507ce(-0xcc,-0xab)]();});function _0x5a7dc9(_0x255e33,_0x270266){return _0x20a044(_0x270266,_0x255e33-0x34);}this['particlesRendering']['textures']['colorTable'][_0x331970(0x216,0x17e)](),Object['keys'](this[_0x331970(0x28e,0x248)]['framebuffers'])['forEach'](_0x22a096=>{function _0x26e3f5(_0x30906d,_0x3ca224){return _0x5a7dc9(_0x3ca224-0x4a2,_0x30906d);}function _0x2f8bae(_0x19ef4b,_0x50b156){return _0x5a7dc9(_0x19ef4b-0x46,_0x50b156);}this[_0x2f8bae(-0x111,-0xf9)][_0x26e3f5(0x30e,0x35c)][_0x22a096]['destroy']();});for(const _0x2969d2 in this){delete this[_0x2969d2];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace[_0x5218ea(0x25d,0x2e3)][_0x5218ea(0x1a0,0x195)],_0x587861={};_0x587861['particlesNumber']=0x1000,_0x587861[_0x20a044(-0x11d,-0x103)]=0x0,_0x587861['fadeOpacity']=0.996,_0x587861['dropRate']=0.003,_0x587861['dropRateBump']=0.01,_0x587861['speedFactor']=0.5,_0x587861[_0x20a044(-0x258,-0x1ef)]=0x2,_0x587861['colors']=[_0x5218ea(0x17c,0x1ee)],_0x587861[_0x5218ea(0x283,0x2e0)]=!![];const DEF_OPTIONS=_0x587861;class WindLayer extends BaseLayer$1{constructor(_0x1bacbe={}){_0x1bacbe={...DEF_OPTIONS,..._0x1bacbe},super(_0x1bacbe),this['_setOptionsHook'](_0x1bacbe);}get[_0x5218ea(0x25d,0x2f8)](){function _0x14dacc(_0x3db1b,_0x5edc8e){return _0x5218ea(_0x3db1b-0x116,_0x5edc8e);}return this[_0x14dacc(0x30f,0x2c1)];}get[_0x5218ea(0x1a3,0x1f2)](){return this['_data'];}set['data'](_0x36dd99){function _0x406122(_0x4e4bfe,_0x234416){return _0x5218ea(_0x4e4bfe-0x3f,_0x234416);}this[_0x406122(0x24a,0x2ac)](_0x36dd99);}get[_0x5218ea(0x26b,0x2f3)](){function _0x6bb5fd(_0x12fed7,_0x4d7e1c){return _0x5218ea(_0x12fed7- -0x35b,_0x4d7e1c);}return this[_0x6bb5fd(-0xb7,-0x28)]['colors'];}set['colors'](_0x207e93){this['options']['colors']=_0x207e93;if(this['particleSystem']){const _0x18b881={};_0x18b881['colors']=_0x207e93,this['particleSystem'][_0x178083(0x332,0x301)](_0x18b881);}function _0x56da5d(_0x5a37c5,_0x6818da){return _0x20a044(_0x5a37c5,_0x6818da-0x2a5);}function _0x178083(_0x5b8beb,_0x4a8221){return _0x5218ea(_0x4a8221-0x11f,_0x5b8beb);}this[_0x56da5d(0x10b,0x18d)]();}[_0x20a044(-0x17e,-0x1db)](){}['_addedHook'](){this['scene']=this['_map']['scene'],this['camera']=this[_0x483f15(-0x1e3,-0x1fc)][_0x483f15(-0x254,-0x1e4)],this[_0x2ec7f1(0x39e,0x3fd)]=new Cesium$1['PrimitiveCollection'](),this[_0x483f15(-0x1e3,-0x1f5)]['scene']['primitives']['add'](this['primitives']),this[_0x2ec7f1(0x3c1,0x413)]={'lonRange':new Cesium$1[(_0x2ec7f1(0x409,0x3d4))](),'latRange':new Cesium$1['Cartesian2'](),'pixelSize':0x0,'lonDisplayRange':new Cesium$1['Cartesian2'](),'latDisplayRange':new Cesium$1[(_0x483f15(-0x215,-0x253))]()},this['globeBoundingSphere']=new Cesium$1['BoundingSphere'](Cesium$1['Cartesian3'][_0x483f15(-0x2ee,-0x2e2)],Cesium$1[_0x2ec7f1(0x35a,0x325)]['WGS84']['minimumRadius']),this['updateViewerParameters']();function _0x2ec7f1(_0x5da236,_0x6fe455){return _0x20a044(_0x6fe455,_0x5da236-0x538);}window['addEventListener']('resize',this[_0x483f15(-0x1fe,-0x1a4)][_0x483f15(-0x1f8,-0x1f7)](this),![]),this[_0x483f15(-0x292,-0x223)]=![],this[_0x2ec7f1(0x3cb,0x3e3)]=![],this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this);function _0x483f15(_0x13342e,_0x4954de){return _0x5218ea(_0x13342e- -0x479,_0x4954de);}this[_0x483f15(-0x1e3,-0x188)]['on'](mars3d__namespace['EventType'][_0x483f15(-0x2c0,-0x240)],this['_onMouseDownEvent'],this),this[_0x483f15(-0x1e3,-0x1df)]['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x2ec7f1(0x33d,0x2b5)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x483f15(-0x2a4,-0x2bd)],this['_onMouseMoveEvent'],this),this['_data']&&this['setData'](this['_data']);}['_removedHook'](){window[_0x1af55f(0x37f,0x400)]('resize',this['resize']),this[_0x151d5b(0x563,0x505)][_0x151d5b(0x540,0x52a)](mars3d__namespace[_0x151d5b(0x524,0x57b)][_0x1af55f(0x3f3,0x3e9)],this['_onMap_preRenderEvent'],this);function _0x151d5b(_0x4ead23,_0x5cd46b){return _0x5218ea(_0x4ead23-0x2cd,_0x5cd46b);}this['_map']['off'](mars3d__namespace['EventType'][_0x1af55f(0x3fd,0x41a)],this['_onMapWhellEvent'],this);function _0x1af55f(_0x1bd4f7,_0x305c12){return _0x5218ea(_0x305c12-0x1b5,_0x1bd4f7);}this['_map'][_0x1af55f(0x394,0x428)](mars3d__namespace[_0x1af55f(0x405,0x40c)][_0x1af55f(0x400,0x36e)],this[_0x151d5b(0x4f1,0x4cf)],this),this[_0x1af55f(0x4d7,0x44b)][_0x1af55f(0x4b2,0x428)](mars3d__namespace['EventType'][_0x151d5b(0x55e,0x56b)],this['_onMouseUpEvent'],this),this[_0x151d5b(0x563,0x4eb)][_0x151d5b(0x540,0x587)](mars3d__namespace['EventType'][_0x1af55f(0x360,0x38a)],this['_onMouseMoveEvent'],this),this['primitives'][_0x1af55f(0x407,0x404)](),this[_0x151d5b(0x563,0x5ef)]['scene']['primitives'][_0x1af55f(0x32d,0x3a6)](this[_0x1af55f(0x3bb,0x3ae)]);}['resize'](){if(!this['show']||!this[_0x3989cc(-0x163,-0xdd)])return;function _0x3989cc(_0x2662e3,_0x358078){return _0x20a044(_0x358078,_0x2662e3-0x11);}this[_0x417973(0x298,0x270)][_0x417973(0x1df,0x242)]=![],this[_0x3989cc(-0x189,-0x176)]['removeAll']();function _0x417973(_0x499313,_0x2746ed){return _0x20a044(_0x499313,_0x2746ed-0x40a);}this[_0x3989cc(-0xec,-0x90)]['once'](mars3d__namespace[_0x417973(0x328,0x2ce)]['preRender'],this['_onMap_preRenderEvent'],this);}['_onMap_preRenderEvent'](_0x507c56){function _0x23b4ed(_0x5288f5,_0x19adf1){return _0x5218ea(_0x19adf1-0x20e,_0x5288f5);}this[_0x23b4ed(0x46b,0x42d)]['canvasResize'](this['scene']['context']);function _0x99406b(_0x267df5,_0x136929){return _0x5218ea(_0x267df5-0x272,_0x136929);}this[_0x99406b(0x462,0x421)](),this['primitives']['show']=!![];}['_onMapWhellEvent'](_0x524e0a){function _0x5d14ef(_0x313bd1,_0x22b00a){return _0x5218ea(_0x22b00a-0x18b,_0x313bd1);}clearTimeout(this[_0x5d14ef(0x3ae,0x420)]);if(!this[_0x5d14ef(0x339,0x356)]||!this[_0x5d14ef(0x311,0x3aa)])return;this['primitives'][_0x5d7aed(0x1ba,0x1e1)]=![];function _0x5d7aed(_0x1d4b4d,_0x1e391a){return _0x20a044(_0x1e391a,_0x1d4b4d-0x382);}this[_0x5d7aed(0x284,0x24b)]=setTimeout(()=>{if(!this['show'])return;this['redraw']();},0xc8);}[_0x20a044(-0xda,-0x16f)](_0x2cdadb){this['mouse_down']=!![];}[_0x5218ea(0x202,0x232)](_0x349e03){if(!this['show']||!this['particleSystem'])return;this['mouse_down']&&(this['primitives']['show']=![],this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x2b3c36){if(!this['show']||!this['particleSystem'])return;function _0x4c08a5(_0x48cb27,_0x4971e2){return _0x20a044(_0x48cb27,_0x4971e2-0x3ac);}function _0x4bdca8(_0x351ad4,_0x1ccf57){return _0x20a044(_0x351ad4,_0x1ccf57-0x487);}this['mouse_down']&&this['mouse_move']&&this[_0x4bdca8(0x341,0x353)](),this[_0x4c08a5(0x233,0x212)]['show']=!![],this['mouse_down']=![],this[_0x4bdca8(0x33c,0x31a)]=![];}['redraw'](){function _0xe57ed(_0x56bece,_0xcffb72){return _0x20a044(_0xcffb72,_0x56bece-0x4a1);}function _0x527707(_0x254d10,_0x4de273){return _0x5218ea(_0x4de273- -0x30f,_0x254d10);}if(!this[_0x527707(-0x9e,-0x79)]||!this['show'])return;this['updateViewerParameters'](),this['particleSystem']['applyViewerParameters'](this[_0x527707(-0x77,-0xf3)]),this[_0xe57ed(0x307,0x332)]['show']=!![];}['setData'](_0x26f4e5){this[_0x4fec5f(0x540,0x589)]=_0x26f4e5;function _0x3484ec(_0x410eed,_0x3f40d1){return _0x20a044(_0x3f40d1,_0x410eed-0x50e);}this['particleSystem']&&this['particleSystem']['destroy']();this['particleSystem']=new ParticleSystem(this['scene'][_0x3484ec(0x36a,0x2d8)],_0x26f4e5,this['getOptions'](),this[_0x3484ec(0x397,0x41f)]);function _0x4fec5f(_0x374700,_0x13f33e){return _0x5218ea(_0x374700-0x341,_0x13f33e);}this['addPrimitives']();}['_setOptionsHook'](_0x5e8d95,_0x30b2c8){function _0x16c63d(_0x464051,_0x542105){return _0x5218ea(_0x542105- -0x338,_0x464051);}function _0x4c5baf(_0x175430,_0x136465){return _0x5218ea(_0x175430-0x1c8,_0x136465);}if(_0x5e8d95)for(const _0x181a0f in _0x5e8d95){this[_0x181a0f]=_0x5e8d95[_0x181a0f];}this[_0x16c63d(-0x170,-0x119)]&&this[_0x4c5baf(0x3e7,0x3f4)]['setOptions'](this['getOptions']());}[_0x20a044(-0x24b,-0x21d)](){const _0x5241c4=Math['ceil'](Math['sqrt'](this['particlesNumber']));this[_0x23d025(0x241,0x1a8)]=_0x5241c4*_0x5241c4;const _0x278eb3={};_0x278eb3[_0x23d025(0x233,0x285)]=_0x5241c4,_0x278eb3['maxParticles']=this[_0x23d025(0x241,0x209)],_0x278eb3['colors']=this[_0x23d025(0x236,0x2aa)],_0x278eb3[_0x3139e1(-0xaa,-0xe6)]=this['fixedHeight'];function _0x23d025(_0x2b17f4,_0x4198c7){return _0x20a044(_0x4198c7,_0x2b17f4-0x35e);}function _0x3139e1(_0x202d1c,_0x3f573d){return _0x20a044(_0x3f573d,_0x202d1c-0x156);}return _0x278eb3['fadeOpacity']=this[_0x3139e1(0x51,0x41)],_0x278eb3['dropRate']=this['dropRate'],_0x278eb3[_0x23d025(0x1fa,0x241)]=this[_0x3139e1(-0xe,0x6c)],_0x278eb3['speedFactor']=this[_0x3139e1(-0xc2,-0x9a)],_0x278eb3['lineWidth']=this['lineWidth'],_0x278eb3['dynamic']=this['dynamic'],_0x278eb3;}['addPrimitives'](){this['primitives'][_0x544079(0x10,0x9a)](this['particleSystem'][_0x1c4470(0x488,0x434)]['primitives'][_0x1c4470(0x523,0x507)]),this[_0x1c4470(0x496,0x42e)]['add'](this['particleSystem'][_0x544079(0xd7,0x55)]['primitives']['updatePosition']);function _0x1c4470(_0x56e914,_0x2bc1fb){return _0x5218ea(_0x56e914-0x29d,_0x2bc1fb);}this['primitives']['add'](this[_0x1c4470(0x4bc,0x47d)][_0x544079(0xac,0x55)]['primitives'][_0x1c4470(0x492,0x42b)]),this['primitives']['add'](this['particleSystem']['particlesRendering']['primitives'][_0x1c4470(0x476,0x4e8)]),this[_0x544079(-0x11,0x63)]['add'](this['particleSystem']['particlesRendering']['primitives']['trails']);function _0x544079(_0x3844a1,_0x124bc3){return _0x20a044(_0x3844a1,_0x124bc3-0x1fd);}this['primitives'][_0x544079(0xc8,0x9a)](this[_0x544079(0x21,0x89)][_0x1c4470(0x4a5,0x4c4)]['primitives'][_0x1c4470(0x477,0x4c3)]);}[_0x20a044(-0x19c,-0x199)](){let _0x212cb2=this[_0x1d6bc6(0x54d,0x537)][_0x1d6bc6(0x5fe,0x56e)](this['scene'][_0x1d6bc6(0x565,0x5b5)][_0x1d6bc6(0x54f,0x508)]);if(!_0x212cb2){const _0x209bda=this['_map']['getExtent']();_0x212cb2=Cesium$1['Rectangle'][_0x1d6bc6(0x46b,0x4e0)](_0x209bda['xmin'],_0x209bda['ymin'],_0x209bda[_0x1d6bc6(0x540,0x4c8)],_0x209bda[_0x1d6bc6(0x4cc,0x4c0)]);}function _0x1d6bc6(_0x595aba,_0x2c1b4c){return _0x20a044(_0x595aba,_0x2c1b4c-0x6a5);}function _0x208471(_0x3a16ec,_0x581c03){return _0x20a044(_0x581c03,_0x3a16ec-0x52d);}const _0x2d681a=Util[_0x208471(0x362,0x35d)](_0x212cb2);this['_data']?(this['viewerParameters']['lonRange']['x']=Math[_0x208471(0x380,0x37a)](_0x2d681a[_0x208471(0x434,0x439)]['min'],this['_data']['xmin']),this['viewerParameters']['lonRange']['y']=Math['min'](_0x2d681a['lon']['max'],this['_data']['xmax']),this['viewerParameters']['latRange']['x']=Math['max'](_0x2d681a[_0x208471(0x384,0x331)]['min'],this['_data']['ymin']),this[_0x1d6bc6(0x4c5,0x52e)]['latRange']['y']=Math['min'](_0x2d681a['lat']['max'],this['_data'][_0x208471(0x348,0x2d3)])):(this[_0x1d6bc6(0x58b,0x52e)]['lonRange']['x']=_0x2d681a['lon'][_0x208471(0x3e2,0x3e1)],this['viewerParameters'][_0x1d6bc6(0x558,0x584)]['y']=_0x2d681a['lon'][_0x208471(0x380,0x355)],this['viewerParameters'][_0x1d6bc6(0x5d0,0x57b)]['x']=_0x2d681a[_0x1d6bc6(0x4c9,0x4fc)]['min'],this['viewerParameters'][_0x208471(0x403,0x3e8)]['y']=_0x2d681a[_0x1d6bc6(0x523,0x4fc)]['max']);let _0x14d7cb=this[_0x208471(0x3bf,0x3a5)]['getPixelSize'](this[_0x208471(0x406,0x3dd)],this[_0x208471(0x312,0x356)]['drawingBufferWidth'],this['scene']['drawingBufferHeight']);const _0x1c9812=this[_0x208471(0x312,0x352)][_0x1d6bc6(0x56b,0x519)]*0.3;_0x14d7cb<_0x1c9812&&(_0x14d7cb=_0x1c9812),this[_0x1d6bc6(0x532,0x52e)]['pixelSize']=_0x14d7cb;}}mars3d__namespace['LayerUtil']['register'](_0x5218ea(0x2a7,0x2db),WindLayer),mars3d__namespace['layer'][_0x20a044(-0xa8,-0x111)]=WindLayer;function _0x4650(_0x3c4de3,_0x275e03){const _0x2d762b=_0x2d76();return _0x4650=function(_0x46505b,_0x458de5){_0x46505b=_0x46505b-0xd7;let _0x44e3ea=_0x2d762b[_0x46505b];return _0x44e3ea;},_0x4650(_0x3c4de3,_0x275e03);}class CanvasParticle{constructor(){this['lng']=null;function _0x2fa309(_0x4353bf,_0x174db6){return _0x5218ea(_0x4353bf- -0xfb,_0x174db6);}this[_0x46fd40(-0x9c,-0x8a)]=null,this['tlng']=null,this['tlat']=null,this[_0x46fd40(-0x4e,-0xb6)]=null;function _0x46fd40(_0x5706cb,_0x4ba0b7){return _0x20a044(_0x5706cb,_0x4ba0b7-0x11f);}this['speed']=null;}[_0x20a044(-0x18e,-0x203)](){for(const _0x2ac0b0 in this){delete this[_0x2ac0b0];}}}class CanvasWindField{constructor(_0x3ae801){this['setOptions'](_0x3ae801);}get[_0x20a044(-0xe9,-0x142)](){return this['_speedRate'];}set[_0x5218ea(0x251,0x2ae)](_0x278597){this[_0x5295a5(0x4d3,0x455)]=(0x64-(_0x278597>0x63?0x63:_0x278597))*0x64;function _0x5295a5(_0x313152,_0x13901a){return _0x5218ea(_0x313152-0x289,_0x13901a);}function _0x5dc8ca(_0x3a2482,_0x4b522d){return _0x20a044(_0x4b522d,_0x3a2482-0x33f);}this['_calc_speedRate']=[(this['xmax']-this[_0x5295a5(0x4aa,0x460)])/this[_0x5dc8ca(0x1f6,0x28e)],(this['ymax']-this['ymin'])/this[_0x5295a5(0x4d3,0x50f)]];}get['maxAge'](){return this['_maxAge'];}set['maxAge'](_0x3beeb9){function _0x4d1806(_0x1cd91d,_0x198fad){return _0x5218ea(_0x198fad- -0x3b1,_0x1cd91d);}this[_0x4d1806(-0xba,-0x132)]=_0x3beeb9;}[_0x5218ea(0x1e2,0x19d)](_0x423836){this['options']=_0x423836;function _0x22f396(_0x318502,_0x2d0de1){return _0x5218ea(_0x2d0de1- -0x6d,_0x318502);}this['maxAge']=_0x423836['maxAge']||0x78,this['speedRate']=_0x423836['speedRate']||0x32,this[_0x22f396(0x21e,0x18f)]=[];const _0x17cbcd=_0x423836['particlesNumber']||0x1000;for(let _0x1e4f3a=0x0;_0x1e4f3a<_0x17cbcd;_0x1e4f3a++){const _0x56a1ac=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x56a1ac);}}['setDate'](_0x468fba){this['rows']=_0x468fba['rows'],this['cols']=_0x468fba['cols'];function _0x6fa65f(_0x46c09e,_0x2a427b){return _0x5218ea(_0x2a427b- -0x6b,_0x46c09e);}this[_0x6fa65f(0x1f5,0x1b6)]=_0x468fba['xmin'],this[_0x1493b8(0x18a,0x125)]=_0x468fba[_0x6fa65f(0xc3,0x14b)],this['ymin']=_0x468fba['ymin'];function _0x1493b8(_0x113b2e,_0x69f9df){return _0x5218ea(_0x113b2e- -0x2c,_0x69f9df);}this['ymax']=_0x468fba['ymax'],this['grid']=[];const _0x4a63c4=_0x468fba[_0x6fa65f(0x13c,0x165)],_0x53dd59=_0x468fba[_0x1493b8(0x152,0xc4)];let _0x5643dd=![];_0x4a63c4['length']===this['rows']&&_0x4a63c4[0x0]['length']===this['cols']&&(_0x5643dd=!![]);let _0x589229=0x0,_0x1e96e6=null,_0x55baf4=null;for(let _0x27a929=0x0;_0x27a929<this[_0x1493b8(0x170,0xe8)];_0x27a929++){_0x1e96e6=[];for(let _0x287d14=0x0;_0x287d14<this['cols'];_0x287d14++,_0x589229++){_0x5643dd?_0x55baf4=this[_0x1493b8(0x209,0x1ed)](_0x4a63c4[_0x27a929][_0x287d14],_0x53dd59[_0x27a929][_0x287d14]):_0x55baf4=this[_0x1493b8(0x209,0x275)](_0x4a63c4[_0x589229],_0x53dd59[_0x589229]),_0x1e96e6['push'](_0x55baf4);}this['grid']['push'](_0x1e96e6);}this[_0x1493b8(0x278,0x306)][_0x6fa65f(0x1da,0x145)]&&this['grid'][_0x6fa65f(0x152,0x12e)]();}['clear'](){function _0x2aa146(_0x1f91c8,_0xd3f9a9){return _0x5218ea(_0x1f91c8- -0x413,_0xd3f9a9);}delete this['rows'],delete this[_0x313e87(0x149,0x146)];function _0x313e87(_0x3ebda2,_0x208a0a){return _0x5218ea(_0x3ebda2- -0xa3,_0x208a0a);}delete this['xmin'],delete this['xmax'],delete this[_0x2aa146(-0x266,-0x200)],delete this['ymax'],delete this['grid'],delete this[_0x313e87(0x159,0xf5)];}['toGridXY'](_0x4b256b,_0x547e23){const _0x429512=(_0x4b256b-this[_0x583b7c(0x3fd,0x3f1)])/(this['xmax']-this[_0x583b7c(0x3fd,0x3f4)])*(this[_0x3d432d(0x3a9,0x33a)]-0x1);function _0x583b7c(_0x4ae2f4,_0x11c3d7){return _0x5218ea(_0x4ae2f4-0x1dc,_0x11c3d7);}const _0x2a8989=(this['ymax']-_0x547e23)/(this['ymax']-this['ymin'])*(this['rows']-0x1);function _0x3d432d(_0x2b8239,_0x2b9327){return _0x5218ea(_0x2b9327-0x14e,_0x2b8239);}return[_0x429512,_0x2a8989];}['getUVByXY'](_0x2c091a,_0x48f7de){if(_0x2c091a<0x0||_0x2c091a>=this['cols']||_0x48f7de>=this['rows'])return[0x0,0x0,0x0];const _0x281342=Math['floor'](_0x2c091a),_0xef2206=Math['floor'](_0x48f7de);if(_0x281342===_0x2c091a&&_0xef2206===_0x48f7de)return this[_0x263b10(0x174,0xf5)][_0x48f7de][_0x2c091a];const _0x10064e=_0x281342+0x1,_0xf39ba3=_0xef2206+0x1;function _0x263b10(_0x596eaa,_0x1e9395){return _0x20a044(_0x1e9395,_0x596eaa-0x2d0);}const _0x5ad25f=this[_0x263b10(0x164,0x183)](_0x281342,_0xef2206),_0x305d23=this['getUVByXY'](_0x10064e,_0xef2206),_0x41e487=this['getUVByXY'](_0x281342,_0xf39ba3),_0x3c5c96=this['getUVByXY'](_0x10064e,_0xf39ba3);function _0x4f0d0f(_0x55a435,_0x421b7b){return _0x20a044(_0x421b7b,_0x55a435-0x521);}let _0x19fb8f=null;try{_0x19fb8f=this[_0x4f0d0f(0x369,0x379)](_0x2c091a-_0x281342,_0x48f7de-_0xef2206,_0x5ad25f,_0x305d23,_0x41e487,_0x3c5c96);}catch(_0x58f373){console[_0x263b10(0x1c6,0x1d6)](_0x2c091a,_0x48f7de);}return _0x19fb8f;}[_0x20a044(-0x1eb,-0x1b8)](_0x29ba19,_0x27d641,_0x29e93a,_0x48bd7e,_0x400f5d,_0x3be33e){const _0x506372=0x1-_0x29ba19,_0x41c5c7=0x1-_0x27d641,_0x36071d=_0x506372*_0x41c5c7;function _0x1cecd3(_0x551a70,_0x2e187d){return _0x5218ea(_0x2e187d-0xe5,_0x551a70);}const _0x40d174=_0x29ba19*_0x41c5c7,_0x43c8b2=_0x506372*_0x27d641,_0x4b802f=_0x29ba19*_0x27d641,_0x387f8e=_0x29e93a[0x0]*_0x36071d+_0x48bd7e[0x0]*_0x40d174+_0x400f5d[0x0]*_0x43c8b2+_0x3be33e[0x0]*_0x4b802f,_0x3049f8=_0x29e93a[0x1]*_0x36071d+_0x48bd7e[0x1]*_0x40d174+_0x400f5d[0x1]*_0x43c8b2+_0x3be33e[0x1]*_0x4b802f;return this[_0x1cecd3(0x291,0x31a)](_0x387f8e,_0x3049f8);}['_calcUV'](_0x4b3863,_0x62b4c1){function _0x172c4f(_0x31a5f9,_0x33bb2c){return _0x5218ea(_0x33bb2c- -0x15e,_0x31a5f9);}return[+_0x4b3863,+_0x62b4c1,Math[_0x172c4f(0x10c,0x12a)](_0x4b3863*_0x4b3863+_0x62b4c1*_0x62b4c1)];}['getUVByPoint'](_0x43642a,_0x5b26ca){function _0x4b4f39(_0x3b5f73,_0x14ff5d){return _0x20a044(_0x14ff5d,_0x3b5f73-0x3d1);}if(!this['isInExtent'](_0x43642a,_0x5b26ca))return null;const _0x211540=this['toGridXY'](_0x43642a,_0x5b26ca),_0x511c33=this[_0x4b4f39(0x265,0x2d8)](_0x211540[0x0],_0x211540[0x1]);return _0x511c33;}['isInExtent'](_0x52627c,_0x385e3f){function _0x1de9e9(_0x2c61f6,_0x189ab7){return _0x5218ea(_0x2c61f6- -0x19c,_0x189ab7);}function _0x2c934f(_0x42bb53,_0x700ee8){return _0x20a044(_0x700ee8,_0x42bb53-0x398);}return _0x52627c>=this[_0x2c934f(0x226,0x279)]&&_0x52627c<=this[_0x2c934f(0x1bb,0x1ae)]&&_0x385e3f>=this['ymin']&&_0x385e3f<=this['ymax']?!![]:![];}['getRandomLatLng'](){function _0x208350(_0x260c1f,_0x112d78){return _0x20a044(_0x260c1f,_0x112d78-0x558);}const _0x18f227=fRandomByfloat(this[_0x208350(0x389,0x3e6)],this[_0x208350(0x301,0x37b)]);function _0x2d5e88(_0x538617,_0x270f12){return _0x20a044(_0x538617,_0x270f12-0x1cb);}const _0xae120=fRandomByfloat(this[_0x208350(0x382,0x372)],this[_0x2d5e88(-0x4d,-0x1a)]),_0x31c93e={};return _0x31c93e['lat']=_0xae120,_0x31c93e['lng']=_0x18f227,_0x31c93e;}[_0x5218ea(0x244,0x1d7)](){function _0x237b0d(_0x47171f,_0x2c53af){return _0x20a044(_0x47171f,_0x2c53af-0xdd);}function _0x58399b(_0x3d76f2,_0x1d4312){return _0x5218ea(_0x3d76f2- -0xc2,_0x1d4312);}let _0xa6891b,_0x107a6a,_0x4a7208;for(let _0x1c1c3d=0x0,_0x3249de=this[_0x237b0d(-0x32,-0xba)]['length'];_0x1c1c3d<_0x3249de;_0x1c1c3d++){let _0x55b687=this['particles'][_0x1c1c3d];_0x55b687['age']<=0x0&&(_0x55b687=this['_randomParticle'](_0x55b687));if(_0x55b687['age']>0x0){const _0x5d25a8=_0x55b687['tlng'],_0x4103a1=_0x55b687[_0x58399b(0x1c8,0x1b1)];_0x4a7208=this[_0x237b0d(-0x96,-0xb2)](_0x5d25a8,_0x4103a1),_0x4a7208?(_0xa6891b=_0x5d25a8+this['_calc_speedRate'][0x0]*_0x4a7208[0x0],_0x107a6a=_0x4103a1+this[_0x58399b(0xcb,0x70)][0x1]*_0x4a7208[0x1],_0x55b687[_0x237b0d(-0x11e,-0xbb)]=_0x5d25a8,_0x55b687[_0x237b0d(-0x107,-0xcc)]=_0x4103a1,_0x55b687['tlng']=_0xa6891b,_0x55b687['tlat']=_0x107a6a,_0x55b687['speed']=_0x4a7208[0x2],_0x55b687[_0x58399b(0xfc,0xf2)]--):_0x55b687[_0x237b0d(-0x114,-0xf8)]=0x0;}}return this['particles'];}['_randomParticle'](_0x590233){let _0x41ff9d,_0x4816b6;for(let _0x447d68=0x0;_0x447d68<0x1e;_0x447d68++){_0x41ff9d=this['getRandomLatLng'](),_0x4816b6=this['getUVByPoint'](_0x41ff9d['lng'],_0x41ff9d['lat']);if(_0x4816b6&&_0x4816b6[0x2]>0x0)break;}if(!_0x4816b6)return _0x590233;const _0x1ceb8f=_0x41ff9d[_0x295cd6(-0x15d,-0x1e4)]+this[_0x501153(0x489,0x42f)][0x0]*_0x4816b6[0x0],_0xe7331=_0x41ff9d['lat']+this['_calc_speedRate'][0x1]*_0x4816b6[0x1];_0x590233['lng']=_0x41ff9d['lng'],_0x590233[_0x501153(0x4aa,0x48c)]=_0x41ff9d[_0x501153(0x4d2,0x48c)],_0x590233[_0x295cd6(-0x245,-0x1b6)]=_0x1ceb8f,_0x590233[_0x295cd6(-0x11c,-0x155)]=_0xe7331,_0x590233['age']=Math[_0x295cd6(-0x241,-0x222)](Math[_0x295cd6(-0x163,-0x146)]()*this[_0x295cd6(-0x216,-0x25d)]),_0x590233[_0x295cd6(-0x175,-0x179)]=_0x4816b6[0x2];function _0x501153(_0x31b539,_0x4015a9){return _0x20a044(_0x31b539,_0x4015a9-0x635);}function _0x295cd6(_0x15d11c,_0x4a22ba){return _0x5218ea(_0x4a22ba- -0x3df,_0x15d11c);}return _0x590233;}['destroy'](){for(const _0x42526f in this){delete this[_0x42526f];}}}function fRandomByfloat(_0x23b442,_0x23c7e4){return _0x23b442+Math['random']()*(_0x23c7e4-_0x23b442);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x20a044(-0x10e,-0x136)]['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x514a93={}){super(_0x514a93),this['_setOptionsHook'](_0x514a93);function _0x2c707e(_0x9723e5,_0x262d16){return _0x20a044(_0x9723e5,_0x262d16-0x3a0);}this[_0x175ce3(0x21f,0x1b6)]=null;function _0x175ce3(_0x533ac7,_0x404212){return _0x5218ea(_0x404212- -0xea,_0x533ac7);}_0x514a93['colors']&&_0x514a93['steps']&&(this[_0x175ce3(0x7c,0x99)]=new mars3d__namespace['ColorRamp'](_0x514a93));}['_setOptionsHook'](_0x2a1c85,_0xc62889){function _0x5ba9ed(_0x5239cc,_0x1a1804){return _0x5218ea(_0x5239cc-0x9b,_0x1a1804);}this[_0x5505df(-0x225,-0x1b5)]=0x3e8/(_0x2a1c85[_0x5505df(-0x2d3,-0x251)]||0xa),this['_pointerEvents']=this[_0x5505df(-0x14c,-0x12e)][_0x5ba9ed(0x322,0x2a3)]??![],this[_0x5505df(-0x191,-0x1c5)]=_0x2a1c85[_0x5505df(-0x18a,-0x1c5)]||'#ffffff',this['lineWidth']=_0x2a1c85['lineWidth']||0x1;function _0x5505df(_0x3c315d,_0x217db7){return _0x5218ea(_0x217db7- -0x3d2,_0x3c315d);}this['fixedHeight']=_0x2a1c85[_0x5505df(-0x160,-0x142)]??0x0,this['reverseY']=_0x2a1c85[_0x5505df(-0x274,-0x222)]??![],this[_0x5ba9ed(0x319,0x341)]&&this[_0x5ba9ed(0x319,0x375)]['setOptions'](_0x2a1c85);}get['layer'](){return this['canvas'];}get['canvasWidth'](){function _0x5219db(_0x255acd,_0x4e2cc4){return _0x20a044(_0x4e2cc4,_0x255acd-0xc5);}return this[_0x5219db(-0x38,0x2f)]['scene']['canvas']['clientWidth'];}get['canvasHeight'](){function _0x41bf92(_0x19aa70,_0x32e4c3){return _0x5218ea(_0x19aa70- -0x72,_0x32e4c3);}function _0x2b4c3b(_0x49698a,_0x138bcc){return _0x5218ea(_0x138bcc- -0x33e,_0x49698a);}return this[_0x2b4c3b(-0xf4,-0xa8)][_0x41bf92(0x106,0x72)]['canvas'][_0x41bf92(0x1c7,0x226)];}get['pointerEvents'](){function _0x15820f(_0x35579a,_0x31ddc5){return _0x20a044(_0x31ddc5,_0x35579a-0x538);}return this[_0x15820f(0x379,0x3e0)];}set['pointerEvents'](_0x451504){this[_0x48a73d(0x2b3,0x346)]=_0x451504;function _0x48a73d(_0x1c8027,_0x203e52){return _0x5218ea(_0x203e52-0x172,_0x1c8027);}function _0x8623e5(_0x236c8f,_0x34130f){return _0x5218ea(_0x236c8f- -0x1b3,_0x34130f);}if(!this[_0x8623e5(0xed,0x11f)])return;_0x451504?this['canvas'][_0x8623e5(0x1e,-0x5a)]['pointer-events']=_0x48a73d(0x302,0x34f):this[_0x48a73d(0x3ce,0x412)]['style']['pointer-events']='none';}get[_0x5218ea(0x276,0x1f1)](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x1e60b0){this['options']['particlesNumber']=_0x1e60b0,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x5218ea(0x251,0x1bb)](){return this['options']['speedRate'];}set['speedRate'](_0x10b53c){function _0x474c91(_0xc4ded2,_0x4d350a){return _0x5218ea(_0x4d350a-0x49,_0xc4ded2);}function _0xe9d7a4(_0x3c03ec,_0x2eba43){return _0x5218ea(_0x3c03ec- -0x2df,_0x2eba43);}this['options']['speedRate']=_0x10b53c,this[_0xe9d7a4(-0x61,-0xda)]&&(this[_0xe9d7a4(-0x61,-0xef)]['speedRate']=_0x10b53c);}get['maxAge'](){function _0x2c4591(_0x15c9f2,_0x53616f){return _0x5218ea(_0x53616f-0x148,_0x15c9f2);}function _0x7815e(_0x3d0a7c,_0x6c3231){return _0x5218ea(_0x6c3231- -0x47d,_0x3d0a7c);}return this[_0x7815e(-0x1e4,-0x1d9)][_0x2c4591(0x24d,0x2ca)];}set['maxAge'](_0x4cec2d){function _0x65c142(_0x36faee,_0x1f9ac8){return _0x5218ea(_0x1f9ac8-0x245,_0x36faee);}this['options']['maxAge']=_0x4cec2d,this['windField']&&(this[_0x65c142(0x4a5,0x4c3)]['maxAge']=_0x4cec2d);}get[_0x20a044(-0x268,-0x1f0)](){return this['windData'];}set['data'](_0x6dcaeb){function _0x184d36(_0x3263b2,_0x251663){return _0x5218ea(_0x251663- -0x22a,_0x3263b2);}this[_0x184d36(0xd,-0x1f)](_0x6dcaeb);}get['rectangle'](){let _0x5675a5=this['windData'][_0x242a73(-0x156,-0x138)],_0x56b6a2=this[_0x29b0f7(-0x12b,-0x178)]['xmax'],_0x1aec13=this[_0x242a73(-0x97,-0x11c)]['ymin'],_0x22fa1b=this[_0x242a73(-0xf3,-0x11c)]['ymax'];_0x56b6a2>=0x167&&_0x5675a5===0x0&&(_0x5675a5=-0xb4,_0x56b6a2=0xb4);_0x5675a5=Math['max'](_0x5675a5,-0xb4),_0x56b6a2=Math['min'](_0x56b6a2,0xb4),_0x1aec13=Math['max'](_0x1aec13,-0x5a);function _0x29b0f7(_0x1cc7f9,_0x1f925b){return _0x5218ea(_0x1cc7f9- -0x368,_0x1f925b);}function _0x242a73(_0xd63450,_0x3f6ba0){return _0x20a044(_0xd63450,_0x3f6ba0-0x3a);}return _0x22fa1b=Math[_0x29b0f7(-0x120,-0x153)](_0x22fa1b,0x5a),Cesium['Rectangle'][_0x242a73(-0x105,-0x18b)](_0x5675a5,_0x1aec13,_0x56b6a2,_0x22fa1b);}['_showHook'](_0x10797b){function _0x318aa3(_0x39f4b4,_0x218049){return _0x5218ea(_0x218049-0x120,_0x39f4b4);}function _0x3d8877(_0x3545a8,_0x59bcf1){return _0x5218ea(_0x59bcf1- -0x2dd,_0x3545a8);}_0x10797b?this['_addedHook']():(this[_0x318aa3(0x357,0x35d)]&&(this['options'][_0x3d8877(-0x177,-0x13a)]=this['windData']),this['_removedHook']());}[_0x20a044(-0x18b,-0x1db)](){function _0x12fe09(_0x45eeac,_0x20da75){return _0x20a044(_0x45eeac,_0x20da75-0x2c8);}function _0xe4260d(_0x1d5ff2,_0x194d47){return _0x5218ea(_0x1d5ff2- -0x1cb,_0x194d47);}this[_0x12fe09(0x247,0x1d9)][_0x12fe09(0x1ae,0x17a)]?this[_0xe4260d(0x13,0x15)]():this['windField']=new CanvasWindField(this['options']);}[_0x20a044(-0x25b,-0x1fd)](){this['canvas']=this['_createCanvas']();function _0x186c04(_0x1f9091,_0x5ab10b){return _0x5218ea(_0x5ab10b- -0x10,_0x1f9091);}const _0x1c6771={};_0x1c6771[_0x186c04(0x175,0x1cf)]=!![],this['canvasContext']=this['canvas'][_0x186c04(0x2be,0x22e)]('2d',_0x1c6771),this['bindEvent']();function _0x4bedce(_0x5ede59,_0x247f62){return _0x5218ea(_0x247f62-0x31,_0x5ede59);}this['options'][_0x4bedce(0x13e,0x1d4)]&&this[_0x4bedce(0x255,0x23c)](this['options'][_0x186c04(0x1b8,0x193)]);}[_0x5218ea(0x275,0x2a6)](){function _0x529ca7(_0x2cf082,_0x249c1c){return _0x20a044(_0x249c1c,_0x2cf082- -0x92);}function _0x9953f4(_0x5d92f4,_0x3ac879){return _0x20a044(_0x3ac879,_0x5d92f4-0x62b);}this[_0x529ca7(-0x1cf,-0x259)](),this['unbindEvent'](),this[_0x529ca7(-0x185,-0x170)]&&(this['_map']['container']['removeChild'](this['canvas']),delete this['canvas']);}[_0x5218ea(0x1b2,0x158)](){const _0x37874=mars3d__namespace[_0x1ed2e7(0x372,0x313)][_0x2a649d(-0xf8,-0x6e)]('canvas',_0x2a649d(-0x11,-0x14),this[_0x2a649d(-0xd,-0x39)]['container']);_0x37874[_0x1ed2e7(0x390,0x418)][_0x1ed2e7(0x3c9,0x3d1)]=_0x1ed2e7(0x36e,0x3a9),_0x37874[_0x1ed2e7(0x390,0x3d7)]['top']=_0x1ed2e7(0x42f,0x4af),_0x37874[_0x2a649d(-0xd2,-0xfb)][_0x1ed2e7(0x35c,0x398)]=_0x1ed2e7(0x42f,0x3c1),_0x37874['style'][_0x1ed2e7(0x418,0x4ab)]=this['_map'][_0x1ed2e7(0x337,0x39e)][_0x1ed2e7(0x45f,0x4d0)]['clientWidth']+'px',_0x37874['style'][_0x1ed2e7(0x3d7,0x35b)]=this['_map']['scene'][_0x1ed2e7(0x45f,0x4bb)]['clientHeight']+'px',_0x37874['style']['pointerEvents']=this['_pointerEvents']?_0x1ed2e7(0x3d9,0x38c):'none',_0x37874['style'][_0x2a649d(-0x60,-0xf7)]=this[_0x1ed2e7(0x463,0x4e2)]['zIndex']??0x9;function _0x2a649d(_0x195acd,_0x390a88){return _0x20a044(_0x390a88,_0x195acd-0xf0);}_0x37874[_0x2a649d(-0x4a,-0x82)]=this['_map']['scene']['canvas']['clientWidth'];function _0x1ed2e7(_0x2e0003,_0x36c315){return _0x20a044(_0x36c315,_0x2e0003-0x552);}return _0x37874['height']=this['_map']['scene'][_0x1ed2e7(0x45f,0x4f6)]['clientHeight'],_0x37874;}[_0x20a044(-0xcd,-0x118)](){function _0x3feea2(_0x4c7adc,_0x55e5f9){return _0x20a044(_0x4c7adc,_0x55e5f9- -0x3e);}function _0x2effb7(_0x2c492d,_0x22d07e){return _0x5218ea(_0x2c492d- -0x1d1,_0x22d07e);}this['canvas']&&(this['canvas'][_0x3feea2(-0x1f7,-0x200)]['width']=this['_map'][_0x2effb7(-0x59,-0x40)]['canvas']['clientWidth']+'px',this['canvas']['style']['height']=this[_0x3feea2(-0x1c7,-0x13b)][_0x3feea2(-0x1c4,-0x259)][_0x2effb7(0xcf,0x117)][_0x3feea2(-0x165,-0x198)]+'px',this['canvas'][_0x2effb7(0x88,0xa4)]=this[_0x2effb7(0xc5,0x57)][_0x2effb7(-0x59,-0x3f)][_0x2effb7(0xcf,0x39)]['clientWidth'],this['canvas']['height']=this[_0x3feea2(-0xd9,-0x13b)]['scene']['canvas']['clientHeight']);}['bindEvent'](){function _0xb141ae(_0x1a3e9f,_0x2fcef2){return _0x20a044(_0x2fcef2,_0x1a3e9f-0x3f4);}const _0x4f1e3e=this;function _0x5124d2(_0xe344c,_0x2a1b88){return _0x20a044(_0x2a1b88,_0xe344c-0x609);}let _0x28beb6=Date['now']();(function _0x24e156(){function _0x3cf56f(_0x37d25b,_0x56cc17){return _0x4650(_0x56cc17- -0x2b0,_0x37d25b);}if(_0x4f1e3e['isDestroy'])return;_0x4f1e3e['_animateFrame']=window['requestAnimationFrame'](_0x24e156);if(_0x4f1e3e['show']&&_0x4f1e3e[_0x3cf56f(-0x92,-0xd1)]){const _0x41eb08=Date['now'](),_0x382602=_0x41eb08-_0x28beb6;_0x382602>_0x4f1e3e['frameTime']&&(_0x28beb6=_0x41eb08-_0x382602%_0x4f1e3e['frameTime'],_0x4f1e3e['update']());}}(),window[_0xb141ae(0x283,0x245)]('resize',this[_0x5124d2(0x4f1,0x54c)]['bind'](this),![]),this[_0x5124d2(0x45d,0x432)]=![],this[_0x5124d2(0x49c,0x4d8)]=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x5124d2(0x49a,0x524)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x5124d2(0x40e,0x438)],this)));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']);function _0x581507(_0x5e9e31,_0x22e821){return _0x5218ea(_0x22e821-0xb,_0x5e9e31);}function _0x3f7903(_0x2b7ed4,_0x23e44c){return _0x5218ea(_0x23e44c-0x3,_0x2b7ed4);}delete this[_0x581507(0x1e2,0x239)],window[_0x3f7903(0x26b,0x24e)](_0x581507(0x26a,0x286),this[_0x3f7903(0x205,0x27e)]),this['options']['mouseHidden']&&(this['_map'][_0x3f7903(0x2f0,0x276)](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x581507(0x2e8,0x2a1)][_0x3f7903(0x2a6,0x276)](mars3d__namespace[_0x3f7903(0x28c,0x25a)]['mouseDown'],this[_0x3f7903(0x1d1,0x227)],this),this['_map'][_0x581507(0x290,0x27e)](mars3d__namespace[_0x3f7903(0x2cc,0x25a)]['mouseUp'],this['_onMouseUpEvent'],this),this[_0x581507(0x32e,0x2a1)]['off'](mars3d__namespace['EventType'][_0x581507(0x162,0x1e0)],this[_0x3f7903(0x28c,0x205)],this));}[_0x5218ea(0x220,0x28c)](_0x290674){clearTimeout(this['refreshTimer']);function _0x48f027(_0x25cda0,_0x5290b8){return _0x20a044(_0x5290b8,_0x25cda0-0x2f);}function _0x6a4c44(_0x1dd896,_0x5e34b6){return _0x5218ea(_0x1dd896- -0x37d,_0x5e34b6);}if(!this[_0x6a4c44(-0x1b2,-0x121)]||!this['canvas'])return;this[_0x6a4c44(-0xdd,-0xbb)][_0x48f027(-0x193,-0x1bb)]['visibility']=_0x6a4c44(-0x1db,-0x147),this[_0x6a4c44(-0xe8,-0xe1)]=setTimeout(()=>{function _0x2d0c65(_0x322560,_0x40f13a){return _0x6a4c44(_0x322560-0x3c9,_0x40f13a);}if(!this[_0x2d0c65(0x217,0x215)])return;function _0x3e2b91(_0x17fbe0,_0x28600e){return _0x48f027(_0x28600e-0x2e1,_0x17fbe0);}this['redraw'](),this[_0x3e2b91(0x1df,0x21d)]['style']['visibility']=_0x3e2b91(0x1d8,0x208);},0xc8);}['_onMouseDownEvent'](_0x3bd4fd){function _0x134a2c(_0x41cbc6,_0x5268ab){return _0x5218ea(_0x41cbc6- -0x1f9,_0x5268ab);}this[_0x528102(0x41,0xa9)]=!![],this['_map']['off'](mars3d__namespace[_0x528102(0xb1,0x13e)]['mouseMove'],this[_0x134a2c(0x9,-0x6a)],this);function _0x528102(_0x372550,_0x20d2b8){return _0x20a044(_0x20d2b8,_0x372550-0x1ed);}this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x295c66){if(!this[_0x146966(0x4a8,0x490)]||!this[_0x2b3f79(0x30,0x7a)])return;function _0x146966(_0x4f536d,_0x7e5527){return _0x20a044(_0x7e5527,_0x4f536d-0x670);}function _0x2b3f79(_0x6390cf,_0x11c9f3){return _0x5218ea(_0x11c9f3- -0x226,_0x6390cf);}this[_0x2b3f79(-0x31,-0x3f)]&&(this['canvas'][_0x146966(0x4ae,0x4fb)][_0x146966(0x4c6,0x502)]=_0x2b3f79(-0xbd,-0x84),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x3ad904){function _0x3a21d4(_0x1b15fb,_0x5e15b6){return _0x20a044(_0x5e15b6,_0x1b15fb- -0xb0);}function _0x29a07e(_0xfac160,_0x4dab54){return _0x5218ea(_0xfac160- -0x67,_0x4dab54);}if(!this[_0x29a07e(0x164,0x1e6)]||!this['canvas'])return;this['_map'][_0x3a21d4(-0x1d0,-0x264)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this[_0x29a07e(0x180,0x120)]&&this['mouse_move']&&this['redraw'](),this['canvas'][_0x29a07e(0x16a,0x1df)]['visibility']=_0x3a21d4(-0x1b8,-0x17d),this['mouse_down']=![],this[_0x3a21d4(-0x21d,-0x22a)]=![];}['setData'](_0x31d058){function _0x1721af(_0x4cad7a,_0x16e792){return _0x5218ea(_0x16e792- -0x44e,_0x4cad7a);}this['clear'](),this['windData']=_0x31d058;function _0x576edf(_0x3396cc,_0x14249a){return _0x5218ea(_0x3396cc-0xa2,_0x14249a);}this[_0x1721af(-0x269,-0x1d0)][_0x576edf(0x2fa,0x2e1)](_0x31d058),this[_0x1721af(-0x232,-0x1ef)]();}['redraw'](){function _0x1e072d(_0x3b0a41,_0x10ebbe){return _0x5218ea(_0x10ebbe- -0x248,_0x3b0a41);}if(!this[_0x1cf7b8(0x4ce,0x506)])return;this['windField'][_0x1e072d(-0xb3,-0x66)](this[_0x1cf7b8(0x5a7,0x600)]);function _0x1cf7b8(_0x939685,_0x36dc5b){return _0x5218ea(_0x939685-0x303,_0x36dc5b);}this['update']();}[_0x5218ea(0x2a9,0x301)](){if(this['_updateIng'])return;function _0x56941a(_0x5cf3fa,_0x18ed1c){return _0x20a044(_0x5cf3fa,_0x18ed1c-0x583);}this[_0x1ddd91(0x166,0x126)]=!![];function _0x1ddd91(_0xc059ec,_0x33f661){return _0x5218ea(_0xc059ec- -0xfb,_0x33f661);}if(this['worker'])this[_0x56941a(0x4c4,0x46e)][_0x56941a(0x49a,0x499)]();else{const _0x3f5715=this[_0x56941a(0x4d9,0x46e)][_0x56941a(0x44a,0x434)]();this[_0x56941a(0x459,0x3e8)](_0x3f5715);}this['_updateIng']=![];}[_0x5218ea(0x1f8,0x1e7)](_0x1e5c7b){this[_0x74ea82(0x4b8,0x4ff)]=_0x1e5c7b,this[_0x74ea82(0x4da,0x46b)][_0x74ea82(0x41e,0x430)]='destination-in';function _0x74ea82(_0x40baec,_0xfcb73f){return _0x20a044(_0xfcb73f,_0x40baec-0x5de);}this[_0x74ea82(0x4da,0x526)]['fillRect'](0x0,0x0,this[_0x1bb59d(0x34d,0x300)],this[_0x1bb59d(0x32a,0x349)]),this[_0x1bb59d(0x38c,0x40c)]['globalCompositeOperation']=_0x1bb59d(0x37d,0x3a5);function _0x1bb59d(_0x1100f8,_0x1c5a6f){return _0x20a044(_0x1c5a6f,_0x1100f8-0x490);}this[_0x1bb59d(0x38c,0x35b)]['globalAlpha']=0.9;const _0x3f13ee=this[_0x1bb59d(0x393,0x42a)]['scene']['mode']!==Cesium['SceneMode']['SCENE3D'],_0x2e89cf=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x244e90=0x0,_0x39cb5b=_0x1e5c7b[_0x1bb59d(0x2bc,0x230)];_0x244e90<_0x39cb5b;_0x244e90++){const _0x47d350=_0x1e5c7b[_0x244e90],_0x4a21b9=this['_tomap'](_0x47d350,_0x47d350[_0x1bb59d(0x2f8,0x38c)],_0x47d350[_0x74ea82(0x435,0x3bb)],_0x47d350['alt']),_0x4138df=this[_0x1bb59d(0x343,0x301)](_0x47d350,_0x47d350['tlng'],_0x47d350['tlat'],_0x47d350[_0x1bb59d(0x2cf,0x27a)]);if(!_0x4a21b9||!_0x4138df)continue;if(_0x3f13ee&&Math['abs'](_0x4a21b9[0x0]-_0x4138df[0x0])>=_0x2e89cf)continue;this['canvasContext'][_0x74ea82(0x3f7,0x48d)](),this['canvasContext'][_0x74ea82(0x3ef,0x3a8)]=this[_0x74ea82(0x3ef,0x400)],this['canvasContext']['strokeStyle']=this[_0x1bb59d(0x280,0x202)][_0x1bb59d(0x37a,0x3ea)](_0x47d350['speed']),this[_0x74ea82(0x4da,0x56c)]['moveTo'](_0x4a21b9[0x0],_0x4a21b9[0x1]),this['canvasContext'][_0x1bb59d(0x2c4,0x282)](_0x4138df[0x0],_0x4138df[0x1]),this['canvasContext']['stroke']();}else{this[_0x1bb59d(0x38c,0x3a4)]['beginPath'](),this[_0x74ea82(0x4da,0x4fd)]['lineWidth']=this['lineWidth'],this['canvasContext'][_0x1bb59d(0x31b,0x2d1)]=this[_0x1bb59d(0x30a,0x31a)];for(let _0x5d6d30=0x0,_0x5ebc66=_0x1e5c7b[_0x1bb59d(0x2bc,0x350)];_0x5d6d30<_0x5ebc66;_0x5d6d30++){const _0x1df39e=_0x1e5c7b[_0x5d6d30],_0x202df2=this['_tomap'](_0x1df39e,_0x1df39e[_0x74ea82(0x446,0x44c)],_0x1df39e['lat'],_0x1df39e['alt']),_0x32c4ff=this['_tomap'](_0x1df39e,_0x1df39e[_0x1bb59d(0x326,0x394)],_0x1df39e['tlat'],_0x1df39e['talt']);if(!_0x202df2||!_0x32c4ff)continue;if(_0x3f13ee&&Math['abs'](_0x202df2[0x0]-_0x32c4ff[0x0])>=_0x2e89cf)continue;this['canvasContext']['moveTo'](_0x202df2[0x0],_0x202df2[0x1]),this['canvasContext']['lineTo'](_0x32c4ff[0x0],_0x32c4ff[0x1]);}this[_0x74ea82(0x4da,0x4a5)]['stroke']();}}['_tomap'](_0x3c0a9c,_0x391733,_0x544664,_0x5a02e4){const _0xaa1ac2=Cesium[_0x387678(0x1fb,0x205)][_0x327628(-0x1d5,-0x192)](_0x391733,_0x544664,_0x5a02e4??this[_0x327628(-0x9e,-0xd0)]),_0x53ac64=this['_map'][_0x387678(0x224,0x1df)];function _0x387678(_0x1a1435,_0x128e14){return _0x5218ea(_0x128e14-0x67,_0x1a1435);}if(_0x53ac64[_0x327628(-0x1f6,-0x173)]===Cesium[_0x387678(0x2b4,0x2d6)]['SCENE3D']){const _0x58e420=new Cesium[(_0x387678(0x28f,0x22d))](_0x53ac64['globe']['ellipsoid'],_0x53ac64[_0x387678(0x286,0x28c)][_0x387678(0x272,0x305)]),_0x46eae9=_0x58e420[_0x327628(-0x1a1,-0x10c)](_0xaa1ac2);if(!_0x46eae9)return _0x3c0a9c[_0x327628(-0x1ba,-0x1a2)]=0x0,null;}function _0x327628(_0x4450ca,_0xaa721){return _0x20a044(_0x4450ca,_0xaa721-0x33);}const _0x1fdd2d=mars3d__namespace['PointTrans']['toWindowCoordinates'](this['_map']['scene'],_0xaa1ac2);return _0x1fdd2d?[_0x1fdd2d['x'],_0x1fdd2d['y']]:null;}[_0x5218ea(0x256,0x1ef)](){function _0x37a4b0(_0x445369,_0xd810b7){return _0x20a044(_0xd810b7,_0x445369-0x9c);}this['windField'][_0x37a4b0(-0xa1,-0x100)](),delete this['windData'];}['initWorker'](){this['worker']=new Worker(this['options'][_0x5d4eaf(-0x183,-0x1a7)]),this['worker'][_0x14c27e(-0x7c,-0x88)]=_0x597820=>{this['_drawLines'](_0x597820[_0x36bca3(0x2cd,0x25a)]['particles']);function _0x36bca3(_0x206910,_0x4bc607){return _0x5d4eaf(_0x206910,_0x4bc607-0x4a3);}function _0x300c00(_0x42537a,_0x5969bc){return _0x5d4eaf(_0x42537a,_0x5969bc- -0x6b);}this[_0x300c00(-0x20e,-0x259)]=![];},this[_0x14c27e(0x50,-0x42)]={'init':_0xa7dfc0=>{function _0x4a32bd(_0x1694b0,_0x1bb08e){return _0x14c27e(_0x1bb08e,_0x1694b0-0x587);}const _0x559732={};function _0x430b55(_0x4f7b1a,_0x222ed7){return _0x5d4eaf(_0x222ed7,_0x4f7b1a-0x57d);}_0x559732[_0x4a32bd(0x483,0x4df)]='init',_0x559732['options']=_0xa7dfc0,this['worker'][_0x4a32bd(0x490,0x440)](_0x559732);},'setOptions':_0x4ee0be=>{const _0x2777d2={};_0x2777d2['type']='setOptions',_0x2777d2['options']=_0x4ee0be,this['worker']['postMessage'](_0x2777d2);},'setDate':_0xc871e=>{const _0x152946={};function _0x467091(_0x52d638,_0x1226e4){return _0x14c27e(_0x1226e4,_0x52d638- -0xb7);}_0x152946[_0x467091(-0x1bb,-0x248)]='setDate',_0x152946['data']=_0xc871e,this['worker']['postMessage'](_0x152946);},'update':()=>{if(this['_updateIng2'])return;function _0x4b4a50(_0x4e8b75,_0x59003c){return _0x14c27e(_0x4e8b75,_0x59003c-0x2a0);}this[_0x56153a(0x17a,0x1dd)]=!![];function _0x56153a(_0x5cc4ed,_0x3ddb0a){return _0x5d4eaf(_0x3ddb0a,_0x5cc4ed-0x368);}const _0x3f54e0={};_0x3f54e0['type']=_0x4b4a50(0x23a,0x289),this['worker']['postMessage'](_0x3f54e0);},'clear':()=>{const _0x5269de={};_0x5269de[_0x107409(0x58e,0x4f3)]='clear';function _0x107409(_0x242177,_0xf3541){return _0x5d4eaf(_0x242177,_0xf3541-0x723);}this['worker']['postMessage'](_0x5269de);}};function _0x5d4eaf(_0x350ba8,_0x1cf6ea){return _0x20a044(_0x350ba8,_0x1cf6ea- -0x59);}function _0x14c27e(_0x6ff62d,_0x178990){return _0x5218ea(_0x178990- -0x2c0,_0x6ff62d);}this[_0x5d4eaf(-0x1b7,-0x16e)][_0x14c27e(0x61,-0x33)](this['options']);}}mars3d__namespace[_0x20a044(-0x1e6,-0x1cf)]['register']('canvasWind',CanvasWindLayer),mars3d__namespace[_0x20a044(-0x152,-0x136)][_0x5218ea(0x184,0xf9)]=CanvasWindLayer,mars3d__namespace[_0x20a044(-0xd5,-0x154)]=CanvasWindField,mars3d__namespace[_0x5218ea(0x228,0x1b1)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports[_0x20a044(-0x294,-0x20f)]=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x20a044(-0xf6,-0x16b)]=WindUtil;const _0x59df89={};_0x59df89['value']=!![],Object[_0x20a044(-0x1f9,-0x160)](exports,_0x20a044(-0x12f,-0x15d),_0x59df89);
}));
