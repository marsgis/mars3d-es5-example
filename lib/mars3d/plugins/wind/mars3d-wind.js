/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.1
 * 编译日期：2025-02-23 11:21
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';function _0x48ce(){const _0x38008e=['pixelFormat','mouseMove','fromGeometry','west','lng','processWindData','DomUtil','toGridXY','mode','particlesTextureSize','5280498QjmSmE','frameTime','693439GzuEHx','outputTexture','isDynamic','stringify','commandToExecute','EventType','Cesium','_map','lonRange','east','createSegmentsGeometry','primitiveType','_pointerEvents','scene','clientHeight','rawRenderState','updateViewerParameters','getUVByPoint','__esModule','globe','useViewerBounds','createColorTableTexture','strokeStyle','fillRect','preExecute','auto','depthTexture','unbindEvent','viewerParameters','pass','mouse_move','context','dropRateBump','updatePosition','calculateSpeed','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','log','udata','bounds','age','MAX_VALUE','canvas','framebuffers','minificationFilter','fixedHeight','_calc_speedRate','attributeLocations','4372172RktkXb','_onMouseUpEvent','frameRateAdjustment','computing','resize','addEventListener','SceneMode','getUVByXY','hidden','all','_drawLines','windData','createRenderingFramebuffers','grid','particlesNumber','max\x20is\x20undefined,\x20calculate\x20max','LayerUtil','umax','clear','DEPTH_COMPONENT','visibility','0px','155jNFYns','framebuffer','Rectangle','hasOwnProperty','zIndex','UNSIGNED_BYTE','flipY','removeEventListener','windField','destination-in','persists','worker','getDefaultRenderState','postMessage','updateOptions','2LEnldF','canvasContext','geometry','_removedHook','_addedHook','CanvasWindField','commandList','maxAge','speed','clientWidth','positionWC','push','destroyParticlesTextures','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','695610SLUqvu','LINEAR','postProcessingPosition','lineWidth','26677OnviYp','_createCanvas','style','createCommand','Cartesian3','data','layer','FLOAT','changeOptions','frameRateMonitor','particlesTextures','Draw','createComputingPrimitives','wrapT','number','createWindTextures','Compute','rgb(206,255,255)','xmax','applyViewerParameters','depthTest','ellipsoid','BaseLayer','createRenderingTextures','_colorRamp','beginPath','tlat','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','drawingBufferWidth','uniformMap','ymax','MIN_VALUE','talt','rendering','fromDegrees','vertexArray','blending','random','magnificationFilter','value','rows','reverse','OPAQUE','alpha','STATIC_DRAW','options','moveTo','createRawRenderState','now','init','textures','prototype','xmin','_bilinearInterpolation','_onMouseDownEvent','Math','stroke','canvasWidth','destroy','_calcUV','dynamic','lineLength','green','particleSystem','1245978OSSvNw','update','south','isDestroyed','RED','autoClear','speedRate','getDataAtLonLat','mouseDown','_speedRate','camera','length','min','pickEllipsoid','show','vertexShaderSource','height','color','width','toWindowCoordinates','frameRate','lat','setData','FUNC_ADD','Cartesian2','cos','_onMouseMoveEvent','forEach','max','depthMask','onmessage','componentsPerAttribute','setGeometry','particles','clearCommand','object','viewport','abs','createPrimitives','owner','createParticlesTextures','values','reCreateWindTextures','clearFramebuffers','shaderProgram','154026uPrYfF','vmax','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','_maxAge','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','bind','north','toDegrees','absolute','sources','colors','mars3d-canvasWind','none','pixelSize','register','setDate','cols','_animateFrame','windTextures','redraw','array','bindEvent','getColor','mouseHidden','_setOptionsHook','_tomap','_updateIng','fragmentShaderSource','default','speedFactor','getUpdatePositionShader','_showHook','275NGjVXC','type','commandType','ymin','getRandomLatLng','domain','getV','currentParticlesPosition','segmentsDepth','off','2608DXXfPB','initWorker','globalCompositeOperation','particlesSpeed','tlng','segments','TRIANGLES','primitives','keys','getContext','colorTable'];_0x48ce=function(){return _0x38008e;};return _0x48ce();}(function(_0x28aea5,_0x3515f0){function _0x4f2f70(_0x484c14,_0x34926c){return _0x1385(_0x34926c- -0x52,_0x484c14);}function _0x4381d3(_0x40e524,_0xe13b22){return _0x1385(_0xe13b22-0x313,_0x40e524);}const _0x2cea78=_0x28aea5();while(!![]){try{const _0x1cc57c=parseInt(_0x4381d3(0x4b6,0x442))/0x1+-parseInt(_0x4381d3(0x47b,0x496))/0x2*(-parseInt(_0x4f2f70(0x185,0x183))/0x3)+-parseInt(_0x4f2f70(0x8f,0x10c))/0x4+parseInt(_0x4381d3(0x4d0,0x487))/0x5*(parseInt(_0x4f2f70(0x1ee,0x1b0))/0x6)+-parseInt(_0x4f2f70(0x193,0x143))/0x7*(parseInt(_0x4f2f70(0x9c,0xc6))/0x8)+-parseInt(_0x4381d3(0x3fb,0x440))/0x9+parseInt(_0x4381d3(0x44c,0x4a4))/0xa*(parseInt(_0x4381d3(0x41c,0x421))/0xb);if(_0x1cc57c===_0x3515f0)break;else _0x2cea78['push'](_0x2cea78['shift']());}catch(_0x305a1c){_0x2cea78['push'](_0x2cea78['shift']());}}}(_0x48ce,0xb0220));function _interopNamespace(_0x3db34f){if(_0x3db34f&&_0x3db34f[_0x37db3d(0x42f,0x464)])return _0x3db34f;var _0x1bde64=Object['create'](null);_0x3db34f&&Object[_0x4ca9cc(0x262,0x2bf)](_0x3db34f)[_0x4ca9cc(0x347,0x38f)](function(_0xdb2659){function _0x63b178(_0x34e2d8,_0x557283){return _0x4ca9cc(_0x34e2d8,_0x557283- -0x4b4);}if(_0xdb2659!==_0x63b178(-0x1e9,-0x20b)){var _0x43a328=Object['getOwnPropertyDescriptor'](_0x3db34f,_0xdb2659);Object['defineProperty'](_0x1bde64,_0xdb2659,_0x43a328['get']?_0x43a328:{'enumerable':!![],'get':function(){return _0x3db34f[_0xdb2659];}});}});function _0x4ca9cc(_0x26f305,_0x2223a4){return _0x1385(_0x2223a4-0x19f,_0x26f305);}function _0x37db3d(_0x2b818d,_0x39541d){return _0x1385(_0x2b818d-0x2ee,_0x39541d);}return _0x1bde64[_0x4ca9cc(0x26c,0x2a9)]=_0x3db34f,_0x1bde64;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0xd1a6c3(0x35,-0x4d)];function getU(_0x12b54d,_0x4c32b9){const _0x100e64=_0x12b54d*Math[_0x58650d(0x3fc,0x455)](Cesium$2['Math']['toRadians'](_0x4c32b9));function _0x58650d(_0x5025e8,_0x16715c){return _0xd1a6c3(_0x5025e8,_0x16715c-0x3e9);}return _0x100e64;}function getV(_0x2539bc,_0x4afeff){function _0x11737f(_0x13b3b9,_0x5d8b85){return _0xd1a6c3(_0x5d8b85,_0x13b3b9-0x4db);}const _0xb058ca=_0x2539bc*Math['sin'](Cesium$2[_0x11737f(0x525,0x4da)]['toRadians'](_0x4afeff));return _0xb058ca;}function getSpeed(_0xfab596,_0x53fa29){const _0x13d2c5=Math['sqrt'](Math['pow'](_0xfab596,0x2)+Math['pow'](_0x53fa29,0x2));return _0x13d2c5;}function getDirection(_0x3f742,_0x35fbf0){let _0x3fc9c2=Cesium$2['Math'][_0x1afaf7(0x3cf,0x357)](Math['atan2'](_0x35fbf0,_0x3f742));function _0x1afaf7(_0x129b5f,_0x2dc29e){return _0xd1a6c3(_0x2dc29e,_0x129b5f-0x348);}return _0x3fc9c2+=_0x3fc9c2<0x0?0x168:0x0,_0x3fc9c2;}const _0x2d9678={};_0x2d9678['__proto__']=null,_0x2d9678['getU']=getU,_0x2d9678[_0xd1a6c3(-0x3d,-0x6e)]=getV,_0x2d9678['getSpeed']=getSpeed,_0x2d9678['getDirection']=getDirection;var WindUtil=_0x2d9678,updatePositionShader=_0x5de27f(-0x148,-0x1ce),calculateSpeedShader=_0xd1a6c3(0xec,0x82),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader=_0xd1a6c3(0xc5,0x84),renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0xd1a6c3(0x2e,-0x4d)];function _0xd1a6c3(_0x2f3193,_0x1679ec){return _0x1385(_0x1679ec- -0x182,_0x2f3193);}class ShaderManager{static['getCalculateSpeedShader'](){const _0x1c3d43={};_0x1c3d43[_0x123520(0xd9,0x147)]=[calculateSpeedShader];function _0x123520(_0x617f8f,_0x290f6b){return _0xd1a6c3(_0x290f6b,_0x617f8f-0x50);}return new ShaderSource$1(_0x1c3d43);}static[_0x5de27f(-0x235,-0x214)](){const _0xb9fab0={};return _0xb9fab0['sources']=[updatePositionShader],new ShaderSource$1(_0xb9fab0);}static['getSegmentDrawVertexShader'](){const _0x157e1f={};return _0x157e1f['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x157e1f);}static['getSegmentDrawFragmentShader'](){const _0x59f641={};return _0x59f641['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x59f641);}static['getPostProcessingPositionShader'](){const _0x43585b={};return _0x43585b['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x43585b);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defaultValue,defined,destroyObject}=mars3d__namespace[_0x5de27f(-0x23b,-0x1eb)];class CustomPrimitive{constructor(_0x57b087){function _0x3d1ade(_0x4d84c0,_0xbc0ea2){return _0x5de27f(_0x4d84c0,_0xbc0ea2-0x444);}this['commandType']=_0x57b087['commandType'],this['geometry']=_0x57b087[_0x3d1ade(0x310,0x2a9)],this[_0x12977e(0x2e1,0x2b7)]=_0x57b087['attributeLocations'],this['primitiveType']=_0x57b087[_0x3d1ade(0x2b3,0x25e)],this[_0x12977e(0x336,0x3b8)]=_0x57b087['uniformMap']||{},this['vertexShaderSource']=_0x57b087[_0x3d1ade(0x2e6,0x308)],this['fragmentShaderSource']=_0x57b087['fragmentShaderSource'],this['rawRenderState']=_0x57b087[_0x3d1ade(0x2da,0x262)],this[_0x12977e(0x2f9,0x2fa)]=_0x57b087[_0x3d1ade(0x2c1,0x299)],this['outputTexture']=_0x57b087['outputTexture'],this[_0x12977e(0x35e,0x2ec)]=defaultValue(_0x57b087['autoClear'],![]),this['preExecute']=_0x57b087[_0x12977e(0x2cb,0x29d)],this['show']=!![],this[_0x3d1ade(0x1d4,0x257)]=undefined,this['clearCommand']=undefined;function _0x12977e(_0x54d208,_0x418566){return _0xd1a6c3(_0x418566,_0x54d208-0x306);}this[_0x12977e(0x2b5,0x2a1)]=_0x57b087[_0x3d1ade(0x255,0x255)]??(()=>!![]),this['autoClear']&&(this[_0x3d1ade(0x33d,0x31b)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x12977e(0x2f9,0x304)],'pass':Pass$1[_0x3d1ade(0x2d9,0x2e3)]}));}['createCommand'](_0x18b1f1){function _0x26d36a(_0x4f9b18,_0x3b4872){return _0xd1a6c3(_0x4f9b18,_0x3b4872-0x32e);}function _0x4d266a(_0x4cf4bb,_0x161376){return _0x5de27f(_0x161376,_0x4cf4bb-0x313);}if(this['commandType']===_0x4d266a(0x193,0x1a2)){const _0x1cf19a={};_0x1cf19a['context']=_0x18b1f1,_0x1cf19a[_0x4d266a(0x178,0x163)]=this[_0x26d36a(0x33c,0x331)],_0x1cf19a['attributeLocations']=this[_0x26d36a(0x383,0x309)],_0x1cf19a['bufferUsage']=BufferUsage$1[_0x26d36a(0x370,0x36d)];const _0x206396=VertexArray$1[_0x26d36a(0x32a,0x2d1)](_0x1cf19a),_0xa86d67={};_0xa86d67['context']=_0x18b1f1,_0xa86d67[_0x4d266a(0x1d7,0x19a)]=this['vertexShaderSource'],_0xa86d67['fragmentShaderSource']=this['fragmentShaderSource'],_0xa86d67[_0x26d36a(0x30a,0x309)]=this['attributeLocations'];const _0x5ee536=ShaderProgram['fromCache'](_0xa86d67),_0x532fbe=RenderState['fromCache'](this[_0x4d266a(0x131,0xf1)]),_0x38273e={};return _0x38273e['owner']=this,_0x38273e[_0x4d266a(0x1ab,0x1f1)]=_0x206396,_0x38273e[_0x4d266a(0x12d,0xf8)]=this['primitiveType'],_0x38273e['modelMatrix']=Matrix4['IDENTITY'],_0x38273e['renderState']=_0x532fbe,_0x38273e['shaderProgram']=_0x5ee536,_0x38273e['framebuffer']=this['framebuffer'],_0x38273e['uniformMap']=this['uniformMap'],_0x38273e[_0x4d266a(0x13f,0xf5)]=Pass$1['OPAQUE'],new DrawCommand(_0x38273e);}else{if(this[_0x4d266a(0x103,0xb2)]==='Compute'){const _0x3f1b4f={};return _0x3f1b4f[_0x4d266a(0x1ef,0x22b)]=this,_0x3f1b4f[_0x4d266a(0xfc,0x13f)]=this['fragmentShaderSource'],_0x3f1b4f['uniformMap']=this[_0x26d36a(0x354,0x35e)],_0x3f1b4f['outputTexture']=this['outputTexture'],_0x3f1b4f[_0x26d36a(0x342,0x32a)]=!![],new ComputeCommand(_0x3f1b4f);}else throw new Error('Unknown\x20command\x20type');}}[_0xd1a6c3(0x6c,0x73)](_0x2fb6b3,_0xad2bde){function _0x2804f5(_0x2f9c38,_0xfea5b7){return _0xd1a6c3(_0x2f9c38,_0xfea5b7-0x49);}function _0x768c6b(_0x46a14d,_0x48a141){return _0x5de27f(_0x48a141,_0x46a14d-0x9d);}this[_0x2804f5(0xa0,0x4c)]=_0xad2bde,defined(this[_0x768c6b(-0x150,-0x1a5)])&&(this[_0x768c6b(-0x150,-0xdf)]['vertexArray']=VertexArray$1[_0x768c6b(-0x15e,-0x16d)]({'context':_0x2fb6b3,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x6bb6d2){if(!this['isDynamic']())return;if(!this['show']||!defined(_0x6bb6d2))return;!defined(this[_0x163e17(-0xf5,-0x78)])&&(this[_0x1024b(-0x212,-0x239)]=this[_0x163e17(-0x90,-0x104)](_0x6bb6d2[_0x1024b(-0x1f7,-0x1fa)]));defined(this['preExecute'])&&this['preExecute']();if(!_0x6bb6d2['commandList']){console['warn']('frameState.commandList\x20is\x20undefined');return;}function _0x163e17(_0x339dc6,_0x4e4c94){return _0xd1a6c3(_0x4e4c94,_0x339dc6- -0xa6);}function _0x1024b(_0x54c339,_0x4b6065){return _0x5de27f(_0x4b6065,_0x54c339- -0x25);}defined(this['clearCommand'])&&_0x6bb6d2[_0x1024b(-0x1bc,-0x1dd)]['push'](this['clearCommand']),defined(this[_0x1024b(-0x212,-0x1b1)])&&_0x6bb6d2['commandList']['push'](this['commandToExecute']);}[_0xd1a6c3(0x43,0x56)](){return![];}['destroy'](){function _0x2d1f2b(_0x55c130,_0x612d5f){return _0xd1a6c3(_0x55c130,_0x612d5f- -0xd);}function _0x4a0dc8(_0x1e3393,_0x16bee1){return _0x5de27f(_0x16bee1,_0x1e3393-0x2d9);}if(defined(this['commandToExecute'])){var _0x249364;(_0x249364=this['commandToExecute'][_0x2d1f2b(0xdf,0x72)])===null||_0x249364===void 0x0||_0x249364[_0x4a0dc8(0x188,0x1e2)](),this['commandToExecute']['shaderProgram']=undefined;}return destroyObject(this);}}function _0x5de27f(_0x43c58f,_0x1131ef){return _0x1385(_0x1131ef- -0x320,_0x43c58f);}function deepMerge(_0x19a66e,_0xb2d32d){if(!_0x19a66e)return _0xb2d32d;if(!_0xb2d32d)return _0x19a66e;const _0x139fd2={..._0xb2d32d},_0x590153=_0x139fd2;function _0x37cccb(_0x5dd303,_0x140b4c){return _0xd1a6c3(_0x5dd303,_0x140b4c-0x262);}for(const _0x5a5cfb in _0x19a66e){if(Object[_0xa4aaef(0xe9,0xe5)][_0xa4aaef(0x98,0xa5)]['call'](_0x19a66e,_0x5a5cfb)){const _0x1a25b2=_0x19a66e[_0x5a5cfb],_0x42eb02=_0xb2d32d[_0x5a5cfb];if(Array['isArray'](_0x1a25b2)){_0x590153[_0x5a5cfb]=_0x1a25b2['slice']();continue;}if(_0x1a25b2&&typeof _0x1a25b2===_0xa4aaef(0x119,0xe4)){_0x590153[_0x5a5cfb]=deepMerge(_0x1a25b2,_0x42eb02||{});continue;}_0x1a25b2!==undefined&&(_0x590153[_0x5a5cfb]=_0x1a25b2);}}function _0xa4aaef(_0x30e206,_0x5d17a5){return _0x5de27f(_0x5d17a5,_0x30e206-0x241);}return _0x590153;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x5de27f(-0x220,-0x1eb)];class WindParticlesComputing{constructor(_0x36be4f,_0x381038,_0x3c924f,_0x16a9ea,_0x194e85){this['context']=_0x36be4f;function _0x3fa99b(_0x303a86,_0x422ae4){return _0xd1a6c3(_0x422ae4,_0x303a86- -0x1e4);}this['options']=_0x3c924f,this[_0x3fa99b(-0x21b,-0x1ba)]=_0x16a9ea,this['windData']=_0x381038,this[_0x3fa99b(-0x17d,-0x143)]=0x3c,this[_0x4d7a95(0x194,0x17d)]=0x1;const _0x42121e={};_0x42121e[_0x3fa99b(-0x22a,-0x2af)]=_0x194e85,_0x42121e['samplingWindow']=0x1;function _0x4d7a95(_0x11828b,_0x57e360){return _0x5de27f(_0x11828b,_0x57e360-0x33d);}_0x42121e['quietPeriod']=0x0,this[_0x3fa99b(-0x1c8,-0x22e)]=new FrameRateMonitor(_0x42121e),this['initFrameRate'](),this[_0x4d7a95(0x165,0x1c1)](),this[_0x3fa99b(-0x169,-0x1e4)](),this['createComputingPrimitives']();}['initFrameRate'](){const _0xd72577=()=>{function _0x35d369(_0x208971,_0x450d0c){return _0x1385(_0x208971- -0x202,_0x450d0c);}function _0x4b17bc(_0x45e11f,_0x4fe96a){return _0x1385(_0x4fe96a- -0x223,_0x45e11f);}this['frameRateMonitor']['lastFramesPerSecond']>0x14&&(this['frameRate']=this[_0x35d369(-0x64,0x17)]['lastFramesPerSecond'],this[_0x35d369(-0xa2,-0xd0)]=0x3c/Math['max'](this['frameRate'],0x1));};_0xd72577();const _0x232a97=setInterval(_0xd72577,0x3e8),_0x2e42c8=this['destroy']['bind'](this);this['destroy']=()=>{clearInterval(_0x232a97),_0x2e42c8();};}['createWindTextures'](){function _0x4886b2(_0x484af0,_0x599756){return _0xd1a6c3(_0x484af0,_0x599756- -0x116);}const _0x24916a={};_0x24916a[_0x548c30(0x14,-0xe)]=TextureMinificationFilter$1[_0x548c30(0x4c,0xd6)];function _0x548c30(_0x553b24,_0x285616){return _0xd1a6c3(_0x285616,_0x553b24-0x3c);}_0x24916a['magnificationFilter']=TextureMagnificationFilter$1['LINEAR'];const _0x51bdc1={'context':this[_0x548c30(0x8,-0x61)],'width':this[_0x4886b2(-0x11f,-0x12f)]['width'],'height':this[_0x4886b2(-0xc4,-0x12f)]['height'],'pixelFormat':PixelFormat$1[_0x548c30(0x93,0x2e)],'pixelDatatype':PixelDatatype$1[_0x548c30(0x56,0xc6)],'flipY':this['options'][_0x548c30(0x34,0x39)]??![],'sampler':new Sampler$1(_0x24916a)};this[_0x4886b2(-0x12a,-0x198)]={'U':new Texture$1({..._0x51bdc1,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x4886b2(-0x119,-0x196)])}}),'V':new Texture$1({..._0x51bdc1,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}[_0xd1a6c3(0x6b,0x7b)](){const _0xfc1161={};function _0x598997(_0x3dc1db,_0x4311db){return _0xd1a6c3(_0x4311db,_0x3dc1db-0x290);}function _0x1c6654(_0x50eb3a,_0x4e6f24){return _0xd1a6c3(_0x50eb3a,_0x4e6f24-0x135);}_0xfc1161['minificationFilter']=TextureMinificationFilter$1['NEAREST'],_0xfc1161[_0x598997(0x2c9,0x2ff)]=TextureMagnificationFilter$1['NEAREST'];const _0x4e6834={'context':this['context'],'width':this[_0x1c6654(0x156,0x175)]['particlesTextureSize'],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x598997(0x2aa,0x26e)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x598997(0x2d0,0x2e8)]['particlesTextureSize']*this['options']['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0xfc1161)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x4e6834),'currentParticlesPosition':new Texture$1(_0x4e6834),'nextParticlesPosition':new Texture$1(_0x4e6834),'postProcessingPosition':new Texture$1(_0x4e6834),'particlesSpeed':new Texture$1(_0x4e6834)};}[_0x5de27f(-0x166,-0x191)](){function _0x1936b7(_0x11e702,_0x188fd2){return _0x5de27f(_0x188fd2,_0x11e702-0x50e);}Object['values'](this['particlesTextures'])[_0x1936b7(0x3de,0x3a8)](_0x15a283=>_0x15a283['destroy']());}[_0x5de27f(-0x200,-0x17f)](){function _0x519a7b(_0x545df4,_0x1d8074){return _0x5de27f(_0x1d8074,_0x545df4-0xc2);}function _0x6fa4c9(_0x59b6d7,_0x3caae0){return _0xd1a6c3(_0x3caae0,_0x59b6d7- -0x11c);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this[_0x6fa4c9(-0x19e,-0x1b0)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this[_0x519a7b(-0xf5,-0xf4)]['u']['min'],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x519a7b(-0x7d,0xb)],this['windData']['v']['max']),'speedRange':()=>new Cartesian2$1(this[_0x519a7b(-0xf5,-0xd0)]['speed'][_0x519a7b(-0x7d,-0x64)],this['windData']['speed']['max']),'currentParticlesPosition':()=>this['particlesTextures'][_0x519a7b(-0x149,-0x122)],'speedScaleFactor':()=>{function _0x58ae5c(_0x403a34,_0x5c6f06){return _0x519a7b(_0x403a34-0x99,_0x5c6f06);}function _0x1cbccd(_0x5dbb91,_0x1cd629){return _0x519a7b(_0x1cd629-0x618,_0x5dbb91);}return(this[_0x58ae5c(-0x7a,-0xf0)][_0x58ae5c(0x4a,0xaa)]+0x32)*this['options']['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0x6fa4c9(-0x135,-0xd3)][_0x519a7b(-0x77,-0xdb)],this[_0x6fa4c9(-0x135,-0x173)][_0x519a7b(-0x79,-0xda)]),'minimum':()=>new Cartesian2$1(this['windData'][_0x6fa4c9(-0x149,-0x161)][_0x519a7b(-0x138,-0x10b)],this[_0x6fa4c9(-0x135,-0x139)]['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds']['east'],this['windData'][_0x6fa4c9(-0x149,-0x1a0)][_0x6fa4c9(-0x96,-0x8f)])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x6fa4c9(-0xff,-0x7a)]['particlesSpeed'],'preExecute':()=>{function _0x3c48a6(_0xf7798b,_0x1f8b09){return _0x6fa4c9(_0xf7798b-0x59c,_0x1f8b09);}const _0x4396b8=this['particlesTextures']['previousParticlesPosition'];this['particlesTextures']['previousParticlesPosition']=this[_0x3c48a6(0x49d,0x43c)]['currentParticlesPosition'],this[_0x3c48a6(0x49d,0x497)]['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'],this[_0x2c55ce(0x18d,0x200)][_0x3c48a6(0x491,0x4bd)]=_0x4396b8;function _0x2c55ce(_0x260e85,_0x11a149){return _0x519a7b(_0x260e85-0x24c,_0x11a149);}this[_0x2c55ce(0x10d,0x184)]['calculateSpeed']['commandToExecute']&&(this['primitives']['calculateSpeed']['commandToExecute'][_0x2c55ce(0x11e,0x124)]=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':_0x6fa4c9(-0xf9,-0xd0),'uniformMap':{'currentParticlesPosition':()=>this[_0x519a7b(-0xbf,-0x47)]['currentParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x519a7b(-0x143,-0xf3)]},'fragmentShaderSource':ShaderManager[_0x6fa4c9(-0x192,-0x1a1)](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x2a591f(_0x28238f,_0x596547){return _0x519a7b(_0x28238f-0x638,_0x596547);}function _0x7acaca(_0x52dcbb,_0x163b93){return _0x6fa4c9(_0x163b93-0x412,_0x52dcbb);}this['primitives']['updatePosition']['commandToExecute']&&(this[_0x2a591f(0x4f9,0x4b6)][_0x7acaca(0x2bf,0x2c4)]['commandToExecute'][_0x7acaca(0x2b3,0x2a4)]=this[_0x2a591f(0x579,0x52b)]['nextParticlesPosition']);},'isDynamic':()=>this[_0x6fa4c9(-0xdc,-0xbb)][_0x519a7b(-0x8d,-0x35)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this[_0x519a7b(-0xbf,-0xf8)]['particlesSpeed'],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this[_0x6fa4c9(-0x153,-0x174)]['latRange'],'dataLonRange':()=>new Cartesian2$1(this[_0x6fa4c9(-0x135,-0x156)]['bounds'][_0x519a7b(-0x138,-0x144)],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x519a7b(-0x87,-0xc1)],this[_0x6fa4c9(-0x135,-0xbf)]['bounds'][_0x519a7b(-0x56,-0x75)]),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this['options'][_0x6fa4c9(-0x15b,-0x133)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this[_0x519a7b(-0xbf,-0xce)][_0x6fa4c9(-0x10b,-0xad)],'preExecute':()=>{this['primitives']['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition']['commandToExecute']['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this[_0x519a7b(-0x9c,-0x22)]['dynamic']})};}['reCreateWindTextures'](){this['windTextures']['U']['destroy']();function _0x567875(_0x150188,_0x584550){return _0xd1a6c3(_0x150188,_0x584550-0x56);}this['windTextures']['V'][_0x5f0cd5(-0x3d,0x49)]();function _0x5f0cd5(_0x2814af,_0x1aa776){return _0xd1a6c3(_0x1aa776,_0x2814af- -0x8a);}this[_0x5f0cd5(-0x68,-0xc6)]();}['updateWindData'](_0x174c0b){this[_0x36f922(-0x24f,-0x275)]=_0x174c0b;function _0x36f922(_0xb3c9eb,_0x2c8f25){return _0x5de27f(_0xb3c9eb,_0x2c8f25- -0xbe);}this['reCreateWindTextures']();}[_0x5de27f(-0x1a2,-0x19e)](_0xaa5520){function _0xd091e7(_0x11824e,_0x5c5f62){return _0xd1a6c3(_0x5c5f62,_0x11824e-0x53a);}const _0x42a4f5=_0xaa5520[_0xd091e7(0x532,0x553)]!==undefined&&_0xaa5520['flipY']!==this['options']['flipY'];function _0x470156(_0x5977ce,_0x466a4a){return _0x5de27f(_0x5977ce,_0x466a4a-0x2cc);}this['options']=deepMerge(_0xaa5520,this['options']),_0x42a4f5&&this[_0xd091e7(0x5b7,0x5f9)]();}[_0x5de27f(-0x1b7,-0x1f8)](_0x5b5be9){const {array:_0x183ed4}=_0x5b5be9;function _0x58c8cd(_0x568779,_0x215a2a){return _0xd1a6c3(_0x215a2a,_0x568779-0x53a);}let {min:_0x348910,max:_0x24f1d6}=_0x5b5be9;const _0x3b7bf8=new Float32Array(_0x183ed4['length']);_0x348910===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x348910=Math['min'](..._0x183ed4));_0x24f1d6===undefined&&(console['warn'](_0x46dc51(0x3ee,0x382)),_0x24f1d6=Math['max'](..._0x183ed4));const _0x1e342e=Math[_0x46dc51(0x472,0x478)](Math[_0x46dc51(0x47b,0x438)](_0x348910),Math['abs'](_0x24f1d6));function _0x46dc51(_0x29a2b3,_0x1e6e1b){return _0xd1a6c3(_0x1e6e1b,_0x29a2b3-0x403);}for(let _0x22864e=0x0;_0x22864e<_0x183ed4[_0x58c8cd(0x598,0x622)];_0x22864e++){const _0x2ca747=_0x183ed4[_0x22864e]/_0x1e342e;_0x3b7bf8[_0x22864e]=_0x2ca747;}return _0x3b7bf8;}['destroy'](){Object['values'](this[_0x2a1e40(0x329,0x384)])['forEach'](_0x2568a2=>_0x2568a2[_0x2a1e40(0x3f8,0x38d)]()),Object[_0x3dce8d(0x378,0x319)](this['particlesTextures'])['forEach'](_0xea6151=>_0xea6151['destroy']());function _0x3dce8d(_0x3a161e,_0x525c9a){return _0xd1a6c3(_0x3a161e,_0x525c9a-0x29d);}function _0x2a1e40(_0x209c6c,_0x3f90eb){return _0x5de27f(_0x3f90eb,_0x209c6c-0x549);}Object['values'](this['primitives'])['forEach'](_0x2b0143=>_0x2b0143['destroy']()),this['frameRateMonitor'][_0x2a1e40(0x3f8,0x42b)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0xd1a6c3(-0xc,-0x4d)];function _0x1385(_0x1dacc9,_0x58a3dd){const _0x48ce6b=_0x48ce();return _0x1385=function(_0x138504,_0x4ae763){_0x138504=_0x138504-0x100;let _0x5271f1=_0x48ce6b[_0x138504];return _0x5271f1;},_0x1385(_0x1dacc9,_0x58a3dd);}class WindParticlesRendering{constructor(_0x277620,_0x4737fd,_0xc306cc,_0x4dd624){this['context']=_0x277620,this['options']=_0x4737fd;function _0x5229f9(_0x1cfd21,_0x14e3c3){return _0x5de27f(_0x1cfd21,_0x14e3c3-0x89);}this[_0x4f9b58(0x31b,0x2d3)]=_0xc306cc,this['computing']=_0x4dd624;(typeof this['options']['particlesTextureSize']!==_0x5229f9(-0x70,-0xf4)||this['options']['particlesTextureSize']<=0x0)&&(console['error'](_0x4f9b58(0x39f,0x338)),this[_0x4f9b58(0x31c,0x34a)]['particlesTextureSize']=0x100);this['colorTable']=this[_0x4f9b58(0x29d,0x2cc)](),this[_0x5229f9(-0x57,-0xd0)]=this['createRenderingTextures'](),this['framebuffers']=this['createRenderingFramebuffers']();function _0x4f9b58(_0x1c5aa2,_0x5679f1){return _0x5de27f(_0x1c5aa2,_0x5679f1-0x4a8);}this[_0x5229f9(-0x111,-0x178)]=this[_0x5229f9(-0x58,-0x9c)]();}[_0x5de27f(-0x1a3,-0x174)](){const _0x444414={};_0x444414['context']=this['context'],_0x444414[_0x48e428(0x266,0x21b)]=this['context']['drawingBufferWidth'],_0x444414[_0x48e428(0x286,0x219)]=this['context']['drawingBufferHeight'],_0x444414[_0x48e428(0x14f,0x157)]=PixelFormat['RGBA'];function _0x48e428(_0x3b67ed,_0x48bc79){return _0xd1a6c3(_0x3b67ed,_0x48bc79-0x1b6);}_0x444414['pixelDatatype']=PixelDatatype[_0x48e428(0x1e1,0x1ad)];const _0x3f6471=_0x444414,_0x2316f4={};_0x2316f4['context']=this['context'],_0x2316f4[_0x3a36b3(0x559,0x52e)]=this['context'][_0x3a36b3(0x54e,0x4f8)],_0x2316f4['height']=this['context']['drawingBufferHeight'],_0x2316f4['pixelFormat']=PixelFormat[_0x48e428(0x1dc,0x1a5)];function _0x3a36b3(_0x295a88,_0xfb818a){return _0xd1a6c3(_0x295a88,_0xfb818a-0x4c9);}_0x2316f4['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x1db454=_0x2316f4;return{'segmentsColor':new Texture(_0x3f6471),'segmentsDepth':new Texture(_0x1db454)};}[_0x5de27f(-0x23d,-0x1b6)](){const _0x4efabe={};_0x4efabe['context']=this[_0x17062b(0x163,0xe2)];function _0x17062b(_0x37c72e,_0x5aa23b){return _0x5de27f(_0x37c72e,_0x5aa23b-0x2b4);}_0x4efabe['colorTextures']=[this['textures']['segmentsColor']],_0x4efabe[_0x17062b(0xf6,0xdd)]=this[_0x17062b(0x124,0x15b)]['segmentsDepth'];function _0x5b85b3(_0x481f3e,_0x547937){return _0x5de27f(_0x547937,_0x481f3e-0x1da);}return{'segments':new Framebuffer(_0x4efabe)};}['destoryRenderingFramebuffers'](){function _0x14aa4c(_0x7f0bfa,_0x566d76){return _0xd1a6c3(_0x566d76,_0x7f0bfa-0x450);}Object['values'](this[_0x14aa4c(0x427,0x420)])['forEach'](_0x308d97=>{_0x308d97['destroy']();});}['createColorTableTexture'](){const _0xb76de4=new Float32Array(this['options']['colors']['flatMap'](_0x5dffb5=>{const _0x2f7f72=Color$1['fromCssColorString'](_0x5dffb5);function _0x5872f9(_0x38e063,_0x5e7568){return _0x1385(_0x5e7568-0x74,_0x38e063);}function _0x15edd8(_0x138c75,_0x5ae49d){return _0x1385(_0x138c75-0x30d,_0x5ae49d);}return[_0x2f7f72['red'],_0x2f7f72[_0x15edd8(0x4e0,0x4a6)],_0x2f7f72['blue'],_0x2f7f72[_0x15edd8(0x4cd,0x545)]];}));function _0x56e593(_0x4f95e1,_0xb6f75c){return _0xd1a6c3(_0x4f95e1,_0xb6f75c-0x3c3);}function _0x4b5944(_0x50fb98,_0x558732){return _0xd1a6c3(_0x50fb98,_0x558732-0x2e1);}const _0x1f8668={};return _0x1f8668['minificationFilter']=TextureMinificationFilter[_0x4b5944(0x2a3,0x2f1)],_0x1f8668['magnificationFilter']=TextureMagnificationFilter[_0x56e593(0x451,0x3d3)],_0x1f8668['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x1f8668[_0x56e593(0x3c1,0x3e3)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this[_0x4b5944(0x31b,0x321)]['colors']['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x1f8668),'source':{'width':this[_0x56e593(0x41b,0x403)]['colors']['length'],'height':0x1,'arrayBufferView':_0xb76de4}});}[_0xd1a6c3(-0x4c,-0x49)](){const _0x5b1f34=0x4,_0x3d026e=this[_0xc09629(-0x12b,-0xfc)]['particlesTextureSize'];let _0xc1dee4=[];for(let _0x53956a=0x0;_0x53956a<_0x3d026e;_0x53956a++){for(let _0xacbb1c=0x0;_0xacbb1c<_0x3d026e;_0xacbb1c++){for(let _0x3c2bea=0x0;_0x3c2bea<_0x5b1f34;_0x3c2bea++){_0xc1dee4['push'](_0x53956a/_0x3d026e),_0xc1dee4['push'](_0xacbb1c/_0x3d026e);}}}_0xc1dee4=new Float32Array(_0xc1dee4);const _0x3e3969=this[_0xcc7aa(0x3c7,0x3f0)]['particlesTextureSize']**0x2;let _0xb6a354=[];function _0xc09629(_0x3cd1f2,_0x4b2108){return _0xd1a6c3(_0x4b2108,_0x3cd1f2- -0x16b);}for(let _0x24d86f=0x0;_0x24d86f<_0x3e3969;_0x24d86f++){_0xb6a354['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0xb6a354=new Float32Array(_0xb6a354);let _0xe897ef=[];for(let _0x5f0430=0x0,_0xb775ef=0x0;_0x5f0430<_0x3e3969;_0x5f0430++){_0xe897ef['push'](_0xb775ef+0x0,_0xb775ef+0x1,_0xb775ef+0x2,_0xb775ef+0x2,_0xb775ef+0x1,_0xb775ef+0x3),_0xb775ef+=_0x5b1f34;}_0xe897ef=new Uint32Array(_0xe897ef);const _0x34a960={};function _0xcc7aa(_0x26d792,_0x50b425){return _0x5de27f(_0x50b425,_0x26d792-0x525);}_0x34a960['componentDatatype']=ComponentDatatype['FLOAT'],_0x34a960[_0xcc7aa(0x3f9,0x440)]=0x2,_0x34a960[_0xc09629(-0xef,-0x129)]=_0xc1dee4;const _0x1ef67a={};_0x1ef67a['componentDatatype']=ComponentDatatype[_0xcc7aa(0x3a1,0x353)],_0x1ef67a['componentsPerAttribute']=0x3,_0x1ef67a['values']=_0xb6a354;const _0x47d84f=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x34a960),'normal':new GeometryAttribute(_0x1ef67a)}),'indices':_0xe897ef});return _0x47d84f;}[_0x5de27f(-0x189,-0x15c)](_0x40195b){const _0x1f1b54={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x40195b};function _0x3768c2(_0x4afc33,_0xa674d7){return _0xd1a6c3(_0xa674d7,_0x4afc33-0x181);}return Appearance[_0x3768c2(0x17f,0x1be)](!![],![],_0x1f1b54);}[_0xd1a6c3(0x26,0x79)](){const _0x5468c9={};_0x5468c9['st']=0x0,_0x5468c9['normal']=0x1;const _0x20c861={};_0x20c861['enabled']=!![];const _0x4918ed={};_0x4918ed['enabled']=!![],_0x4918ed['blendEquation']=WebGLRenderingContext[_0x53beed(0x8a,0x1e)],_0x4918ed['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x4918ed['blendFuncDestination']=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];function _0x53beed(_0x5eeafd,_0x301945){return _0x5de27f(_0x301945,_0x5eeafd-0x1be);}function _0x49a21a(_0x2f4180,_0xe7d44c){return _0xd1a6c3(_0xe7d44c,_0x2f4180-0x26d);}const _0xdf689={};_0xdf689[_0x53beed(0x97,0xf2)]=undefined,_0xdf689[_0x53beed(0x47,-0xf)]=_0x20c861,_0xdf689[_0x49a21a(0x2dd,0x322)]=!![],_0xdf689[_0x53beed(0x57,-0xd)]=_0x4918ed;const _0x3824c3=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x5468c9,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x53beed(-0x44,-0x9c)],'uniformMap':{'previousParticlesPosition':()=>this['computing'][_0x49a21a(0x28a,0x20b)]['previousParticlesPosition'],'currentParticlesPosition':()=>this['computing']['particlesTextures'][_0x53beed(-0x4d,-0xc6)],'postProcessingPosition':()=>this[_0x49a21a(0x24c,0x297)][_0x53beed(0x3d,0xb8)]['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0x53beed(0x3d,0x82)][_0x49a21a(0x206,0x198)],'frameRateAdjustment':()=>this['computing'][_0x53beed(-0x2,0x64)],'colorTable':()=>this['colorTable'],'domain':()=>{var _0x6c7f93,_0x19ebf5;function _0x1a9ac0(_0x4cbe48,_0x3e327a){return _0x53beed(_0x4cbe48-0x44a,_0x3e327a);}const _0x26dd38=new Cartesian2(((_0x6c7f93=this['options']['domain'])===null||_0x6c7f93===void 0x0?void 0x0:_0x6c7f93[_0x5c2174(0x120,0x1a1)])??this[_0x5c2174(0x18c,0x121)][_0x5c2174(0x16e,0x129)]['speed']['min'],((_0x19ebf5=this[_0x1a9ac0(0x4aa,0x49c)][_0x5c2174(0xd8,0xd3)])===null||_0x19ebf5===void 0x0?void 0x0:_0x19ebf5[_0x1a9ac0(0x4d9,0x50b)])??this['computing']['windData'][_0x5c2174(0xf6,0x14b)]['max']);function _0x5c2174(_0x1d539e,_0x55fce1){return _0x49a21a(_0x55fce1- -0x12b,_0x1d539e);}return _0x26dd38;},'displayRange':()=>{var _0xe58678,_0x9e8ced;function _0x567073(_0x1d6fd6,_0x351005){return _0x53beed(_0x351005- -0x122,_0x1d6fd6);}const _0x105e8d=new Cartesian2(((_0xe58678=this[_0x567073(-0x4f,-0xc2)]['displayRange'])===null||_0xe58678===void 0x0?void 0x0:_0xe58678['min'])??this['computing']['windData']['speed']['min'],((_0x9e8ced=this['options']['displayRange'])===null||_0x9e8ced===void 0x0?void 0x0:_0x9e8ced['max'])??this['computing']['windData']['speed']['max']);return _0x105e8d;},'particleHeight':()=>this[_0x53beed(0x60,0x26)]['fixedHeight']||0x0,'aspect':()=>this['context'][_0x53beed(0x4f,0x75)]/this['context']['drawingBufferHeight'],'pixelSize':()=>this[_0x49a21a(0x236,0x2a0)][_0x53beed(0xad,0x66)],'lineWidth':()=>{const _0x45e604={};_0x45e604['min']=0x1;function _0x240181(_0x47a4bd,_0x54317e){return _0x49a21a(_0x54317e- -0xb4,_0x47a4bd);}_0x45e604['max']=0x2;const _0x81d282=this['options']['lineWidth']||_0x45e604;return new Cartesian2(_0x81d282['min'],_0x81d282[_0x240181(0x244,0x228)]);},'lineLength':()=>{const _0x4c46e6={};function _0x4d9719(_0x5777bb,_0x489ce2){return _0x53beed(_0x5777bb-0x88,_0x489ce2);}_0x4c46e6[_0x2eb558(-0x125,-0x10f)]=0x14,_0x4c46e6[_0x2eb558(-0x173,-0xff)]=0x64;const _0x31f391=this[_0x4d9719(0xe8,0x11a)][_0x2eb558(-0x17f,-0x11e)]||_0x4c46e6;function _0x2eb558(_0x5b2ca9,_0x8983d2){return _0x49a21a(_0x8983d2- -0x3db,_0x5b2ca9);}return new Cartesian2(_0x31f391['min'],_0x31f391['max']);},'is3D':()=>this['viewerParameters']['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures'][_0x53beed(-0x4c,-0x99)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this[_0x49a21a(0x2af,0x2c5)](_0xdf689)}),_0xa866a1={};return _0xa866a1[_0x53beed(-0x45,-0xab)]=_0x3824c3,_0xa866a1;}['onParticlesTextureSizeChange'](){const _0x37f2e1=this['createSegmentsGeometry']();this['primitives'][_0x32d912(-0x1b1,-0x200)][_0x304a73(-0x17e,-0x1d2)]=_0x37f2e1;const _0x2adff4={};_0x2adff4['context']=this['context'];function _0x32d912(_0x25443f,_0x141320){return _0xd1a6c3(_0x141320,_0x25443f- -0x14c);}function _0x304a73(_0x3801cd,_0x4bbb64){return _0xd1a6c3(_0x4bbb64,_0x3801cd- -0x181);}_0x2adff4['geometry']=_0x37f2e1,_0x2adff4[_0x304a73(-0x1a6,-0x186)]=this['primitives'][_0x304a73(-0x1e6,-0x1b2)]['attributeLocations'],_0x2adff4['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x5f227a=VertexArray[_0x32d912(-0x1a9,-0x16a)](_0x2adff4);this[_0x32d912(-0x1af,-0x1b2)]['segments']['commandToExecute']&&(this['primitives']['segments']['commandToExecute']['vertexArray']=_0x5f227a);}['onColorTableChange'](){function _0x25a57b(_0x576b53,_0x400da1){return _0xd1a6c3(_0x400da1,_0x576b53-0x206);}function _0x46d35b(_0x173070,_0x1e4135){return _0xd1a6c3(_0x173070,_0x1e4135- -0x222);}this[_0x25a57b(0x1a6,0x21c)][_0x25a57b(0x253,0x22e)](),this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x33146c){function _0x11fbb5(_0x27d566,_0x2ebb0d){return _0x5de27f(_0x2ebb0d,_0x27d566-0x43c);}const _0x5e1ecc=_0x33146c['colors']&&JSON[_0x11fbb5(0x24e,0x1ff)](_0x33146c['colors'])!==JSON['stringify'](this['options']['colors']);this['options']=deepMerge(_0x33146c,this[_0x2d9463(-0x1c2,-0x19c)]);function _0x2d9463(_0x170bf5,_0x208a21){return _0x5de27f(_0x170bf5,_0x208a21- -0x3e);}_0x5e1ecc&&this['onColorTableChange']();}[_0x5de27f(-0x113,-0x151)](){function _0x4bfd6b(_0x3810c3,_0x4fc815){return _0xd1a6c3(_0x3810c3,_0x4fc815- -0x1d6);}Object[_0x4bfd6b(-0x139,-0x15a)](this['framebuffers'])[_0x4bfd6b(-0xf8,-0x168)](_0x4a4f31=>{_0x4a4f31['destroy']();});function _0x11b21c(_0x4ba00f,_0x1c7461){return _0x5de27f(_0x4ba00f,_0x1c7461-0x7b);}Object['values'](this['primitives'])[_0x4bfd6b(-0x18a,-0x168)](_0x1f3f15=>{function _0x2d4ef4(_0x3642bd,_0x4e99e5){return _0x4bfd6b(_0x3642bd,_0x4e99e5-0x1e9);}_0x1f3f15[_0x2d4ef4(-0x23,0x60)]();}),this['colorTable'][_0x11b21c(-0x5e,-0xd6)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x12fead,_0x2ebb1a,_0x2bcbe9,_0x16eabe,_0xcc3a4f){this['context']=_0x12fead;function _0xfc65c8(_0x56da9e,_0x2a9fa6){return _0xd1a6c3(_0x2a9fa6,_0x56da9e-0x3b5);}function _0x376a0a(_0xe1030b,_0x1e77b2){return _0x5de27f(_0xe1030b,_0x1e77b2-0x3e0);}this['options']=_0x2bcbe9,this['viewerParameters']=_0x16eabe,this['computing']=new WindParticlesComputing(_0x12fead,_0x2ebb1a,_0x2bcbe9,_0x16eabe,_0xcc3a4f),this[_0xfc65c8(0x3e9,0x446)]=new WindParticlesRendering(_0x12fead,_0x2bcbe9,_0x16eabe,this[_0x376a0a(0x1f6,0x221)]),this[_0x376a0a(0x2ff,0x2c0)]();}['getPrimitives'](){const _0x3512d3=[this[_0x15398b(0x2a5,0x2b6)][_0x480317(-0x285,-0x21c)][_0x15398b(0x2ec,0x2a6)],this['computing'][_0x480317(-0x285,-0x256)][_0x15398b(0x327,0x2a5)],this['computing']['primitives'][_0x15398b(0x2e1,0x2e8)],this[_0x480317(-0x1ee,-0x260)]['primitives']['segments']];function _0x480317(_0x4a88d4,_0x3ead53){return _0x5de27f(_0x3ead53,_0x4a88d4- -0x84);}function _0x15398b(_0x287d50,_0x8051f1){return _0x5de27f(_0x287d50,_0x8051f1-0x475);}return _0x3512d3;}[_0x5de27f(-0xb1,-0x120)](){function _0x3917ea(_0x5c8b3b,_0x2fb1e5){return _0xd1a6c3(_0x5c8b3b,_0x2fb1e5-0x529);}function _0x54f94e(_0x3f9c2c,_0x2fcf67){return _0xd1a6c3(_0x3f9c2c,_0x2fcf67- -0xa7);}const _0x43c092=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});Object[_0x54f94e(-0xb8,-0x109)](this[_0x3917ea(0x4f3,0x55d)][_0x54f94e(-0xd2,-0xd0)])['forEach'](_0x3b80f9=>{function _0x32b266(_0x16d251,_0x143fdc){return _0x54f94e(_0x143fdc,_0x16d251-0x41a);}function _0x4c4746(_0xe3a151,_0x4a0cef){return _0x3917ea(_0x4a0cef,_0xe3a151- -0x83);}_0x43c092[_0x4c4746(0x499,0x512)]=this[_0x32b266(0x3a7,0x391)]['framebuffers'][_0x3b80f9],_0x43c092['execute'](this['context']);});}[_0x5de27f(-0x125,-0x183)](_0x3c484c){let _0x440b35=![];function _0x4bd753(_0x5defca,_0x284c59){return _0xd1a6c3(_0x284c59,_0x5defca-0x10c);}_0x3c484c['particlesTextureSize']&&this['options']['particlesTextureSize']!==_0x3c484c['particlesTextureSize']&&(_0x440b35=!![]);const _0x2c0c7f=deepMerge(_0x3c484c,this[_0x4bd753(0x14c,0x143)]);if(_0x2c0c7f[_0x27dd06(0x448,0x419)]<0x1)throw new Error(_0x27dd06(0x4ac,0x4c8));this[_0x27dd06(0x4de,0x4b3)]=_0x2c0c7f;function _0x27dd06(_0x2be895,_0x3e7f94){return _0xd1a6c3(_0x3e7f94,_0x2be895-0x49e);}this[_0x4bd753(0x140,0x179)]['updateOptions'](_0x3c484c),this['computing'][_0x27dd06(0x49e,0x515)](_0x3c484c),_0x440b35&&(this[_0x27dd06(0x47d,0x44e)]['destroyParticlesTextures'](),this[_0x27dd06(0x47d,0x45e)][_0x27dd06(0x519,0x543)](),this[_0x27dd06(0x4d2,0x45f)]['onParticlesTextureSizeChange']());}[_0xd1a6c3(-0x60,0x26)](_0x3e7e0b){function _0x11565f(_0x3ae214,_0x16ae61){return _0xd1a6c3(_0x3ae214,_0x16ae61-0x268);}this[_0x11565f(0x2a7,0x231)]=_0x3e7e0b;function _0x21d956(_0x5ceef1,_0x7a3483){return _0x5de27f(_0x7a3483,_0x5ceef1- -0x9b);}this['computing'][_0x21d956(-0x270,-0x2b5)]=_0x3e7e0b,this['rendering'][_0x11565f(0x25d,0x231)]=_0x3e7e0b;}['destroy'](){function _0x58035d(_0x354a60,_0x25cd0c){return _0x5de27f(_0x354a60,_0x25cd0c-0x564);}function _0xd28a3b(_0x406848,_0x576096){return _0xd1a6c3(_0x406848,_0x576096-0x392);}this['computing']['destroy'](),this[_0x58035d(0x44e,0x3fa)][_0x58035d(0x3e6,0x413)]();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0xd1a6c3(0x84,0x29)],_0x7835f9={};_0x7835f9['min']=0x1,_0x7835f9['max']=0x2;const _0xeb1378={};_0xeb1378['min']=0x14,_0xeb1378['max']=0x64;const _0x273743={};_0x273743[_0x5de27f(-0x1fb,-0x1f4)]=0x64,_0x273743[_0xd1a6c3(0x4,-0x27)]=0x0,_0x273743['lineWidth']=_0x7835f9,_0x273743['lineLength']=_0xeb1378,_0x273743[_0x5de27f(-0x1a3,-0x215)]=0x1,_0x273743['dropRate']=0.003,_0x273743[_0xd1a6c3(-0xba,-0x33)]=0.001,_0x273743[_0x5de27f(-0xeb,-0x114)]=[_0x5de27f(-0x12e,-0x17a)],_0x273743[_0xd1a6c3(0x15,-0x8)]=![],_0x273743['dynamic']=!![];const DEF_OPTIONS=_0x273743;class WindLayer extends BaseLayer$1{constructor(_0xf6b99c={}){_0xf6b99c={...DEF_OPTIONS,..._0xf6b99c};function _0x6a288f(_0x46e6e,_0xb8d460){return _0xd1a6c3(_0xb8d460,_0x46e6e-0x3bb);}super(_0xf6b99c),this[_0x6a288f(0x33f,0x2f6)](_0xf6b99c,_0xf6b99c);}get[_0x5de27f(-0x10c,-0x185)](){return this['primitives'];}get['data'](){return this['options']['data'];}set['data'](_0x476e91){function _0x1c2368(_0x3b5482,_0x8ddac6){return _0xd1a6c3(_0x3b5482,_0x8ddac6- -0x242);}this['options'][_0x1c2368(-0x273,-0x22a)]=_0x476e91,this['setData'](_0x476e91);}get['colors'](){function _0x1be1c5(_0x7f93b0,_0xca6816){return _0xd1a6c3(_0x7f93b0,_0xca6816- -0x212);}function _0x1b1793(_0x55fd4f,_0x1346f4){return _0xd1a6c3(_0x55fd4f,_0x1346f4-0x3c);}return this[_0x1be1c5(-0x205,-0x1d2)][_0x1b1793(0xfd,0xc6)];}set['colors'](_0x28279e){this['options']['colors']=_0x28279e;const _0x3608c5={};_0x3608c5['colors']=_0x28279e,this['_setOptionsHook'](this['options'],_0x3608c5);}['_mountedHook'](){}[_0x5de27f(-0x139,-0x199)](){function _0x44d65a(_0x56ab36,_0x12d20c){return _0xd1a6c3(_0x56ab36,_0x12d20c-0x1d3);}function _0x4d2404(_0x17d27,_0x4bb30f){return _0xd1a6c3(_0x17d27,_0x4bb30f-0x209);}this['scene']=this[_0x44d65a(0x1c5,0x187)]['scene'],this['camera']=this['_map']['camera'];this[_0x4d2404(0x2a6,0x249)]['data']&&this[_0x44d65a(0x1ff,0x23c)](this['options']['data']);if(!this['windData'])return;this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x4d2404(0x174,0x1c3)][_0x4d2404(0x143,0x1b2)]},this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene'][_0x44d65a(0x15a,0x19f)],this['windData'],this['options'],this[_0x4d2404(0x17f,0x1d2)],this[_0x44d65a(0x148,0x18d)]),this['primitives']=this['particleSystem']['getPrimitives'](),this['primitives']['forEach'](_0x3b61ac=>{this['scene']['primitives']['add'](_0x3b61ac);}),this['camera']['percentageChanged']=0.01,this[_0x44d65a(0x239,0x230)]['changed'][_0x4d2404(0x230,0x1ea)](this[_0x4d2404(0x149,0x1c6)][_0x44d65a(0x245,0x258)](this)),this[_0x4d2404(0x1ff,0x1c3)]['morphComplete'][_0x4d2404(0x16a,0x1ea)](this['updateViewerParameters'][_0x4d2404(0x249,0x28e)](this)),window[_0x4d2404(0x22b,0x1ea)](_0x4d2404(0x189,0x1e9),this[_0x44d65a(0x19e,0x190)][_0x44d65a(0x1e9,0x258)](this));}['_removedHook'](){this['camera']['changed']['removeEventListener'](this['updateViewerParameters']['bind'](this));function _0x48d904(_0xd56018,_0x59dd86){return _0x5de27f(_0xd56018,_0x59dd86-0x550);}this['scene']['morphComplete'][_0x48d904(0x374,0x3ab)](this['updateViewerParameters'][_0x48d904(0x462,0x437)](this)),window['removeEventListener']('resize',this['updateViewerParameters']['bind'](this));function _0x434c61(_0x44771b,_0x1837a4){return _0xd1a6c3(_0x44771b,_0x1837a4-0x18d);}this[_0x434c61(0x15c,0x12a)]&&(this[_0x434c61(0xec,0x12a)][_0x434c61(0x27c,0x1fb)](_0x360265=>{this['scene']['primitives']['remove'](_0x360265);}),delete this[_0x48d904(0x3b5,0x34f)]),this['particleSystem']&&(this[_0x434c61(0x265,0x1df)][_0x434c61(0x155,0x1da)](),delete this['particleSystem']);}[_0x5de27f(-0xb3,-0x135)](_0x1bcee7,_0x5e430d){function _0x33bd27(_0x235e17,_0x27ac4f){return _0xd1a6c3(_0x27ac4f,_0x235e17-0xc9);}this[_0x127791(-0x232,-0x1a9)]=this[_0x127791(-0x273,-0x224)](_0x1bcee7);function _0x127791(_0x5a8aef,_0x5e50d1){return _0x5de27f(_0x5e50d1,_0x5a8aef- -0x7b);}if(_0x5e430d){this['_removedHook'](),this[_0x33bd27(0xce,0x92)]();return;}this[_0x127791(-0x1c7,-0x187)]?(this['particleSystem'][_0x33bd27(0xa8,0x10c)]['updateWindData'](this[_0x127791(-0x232,-0x2b2)]),this['scene']['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0x34adb2,_0x21a789){function _0x34f3ef(_0x102d5c,_0x311720){return _0x5de27f(_0x311720,_0x102d5c-0x1bf);}this[_0x34f3ef(0x73,0xf6)]&&(this['particleSystem']['changeOptions'](_0x21a789),this['scene']['requestRender']());}['processWindData'](_0x582546){var _0x41b962,_0x13cc9f;const _0x4df86b={..._0x582546};function _0x2790de(_0x3dd860,_0x260d94){return _0x5de27f(_0x260d94,_0x3dd860-0xe6);}const _0x101ceb=_0x4df86b;!_0x101ceb[_0x2790de(-0x55,-0x6a)]&&_0x101ceb[_0x1ab12b(0x4d0,0x54d)]&&(_0x101ceb['height']=_0x101ceb[_0x2790de(-0x7d,-0x16)]);!_0x101ceb['width']&&_0x101ceb[_0x2790de(-0x28,-0x8e)]&&(_0x101ceb['width']=_0x101ceb['cols']);function _0x1ab12b(_0x38965c,_0x586e83){return _0xd1a6c3(_0x38965c,_0x586e83-0x512);}!_0x101ceb['bounds']&&(_0x101ceb['bounds']={'west':_0x101ceb['xmin'],'south':_0x101ceb[_0x1ab12b(0x4db,0x4a1)],'east':_0x101ceb[_0x1ab12b(0x511,0x537)],'north':_0x101ceb['ymax']});if(!_0x101ceb['u']){const _0x8d2757={};_0x8d2757[_0x2790de(-0x138,-0x156)]=_0x582546[_0x2790de(-0xe6,-0x66)],_0x8d2757['min']=_0x582546['umin'],_0x8d2757['max']=_0x582546[_0x1ab12b(0x563,0x4ff)],_0x101ceb['u']=_0x8d2757;}if(!_0x101ceb['v']){const _0x172856={};_0x172856[_0x2790de(-0x138,-0xed)]=_0x582546['vdata'],_0x172856['min']=_0x582546['vmin'],_0x172856['max']=_0x582546[_0x2790de(-0x37,-0x7d)],_0x101ceb['v']=_0x172856;}if(((_0x41b962=_0x101ceb[_0x1ab12b(0x57e,0x51b)])===null||_0x41b962===void 0x0?void 0x0:_0x41b962['min'])===undefined||((_0x13cc9f=_0x101ceb['speed'])===null||_0x13cc9f===void 0x0?void 0x0:_0x13cc9f['max'])===undefined||_0x101ceb['speed']['array']===undefined){const _0x2184c5={'array':new Float32Array(_0x101ceb['u']['array'][_0x1ab12b(0x593,0x570)]),'min':Number[_0x2790de(-0xe3,-0xb4)],'max':Number[_0x2790de(-0x86,-0x58)]};for(let _0x375bd8=0x0;_0x375bd8<_0x101ceb['u'][_0x2790de(-0x138,-0x1aa)]['length'];_0x375bd8++){_0x2184c5['array'][_0x375bd8]=Math['sqrt'](_0x101ceb['u']['array'][_0x375bd8]*_0x101ceb['u'][_0x1ab12b(0x40d,0x492)][_0x375bd8]+_0x101ceb['v'][_0x2790de(-0x138,-0x160)][_0x375bd8]*_0x101ceb['v']['array'][_0x375bd8]),_0x2184c5['array'][_0x375bd8]!==0x0&&(_0x2184c5['min']=Math['min'](_0x2184c5['min'],_0x2184c5['array'][_0x375bd8]),_0x2184c5[_0x2790de(-0x49,0x17)]=Math[_0x2790de(-0x49,0x29)](_0x2184c5['max'],_0x2184c5['array'][_0x375bd8]));}_0x101ceb['speed']=_0x2184c5;}return _0x101ceb;}[_0xd1a6c3(-0x3d,-0x43)](){var _0x5b65bf;const _0x24bb80=this['scene'],_0x211171=_0x24bb80['canvas'],_0x50b72b={};_0x50b72b['x']=0x0,_0x50b72b['y']=0x0;const _0x505a0e={};_0x505a0e['x']=0x0,_0x505a0e['y']=_0x211171[_0x42f16d(-0x16f,-0x1b7)];const _0x188e91={};_0x188e91['x']=_0x211171['clientWidth'],_0x188e91['y']=0x0;const _0x2f0e17={};function _0x54e969(_0x592740,_0x227f2b){return _0xd1a6c3(_0x227f2b,_0x592740-0x83);}_0x2f0e17['x']=_0x211171[_0x54e969(0x8d,0x1b)],_0x2f0e17['y']=_0x211171['clientHeight'];const _0x183598=[_0x50b72b,_0x505a0e,_0x188e91,_0x2f0e17];function _0x42f16d(_0x454bf1,_0x1b65cf){return _0xd1a6c3(_0x1b65cf,_0x454bf1- -0x12a);}let _0x4d9d62=0xb4,_0x7ff950=-0xb4,_0x12f230=0x5a,_0xf115d5=-0x5a,_0x1676e0=![];for(const _0x297a9d of _0x183598){const _0x5122e9=_0x24bb80['camera'][_0x42f16d(-0xca,-0xa8)](new Cesium$1[(_0x42f16d(-0xbf,-0xce))](_0x297a9d['x'],_0x297a9d['y']),_0x24bb80[_0x42f16d(-0x16a,-0xf5)][_0x42f16d(-0x102,-0xdd)]);if(!_0x5122e9){_0x1676e0=!![];break;}const _0x5a80ea=_0x24bb80['globe']['ellipsoid']['cartesianToCartographic'](_0x5122e9),_0x493154=Cesium$1['Math']['toDegrees'](_0x5a80ea['longitude']),_0x4d229e=Cesium$1['Math']['toDegrees'](_0x5a80ea['latitude']);_0x4d9d62=Math['min'](_0x4d9d62,_0x493154),_0x7ff950=Math[_0x54e969(0xf2,0x135)](_0x7ff950,_0x493154),_0x12f230=Math['min'](_0x12f230,_0x4d229e),_0xf115d5=Math['max'](_0xf115d5,_0x4d229e);}if(!_0x1676e0){const _0x15a978=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds']['west'],_0x4d9d62),Math['min'](this['windData'][_0x42f16d(-0x157,-0x123)][_0x42f16d(-0x174,-0x1f1)],_0x7ff950)),_0x47983e=new Cesium$1['Cartesian2'](Math['max'](this[_0x42f16d(-0x143,-0xc3)]['bounds'][_0x54e969(0xd8,0x93)],_0x12f230),Math['min'](this['windData'][_0x42f16d(-0x157,-0x1a6)]['north'],_0xf115d5)),_0x4adf76=(_0x15a978['y']-_0x15a978['x'])*0.05,_0x1b9e1b=(_0x47983e['y']-_0x47983e['x'])*0.05;_0x15a978['x']=Math[_0x54e969(0xf2,0x7c)](this[_0x42f16d(-0x143,-0x140)][_0x54e969(0x56,-0xd)]['west'],_0x15a978['x']-_0x4adf76),_0x15a978['y']=Math[_0x54e969(0xe2,0x94)](this[_0x54e969(0x6a,0xec)]['bounds'][_0x42f16d(-0x174,-0xfd)],_0x15a978['y']+_0x4adf76),_0x47983e['x']=Math['max'](this['windData'][_0x54e969(0x56,0xc0)]['south'],_0x47983e['x']-_0x1b9e1b),_0x47983e['y']=Math['min'](this['windData']['bounds']['north'],_0x47983e['y']+_0x1b9e1b),this['viewerParameters'][_0x54e969(0x38,0x66)]=_0x15a978,this[_0x54e969(0x4c,-0x1f)]['latRange']=_0x47983e;const _0xcc17ee=this[_0x42f16d(-0x143,-0x1b0)]['bounds'][_0x42f16d(-0x174,-0x1f7)]-this[_0x54e969(0x6a,0x28)][_0x42f16d(-0x157,-0x100)]['west'],_0x52250c=this[_0x42f16d(-0x143,-0xd0)][_0x42f16d(-0x157,-0x10d)]['north']-this[_0x54e969(0x6a,-0x8)]['bounds']['south'],_0x2b63f4=(_0x15a978['y']-_0x15a978['x'])/_0xcc17ee,_0x37af3b=(_0x47983e['y']-_0x47983e['x'])/_0x52250c,_0x580d6c=Math[_0x42f16d(-0xcb,-0x42)](_0x2b63f4,_0x37af3b),_0x20ea7e=0x3e8*_0x580d6c;_0x20ea7e>0x0&&(this['viewerParameters'][_0x42f16d(-0x9d,-0x53)]=Math['max'](0x0,Math['min'](0x3e8,_0x20ea7e)));}this[_0x54e969(0x4c,0xcd)]['sceneMode']=this['scene']['mode'],(_0x5b65bf=this[_0x54e969(0xd5,0x123)])===null||_0x5b65bf===void 0x0||_0x5b65bf[_0x54e969(0xa9,0x8f)](this['viewerParameters']);}[_0xd1a6c3(0xcb,0x5a)](_0x2bc8e6,_0xbc7b20){function _0x472d16(_0x3ca5d6,_0x5df5ff){return _0xd1a6c3(_0x3ca5d6,_0x5df5ff-0x25b);}const {bounds:_0x44173c,width:_0x23ba16,height:_0x42d698,u:_0x5d9d6a,v:_0x26353a,speed:_0x2abc91}=this['windData'],{flipY:_0x31bc56}=this[_0x5e1ef6(0x4d6,0x519)];if(_0x2bc8e6<_0x44173c['west']||_0x2bc8e6>_0x44173c['east']||_0xbc7b20<_0x44173c['south']||_0xbc7b20>_0x44173c[_0x5e1ef6(0x51c,0x54a)])return null;const _0x2bbe0d=(_0x2bc8e6-_0x44173c[_0x472d16(0x22e,0x1ff)])/(_0x44173c['east']-_0x44173c['west'])*(_0x23ba16-0x1);let _0x47f42c=(_0xbc7b20-_0x44173c[_0x5e1ef6(0x4eb,0x46f)])/(_0x44173c['north']-_0x44173c[_0x472d16(0x2fe,0x2b0)])*(_0x42d698-0x1);_0x31bc56&&(_0x47f42c=_0x42d698-0x1-_0x47f42c);const _0x539799=Math['floor'](_0x2bbe0d),_0x55acec=Math['floor'](_0x47f42c),_0x1a47ec=Math['floor'](_0x2bbe0d),_0x16de71=Math['min'](_0x1a47ec+0x1,_0x23ba16-0x1),_0x588ab6=Math['floor'](_0x47f42c),_0x49e07c=Math['min'](_0x588ab6+0x1,_0x42d698-0x1);function _0x5e1ef6(_0xc1c4c1,_0x313e2a){return _0xd1a6c3(_0x313e2a,_0xc1c4c1-0x496);}const _0x13e2ac=_0x2bbe0d-_0x1a47ec,_0x3878c2=_0x47f42c-_0x588ab6,_0x3f4a75=_0x55acec*_0x23ba16+_0x539799,_0x5be99f=_0x588ab6*_0x23ba16+_0x1a47ec,_0x23f72f=_0x588ab6*_0x23ba16+_0x16de71,_0x415ad2=_0x49e07c*_0x23ba16+_0x1a47ec,_0x355a2c=_0x49e07c*_0x23ba16+_0x16de71,_0x36d3fc=_0x5d9d6a[_0x472d16(0x1e1,0x1db)][_0x5be99f],_0x5e073b=_0x5d9d6a['array'][_0x23f72f],_0x3d2a9d=_0x5d9d6a['array'][_0x415ad2],_0x273ed8=_0x5d9d6a[_0x472d16(0x1f6,0x1db)][_0x355a2c],_0x267b9d=(0x1-_0x13e2ac)*(0x1-_0x3878c2)*_0x36d3fc+_0x13e2ac*(0x1-_0x3878c2)*_0x5e073b+(0x1-_0x13e2ac)*_0x3878c2*_0x3d2a9d+_0x13e2ac*_0x3878c2*_0x273ed8,_0x14b32b=_0x26353a['array'][_0x5be99f],_0x44cdb4=_0x26353a['array'][_0x23f72f],_0x447c46=_0x26353a[_0x472d16(0x25b,0x1db)][_0x415ad2],_0x2a9da4=_0x26353a['array'][_0x355a2c],_0x33c487=(0x1-_0x13e2ac)*(0x1-_0x3878c2)*_0x14b32b+_0x13e2ac*(0x1-_0x3878c2)*_0x44cdb4+(0x1-_0x13e2ac)*_0x3878c2*_0x447c46+_0x13e2ac*_0x3878c2*_0x2a9da4,_0x47fc17=Math['sqrt'](_0x267b9d*_0x267b9d+_0x33c487*_0x33c487),_0x169d05={};_0x169d05['u']=_0x5d9d6a['array'][_0x3f4a75],_0x169d05['v']=_0x26353a['array'][_0x3f4a75],_0x169d05['speed']=_0x2abc91[_0x5e1ef6(0x416,0x3c9)][_0x3f4a75];const _0x2c20be={};_0x2c20be['u']=_0x267b9d,_0x2c20be['v']=_0x33c487,_0x2c20be[_0x5e1ef6(0x49f,0x512)]=_0x47fc17;const _0x30b849={};return _0x30b849['original']=_0x169d05,_0x30b849['interpolated']=_0x2c20be,_0x30b849;}}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace[_0x5de27f(-0x154,-0x185)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this[_0x42aa4f(-0xb5,-0xc4)]=null,this['tlng']=null,this[_0x42aa4f(-0xf0,-0x7b)]=null;function _0x42aa4f(_0x467d32,_0x48e424){return _0xd1a6c3(_0x48e424,_0x467d32- -0x11d);}this[_0x42aa4f(-0x149,-0x127)]=null;function _0x21a5f6(_0x1f445f,_0x5e556e){return _0xd1a6c3(_0x1f445f,_0x5e556e-0x203);}this['speed']=null;}['destroy'](){for(const _0x29f02b in this){delete this[_0x29f02b];}}}class CanvasWindField{constructor(_0x121e5a){this['setOptions'](_0x121e5a);}get[_0xd1a6c3(0xd9,0x59)](){function _0xe763dc(_0x47ae8f,_0x56f25e){return _0xd1a6c3(_0x47ae8f,_0x56f25e-0x515);}return this[_0xe763dc(0x553,0x571)];}set['speedRate'](_0x332a9e){function _0x2fdc05(_0x476176,_0x55364a){return _0xd1a6c3(_0x476176,_0x55364a-0x14d);}function _0x300750(_0x43ae3a,_0x4768fc){return _0x5de27f(_0x43ae3a,_0x4768fc-0x375);}this['_speedRate']=(0x64-(_0x332a9e>0x63?0x63:_0x332a9e))*0x64,this[_0x2fdc05(0x10b,0x127)]=[(this[_0x2fdc05(0x1be,0x172)]-this[_0x300750(0x21c,0x21e)])/this[_0x2fdc05(0x20c,0x1a9)],(this[_0x2fdc05(0x1ed,0x17e)]-this[_0x2fdc05(0xfb,0xdc)])/this['_speedRate']];}get[_0xd1a6c3(0x24,0x8)](){return this['_maxAge'];}set['maxAge'](_0x564037){function _0x54d783(_0x548bd6,_0x1bb34a){return _0x5de27f(_0x1bb34a,_0x548bd6-0x287);}this[_0x54d783(0x16c,0x183)]=_0x564037;}['setOptions'](_0xa25bc1){this[_0x232e8f(-0x20a,-0x210)]=_0xa25bc1,this['maxAge']=_0xa25bc1['maxAge']||0x78;function _0x43bda4(_0x557902,_0x130171){return _0x5de27f(_0x557902,_0x130171-0x53);}function _0x232e8f(_0x4d5d9b,_0x5756a6){return _0xd1a6c3(_0x5756a6,_0x4d5d9b- -0x24a);}this['speedRate']=_0xa25bc1[_0x232e8f(-0x1f1,-0x1d5)]||0x32,this['particles']=[];const _0x1e8c57=_0xa25bc1['particlesNumber']||0x1000;for(let _0xd2f2d5=0x0;_0xd2f2d5<_0x1e8c57;_0xd2f2d5++){const _0x18d7ff=this['_randomParticle'](new CanvasParticle());this[_0x43bda4(-0xf2,-0xd7)][_0x232e8f(-0x23e,-0x248)](_0x18d7ff);}}['setDate'](_0x2fa3b4){this['rows']=_0x2fa3b4[_0x46dcb2(-0xe9,-0xc6)],this['cols']=_0x2fa3b4['cols'],this[_0x5756a7(-0x11f,-0x121)]=_0x2fa3b4['xmin'],this['xmax']=_0x2fa3b4['xmax'];function _0x46dcb2(_0xe7dd7d,_0x25af84){return _0xd1a6c3(_0x25af84,_0xe7dd7d- -0x124);}this[_0x5756a7(-0x1d7,-0x1cd)]=_0x2fa3b4['ymin'],this['ymax']=_0x2fa3b4['ymax'],this['grid']=[];const _0x5031ab=_0x2fa3b4['udata'],_0x3e5e03=_0x2fa3b4['vdata'];let _0x4be52e=![];_0x5031ab[_0x5756a7(-0x108,-0xe6)]===this['rows']&&_0x5031ab[0x0]['length']===this[_0x46dcb2(-0x94,-0x63)]&&(_0x4be52e=!![]);function _0x5756a7(_0x256dc4,_0x128112){return _0xd1a6c3(_0x128112,_0x256dc4- -0x166);}let _0x1448d2=0x0,_0x34d7af=null,_0x25dead=null;for(let _0x1dbfb8=0x0;_0x1dbfb8<this[_0x46dcb2(-0xe9,-0x106)];_0x1dbfb8++){_0x34d7af=[];for(let _0xd529b0=0x0;_0xd529b0<this['cols'];_0xd529b0++,_0x1448d2++){_0x4be52e?_0x25dead=this['_calcUV'](_0x5031ab[_0x1dbfb8][_0xd529b0],_0x3e5e03[_0x1dbfb8][_0xd529b0]):_0x25dead=this['_calcUV'](_0x5031ab[_0x1448d2],_0x3e5e03[_0x1448d2]),_0x34d7af[_0x5756a7(-0x15a,-0x107)](_0x25dead);}this[_0x5756a7(-0x17d,-0x179)]['push'](_0x34d7af);}!this['options']['flipY']&&this[_0x5756a7(-0x17d,-0x129)][_0x5756a7(-0x12a,-0x115)]();}[_0xd1a6c3(-0x56,-0x12)](){delete this['rows'],delete this['cols'];function _0x4de4bd(_0x1905b8,_0x799220){return _0xd1a6c3(_0x1905b8,_0x799220-0x329);}delete this['xmin'],delete this['xmax'],delete this['ymin'],delete this[_0x4de4bd(0x37a,0x35a)],delete this['grid'];function _0x4959df(_0x3fbd59,_0x37f857){return _0x5de27f(_0x3fbd59,_0x37f857-0x61f);}delete this[_0x4de4bd(0x346,0x39d)];}[_0xd1a6c3(-0xb3,-0x58)](_0xb4677b,_0xc4cfc6){const _0xe94d1a=(_0xb4677b-this[_0x4da798(0x42a,0x436)])/(this['xmax']-this['xmin'])*(this[_0xb55e84(0x1bf,0x1d0)]-0x1);function _0x4da798(_0x4466ea,_0x1dfda1){return _0x5de27f(_0x1dfda1,_0x4466ea-0x581);}function _0xb55e84(_0x5cddac,_0x561c95){return _0x5de27f(_0x561c95,_0x5cddac-0x2cd);}const _0x101db3=(this['ymax']-_0xc4cfc6)/(this['ymax']-this['ymin'])*(this[_0xb55e84(0x16a,0x104)]-0x1);return[_0xe94d1a,_0x101db3];}[_0xd1a6c3(0x55,-0x1d)](_0x3bd2dc,_0xa1daa7){if(_0x3bd2dc<0x0||_0x3bd2dc>=this['cols']||_0xa1daa7>=this['rows'])return[0x0,0x0,0x0];const _0x1bd523=Math['floor'](_0x3bd2dc),_0x22656f=Math['floor'](_0xa1daa7);function _0x81f3ff(_0x5a5da0,_0x141c72){return _0xd1a6c3(_0x141c72,_0x5a5da0-0x22f);}if(_0x1bd523===_0x3bd2dc&&_0x22656f===_0xa1daa7)return this['grid'][_0xa1daa7][_0x3bd2dc];const _0x230c72=_0x1bd523+0x1,_0x1a21bc=_0x22656f+0x1,_0x48a845=this[_0xaeb736(0x82,0x6c)](_0x1bd523,_0x22656f),_0x46400b=this[_0xaeb736(0x82,0x45)](_0x230c72,_0x22656f);function _0xaeb736(_0x11c2e8,_0x45cef9){return _0x5de27f(_0x45cef9,_0x11c2e8-0x23d);}const _0xcd6894=this['getUVByXY'](_0x1bd523,_0x1a21bc),_0x24909d=this[_0xaeb736(0x82,0x31)](_0x230c72,_0x1a21bc);let _0x445bf5=null;try{_0x445bf5=this['_bilinearInterpolation'](_0x3bd2dc-_0x1bd523,_0xa1daa7-_0x22656f,_0x48a845,_0x46400b,_0xcd6894,_0x24909d);}catch(_0x4ecfca){console[_0xaeb736(0x70,0x94)](_0x3bd2dc,_0xa1daa7);}return _0x445bf5;}[_0xd1a6c3(0xf,0x48)](_0x27570c,_0x1aaff7,_0x518e3a,_0x28d02a,_0xe7686c,_0x2cb0b3){const _0x179a61=0x1-_0x27570c,_0x335a44=0x1-_0x1aaff7,_0x93db82=_0x179a61*_0x335a44,_0x4b7b26=_0x27570c*_0x335a44,_0xe88c37=_0x179a61*_0x1aaff7,_0x27e9d8=_0x27570c*_0x1aaff7,_0x127203=_0x518e3a[0x0]*_0x93db82+_0x28d02a[0x0]*_0x4b7b26+_0xe7686c[0x0]*_0xe88c37+_0x2cb0b3[0x0]*_0x27e9d8,_0x24758b=_0x518e3a[0x1]*_0x93db82+_0x28d02a[0x1]*_0x4b7b26+_0xe7686c[0x1]*_0xe88c37+_0x2cb0b3[0x1]*_0x27e9d8;return this['_calcUV'](_0x127203,_0x24758b);}[_0xd1a6c3(-0x11,0x4e)](_0xacbd2f,_0x54d3bd){return[+_0xacbd2f,+_0x54d3bd,Math['sqrt'](_0xacbd2f*_0xacbd2f+_0x54d3bd*_0x54d3bd)];}[_0x5de27f(-0x267,-0x1e0)](_0x3a6b22,_0x537fec){if(!this['isInExtent'](_0x3a6b22,_0x537fec))return null;function _0x45b56d(_0x434a28,_0x2378df){return _0xd1a6c3(_0x2378df,_0x434a28-0x507);}const _0x12b839=this[_0x45b56d(0x4af,0x4fb)](_0x3a6b22,_0x537fec),_0x112679=this['getUVByXY'](_0x12b839[0x0],_0x12b839[0x1]);return _0x112679;}['isInExtent'](_0x1e49eb,_0x6e7e77){function _0x2a3dc6(_0x198612,_0x1ba640){return _0xd1a6c3(_0x198612,_0x1ba640- -0x96);}function _0x7c3388(_0xadc842,_0x4efbaa){return _0x5de27f(_0xadc842,_0x4efbaa-0x191);}return _0x1e49eb>=this['xmin']&&_0x1e49eb<=this[_0x2a3dc6(-0xec,-0x71)]&&_0x6e7e77>=this[_0x2a3dc6(-0xa9,-0x107)]&&_0x6e7e77<=this['ymax']?!![]:![];}[_0xd1a6c3(0x5,-0x70)](){function _0x5508c6(_0x66a922,_0x5e7bf7){return _0xd1a6c3(_0x5e7bf7,_0x66a922-0x515);}const _0x3d1b3b=fRandomByfloat(this['xmin'],this[_0x5b0ad8(0x143,0x113)]);function _0x5b0ad8(_0x232dbf,_0x464e75){return _0x5de27f(_0x232dbf,_0x464e75-0x28c);}const _0x3c13c7=fRandomByfloat(this[_0x5508c6(0x4a4,0x439)],this['ymax']),_0x1fb7c2={};return _0x1fb7c2['lat']=_0x3c13c7,_0x1fb7c2['lng']=_0x3d1b3b,_0x1fb7c2;}['getParticles'](){let _0x432baa,_0x20eadc,_0x41f4c1;for(let _0x3fc0bc=0x0,_0x704d7f=this[_0x5b1b87(0x61,0x29)]['length'];_0x3fc0bc<_0x704d7f;_0x3fc0bc++){let _0x2f5802=this['particles'][_0x3fc0bc];_0x2f5802['age']<=0x0&&(_0x2f5802=this['_randomParticle'](_0x2f5802));if(_0x2f5802[_0x5b1b87(-0x3f,-0xc4)]>0x0){const _0x80b6ae=_0x2f5802[_0x3e7757(0x2e,0xad)],_0x405106=_0x2f5802['tlat'];_0x41f4c1=this[_0x3e7757(0x52,0x42)](_0x80b6ae,_0x405106),_0x41f4c1?(_0x432baa=_0x80b6ae+this[_0x5b1b87(-0x39,-0x30)][0x0]*_0x41f4c1[0x0],_0x20eadc=_0x405106+this['_calc_speedRate'][0x1]*_0x41f4c1[0x1],_0x2f5802['lng']=_0x80b6ae,_0x2f5802['lat']=_0x405106,_0x2f5802['tlng']=_0x432baa,_0x2f5802[_0x3e7757(0xc1,0xe8)]=_0x20eadc,_0x2f5802['speed']=_0x41f4c1[0x2],_0x2f5802['age']--):_0x2f5802[_0x3e7757(0x68,0x7f)]=0x0;}}function _0x3e7757(_0x239a76,_0x4a24e2){return _0xd1a6c3(_0x4a24e2,_0x239a76-0x94);}function _0x5b1b87(_0x1f08be,_0xa66e5c){return _0x5de27f(_0xa66e5c,_0x1f08be-0x18b);}return this[_0x3e7757(0x108,0xea)];}['_randomParticle'](_0x2c38e1){let _0x255da8,_0x4cdd35;function _0x311ef1(_0x3d527f,_0x3c3122){return _0xd1a6c3(_0x3c3122,_0x3d527f- -0x61);}for(let _0x5b0ef9=0x0;_0x5b0ef9<0x1e;_0x5b0ef9++){_0x255da8=this[_0xf0aca2(-0x288,-0x297)](),_0x4cdd35=this[_0xf0aca2(-0x25a,-0x269)](_0x255da8['lng'],_0x255da8[_0x311ef1(0x7,-0x34)]);if(_0x4cdd35&&_0x4cdd35[0x2]>0x0)break;}if(!_0x4cdd35)return _0x2c38e1;const _0x118841=_0x255da8[_0x311ef1(-0xbc,-0x72)]+this['_calc_speedRate'][0x0]*_0x4cdd35[0x0],_0x45f885=_0x255da8[_0xf0aca2(-0x1b0,-0x21d)]+this['_calc_speedRate'][0x1]*_0x4cdd35[0x1];_0x2c38e1['lng']=_0x255da8[_0x311ef1(-0xbc,-0xcf)],_0x2c38e1[_0xf0aca2(-0x1b0,-0x171)]=_0x255da8['lat'],_0x2c38e1['tlng']=_0x118841,_0x2c38e1['tlat']=_0x45f885,_0x2c38e1[_0xf0aca2(-0x244,-0x1d2)]=Math['round'](0xa+Math[_0x311ef1(-0x29,-0xa3)]()*this['maxAge']),_0x2c38e1['speed']=_0x4cdd35[0x2];function _0xf0aca2(_0x5410a1,_0x1ccef9){return _0xd1a6c3(_0x1ccef9,_0x5410a1- -0x218);}return _0x2c38e1;}['destroy'](){for(const _0x489345 in this){delete this[_0x489345];}}}function fRandomByfloat(_0x40d504,_0x337b1a){return _0x40d504+Math['random']()*(_0x337b1a-_0x40d504);}const Cesium=mars3d__namespace[_0x5de27f(-0x232,-0x1eb)],BaseLayer=mars3d__namespace[_0x5de27f(-0x19a,-0x185)][_0x5de27f(-0x1f7,-0x175)];class CanvasWindLayer extends BaseLayer{constructor(_0x6b20f1={}){function _0x1269b8(_0x430455,_0xb5a526){return _0xd1a6c3(_0x430455,_0xb5a526-0x4a2);}super(_0x6b20f1),this[_0x1269b8(0x4a1,0x426)](_0x6b20f1),this['canvas']=null;function _0x4bdd10(_0x5a8230,_0x2252a4){return _0xd1a6c3(_0x5a8230,_0x2252a4-0x491);}_0x6b20f1[_0x1269b8(0x4d7,0x52c)]&&_0x6b20f1['steps']&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x6b20f1));}[_0xd1a6c3(-0x5a,-0x7c)](_0x3bd81e,_0x1dfea4){this['frameTime']=0x3e8/(_0x3bd81e[_0x4e4652(0x312,0x299)]||0xa),this['_pointerEvents']=this[_0x12f5be(0x18e,0x12c)]['pointerEvents']??![],this['color']=_0x3bd81e[_0x12f5be(0x117,0x150)]||'#ffffff',this['lineWidth']=_0x3bd81e[_0x4e4652(0x25d,0x244)]||0x1,this['fixedHeight']=_0x3bd81e[_0x4e4652(0x1fe,0x20b)]??0x0,this[_0x4e4652(0x200,0x22a)]=_0x3bd81e[_0x12f5be(0x66,0xe4)]??![];function _0x4e4652(_0x193eab,_0x294ddb){return _0x5de27f(_0x193eab,_0x294ddb-0x3d0);}function _0x12f5be(_0x4e3d7f,_0x4a41d4){return _0x5de27f(_0x4e3d7f,_0x4a41d4-0x28a);}this['windField']&&this['windField']['setOptions'](_0x3bd81e);}get['layer'](){return this['canvas'];}get['canvasWidth'](){function _0x31d32d(_0x54e001,_0xcbd2a4){return _0xd1a6c3(_0x54e001,_0xcbd2a4- -0x1a8);}function _0x4af70d(_0x4fdce1,_0x101988){return _0x5de27f(_0x101988,_0x4fdce1-0x4d9);}return this[_0x4af70d(0x2ef,0x2d5)][_0x4af70d(0x2f5,0x376)]['canvas']['clientWidth'];}get['canvasHeight'](){function _0x67026b(_0x29efb5,_0x6ebf64){return _0x5de27f(_0x29efb5,_0x6ebf64-0x4e);}return this['_map']['scene'][_0x67026b(-0x15f,-0x17a)]['clientHeight'];}get['pointerEvents'](){function _0x264943(_0x4b2279,_0x5553c3){return _0x5de27f(_0x5553c3,_0x4b2279-0x90);}return this[_0x264943(-0x155,-0x12c)];}set['pointerEvents'](_0x38954d){function _0xfad4f6(_0x22a57d,_0x3412fa){return _0xd1a6c3(_0x22a57d,_0x3412fa-0x364);}function _0x3a1951(_0x3726ba,_0x702504){return _0x5de27f(_0x3726ba,_0x702504-0x702);}this[_0x3a1951(0x4a5,0x51d)]=_0x38954d;if(!this[_0x3a1951(0x54b,0x53a)])return;_0x38954d?this[_0x3a1951(0x53a,0x53a)]['style']['pointer-events']=_0xfad4f6(0x311,0x349):this['canvas']['style']['pointer-events']=_0x3a1951(0x638,0x5f0);}get['particlesNumber'](){function _0x2f5fa6(_0x1ad2e7,_0x42cef6){return _0xd1a6c3(_0x42cef6,_0x1ad2e7- -0x1bc);}function _0x23a3cc(_0x44d77e,_0x153b9f){return _0x5de27f(_0x44d77e,_0x153b9f-0x85);}return this[_0x23a3cc(-0x8f,-0xd9)][_0x2f5fa6(-0x1d2,-0x186)];}set[_0x5de27f(-0x154,-0x1b4)](_0x22340a){this['options'][_0xf9582f(0x3d4,0x3af)]=_0x22340a;function _0xf9582f(_0xcd015c,_0x3f229a){return _0x5de27f(_0x3f229a,_0xcd015c-0x588);}clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x26d1b1(_0x44e861,_0xfa00b2){return _0xd1a6c3(_0x44e861,_0xfa00b2-0x3c2);}return this['options'][_0x26d1b1(0x3c4,0x41b)];}set['speedRate'](_0x54e661){this[_0x1a15a9(0x3d5,0x3c8)][_0x3642ec(-0x50,-0x2a)]=_0x54e661;function _0x1a15a9(_0x3a63b0,_0x4408a8){return _0xd1a6c3(_0x3a63b0,_0x4408a8-0x388);}function _0x3642ec(_0x55b28c,_0x6ffb3e){return _0x5de27f(_0x55b28c,_0x6ffb3e-0x11b);}this[_0x1a15a9(0x3dd,0x382)]&&(this[_0x3642ec(-0xa6,-0x89)]['speedRate']=_0x54e661);}get['maxAge'](){function _0x27394a(_0x494e11,_0x4d3f5d){return _0x5de27f(_0x494e11,_0x4d3f5d-0x659);}return this[_0x27394a(0x4a2,0x4fb)]['maxAge'];}set['maxAge'](_0x3635de){this['options']['maxAge']=_0x3635de;function _0x2a5a5c(_0x151e49,_0x39ceee){return _0xd1a6c3(_0x151e49,_0x39ceee-0x49e);}function _0x5d83f9(_0x1512b1,_0x2e9c0d){return _0xd1a6c3(_0x2e9c0d,_0x1512b1-0x52a);}this[_0x5d83f9(0x524,0x581)]&&(this[_0x5d83f9(0x524,0x532)]['maxAge']=_0x3635de);}get['data'](){function _0x8bf699(_0x37c4aa,_0x44f897){return _0xd1a6c3(_0x44f897,_0x37c4aa- -0x252);}return this[_0x8bf699(-0x26b,-0x1ea)];}set[_0xd1a6c3(0x12,0x18)](_0x2aa82f){this['setData'](_0x2aa82f);}get['rectangle'](){let _0x2284d0=this['windData'][_0x23de99(0x55c,0x54a)],_0xba4915=this[_0x4a3d9d(-0x146,-0x1be)][_0x4a3d9d(-0x1cb,-0x180)];function _0x23de99(_0x3c0cb7,_0x591809){return _0xd1a6c3(_0x591809,_0x3c0cb7-0x515);}let _0x197e13=this['windData']['ymin'],_0x55e6b6=this[_0x23de99(0x4fc,0x553)][_0x4a3d9d(-0x10b,-0x174)];_0xba4915>=0x167&&_0x2284d0===0x0&&(_0x2284d0=-0xb4,_0xba4915=0xb4);function _0x4a3d9d(_0x1e7c3c,_0x517e32){return _0x5de27f(_0x1e7c3c,_0x517e32- -0x7);}return _0x2284d0=Math[_0x4a3d9d(-0x198,-0x136)](_0x2284d0,-0xb4),_0xba4915=Math['min'](_0xba4915,0xb4),_0x197e13=Math['max'](_0x197e13,-0x5a),_0x55e6b6=Math[_0x4a3d9d(-0x14a,-0x146)](_0x55e6b6,0x5a),Cesium[_0x4a3d9d(-0x171,-0x1b1)][_0x23de99(0x54a,0x542)](_0x2284d0,_0x197e13,_0xba4915,_0x55e6b6);}[_0x5de27f(-0x1fd,-0x213)](_0x483d9f){function _0x321287(_0xcb32e,_0x549f30){return _0xd1a6c3(_0x549f30,_0xcb32e-0x105);}_0x483d9f?this[_0x321287(0x10a,0x139)]():(this['windData']&&(this['options']['data']=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x1c3545(_0x2174b7,_0x4906ca){return _0x5de27f(_0x2174b7,_0x4906ca-0x687);}function _0xa67ade(_0x5a24fa,_0x5512a8){return _0xd1a6c3(_0x5512a8,_0x5a24fa-0x4fd);}this['options'][_0xa67ade(0x4fa,0x51e)]?this[_0xa67ade(0x494,0x48d)]():this[_0xa67ade(0x4f7,0x573)]=new CanvasWindField(this['options']);}[_0xd1a6c3(-0x2b,0x5)](){function _0x106ae4(_0x509a90,_0x317edb){return _0x5de27f(_0x317edb,_0x509a90-0x143);}this[_0x106ae4(-0x85,-0x8b)]=this['_createCanvas']();const _0x11ab29={};function _0x58570d(_0x1fc980,_0x250ae0){return _0x5de27f(_0x250ae0,_0x1fc980-0x5a3);}_0x11ab29['willReadFrequently']=!![],this['canvasContext']=this[_0x58570d(0x3db,0x35b)][_0x58570d(0x3a4,0x41b)]('2d',_0x11ab29),this[_0x58570d(0x386,0x30c)](),this[_0x58570d(0x445,0x3d8)]['data']&&this['setData'](this['options'][_0x58570d(0x41d,0x41c)]);}[_0x5de27f(-0x135,-0x19a)](){function _0x432ba6(_0xea7883,_0x536177){return _0x5de27f(_0xea7883,_0x536177-0x640);}function _0x32de92(_0x347752,_0x1ba9ba){return _0xd1a6c3(_0x347752,_0x1ba9ba-0x140);}this['clear'](),this['unbindEvent'](),this[_0x432ba6(0x473,0x478)]&&(this['_map']['container']['removeChild'](this['canvas']),delete this[_0x432ba6(0x435,0x478)]);}[_0xd1a6c3(0x5,0x14)](){const _0x2e0073=mars3d__namespace[_0x43bfbe(-0x29a,-0x305)]['create']('canvas',_0x43bfbe(-0x1b6,-0x167),this['_map']['container']);_0x2e0073['style']['position']=_0x43bfbe(-0x1b9,-0x1e6),_0x2e0073[_0x43bfbe(-0x22c,-0x21f)]['top']='0px';function _0x1e9c2c(_0x5e87c1,_0x15043b){return _0x5de27f(_0x5e87c1,_0x15043b-0x3dc);}_0x2e0073[_0x43bfbe(-0x22c,-0x2b2)]['left']=_0x1e9c2c(0x254,0x22f),_0x2e0073['style'][_0x1e9c2c(0x247,0x2a3)]=this['_map'][_0x43bfbe(-0x287,-0x278)][_0x1e9c2c(0x1d9,0x214)][_0x1e9c2c(0x1ed,0x248)]+'px';function _0x43bfbe(_0x1c4dd3,_0x4ac4d9){return _0xd1a6c3(_0x4ac4d9,_0x1c4dd3- -0x241);}return _0x2e0073[_0x1e9c2c(0x1f4,0x253)]['height']=this['_map'][_0x43bfbe(-0x287,-0x2b9)]['canvas']['clientHeight']+'px',_0x2e0073['style']['pointerEvents']=this['_pointerEvents']?_0x43bfbe(-0x27b,-0x24f):'none',_0x2e0073['style']['zIndex']=this['options'][_0x1e9c2c(0x1c4,0x234)]??0x9,_0x2e0073[_0x1e9c2c(0x2c9,0x2a3)]=this[_0x43bfbe(-0x28d,-0x263)][_0x1e9c2c(0x1d9,0x1f8)][_0x43bfbe(-0x26b,-0x2b5)]['clientWidth'],_0x2e0073[_0x43bfbe(-0x1de,-0x1cb)]=this[_0x43bfbe(-0x28d,-0x283)]['scene'][_0x43bfbe(-0x26b,-0x203)][_0x43bfbe(-0x286,-0x310)],_0x2e0073;}[_0xd1a6c3(0x33,-0x20)](){function _0x31c19f(_0x27d6aa,_0x453f40){return _0xd1a6c3(_0x27d6aa,_0x453f40-0x3d4);}function _0x458a23(_0x35b961,_0x1bb875){return _0x5de27f(_0x1bb875,_0x35b961-0x55b);}this['canvas']&&(this['canvas'][_0x31c19f(0x3f8,0x3e9)][_0x458a23(0x422,0x41e)]=this[_0x31c19f(0x39d,0x388)][_0x458a23(0x377,0x3b7)]['canvas']['clientWidth']+'px',this[_0x458a23(0x393,0x387)][_0x31c19f(0x3c4,0x3e9)]['height']=this[_0x458a23(0x371,0x2f4)]['scene'][_0x458a23(0x393,0x40c)][_0x31c19f(0x3ca,0x38f)]+'px',this['canvas'][_0x458a23(0x422,0x3c9)]=this[_0x31c19f(0x311,0x388)]['scene'][_0x31c19f(0x346,0x3aa)][_0x31c19f(0x3a7,0x3de)],this['canvas']['height']=this['_map']['scene']['canvas']['clientHeight']);}[_0xd1a6c3(-0x41,-0x7f)](){const _0x4b2865=this;let _0xa915c0=Date[_0x214bef(0x355,0x3d4)]();(function _0x3d7bb4(){if(_0x4b2865['isDestroy'])return;_0x4b2865[_0x393467(-0x4,0x60)]=window['requestAnimationFrame'](_0x3d7bb4);function _0x53e323(_0x5b11f3,_0x44c95c){return _0x214bef(_0x44c95c,_0x5b11f3- -0x3dc);}function _0x393467(_0x409094,_0x5bb569){return _0x214bef(_0x409094,_0x5bb569- -0x3c2);}if(_0x4b2865[_0x393467(0x26,0x30)]&&_0x4b2865['windField']){const _0xae59d2=Date['now'](),_0x573e89=_0xae59d2-_0xa915c0;_0x573e89>_0x4b2865[_0x393467(-0x15,-0x85)]&&(_0xa915c0=_0xae59d2-_0x573e89%_0x4b2865['frameTime'],_0x4b2865[_0x53e323(0x9,0x8f)]());}}(),window['addEventListener']('resize',this[_0x214bef(0x35e,0x371)]['bind'](this),![]));function _0x3f15ec(_0x469a14,_0x33713d){return _0x5de27f(_0x469a14,_0x33713d-0x6a8);}this['mouse_down']=![];function _0x214bef(_0x1012da,_0x125d20){return _0x5de27f(_0x1012da,_0x125d20-0x52f);}this['mouse_move']=![],this['options'][_0x214bef(0x312,0x314)]&&(this[_0x214bef(0x33d,0x345)]['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace[_0x3f15ec(0x485,0x4bc)][_0x214bef(0x446,0x3ec)],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace[_0x3f15ec(0x493,0x4bc)]['mouseUp'],this[_0x3f15ec(0x477,0x4e7)],this));}[_0xd1a6c3(0x34,-0x38)](){window['cancelAnimationFrame'](this['_animateFrame']),delete this[_0x19d489(0x373,0x305)];function _0x50164b(_0x454352,_0x3c98b6){return _0x5de27f(_0x3c98b6,_0x454352-0x55);}window['removeEventListener']('resize',this['resize']);function _0x19d489(_0x1ac768,_0x5233a9){return _0xd1a6c3(_0x1ac768,_0x5233a9-0x274);}this['options'][_0x50164b(-0x1c6,-0x141)]&&(this['_map'][_0x19d489(0x23c,0x209)](mars3d__namespace[_0x19d489(0x2a2,0x226)]['wheel'],this['_onMapWhellEvent'],this),this[_0x19d489(0x255,0x228)]['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this[_0x19d489(0x265,0x228)]['off'](mars3d__namespace[_0x19d489(0x211,0x226)]['mouseUp'],this[_0x50164b(-0x16c,-0x131)],this),this['_map'][_0x19d489(0x233,0x209)](mars3d__namespace[_0x19d489(0x291,0x226)]['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x303e67){clearTimeout(this['refreshTimer']);if(!this['show']||!this['canvas'])return;function _0x465d86(_0x502c84,_0x5a4317){return _0x5de27f(_0x5a4317,_0x502c84-0x2bd);}this[_0x465d86(0xf5,0x149)]['style'][_0x4b5c0c(0x43c,0x4b1)]='hidden';function _0x4b5c0c(_0x55172f,_0x4953d3){return _0xd1a6c3(_0x55172f,_0x4953d3-0x4c1);}this['refreshTimer']=setTimeout(()=>{if(!this[_0x355f85(-0xed,-0x12c)])return;function _0x355f85(_0x5aa9a0,_0x1b266d){return _0x4b5c0c(_0x5aa9a0,_0x1b266d- -0x64e);}function _0x45af7e(_0x235a89,_0x12f6e3){return _0x465d86(_0x235a89- -0x35d,_0x12f6e3);}this[_0x45af7e(-0x2bf,-0x2f0)](),this['canvas']['style']['visibility']='visible';},0xc8);}[_0x5de27f(-0x161,-0x155)](_0x46831f){this['mouse_down']=!![];function _0x2318aa(_0x2db197,_0x5d666d){return _0xd1a6c3(_0x5d666d,_0x2db197- -0x14d);}this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x10e7ee(_0x584585,_0x36ea62){return _0xd1a6c3(_0x36ea62,_0x584585-0x2ca);}this[_0x10e7ee(0x27e,0x27f)]['on'](mars3d__namespace[_0x2318aa(-0x19b,-0x1f0)]['mouseMove'],this[_0x10e7ee(0x337,0x372)],this);}['_onMouseMoveEvent'](_0x254f7b){function _0x33db07(_0x4eaf05,_0x5d33eb){return _0x5de27f(_0x4eaf05,_0x5d33eb-0x1a3);}function _0x550b54(_0x3779ff,_0xd58ae4){return _0xd1a6c3(_0xd58ae4,_0x3779ff-0x3b6);}if(!this[_0x550b54(0x417,0x48f)]||!this['canvas'])return;this['mouse_down']&&(this['canvas']['style'][_0x550b54(0x3a6,0x3da)]=_0x33db07(-0x86,-0x17),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0xa27251){if(!this['show']||!this['canvas'])return;function _0x36714c(_0x1dfd9f,_0x2ae801){return _0xd1a6c3(_0x1dfd9f,_0x2ae801-0x1c7);}this[_0x36714c(0x17e,0x17b)][_0x36714c(0xf0,0x15c)](mars3d__namespace['EventType'][_0x36714c(0x192,0x169)],this['_onMouseMoveEvent'],this);function _0x34c051(_0x428e08,_0x478a29){return _0xd1a6c3(_0x478a29,_0x428e08-0x42f);}this['mouse_down']&&this['mouse_move']&&this[_0x34c051(0x3ae,0x3c5)](),this['canvas'][_0x34c051(0x444,0x3d3)][_0x36714c(0x143,0x1b7)]='visible',this['mouse_down']=![],this[_0x34c051(0x3fa,0x40e)]=![];}['setData'](_0xda5650){function _0x313ea5(_0x3e4b21,_0x5f56b7){return _0x5de27f(_0x5f56b7,_0x3e4b21-0x1f2);}this['clear'](),this['windData']=_0xda5650,this[_0x1e95ac(0x41d,0x3ec)][_0x1e95ac(0x480,0x481)](_0xda5650);function _0x1e95ac(_0x8636c4,_0x529bbb){return _0x5de27f(_0x8636c4,_0x529bbb-0x590);}this[_0x1e95ac(0x3b1,0x371)]();}[_0xd1a6c3(-0x3a,-0x81)](){if(!this['show'])return;function _0x33c283(_0x1d2fe3,_0x26ffb4){return _0xd1a6c3(_0x26ffb4,_0x1d2fe3-0x34d);}this['windField']['setOptions'](this[_0x33c283(0x38d,0x395)]),this['update']();}[_0xd1a6c3(0xb7,0x54)](){if(this[_0x50b3f9(0xb1,0x72)])return;this[_0x4d1c3b(0x2e5,0x35f)]=!![];function _0x50b3f9(_0xa0df74,_0x22596c){return _0xd1a6c3(_0x22596c,_0xa0df74-0x12b);}function _0x4d1c3b(_0x47b907,_0xe3051f){return _0x5de27f(_0x47b907,_0xe3051f-0x577);}if(this['worker'])this[_0x4d1c3b(0x3cc,0x3d3)]['update']();else{const _0x13bfa9=this[_0x4d1c3b(0x3f6,0x3d3)]['getParticles']();this[_0x50b3f9(0x111,0x147)](_0x13bfa9);}this['_updateIng']=![];}[_0x5de27f(-0x1e2,-0x1b8)](_0x1c5db3){this['_canvasParticles']=_0x1c5db3,this['canvasContext'][_0x206ea5(0xe8,0xe3)]=_0x206ea5(0xcd,0x146),this['canvasContext'][_0x206ea5(0x18c,0x10f)](0x0,0x0,this[_0x5197f5(-0x197,-0x11d)],this['canvasHeight']),this['canvasContext']['globalCompositeOperation']='lighter',this['canvasContext']['globalAlpha']=0.9;function _0x5197f5(_0x50ebd6,_0x3e7d8a){return _0xd1a6c3(_0x3e7d8a,_0x50ebd6- -0x1e3);}const _0x2379f4=this['_map'][_0x206ea5(0xe3,0x105)]['mode']!==Cesium['SceneMode']['SCENE3D'],_0x5c8b71=this[_0x5197f5(-0x197,-0x1de)]*0.25;function _0x206ea5(_0x4b46d1,_0x18fe25){return _0xd1a6c3(_0x4b46d1,_0x18fe25-0x14b);}if(this['_colorRamp'])for(let _0x1a4f33=0x0,_0x3bb216=_0x1c5db3['length'];_0x1a4f33<_0x3bb216;_0x1a4f33++){const _0x2b19b1=_0x1c5db3[_0x1a4f33],_0x2cc78b=this['_tomap'](_0x2b19b1,_0x2b19b1['lng'],_0x2b19b1[_0x5197f5(-0x17b,-0x131)],_0x2b19b1['alt']),_0x2cdd4e=this[_0x5197f5(-0x25e,-0x285)](_0x2b19b1,_0x2b19b1[_0x5197f5(-0x249,-0x256)],_0x2b19b1[_0x5197f5(-0x1b6,-0x22b)],_0x2b19b1[_0x206ea5(0x12f,0x17e)]);if(!_0x2cc78b||!_0x2cdd4e)continue;if(_0x2379f4&&Math[_0x5197f5(-0x16b,-0x1ca)](_0x2cc78b[0x0]-_0x2cdd4e[0x0])>=_0x5c8b71)continue;this['canvasContext'][_0x206ea5(0xfc,0x177)](),this[_0x5197f5(-0x1e1,-0x225)]['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x206ea5(0x1f9,0x176)][_0x206ea5(0xe2,0xcd)](_0x2b19b1[_0x206ea5(0x169,0x154)]),this['canvasContext'][_0x5197f5(-0x1a2,-0x1af)](_0x2cc78b[0x0],_0x2cc78b[0x1]),this['canvasContext']['lineTo'](_0x2cdd4e[0x0],_0x2cdd4e[0x1]),this['canvasContext'][_0x5197f5(-0x198,-0x141)]();}else{this[_0x5197f5(-0x1e1,-0x22f)][_0x5197f5(-0x1b7,-0x13a)](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x206ea5(0x104,0x14d)][_0x5197f5(-0x220,-0x1c2)]=this[_0x206ea5(0x16d,0x1af)];for(let _0x1fe574=0x0,_0xaa11a1=_0x1c5db3['length'];_0x1fe574<_0xaa11a1;_0x1fe574++){const _0x44d2ee=_0x1c5db3[_0x1fe574],_0xea405b=this['_tomap'](_0x44d2ee,_0x44d2ee['lng'],_0x44d2ee['lat'],_0x44d2ee['alt']),_0x4230fc=this['_tomap'](_0x44d2ee,_0x44d2ee['tlng'],_0x44d2ee[_0x5197f5(-0x1b6,-0x160)],_0x44d2ee[_0x206ea5(0x1af,0x17e)]);if(!_0xea405b||!_0x4230fc)continue;if(_0x2379f4&&Math['abs'](_0xea405b[0x0]-_0x4230fc[0x0])>=_0x5c8b71)continue;this['canvasContext']['moveTo'](_0xea405b[0x0],_0xea405b[0x1]),this['canvasContext']['lineTo'](_0x4230fc[0x0],_0x4230fc[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x36e100,_0x395cb8,_0x1f1330,_0x21d285){const _0x39d776=Cesium[_0x311abb(0x3a5,0x322)]['fromDegrees'](_0x395cb8,_0x1f1330,_0x21d285??this['fixedHeight']);function _0xab2561(_0x40968f,_0x175cdd){return _0x5de27f(_0x175cdd,_0x40968f-0x591);}function _0x311abb(_0x3bcdb2,_0x2323bb){return _0x5de27f(_0x2323bb,_0x3bcdb2-0x52c);}const _0x42e877=this[_0xab2561(0x3a7,0x35f)][_0x311abb(0x348,0x3b0)];if(_0x42e877['mode']===Cesium[_0x311abb(0x370,0x36e)]['SCENE3D']){const _0x36a2a1=new Cesium['EllipsoidalOccluder'](_0x42e877[_0x311abb(0x34e,0x39f)]['ellipsoid'],_0x42e877['camera'][_0x311abb(0x399,0x3d7)]),_0x239e68=_0x36a2a1['isPointVisible'](_0x39d776);if(!_0x239e68)return _0x36e100['age']=0x0,null;}const _0x4c0a33=mars3d__namespace['PointTrans'][_0x311abb(0x3f4,0x47a)](this['_map']['scene'],_0x39d776);return _0x4c0a33?[_0x4c0a33['x'],_0x4c0a33['y']]:null;}[_0xd1a6c3(0x46,-0x12)](){this['windField']['clear']();function _0x2084c1(_0x4c32ec,_0x4d1f7d){return _0x5de27f(_0x4d1f7d,_0x4c32ec-0x4c6);}delete this[_0x2084c1(0x30f,0x288)];}[_0x5de27f(-0x1e2,-0x207)](){function _0x47aa9b(_0x14f657,_0x8629b8){return _0xd1a6c3(_0x8629b8,_0x14f657- -0x18e);}this['worker']=new Worker(this['options']['worker']),this['worker'][_0x47aa9b(-0x11d,-0xe1)]=_0x486622=>{function _0x54bfe0(_0x1c3327,_0x20cefe){return _0x47aa9b(_0x20cefe-0x2bd,_0x1c3327);}this[_0x54bfe0(0xdb,0x115)](_0x486622['data']['particles']),this['_updateIng2']=![];};function _0x4b4230(_0x24bfc4,_0x178463){return _0x5de27f(_0x24bfc4,_0x178463-0x3fe);}this['windField']={'init':_0x2f35ce=>{const _0x2abd5e={};function _0x19d249(_0x535f70,_0x3b3c61){return _0x47aa9b(_0x3b3c61-0x244,_0x535f70);}_0x2abd5e['type']=_0x19d249(0x7a,0xfa),_0x2abd5e['options']=_0x2f35ce,this['worker']['postMessage'](_0x2abd5e);},'setOptions':_0x11360a=>{const _0x205868={};_0x205868[_0x492431(-0x7e,-0x37)]='setOptions';function _0x492431(_0x380389,_0x947ba8){return _0x47aa9b(_0x380389-0x183,_0x947ba8);}_0x205868['options']=_0x11360a,this['worker']['postMessage'](_0x205868);},'setDate':_0x179205=>{const _0x4d40f4={};function _0x502fdc(_0x3e9059,_0x5d63a4){return _0x47aa9b(_0x3e9059-0x13d,_0x5d63a4);}function _0x7c72f2(_0x49972f,_0x34fb2f){return _0x47aa9b(_0x49972f-0x5ca,_0x34fb2f);}_0x4d40f4[_0x502fdc(-0xc4,-0xe5)]='setDate',_0x4d40f4['data']=_0x179205,this['worker'][_0x7c72f2(0x43b,0x3d3)](_0x4d40f4);},'update':()=>{function _0xa4aca(_0x2321aa,_0x2e2899){return _0x47aa9b(_0x2321aa-0xfc,_0x2e2899);}if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0x51425a={};function _0x1d20c0(_0x4262b8,_0x37b49a){return _0x47aa9b(_0x4262b8- -0xb1,_0x37b49a);}_0x51425a['type']=_0x1d20c0(-0x1eb,-0x1cf),this[_0xa4aca(-0x95,-0xe3)]['postMessage'](_0x51425a);},'clear':()=>{const _0x2b21d5={};_0x2b21d5[_0x5d9394(0x344,0x2c1)]=_0x57d677(0x38c,0x3d8);function _0x5d9394(_0x8953d6,_0x566dbe){return _0x47aa9b(_0x8953d6-0x545,_0x566dbe);}function _0x57d677(_0xd0e733,_0x5441f1){return _0x47aa9b(_0x5441f1-0x578,_0xd0e733);}this[_0x57d677(0x446,0x3e7)]['postMessage'](_0x2b21d5);}},this[_0x47aa9b(-0x194,-0x218)]['init'](this[_0x4b4230(0x25e,0x2a0)]);}}mars3d__namespace[_0xd1a6c3(-0x48,-0x14)][_0x5de27f(-0xad,-0x110)]('canvasWind',CanvasWindLayer),mars3d__namespace[_0xd1a6c3(-0x3c,0x19)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports[_0x5de27f(-0x207,-0x198)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x3a429c={};_0x3a429c[_0x5de27f(-0x13e,-0x164)]=!![],Object['defineProperty'](exports,'__esModule',_0x3a429c);
}));
