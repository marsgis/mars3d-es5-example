/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.9
 * 编译日期：2024-12-08 20:27
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x559bea,_0x12c0f9){const _0x359544=_0x559bea();function _0x383e9a(_0x12dcaa,_0x166c5c){return _0x3a09(_0x12dcaa-0x143,_0x166c5c);}function _0xee2e0b(_0x499a8a,_0x2f52d5){return _0x3a09(_0x2f52d5- -0xf1,_0x499a8a);}while(!![]){try{const _0x34992d=parseInt(_0xee2e0b(-0x98,-0x39))/0x1*(-parseInt(_0x383e9a(0x2fa,0x2d0))/0x2)+-parseInt(_0xee2e0b(0xc,0x5d))/0x3+-parseInt(_0x383e9a(0x1f8,0x27e))/0x4+-parseInt(_0x383e9a(0x2f6,0x364))/0x5+-parseInt(_0x383e9a(0x225,0x291))/0x6+-parseInt(_0xee2e0b(-0x7e,-0x13))/0x7*(parseInt(_0xee2e0b(0xd1,0xc8))/0x8)+-parseInt(_0xee2e0b(0x55,-0xa))/0x9*(-parseInt(_0x383e9a(0x2cb,0x2ea))/0xa);if(_0x34992d===_0x12c0f9)break;else _0x359544['push'](_0x359544['shift']());}catch(_0xae92bc){_0x359544['push'](_0x359544['shift']());}}}(_0x1c36,0x27471));function _interopNamespace(_0x3b5558){if(_0x3b5558&&_0x3b5558[_0x5c6a1f(0xbd,0x85)])return _0x3b5558;var _0x2c1356=Object[_0x91e687(0x36a,0x30c)](null);function _0x91e687(_0x455f5b,_0x274071){return _0x3a09(_0x455f5b-0x25d,_0x274071);}_0x3b5558&&Object['keys'](_0x3b5558)['forEach'](function(_0x65b3c9){function _0x2e4566(_0x521077,_0xe10189){return _0x91e687(_0x521077-0x18a,_0xe10189);}function _0x511840(_0x20a544,_0x18cbb0){return _0x91e687(_0x20a544-0xaf,_0x18cbb0);}if(_0x65b3c9!==_0x2e4566(0x5ad,0x5f8)){var _0x51f0f1=Object['getOwnPropertyDescriptor'](_0x3b5558,_0x65b3c9);Object[_0x511840(0x468,0x4ae)](_0x2c1356,_0x65b3c9,_0x51f0f1[_0x2e4566(0x579,0x5fd)]?_0x51f0f1:{'enumerable':!![],'get':function(){return _0x3b5558[_0x65b3c9];}});}});_0x2c1356[_0x91e687(0x423,0x39d)]=_0x3b5558;function _0x5c6a1f(_0x1f8fa3,_0x2e527f){return _0x3a09(_0x2e527f- -0x11c,_0x1f8fa3);}return _0x2c1356;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0xf0ab7,_0x4d7d46){const _0x463bbf=_0xf0ab7*Math['cos'](Cesium$2['Math']['toRadians'](_0x4d7d46));return _0x463bbf;}function getV(_0x3995e1,_0x701d5e){const _0x28cd36=_0x3995e1*Math['sin'](Cesium$2['Math']['toRadians'](_0x701d5e));return _0x28cd36;}function getSpeed(_0x7ac753,_0x2c2714){function _0x36ed0d(_0x563f90,_0x2c4f77){return _0x3a09(_0x2c4f77-0x314,_0x563f90);}const _0x2e678e=Math['sqrt'](Math[_0x36ed0d(0x4e2,0x48c)](_0x7ac753,0x2)+Math[_0x2e6a91(0x136,0x11d)](_0x2c2714,0x2));function _0x2e6a91(_0x216e0b,_0x52103c){return _0x3a09(_0x52103c- -0x5b,_0x216e0b);}return _0x2e678e;}function getDirection(_0x4440f8,_0x3f6f87){let _0x8b572c=Cesium$2['Math'][_0x42a477(-0x1f7,-0x172)](Math['atan2'](_0x3f6f87,_0x4440f8));function _0x42a477(_0x1d8d1d,_0xacd23d){return _0x3a09(_0xacd23d- -0x31f,_0x1d8d1d);}return _0x8b572c+=_0x8b572c<0x0?0x168:0x0,_0x8b572c;}const _0x1caa7d={};_0x1caa7d['__proto__']=null,_0x1caa7d['getU']=getU,_0x1caa7d['getV']=getV,_0x1caa7d[_0x3df816(0x267,0x2a6)]=getSpeed,_0x1caa7d['getDirection']=getDirection;var WindUtil=_0x1caa7d,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a';function _0x3df816(_0x323e6c,_0x1f4d96){return _0x3a09(_0x1f4d96-0x101,_0x323e6c);}var calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x3c9617(0x4ed,0x49c)](){function _0x4230a7(_0x11dfaa,_0x1fd1f1){return _0x3c9617(_0x1fd1f1- -0x4f6,_0x11dfaa);}const _0x1b4993={};return _0x1b4993[_0x4230a7(-0x6b,-0x74)]=[calculateSpeedShader],new ShaderSource$1(_0x1b4993);}static['getUpdatePositionShader'](){const _0x39e4d6={};return _0x39e4d6['sources']=[updatePositionShader],new ShaderSource$1(_0x39e4d6);}static['getSegmentDrawVertexShader'](){const _0x30834e={};_0x30834e[_0x4bb4b8(-0x12a,-0x19c)]=[renderParticlesVertexShader];function _0x4bb4b8(_0x2a53eb,_0x3d0070){return _0x3df816(_0x2a53eb,_0x3d0070- -0x391);}return new ShaderSource$1(_0x30834e);}static[_0x3df816(0x249,0x203)](){const _0x9bf8a8={};return _0x9bf8a8['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x9bf8a8);}static[_0x3df816(0x250,0x23f)](){const _0x12f310={};return _0x12f310['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x12f310);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defaultValue,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x1bd3b4){this[_0x556a18(-0x1d1,-0x1c5)]=_0x1bd3b4[_0x556a18(-0x1d1,-0x1ec)],this['geometry']=_0x1bd3b4[_0x556a18(-0x162,-0x153)];function _0x556a18(_0x4ee949,_0x49cce7){return _0x3df816(_0x49cce7,_0x4ee949- -0x3a0);}this['attributeLocations']=_0x1bd3b4[_0x2f1682(0x3e,0x1c)],this[_0x2f1682(-0x9b,-0xd2)]=_0x1bd3b4[_0x2f1682(-0x9b,-0x6b)],this[_0x556a18(-0x15f,-0x1cd)]=_0x1bd3b4[_0x556a18(-0x15f,-0xd5)]||{},this['vertexShaderSource']=_0x1bd3b4[_0x2f1682(0x38,-0x14)],this['fragmentShaderSource']=_0x1bd3b4['fragmentShaderSource'],this['rawRenderState']=_0x1bd3b4['rawRenderState'],this[_0x556a18(-0x1e0,-0x215)]=_0x1bd3b4[_0x556a18(-0x1e0,-0x224)],this[_0x556a18(-0x1eb,-0x17b)]=_0x1bd3b4[_0x2f1682(-0xa3,-0x10d)],this['autoClear']=defaultValue(_0x1bd3b4[_0x2f1682(-0x84,-0x68)],![]),this['preExecute']=_0x1bd3b4[_0x556a18(-0x15d,-0xea)],this['show']=!![],this['commandToExecute']=undefined,this[_0x556a18(-0x134,-0x19e)]=undefined,this['isDynamic']=_0x1bd3b4[_0x556a18(-0x165,-0x199)]??(()=>!![]);function _0x2f1682(_0x5af5c1,_0x4aeebf){return _0x3df816(_0x4aeebf,_0x5af5c1- -0x258);}this['autoClear']&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x2f1682(-0x98,-0xb0)],'pass':Pass$1[_0x556a18(-0x1c4,-0x15a)]}));}['createCommand'](_0x516032){function _0x67a2cc(_0x3f7d18,_0x44e57c){return _0x3c9617(_0x3f7d18- -0x45f,_0x44e57c);}function _0xe65e23(_0x26359f,_0x1c4fff){return _0x3df816(_0x26359f,_0x1c4fff- -0x361);}if(this['commandType']===_0x67a2cc(0x39,-0xf)){const _0x27993f={};_0x27993f[_0xe65e23(-0x91,-0xef)]=_0x516032,_0x27993f[_0x67a2cc(0x6c,0x6d)]=this[_0xe65e23(-0xa0,-0x123)],_0x27993f['attributeLocations']=this['attributeLocations'],_0x27993f[_0xe65e23(-0x6f,-0xee)]=BufferUsage$1['STATIC_DRAW'];const _0x8f71ff=VertexArray$1[_0x67a2cc(0xc0,0x6e)](_0x27993f),_0x3d39c9={};_0x3d39c9['context']=_0x516032,_0x3d39c9['vertexShaderSource']=this['vertexShaderSource'],_0x3d39c9['fragmentShaderSource']=this['fragmentShaderSource'],_0x3d39c9[_0x67a2cc(0xc4,0xb6)]=this[_0xe65e23(-0xda,-0xcb)];const _0x5e3acf=ShaderProgram[_0xe65e23(-0xf7,-0x15d)](_0x3d39c9),_0x543203=RenderState['fromCache'](this['rawRenderState']),_0x5a25a2={};return _0x5a25a2[_0xe65e23(-0x120,-0xd3)]=this,_0x5a25a2['vertexArray']=_0x8f71ff,_0x5a25a2['primitiveType']=this[_0xe65e23(-0x154,-0x1a4)],_0x5a25a2['modelMatrix']=Matrix4[_0x67a2cc(0x36,0xa0)],_0x5a25a2[_0x67a2cc(0x88,0x15)]=_0x543203,_0x5a25a2[_0x67a2cc(0xd2,0x56)]=_0x5e3acf,_0x5a25a2[_0x67a2cc(-0x12,-0x61)]=this['framebuffer'],_0x5a25a2['uniformMap']=this[_0x67a2cc(0x6f,0x8b)],_0x5a25a2['pass']=Pass$1['OPAQUE'],new DrawCommand(_0x5a25a2);}else{if(this[_0x67a2cc(-0x3,-0x86)]==='Compute'){const _0x3c60d2={};return _0x3c60d2['owner']=this,_0x3c60d2[_0x67a2cc(0x91,0x4c)]=this['fragmentShaderSource'],_0x3c60d2['uniformMap']=this['uniformMap'],_0x3c60d2['outputTexture']=this['outputTexture'],_0x3c60d2['persists']=!![],new ComputeCommand(_0x3c60d2);}else throw new Error(_0xe65e23(-0x76,-0x98));}}[_0x3c9617(0x4f7,0x527)](_0x3c939e,_0x307f9d){function _0xb4c16c(_0x6af256,_0x1be5a4){return _0x3c9617(_0x1be5a4- -0x266,_0x6af256);}this['geometry']=_0x307f9d;function _0x2938e6(_0x4ade16,_0x37325e){return _0x3df816(_0x37325e,_0x4ade16- -0x48f);}defined(this['commandToExecute'])&&(this[_0xb4c16c(0x28c,0x2a1)][_0x2938e6(-0x1f6,-0x1e4)]=VertexArray$1[_0xb4c16c(0x27b,0x2b9)]({'context':_0x3c939e,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}[_0x3c9617(0x459,0x4ad)](_0x9bfd11){if(!this['isDynamic']())return;function _0x49b000(_0x431bb3,_0x277f96){return _0x3df816(_0x277f96,_0x431bb3- -0x3d1);}if(!this['show']||!defined(_0x9bfd11))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x9bfd11['context']));defined(this['preExecute'])&&this['preExecute']();if(!_0x9bfd11['commandList']){console['warn'](_0x49b000(-0x1c0,-0x1f5));return;}function _0x67ad04(_0x2c6b9c,_0x3b08de){return _0x3df816(_0x3b08de,_0x2c6b9c- -0x30d);}defined(this['clearCommand'])&&_0x9bfd11['commandList'][_0x67ad04(-0x13f,-0x173)](this[_0x49b000(-0x165,-0x17a)]),defined(this['commandToExecute'])&&_0x9bfd11['commandList']['push'](this[_0x49b000(-0x157,-0x118)]);}[_0x3c9617(0x473,0x47b)](){return![];}['destroy'](){function _0x34148f(_0x65fa6b,_0x19cb0d){return _0x3c9617(_0x65fa6b- -0x4c3,_0x19cb0d);}if(defined(this[_0x34148f(0x44,0xbc)])){var _0x422a2a;(_0x422a2a=this['commandToExecute']['shaderProgram'])===null||_0x422a2a===void 0x0||_0x422a2a[_0x34148f(0x49,0x69)](),this[_0x34148f(0x44,0x21)][_0x46f82c(-0x1b5,-0x141)]=undefined;}function _0x46f82c(_0x5eaea8,_0x2ef0e4){return _0x3c9617(_0x2ef0e4- -0x672,_0x5eaea8);}return destroyObject(this);}}function deepMerge(_0x263ee8,_0x123adc){function _0x358a86(_0x59ef06,_0xec60ec){return _0x3df816(_0x59ef06,_0xec60ec- -0x22);}if(!_0x263ee8)return _0x123adc;if(!_0x123adc)return _0x263ee8;const _0x53cb0e={..._0x123adc},_0x5e5bfa=_0x53cb0e;function _0x25fa41(_0x634937,_0x6e6b75){return _0x3c9617(_0x634937- -0x618,_0x6e6b75);}for(const _0x2abd7f in _0x263ee8){if(Object[_0x25fa41(-0x195,-0x109)][_0x25fa41(-0x14b,-0xf6)]['call'](_0x263ee8,_0x2abd7f)){const _0x31cd74=_0x263ee8[_0x2abd7f],_0x1fa110=_0x123adc[_0x2abd7f];if(Array['isArray'](_0x31cd74)){_0x5e5bfa[_0x2abd7f]=_0x31cd74[_0x358a86(0x176,0x1db)]();continue;}if(_0x31cd74&&typeof _0x31cd74==='object'){_0x5e5bfa[_0x2abd7f]=deepMerge(_0x31cd74,_0x1fa110||{});continue;}_0x31cd74!==undefined&&(_0x5e5bfa[_0x2abd7f]=_0x31cd74);}}return _0x5e5bfa;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x15c5bf,_0x29dcd2,_0x42e139,_0x185555,_0x73ea73){this['context']=_0x15c5bf,this['options']=_0x42e139,this['viewerParameters']=_0x185555,this[_0x16b18f(0x3b5,0x42c)]=_0x29dcd2,this['frameRate']=0x3c;function _0x16b18f(_0x5bf16b,_0x390f18){return _0x3c9617(_0x5bf16b- -0x177,_0x390f18);}this['frameRateAdjustment']=0x1;const _0x7f0686={};_0x7f0686['scene']=_0x73ea73,_0x7f0686[_0x16b18f(0x309,0x2f3)]=0x1,_0x7f0686['quietPeriod']=0x0;function _0x3be871(_0xb159c8,_0x305b70){return _0x3c9617(_0xb159c8- -0x551,_0x305b70);}this['frameRateMonitor']=new FrameRateMonitor(_0x7f0686),this[_0x3be871(-0x8c,-0x56)](),this[_0x3be871(-0x38,-0x9f)](),this['createParticlesTextures'](),this[_0x3be871(-0x1d,-0x1a)]();}[_0x3df816(0x20d,0x238)](){function _0x4001dc(_0x40bec4,_0x1ed1c4){return _0x3c9617(_0x40bec4- -0x182,_0x1ed1c4);}function _0x2ca7ec(_0x5b165d,_0x2d4803){return _0x3c9617(_0x5b165d- -0xe5,_0x2d4803);}const _0x3876b7=()=>{function _0x2d7c38(_0x468127,_0x18b908){return _0x3a09(_0x468127- -0x1df,_0x18b908);}function _0x375db3(_0x26a97d,_0x456dfe){return _0x3a09(_0x456dfe- -0xe8,_0x26a97d);}this['frameRateMonitor'][_0x2d7c38(-0xa4,-0x86)]>0x14&&(this['frameRate']=this['frameRateMonitor'][_0x2d7c38(-0xa4,-0x11d)],this['frameRateAdjustment']=0x3c/Math['max'](this[_0x375db3(-0x41,0x37)],0x1));};_0x3876b7();const _0x785550=setInterval(_0x3876b7,0x3e8);this['frameRateMonitor']['lowFrameRate']['addEventListener']((_0x3af729,_0x3b5850)=>{function _0xb6b8ef(_0x5ca347,_0x3cb344){return _0x3a09(_0x5ca347- -0x2e4,_0x3cb344);}function _0x4e6a41(_0x3def23,_0x5a8d89){return _0x3a09(_0x5a8d89- -0xbf,_0x3def23);}console[_0xb6b8ef(-0x177,-0x15c)]('Low\x20frame\x20rate\x20detected:\x20'+_0x3b5850+_0xb6b8ef(-0x198,-0x13c));}),this['frameRateMonitor'][_0x2ca7ec(0x417,0x465)]['addEventListener']((_0x38c832,_0x6660cb)=>{console['log']('Frame\x20rate\x20returned\x20to\x20normal:\x20'+_0x6660cb+'\x20FPS');});const _0x4e65ca=this[_0x2ca7ec(0x427,0x44f)][_0x2ca7ec(0x393,0x3dc)](this);this['destroy']=()=>{clearInterval(_0x785550),_0x4e65ca();};}[_0x3c9617(0x519,0x510)](){function _0x19b681(_0x5b7e6e,_0x304704){return _0x3c9617(_0x5b7e6e- -0x69e,_0x304704);}const _0x4f541d={};_0x4f541d['minificationFilter']=TextureMinificationFilter$1['LINEAR'];function _0x2933b6(_0x260ba8,_0x3d504a){return _0x3df816(_0x3d504a,_0x260ba8- -0x173);}_0x4f541d['magnificationFilter']=TextureMagnificationFilter$1[_0x19b681(-0x25a,-0x1f3)];const _0x1d48fc={'context':this['context'],'width':this['windData']['width'],'height':this[_0x2933b6(0x12c,0x104)][_0x2933b6(0x10a,0x14b)],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1[_0x19b681(-0x164,-0x173)],'flipY':this[_0x19b681(-0x15a,-0x124)]['flipY']??![],'sampler':new Sampler$1(_0x4f541d)};this[_0x2933b6(0x127,0x11f)]={'U':new Texture$1({..._0x1d48fc,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x1d48fc,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){const _0x1756d2={};_0x1756d2[_0x3d28ca(0x3b5,0x3d6)]=TextureMinificationFilter$1['NEAREST'];function _0x53702f(_0xe0378d,_0x22eb34){return _0x3c9617(_0xe0378d- -0x62,_0x22eb34);}function _0x3d28ca(_0x4e6450,_0x36c4d4){return _0x3c9617(_0x4e6450- -0xb3,_0x36c4d4);}_0x1756d2[_0x53702f(0x450,0x3d1)]=TextureMagnificationFilter$1[_0x53702f(0x462,0x441)];const _0x172478={'context':this['context'],'width':this[_0x3d28ca(0x491,0x465)][_0x3d28ca(0x3e0,0x3d6)],'height':this['options'][_0x3d28ca(0x3e0,0x3ac)],'pixelFormat':PixelFormat$1[_0x3d28ca(0x408,0x457)],'pixelDatatype':PixelDatatype$1[_0x53702f(0x4d8,0x563)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options'][_0x53702f(0x431,0x48f)]*this[_0x3d28ca(0x491,0x41c)]['particlesTextureSize']*0x4)[_0x53702f(0x4a3,0x502)](0x0)},'sampler':new Sampler$1(_0x1756d2)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x172478),'currentParticlesPosition':new Texture$1(_0x172478),'nextParticlesPosition':new Texture$1(_0x172478),'postProcessingPosition':new Texture$1(_0x172478),'particlesSpeed':new Texture$1(_0x172478)};}['destroyParticlesTextures'](){function _0x205f66(_0x58dbbd,_0x126e1c){return _0x3df816(_0x126e1c,_0x58dbbd-0x8f);}Object[_0x205f66(0x274,0x2b7)](this['particlesTextures'])['forEach'](_0x57c6d2=>_0x57c6d2['destroy']());}['createComputingPrimitives'](){function _0x27b55b(_0x5aed14,_0x1e0d84){return _0x3c9617(_0x1e0d84- -0x6f,_0x5aed14);}function _0x3d8b8a(_0x137fc5,_0x352855){return _0x3c9617(_0x352855- -0x386,_0x137fc5);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x3d8b8a(0xff,0xcf),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this[_0x3d8b8a(0x157,0x1a1)]['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x27b55b(0x457,0x48f)],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this[_0x27b55b(0x53a,0x4bd)]['v'][_0x3d8b8a(0x133,0x178)],this['windData']['v']['max']),'speedRange':()=>new Cartesian2$1(this[_0x27b55b(0x4fd,0x4bd)][_0x3d8b8a(0x1ec,0x165)]['min'],this[_0x3d8b8a(0x133,0x1a6)][_0x3d8b8a(0x122,0x165)]['max']),'currentParticlesPosition':()=>this[_0x27b55b(0x40c,0x417)]['currentParticlesPosition'],'speedScaleFactor':()=>{return(this['viewerParameters']['pixelSize']+0x32)*this['options']['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData']['height']),'minimum':()=>new Cartesian2$1(this[_0x27b55b(0x4c3,0x4bd)]['bounds']['west'],this['windData'][_0x3d8b8a(0x168,0x132)][_0x3d8b8a(0x163,0x101)]),'maximum':()=>new Cartesian2$1(this['windData']['bounds'][_0x3d8b8a(0x17f,0xf9)],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager[_0x27b55b(0x4b4,0x47e)](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{const _0x40abcf=this['particlesTextures'][_0x310cbb(0x1da,0x1a8)];this['particlesTextures']['previousParticlesPosition']=this[_0x310cbb(0x1eb,0x195)][_0x32fead(0x284,0x1fe)];function _0x32fead(_0x5f34f1,_0x325006){return _0x27b55b(_0x325006,_0x5f34f1- -0x1fe);}this['particlesTextures']['currentParticlesPosition']=this['particlesTextures'][_0x32fead(0x1e4,0x1d2)],this['particlesTextures']['postProcessingPosition']=_0x40abcf;function _0x310cbb(_0x26110d,_0x37744a){return _0x27b55b(_0x26110d,_0x37744a- -0x282);}this['primitives']['calculateSpeed']['commandToExecute']&&(this[_0x310cbb(0x24b,0x1d9)]['calculateSpeed'][_0x32fead(0x29a,0x314)][_0x310cbb(0x15b,0x151)]=this['particlesTextures'][_0x310cbb(0x239,0x1b8)]);},'isDynamic':()=>this[_0x3d8b8a(0x18f,0x1be)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x27b55b(0x4a0,0x482)],'particlesSpeed':()=>this['particlesTextures'][_0x27b55b(0x47d,0x43a)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x460766(_0x475a3b,_0xba1377){return _0x3d8b8a(_0xba1377,_0x475a3b-0x373);}function _0x179a52(_0x47d300,_0x2793de){return _0x3d8b8a(_0x47d300,_0x2793de-0x179);}this['primitives']['updatePosition'][_0x460766(0x4f4,0x53e)]&&(this['primitives'][_0x460766(0x4e5,0x498)][_0x179a52(0x32a,0x2fa)][_0x179a52(0x227,0x235)]=this['particlesTextures']['nextParticlesPosition']);},'isDynamic':()=>this[_0x3d8b8a(0x186,0x1be)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x3d8b8a(0xc0,0xcf),'uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed'],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this[_0x3d8b8a(0x63,0xca)]['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData'][_0x27b55b(0x497,0x449)]['west'],this['windData']['bounds'][_0x27b55b(0x3e7,0x410)]),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds']['south'],this['windData']['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this[_0x27b55b(0x4ea,0x4d5)]['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x25694e(_0x1aa6b7,_0x4a5c46){return _0x27b55b(_0x4a5c46,_0x1aa6b7- -0x35d);}function _0xc7fb58(_0x296152,_0x4c3388){return _0x27b55b(_0x296152,_0x4c3388- -0xe3);}this['primitives']['postProcessingPosition'][_0xc7fb58(0x41e,0x3b5)]&&(this['primitives']['postProcessingPosition']['commandToExecute'][_0xc7fb58(0x30f,0x2f0)]=this['particlesTextures'][_0xc7fb58(0x291,0x2ff)]);},'isDynamic':()=>this['options'][_0x3d8b8a(0x199,0x12f)]})};}[_0x3c9617(0x4aa,0x43c)](){this['windTextures']['U'][_0x27ceba(-0xfb,-0x159)](),this[_0x27ceba(-0x143,-0x13e)]['V']['destroy']();function _0x27ceba(_0x215ed9,_0xd24509){return _0x3df816(_0x215ed9,_0xd24509- -0x3d8);}function _0x134326(_0x55100f,_0xe359c9){return _0x3c9617(_0xe359c9- -0x65,_0x55100f);}this[_0x27ceba(-0xc2,-0x14c)]();}[_0x3df816(0x20a,0x253)](_0x57a295){this['windData']=_0x57a295,this['reCreateWindTextures']();}[_0x3c9617(0x48e,0x493)](_0x27b305){const _0x2e7668=_0x27b305['flipY']!==undefined&&_0x27b305[_0xc0d866(0x15,0x60)]!==this[_0x3ef0ae(-0x122,-0x98)]['flipY'];function _0xc0d866(_0x572ff2,_0x32c551){return _0x3df816(_0x32c551,_0x572ff2- -0x1a6);}function _0x3ef0ae(_0x48b85e,_0x4bd888){return _0x3df816(_0x4bd888,_0x48b85e- -0x3d9);}this[_0xc0d866(0x111,0x15e)]=deepMerge(_0x27b305,this['options']),_0x2e7668&&this['reCreateWindTextures']();}[_0x3df816(0x231,0x1d5)](_0x32b9fa){const {array:_0x4466bc}=_0x32b9fa;function _0x143764(_0x8c4284,_0x24959a){return _0x3df816(_0x8c4284,_0x24959a-0x173);}let {min:_0x491e73,max:_0x2bb475}=_0x32b9fa;const _0xafbfc6=new Float32Array(_0x4466bc[_0x143764(0x438,0x3f3)]);function _0x1741b1(_0x2d48fa,_0x431ab7){return _0x3df816(_0x2d48fa,_0x431ab7- -0x30b);}_0x491e73===undefined&&(console['warn'](_0x143764(0x3b0,0x367)),_0x491e73=Math['min'](..._0x4466bc));_0x2bb475===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x2bb475=Math['max'](..._0x4466bc));const _0x525cb3=Math[_0x143764(0x427,0x3a2)](Math['abs'](_0x491e73),Math['abs'](_0x2bb475));for(let _0x54d354=0x0;_0x54d354<_0x4466bc['length'];_0x54d354++){const _0x5c4bda=_0x4466bc[_0x54d354]/_0x525cb3;_0xafbfc6[_0x54d354]=_0x5c4bda;}return console[_0x143764(0x377,0x373)](_0xafbfc6),_0xafbfc6;}['destroy'](){function _0x31bd46(_0x5f0835,_0x100cc3){return _0x3c9617(_0x100cc3- -0x568,_0x5f0835);}Object['values'](this[_0x31bd46(-0x88,-0x41)])['forEach'](_0x43169a=>_0x43169a['destroy']()),Object['values'](this['particlesTextures'])['forEach'](_0xccdd2e=>_0xccdd2e['destroy']());function _0x17f97a(_0x1c91d8,_0x76bd0d){return _0x3df816(_0x76bd0d,_0x1c91d8-0x133);}Object['values'](this['primitives'])[_0x31bd46(-0x5b,-0xb2)](_0x5d1eb2=>_0x5d1eb2[_0x17f97a(0x3b2,0x3f6)]()),this['frameRateMonitor']['destroy']();}}function _0x1c36(){const _0xe3fe7=['xmax','renderState','clientWidth','postMessage','defineProperty','speed','mouse_down','getCalculateSpeedShader','LayerUtil','destination-in','fragmentShaderSource','currentParticlesPosition','calculateSpeed','globalCompositeOperation','mode','requestRender','_speedRate','setGeometry','updatePosition','clearCommand','windField','warn','nominalFrameRate','_drawLines','min','context','bufferUsage','EventType','ymin','mouseDown','add','fill','pow','commandToExecute','particles','computing','height','canvasContext','destroy','length','wind','SceneMode','globe','sqrt','talt','dropRate','clientHeight','_tomap','400odZhFs','worker','lat','createWindTextures','tlat','owner','umax','vertexShaderSource','_updateIng2','fromGeometry','get','setOptions','off','attributeLocations','BaseLayer','redraw','vertexArray','windTextures','flatMap','_calc_speedRate','moveTo','pixelDatatype','windData','mouse_move','init','__esModule','age','shaderProgram','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','getSpeed','createComputingPrimitives','color','initWorker','_mountedHook','ONE_MINUS_SRC_ALPHA','_onMouseUpEvent','FLOAT','toDegrees','cols','fromDegrees','resize','blending','fixedHeight','727575MGmpaf','beginPath','canvasWidth','options','4YbMekz','blendEquation','304GKaFrP','Cartesian3','_removedHook','mouseMove','domain','cancelAnimationFrame','style','north','lineTo','now','framebuffers','#ffffff','drawingBufferWidth','default','segmentsColor','Unknown\x20command\x20type','toGridXY','STATIC_DRAW','outputTexture','6308WAvwho','LINEAR','refreshTimer','87487aTdsAW','_map','flipY','changeOptions','primitiveType','vmin','type','framebuffer','_animateFrame','Cesium','viewerParameters','postProcessingPosition','getParticles','createPrimitives','width','Compute','createSegmentsGeometry','show','isInExtent','update','Cartesian2','push','commandType','rows','textures','mouseUp','lineLength','autoClear','processWindData','particlesNumber','canvas','array','enabled','EllipsoidalOccluder','minificationFilter','OPAQUE','ColorRamp','createRawRenderState','28581waZPDh','udata','onmessage','_setOptionsHook','722532jQZsVD','removeChild','values','isDestroyed','removeEventListener','212571ucYWdh','speedRate','layer','bind','data','zIndex','stroke','visibility','isPointVisible','setData','east','samplingWindow','min\x20is\x20undefined,\x20calculate\x20min','sources','prototype','colorTable','camera','particlesTextures','south','floor','updateViewerParameters','slice','sceneMode','applyViewerParameters','log','updateOptions','pixelFormat','getSegmentDrawFragmentShader','fromCache','lng','particlesTextureSize','keys','IDENTITY','green','rendering','Draw','previousParticlesPosition','_maxAge','create','segments','_onMouseDownEvent','frameState.commandList\x20is\x20undefined','stringify','canvasHeight','xmin','colors','_canrefresh','_colorRamp','clear','getUVByPoint','_pointerEvents','strokeStyle','particlesSpeed','reCreateWindTextures','changed','alt','frameRate','getSegmentDrawVertexShader','umin','_onMapWhellEvent','getDataAtLonLat','magnificationFilter','destroyParticlesTextures','steps','dynamic','forEach','west','bounds','vmax','CanvasWindField','RGBA','max','willReadFrequently','particleSystem','pixelSize','drawingBufferHeight','wheel','addEventListener','_updateIng','NEAREST','initFrameRate','scene','0px','isDynamic','lastFramesPerSecond','primitives','geometry','getPostProcessingPositionShader','hasOwnProperty','uniformMap','lineWidth','preExecute','onParticlesTextureSizeChange','pointerEvents','ymax','onColorTableChange','grid','ellipsoid','_addedHook','cartesianToCartographic','createRenderingTextures','\x20FPS','maxAge','558711qVJXwO','getPrimitives','random','createRenderingFramebuffers','updateWindData','UNSIGNED_BYTE','destoryRenderingFramebuffers','_calcUV','requestAnimationFrame','tlng'];_0x1c36=function(){return _0xe3fe7;};return _0x1c36();}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace[_0x3c9617(0x44f,0x410)];class WindParticlesRendering{constructor(_0xdddd0b,_0x57b39c,_0xcc7351,_0x2f0b6){function _0x3c58c7(_0x6a92bc,_0x2ce682){return _0x3df816(_0x6a92bc,_0x2ce682- -0x17e);}this['context']=_0xdddd0b,this['options']=_0x57b39c,this[_0x3c58c7(-0x1c,0x45)]=_0xcc7351;function _0x24d0c2(_0xb11623,_0x5407d3){return _0x3c9617(_0x5407d3- -0x258,_0xb11623);}this[_0x3c58c7(0x151,0xfe)]=_0x2f0b6,(typeof this[_0x24d0c2(0x2fc,0x2ec)][_0x3c58c7(0x5f,0x88)]!=='number'||this['options'][_0x24d0c2(0x1bd,0x23b)]<=0x0)&&(console['error'](_0x24d0c2(0x320,0x2da)),this[_0x24d0c2(0x2bf,0x2ec)][_0x3c58c7(0x28,0x88)]=0x100),this['colorTable']=this['createColorTableTexture'](),this[_0x24d0c2(0x270,0x206)]=this['createRenderingTextures'](),this['framebuffers']=this[_0x3c58c7(0x66,0xd4)](),this[_0x24d0c2(0x1ee,0x272)]=this[_0x24d0c2(0x268,0x1fb)]();}[_0x3df816(0x1e6,0x24c)](){function _0x493488(_0x24d717,_0x1a37f9){return _0x3df816(_0x1a37f9,_0x24d717- -0x24a);}const _0x998539={};_0x998539[_0x1791d9(-0x20f,-0x271)]=this[_0x1791d9(-0x20f,-0x213)],_0x998539['width']=this[_0x1791d9(-0x20f,-0x292)]['drawingBufferWidth'],_0x998539['height']=this[_0x1791d9(-0x20f,-0x288)][_0x1791d9(-0x24e,-0x22e)],_0x998539['pixelFormat']=PixelFormat['RGBA'],_0x998539['pixelDatatype']=PixelDatatype[_0x493488(0xa,0xa)];const _0x40d39e=_0x998539;function _0x1791d9(_0x4cad71,_0x28d86e){return _0x3c9617(_0x4cad71- -0x70e,_0x28d86e);}const _0x437261={};_0x437261[_0x493488(0x28,-0x7)]=this['context'],_0x437261['width']=this['context'][_0x493488(0x7c,0xdf)],_0x437261['height']=this['context'][_0x493488(-0x17,-0x1)],_0x437261[_0x1791d9(-0x27f,-0x234)]=PixelFormat['DEPTH_COMPONENT'],_0x437261[_0x493488(0x54,0x93)]=PixelDatatype['UNSIGNED_INT'];const _0x13934c=_0x437261;return{'segmentsColor':new Texture(_0x40d39e),'segmentsDepth':new Texture(_0x13934c)};}['createRenderingFramebuffers'](){function _0x35e89a(_0x5efeb7,_0x31a10d){return _0x3df816(_0x5efeb7,_0x31a10d- -0x2be);}const _0x516ab2={};_0x516ab2['context']=this[_0x22a0b7(0x12c,0xf5)],_0x516ab2['colorTextures']=[this['textures'][_0x35e89a(-0x10,0xa)]];function _0x22a0b7(_0xddd718,_0xa0d041){return _0x3df816(_0xddd718,_0xa0d041- -0x17d);}return _0x516ab2['depthTexture']=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0x516ab2)};}[_0x3c9617(0x4e2,0x4df)](){function _0x4b0f22(_0x35cd1a,_0x24a2c6){return _0x3df816(_0x35cd1a,_0x24a2c6-0xef);}Object[_0x4b0f22(0x2e6,0x2d4)](this['framebuffers'])['forEach'](_0x2ae1b8=>{_0x2ae1b8['destroy']();});}['createColorTableTexture'](){function _0x144dc7(_0x555106,_0x5c38f8){return _0x3c9617(_0x5c38f8- -0x633,_0x555106);}const _0xca2783=new Float32Array(this[_0x144dc7(-0x166,-0xef)][_0x144dc7(-0x16e,-0x191)][_0x210b6b(-0x20b,-0x196)](_0x106089=>{const _0x55f525=Color$1['fromCssColorString'](_0x106089);function _0x342972(_0x1d7830,_0x55e067){return _0x144dc7(_0x1d7830,_0x55e067-0x1c);}return[_0x55f525['red'],_0x55f525[_0x342972(-0x1fd,-0x181)],_0x55f525['blue'],_0x55f525['alpha']];})),_0x17e515={};function _0x210b6b(_0x26aabe,_0x42b78e){return _0x3c9617(_0x26aabe- -0x733,_0x42b78e);}return _0x17e515[_0x144dc7(-0x232,-0x1cb)]=TextureMinificationFilter['LINEAR'],_0x17e515[_0x210b6b(-0x281,-0x272)]=TextureMagnificationFilter[_0x210b6b(-0x2ef,-0x2fa)],_0x17e515['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x17e515['wrapT']=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this[_0x144dc7(-0x95,-0xef)][_0x144dc7(-0x19f,-0x191)]['length'],'height':0x1,'pixelFormat':PixelFormat[_0x144dc7(-0x1aa,-0x178)],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x17e515),'source':{'width':this['options']['colors']['length'],'height':0x1,'arrayBufferView':_0xca2783}});}['createSegmentsGeometry'](){const _0x455a6b=0x4,_0x55b457=this[_0x3c41f9(0x1b2,0x18c)]['particlesTextureSize'];function _0x3c41f9(_0x219a4b,_0x1d96d6){return _0x3df816(_0x219a4b,_0x1d96d6- -0x12b);}let _0x50c773=[];for(let _0x388099=0x0;_0x388099<_0x55b457;_0x388099++){for(let _0xbe00f3=0x0;_0xbe00f3<_0x55b457;_0xbe00f3++){for(let _0x427e80=0x0;_0x427e80<_0x455a6b;_0x427e80++){_0x50c773[_0x3c41f9(0xfb,0xa3)](_0x388099/_0x55b457),_0x50c773['push'](_0xbe00f3/_0x55b457);}}}_0x50c773=new Float32Array(_0x50c773);const _0x108138=this['options']['particlesTextureSize']**0x2;let _0x24936b=[];for(let _0x4bf71f=0x0;_0x4bf71f<_0x108138;_0x4bf71f++){_0x24936b['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x24936b=new Float32Array(_0x24936b);let _0x55ad06=[];for(let _0x34d80c=0x0,_0x508d33=0x0;_0x34d80c<_0x108138;_0x34d80c++){_0x55ad06[_0xa2379e(0x3d4,0x45e)](_0x508d33+0x0,_0x508d33+0x1,_0x508d33+0x2,_0x508d33+0x2,_0x508d33+0x1,_0x508d33+0x3),_0x508d33+=_0x455a6b;}_0x55ad06=new Uint32Array(_0x55ad06);const _0x16b223={};_0x16b223['componentDatatype']=ComponentDatatype[_0x3c41f9(0x1ca,0x182)],_0x16b223['componentsPerAttribute']=0x2,_0x16b223['values']=_0x50c773;const _0x5563af={};_0x5563af['componentDatatype']=ComponentDatatype[_0x3c41f9(0x1df,0x182)],_0x5563af['componentsPerAttribute']=0x3,_0x5563af['values']=_0x24936b;const _0x5cd4d7=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x16b223),'normal':new GeometryAttribute(_0x5563af)}),'indices':_0x55ad06});function _0xa2379e(_0x1f781a,_0xe657dc){return _0x3c9617(_0x1f781a- -0x87,_0xe657dc);}return _0x5cd4d7;}['createRawRenderState'](_0x545da3){const _0x2caee8={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x545da3};return Appearance['getDefaultRenderState'](!![],![],_0x2caee8);}[_0x3df816(0x1bc,0x1c6)](){const _0x2f9c7d={};_0x2f9c7d['st']=0x0,_0x2f9c7d['normal']=0x1;const _0x20474a={};_0x20474a['enabled']=!![];function _0x365538(_0x35ad24,_0x849a46){return _0x3df816(_0x849a46,_0x35ad24-0x56);}const _0x36ab5a={};_0x36ab5a[_0x220024(0x71,0x78)]=!![],_0x36ab5a[_0x220024(0xe6,0x158)]=WebGLRenderingContext['FUNC_ADD'],_0x36ab5a['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x36ab5a['blendFuncDestination']=WebGLRenderingContext[_0x365538(0x301,0x32e)];const _0x45c6a4={};_0x45c6a4['viewport']=undefined;function _0x220024(_0x2044a2,_0x4c22b7){return _0x3df816(_0x2044a2,_0x4c22b7- -0x161);}_0x45c6a4['depthTest']=_0x20474a,_0x45c6a4['depthMask']=!![],_0x45c6a4[_0x365538(0x308,0x2d9)]=_0x36ab5a;const _0x109ce3=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x2f9c7d,'geometry':this[_0x220024(-0x1e,0x68)](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this[_0x220024(0x9f,0x11b)]['particlesTextures'][_0x220024(0x5d,0xab)],'currentParticlesPosition':()=>this['computing']['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing'][_0x220024(0x5e,0x98)]['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0x220024(0xee,0x98)][_0x365538(0x272,0x232)],'frameRateAdjustment':()=>this[_0x365538(0x2d2,0x2d1)]['frameRateAdjustment'],'colorTable':()=>this[_0x220024(0x59,0x96)],'domain':()=>{var _0x475cae,_0x27e474;const _0x31ebb7=new Cartesian2(((_0x475cae=this['options'][_0x26fc0f(0x98,0xaa)])===null||_0x475cae===void 0x0?void 0x0:_0x475cae['min'])??this['computing'][_0x26fc0f(0x1d,0x8b)]['speed']['min'],((_0x27e474=this['options']['domain'])===null||_0x27e474===void 0x0?void 0x0:_0x27e474['max'])??this[_0x32aec9(0xc,0x52)][_0x32aec9(-0x15,0x75)][_0x32aec9(0x4e,0x34)]['max']);function _0x26fc0f(_0x2e0f87,_0x3a5b96){return _0x365538(_0x3a5b96- -0x26a,_0x2e0f87);}function _0x32aec9(_0x4f86fc,_0x315961){return _0x220024(_0x4f86fc,_0x315961- -0xc9);}return _0x31ebb7;},'displayRange':()=>{var _0x292d33,_0x38417b;const _0x45d4da=new Cartesian2(((_0x292d33=this[_0x1edab0(0x4e8,0x52e)]['displayRange'])===null||_0x292d33===void 0x0?void 0x0:_0x292d33['min'])??this['computing']['windData']['speed']['min'],((_0x38417b=this[_0x300d69(0x389,0x3be)]['displayRange'])===null||_0x38417b===void 0x0?void 0x0:_0x38417b[_0x1edab0(0x469,0x4a6)])??this['computing']['windData'][_0x1edab0(0x510,0x4d5)]['max']);function _0x300d69(_0x4a797d,_0xd7bc21){return _0x220024(_0x4a797d,_0xd7bc21-0x268);}function _0x1edab0(_0x5e70e5,_0x3858bf){return _0x220024(_0x5e70e5,_0x3858bf-0x3d8);}return _0x45d4da;},'particleHeight':()=>this[_0x365538(0x30d,0x301)]['particleHeight']||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this[_0x220024(0x15a,0x111)][_0x220024(0xb3,0xd2)],'pixelSize':()=>this['viewerParameters'][_0x365538(0x288,0x2b5)],'lineWidth':()=>{const _0x1086a2={};function _0x29b099(_0x6021ef,_0x467c3a){return _0x365538(_0x6021ef-0xfc,_0x467c3a);}_0x1086a2['min']=0x1,_0x1086a2['max']=0x2;const _0x32c72d=this['options']['lineWidth']||_0x1086a2;return new Cartesian2(_0x32c72d[_0x29b099(0x3c3,0x3b9)],_0x32c72d['max']);},'lineLength':()=>{function _0xe95f7a(_0x4447bd,_0x174554){return _0x220024(_0x174554,_0x4447bd-0xb5);}function _0x5d264f(_0x112504,_0x18cf9e){return _0x365538(_0x112504- -0x4de,_0x18cf9e);}const _0x577d68={};_0x577d68[_0xe95f7a(0x1c5,0x23c)]=0x14,_0x577d68[_0xe95f7a(0x183,0x117)]=0x64;const _0x4f75c5=this['options'][_0x5d264f(-0x2b5,-0x24b)]||_0x577d68;return new Cartesian2(_0x4f75c5['min'],_0x4f75c5['max']);},'is3D':()=>this[_0x220024(0xc2,0x62)][_0x365538(0x254,0x24d)]===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0x220024(0x11,0x70)]['segmentsDepth']},'vertexShaderSource':ShaderManager[_0x220024(0x138,0xc0)](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this[_0x220024(0x7e,0x7d)](_0x45c6a4)}),_0x889569={};return _0x889569['segments']=_0x109ce3,_0x889569;}['onParticlesTextureSizeChange'](){const _0x43e62b=this[_0x40493d(-0x1d5,-0x234)]();this[_0x409a6b(0x187,0x19c)]['segments']['geometry']=_0x43e62b;const _0x23f4e0={};function _0x409a6b(_0x54e909,_0x1d4161){return _0x3c9617(_0x54e909- -0x343,_0x1d4161);}_0x23f4e0[_0x409a6b(0x1bc,0x214)]=this[_0x409a6b(0x1bc,0x17b)],_0x23f4e0['geometry']=_0x43e62b,_0x23f4e0[_0x40493d(-0x108,-0x109)]=this['primitives']['segments']['attributeLocations'],_0x23f4e0['bufferUsage']=BufferUsage[_0x409a6b(0xfe,0x140)];function _0x40493d(_0x45ebe7,_0x1512f2){return _0x3c9617(_0x45ebe7- -0x62b,_0x1512f2);}const _0x2b0b17=VertexArray[_0x40493d(-0x10c,-0x156)](_0x23f4e0);this['primitives']['segments']['commandToExecute']&&(this[_0x40493d(-0x161,-0x13b)][_0x409a6b(0x159,0x1ca)][_0x40493d(-0x124,-0x153)][_0x40493d(-0x105,-0x134)]=_0x2b0b17);}[_0x3df816(0x27a,0x247)](){function _0xdcabd6(_0x44dfce,_0x119371){return _0x3df816(_0x44dfce,_0x119371- -0x87);}this['colorTable'][_0xdcabd6(0x1c8,0x1f8)](),this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x544b6e){const _0x1346c8=_0x544b6e[_0x2cf91b(-0x198,-0x1ce)]&&JSON[_0x2cf91b(-0x19b,-0x146)](_0x544b6e['colors'])!==JSON['stringify'](this[_0x526922(0x19c,0x1af)]['colors']);function _0x526922(_0x553625,_0x1007bf){return _0x3c9617(_0x553625- -0x3a8,_0x1007bf);}function _0x2cf91b(_0x4475d9,_0x1e2398){return _0x3df816(_0x1e2398,_0x4475d9- -0x3ad);}this['options']=deepMerge(_0x544b6e,this['options']),_0x1346c8&&this['onColorTableChange']();}['destroy'](){Object['values'](this[_0x26fec5(0x11b,0x178)])[_0x26fec5(0x80,-0xc)](_0x5ae4d3=>{function _0x352a78(_0x2df4b1,_0x2bf23c){return _0x26fec5(_0x2df4b1- -0x1b7,_0x2bf23c);}_0x5ae4d3[_0x352a78(-0xe1,-0x12d)]();}),Object['values'](this[_0x27c5ec(0x36a,0x2fb)])['forEach'](_0x367f17=>{function _0x3b4990(_0x471ea3,_0x5ed6a3){return _0x26fec5(_0x471ea3-0x79,_0x5ed6a3);}_0x367f17[_0x3b4990(0x14f,0xcc)]();});function _0x27c5ec(_0x4f502e,_0x16bdbf){return _0x3c9617(_0x16bdbf- -0x1cf,_0x4f502e);}function _0x26fec5(_0x2fc038,_0x486a15){return _0x3df816(_0x486a15,_0x2fc038- -0x1a9);}this[_0x27c5ec(0x2a4,0x2b5)]['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x42860e,_0x5131d8,_0x46660f,_0x9d4433,_0x3367a7){function _0x33e748(_0x2f7701,_0x554a51){return _0x3c9617(_0x554a51- -0x1c2,_0x2f7701);}this[_0x33e748(0x336,0x33d)]=_0x42860e,this['options']=_0x46660f,this['viewerParameters']=_0x9d4433,this['computing']=new WindParticlesComputing(_0x42860e,_0x5131d8,_0x46660f,_0x9d4433,_0x3367a7),this['rendering']=new WindParticlesRendering(_0x42860e,_0x46660f,_0x9d4433,this[_0x33e748(0x2c0,0x347)]);function _0x581ea1(_0x38cde7,_0x1bedb9){return _0x3c9617(_0x38cde7- -0xaa,_0x1bedb9);}this['clearFramebuffers']();}['getPrimitives'](){function _0x1fc21f(_0x5ad32a,_0x398f80){return _0x3c9617(_0x5ad32a- -0x599,_0x398f80);}const _0xbbb1c7=[this[_0x1fc21f(-0x90,-0xb9)]['primitives'][_0x1fc21f(-0xa7,-0xde)],this['computing']['primitives']['updatePosition'],this['computing']['primitives'][_0x389a79(-0x14c,-0x180)],this['rendering']['primitives']['segments']];function _0x389a79(_0x217adc,_0x13ff6e){return _0x3df816(_0x217adc,_0x13ff6e- -0x344);}return _0xbbb1c7;}['clearFramebuffers'](){function _0x1272c5(_0x48b857,_0x378bfc){return _0x3df816(_0x378bfc,_0x48b857- -0x4ad);}const _0x12cee1=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x520cd8(0xcb,0xbe)]});function _0x520cd8(_0x1956ed,_0x581cd2){return _0x3c9617(_0x581cd2- -0x3ab,_0x1956ed);}Object[_0x1272c5(-0x2a6,-0x2d2)](this[_0x1272c5(-0x2a3,-0x2ee)][_0x520cd8(0x1c0,0x1a6)])['forEach'](_0x45518a=>{_0x12cee1['framebuffer']=this['rendering']['framebuffers'][_0x45518a],_0x12cee1['execute'](this['context']);});}['changeOptions'](_0x1fadea){function _0x48a8e8(_0x4cd0b3,_0xab4549){return _0x3df816(_0x4cd0b3,_0xab4549-0x1cd);}let _0xce6bc5=![];_0x1fadea['particlesTextureSize']&&this['options']['particlesTextureSize']!==_0x1fadea[_0x57036e(0x6a,0xab)]&&(_0xce6bc5=!![]);const _0x4fa71b=deepMerge(_0x1fadea,this['options']);if(_0x4fa71b['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this[_0x48a8e8(0x4ae,0x484)]=_0x4fa71b;function _0x57036e(_0x4549ba,_0x28b557){return _0x3c9617(_0x4549ba- -0x429,_0x28b557);}this[_0x57036e(0x6e,0x1)]['updateOptions'](_0x1fadea),this['computing']['updateOptions'](_0x1fadea),_0xce6bc5&&(this['computing'][_0x57036e(0x8a,0xef)](),this[_0x48a8e8(0x453,0x449)]['createParticlesTextures'](),this[_0x57036e(0x6e,0xea)][_0x57036e(0xa8,0x71)]());}[_0x3df816(0x207,0x1ff)](_0x2ed26a){this['viewerParameters']=_0x2ed26a;function _0x480dbd(_0x1220fa,_0x48a8f3){return _0x3c9617(_0x48a8f3- -0x16d,_0x1220fa);}this[_0x480dbd(0x420,0x39c)]['viewerParameters']=_0x2ed26a,this['rendering']['viewerParameters']=_0x2ed26a;}['destroy'](){this[_0x1c4af7(-0x18a,-0x204)]['destroy']();function _0x164fcb(_0x17c133,_0x1eddcc){return _0x3c9617(_0x1eddcc- -0x5a6,_0x17c133);}function _0x1c4af7(_0x3cfb0e,_0x5618fd){return _0x3c9617(_0x5618fd- -0x70d,_0x3cfb0e);}this[_0x1c4af7(-0x24e,-0x276)][_0x1c4af7(-0x1c6,-0x201)]();}}const Cesium$1=mars3d__namespace[_0x3c9617(0x44f,0x413)],BaseLayer$1=mars3d__namespace['layer'][_0x3df816(0x230,0x297)],_0x4e803d={};_0x4e803d['min']=0x1,_0x4e803d[_0x3df816(0x20e,0x22f)]=0x2;const _0x5a925b={};_0x5a925b['min']=0x14,_0x5a925b[_0x3df816(0x244,0x22f)]=0x64;const _0x2ce690={};_0x2ce690['particlesTextureSize']=0x64,_0x2ce690['particleHeight']=0x3e8,_0x2ce690['lineWidth']=_0x4e803d,_0x2ce690['lineLength']=_0x5a925b,_0x2ce690['speedFactor']=0x1,_0x2ce690[_0x3c9617(0x513,0x49b)]=0.003,_0x2ce690['dropRateBump']=0.001,_0x2ce690['colors']=['rgb(206,255,255)'],_0x2ce690['flipY']=![],_0x2ce690['dynamic']=!![];const DEF_OPTIONS=_0x2ce690;class WindLayer extends BaseLayer$1{constructor(_0xf0c4b8={}){function _0x10c9c8(_0x355582,_0x4f37db){return _0x3df816(_0x4f37db,_0x355582-0x231);}_0xf0c4b8={...DEF_OPTIONS,..._0xf0c4b8},super(_0xf0c4b8),this[_0x10c9c8(0x413,0x3fe)](_0xf0c4b8,_0xf0c4b8);}get[_0x3c9617(0x477,0x461)](){function _0x25d6ea(_0x2f976b,_0x583d02){return _0x3c9617(_0x2f976b- -0xef,_0x583d02);}return this[_0x25d6ea(0x3db,0x3a2)];}get[_0x3c9617(0x479,0x405)](){function _0x2ecc89(_0x23c461,_0x1aecec){return _0x3c9617(_0x23c461- -0x656,_0x1aecec);}return this['options'][_0x2ecc89(-0x1dd,-0x1bf)];}set['data'](_0x4f739e){function _0x3213b2(_0x5e9cbc,_0x330048){return _0x3df816(_0x330048,_0x5e9cbc-0x0);}this['options'][_0x3213b2(0x1ec,0x160)]=_0x4f739e,this['setData'](_0x4f739e);}get['colors'](){function _0x922d93(_0x21bd42,_0xba69a2){return _0x3df816(_0xba69a2,_0x21bd42-0x163);}function _0x13b80d(_0x2c9631,_0x101579){return _0x3c9617(_0x101579- -0x48d,_0x2c9631);}return this[_0x922d93(0x41a,0x48f)][_0x13b80d(-0x36,0x15)];}set[_0x3c9617(0x4a2,0x4a4)](_0x26982b){this[_0x5a4e35(0x51,0x27)][_0x7a3adf(0x2b2,0x257)]=_0x26982b;const _0x4e2acf={};_0x4e2acf['colors']=_0x26982b;function _0x5a4e35(_0x2b982a,_0x58b570){return _0x3c9617(_0x2b982a- -0x4f3,_0x58b570);}function _0x7a3adf(_0x27a6df,_0x3d3745){return _0x3c9617(_0x27a6df- -0x1f0,_0x3d3745);}this['_setOptionsHook'](this['options'],_0x4e2acf);}[_0x3df816(0x292,0x2aa)](){}['_addedHook'](){this[_0x516d9a(0x2c4,0x303)]=this[_0x43fe42(0x1da,0x189)]['scene'],this['camera']=this[_0x516d9a(0x2e0,0x284)]['camera'];this['options'][_0x516d9a(0x271,0x2b6)]&&this['setData'](this[_0x516d9a(0x3ef,0x381)]['data']);if(!this['windData'])return;this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1[(_0x43fe42(0x1b7,0x19c))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0x516d9a(0x368,0x331)]},this[_0x43fe42(0x1bc,0x1cb)]();function _0x43fe42(_0x34a2fc,_0x34021f){return _0x3c9617(_0x34021f- -0x2be,_0x34a2fc);}this['particleSystem']=new WindParticleSystem(this[_0x516d9a(0x2bb,0x303)][_0x43fe42(0x1fa,0x241)],this[_0x516d9a(0x3f5,0x369)],this[_0x43fe42(0x2a4,0x286)],this[_0x516d9a(0x293,0x28d)],this['scene']);function _0x516d9a(_0x3d297c,_0x446954){return _0x3c9617(_0x446954- -0x1c3,_0x3d297c);}this[_0x43fe42(0x1c1,0x20c)]=this['particleSystem'][_0x516d9a(0x2a6,0x31a)](),this[_0x43fe42(0x1f3,0x20c)][_0x43fe42(0x1f3,0x1f8)](_0x2bd8d8=>{function _0x417f05(_0x4e8860,_0x5c7bb6){return _0x516d9a(_0x5c7bb6,_0x4e8860- -0x553);}this['scene']['primitives'][_0x417f05(-0x212,-0x199)](_0x2bd8d8);}),this['camera']['percentageChanged']=0.01,this[_0x43fe42(0x155,0x1c7)][_0x43fe42(0x20c,0x1ed)]['addEventListener'](this[_0x516d9a(0x2bc,0x2c6)][_0x516d9a(0x2ae,0x2b5)](this)),this[_0x43fe42(0x281,0x208)]['morphComplete'][_0x516d9a(0x361,0x2ff)](this['updateViewerParameters']['bind'](this)),window['addEventListener']('resize',this['updateViewerParameters']['bind'](this));}[_0x3c9617(0x549,0x5be)](){this['camera']['changed']['removeEventListener'](this['updateViewerParameters'][_0x4b3382(-0x135,-0xbf)](this)),this['scene']['morphComplete']['removeEventListener'](this[_0x4b3382(-0x124,-0xd4)]['bind'](this)),window['removeEventListener'](_0x4b3382(-0x6f,-0x94),this[_0x49526a(-0x2b9,-0x328)]['bind'](this));function _0x49526a(_0x4321aa,_0x45458d){return _0x3c9617(_0x4321aa- -0x742,_0x45458d);}this[_0x4b3382(-0xe3,-0x11d)]&&(this['primitives']['forEach'](_0x191f2b=>{function _0x36fdae(_0xb6a794,_0xff8ed8){return _0x49526a(_0xff8ed8- -0x7,_0xb6a794);}function _0x3fa0d5(_0x3344d5,_0x4d79c0){return _0x49526a(_0x3344d5-0x17e,_0x4d79c0);}this[_0x36fdae(-0x2c2,-0x283)][_0x3fa0d5(-0xfa,-0x137)]['remove'](_0x191f2b);}),delete this['primitives']);function _0x4b3382(_0x46dacc,_0x47afe4){return _0x3c9617(_0x46dacc- -0x5ad,_0x47afe4);}this['particleSystem']&&(this['particleSystem']['destroy'](),delete this[_0x4b3382(-0xef,-0xfb)]);}['setData'](_0x4d7357,_0x5e470a){function _0x4fc897(_0x5e2749,_0x570754){return _0x3df816(_0x570754,_0x5e2749-0x26a);}this[_0x1d9807(0x300,0x311)]=this['processWindData'](_0x4d7357);function _0x1d9807(_0x572e93,_0x26081a){return _0x3c9617(_0x26081a- -0x21b,_0x572e93);}if(_0x5e470a){this['_removedHook'](),this[_0x1d9807(0x263,0x2bc)]();return;}this['particleSystem']?(this[_0x1d9807(0x2c9,0x2a3)]['computing'][_0x4fc897(0x4bd,0x529)](this[_0x4fc897(0x509,0x487)]),this[_0x1d9807(0x232,0x2ab)]['requestRender']()):this[_0x4fc897(0x4b4,0x459)]();}[_0x3c9617(0x46f,0x473)](_0x3349eb,_0x15d855){function _0x2272a3(_0x520607,_0x31942e){return _0x3df816(_0x31942e,_0x520607- -0x192);}function _0x41102c(_0x52436c,_0xe4864e){return _0x3df816(_0xe4864e,_0x52436c- -0x1bd);}this[_0x41102c(0x74,0x9)]&&(this['particleSystem'][_0x41102c(-0x1,-0x82)](_0x15d855),this['scene'][_0x2272a3(0xd6,0x11e)]());}['processWindData'](_0x47b295){var _0x56ea33,_0x8d14c2;const _0x2b7c2c={..._0x47b295},_0x3b8be1=_0x2b7c2c;!_0x3b8be1['height']&&_0x3b8be1[_0x54b61e(0xcf,0xf7)]&&(_0x3b8be1[_0x10b7e4(0x32c,0x332)]=_0x3b8be1['rows']);!_0x3b8be1['width']&&_0x3b8be1[_0x10b7e4(0x35e,0x371)]&&(_0x3b8be1[_0x10b7e4(0x276,0x29c)]=_0x3b8be1['cols']);!_0x3b8be1['bounds']&&(_0x3b8be1['bounds']={'west':_0x3b8be1['xmin'],'south':_0x3b8be1[_0x54b61e(0x13d,0x19c)],'east':_0x3b8be1['xmax'],'north':_0x3b8be1['ymax']});if(!_0x3b8be1['u']){const _0x25af66={};_0x25af66[_0x54b61e(0xe5,0xff)]=_0x47b295['udata'],_0x25af66[_0x54b61e(0x119,0x198)]=_0x47b295[_0x54b61e(0xd5,0x149)],_0x25af66['max']=_0x47b295[_0x10b7e4(0x33e,0x35b)],_0x3b8be1['u']=_0x25af66;}function _0x10b7e4(_0x528a61,_0x13566b){return _0x3df816(_0x13566b,_0x528a61-0xaf);}if(!_0x3b8be1['v']){const _0x224bf5={};_0x224bf5['array']=_0x47b295['vdata'],_0x224bf5['min']=_0x47b295[_0x54b61e(0xfa,0xe5)],_0x224bf5['max']=_0x47b295[_0x10b7e4(0x2db,0x2da)],_0x3b8be1['v']=_0x224bf5;}function _0x54b61e(_0x31a633,_0x4be28d){return _0x3df816(_0x31a633,_0x4be28d- -0xd9);}if(((_0x56ea33=_0x3b8be1['speed'])===null||_0x56ea33===void 0x0?void 0x0:_0x56ea33['min'])===undefined||((_0x8d14c2=_0x3b8be1['speed'])===null||_0x8d14c2===void 0x0?void 0x0:_0x8d14c2['max'])===undefined||_0x3b8be1[_0x10b7e4(0x30d,0x339)][_0x10b7e4(0x287,0x239)]===undefined){const _0x3abd79={'array':new Float32Array(_0x3b8be1['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0x5d76a8=0x0;_0x5d76a8<_0x3b8be1['u']['array']['length'];_0x5d76a8++){_0x3abd79[_0x10b7e4(0x287,0x2aa)][_0x5d76a8]=Math['sqrt'](_0x3b8be1['u']['array'][_0x5d76a8]*_0x3b8be1['u']['array'][_0x5d76a8]+_0x3b8be1['v']['array'][_0x5d76a8]*_0x3b8be1['v']['array'][_0x5d76a8]),_0x3abd79[_0x54b61e(0x162,0xff)][_0x5d76a8]!==0x0&&(_0x3abd79['min']=Math['min'](_0x3abd79['min'],_0x3abd79['array'][_0x5d76a8]),_0x3abd79['max']=Math[_0x54b61e(0x194,0x156)](_0x3abd79[_0x54b61e(0x1d3,0x156)],_0x3abd79['array'][_0x5d76a8]));}_0x3b8be1['speed']=_0x3abd79;}return _0x3b8be1;}['updateViewerParameters'](){function _0x29accf(_0xbc9fd,_0x446a5a){return _0x3c9617(_0x446a5a- -0x390,_0xbc9fd);}var _0x265e8f;const _0x1bf873=this['scene'],_0x38a68e=_0x1bf873[_0x29accf(0x149,0xd4)],_0x5024dc={};_0x5024dc['x']=0x0,_0x5024dc['y']=0x0;const _0x12cb7c={};function _0x4d04ea(_0x42657a,_0x2d4fe8){return _0x3df816(_0x2d4fe8,_0x42657a- -0x451);}_0x12cb7c['x']=0x0,_0x12cb7c['y']=_0x38a68e['clientHeight'];const _0x26cd9f={};_0x26cd9f['x']=_0x38a68e['clientWidth'],_0x26cd9f['y']=0x0;const _0x378739={};_0x378739['x']=_0x38a68e[_0x29accf(0x140,0x158)],_0x378739['y']=_0x38a68e['clientHeight'];const _0x207776=[_0x5024dc,_0x12cb7c,_0x26cd9f,_0x378739];let _0x12b722=0xb4,_0x238a96=-0xb4,_0x431870=0x5a,_0x19233e=-0x5a,_0x31bf77=![];for(const _0x3bc155 of _0x207776){const _0x220664=_0x1bf873['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x3bc155['x'],_0x3bc155['y']),_0x1bf873['globe'][_0x29accf(0x103,0x146)]);if(!_0x220664){_0x31bf77=!![];break;}const _0x377c3e=_0x1bf873[_0x29accf(0x154,0x180)][_0x4d04ea(-0x208,-0x205)][_0x29accf(0xdd,0x148)](_0x220664),_0x5d6bc9=Cesium$1['Math'][_0x4d04ea(-0x1a3,-0x17b)](_0x377c3e['longitude']),_0x185750=Cesium$1['Math'][_0x4d04ea(-0x1a3,-0x20a)](_0x377c3e['latitude']);_0x12b722=Math[_0x29accf(0x1ce,0x16e)](_0x12b722,_0x5d6bc9),_0x238a96=Math[_0x29accf(0xab,0x12c)](_0x238a96,_0x5d6bc9),_0x431870=Math['min'](_0x431870,_0x185750),_0x19233e=Math[_0x4d04ea(-0x222,-0x250)](_0x19233e,_0x185750);}if(!_0x31bf77){const _0x1ed197=new Cesium$1['Cartesian2'](Math[_0x4d04ea(-0x222,-0x1a4)](this['windData']['bounds']['west'],_0x12b722),Math['min'](this['windData'][_0x4d04ea(-0x226,-0x29c)][_0x29accf(0xb8,0xef)],_0x238a96)),_0x28bc75=new Cesium$1[(_0x29accf(0x104,0xca))](Math[_0x4d04ea(-0x222,-0x1b1)](this[_0x29accf(0x130,0x19c)]['bounds']['south'],_0x431870),Math[_0x4d04ea(-0x1e0,-0x19c)](this['windData'][_0x4d04ea(-0x226,-0x25c)][_0x4d04ea(-0x190,-0x1cd)],_0x19233e)),_0x5e4108=(_0x1ed197['y']-_0x1ed197['x'])*0.05,_0x54f73e=(_0x28bc75['y']-_0x28bc75['x'])*0.05;_0x1ed197['x']=Math['max'](this['windData'][_0x29accf(0x198,0x128)]['west'],_0x1ed197['x']-_0x5e4108),_0x1ed197['y']=Math['min'](this['windData']['bounds']['east'],_0x1ed197['y']+_0x5e4108),_0x28bc75['x']=Math[_0x29accf(0x193,0x12c)](this[_0x29accf(0x142,0x19c)]['bounds']['south'],_0x28bc75['x']-_0x54f73e),_0x28bc75['y']=Math['min'](this[_0x29accf(0x119,0x19c)][_0x4d04ea(-0x226,-0x28c)][_0x4d04ea(-0x190,-0x209)],_0x28bc75['y']+_0x54f73e),this['viewerParameters']['lonRange']=_0x1ed197,this[_0x4d04ea(-0x28e,-0x285)]['latRange']=_0x28bc75;const _0x34d306=this['windData'][_0x4d04ea(-0x226,-0x216)]['east']-this[_0x29accf(0x149,0x19c)][_0x4d04ea(-0x226,-0x23a)][_0x29accf(0x185,0x127)],_0x3b4c7f=this[_0x29accf(0x14a,0x19c)]['bounds']['north']-this['windData']['bounds'][_0x29accf(0x155,0xf7)],_0x12df68=(_0x1ed197['y']-_0x1ed197['x'])/_0x34d306,_0x410375=(_0x28bc75['y']-_0x28bc75['x'])/_0x3b4c7f,_0x323002=Math['min'](_0x12df68,_0x410375),_0x366604=0x3e8*_0x323002;_0x366604>0x0&&(this['viewerParameters']['pixelSize']=Math['max'](0x0,Math['min'](0x3e8,_0x366604)));}this['viewerParameters']['sceneMode']=this['scene'][_0x4d04ea(-0x1ea,-0x217)],(_0x265e8f=this['particleSystem'])===null||_0x265e8f===void 0x0||_0x265e8f['applyViewerParameters'](this['viewerParameters']);}[_0x3c9617(0x4b1,0x51f)](_0x4046c7,_0x137190){const {bounds:_0xedaaf,width:_0x4d5e74,height:_0x4e0c00,u:_0x452715,v:_0x2e68cd,speed:_0x46f057}=this['windData'],{flipY:_0x1e4051}=this[_0x21e4fe(-0x10b,-0xe1)];if(_0x4046c7<_0xedaaf[_0x21e4fe(-0x1cb,-0x16e)]||_0x4046c7>_0xedaaf['east']||_0x137190<_0xedaaf[_0x21e4fe(-0x205,-0x19e)]||_0x137190>_0xedaaf[_0x18bf08(-0x2f,-0xab)])return null;const _0x2ce105=(_0x4046c7-_0xedaaf['west'])/(_0xedaaf[_0x18bf08(-0x1b9,-0x17a)]-_0xedaaf['west'])*(_0x4d5e74-0x1);let _0x1af960=(_0x137190-_0xedaaf['south'])/(_0xedaaf[_0x21e4fe(-0x114,-0xd7)]-_0xedaaf['south'])*(_0x4e0c00-0x1);_0x1e4051&&(_0x1af960=_0x4e0c00-0x1-_0x1af960);const _0x3d73fd=Math['floor'](_0x2ce105),_0x59a4fe=Math['floor'](_0x1af960),_0x573ebc=Math['floor'](_0x2ce105),_0x55dfa0=Math['min'](_0x573ebc+0x1,_0x4d5e74-0x1),_0x37e0b8=Math[_0x18bf08(-0x181,-0x171)](_0x1af960),_0x583d37=Math[_0x18bf08(-0x147,-0xfb)](_0x37e0b8+0x1,_0x4e0c00-0x1),_0x384b61=_0x2ce105-_0x573ebc,_0x3bdc3b=_0x1af960-_0x37e0b8,_0x2493e6=_0x59a4fe*_0x4d5e74+_0x3d73fd,_0x17e5c5=_0x37e0b8*_0x4d5e74+_0x573ebc,_0x310419=_0x37e0b8*_0x4d5e74+_0x55dfa0,_0x24fae2=_0x583d37*_0x4d5e74+_0x573ebc,_0x312a1f=_0x583d37*_0x4d5e74+_0x55dfa0,_0xdffa7=_0x452715['array'][_0x17e5c5],_0x126bc3=_0x452715['array'][_0x310419],_0x15d315=_0x452715[_0x18bf08(-0x198,-0x194)][_0x24fae2],_0x5cb0e5=_0x452715['array'][_0x312a1f],_0x51dc6b=(0x1-_0x384b61)*(0x1-_0x3bdc3b)*_0xdffa7+_0x384b61*(0x1-_0x3bdc3b)*_0x126bc3+(0x1-_0x384b61)*_0x3bdc3b*_0x15d315+_0x384b61*_0x3bdc3b*_0x5cb0e5,_0x2b7321=_0x2e68cd['array'][_0x17e5c5],_0x59dce7=_0x2e68cd['array'][_0x310419],_0x443d0f=_0x2e68cd[_0x21e4fe(-0x247,-0x1c0)][_0x24fae2],_0x59c5fd=_0x2e68cd[_0x21e4fe(-0x1a3,-0x1c0)][_0x312a1f],_0x56ecd9=(0x1-_0x384b61)*(0x1-_0x3bdc3b)*_0x2b7321+_0x384b61*(0x1-_0x3bdc3b)*_0x59dce7+(0x1-_0x384b61)*_0x3bdc3b*_0x443d0f+_0x384b61*_0x3bdc3b*_0x59c5fd,_0x61a6ad=Math[_0x18bf08(-0x115,-0xe8)](_0x51dc6b*_0x51dc6b+_0x56ecd9*_0x56ecd9),_0xc118d8={};_0xc118d8['u']=_0x452715['array'][_0x2493e6];function _0x18bf08(_0x2b457d,_0x17f8f3){return _0x3c9617(_0x17f8f3- -0x5f9,_0x2b457d);}_0xc118d8['v']=_0x2e68cd[_0x21e4fe(-0x205,-0x1c0)][_0x2493e6],_0xc118d8[_0x18bf08(-0x13c,-0x10e)]=_0x46f057[_0x18bf08(-0x17d,-0x194)][_0x2493e6];function _0x21e4fe(_0x56e212,_0x240ef6){return _0x3df816(_0x56e212,_0x240ef6- -0x398);}const _0xfbbcbe={};_0xfbbcbe['u']=_0x51dc6b,_0xfbbcbe['v']=_0x56ecd9,_0xfbbcbe[_0x21e4fe(-0xb4,-0x13a)]=_0x61a6ad;const _0x2d395a={};return _0x2d395a['original']=_0xc118d8,_0x2d395a['interpolated']=_0xfbbcbe,_0x2d395a;}}mars3d__namespace['LayerUtil']['register'](_0x3c9617(0x50e,0x487),WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;function _0x3c9617(_0x5913aa,_0x18ea0f){return _0x3a09(_0x5913aa-0x38e,_0x18ea0f);}class CanvasParticle{constructor(){this['lng']=null;function _0x1b9617(_0x374fdd,_0x18e5d7){return _0x3df816(_0x374fdd,_0x18e5d7- -0x239);}this[_0x1b9617(0x43,0x52)]=null,this['tlng']=null,this['tlat']=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x59df23 in this){delete this[_0x59df23];}}}class CanvasWindField{constructor(_0x400083){function _0x40684b(_0x5f193a,_0x25dbbe){return _0x3c9617(_0x25dbbe- -0x3cd,_0x5f193a);}this[_0x40684b(0xd9,0x154)](_0x400083);}get['speedRate'](){function _0x32f274(_0x14d389,_0x358cf5){return _0x3df816(_0x14d389,_0x358cf5- -0x4ad);}return this[_0x32f274(-0x244,-0x244)];}set[_0x3df816(0x24e,0x1e9)](_0x492159){this['_speedRate']=(0x64-(_0x492159>0x63?0x63:_0x492159))*0x64;function _0x1cc8e1(_0x48bcdd,_0xd4963d){return _0x3df816(_0x48bcdd,_0xd4963d- -0x130);}function _0x50db5a(_0x26d87e,_0x121c6b){return _0x3c9617(_0x26d87e- -0x23d,_0x121c6b);}this['_calc_speedRate']=[(this[_0x50db5a(0x2a9,0x2df)]-this['xmin'])/this[_0x1cc8e1(0x18e,0x139)],(this['ymax']-this[_0x50db5a(0x2c5,0x288)])/this[_0x50db5a(0x2b9,0x26b)]];}get[_0x3c9617(0x4db,0x4d6)](){return this['_maxAge'];}set[_0x3df816(0x1e0,0x24e)](_0x268913){function _0xdd0f3f(_0x285411,_0x22479a){return _0x3c9617(_0x285411- -0x49c,_0x22479a);}this[_0xdd0f3f(-0x2,-0x5c)]=_0x268913;}[_0x3df816(0x24e,0x294)](_0x1b6180){this['options']=_0x1b6180,this['maxAge']=_0x1b6180['maxAge']||0x78,this[_0x28c38c(0x33d,0x3ba)]=_0x1b6180['speedRate']||0x32,this['particles']=[];const _0x570038=_0x1b6180[_0x28c38c(0x3be,0x3a7)]||0x1000;function _0x28c38c(_0xa98451,_0x51dea1){return _0x3c9617(_0x51dea1- -0xbc,_0xa98451);}function _0x289e3a(_0x32c311,_0x503ca2){return _0x3df816(_0x503ca2,_0x32c311- -0x368);}for(let _0x45f866=0x0;_0x45f866<_0x570038;_0x45f866++){const _0x4a8764=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x4a8764);}}['setDate'](_0x3ed39d){this['rows']=_0x3ed39d['rows'],this['cols']=_0x3ed39d['cols'],this[_0x33fb73(0x200,0x229)]=_0x3ed39d[_0x3fbcdc(0xad,0x6e)],this[_0x33fb73(0x224,0x26e)]=_0x3ed39d['xmax'],this['ymin']=_0x3ed39d[_0x33fb73(0x258,0x28a)];function _0x33fb73(_0x27b740,_0x5054bb){return _0x3c9617(_0x5054bb- -0x278,_0x27b740);}this['ymax']=_0x3ed39d['ymax'],this['grid']=[];const _0x533cb4=_0x3ed39d[_0x33fb73(0x216,0x1f5)];function _0x3fbcdc(_0x15c7de,_0x33ca5f){return _0x3df816(_0x33ca5f,_0x15c7de- -0x167);}const _0x160b92=_0x3ed39d['vdata'];let _0x208db2=![];_0x533cb4['length']===this[_0x3fbcdc(0x69,0xd6)]&&_0x533cb4[0x0][_0x3fbcdc(0x119,0x170)]===this[_0x3fbcdc(0x148,0x1a8)]&&(_0x208db2=!![]);let _0x283c66=0x0,_0x1a1af1=null,_0x33b409=null;for(let _0x3e05c3=0x0;_0x3e05c3<this[_0x33fb73(0x25d,0x1e5)];_0x3e05c3++){_0x1a1af1=[];for(let _0x3934ee=0x0;_0x3934ee<this['cols'];_0x3934ee++,_0x283c66++){_0x208db2?_0x33b409=this['_calcUV'](_0x533cb4[_0x3e05c3][_0x3934ee],_0x160b92[_0x3e05c3][_0x3934ee]):_0x33b409=this['_calcUV'](_0x533cb4[_0x283c66],_0x160b92[_0x283c66]),_0x1a1af1['push'](_0x33b409);}this[_0x3fbcdc(0xe1,0x161)]['push'](_0x1a1af1);}this[_0x3fbcdc(0x150,0x12c)]['reverseY']&&this[_0x33fb73(0x232,0x25d)]['reverse']();}['clear'](){delete this['rows'],delete this['cols'],delete this['xmin'];function _0x196b88(_0x1f9b30,_0x8a384d){return _0x3df816(_0x1f9b30,_0x8a384d- -0x9c);}delete this['xmax'],delete this['ymin'],delete this['ymax'],delete this['grid'],delete this[_0x196b88(0x181,0x1df)];}['toGridXY'](_0x5a25fd,_0x139da1){function _0x54c640(_0x527391,_0x31a5c4){return _0x3c9617(_0x527391- -0x305,_0x31a5c4);}const _0x37d1c2=(_0x5a25fd-this['xmin'])/(this['xmax']-this['xmin'])*(this[_0x54c640(0x237,0x24f)]-0x1),_0x3d3ae4=(this['ymax']-_0x139da1)/(this[_0x1b2c90(-0x20f,-0x26f)]-this[_0x1b2c90(-0x264,-0x240)])*(this[_0x1b2c90(-0x279,-0x2e5)]-0x1);function _0x1b2c90(_0x40dc86,_0x3729b5){return _0x3df816(_0x40dc86,_0x3729b5- -0x4b5);}return[_0x37d1c2,_0x3d3ae4];}['getUVByXY'](_0x10f677,_0x2cffba){if(_0x10f677<0x0||_0x10f677>=this['cols']||_0x2cffba>=this['rows'])return[0x0,0x0,0x0];function _0x341ace(_0x56bf1a,_0x3b3c0e){return _0x3df816(_0x56bf1a,_0x3b3c0e- -0x2a);}const _0x17d757=Math['floor'](_0x10f677),_0x1d5aa5=Math[_0x341ace(0x168,0x1d1)](_0x2cffba);if(_0x17d757===_0x10f677&&_0x1d5aa5===_0x2cffba)return this['grid'][_0x2cffba][_0x10f677];const _0x5ab5de=_0x17d757+0x1,_0x9de68c=_0x1d5aa5+0x1,_0x9a8105=this['getUVByXY'](_0x17d757,_0x1d5aa5),_0x39b0cb=this['getUVByXY'](_0x5ab5de,_0x1d5aa5),_0x4de1b3=this['getUVByXY'](_0x17d757,_0x9de68c),_0x13cef8=this['getUVByXY'](_0x5ab5de,_0x9de68c);let _0x29720c=null;try{_0x29720c=this['_bilinearInterpolation'](_0x10f677-_0x17d757,_0x2cffba-_0x1d5aa5,_0x9a8105,_0x39b0cb,_0x4de1b3,_0x13cef8);}catch(_0x274afc){console['log'](_0x10f677,_0x2cffba);}return _0x29720c;}['_bilinearInterpolation'](_0x139090,_0x48764d,_0x118aeb,_0x5bbc7f,_0x5c5246,_0x2f16c9){const _0x5ecbaa=0x1-_0x139090,_0x4ed517=0x1-_0x48764d,_0x45896c=_0x5ecbaa*_0x4ed517,_0x30f7d9=_0x139090*_0x4ed517,_0x4f92a5=_0x5ecbaa*_0x48764d,_0x831fa1=_0x139090*_0x48764d;function _0x503999(_0x14e0d3,_0xd67e12){return _0x3c9617(_0x14e0d3-0x13,_0xd67e12);}const _0x17d2a4=_0x118aeb[0x0]*_0x45896c+_0x5bbc7f[0x0]*_0x30f7d9+_0x5c5246[0x0]*_0x4f92a5+_0x2f16c9[0x0]*_0x831fa1,_0x649d30=_0x118aeb[0x1]*_0x45896c+_0x5bbc7f[0x1]*_0x30f7d9+_0x5c5246[0x1]*_0x4f92a5+_0x2f16c9[0x1]*_0x831fa1;return this[_0x503999(0x4f6,0x521)](_0x17d2a4,_0x649d30);}['_calcUV'](_0x41b4d8,_0x1bc901){function _0xa51025(_0x4efa3c,_0x37587c){return _0x3c9617(_0x4efa3c- -0x37,_0x37587c);}return[+_0x41b4d8,+_0x1bc901,Math[_0xa51025(0x4da,0x539)](_0x41b4d8*_0x41b4d8+_0x1bc901*_0x1bc901)];}['getUVByPoint'](_0x3ad1a3,_0x1b3c6b){if(!this['isInExtent'](_0x3ad1a3,_0x1b3c6b))return null;const _0x1cc398=this[_0xd1803f(0x59b,0x551)](_0x3ad1a3,_0x1b3c6b),_0x569b21=this['getUVByXY'](_0x1cc398[0x0],_0x1cc398[0x1]);function _0xd1803f(_0x487380,_0xd6a912){return _0x3df816(_0x487380,_0xd6a912-0x287);}return _0x569b21;}[_0x3c9617(0x458,0x400)](_0x14da26,_0x504011){function _0x526525(_0x209818,_0x4e168c){return _0x3c9617(_0x209818-0x1,_0x4e168c);}function _0x14501c(_0x1f91a6,_0xf26a5){return _0x3df816(_0x1f91a6,_0xf26a5-0x150);}return _0x14da26>=this[_0x14501c(0x35e,0x364)]&&_0x14da26<=this['xmax']&&_0x504011>=this[_0x526525(0x503,0x4e9)]&&_0x504011<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x45cc60=fRandomByfloat(this['xmin'],this['xmax']),_0x306038=fRandomByfloat(this['ymin'],this['ymax']),_0x2c1e06={};return _0x2c1e06['lat']=_0x306038,_0x2c1e06['lng']=_0x45cc60,_0x2c1e06;}[_0x3c9617(0x452,0x47a)](){let _0x9aade,_0x2c2db6,_0x1809a4;function _0x5e17f6(_0x4d5a34,_0x2e857f){return _0x3df816(_0x2e857f,_0x4d5a34- -0x454);}for(let _0x30e021=0x0,_0x5c8137=this['particles'][_0x5e17f6(-0x1d4,-0x1bc)];_0x30e021<_0x5c8137;_0x30e021++){let _0x5d7eb3=this['particles'][_0x30e021];_0x5d7eb3[_0x5e17f6(-0x1b1,-0x1ff)]<=0x0&&(_0x5d7eb3=this['_randomParticle'](_0x5d7eb3));if(_0x5d7eb3[_0x5c9c43(-0x17a,-0x1d4)]>0x0){const _0x4fb93b=_0x5d7eb3[_0x5e17f6(-0x1fc,-0x1d5)],_0x582de2=_0x5d7eb3['tlat'];_0x1809a4=this['getUVByPoint'](_0x4fb93b,_0x582de2),_0x1809a4?(_0x9aade=_0x4fb93b+this['_calc_speedRate'][0x0]*_0x1809a4[0x0],_0x2c2db6=_0x582de2+this[_0x5c9c43(-0x1e1,-0x1db)][0x1]*_0x1809a4[0x1],_0x5d7eb3['lng']=_0x4fb93b,_0x5d7eb3['lat']=_0x582de2,_0x5d7eb3['tlng']=_0x9aade,_0x5d7eb3['tlat']=_0x2c2db6,_0x5d7eb3['speed']=_0x1809a4[0x2],_0x5d7eb3['age']--):_0x5d7eb3['age']=0x0;}}function _0x5c9c43(_0x548bd1,_0x2b3e8a){return _0x3df816(_0x548bd1,_0x2b3e8a- -0x477);}return this['particles'];}['_randomParticle'](_0x4c1fe0){let _0x2f24d6,_0x39f8f0;function _0x4b5596(_0x57ad6,_0x38c978){return _0x3df816(_0x38c978,_0x57ad6- -0x350);}for(let _0x241943=0x0;_0x241943<0x1e;_0x241943++){_0x2f24d6=this['getRandomLatLng'](),_0x39f8f0=this[_0x3bda48(0x63,0x73)](_0x2f24d6[_0x3bda48(0x4f,0x2e)],_0x2f24d6[_0x4b5596(-0xc5,-0x80)]);if(_0x39f8f0&&_0x39f8f0[0x2]>0x0)break;}if(!_0x39f8f0)return _0x4c1fe0;const _0x48a0df=_0x2f24d6['lng']+this[_0x3bda48(0xe6,0xff)][0x0]*_0x39f8f0[0x0],_0x3888e6=_0x2f24d6['lat']+this['_calc_speedRate'][0x1]*_0x39f8f0[0x1];_0x4c1fe0[_0x3bda48(0x4f,-0x39)]=_0x2f24d6['lng'],_0x4c1fe0['lat']=_0x2f24d6[_0x3bda48(0xd5,0xf4)],_0x4c1fe0['tlng']=_0x48a0df,_0x4c1fe0['tlat']=_0x3888e6,_0x4c1fe0['age']=Math['round'](Math['random']()*this['maxAge']);function _0x3bda48(_0x3c7582,_0x2bdcc4){return _0x3c9617(_0x3c7582- -0x443,_0x2bdcc4);}return _0x4c1fe0['speed']=_0x39f8f0[0x2],_0x4c1fe0;}[_0x3c9617(0x50c,0x487)](){for(const _0x478c00 in this){delete this[_0x478c00];}}}function fRandomByfloat(_0xeb0ec6,_0x837eb9){function _0x3aaa9d(_0x4be14d,_0x259150){return _0x3c9617(_0x4be14d- -0x20b,_0x259150);}return _0xeb0ec6+Math[_0x3aaa9d(0x2d3,0x318)]()*(_0x837eb9-_0xeb0ec6);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x3c9617(0x524,0x54c)];function _0x3a09(_0x349c80,_0x2289c9){const _0x1c3637=_0x1c36();return _0x3a09=function(_0x3a09eb,_0x269a32){_0x3a09eb=_0x3a09eb-0xb3;let _0x4aa736=_0x1c3637[_0x3a09eb];return _0x4aa736;},_0x3a09(_0x349c80,_0x2289c9);}class CanvasWindLayer extends BaseLayer{constructor(_0x254c73={}){function _0x2cc2c8(_0x19411c,_0x341edf){return _0x3c9617(_0x19411c- -0x43e,_0x341edf);}super(_0x254c73),this['_setOptionsHook'](_0x254c73);function _0x463eab(_0xeea63d,_0x59d87f){return _0x3c9617(_0x59d87f-0x4b,_0xeea63d);}this[_0x2cc2c8(0x26,0x10)]=null,_0x254c73[_0x2cc2c8(0x64,0x6d)]&&_0x254c73[_0x2cc2c8(0x76,0x5)]&&(this['_colorRamp']=new mars3d__namespace[(_0x2cc2c8(0x2c,0x73))](_0x254c73));}['_setOptionsHook'](_0x533c1b,_0x190d4e){this['frameTime']=0x3e8/(_0x533c1b['frameRate']||0xa);function _0x30cc76(_0xcbe13,_0x4d0abc){return _0x3c9617(_0xcbe13- -0x2ac,_0x4d0abc);}function _0x5a8c5b(_0x2a28e8,_0x48cf1f){return _0x3df816(_0x48cf1f,_0x2a28e8-0x10a);}this[_0x30cc76(0x1fb,0x273)]=this[_0x30cc76(0x298,0x2d8)]['pointerEvents']??![],this[_0x5a8c5b(0x3b2,0x33b)]=_0x533c1b[_0x5a8c5b(0x3b2,0x379)]||_0x5a8c5b(0x3cf,0x442),this[_0x30cc76(0x223,0x23a)]=_0x533c1b['lineWidth']||0x1,this[_0x30cc76(0x294,0x280)]=_0x533c1b[_0x30cc76(0x294,0x20c)]??0x0,this['reverseY']=_0x533c1b['reverseY']??![],this[_0x30cc76(0x24e,0x225)]&&this[_0x5a8c5b(0x377,0x345)]['setOptions'](_0x533c1b);}get[_0x3df816(0x265,0x1ea)](){function _0x330d06(_0x130a10,_0x16c263){return _0x3df816(_0x16c263,_0x130a10- -0x47f);}return this[_0x330d06(-0x2a8,-0x303)];}get[_0x3c9617(0x543,0x547)](){function _0x5b0cae(_0x91d9e,_0xdaafc){return _0x3df816(_0xdaafc,_0x91d9e- -0x3e1);}function _0x4766eb(_0x126112,_0x420f76){return _0x3c9617(_0x420f76- -0x28,_0x126112);}return this[_0x5b0cae(-0x227,-0x292)]['scene'][_0x5b0cae(-0x20a,-0x1df)]['clientWidth'];}get[_0x3c9617(0x4a0,0x4ea)](){return this['_map']['scene']['canvas']['clientHeight'];}get[_0x3df816(0x234,0x245)](){return this['_pointerEvents'];}set['pointerEvents'](_0x2c5bf8){this[_0x8be7(0x230,0x23b)]=_0x2c5bf8;function _0x9d8c09(_0x3dc347,_0x18b934){return _0x3df816(_0x18b934,_0x3dc347- -0x410);}if(!this[_0x9d8c09(-0x239,-0x1e8)])return;function _0x8be7(_0x192e7e,_0x14a23a){return _0x3df816(_0x192e7e,_0x14a23a-0x21);}_0x2c5bf8?this['canvas']['style']['pointer-events']='all':this[_0x8be7(0x1b3,0x1f8)]['style']['pointer-events']='none';}get[_0x3df816(0x190,0x1d6)](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x1cf03b){function _0x128865(_0xbfd77b,_0x1ca477){return _0x3c9617(_0x1ca477- -0x677,_0xbfd77b);}this['options'][_0x128865(-0x1ae,-0x214)]=_0x1cf03b,clearTimeout(this[_0x128865(-0x1e2,-0x1d4)]);function _0x3eac5c(_0x125d8d,_0x36be51){return _0x3df816(_0x125d8d,_0x36be51-0x6a);}this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x3df816(0x22e,0x1e9)](){return this['options']['speedRate'];}set['speedRate'](_0x2c9628){function _0x3cd078(_0x20f48b,_0x1f11d4){return _0x3c9617(_0x20f48b- -0x314,_0x1f11d4);}this[_0x3cd078(0x230,0x234)][_0x20881f(0x454,0x3ca)]=_0x2c9628;function _0x20881f(_0x5080c0,_0x1cce68){return _0x3c9617(_0x5080c0- -0x22,_0x1cce68);}this['windField']&&(this['windField'][_0x3cd078(0x162,0x137)]=_0x2c9628);}get['maxAge'](){function _0x4b246f(_0x433581,_0x3f8575){return _0x3df816(_0x3f8575,_0x433581- -0x45b);}return this[_0x4b246f(-0x1a4,-0x1c0)]['maxAge'];}set[_0x3c9617(0x4db,0x470)](_0x2b848a){function _0x4587ec(_0x9cb007,_0x55502b){return _0x3c9617(_0x55502b- -0x1ca,_0x9cb007);}this[_0x4587ec(0x3fb,0x37a)]['maxAge']=_0x2b848a;function _0x51d462(_0x58ec97,_0x5e9097){return _0x3c9617(_0x5e9097- -0x4d,_0x58ec97);}this['windField']&&(this[_0x4587ec(0x2c7,0x330)][_0x51d462(0x485,0x48e)]=_0x2b848a);}get[_0x3c9617(0x479,0x421)](){function _0x315253(_0x8c5a67,_0x51d6bf){return _0x3c9617(_0x8c5a67- -0x59d,_0x51d6bf);}return this[_0x315253(-0x71,-0xee)];}set[_0x3c9617(0x479,0x457)](_0x4398c6){this['setData'](_0x4398c6);}get['rectangle'](){let _0x3451ae=this['windData'][_0x4fac3d(0x162,0xec)],_0xeda20c=this['windData'][_0x4fac3d(0xbf,0x131)],_0x354ca9=this['windData']['ymin'],_0x5288a=this['windData']['ymax'];_0xeda20c>=0x167&&_0x3451ae===0x0&&(_0x3451ae=-0xb4,_0xeda20c=0xb4);_0x3451ae=Math['max'](_0x3451ae,-0xb4),_0xeda20c=Math['min'](_0xeda20c,0xb4);function _0x206edf(_0xf0fab7,_0x1a0ef8){return _0x3c9617(_0xf0fab7- -0x635,_0x1a0ef8);}_0x354ca9=Math[_0x206edf(-0x179,-0x1e8)](_0x354ca9,-0x5a);function _0x4fac3d(_0x2b6659,_0x5a50f9){return _0x3c9617(_0x5a50f9- -0x3b5,_0x2b6659);}return _0x5288a=Math[_0x206edf(-0x137,-0x130)](_0x5288a,0x5a),Cesium['Rectangle'][_0x206edf(-0xf8,-0x173)](_0x3451ae,_0x354ca9,_0xeda20c,_0x5288a);}['_showHook'](_0x58cb6e){function _0x4cda31(_0x577ece,_0x2eac9b){return _0x3df816(_0x2eac9b,_0x577ece- -0x39f);}function _0x57bd73(_0x5ea9e5,_0x44dc49){return _0x3c9617(_0x5ea9e5- -0x619,_0x44dc49);}_0x58cb6e?this['_addedHook']():(this[_0x4cda31(-0x100,-0x9d)]&&(this[_0x57bd73(-0xd5,-0x5e)]['data']=this['windData']),this[_0x57bd73(-0xd0,-0x110)]());}['_mountedHook'](){function _0x4192ae(_0x25d85b,_0x2be2e1){return _0x3c9617(_0x2be2e1- -0x47e,_0x25d85b);}function _0x3b918d(_0x4f8537,_0xb13add){return _0x3df816(_0x4f8537,_0xb13add- -0x29f);}this['options'][_0x3b918d(0x25,-0x15)]?this['initWorker']():this[_0x3b918d(-0x2e,-0x32)]=new CanvasWindField(this['options']);}[_0x3df816(0x2a4,0x24a)](){this['canvas']=this['_createCanvas']();function _0x1bb511(_0x2613b4,_0x4fb3f1){return _0x3c9617(_0x4fb3f1- -0x6ab,_0x2613b4);}const _0x450da0={};_0x450da0[_0x1bb511(-0x1a7,-0x1ee)]=!![],this[_0x53c055(-0x21e,-0x1d6)]=this['canvas']['getContext']('2d',_0x450da0),this['bindEvent']();function _0x53c055(_0x2b89e4,_0x31f420){return _0x3df816(_0x31f420,_0x2b89e4- -0x49c);}this['options']['data']&&this['setData'](this[_0x1bb511(-0x1ea,-0x167)]['data']);}[_0x3df816(0x246,0x2bc)](){this['clear'](),this['unbindEvent']();function _0x4c2223(_0x1d80b4,_0x4d2888){return _0x3c9617(_0x1d80b4- -0x356,_0x4d2888);}function _0x4d1873(_0x359edd,_0x232969){return _0x3c9617(_0x232969- -0x5d3,_0x359edd);}this[_0x4d1873(-0x1c1,-0x16f)]&&(this['_map']['container'][_0x4c2223(0x11b,0x18d)](this['canvas']),delete this['canvas']);}['_createCanvas'](){const _0x595f63=mars3d__namespace['DomUtil']['create']('canvas','mars3d-canvasWind',this['_map']['container']);_0x595f63[_0x384146(-0x1d,-0x4f)]['position']='absolute';function _0x384146(_0x57ba06,_0x462695){return _0x3df816(_0x462695,_0x57ba06- -0x2dd);}function _0x179cf5(_0xdb998c,_0x4c49a8){return _0x3c9617(_0x4c49a8- -0x118,_0xdb998c);}return _0x595f63[_0x384146(-0x1d,0x4)]['top']=_0x384146(-0xa3,-0xf8),_0x595f63['style']['left']='0px',_0x595f63[_0x179cf5(0x3f5,0x435)][_0x384146(-0x116,-0xd1)]=this['_map']['scene']['canvas']['clientWidth']+'px',_0x595f63['style']['height']=this['_map'][_0x179cf5(0x3a0,0x3ae)]['canvas']['clientHeight']+'px',_0x595f63['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x595f63['style'][_0x179cf5(0x3de,0x362)]=this[_0x384146(-0x26,-0x6f)]['zIndex']??0x9,_0x595f63['width']=this[_0x179cf5(0x2f4,0x32f)]['scene']['canvas']['clientWidth'],_0x595f63['height']=this['_map']['scene']['canvas'][_0x384146(-0x56,-0x99)],_0x595f63;}['resize'](){function _0x39de7d(_0x1f66b5,_0x12afab){return _0x3df816(_0x12afab,_0x1f66b5-0x157);}function _0x248e0c(_0x3657cd,_0x4f0689){return _0x3df816(_0x3657cd,_0x4f0689-0x243);}this[_0x248e0c(0x392,0x41a)]&&(this['canvas']['style']['width']=this[_0x248e0c(0x409,0x3fd)]['scene'][_0x39de7d(0x32e,0x367)]['clientWidth']+'px',this['canvas'][_0x39de7d(0x417,0x3db)][_0x39de7d(0x3d4,0x414)]=this[_0x248e0c(0x38a,0x3fd)][_0x39de7d(0x390,0x337)]['canvas'][_0x248e0c(0x483,0x4ca)]+'px',this['canvas'][_0x248e0c(0x482,0x40a)]=this['_map']['scene'][_0x39de7d(0x32e,0x309)]['clientWidth'],this[_0x248e0c(0x459,0x41a)]['height']=this[_0x248e0c(0x3af,0x3fd)][_0x248e0c(0x4ec,0x47c)]['canvas']['clientHeight']);}['bindEvent'](){function _0x251d97(_0x7362f,_0x215d5a){return _0x3df816(_0x215d5a,_0x7362f-0x23e);}const _0x1d91c3=this;function _0x93ee25(_0x2c7c2e,_0x535ca8){return _0x3df816(_0x535ca8,_0x2c7c2e- -0x1d1);}let _0x76c7ab=Date[_0x251d97(0x501,0x4a9)]();(function _0x43f5aa(){function _0x57143f(_0x1b39c3,_0x3bcecc){return _0x251d97(_0x1b39c3- -0x613,_0x3bcecc);}if(_0x1d91c3['isDestroy'])return;_0x1d91c3['_animateFrame']=window[_0x57143f(-0x17e,-0x15b)](_0x43f5aa);if(_0x1d91c3['show']&&_0x1d91c3['windField']){const _0x59075d=Date['now'](),_0x4f8d63=_0x59075d-_0x76c7ab;_0x4f8d63>_0x1d91c3['frameTime']&&(_0x76c7ab=_0x59075d-_0x4f8d63%_0x1d91c3['frameTime'],_0x1d91c3['update']());}}(),window['addEventListener']('resize',this['resize']['bind'](this),![]),this['mouse_down']=![],this['mouse_move']=![],this[_0x93ee25(0xe6,0x131)]['mouseHidden']&&(this[_0x251d97(0x3f8,0x3e7)]['on'](mars3d__namespace['EventType']['wheel'],this[_0x93ee25(0x52,0x19)],this),this[_0x251d97(0x3f8,0x388)]['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace[_0x93ee25(0xa3,0x89)][_0x93ee25(0x1,0x23)],this[_0x93ee25(0xdb,0xa3)],this)));}['unbindEvent'](){window[_0x2f1bd8(-0x25f,-0x20e)](this[_0x2f1bd8(-0x385,-0x30c)]),delete this['_animateFrame'];function _0x1c808f(_0x36feef,_0x39ed8b){return _0x3c9617(_0x39ed8b- -0x1bc,_0x36feef);}window[_0x1c808f(0x2e0,0x2b8)]('resize',this['resize']);function _0x2f1bd8(_0x32615d,_0x125fcc){return _0x3c9617(_0x125fcc- -0x75a,_0x32615d);}this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace[_0x2f1bd8(-0x2c8,-0x259)][_0x2f1bd8(-0x2c4,-0x299)],this[_0x2f1bd8(-0x272,-0x2aa)],this),this[_0x2f1bd8(-0x387,-0x313)]['off'](mars3d__namespace[_0x1c808f(0x360,0x345)][_0x2f1bd8(-0x244,-0x257)],this['_onMouseDownEvent'],this),this[_0x2f1bd8(-0x315,-0x313)]['off'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this[_0x2f1bd8(-0x28d,-0x313)][_0x2f1bd8(-0x20b,-0x238)](mars3d__namespace[_0x2f1bd8(-0x2e0,-0x259)]['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x5cf56c){clearTimeout(this[_0x5143fa(-0x245,-0x21c)]);function _0x3d322a(_0x199bee,_0x1785e7){return _0x3df816(_0x199bee,_0x1785e7- -0x1dc);}if(!this[_0x5143fa(-0x233,-0x1fb)]||!this[_0x5143fa(-0x226,-0x27e)])return;this[_0x5143fa(-0x226,-0x19b)]['style']['visibility']='hidden';function _0x5143fa(_0x12c84a,_0x25b1fc){return _0x3c9617(_0x12c84a- -0x68a,_0x25b1fc);}this['refreshTimer']=setTimeout(()=>{function _0x310af5(_0x1547b0,_0x2f18fa){return _0x3d322a(_0x1547b0,_0x2f18fa-0x23c);}if(!this['show'])return;function _0x4362e1(_0xf81d82,_0x2ef49c){return _0x3d322a(_0x2ef49c,_0xf81d82- -0x169);}this[_0x310af5(0x2c6,0x2f8)](),this[_0x4362e1(-0x16e,-0x170)][_0x310af5(0x39e,0x320)]['visibility']='visible';},0xc8);}[_0x3df816(0x1f7,0x210)](_0x4c579c){function _0xb938b1(_0x2b5e21,_0xdc6d49){return _0x3c9617(_0xdc6d49- -0x55d,_0x2b5e21);}this['mouse_down']=!![];function _0x45c946(_0x1a249e,_0x3aa3cf){return _0x3c9617(_0x3aa3cf- -0x383,_0x1a249e);}this['_map'][_0xb938b1(-0x52,-0x3b)](mars3d__namespace['EventType'][_0xb938b1(-0x35,-0x13)],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace[_0x45c946(0x129,0x17e)]['mouseMove'],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x4ff7db){if(!this['show']||!this['canvas'])return;function _0x30d6e0(_0x3bc8b1,_0x52257e){return _0x3c9617(_0x3bc8b1- -0x46d,_0x52257e);}function _0xd004c8(_0x2dccdb,_0x1e7287){return _0x3df816(_0x1e7287,_0x2dccdb- -0xff);}this['mouse_down']&&(this['canvas']['style'][_0xd004c8(0xf0,0xc6)]='hidden',this[_0xd004c8(0x1a1,0x143)]=!![]);}[_0x3df816(0x27d,0x2ac)](_0x21e6ba){if(!this[_0x425179(-0x280,-0x25f)]||!this[_0x425179(-0x273,-0x2de)])return;this['_map']['off'](mars3d__namespace[_0x425179(-0x1d6,-0x187)]['mouseMove'],this['_onMouseMoveEvent'],this);this[_0x425179(-0x1eb,-0x211)]&&this[_0x19a575(0x451,0x427)]&&this['redraw']();this['canvas']['style'][_0x425179(-0x25b,-0x1e3)]='visible',this['mouse_down']=![];function _0x425179(_0x530956,_0x38ba69){return _0x3df816(_0x38ba69,_0x530956- -0x44a);}function _0x19a575(_0x9ac9b9,_0x48a891){return _0x3c9617(_0x9ac9b9- -0xdc,_0x48a891);}this[_0x19a575(0x451,0x3c8)]=![];}[_0x3c9617(0x47e,0x48c)](_0x263ceb){this[_0xcb35e1(0x44d,0x49e)]();function _0x224f6a(_0x500bdb,_0x349801){return _0x3c9617(_0x500bdb- -0x399,_0x349801);}function _0xcb35e1(_0x1fa1b3,_0x562e12){return _0x3df816(_0x562e12,_0x1fa1b3-0x235);}this[_0xcb35e1(0x4d4,0x480)]=_0x263ceb,this[_0xcb35e1(0x4a2,0x4dc)]['setDate'](_0x263ceb),this['redraw']();}['redraw'](){if(!this[_0x2ff0be(-0x203,-0x257)])return;function _0x2ff0be(_0x4aee23,_0x6fa61d){return _0x3df816(_0x4aee23,_0x6fa61d- -0x421);}this['windField'][_0x1c36c6(-0x284,-0x23e)](this['options']);function _0x1c36c6(_0x355fa4,_0x64c55c){return _0x3df816(_0x355fa4,_0x64c55c- -0x4d2);}this[_0x1c36c6(-0x2ad,-0x306)]();}[_0x3c9617(0x459,0x464)](){function _0x3639f5(_0x1bb1df,_0x55e7c2){return _0x3df816(_0x55e7c2,_0x1bb1df- -0x4d8);}if(this[_0x3c5019(0x4c3,0x4cd)])return;this['_updateIng']=!![];if(this[_0x3c5019(0x535,0x521)])this[_0x3c5019(0x54d,0x504)]['update']();else{const _0x44e2c0=this['windField'][_0x3c5019(0x4cb,0x45c)]();this['_drawLines'](_0x44e2c0);}function _0x3c5019(_0x4ab1c4,_0x448546){return _0x3df816(_0x4ab1c4,_0x448546-0x297);}this['_updateIng']=![];}['_drawLines'](_0x3cd853){function _0x48cbb2(_0x3ae887,_0x5716f7){return _0x3df816(_0x3ae887,_0x5716f7-0xfc);}this['_canvasParticles']=_0x3cd853,this['canvasContext'][_0x349788(-0xfb,-0xe6)]=_0x48cbb2(0x3da,0x35e),this[_0x349788(-0x7a,-0xce)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext'][_0x48cbb2(0x2dc,0x362)]='lighter';function _0x349788(_0x270768,_0x55937d){return _0x3df816(_0x270768,_0x55937d- -0x34c);}this['canvasContext']['globalAlpha']=0.9;const _0xe86165=this[_0x349788(-0x163,-0x192)]['scene'][_0x349788(-0x107,-0xe5)]!==Cesium[_0x349788(-0x80,-0xca)]['SCENE3D'],_0x38e34e=this['canvasWidth']*0.25;if(this[_0x349788(-0x120,-0x135)])for(let _0x54f28f=0x0,_0x3b8af2=_0x3cd853['length'];_0x54f28f<_0x3b8af2;_0x54f28f++){const _0xb9be65=_0x3cd853[_0x54f28f],_0x2be840=this[_0x349788(-0x14d,-0xc4)](_0xb9be65,_0xb9be65['lng'],_0xb9be65[_0x48cbb2(0x3aa,0x387)],_0xb9be65[_0x349788(-0x143,-0x12d)]),_0x13d045=this['_tomap'](_0xb9be65,_0xb9be65[_0x349788(-0x17c,-0xf4)],_0xb9be65[_0x48cbb2(0x381,0x389)],_0xb9be65[_0x48cbb2(0x36c,0x381)]);if(!_0x2be840||!_0x13d045)continue;if(_0xe86165&&Math['abs'](_0x2be840[0x0]-_0x13d045[0x0])>=_0x38e34e)continue;this[_0x349788(-0xf0,-0xce)][_0x48cbb2(0x427,0x3b1)](),this[_0x349788(-0x82,-0xce)][_0x349788(-0x146,-0x10a)]=this[_0x48cbb2(0x2eb,0x33e)],this[_0x349788(-0x117,-0xce)][_0x48cbb2(0x331,0x317)]=this[_0x48cbb2(0x34b,0x313)]['getColor'](_0xb9be65[_0x48cbb2(0x378,0x35a)]),this['canvasContext'][_0x48cbb2(0x380,0x399)](_0x2be840[0x0],_0x2be840[0x1]),this['canvasContext'][_0x48cbb2(0x415,0x3be)](_0x13d045[0x0],_0x13d045[0x1]),this[_0x349788(-0x121,-0xce)][_0x48cbb2(0x349,0x2ea)]();}else{this[_0x349788(-0xcc,-0xce)]['beginPath'](),this['canvasContext']['lineWidth']=this[_0x48cbb2(0x2d1,0x33e)],this[_0x48cbb2(0x3b8,0x37a)]['strokeStyle']=this['color'];for(let _0x11e7d6=0x0,_0x53c63f=_0x3cd853['length'];_0x11e7d6<_0x53c63f;_0x11e7d6++){const _0x4f8510=_0x3cd853[_0x11e7d6],_0x21dd79=this['_tomap'](_0x4f8510,_0x4f8510[_0x48cbb2(0x284,0x301)],_0x4f8510[_0x48cbb2(0x3fa,0x387)],_0x4f8510['alt']),_0x2187d2=this[_0x349788(-0x6f,-0xc4)](_0x4f8510,_0x4f8510[_0x349788(-0x109,-0xf4)],_0x4f8510['tlat'],_0x4f8510[_0x349788(-0xbd,-0xc7)]);if(!_0x21dd79||!_0x2187d2)continue;if(_0xe86165&&Math['abs'](_0x21dd79[0x0]-_0x2187d2[0x0])>=_0x38e34e)continue;this['canvasContext'][_0x349788(-0x88,-0xaf)](_0x21dd79[0x0],_0x21dd79[0x1]),this['canvasContext'][_0x349788(-0x3a,-0x8a)](_0x2187d2[0x0],_0x2187d2[0x1]);}this['canvasContext']['stroke']();}}[_0x3df816(0x26a,0x288)](_0x29cff6,_0x396822,_0x36c4a4,_0x50b5e9){const _0x42a97c=Cesium[_0x240d5f(-0x5a,-0x63)][_0x2767b9(0x45f,0x3ec)](_0x396822,_0x36c4a4,_0x50b5e9??this['fixedHeight']),_0x94989d=this['_map'][_0x2767b9(0x375,0x375)];if(_0x94989d[_0x2767b9(0x421,0x3a3)]===Cesium['SceneMode']['SCENE3D']){const _0x41f2b3=new Cesium[(_0x240d5f(-0x13b,-0x170))](_0x94989d['globe'][_0x240d5f(-0xcc,-0xcf)],_0x94989d['camera']['positionWC']),_0x5bfa93=_0x41f2b3[_0x2767b9(0x2f1,0x32c)](_0x42a97c);if(!_0x5bfa93)return _0x29cff6[_0x2767b9(0x3e9,0x3df)]=0x0,null;}function _0x240d5f(_0x2470bd,_0x7145fd){return _0x3df816(_0x7145fd,_0x2470bd- -0x315);}const _0xade856=mars3d__namespace['PointTrans']['toWindowCoordinates'](this['_map']['scene'],_0x42a97c);function _0x2767b9(_0x5cbc4c,_0x3e738d){return _0x3df816(_0x5cbc4c,_0x3e738d-0x13c);}return _0xade856?[_0xade856['x'],_0xade856['y']]:null;}[_0x3df816(0x22f,0x218)](){this['windField'][_0x1db111(0x131,0x16c)]();function _0x1db111(_0x165739,_0x4e5a80){return _0x3df816(_0x4e5a80,_0x165739- -0xe7);}delete this['windData'];}[_0x3df816(0x312,0x2a9)](){function _0x5eb8be(_0x28ccf7,_0x2fdda3){return _0x3df816(_0x2fdda3,_0x28ccf7-0x1ed);}function _0x1fbb3c(_0x529a1f,_0x2aa40e){return _0x3df816(_0x2aa40e,_0x529a1f- -0x177);}this[_0x1fbb3c(0x113,0xd9)]=new Worker(this[_0x5eb8be(0x4a4,0x501)][_0x5eb8be(0x477,0x48c)]),this[_0x1fbb3c(0x113,0xb8)][_0x5eb8be(0x3ce,0x3e4)]=_0x2ae9eb=>{function _0x42d78e(_0x29a7ce,_0x408b8e){return _0x5eb8be(_0x29a7ce- -0x61a,_0x408b8e);}this[_0x42d78e(-0x1bd,-0x1ef)](_0x2ae9eb['data']['particles']),this['_updateIng2']=![];},this['windField']={'init':_0x3d66d8=>{const _0x574dd8={};function _0x19663e(_0x342434,_0x104261){return _0x1fbb3c(_0x342434-0x25e,_0x104261);}function _0x30bcf4(_0xee3306,_0x502e2f){return _0x5eb8be(_0x502e2f- -0xa7,_0xee3306);}_0x574dd8['type']='init',_0x574dd8[_0x19663e(0x39e,0x3bc)]=_0x3d66d8,this['worker'][_0x19663e(0x343,0x3be)](_0x574dd8);},'setOptions':_0x52d470=>{const _0x4335a6={};function _0x17643f(_0x4f0d94,_0x186afa){return _0x5eb8be(_0x186afa- -0x3bd,_0x4f0d94);}_0x4335a6[_0x17643f(-0x16,-0x11)]='setOptions';function _0x3f18c0(_0x564933,_0x2b34bb){return _0x1fbb3c(_0x564933- -0x287,_0x2b34bb);}_0x4335a6[_0x3f18c0(-0x147,-0x14a)]=_0x52d470,this['worker']['postMessage'](_0x4335a6);},'setDate':_0x591687=>{function _0x1199cd(_0x1d5f1f,_0x4666fe){return _0x1fbb3c(_0x1d5f1f- -0x15a,_0x4666fe);}function _0x384233(_0x4ea28f,_0x7fab06){return _0x5eb8be(_0x4ea28f- -0x1f8,_0x7fab06);}const _0x447d1a={};_0x447d1a['type']='setDate',_0x447d1a[_0x1199cd(-0xe5,-0x67)]=_0x591687,this[_0x384233(0x27f,0x223)]['postMessage'](_0x447d1a);},'update':()=>{if(this['_updateIng2'])return;this[_0x1ad132(-0x250,-0x1e4)]=!![];function _0x1ad132(_0x5570ab,_0x47be0c){return _0x1fbb3c(_0x47be0c- -0x2fe,_0x5570ab);}const _0x3c9eeb={};_0x3c9eeb['type']='update',this['worker']['postMessage'](_0x3c9eeb);},'clear':()=>{const _0x29cdde={};_0x29cdde['type']='clear',this['worker']['postMessage'](_0x29cdde);}},this[_0x1fbb3c(0xf6,0xb1)][_0x1fbb3c(0x12a,0xf7)](this['options']);}}mars3d__namespace[_0x3c9617(0x4ee,0x54a)]['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports[_0x3df816(0x204,0x22d)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x362aea={};_0x362aea['value']=!![],Object['defineProperty'](exports,_0x3c9617(0x52f,0x4f5),_0x362aea);
}));
