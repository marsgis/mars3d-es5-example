/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.11.0
 * 编译日期：2026-02-08 17:34
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2026-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x3412d1,_0xeba6c){function _0x4a0e46(_0x48e7ee,_0x433305){return _0x5776(_0x48e7ee-0x1c5,_0x433305);}function _0x397179(_0x27da57,_0x26d3a8){return _0x5776(_0x27da57-0x24,_0x26d3a8);}const _0x5272ca=_0x3412d1();while(!![]){try{const _0x1b3d8c=-parseInt(_0x4a0e46(0x40b,0x406))/0x1+-parseInt(_0x4a0e46(0x3ab,0x412))/0x2+-parseInt(_0x397179(0x1d3,0x1a1))/0x3*(-parseInt(_0x397179(0x18d,0x120))/0x4)+-parseInt(_0x397179(0x289,0x2ed))/0x5+parseInt(_0x397179(0x1f5,0x26c))/0x6*(parseInt(_0x4a0e46(0x39e,0x33c))/0x7)+parseInt(_0x397179(0x1bf,0x18a))/0x8+-parseInt(_0x397179(0x1e7,0x177))/0x9*(-parseInt(_0x397179(0x219,0x27d))/0xa);if(_0x1b3d8c===_0xeba6c)break;else _0x5272ca['push'](_0x5272ca['shift']());}catch(_0x44090a){_0x5272ca['push'](_0x5272ca['shift']());}}}(_0x2e37,0xe5ef0));function _interopNamespace(_0x505dc3){if(_0x505dc3&&_0x505dc3['__esModule'])return _0x505dc3;function _0x5699d5(_0x22fa54,_0x3af5d5){return _0x5776(_0x22fa54-0x355,_0x3af5d5);}var _0x46792b=Object['create'](null);_0x505dc3&&Object['keys'](_0x505dc3)[_0x5699d5(0x524,0x4f0)](function(_0x2930b5){if(_0x2930b5!=='default'){var _0x1728a3=Object['getOwnPropertyDescriptor'](_0x505dc3,_0x2930b5);Object['defineProperty'](_0x46792b,_0x2930b5,_0x1728a3['get']?_0x1728a3:{'enumerable':!![],'get':function(){return _0x505dc3[_0x2930b5];}});}});_0x46792b[_0x5699d5(0x553,0x4da)]=_0x505dc3;function _0x1c4df8(_0x3f0048,_0x5e5ed0){return _0x5776(_0x3f0048-0x3d9,_0x5e5ed0);}return _0x46792b;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x57a0b0,_0x18d43f){const _0x51bb86=_0x57a0b0*Math[_0x13cb9c(-0x66,-0x30)](Cesium$2['Math']['toRadians'](_0x18d43f));function _0x13cb9c(_0x1ef74a,_0x54b774){return _0x5776(_0x1ef74a- -0x276,_0x54b774);}return _0x51bb86;}function getV(_0x35c7f5,_0x4f9b6f){function _0x1242ea(_0x460fc1,_0x261264){return _0x5776(_0x261264-0x245,_0x460fc1);}const _0x207d1e=_0x35c7f5*Math['sin'](Cesium$2[_0x3a9099(0x567,0x527)][_0x3a9099(0x4ce,0x4e7)](_0x4f9b6f));function _0x3a9099(_0x55027f,_0x211367){return _0x5776(_0x55027f-0x2f3,_0x211367);}return _0x207d1e;}function getSpeed(_0x5711f4,_0x396256){function _0x581750(_0x14e6a9,_0x27e29d){return _0x5776(_0x27e29d- -0x66,_0x14e6a9);}const _0x1140ed=Math[_0x56a201(-0x3c,0x3b)](Math[_0x56a201(-0xea,-0xe6)](_0x5711f4,0x2)+Math[_0x56a201(-0xea,-0x127)](_0x396256,0x2));function _0x56a201(_0x5acfa9,_0x24f480){return _0x5776(_0x5acfa9- -0x28e,_0x24f480);}return _0x1140ed;}function getDirection(_0x95d3c6,_0x52bbb4){function _0x196f14(_0x5aea13,_0x19707e){return _0x5776(_0x19707e-0x8e,_0x5aea13);}let _0x5cb250=Cesium$2[_0x196f14(0x314,0x302)]['toDegrees'](Math['atan2'](_0x52bbb4,_0x95d3c6));return _0x5cb250+=_0x5cb250<0x0?0x168:0x0,_0x5cb250;}function _0x5266e8(_0x2ebeaf,_0x55af72){return _0x5776(_0x55af72-0x18f,_0x2ebeaf);}function _0x2cde9c(_0x222049,_0xb342a3){return _0x5776(_0x222049- -0x2c8,_0xb342a3);}const _0x428748={};_0x428748[_0x5266e8(0x3df,0x355)]=null,_0x428748['getU']=getU,_0x428748[_0x5266e8(0x2a5,0x2f9)]=getV,_0x428748['getSpeed']=getSpeed,_0x428748['getDirection']=getDirection;var WindUtil=_0x428748;const version='3.11.0',buildTime='2026-02-08\x2017:33';var updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x2cde9c(-0xf0,-0x174),postProcessingPositionFragmentShader=_0x5266e8(0x397,0x32f),renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x2cde9c(-0xae,-0x6e)];class ShaderManager{static['getCalculateSpeedShader'](){const _0x1bde06={};return _0x1bde06['sources']=[calculateSpeedShader],new ShaderSource$1(_0x1bde06);}static['getUpdatePositionShader'](){const _0x178b96={};_0x178b96[_0x2c9cb5(0x3b2,0x40a)]=[updatePositionShader];function _0x2c9cb5(_0x24b1cb,_0x31fbc6){return _0x5266e8(_0x31fbc6,_0x24b1cb-0xb7);}return new ShaderSource$1(_0x178b96);}static[_0x2cde9c(-0x59,-0x7a)](){const _0x471c58={};_0x471c58[_0x1b76a3(-0xe2,-0x11f)]=[renderParticlesVertexShader];function _0x1b76a3(_0x2c3259,_0x489eb0){return _0x2cde9c(_0x2c3259-0x7a,_0x489eb0);}return new ShaderSource$1(_0x471c58);}static['getSegmentDrawFragmentShader'](){const _0x28dbeb={};function _0x58d519(_0x549b84,_0x1120b0){return _0x2cde9c(_0x549b84-0x698,_0x1120b0);}return _0x28dbeb[_0x58d519(0x53c,0x502)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x28dbeb);}static['getPostProcessingPositionShader'](){const _0x1a9d02={};function _0x5ee480(_0x13b953,_0x2b92c5){return _0x2cde9c(_0x2b92c5-0x2f0,_0x13b953);}return _0x1a9d02[_0x5ee480(0x118,0x194)]=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x1a9d02);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x5266e8(0x388,0x3a9)];class CustomPrimitive{constructor(_0x173db2){function _0x31afaf(_0x2d3a50,_0x548ba0){return _0x5266e8(_0x2d3a50,_0x548ba0- -0x3c8);}this['commandType']=_0x173db2['commandType'],this['geometry']=_0x173db2['geometry'],this[_0x48535b(0x1ba,0x201)]=_0x173db2['attributeLocations'],this['primitiveType']=_0x173db2['primitiveType'],this[_0x31afaf(-0x29,0x2e)]=_0x173db2['uniformMap']||{},this[_0x31afaf(0x66,0x26)]=_0x173db2[_0x31afaf(0x9,0x26)],this['fragmentShaderSource']=_0x173db2[_0x31afaf(-0x82,-0x6c)],this[_0x48535b(0x1f2,0x1f5)]=_0x173db2['rawRenderState'],this['framebuffer']=_0x173db2[_0x31afaf(-0x38,0x34)],this['outputTexture']=_0x173db2['outputTexture'],this['autoClear']=_0x173db2['autoClear']??![],this['preExecute']=_0x173db2[_0x31afaf(0x7b,0x3)];function _0x48535b(_0x2e63ca,_0x555703){return _0x5266e8(_0x555703,_0x2e63ca- -0x20d);}this[_0x31afaf(-0xa1,-0x45)]=!![],this[_0x48535b(0x1ea,0x26d)]=undefined,this['clearCommand']=undefined,this['isDynamic']=_0x173db2['isDynamic']??(()=>!![]),this[_0x31afaf(-0x85,-0x46)]&&(this[_0x48535b(0x147,0x1b5)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x48535b(0x1ef,0x189)],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x4deda8){function _0xace78(_0x1cae29,_0x211f60){return _0x5266e8(_0x1cae29,_0x211f60- -0x492);}function _0x4aa3e8(_0x23cb67,_0xa9de47){return _0x5266e8(_0xa9de47,_0x23cb67-0xf);}if(this['commandType']===_0xace78(-0x178,-0xef)){const _0x5dce52={};_0x5dce52[_0xace78(-0xcd,-0xc2)]=_0x4deda8,_0x5dce52['geometry']=this['geometry'],_0x5dce52[_0x4aa3e8(0x3d6,0x380)]=this[_0xace78(-0x131,-0xcb)],_0x5dce52[_0xace78(-0xa8,-0x121)]=BufferUsage$1['STATIC_DRAW'];const _0x1c990e=VertexArray$1[_0x4aa3e8(0x3a4,0x33e)](_0x5dce52),_0x5c2f43={};_0x5c2f43[_0x4aa3e8(0x3df,0x400)]=_0x4deda8,_0x5c2f43['vertexShaderSource']=this['vertexShaderSource'],_0x5c2f43[_0xace78(-0xce,-0x136)]=this[_0xace78(-0x17c,-0x136)],_0x5c2f43[_0x4aa3e8(0x3d6,0x40c)]=this[_0x4aa3e8(0x3d6,0x44d)];const _0x4586=ShaderProgram[_0x4aa3e8(0x34b,0x366)](_0x5c2f43),_0x3b8c4b=RenderState['fromCache'](this['rawRenderState']),_0x2022d0={};return _0x2022d0['owner']=this,_0x2022d0[_0x4aa3e8(0x3d2,0x391)]=_0x1c990e,_0x2022d0[_0x4aa3e8(0x313,0x2f2)]=this[_0x4aa3e8(0x313,0x2a8)],_0x2022d0['modelMatrix']=Matrix4['IDENTITY'],_0x2022d0[_0xace78(-0x62,-0xe1)]=_0x3b8c4b,_0x2022d0[_0x4aa3e8(0x331,0x2ce)]=_0x4586,_0x2022d0['framebuffer']=this['framebuffer'],_0x2022d0[_0xace78(-0xde,-0x9c)]=this[_0x4aa3e8(0x405,0x399)],_0x2022d0[_0x4aa3e8(0x357,0x315)]=Pass$1['OPAQUE'],new DrawCommand(_0x2022d0);}else{if(this['commandType']===_0x4aa3e8(0x409,0x46c)){const _0x2b5301={};return _0x2b5301[_0x4aa3e8(0x385,0x407)]=this,_0x2b5301['fragmentShaderSource']=this[_0x4aa3e8(0x36b,0x3be)],_0x2b5301['uniformMap']=this['uniformMap'],_0x2b5301['outputTexture']=this['outputTexture'],_0x2b5301['persists']=!![],new ComputeCommand(_0x2b5301);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0xbc6b8d,_0x334290){this['geometry']=_0x334290;function _0x4e0845(_0x262b8d,_0x14f078){return _0x2cde9c(_0x262b8d-0x5a0,_0x14f078);}function _0x692810(_0x7744d7,_0x5283c2){return _0x2cde9c(_0x5283c2- -0x2f,_0x7744d7);}defined(this['commandToExecute'])&&(this[_0x692810(-0xbe,-0x8f)]['vertexArray']=VertexArray$1[_0x4e0845(0x4de,0x4b5)]({'context':_0xbc6b8d,'geometry':this[_0x4e0845(0x4da,0x47e)],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x45bf4f){if(!this['isDynamic']())return;function _0x278a47(_0xfb40fe,_0x474f12){return _0x2cde9c(_0xfb40fe-0x601,_0x474f12);}if(!this['show']||!defined(_0x45bf4f))return;!defined(this[_0xd8167(0x50,-0x31)])&&(this[_0xd8167(0x50,0x7f)]=this[_0x278a47(0x4a7,0x4ce)](_0x45bf4f['context']));function _0xd8167(_0x4aed10,_0x4397cc){return _0x5266e8(_0x4397cc,_0x4aed10- -0x3a7);}defined(this[_0x278a47(0x575,0x5f1)])&&this[_0xd8167(0x24,0x40)]();if(!_0x45bf4f[_0xd8167(-0x81,-0xb3)]){console['warn']('frameState.commandList\x20is\x20undefined');return;}defined(this[_0xd8167(-0x53,-0x5a)])&&_0x45bf4f[_0xd8167(-0x81,-0xb0)]['push'](this['clearCommand']),defined(this['commandToExecute'])&&_0x45bf4f['commandList']['push'](this['commandToExecute']);}['isDestroyed'](){return![];}[_0x2cde9c(-0xbe,-0x12e)](){function _0x53a73e(_0x4637ad,_0x5cdfa2){return _0x5266e8(_0x5cdfa2,_0x4637ad- -0x71);}function _0x3a6178(_0x11c6b9,_0xb8f776){return _0x2cde9c(_0x11c6b9- -0xc2,_0xb8f776);}if(defined(this[_0x3a6178(-0x122,-0x101)])){var _0x290d9a;(_0x290d9a=this['commandToExecute']['shaderProgram'])===null||_0x290d9a===void 0x0||_0x290d9a[_0x3a6178(-0x180,-0x1eb)](),this['commandToExecute']['shaderProgram']=undefined;}return destroyObject(this);}}function _0x2e37(){const _0x2119ce=['getSegmentDrawVertexShader','rawRenderState','wind','south','rendering','Math','EventType','bind','segmentsDepth','error','alt','_drawLines','length','LINEAR','12lCNzUo','getV','createRenderingTextures','sources','segmentsColor','createCommand','speed','ymax','_maxAge','frameRate','drawingBufferWidth','TRIANGLES','primitiveType','resize','longitude','updateOptions','_setOptionsHook','primitives','depthTexture','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','componentDatatype','particles','_removedHook','BaseLayer','getColor','globe','pointerEvents','tlng','frameTime','values','processWindData','computing','lineWidth','xmin','cancelAnimationFrame','ymin','framebuffers','toGridXY','fromDegrees','latRange','destroyParticlesTextures','left','shaderProgram','postProcessingPosition','positionWC','displayRange','commandList','canvas','drawingBufferHeight','createWindTextures','731880ujbCJo','hidden','all','scene','createColorTableTexture','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','clientWidth','WindUtil','_onMouseDownEvent','pow','lng','windTextures','particlesTextures','getUVByXY','destination-in','data','dynamic','addEventListener','fromCache','changed','643866ySnNFU','_updateIng2','\x20\x20\x20\x20编译日期：','canvasWidth','pickEllipsoid','domain','east','calculateSpeed','mode','getUVByPoint','pass','quietPeriod','createParticlesTextures','reCreateWindTextures','warn','blendFuncSource','depthTest','colorTextures','_tomap','ellipsoid','54378miWNZF','_onMouseMoveEvent','clearCommand','__proto__','push','getDefaultRenderState','_onMouseUpEvent','_calcUV','strokeStyle','interpolated','fragmentShaderSource','blendEquation','forEach','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','1369398ggDkvY','lineLength','componentsPerAttribute','array','lineTo','lat','updateViewerParameters','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','28QMJMjm','nextParticlesPosition','toRadians','min','beginPath','unbindEvent','height','wheel','_pointerEvents','bufferUsage','log','postMessage','CanvasWindField','1888836HkjdSc','owner','FLOAT','WindLayer','remove','createRawRenderState','age','cols','_updateIng','FUNC_ADD','MAX_VALUE','min\x20is\x20undefined,\x20calculate\x20min','windField','autoClear','show','620xgvZim','pointer-events','dropRateBump','grid','RED','vmax','clientHeight','top','container','default','stroke','mouse_down','visible','geometry','tlat','type','Rectangle','fromGeometry','willReadFrequently','color','flipY','destroy','#ffffff','setDate','destoryRenderingFramebuffers','getParticles','segments','cos','style','pixelSize','onParticlesTextureSizeChange','Draw','Cartesian3','SCENE3D','vdata','mars3d-wind插件注册成功\x20\x20\x20\x20\x20版本：','reverse','Cesium','rows','enabled','clearFramebuffers','defineProperty','redraw','abs','off','renderState','UNSIGNED_INT','requestRender','position','currentParticlesPosition','createComputingPrimitives','umin','_speedRate','canvasWind','globalAlpha','west','mouseHidden','colors','clear','layer','speedFactor','lastFramesPerSecond','_onMapWhellEvent','vertexArray','refreshTimer','outputTexture','north','attributeLocations','viewerParameters','xmax','bounds','preExecute','toWindowCoordinates','_createCanvas','canvasContext','bindEvent','context','_bilinearInterpolation','RGBA','mouseDown','mouseUp','134762fieKDx','cartesianToCartographic','alpha','stringify','mouse_move','keys','max','particlesSpeed','worker','call','fixedHeight','width','sqrt','textures','windData','DEPTH_COMPONENT','particlesTextureSize','magnificationFilter','options','updatePosition','minificationFilter','updateWindData','_addedHook','register','rectangle','vertexShaderSource','removeEventListener','camera','_map','mouseMove','frameRateMonitor','9495ZjtWvD','_animateFrame','uniformMap','commandToExecute','zIndex','maxAge','Compute','particleSystem','framebuffer','LayerUtil'];_0x2e37=function(){return _0x2119ce;};return _0x2e37();}function deepMerge(_0x3c8478,_0xdbd7ec){if(!_0x3c8478)return _0xdbd7ec;if(!_0xdbd7ec)return _0x3c8478;const _0x62e386={..._0xdbd7ec};function _0x4448b6(_0x32015f,_0xa35c31){return _0x2cde9c(_0x32015f-0x509,_0xa35c31);}const _0x48f2ad=_0x62e386;for(const _0x260d6e in _0x3c8478){if(Object['prototype']['hasOwnProperty'][_0x4448b6(0x490,0x4b1)](_0x3c8478,_0x260d6e)){const _0xad1090=_0x3c8478[_0x260d6e],_0x38f4f2=_0xdbd7ec[_0x260d6e];if(Array['isArray'](_0xad1090)){_0x48f2ad[_0x260d6e]=_0xad1090['slice']();continue;}if(_0xad1090&&typeof _0xad1090==='object'){_0x48f2ad[_0x260d6e]=deepMerge(_0xad1090,_0x38f4f2||{});continue;}_0xad1090!==undefined&&(_0x48f2ad[_0x260d6e]=_0xad1090);}}return _0x48f2ad;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x5266e8(0x331,0x3a9)];class WindParticlesComputing{constructor(_0x4511f5,_0x15a44f,_0x26b79a,_0x1c3584,_0x102935){this[_0x3c48d(0x578,0x54d)]=_0x4511f5,this['options']=_0x26b79a,this[_0x3c48d(0x4ec,0x545)]=_0x1c3584,this['windData']=_0x15a44f,this[_0x21128a(0x569,0x51b)]=0x3c,this['frameRateAdjustment']=0x1;const _0x477165={};_0x477165['scene']=_0x102935;function _0x21128a(_0x573b7f,_0x392fb9){return _0x2cde9c(_0x392fb9-0x671,_0x573b7f);}_0x477165['samplingWindow']=0x1,_0x477165[_0x21128a(0x589,0x563)]=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x477165),this['initFrameRate']();function _0x3c48d(_0x2e09e5,_0x34e79e){return _0x5266e8(_0x2e09e5,_0x34e79e-0x17d);}this['createWindTextures'](),this[_0x3c48d(0x475,0x4c7)](),this[_0x21128a(0x5d7,0x5d0)]();}['initFrameRate'](){const _0x181477=()=>{function _0x49d2a3(_0x2b4761,_0x1a693f){return _0x5776(_0x2b4761- -0x9a,_0x1a693f);}function _0x13212b(_0x1b6b81,_0x134948){return _0x5776(_0x1b6b81- -0x16b,_0x134948);}this['frameRateMonitor'][_0x49d2a3(0x198,0x1ff)]>0x14&&(this['frameRate']=this[_0x13212b(0xf9,0x163)][_0x49d2a3(0x198,0x179)],this['frameRateAdjustment']=0x3c/Math['max'](this[_0x49d2a3(0xd8,0x155)],0x1));};_0x181477();const _0x4b1fc5=setInterval(_0x181477,0x3e8);function _0x40fe27(_0x1b8f8e,_0xeee29f){return _0x5266e8(_0x1b8f8e,_0xeee29f- -0x22d);}const _0x62d2d8=this[_0x40fe27(0x1f3,0x16c)]['bind'](this);this['destroy']=()=>{clearInterval(_0x4b1fc5),_0x62d2d8();};}[_0x5266e8(0x335,0x329)](){const _0x22ffa9={};_0x22ffa9['minificationFilter']=TextureMinificationFilter$1[_0x1b0a09(-0x1c,-0x3c)];function _0x1b0a09(_0x305f5e,_0x5d675d){return _0x2cde9c(_0x305f5e-0x30,_0x5d675d);}function _0xdd45a0(_0x53897a,_0x2fbf03){return _0x5266e8(_0x53897a,_0x2fbf03-0xaa);}_0x22ffa9[_0xdd45a0(0x441,0x490)]=TextureMagnificationFilter$1['LINEAR'];const _0x12d177={'context':this[_0xdd45a0(0x42d,0x47a)],'width':this['windData']['width'],'height':this['windData'][_0xdd45a0(0x396,0x418)],'pixelFormat':PixelFormat$1[_0x1b0a09(-0x9f,-0xbd)],'pixelDatatype':PixelDatatype$1[_0xdd45a0(0x3c8,0x421)],'flipY':this['options']['flipY']??![],'sampler':new Sampler$1(_0x22ffa9)};this['windTextures']={'U':new Texture$1({..._0x12d177,'source':{'arrayBufferView':new Float32Array(this[_0x1b0a09(-0x44,-0x10)]['u']['array'])}}),'V':new Texture$1({..._0x12d177,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){const _0x516d9f={};_0x516d9f[_0x445494(-0x108,-0x126)]=TextureMinificationFilter$1['NEAREST'];function _0x1cca3e(_0x3196f9,_0x1a4be9){return _0x5266e8(_0x1a4be9,_0x3196f9- -0x161);}function _0x445494(_0x16dda8,_0x57bcb2){return _0x5266e8(_0x16dda8,_0x57bcb2- -0x50f);}_0x516d9f[_0x1cca3e(0x285,0x2be)]=TextureMagnificationFilter$1['NEAREST'];const _0xe2adfa={'context':this[_0x445494(-0xe7,-0x13f)],'width':this[_0x445494(-0x15d,-0x128)]['particlesTextureSize'],'height':this['options']['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x445494(-0x1a1,-0x13d)],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this[_0x445494(-0x175,-0x128)]['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x516d9f)};this[_0x1cca3e(0x1d5,0x1ac)]={'previousParticlesPosition':new Texture$1(_0xe2adfa),'currentParticlesPosition':new Texture$1(_0xe2adfa),'nextParticlesPosition':new Texture$1(_0xe2adfa),'postProcessingPosition':new Texture$1(_0xe2adfa),'particlesSpeed':new Texture$1(_0xe2adfa)};}['destroyParticlesTextures'](){function _0x3466ec(_0x523e6c,_0x4c317a){return _0x2cde9c(_0x4c317a-0x643,_0x523e6c);}Object['values'](this['particlesTextures'])[_0x3466ec(0x504,0x54a)](_0x1e6528=>_0x1e6528['destroy']());}['createComputingPrimitives'](){function _0x11566e(_0x15e1ef,_0x54a3ad){return _0x2cde9c(_0x15e1ef-0x486,_0x54a3ad);}function _0x2e5fa3(_0x3676a4,_0x50c0ec){return _0x2cde9c(_0x3676a4-0x583,_0x50c0ec);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this[_0x11566e(0x364,0x389)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u']['min'],this[_0x2e5fa3(0x50f,0x58a)]['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x11566e(0x39a,0x3bc)],this['windData']['v'][_0x2e5fa3(0x507,0x489)]),'speedRange':()=>new Cartesian2$1(this[_0x11566e(0x412,0x3de)]['speed'][_0x11566e(0x39a,0x411)],this['windData']['speed']['max']),'currentParticlesPosition':()=>this[_0x11566e(0x365,0x360)][_0x11566e(0x3e4,0x3ca)],'speedScaleFactor':()=>{function _0x14a3f5(_0x16a2d6,_0xffebb1){return _0x11566e(_0x16a2d6- -0x3ca,_0xffebb1);}function _0x2ad7b3(_0x170721,_0x260bdc){return _0x2e5fa3(_0x260bdc- -0x1ad,_0x170721);}return(this[_0x2ad7b3(0x307,0x347)]['pixelSize']+0x32)*this['options'][_0x14a3f5(0x25,0x9)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0x11566e(0x412,0x3b3)]['width'],this[_0x2e5fa3(0x50f,0x4c8)][_0x11566e(0x39d,0x384)]),'minimum':()=>new Cartesian2$1(this[_0x2e5fa3(0x50f,0x541)]['bounds'][_0x11566e(0x3ea,0x417)],this[_0x11566e(0x412,0x46a)]['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds']['east'],this['windData'][_0x2e5fa3(0x4f6,0x4b0)]['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures'][_0x11566e(0x40b,0x404)],'preExecute':()=>{const _0x14a31e=this['particlesTextures']['previousParticlesPosition'];function _0x4b9e3c(_0x11d420,_0x4a5784){return _0x11566e(_0x4a5784-0x142,_0x11d420);}function _0x453dd9(_0x13557,_0x2c9a07){return _0x2e5fa3(_0x2c9a07-0x7a,_0x13557);}this[_0x453dd9(0x4cd,0x4dc)]['previousParticlesPosition']=this['particlesTextures']['currentParticlesPosition'],this[_0x453dd9(0x513,0x4dc)]['currentParticlesPosition']=this['particlesTextures'][_0x453dd9(0x4fc,0x4c9)],this['particlesTextures'][_0x4b9e3c(0x4a7,0x494)]=_0x14a31e,this[_0x453dd9(0x4c6,0x4af)][_0x4b9e3c(0x503,0x4b6)]['commandToExecute']&&(this[_0x453dd9(0x4c4,0x4af)]['calculateSpeed']['commandToExecute']['outputTexture']=this[_0x4b9e3c(0x51e,0x4a7)]['particlesSpeed']);},'isDynamic':()=>this[_0x11566e(0x416,0x397)][_0x11566e(0x369,0x332)]}),'updatePosition':new CustomPrimitive({'commandType':_0x11566e(0x429,0x3d1),'uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x11566e(0x3e4,0x3d2)],'particlesSpeed':()=>this[_0x11566e(0x365,0x3db)]['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x57f2f9(_0x3f3939,_0x59e334){return _0x2e5fa3(_0x3f3939- -0x508,_0x59e334);}function _0x358de3(_0x16d4d7,_0xa674a6){return _0x2e5fa3(_0x16d4d7- -0x5d1,_0xa674a6);}this['primitives']['updatePosition'][_0x57f2f9(0x1b,0x40)]&&(this['primitives'][_0x358de3(-0xbd,-0x7c)][_0x358de3(-0xae,-0x115)][_0x57f2f9(-0x17,0x20)]=this['particlesTextures'][_0x57f2f9(-0x73,-0x93)]);},'isDynamic':()=>this[_0x2e5fa3(0x513,0x581)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures'][_0x2e5fa3(0x495,0x46d)],'particlesSpeed':()=>this['particlesTextures'][_0x11566e(0x40b,0x38c)],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this[_0x2e5fa3(0x4f4,0x537)][_0x11566e(0x34e,0x2f1)],'dataLonRange':()=>new Cartesian2$1(this['windData'][_0x2e5fa3(0x4f6,0x4b6)][_0x11566e(0x3ea,0x3d4)],this[_0x11566e(0x412,0x394)][_0x2e5fa3(0x4f6,0x535)]['east']),'dataLatRange':()=>new Cartesian2$1(this['windData'][_0x11566e(0x3f9,0x466)][_0x11566e(0x430,0x4b0)],this['windData']['bounds']['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this[_0x11566e(0x416,0x460)]['dropRate'],'dropRateBump':()=>this['options'][_0x2e5fa3(0x4b2,0x469)],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x45e972(_0x4d8bbf,_0x4db0b7){return _0x11566e(_0x4db0b7- -0x4ee,_0x4d8bbf);}function _0x49b361(_0x4a7c2e,_0x18cdc1){return _0x11566e(_0x18cdc1- -0x130,_0x4a7c2e);}this['primitives'][_0x45e972(-0x17b,-0x19c)][_0x45e972(-0x8d,-0xc8)]&&(this['primitives'][_0x45e972(-0x11e,-0x19c)][_0x49b361(0x2bd,0x2f6)]['outputTexture']=this['particlesTextures'][_0x49b361(0x25c,0x222)]);},'isDynamic':()=>this[_0x11566e(0x416,0x450)]['dynamic']})};}[_0x2cde9c(-0x10c,-0x14a)](){this['windTextures']['U'][_0x60990e(0x181,0x193)]();function _0x60990e(_0x7c3ea7,_0xa8186f){return _0x2cde9c(_0xa8186f-0x251,_0x7c3ea7);}this['windTextures']['V']['destroy'](),this['createWindTextures']();}[_0x5266e8(0x3e7,0x3ea)](_0x3b28b7){this['windData']=_0x3b28b7,this['reCreateWindTextures']();}['updateOptions'](_0x2fa1cd){function _0x5b5245(_0x3d9eaf,_0x455b4c){return _0x5266e8(_0x3d9eaf,_0x455b4c-0x104);}const _0x455754=_0x2fa1cd[_0x5b5245(0x4a4,0x49c)]!==undefined&&_0x2fa1cd['flipY']!==this[_0x5b5245(0x4d4,0x4eb)]['flipY'];this['options']=deepMerge(_0x2fa1cd,this[_0x40a1e6(0x287,0x229)]);function _0x40a1e6(_0x46ad1b,_0x25b924){return _0x5266e8(_0x46ad1b,_0x25b924- -0x1be);}_0x455754&&this['reCreateWindTextures']();}['processWindData'](_0x5911da){const {array:_0x409c93}=_0x5911da;let {min:_0x15653f,max:_0x211c32}=_0x5911da;function _0x964c56(_0x1078b5,_0x1d513b){return _0x2cde9c(_0x1d513b-0x359,_0x1078b5);}const _0x114c20=new Float32Array(_0x409c93['length']);_0x15653f===undefined&&(console[_0x964c56(0x2bb,0x24e)](_0x48d1f0(0x149,0x16a)),_0x15653f=Math[_0x964c56(0x21b,0x26d)](..._0x409c93));_0x211c32===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0x211c32=Math[_0x48d1f0(0x179,0x1c5)](..._0x409c93));const _0x35df63=Math['max'](Math['abs'](_0x15653f),Math[_0x48d1f0(0x170,0x199)](_0x211c32));for(let _0xcf21ff=0x0;_0xcf21ff<_0x409c93[_0x964c56(0x2e7,0x30c)];_0xcf21ff++){const _0x5db61c=_0x409c93[_0xcf21ff]/_0x35df63;_0x114c20[_0xcf21ff]=_0x5db61c;}function _0x48d1f0(_0x12bfb2,_0x3cad4c){return _0x5266e8(_0x12bfb2,_0x3cad4c- -0x216);}return _0x114c20;}[_0x2cde9c(-0xbe,-0x61)](){function _0x2ebcc3(_0x5a0d00,_0xd525b8){return _0x2cde9c(_0x5a0d00-0x395,_0xd525b8);}function _0x2d8e84(_0x1d48b9,_0x3a7750){return _0x2cde9c(_0x1d48b9-0x12e,_0x3a7750);}Object['values'](this['windTextures'])[_0x2ebcc3(0x29c,0x2c1)](_0x5ae984=>_0x5ae984[_0x2ebcc3(0x2d7,0x34f)]()),Object[_0x2ebcc3(0x253,0x29a)](this[_0x2ebcc3(0x274,0x284)])[_0x2ebcc3(0x29c,0x291)](_0x402f27=>_0x402f27[_0x2ebcc3(0x2d7,0x301)]()),Object[_0x2ebcc3(0x253,0x23a)](this['primitives'])['forEach'](_0xc1e9ff=>_0xc1e9ff[_0x2ebcc3(0x2d7,0x2d2)]()),this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x5f0b96,_0x499a2c,_0xcd916a,_0xb4c900){this[_0x10bce1(0x535,0x51f)]=_0x5f0b96;function _0x10bce1(_0x317f74,_0x1e3e99){return _0x5266e8(_0x1e3e99,_0x317f74-0x165);}this[_0x5d18a9(0x1d,0x4e)]=_0x499a2c,this['viewerParameters']=_0xcd916a,this['computing']=_0xb4c900;(typeof this['options']['particlesTextureSize']!=='number'||this['options'][_0x5d18a9(-0x32,0x4c)]<=0x0)&&(console[_0x10bce1(0x56c,0x508)](_0x5d18a9(-0x35,-0x8e)),this['options'][_0x10bce1(0x54a,0x528)]=0x100);function _0x5d18a9(_0x12c5fc,_0x12c146){return _0x5266e8(_0x12c5fc,_0x12c146- -0x399);}this['colorTable']=this['createColorTableTexture'](),this['textures']=this[_0x10bce1(0x45f,0x447)](),this['framebuffers']=this['createRenderingFramebuffers'](),this[_0x10bce1(0x46e,0x465)]=this['createPrimitives']();}['createRenderingTextures'](){function _0x6b35b5(_0x401bba,_0xa04aa5){return _0x2cde9c(_0xa04aa5-0xfe,_0x401bba);}const _0x2fb0e4={};_0x2fb0e4[_0x44d1b2(0x29a,0x2ce)]=this['context'],_0x2fb0e4[_0x44d1b2(0x2aa,0x2bc)]=this['context'][_0x44d1b2(0x1cc,0x195)],_0x2fb0e4['height']=this[_0x6b35b5(0xf2,0x77)][_0x6b35b5(0x15,-0x31)],_0x2fb0e4['pixelFormat']=PixelFormat['RGBA'],_0x2fb0e4['pixelDatatype']=PixelDatatype['UNSIGNED_BYTE'];const _0x3f293b=_0x2fb0e4,_0x267e5c={};_0x267e5c['context']=this[_0x44d1b2(0x29a,0x303)],_0x267e5c['width']=this['context'][_0x6b35b5(-0x93,-0x57)],_0x267e5c['height']=this[_0x44d1b2(0x29a,0x231)]['drawingBufferHeight'],_0x267e5c['pixelFormat']=PixelFormat[_0x6b35b5(0x9a,0x8b)],_0x267e5c['pixelDatatype']=PixelDatatype[_0x6b35b5(0xa5,0x59)];const _0x271f9e=_0x267e5c;function _0x44d1b2(_0x339682,_0x3c4365){return _0x5266e8(_0x3c4365,_0x339682- -0x136);}return{'segmentsColor':new Texture(_0x3f293b),'segmentsDepth':new Texture(_0x271f9e)};}['createRenderingFramebuffers'](){const _0x3927a4={};_0x3927a4[_0x4ca874(0x5c2,0x5b6)]=this[_0x353b18(0x168,0x1bf)];function _0x353b18(_0xe43e0c,_0x327f08){return _0x5266e8(_0x327f08,_0xe43e0c- -0x268);}_0x3927a4[_0x353b18(0xe7,0x152)]=[this['textures'][_0x353b18(0x94,0x16)]],_0x3927a4[_0x4ca874(0x4fc,0x508)]=this[_0x353b18(0x17a,0x125)]['segmentsDepth'];function _0x4ca874(_0x52939f,_0x212e84){return _0x2cde9c(_0x52939f-0x649,_0x212e84);}return{'segments':new Framebuffer(_0x3927a4)};}[_0x2cde9c(-0xbb,-0xb8)](){function _0x419105(_0x119870,_0x5bd3d1){return _0x5266e8(_0x119870,_0x5bd3d1- -0x530);}function _0x421bde(_0x166d31,_0x2dab64){return _0x5266e8(_0x166d31,_0x2dab64- -0x519);}Object[_0x421bde(-0x1be,-0x204)](this[_0x421bde(-0x223,-0x1fd)])['forEach'](_0x69cada=>{_0x69cada['destroy']();});}[_0x2cde9c(-0x129,-0x195)](){const _0x515038=new Float32Array(this['options'][_0xc57978(-0x19a,-0x1ad)]['flatMap'](_0x93f393=>{const _0x1ae9ef=Color$1['fromCssColorString'](_0x93f393);function _0x347dc5(_0x50814b,_0x34ec04){return _0xc57978(_0x34ec04,_0x50814b-0x6a1);}return[_0x1ae9ef['red'],_0x1ae9ef['green'],_0x1ae9ef['blue'],_0x1ae9ef[_0x347dc5(0x50e,0x553)]];})),_0x6b8755={};_0x6b8755[_0xc57978(-0x1a9,-0x181)]=TextureMinificationFilter[_0xc57978(-0xf4,-0x15f)],_0x6b8755['magnificationFilter']=TextureMagnificationFilter['LINEAR'];function _0xc57978(_0x3102d6,_0x58c249){return _0x5266e8(_0x3102d6,_0x58c249- -0x56a);}_0x6b8755['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x6b8755['wrapT']=TextureWrap['CLAMP_TO_EDGE'];function _0x294a05(_0x309ccd,_0x2a89c2){return _0x2cde9c(_0x309ccd-0x32e,_0x2a89c2);}return new Texture({'context':this[_0xc57978(-0x1e3,-0x19a)],'width':this[_0x294a05(0x2be,0x2be)][_0x294a05(0x294,0x2a6)]['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype[_0xc57978(-0x1da,-0x1f3)],'sampler':new Sampler(_0x6b8755),'source':{'width':this['options']['colors'][_0x294a05(0x2e1,0x35b)],'height':0x1,'arrayBufferView':_0x515038}});}['createSegmentsGeometry'](){const _0x41788c=0x4,_0x260e1b=this[_0x16ec45(0x17b,0x1fd)][_0x135a5d(0x1e7,0x19e)];let _0x418015=[];for(let _0x135e3a=0x0;_0x135e3a<_0x260e1b;_0x135e3a++){for(let _0x19eed3=0x0;_0x19eed3<_0x260e1b;_0x19eed3++){for(let _0x1b9673=0x0;_0x1b9673<_0x41788c;_0x1b9673++){_0x418015['push'](_0x135e3a/_0x260e1b),_0x418015[_0x16ec45(0x1e8,0x16c)](_0x19eed3/_0x260e1b);}}}_0x418015=new Float32Array(_0x418015);const _0x32ff1d=this['options']['particlesTextureSize']**0x2;let _0xb3a7c2=[];for(let _0x2af817=0x0;_0x2af817<_0x32ff1d;_0x2af817++){_0xb3a7c2['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0xb3a7c2=new Float32Array(_0xb3a7c2);let _0x2e241c=[];for(let _0x180e8a=0x0,_0x23a412=0x0;_0x180e8a<_0x32ff1d;_0x180e8a++){_0x2e241c['push'](_0x23a412+0x0,_0x23a412+0x1,_0x23a412+0x2,_0x23a412+0x2,_0x23a412+0x1,_0x23a412+0x3),_0x23a412+=_0x41788c;}_0x2e241c=new Uint32Array(_0x2e241c);const _0x2155ca={};_0x2155ca[_0x16ec45(0xf6,0x122)]=ComponentDatatype[_0x135a5d(0xde,0x130)],_0x2155ca['componentsPerAttribute']=0x2;function _0x135a5d(_0x2b1697,_0x410aac){return _0x2cde9c(_0x410aac-0x210,_0x2b1697);}_0x2155ca['values']=_0x418015;function _0x16ec45(_0x4fc49c,_0xb96468){return _0x2cde9c(_0xb96468-0x26d,_0x4fc49c);}const _0x4f3da3={};_0x4f3da3['componentDatatype']=ComponentDatatype['FLOAT'],_0x4f3da3[_0x16ec45(0x1ba,0x178)]=0x3,_0x4f3da3['values']=_0xb3a7c2;const _0x3eaa50=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x2155ca),'normal':new GeometryAttribute(_0x4f3da3)}),'indices':_0x2e241c});return _0x3eaa50;}[_0x2cde9c(-0xdd,-0xec)](_0x41bfff){const _0x53a17f={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x41bfff};function _0x3594b4(_0x12a80a,_0x5ee700){return _0x2cde9c(_0x12a80a- -0xf3,_0x5ee700);}return Appearance[_0x3594b4(-0x1f3,-0x235)](!![],![],_0x53a17f);}['createPrimitives'](){function _0xe96e02(_0x4baa90,_0x1651a8){return _0x5266e8(_0x4baa90,_0x1651a8- -0x2fc);}const _0x50c92d={};function _0x4ee347(_0x4ad914,_0x5dbfb7){return _0x5266e8(_0x5dbfb7,_0x4ad914-0x71);}_0x50c92d['st']=0x0,_0x50c92d['normal']=0x1;const _0x19a706={};_0x19a706['enabled']=!![];const _0x2ce86b={};_0x2ce86b[_0xe96e02(0xc2,0xaf)]=!![],_0x2ce86b[_0xe96e02(0x5d,0x61)]=WebGLRenderingContext[_0xe96e02(0x95,0x82)],_0x2ce86b[_0x4ee347(0x3be,0x347)]=WebGLRenderingContext['SRC_ALPHA'],_0x2ce86b['blendFuncDestination']=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x1901fb={};_0x1901fb['viewport']=undefined,_0x1901fb[_0x4ee347(0x3bf,0x411)]=_0x19a706,_0x1901fb['depthMask']=!![],_0x1901fb['blending']=_0x2ce86b;const _0x1dd2e0=new CustomPrimitive({'commandType':_0xe96e02(0x3f,0xa7),'attributeLocations':_0x50c92d,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0x4ee347(0x374,0x301)],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this['computing']['particlesTextures']['currentParticlesPosition'],'postProcessingPosition':()=>this['computing']['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0xe96e02(0x48,0x3a)]['particlesSpeed'],'frameRateAdjustment':()=>this[_0x4ee347(0x388,0x39f)]['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{var _0xbb0123,_0x1286f0;function _0x300ccb(_0x3729a5,_0x4367d8){return _0x4ee347(_0x3729a5- -0x38b,_0x4367d8);}function _0x2a6e87(_0x44d049,_0x4dfbc2){return _0x4ee347(_0x4dfbc2-0x15a,_0x44d049);}const _0x1e5040=new Cartesian2(((_0xbb0123=this['options']['domain'])===null||_0xbb0123===void 0x0?void 0x0:_0xbb0123['min'])??this['computing'][_0x300ccb(0xc9,0x40)][_0x300ccb(-0x1c,0x35)]['min'],((_0x1286f0=this['options'][_0x2a6e87(0x51f,0x50e)])===null||_0x1286f0===void 0x0?void 0x0:_0x1286f0[_0x2a6e87(0x5b4,0x5a6)])??this[_0x2a6e87(0x520,0x4e2)]['windData'][_0x2a6e87(0x4fe,0x4c9)][_0x2a6e87(0x614,0x5a6)]);return _0x1e5040;},'displayRange':()=>{function _0x2d7e0c(_0x29892b,_0x183dd2){return _0xe96e02(_0x29892b,_0x183dd2-0xc1);}function _0x5eb028(_0x624d79,_0x9d04f0){return _0x4ee347(_0x9d04f0- -0x37d,_0x624d79);}var _0x2f2d18,_0x1f6bb0;const _0x126d5f=new Cartesian2(((_0x2f2d18=this['options'][_0x5eb028(0x7e,0x19)])===null||_0x2f2d18===void 0x0?void 0x0:_0x2f2d18['min'])??this[_0x5eb028(0x4a,0xb)]['windData']['speed'][_0x5eb028(0xc8,0x5f)],((_0x1f6bb0=this['options'][_0x5eb028(-0x17,0x19)])===null||_0x1f6bb0===void 0x0?void 0x0:_0x1f6bb0[_0x5eb028(0x6b,0xcf)])??this[_0x5eb028(0x6,0xb)]['windData'][_0x2d7e0c(0xc2,0xc3)][_0x2d7e0c(0x1ed,0x1a0)]);return _0x126d5f;},'particleHeight':()=>this[_0x4ee347(0x458,0x4b0)][_0xe96e02(0x71,0xe3)]||0x0,'aspect':()=>this[_0x4ee347(0x441,0x3eb)]['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters'][_0xe96e02(0x4d,0xa5)],'lineWidth':()=>{const _0x161a16={};_0x161a16[_0x2e82bb(0xbc,0x4b)]=0x1;function _0xe980fe(_0x393c38,_0x810440){return _0xe96e02(_0x393c38,_0x810440-0x537);}_0x161a16[_0x2e82bb(0x65,0xbb)]=0x2;const _0x478e3e=this[_0xe980fe(0x600,0x622)]['lineWidth']||_0x161a16;function _0x2e82bb(_0x56925f,_0x4626b3){return _0x4ee347(_0x4626b3- -0x391,_0x56925f);}return new Cartesian2(_0x478e3e[_0x2e82bb(0xb7,0x4b)],_0x478e3e[_0xe980fe(0x622,0x616)]);},'lineLength':()=>{const _0x39fedc={};_0x39fedc['min']=0x14,_0x39fedc['max']=0x64;function _0x7852f(_0x14961c,_0x1c7196){return _0x4ee347(_0x1c7196- -0x3aa,_0x14961c);}const _0x5d07dd=this['options']['lineLength']||_0x39fedc;return new Cartesian2(_0x5d07dd['min'],_0x5d07dd[_0x7852f(0xee,0xa2)]);},'is3D':()=>this[_0x4ee347(0x439,0x3de)]['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures'][_0xe96e02(0xae,0x10a)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x1901fb)}),_0x7da6e1={};return _0x7da6e1[_0x4ee347(0x40f,0x428)]=_0x1dd2e0,_0x7da6e1;}['onParticlesTextureSizeChange'](){const _0x3f0cd6=this['createSegmentsGeometry']();function _0x3e53dd(_0x1ac259,_0x4ae2fb){return _0x2cde9c(_0x4ae2fb-0x541,_0x1ac259);}this['primitives'][_0x1cd04f(0x200,0x224)]['geometry']=_0x3f0cd6;const _0x27ce63={};function _0x1cd04f(_0x286412,_0x1dc839){return _0x5266e8(_0x286412,_0x1dc839- -0x17a);}_0x27ce63['context']=this['context'],_0x27ce63['geometry']=_0x3f0cd6,_0x27ce63['attributeLocations']=this[_0x1cd04f(0x15f,0x18f)]['segments']['attributeLocations'],_0x27ce63['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x5b5292=VertexArray['fromGeometry'](_0x27ce63);this['primitives'][_0x1cd04f(0x1b1,0x224)]['commandToExecute']&&(this['primitives'][_0x1cd04f(0x1aa,0x224)][_0x3e53dd(0x4f8,0x4e1)][_0x1cd04f(0x201,0x249)]=_0x5b5292);}['onColorTableChange'](){this['colorTable'][_0x5b2ac9(-0x1fd,-0x18a)]();function _0x5b2ac9(_0x2c6b3d,_0x521afe){return _0x2cde9c(_0x521afe- -0xcc,_0x2c6b3d);}this['colorTable']=this['createColorTableTexture']();}[_0x2cde9c(-0x150,-0x102)](_0x169221){const _0x135c83=_0x169221[_0x18189f(0x254,0x260)]&&JSON[_0x798ed3(0x577,0x5f8)](_0x169221[_0x18189f(0x29e,0x260)])!==JSON['stringify'](this['options']['colors']);this['options']=deepMerge(_0x169221,this[_0x798ed3(0x59a,0x607)]);function _0x798ed3(_0x16c5f6,_0x43f3aa){return _0x5266e8(_0x16c5f6,_0x43f3aa-0x220);}function _0x18189f(_0x500df5,_0x433b64){return _0x2cde9c(_0x433b64-0x2fa,_0x500df5);}_0x135c83&&this['onColorTableChange']();}['destroy'](){function _0x23b0f7(_0x25afbd,_0x23894b){return _0x5266e8(_0x25afbd,_0x23894b-0x29);}Object[_0x23b0f7(0x2cc,0x33e)](this[_0x4d0e71(-0xe8,-0x61)])['forEach'](_0x30ec56=>{_0x30ec56['destroy']();});function _0x4d0e71(_0x35b2bb,_0x333227){return _0x2cde9c(_0x35b2bb-0x53,_0x333227);}Object[_0x4d0e71(-0xef,-0x13b)](this['primitives'])[_0x23b0f7(0x383,0x387)](_0x1c63e7=>{_0x1c63e7['destroy']();}),this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x2cde9c(-0xae,-0xe7)];class WindParticleSystem{constructor(_0x1a2597,_0x25e7d4,_0x11911e,_0x168b94,_0x58966d){function _0x23f0f7(_0x46d4f0,_0xecc60d){return _0x2cde9c(_0xecc60d-0x35a,_0x46d4f0);}this['context']=_0x1a2597,this[_0x23f0f7(0x29d,0x2ea)]=_0x11911e,this['viewerParameters']=_0x168b94;function _0x298189(_0x6d43b2,_0x540041){return _0x2cde9c(_0x6d43b2-0x32b,_0x540041);}this[_0x23f0f7(0x27f,0x21a)]=new WindParticlesComputing(_0x1a2597,_0x25e7d4,_0x11911e,_0x168b94,_0x58966d),this[_0x23f0f7(0x37e,0x305)]=new WindParticlesRendering(_0x1a2597,_0x11911e,_0x168b94,this['computing']),this['clearFramebuffers']();}['getPrimitives'](){function _0x3d7fcc(_0x384f84,_0x273006){return _0x2cde9c(_0x384f84-0x1c5,_0x273006);}const _0x27bc92=[this[_0x4b4097(0x3b0,0x351)]['primitives']['calculateSpeed'],this['computing']['primitives']['updatePosition'],this['computing'][_0x4b4097(0x3a2,0x341)]['postProcessingPosition'],this['rendering']['primitives'][_0x4b4097(0x437,0x3b7)]];function _0x4b4097(_0x52fb37,_0x500c58){return _0x5266e8(_0x500c58,_0x52fb37-0x99);}return _0x27bc92;}[_0x2cde9c(-0xab,-0xf0)](){const _0x316fee=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0x2b342a(_0x75d2f4,_0x3448a2){return _0x5266e8(_0x3448a2,_0x75d2f4- -0x3f3);}function _0x548311(_0x37ef02,_0x3c417a){return _0x5266e8(_0x3c417a,_0x37ef02- -0x42f);}Object[_0x548311(-0x55,0xc)](this['rendering']['framebuffers'])[_0x2b342a(-0x95,-0xa5)](_0x960448=>{_0x316fee['framebuffer']=this[_0x56b2f7(0x49f,0x46b)][_0x56b2f7(0x3b9,0x37a)][_0x960448];function _0x56b2f7(_0x393985,_0x13febf){return _0x548311(_0x393985-0x4cc,_0x13febf);}function _0x1de2e9(_0x14b4d6,_0x3d3f7b){return _0x548311(_0x3d3f7b-0x3a8,_0x14b4d6);}_0x316fee['execute'](this['context']);});}['changeOptions'](_0x40af52){let _0x212d26=![];_0x40af52['particlesTextureSize']&&this['options']['particlesTextureSize']!==_0x40af52[_0x24bde1(0x250,0x1c7)]&&(_0x212d26=!![]);const _0x2e9203=deepMerge(_0x40af52,this[_0x51c623(0x538,0x5b8)]);function _0x24bde1(_0x5618d4,_0x5d7056){return _0x5266e8(_0x5618d4,_0x5d7056- -0x21e);}if(_0x2e9203['particlesTextureSize']<0x1)throw new Error(_0x51c623(0x555,0x530));function _0x51c623(_0x532cdc,_0x5ad6ac){return _0x5266e8(_0x532cdc,_0x5ad6ac-0x1d1);}this['options']=_0x2e9203,this[_0x24bde1(0x221,0x1e4)]['updateOptions'](_0x40af52),this['computing']['updateOptions'](_0x40af52),_0x212d26&&(this['computing'][_0x24bde1(0x163,0x102)](),this[_0x51c623(0x53d,0x4e8)][_0x51c623(0x593,0x51b)](),this[_0x51c623(0x658,0x5d3)][_0x51c623(0x4f1,0x573)]());}['applyViewerParameters'](_0x4dfda1){function _0x1f9115(_0x3bc11d,_0x2e0b62){return _0x5266e8(_0x2e0b62,_0x3bc11d-0x23b);}this[_0x2fe703(0x615,0x618)]=_0x4dfda1;function _0x2fe703(_0x45275a,_0xd932c7){return _0x5266e8(_0xd932c7,_0x45275a-0x24d);}this[_0x2fe703(0x564,0x52a)]['viewerParameters']=_0x4dfda1,this['rendering']['viewerParameters']=_0x4dfda1;}[_0x5266e8(0x3ef,0x399)](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x2cde9c(-0x148,-0x1bb)],_0x16802d={};_0x16802d[_0x2cde9c(-0xec,-0xe2)]=0x1,_0x16802d['max']=0x2;const _0x47ed85={};function _0x5776(_0x359f1a,_0x24f2b1){const _0x2e373a=_0x2e37();return _0x5776=function(_0x577601,_0x46e3cd){_0x577601=_0x577601-0x169;let _0x3554a7=_0x2e373a[_0x577601];return _0x3554a7;},_0x5776(_0x359f1a,_0x24f2b1);}_0x47ed85['min']=0x14,_0x47ed85['max']=0x64;const _0x45ef57={};_0x45ef57['particlesTextureSize']=0x64,_0x45ef57[_0x2cde9c(-0x78,-0xde)]=0x0,_0x45ef57[_0x5266e8(0x2ec,0x318)]=_0x16802d,_0x45ef57[_0x5266e8(0x3e2,0x361)]=_0x47ed85,_0x45ef57['speedFactor']=0x1,_0x45ef57['dropRate']=0.003,_0x45ef57['dropRateBump']=0.001,_0x45ef57[_0x2cde9c(-0x9a,-0x89)]=['rgb(206,255,255)'],_0x45ef57['flipY']=![],_0x45ef57[_0x5266e8(0x337,0x33a)]=!![];const DEF_OPTIONS=_0x45ef57;class WindLayer extends BaseLayer$1{constructor(_0x38c7a8={}){function _0xaac2f9(_0x297c06,_0x8ae3de){return _0x5266e8(_0x8ae3de,_0x297c06- -0x1d);}_0x38c7a8={...DEF_OPTIONS,..._0x38c7a8},super(_0x38c7a8),this[_0xaac2f9(0x2eb,0x2cb)](_0x38c7a8,_0x38c7a8);}get['layer'](){function _0x2038d9(_0x543e60,_0x2a9abd){return _0x2cde9c(_0x2a9abd-0x5b5,_0x543e60);}return this[_0x2038d9(0x46c,0x467)];}get['data'](){return this['options']['data'];}set[_0x5266e8(0x35c,0x339)](_0x1323c8){function _0x11bf19(_0x25dd94,_0x475471){return _0x5266e8(_0x25dd94,_0x475471- -0x62);}this[_0x2971d0(0x28c,0x258)][_0x11bf19(0x295,0x2d7)]=_0x1323c8;function _0x2971d0(_0x18f56f,_0x4928df){return _0x2cde9c(_0x18f56f-0x2fc,_0x4928df);}this['setData'](_0x1323c8);}get['colors'](){function _0xbc6174(_0x221171,_0x94a0b8){return _0x2cde9c(_0x94a0b8-0x161,_0x221171);}function _0x3502f5(_0x47f7ea,_0x2aa100){return _0x5266e8(_0x2aa100,_0x47f7ea- -0x550);}return this[_0xbc6174(0x89,0xf1)][_0x3502f5(-0x193,-0x1ef)];}set['colors'](_0x2bc59c){this[_0x488161(0x85,0x84)][_0x488161(0x5b,0x27)]=_0x2bc59c;const _0x5b232d={};function _0x438b90(_0x544365,_0x99f7e0){return _0x5266e8(_0x544365,_0x99f7e0- -0x568);}_0x5b232d['colors']=_0x2bc59c;function _0x488161(_0x4fda2e,_0x21860d){return _0x2cde9c(_0x4fda2e-0xf5,_0x21860d);}this[_0x438b90(-0x269,-0x260)](this[_0x438b90(-0x17c,-0x181)],_0x5b232d);}['_showHook'](_0x4e1bac){function _0x3ba9d6(_0x1530d8,_0x2a319c){return _0x2cde9c(_0x1530d8-0x1c3,_0x2a319c);}_0x4e1bac?this['_addedHook']():this[_0x3ba9d6(0x7a,0x8b)]();}['_mountedHook'](){}['_addedHook'](){this['scene']=this['_map'][_0x230975(0x417,0x38e)],this['camera']=this[_0x1ae6cb(0x661,0x5ed)]['camera'];function _0x1ae6cb(_0x5c6940,_0x30f9fe){return _0x2cde9c(_0x30f9fe-0x653,_0x5c6940);}function _0x230975(_0x2ce852,_0x53d358){return _0x2cde9c(_0x53d358-0x4b8,_0x2ce852);}this['options'][_0x1ae6cb(0x534,0x535)]&&this['setData'](this[_0x1ae6cb(0x563,0x5e3)]['data']);if(!this['windData']||!this[_0x230975(0x3cd,0x3e4)])return;this[_0x1ae6cb(0x5fe,0x5c4)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene']['context'],this[_0x1ae6cb(0x58c,0x5df)],this[_0x1ae6cb(0x5c8,0x5e3)],this['viewerParameters'],this[_0x1ae6cb(0x59e,0x529)]),this['primitives']=this['particleSystem']['getPrimitives'](),this['primitives']['forEach'](_0x4b145b=>{this['scene']['primitives']['add'](_0x4b145b);}),this[_0x230975(0x412,0x451)]['percentageChanged']=0.01,this[_0x230975(0x407,0x451)]['changed'][_0x1ae6cb(0x4f4,0x537)](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete']['addEventListener'](this['updateViewerParameters'][_0x1ae6cb(0x627,0x601)](this)),window[_0x230975(0x3cd,0x39c)]('resize',this['updateViewerParameters']['bind'](this));}['_removedHook'](){this['camera'][_0x351805(-0x15b,-0xd8)]['removeEventListener'](this['updateViewerParameters'][_0x351805(-0x83,-0x10)](this)),this['scene']['morphComplete']['removeEventListener'](this['updateViewerParameters'][_0x351805(0x6f,-0x10)](this));function _0x1ce517(_0x2e371c,_0xdb1fbf){return _0x5266e8(_0x2e371c,_0xdb1fbf- -0x552);}window['removeEventListener']('resize',this[_0x351805(-0x3a,-0xaf)][_0x1ce517(-0xdc,-0x14d)](this));function _0x351805(_0x17f1b2,_0xeab9b9){return _0x5266e8(_0x17f1b2,_0xeab9b9- -0x415);}this['primitives']&&(this['primitives']['forEach'](_0x592fd9=>{function _0x43999f(_0x4d0e06,_0x24d367){return _0x351805(_0x4d0e06,_0x24d367-0x2e0);}function _0xb14f8f(_0x54a097,_0x2a8a8c){return _0x1ce517(_0x2a8a8c,_0x54a097-0x2ee);}this['scene'][_0xb14f8f(0xa5,0x10b)][_0x43999f(0x207,0x244)](_0x592fd9);}),delete this[_0x351805(-0xa4,-0x10c)]),this[_0x1ce517(-0x1d4,-0x157)]&&(this[_0x1ce517(-0x112,-0x157)]['destroy'](),delete this['particleSystem']);}['setData'](_0x580a65,_0x36ae80){this['windData']=this[_0x3b4e09(0x316,0x394)](_0x580a65);function _0x3b4e09(_0x324a6c,_0x328f4a){return _0x5266e8(_0x324a6c,_0x328f4a-0x7e);}function _0x236836(_0x1ba730,_0x97de87){return _0x2cde9c(_0x97de87-0x4f7,_0x1ba730);}if(_0x36ae80){this['_removedHook'](),this[_0x236836(0x404,0x48b)]();return;}this['particleSystem']?(this['particleSystem'][_0x3b4e09(0x3ba,0x395)]['updateWindData'](this['windData']),this['scene']['requestRender']()):this[_0x236836(0x4e2,0x48b)]();}[_0x2cde9c(-0x14f,-0x10d)](_0x258fe7,_0x5d0e7a){function _0x458e18(_0x417081,_0x108084){return _0x5266e8(_0x417081,_0x108084-0x222);}function _0x36fd98(_0x55e225,_0x1be302){return _0x5266e8(_0x55e225,_0x1be302-0x1dd);}this[_0x36fd98(0x55e,0x5d8)]&&(this['particleSystem']['changeOptions'](_0x5d0e7a),this['scene'][_0x36fd98(0x547,0x590)]());}[_0x2cde9c(-0x141,-0x129)](_0x3ef114){var _0x58b4b9,_0x13a039;const _0xea51d2={..._0x3ef114},_0x24faa9=_0xea51d2;!_0x24faa9['height']&&_0x24faa9['rows']&&(_0x24faa9['height']=_0x24faa9['rows']);!_0x24faa9[_0x54a56b(-0x4d,0x32)]&&_0x24faa9[_0x54a56b(-0x87,-0x32)]&&(_0x24faa9['width']=_0x24faa9['cols']);function _0x4fe633(_0xc63272,_0x280ce1){return _0x2cde9c(_0xc63272- -0x91,_0x280ce1);}!_0x24faa9['bounds']&&(_0x24faa9[_0x4fe633(-0x11e,-0xfa)]={'west':_0x24faa9[_0x54a56b(-0xbc,-0x95)],'south':_0x24faa9['ymin'],'east':_0x24faa9['xmax'],'north':_0x24faa9['ymax']});if(!_0x24faa9['u']){const _0x221007={};_0x221007['array']=_0x3ef114['udata'],_0x221007[_0x4fe633(-0x17d,-0x14d)]=_0x3ef114[_0x54a56b(-0xd,0x9)],_0x221007['max']=_0x3ef114['umax'],_0x24faa9['u']=_0x221007;}function _0x54a56b(_0x2aa17e,_0x205e67){return _0x2cde9c(_0x205e67-0xa9,_0x2aa17e);}if(!_0x24faa9['v']){const _0x1289d5={};_0x1289d5['array']=_0x3ef114[_0x54a56b(-0x8,-0x8)],_0x1289d5['min']=_0x3ef114['vmin'],_0x1289d5['max']=_0x3ef114[_0x54a56b(-0x94,-0x25)],_0x24faa9['v']=_0x1289d5;}if(((_0x58b4b9=_0x24faa9['speed'])===null||_0x58b4b9===void 0x0?void 0x0:_0x58b4b9['min'])===undefined||((_0x13a039=_0x24faa9['speed'])===null||_0x13a039===void 0x0?void 0x0:_0x13a039['max'])===undefined||_0x24faa9['speed']['array']===undefined){const _0x2de08b={'array':new Float32Array(_0x24faa9['u'][_0x4fe633(-0x185,-0x188)][_0x54a56b(0xb9,0x5c)]),'min':Number[_0x54a56b(-0xa1,-0x2f)],'max':Number['MIN_VALUE']};for(let _0x297269=0x0;_0x297269<_0x24faa9['u']['array']['length'];_0x297269++){_0x2de08b['array'][_0x297269]=Math['sqrt'](_0x24faa9['u']['array'][_0x297269]*_0x24faa9['u']['array'][_0x297269]+_0x24faa9['v'][_0x4fe633(-0x185,-0x154)][_0x297269]*_0x24faa9['v'][_0x4fe633(-0x185,-0x199)][_0x297269]),_0x2de08b[_0x54a56b(-0x34,-0x4b)][_0x297269]!==0x0&&(_0x2de08b['min']=Math['min'](_0x2de08b['min'],_0x2de08b[_0x4fe633(-0x185,-0x1b4)][_0x297269]),_0x2de08b['max']=Math['max'](_0x2de08b[_0x4fe633(-0x10d,-0x165)],_0x2de08b['array'][_0x297269]));}_0x24faa9['speed']=_0x2de08b;}return _0x24faa9;}['updateViewerParameters'](){var _0x843d56;const _0x256d5d=this['scene'];if(!_0x256d5d)return;const _0x1bcba1=_0x256d5d[_0x3d4601(0x10c,0xc5)],_0x424a14={};_0x424a14['x']=0x0;function _0x3d4601(_0xb5d598,_0x2b990d){return _0x2cde9c(_0x2b990d-0x1f5,_0xb5d598);}_0x424a14['y']=0x0;const _0x393598={};_0x393598['x']=0x0,_0x393598['y']=_0x1bcba1['clientHeight'];const _0x4d00e4={};_0x4d00e4['x']=_0x1bcba1['clientWidth'],_0x4d00e4['y']=0x0;const _0x16580c={};_0x16580c['x']=_0x1bcba1['clientWidth'],_0x16580c['y']=_0x1bcba1['clientHeight'];const _0x1c87bd=[_0x424a14,_0x393598,_0x4d00e4,_0x16580c];function _0x5cd0a6(_0x47fef3,_0x1e0dfc){return _0x2cde9c(_0x1e0dfc-0x5f6,_0x47fef3);}let _0x59ac5b=0xb4,_0xf3d765=-0xb4,_0x5ea9d5=0x5a,_0x55863d=-0x5a,_0x5438bc=![];for(const _0xe7910 of _0x1c87bd){const _0x49e2d2=_0x256d5d['camera'][_0x5cd0a6(0x480,0x4e1)](new Cesium$1['Cartesian2'](_0xe7910['x'],_0xe7910['y']),_0x256d5d['globe'][_0x5cd0a6(0x4a5,0x4f0)]);if(!_0x49e2d2){_0x5438bc=!![];break;}const _0x57c8f7=_0x256d5d[_0x5cd0a6(0x4bc,0x4b0)][_0x5cd0a6(0x4ac,0x4f0)][_0x3d4601(0x12d,0x174)](_0x49e2d2),_0x157930=Cesium$1['Math']['toDegrees'](_0x57c8f7[_0x5cd0a6(0x46e,0x4a5)]),_0x56349c=Cesium$1['Math']['toDegrees'](_0x57c8f7['latitude']);_0x59ac5b=Math[_0x3d4601(0xd9,0x109)](_0x59ac5b,_0x157930),_0xf3d765=Math[_0x5cd0a6(0x5fb,0x57a)](_0xf3d765,_0x157930),_0x5ea9d5=Math['min'](_0x5ea9d5,_0x56349c),_0x55863d=Math[_0x5cd0a6(0x5c6,0x57a)](_0x55863d,_0x56349c);}if(!_0x5438bc){const _0x2d2e1d=new Cesium$1['Cartesian2'](Math['max'](this['windData'][_0x3d4601(0x1c9,0x168)]['west'],_0x59ac5b),Math['min'](this['windData'][_0x3d4601(0x151,0x168)]['east'],_0xf3d765)),_0x702252=new Cesium$1['Cartesian2'](Math['max'](this['windData']['bounds'][_0x3d4601(0x129,0x19f)],_0x5ea9d5),Math[_0x3d4601(0x97,0x109)](this[_0x3d4601(0x112,0x181)]['bounds'][_0x5cd0a6(0x50e,0x565)],_0x55863d)),_0x382155=(_0x2d2e1d['y']-_0x2d2e1d['x'])*0.05,_0x8257a9=(_0x702252['y']-_0x702252['x'])*0.05;_0x2d2e1d['x']=Math['max'](this[_0x3d4601(0x1bc,0x181)]['bounds'][_0x3d4601(0x1a6,0x159)],_0x2d2e1d['x']-_0x382155),_0x2d2e1d['y']=Math[_0x3d4601(0xed,0x109)](this['windData'][_0x3d4601(0x1a2,0x168)][_0x5cd0a6(0x56c,0x4e3)],_0x2d2e1d['y']+_0x382155),_0x702252['x']=Math['max'](this[_0x5cd0a6(0x5f6,0x582)][_0x3d4601(0x12f,0x168)]['south'],_0x702252['x']-_0x8257a9),_0x702252['y']=Math['min'](this['windData'][_0x3d4601(0x163,0x168)]['north'],_0x702252['y']+_0x8257a9),this[_0x5cd0a6(0x541,0x567)]['lonRange']=_0x2d2e1d,this['viewerParameters']['latRange']=_0x702252;const _0x5ed6be=this['windData']['bounds'][_0x3d4601(0xa3,0xe2)]-this[_0x3d4601(0x11a,0x181)][_0x3d4601(0xec,0x168)]['west'],_0x26f421=this['windData'][_0x3d4601(0x1a4,0x168)]['north']-this[_0x5cd0a6(0x5f8,0x582)]['bounds']['south'],_0xeedd8a=(_0x2d2e1d['y']-_0x2d2e1d['x'])/_0x5ed6be,_0x1f3f28=(_0x702252['y']-_0x702252['x'])/_0x26f421,_0x453fcd=Math[_0x5cd0a6(0x58d,0x50a)](_0xeedd8a,_0x1f3f28),_0x231ba8=0x3e8*_0x453fcd;_0x231ba8>0x0&&(this['viewerParameters']['pixelSize']=Math['max'](0x0,Math[_0x3d4601(0x120,0x109)](0x3e8,_0x231ba8)));}this['viewerParameters']['sceneMode']=this[_0x3d4601(0x70,0xcb)][_0x3d4601(0xb0,0xe4)],(_0x843d56=this['particleSystem'])===null||_0x843d56===void 0x0||_0x843d56['applyViewerParameters'](this[_0x5cd0a6(0x4fb,0x567)]);}['getDataAtLonLat'](_0x51ad49,_0x2af089){const {bounds:_0x541f52,width:_0x112233,height:_0x2a2a33,u:_0x375912,v:_0x32f207,speed:_0x55652f}=this['windData'],{flipY:_0x1b43f9}=this[_0x180994(0x5ba,0x561)];if(_0x51ad49<_0x541f52[_0x180994(0x4d7,0x535)]||_0x51ad49>_0x541f52['east']||_0x2af089<_0x541f52['south']||_0x2af089>_0x541f52['north'])return null;const _0x3f2341=(_0x51ad49-_0x541f52['west'])/(_0x541f52[_0x180994(0x518,0x4be)]-_0x541f52[_0x180994(0x50f,0x535)])*(_0x112233-0x1);let _0x31c1c0=(_0x2af089-_0x541f52['south'])/(_0x541f52['north']-_0x541f52[_0x180994(0x580,0x57b)])*(_0x2a2a33-0x1);_0x1b43f9&&(_0x31c1c0=_0x2a2a33-0x1-_0x31c1c0);const _0x228aa9=Math['floor'](_0x3f2341),_0x59d805=Math['floor'](_0x31c1c0),_0x348a5b=Math['floor'](_0x3f2341),_0x27fedf=Math[_0x180994(0x471,0x4e5)](_0x348a5b+0x1,_0x112233-0x1),_0x52876c=Math['floor'](_0x31c1c0),_0x58760d=Math['min'](_0x52876c+0x1,_0x2a2a33-0x1),_0x5d7a6d=_0x3f2341-_0x348a5b,_0x181dc2=_0x31c1c0-_0x52876c,_0x15874d=_0x59d805*_0x112233+_0x228aa9,_0x53db77=_0x52876c*_0x112233+_0x348a5b,_0x2cee9c=_0x52876c*_0x112233+_0x27fedf,_0x61560d=_0x58760d*_0x112233+_0x348a5b;function _0x134fa4(_0x454df1,_0x252905){return _0x5266e8(_0x252905,_0x454df1- -0x31);}const _0x12e018=_0x58760d*_0x112233+_0x27fedf,_0x367304=_0x375912['array'][_0x53db77],_0x5e816b=_0x375912[_0x134fa4(0x332,0x3b3)][_0x2cee9c],_0x21e514=_0x375912[_0x134fa4(0x332,0x396)][_0x61560d],_0x2fd780=_0x375912[_0x134fa4(0x332,0x37e)][_0x12e018],_0x46f8c1=(0x1-_0x5d7a6d)*(0x1-_0x181dc2)*_0x367304+_0x5d7a6d*(0x1-_0x181dc2)*_0x5e816b+(0x1-_0x5d7a6d)*_0x181dc2*_0x21e514+_0x5d7a6d*_0x181dc2*_0x2fd780,_0x59deed=_0x32f207[_0x180994(0x475,0x4dd)][_0x53db77],_0x2e27e0=_0x32f207['array'][_0x2cee9c],_0x2dcee6=_0x32f207['array'][_0x61560d],_0x2d24eb=_0x32f207[_0x180994(0x4d5,0x4dd)][_0x12e018],_0x10717a=(0x1-_0x5d7a6d)*(0x1-_0x181dc2)*_0x59deed+_0x5d7a6d*(0x1-_0x181dc2)*_0x2e27e0+(0x1-_0x5d7a6d)*_0x181dc2*_0x2dcee6+_0x5d7a6d*_0x181dc2*_0x2d24eb,_0x27b020=Math[_0x180994(0x58f,0x55b)](_0x46f8c1*_0x46f8c1+_0x10717a*_0x10717a),_0x5ba72f={};_0x5ba72f['u']=_0x375912[_0x134fa4(0x332,0x38b)][_0x15874d],_0x5ba72f['v']=_0x32f207['array'][_0x15874d],_0x5ba72f['speed']=_0x55652f[_0x134fa4(0x332,0x2c9)][_0x15874d];const _0x47c6ad={};_0x47c6ad['u']=_0x46f8c1,_0x47c6ad['v']=_0x10717a,_0x47c6ad[_0x180994(0x425,0x478)]=_0x27b020;const _0x3b9d81={};_0x3b9d81['original']=_0x5ba72f;function _0x180994(_0x3573ce,_0x3edee9){return _0x5266e8(_0x3573ce,_0x3edee9-0x17a);}return _0x3b9d81[_0x134fa4(0x32a,0x393)]=_0x47c6ad,_0x3b9d81;}}mars3d__namespace[_0x2cde9c(-0x5a,0x28)]['register'](_0x5266e8(0x45f,0x400),WindLayer),mars3d__namespace[_0x2cde9c(-0x98,-0xfd)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x3de276(_0x460a0f,_0x1606c6){return _0x5266e8(_0x1606c6,_0x460a0f- -0x433);}this['lng']=null,this['lat']=null,this['tlng']=null,this['tlat']=null,this['age']=null,this[_0x3de276(-0x135,-0xc0)]=null;}['destroy'](){for(const _0x1ed5fa in this){delete this[_0x1ed5fa];}}}class CanvasWindField{constructor(_0x49c4f1){this['setOptions'](_0x49c4f1);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x586fa1){function _0x51868d(_0x39736c,_0xdd1ba6){return _0x2cde9c(_0xdd1ba6-0x1e1,_0x39736c);}this[_0x4946c1(0x155,0xcd)]=(0x64-(_0x586fa1>0x63?0x63:_0x586fa1))*0x64;function _0x4946c1(_0x49529a,_0x559e9d){return _0x2cde9c(_0x559e9d-0x16c,_0x49529a);}this['_calc_speedRate']=[(this['xmax']-this[_0x51868d(0xf1,0xa3)])/this['_speedRate'],(this['ymax']-this[_0x51868d(0x9a,0xa5)])/this[_0x51868d(0x19e,0x142)]];}get[_0x5266e8(0x376,0x3f9)](){function _0x36bc32(_0x144986,_0x3fc31a){return _0x2cde9c(_0x3fc31a-0x472,_0x144986);}return this[_0x36bc32(0x357,0x31b)];}set[_0x2cde9c(-0x5e,-0x7a)](_0x14e9b7){this['_maxAge']=_0x14e9b7;}['setOptions'](_0x50efdf){this['options']=_0x50efdf,this[_0x6e4c61(0x2a6,0x27f)]=_0x50efdf[_0xb03592(-0x81,-0x1c)]||0x78;function _0x6e4c61(_0x275390,_0x3c569c){return _0x2cde9c(_0x275390-0x304,_0x3c569c);}function _0xb03592(_0x2b9134,_0x2cdeef){return _0x2cde9c(_0x2cdeef-0x42,_0x2b9134);}this['speedRate']=_0x50efdf['speedRate']||0x32,this[_0x6e4c61(0x1ba,0x145)]=[];const _0x510392=_0x50efdf['particlesNumber']||0x1000;for(let _0xfc47e4=0x0;_0xfc47e4<_0x510392;_0xfc47e4++){const _0x45d82e=this['_randomParticle'](new CanvasParticle());this['particles'][_0xb03592(-0x116,-0xbf)](_0x45d82e);}}['setDate'](_0x30304d){this['rows']=_0x30304d['rows'],this[_0x4d6756(-0x125,-0xb4)]=_0x30304d['cols'],this['xmin']=_0x30304d[_0x4d6756(-0x188,-0x1ea)],this['xmax']=_0x30304d['xmax'],this['ymin']=_0x30304d[_0x477605(0x13d,0x1c3)],this['ymax']=_0x30304d[_0x477605(0x121,0x10c)],this['grid']=[];const _0x506f55=_0x30304d['udata'],_0x544797=_0x30304d[_0x4d6756(-0xfb,-0xf8)];let _0x343198=![];function _0x4d6756(_0x10825f,_0x66a029){return _0x5266e8(_0x66a029,_0x10825f- -0x4a1);}_0x506f55[_0x4d6756(-0x97,-0xab)]===this[_0x4d6756(-0xf7,-0x8b)]&&_0x506f55[0x0]['length']===this['cols']&&(_0x343198=!![]);let _0x2d65d2=0x0,_0x1092fb=null,_0x234a6c=null;for(let _0x33d17f=0x0;_0x33d17f<this[_0x477605(0x1cc,0x217)];_0x33d17f++){_0x1092fb=[];for(let _0x3c4d81=0x0;_0x3c4d81<this[_0x477605(0x19e,0x190)];_0x3c4d81++,_0x2d65d2++){_0x343198?_0x234a6c=this[_0x4d6756(-0x148,-0xdb)](_0x506f55[_0x33d17f][_0x3c4d81],_0x544797[_0x33d17f][_0x3c4d81]):_0x234a6c=this['_calcUV'](_0x506f55[_0x2d65d2],_0x544797[_0x2d65d2]),_0x1092fb[_0x4d6756(-0x14b,-0x1bb)](_0x234a6c);}this[_0x4d6756(-0x11a,-0xc7)][_0x477605(0x178,0x1fe)](_0x1092fb);}function _0x477605(_0x494c42,_0x4a13f1){return _0x5266e8(_0x4a13f1,_0x494c42- -0x1de);}!this['options'][_0x4d6756(-0x109,-0x11e)]&&this[_0x4d6756(-0x11a,-0x105)][_0x4d6756(-0xf9,-0x167)]();}['clear'](){delete this['rows'],delete this['cols'];function _0x12bc6c(_0x5e7059,_0x3cc3ce){return _0x5266e8(_0x5e7059,_0x3cc3ce-0xc5);}delete this['xmin'],delete this['xmax'],delete this[_0x12bc6c(0x424,0x3e0)],delete this[_0x3c399e(0x2c8,0x351)];function _0x3c399e(_0x44a9b9,_0x50003e){return _0x2cde9c(_0x50003e-0x4a9,_0x44a9b9);}delete this['grid'],delete this['particles'];}['toGridXY'](_0x5d5b5f,_0x37f9e3){function _0x2462d0(_0x2e4e67,_0xabe758){return _0x5266e8(_0xabe758,_0x2e4e67- -0x179);}function _0x6fb849(_0x5c3296,_0x259071){return _0x5266e8(_0x5c3296,_0x259071-0x101);}const _0x145a09=(_0x5d5b5f-this['xmin'])/(this[_0x2462d0(0x250,0x2c3)]-this['xmin'])*(this[_0x6fb849(0x4a1,0x47d)]-0x1),_0x451515=(this[_0x2462d0(0x186,0x133)]-_0x37f9e3)/(this['ymax']-this['ymin'])*(this[_0x6fb849(0x492,0x4ab)]-0x1);return[_0x145a09,_0x451515];}['getUVByXY'](_0x5387fb,_0x186a6c){if(_0x5387fb<0x0||_0x5387fb>=this[_0x433f53(0x3f9,0x3c3)]||_0x186a6c>=this[_0x433f53(0x3b8,0x3f1)])return[0x0,0x0,0x0];const _0x2e83ff=Math['floor'](_0x5387fb);function _0x433f53(_0x2cfbb2,_0x9aa7e1){return _0x5266e8(_0x2cfbb2,_0x9aa7e1-0x47);}const _0xfdd110=Math['floor'](_0x186a6c);if(_0x2e83ff===_0x5387fb&&_0xfdd110===_0x186a6c)return this['grid'][_0x186a6c][_0x5387fb];const _0xcf33eb=_0x2e83ff+0x1,_0x3e8903=_0xfdd110+0x1,_0x2423ca=this['getUVByXY'](_0x2e83ff,_0xfdd110),_0x5def1a=this['getUVByXY'](_0xcf33eb,_0xfdd110);function _0x293005(_0xd5efe7,_0x4852cc){return _0x5266e8(_0x4852cc,_0xd5efe7- -0x33a);}const _0x1bb0a0=this[_0x433f53(0x34b,0x37e)](_0x2e83ff,_0x3e8903),_0x2d196c=this['getUVByXY'](_0xcf33eb,_0x3e8903);let _0xe372fe=null;try{_0xe372fe=this[_0x293005(0x97,0x111)](_0x5387fb-_0x2e83ff,_0x186a6c-_0xfdd110,_0x2423ca,_0x5def1a,_0x1bb0a0,_0x2d196c);}catch(_0xbd1ac5){console[_0x293005(0x38,0x40)](_0x5387fb,_0x186a6c);}return _0xe372fe;}['_bilinearInterpolation'](_0x4e42bb,_0x489611,_0x32803a,_0x5a11d3,_0x59054b,_0x679570){const _0x3cbe1a=0x1-_0x4e42bb,_0x32e01f=0x1-_0x489611,_0x522066=_0x3cbe1a*_0x32e01f,_0x79beb9=_0x4e42bb*_0x32e01f,_0x48fd93=_0x3cbe1a*_0x489611,_0x46a211=_0x4e42bb*_0x489611,_0x14e6e8=_0x32803a[0x0]*_0x522066+_0x5a11d3[0x0]*_0x79beb9+_0x59054b[0x0]*_0x48fd93+_0x679570[0x0]*_0x46a211,_0xd62671=_0x32803a[0x1]*_0x522066+_0x5a11d3[0x1]*_0x79beb9+_0x59054b[0x1]*_0x48fd93+_0x679570[0x1]*_0x46a211;return this['_calcUV'](_0x14e6e8,_0xd62671);}[_0x5266e8(0x325,0x359)](_0x39f9bd,_0x2db1d6){return[+_0x39f9bd,+_0x2db1d6,Math['sqrt'](_0x39f9bd*_0x39f9bd+_0x2db1d6*_0x2db1d6)];}['getUVByPoint'](_0x4422b3,_0x2e9abd){if(!this['isInExtent'](_0x4422b3,_0x2e9abd))return null;const _0x10325b=this[_0x246ad4(0x1bb,0x1ce)](_0x4422b3,_0x2e9abd),_0x19d0e2=this['getUVByXY'](_0x10325b[0x0],_0x10325b[0x1]);function _0x246ad4(_0xa7215f,_0x41e859){return _0x5266e8(_0xa7215f,_0x41e859- -0x14f);}return _0x19d0e2;}['isInExtent'](_0x30b0e9,_0x3302cd){return _0x30b0e9>=this['xmin']&&_0x30b0e9<=this['xmax']&&_0x3302cd>=this['ymin']&&_0x3302cd<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x1ceb3e=fRandomByfloat(this['xmin'],this['xmax']),_0x24a0cf=fRandomByfloat(this['ymin'],this[_0x36ea98(0x434,0x3c1)]),_0x3106aa={};_0x3106aa[_0x36ea98(0x49a,0x523)]=_0x24a0cf,_0x3106aa[_0x46b870(0x3d6,0x40b)]=_0x1ceb3e;function _0x46b870(_0x1666c2,_0x2a50ca){return _0x2cde9c(_0x1666c2-0x4f9,_0x2a50ca);}function _0x36ea98(_0x2b25d4,_0x6fc56a){return _0x5266e8(_0x6fc56a,_0x2b25d4-0x135);}return _0x3106aa;}[_0x5266e8(0x350,0x39d)](){function _0x374c6d(_0x422cff,_0x594edd){return _0x5266e8(_0x422cff,_0x594edd- -0x43e);}let _0x2765bd,_0x4d8844,_0x2ac473;function _0x413df9(_0x1a1e59,_0x53ffdd){return _0x5266e8(_0x53ffdd,_0x1a1e59-0x21c);}for(let _0x1e2e94=0x0,_0x2dbc33=this[_0x413df9(0x529,0x501)][_0x413df9(0x626,0x624)];_0x1e2e94<_0x2dbc33;_0x1e2e94++){let _0x46643c=this['particles'][_0x1e2e94];_0x46643c['age']<=0x0&&(_0x46643c=this['_randomParticle'](_0x46643c));if(_0x46643c['age']>0x0){const _0x233108=_0x46643c[_0x374c6d(-0x1ac,-0x12b)],_0x5d6e62=_0x46643c['tlat'];_0x2ac473=this[_0x374c6d(-0x17b,-0xf7)](_0x233108,_0x5d6e62),_0x2ac473?(_0x2765bd=_0x233108+this['_calc_speedRate'][0x0]*_0x2ac473[0x0],_0x4d8844=_0x5d6e62+this['_calc_speedRate'][0x1]*_0x2ac473[0x1],_0x46643c['lng']=_0x233108,_0x46643c['lat']=_0x5d6e62,_0x46643c[_0x413df9(0x52f,0x5a4)]=_0x2765bd,_0x46643c[_0x374c6d(-0x63,-0xac)]=_0x4d8844,_0x46643c['speed']=_0x2ac473[0x2],_0x46643c['age']--):_0x46643c[_0x413df9(0x597,0x5d7)]=0x0;}}return this[_0x374c6d(-0x15d,-0x131)];}['_randomParticle'](_0x353445){let _0x3f901a,_0x1af537;for(let _0x4bb169=0x0;_0x4bb169<0x1e;_0x4bb169++){_0x3f901a=this['getRandomLatLng'](),_0x1af537=this[_0x4f46a4(0x2f3,0x2c7)](_0x3f901a['lng'],_0x3f901a[_0x5f079d(0x479,0x40f)]);if(_0x1af537&&_0x1af537[0x2]>0x0)break;}if(!_0x1af537)return _0x353445;const _0x4aa8a2=_0x3f901a[_0x4f46a4(0x28f,0x2b4)]+this['_calc_speedRate'][0x0]*_0x1af537[0x0],_0x330712=_0x3f901a['lat']+this['_calc_speedRate'][0x1]*_0x1af537[0x1];_0x353445['lng']=_0x3f901a[_0x4f46a4(0x2f6,0x2b4)];function _0x4f46a4(_0x557766,_0x5c9747){return _0x2cde9c(_0x5c9747-0x3d7,_0x557766);}_0x353445[_0x5f079d(0x479,0x47c)]=_0x3f901a[_0x5f079d(0x479,0x447)],_0x353445[_0x4f46a4(0x30c,0x293)]=_0x4aa8a2;function _0x5f079d(_0x2b6431,_0x4b5546){return _0x5266e8(_0x4b5546,_0x2b6431-0x114);}return _0x353445[_0x4f46a4(0x36a,0x312)]=_0x330712,_0x353445['age']=Math['round'](0xa+Math['random']()*this['maxAge']),_0x353445['speed']=_0x1af537[0x2],_0x353445;}['destroy'](){for(const _0x3775e2 in this){delete this[_0x3775e2];}}}function fRandomByfloat(_0x521c1,_0x41e863){return _0x521c1+Math['random']()*(_0x41e863-_0x521c1);}const Cesium=mars3d__namespace[_0x5266e8(0x366,0x3a9)],BaseLayer=mars3d__namespace[_0x2cde9c(-0x98,-0x119)][_0x5266e8(0x342,0x30f)];class CanvasWindLayer extends BaseLayer{constructor(_0x19ea3f={}){super(_0x19ea3f),this['_setOptionsHook'](_0x19ea3f),this['canvas']=null,_0x19ea3f['colors']&&_0x19ea3f['steps']&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x19ea3f));}[_0x5266e8(0x2f7,0x308)](_0x531cf7,_0x87e2be){this[_0x446911(0x6b,0x28)]=0x3e8/(_0x531cf7['frameRate']||0xa),this['_pointerEvents']=this[_0x446911(0x13e,0xb8)]['pointerEvents']??![];function _0x446911(_0x55a93e,_0xbfb08b){return _0x5266e8(_0xbfb08b,_0x55a93e- -0x2a9);}function _0x2191e3(_0x1c0131,_0x134c05){return _0x5266e8(_0x1c0131,_0x134c05- -0xfc);}this['color']=_0x531cf7[_0x446911(0xee,0x148)]||_0x446911(0xf1,0x88),this['lineWidth']=_0x531cf7['lineWidth']||0x1,this['fixedHeight']=_0x531cf7['fixedHeight']??0x0,this['flipY']=_0x531cf7[_0x446911(0xef,0xc5)]??![],this[_0x446911(0xd8,0xe7)]&&this[_0x446911(0xd8,0xc0)]['setOptions'](_0x531cf7);}get[_0x2cde9c(-0x98,-0xd5)](){return this['canvas'];}get['canvasWidth'](){function _0x583033(_0xab4ff0,_0xf36098){return _0x5266e8(_0xab4ff0,_0xf36098-0x41);}return this['_map']['scene'][_0x583033(0x342,0x368)]['clientWidth'];}get['canvasHeight'](){function _0x1ac11e(_0x2bc7e9,_0x5bc960){return _0x5266e8(_0x2bc7e9,_0x5bc960- -0x394);}function _0x1e33eb(_0x1c5187,_0x44816e){return _0x5266e8(_0x1c5187,_0x44816e- -0x50a);}return this[_0x1ac11e(-0x2d,0x5d)]['scene']['canvas'][_0x1e33eb(-0x1f7,-0x180)];}get['pointerEvents'](){function _0x3dd051(_0x4c41fc,_0xf96c0d){return _0x2cde9c(_0x4c41fc-0x2ec,_0xf96c0d);}return this[_0x3dd051(0x205,0x1a8)];}set['pointerEvents'](_0xc32013){this[_0x181666(-0x188,-0x207)]=_0xc32013;function _0x5db95e(_0x4c04a0,_0x3292d9){return _0x2cde9c(_0x4c04a0-0x348,_0x3292d9);}function _0x181666(_0x10191c,_0xc8a0d5){return _0x5266e8(_0x10191c,_0xc8a0d5- -0x577);}if(!this['canvas'])return;_0xc32013?this['canvas']['style'][_0x181666(-0x267,-0x1f2)]=_0x181666(-0x230,-0x24b):this[_0x5db95e(0x218,0x221)]['style'][_0x181666(-0x21e,-0x1f2)]='none';}get['particlesNumber'](){function _0x34e279(_0x3653d0,_0x846348){return _0x2cde9c(_0x846348-0x8c,_0x3653d0);}return this[_0x34e279(0x2d,0x1c)]['particlesNumber'];}set['particlesNumber'](_0x230460){this[_0x459cf3(0x493,0x41e)]['particlesNumber']=_0x230460;function _0x459cf3(_0x281dcb,_0x1b5124){return _0x2cde9c(_0x281dcb-0x503,_0x1b5124);}clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{function _0x1babdd(_0x1496eb,_0x3a1d03){return _0x459cf3(_0x1496eb- -0x42e,_0x3a1d03);}this[_0x1babdd(0x2c,0x54)]();},0x1f4);}get['speedRate'](){return this['options']['speedRate'];}set['speedRate'](_0x101588){this['options']['speedRate']=_0x101588;function _0xf0c879(_0x171007,_0x506ce8){return _0x5266e8(_0x506ce8,_0x171007- -0x479);}this['windField']&&(this[_0xf0c879(-0xf8,-0x7f)]['speedRate']=_0x101588);}get['maxAge'](){function _0x1f22d9(_0x1a0fc1,_0x3f7544){return _0x5266e8(_0x1a0fc1,_0x3f7544-0x89);}return this['options'][_0x1f22d9(0x48b,0x482)];}set['maxAge'](_0x1355dd){this['options']['maxAge']=_0x1355dd;function _0x54dce0(_0x4f354a,_0x2aeec7){return _0x2cde9c(_0x2aeec7- -0x115,_0x4f354a);}this[_0x54dce0(-0x188,-0x1eb)]&&(this['windField']['maxAge']=_0x1355dd);}get['data'](){function _0x1d9c7d(_0x3a9194,_0x2eb5df){return _0x2cde9c(_0x2eb5df-0x63a,_0x3a9194);}return this[_0x1d9c7d(0x5f0,0x5c6)];}set['data'](_0x383318){this['setData'](_0x383318);}get[_0x2cde9c(-0x6a,-0xae)](){let _0x1530bf=this['windData'][_0x8937d(0x4d6,0x541)],_0x2f6708=this['windData'][_0x158772(0x1cd,0x1dd)],_0x3887bd=this['windData'][_0x158772(0x11f,0x10f)],_0x120b79=this[_0x158772(0x1e7,0x1e3)][_0x8937d(0x4b3,0x527)];_0x2f6708>=0x167&&_0x1530bf===0x0&&(_0x1530bf=-0xb4,_0x2f6708=0xb4);_0x1530bf=Math[_0x8937d(0x611,0x603)](_0x1530bf,-0xb4),_0x2f6708=Math['min'](_0x2f6708,0xb4),_0x3887bd=Math['max'](_0x3887bd,-0x5a);function _0x158772(_0x1f76e7,_0x848cf8){return _0x2cde9c(_0x1f76e7-0x25b,_0x848cf8);}_0x120b79=Math['min'](_0x120b79,0x5a);function _0x8937d(_0x4f88c6,_0x23ec2d){return _0x2cde9c(_0x23ec2d-0x67f,_0x4f88c6);}return Cesium[_0x8937d(0x59e,0x5bc)][_0x8937d(0x57c,0x546)](_0x1530bf,_0x3887bd,_0x2f6708,_0x120b79);}['_showHook'](_0x426b79){function _0x2d35dd(_0x1de060,_0x288935){return _0x2cde9c(_0x288935-0x30f,_0x1de060);}_0x426b79?this['_addedHook']():(this['windData']&&(this['options']['data']=this['windData']),this[_0x2d35dd(0x1c9,0x1c6)]());}['_mountedHook'](){function _0x1366f9(_0xa7b791,_0x54c3be){return _0x2cde9c(_0x54c3be- -0xb5,_0xa7b791);}function _0x417306(_0x3e0a03,_0x59ddd9){return _0x2cde9c(_0x3e0a03-0x181,_0x59ddd9);}this[_0x1366f9(-0x17f,-0x125)]['worker']?this['initWorker']():this[_0x417306(0xab,0x37)]=new CanvasWindField(this['options']);}[_0x2cde9c(-0x6c,-0x69)](){this['canvas']=this['_createCanvas']();const _0x579500={};_0x579500[_0x5d0af8(-0x1d,-0x93)]=!![];function _0x16dbbf(_0x267497,_0x4cc86a){return _0x2cde9c(_0x4cc86a-0x43c,_0x267497);}this['canvasContext']=this['canvas']['getContext']('2d',_0x579500);function _0x5d0af8(_0x431b5e,_0xe2204c){return _0x2cde9c(_0x431b5e-0xa4,_0xe2204c);}this[_0x5d0af8(0x1c,-0x25)](),this[_0x16dbbf(0x36f,0x3cc)]['data']&&this['setData'](this['options'][_0x5d0af8(-0x7a,-0x78)]);}['_removedHook'](){function _0x2b8a38(_0x59fde7,_0x4398e3){return _0x5266e8(_0x59fde7,_0x4398e3-0x24a);}this[_0x2b8a38(0x614,0x608)](),this[_0x7138a1(0x4f7,0x546)]();function _0x7138a1(_0x4cfe3f,_0x2f6c64){return _0x5266e8(_0x2f6c64,_0x4cfe3f-0x18a);}this['canvas']&&(this[_0x2b8a38(0x5b4,0x63b)][_0x7138a1(0x516,0x4c3)]['removeChild'](this[_0x2b8a38(0x5f4,0x571)]),delete this['canvas']);}[_0x2cde9c(-0x8a,-0x71)](){function _0x2ed346(_0x4072d6,_0x1ee304){return _0x2cde9c(_0x1ee304-0x2da,_0x4072d6);}const _0x4e8263=mars3d__namespace['DomUtil']['create'](_0x466308(-0x1ad,-0x1f6),'mars3d-canvasWind',this['_map']['container']);function _0x466308(_0x2ebe4e,_0x4a62dc){return _0x2cde9c(_0x4a62dc- -0xc6,_0x2ebe4e);}return _0x4e8263['style'][_0x2ed346(0x2b4,0x237)]='absolute',_0x4e8263['style'][_0x466308(-0x11d,-0x192)]='0px',_0x4e8263['style'][_0x466308(-0x242,-0x1fc)]='0px',_0x4e8263['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',_0x4e8263[_0x2ed346(0x263,0x223)][_0x466308(-0x1cc,-0x1af)]=this['_map']['scene'][_0x466308(-0x1b2,-0x1f6)][_0x466308(-0x1b4,-0x193)]+'px',_0x4e8263[_0x2ed346(0x293,0x223)][_0x466308(-0x1a7,-0x20b)]=this['_pointerEvents']?'auto':'none',_0x4e8263['style'][_0x2ed346(0x21a,0x27b)]=this['options']['zIndex']??0x9,_0x4e8263[_0x2ed346(0x2ea,0x263)]=this['_map']['scene'][_0x466308(-0x278,-0x1f6)]['clientWidth'],_0x4e8263[_0x2ed346(0x1ae,0x1f1)]=this[_0x466308(-0x108,-0x12c)][_0x2ed346(0x173,0x1b0)][_0x466308(-0x266,-0x1f6)][_0x466308(-0x148,-0x193)],_0x4e8263;}['resize'](){function _0x7ebd07(_0x52f244,_0x4eeeec){return _0x5266e8(_0x52f244,_0x4eeeec- -0x17f);}function _0x4b511b(_0x684e86,_0x3501df){return _0x5266e8(_0x3501df,_0x684e86-0xf6);}this[_0x4b511b(0x41d,0x3d3)]&&(this['canvas']['style'][_0x7ebd07(0x207,0x261)]=this['_map']['scene']['canvas']['clientWidth']+'px',this['canvas']['style']['height']=this[_0x4b511b(0x4e7,0x505)]['scene'][_0x7ebd07(0x195,0x1a8)][_0x7ebd07(0x23a,0x20b)]+'px',this['canvas']['width']=this[_0x4b511b(0x4e7,0x474)]['scene'][_0x7ebd07(0x151,0x1a8)][_0x4b511b(0x426,0x44b)],this[_0x4b511b(0x41d,0x3a2)][_0x7ebd07(0x1f9,0x1ef)]=this['_map']['scene'][_0x7ebd07(0x1f3,0x1a8)][_0x4b511b(0x480,0x4e7)]);}[_0x5266e8(0x3ea,0x3cf)](){const _0x5e4795=this;let _0x899154=Date['now']();(function _0x20e5c9(){if(_0x5e4795['isDestroy'])return;_0x5e4795[_0x12774a(0x5a0,0x57e)]=window['requestAnimationFrame'](_0x20e5c9);function _0x12774a(_0x5bfbfc,_0x589fda){return _0x5776(_0x5bfbfc-0x33a,_0x589fda);}function _0x34622d(_0x57e96b,_0x47dc1c){return _0x5776(_0x57e96b- -0x32a,_0x47dc1c);}if(_0x5e4795['show']&&_0x5e4795[_0x34622d(-0x138,-0x1be)]){const _0x227fc3=Date['now'](),_0x308fd4=_0x227fc3-_0x899154;_0x308fd4>_0x5e4795[_0x12774a(0x4bf,0x459)]&&(_0x899154=_0x227fc3-_0x308fd4%_0x5e4795['frameTime'],_0x5e4795['update']());}}());function _0x33eec9(_0x245799,_0x383657){return _0x2cde9c(_0x383657-0x640,_0x245799);}window['addEventListener'](_0x144d3f(0x1c5,0x1f2),this[_0x144d3f(0x1c5,0x18f)][_0x144d3f(0x2c5,0x315)](this),![]),this['mouse_down']=![];function _0x144d3f(_0x54bbd6,_0x27942f){return _0x5266e8(_0x27942f,_0x54bbd6- -0x140);}this[_0x144d3f(0x299,0x2a8)]=![],this[_0x33eec9(0x54b,0x5d0)][_0x33eec9(0x578,0x5a5)]&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x33eec9(0x584,0x5bc)],this[_0x33eec9(0x4e8,0x51b)],this),this[_0x33eec9(0x553,0x5da)]['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this));}[_0x2cde9c(-0xea,-0x149)](){function _0x2c9cd7(_0x502bea,_0x4efaeb){return _0x2cde9c(_0x4efaeb-0x4a9,_0x502bea);}function _0x3d99c6(_0x20e575,_0x96d835){return _0x2cde9c(_0x96d835-0x505,_0x20e575);}window[_0x2c9cd7(0x310,0x36c)](this[_0x3d99c6(0x492,0x4a3)]),delete this['_animateFrame'],window[_0x2c9cd7(0x3de,0x441)]('resize',this['resize']),this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace['EventType'][_0x3d99c6(0x3e6,0x41d)],this[_0x2c9cd7(0x48a,0x414)],this),this['_map'][_0x2c9cd7(0x414,0x402)](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this[_0x2c9cd7(0x3cd,0x443)]['off'](mars3d__namespace['EventType'][_0x2c9cd7(0x3f9,0x426)],this['_onMouseUpEvent'],this),this['_map'][_0x3d99c6(0x416,0x45e)](mars3d__namespace[_0x2c9cd7(0x3f1,0x456)]['mouseMove'],this[_0x3d99c6(0x447,0x401)],this));}['_onMapWhellEvent'](_0x2006cb){function _0x4d1d95(_0x231064,_0x28980d){return _0x2cde9c(_0x28980d- -0xdc,_0x231064);}clearTimeout(this[_0x4d1d95(-0x155,-0x16f)]);if(!this[_0x4d1d95(-0x17f,-0x1b0)]||!this['canvas'])return;function _0x1e9aa3(_0x9f74e4,_0x32fe00){return _0x2cde9c(_0x32fe00-0x162,_0x9f74e4);}this['canvas'][_0x4d1d95(-0x1e3,-0x193)]['visibility']='hidden',this[_0x1e9aa3(0x101,0xcf)]=setTimeout(()=>{if(!this['show'])return;function _0x6c031f(_0xbf075e,_0x43a218){return _0x4d1d95(_0x43a218,_0xbf075e-0x3f6);}this['redraw']();function _0x22025b(_0xa6109e,_0x4a44bc){return _0x4d1d95(_0xa6109e,_0x4a44bc-0x260);}this['canvas'][_0x22025b(0x11f,0xcd)]['visibility']=_0x22025b(0x81,0xbd);},0xc8);}['_onMouseDownEvent'](_0x2ca62a){function _0x431939(_0x4095e0,_0x59d0e8){return _0x2cde9c(_0x4095e0-0x1a3,_0x59d0e8);}this['mouse_down']=!![];function _0x7186c1(_0x49f88a,_0x53110e){return _0x2cde9c(_0x49f88a-0x1aa,_0x53110e);}this['_map']['off'](mars3d__namespace[_0x7186c1(0x157,0x13e)][_0x7186c1(0x145,0xd1)],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x7186c1(0x145,0xdb)],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x3270ec){function _0x21416b(_0x1c4702,_0x1c51e9){return _0x2cde9c(_0x1c51e9-0x652,_0x1c4702);}if(!this['show']||!this['canvas'])return;function _0xe2d75b(_0x451ce6,_0x3a6ccf){return _0x5266e8(_0x451ce6,_0x3a6ccf- -0x217);}this[_0x21416b(0x5ed,0x58a)]&&(this[_0x21416b(0x574,0x522)][_0xe2d75b(0x1e9,0x189)]['visibility']=_0xe2d75b(0x135,0x114),this['mouse_move']=!![]);}[_0x2cde9c(-0xff,-0xf8)](_0x9a501c){if(!this['show']||!this[_0x1b184f(0x159,0x120)])return;this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x1b184f(0x185,0x1e3)],this);this[_0x1b184f(0x1c1,0x1f8)]&&this[_0x35dc97(-0x80,-0x3a)]&&this['redraw']();this[_0x35dc97(-0x132,-0x178)]['style']['visibility']=_0x35dc97(-0xc9,-0x47);function _0x35dc97(_0x35defa,_0x43ecc7){return _0x5266e8(_0x43ecc7,_0x35defa- -0x459);}this['mouse_down']=![];function _0x1b184f(_0x56d2d5,_0x3d6eea){return _0x5266e8(_0x3d6eea,_0x56d2d5- -0x1ce);}this['mouse_move']=![];}['setData'](_0x17d144){function _0x2e4a77(_0x4024a6,_0x384cc1){return _0x5266e8(_0x4024a6,_0x384cc1- -0x1c1);}function _0x45d4e8(_0xc38ef4,_0x41ddd4){return _0x2cde9c(_0xc38ef4-0x4a3,_0x41ddd4);}this['clear'](),this['windData']=_0x17d144,this['windField'][_0x45d4e8(0x3e7,0x389)](_0x17d144),this[_0x45d4e8(0x3fa,0x431)]();}[_0x5266e8(0x3f6,0x3ae)](){if(!this['show'])return;this['windField']['setOptions'](this['options']),this['update']();}['update'](){if(this['_updateIng'])return;function _0x556881(_0x39bca0,_0x4300a5){return _0x5266e8(_0x39bca0,_0x4300a5- -0x6a);}function _0x16066a(_0x182811,_0x5e2899){return _0x5266e8(_0x5e2899,_0x182811-0x1);}this[_0x16066a(0x37e,0x3d1)]=!![];if(this['worker'])this[_0x556881(0x2d8,0x317)]['update']();else{const _0x48d7b8=this['windField'][_0x556881(0x33d,0x333)]();this['_drawLines'](_0x48d7b8);}this[_0x556881(0x2f5,0x313)]=![];}[_0x5266e8(0x491,0x409)](_0x4c1c75){this['_canvasParticles']=_0x4c1c75,this['canvasContext']['globalCompositeOperation']=_0x1a7eea(0x2f,-0x3),this[_0x36f7f4(-0xf5,-0x10a)]['fillRect'](0x0,0x0,this[_0x1a7eea(0x38,-0x2c)],this['canvasHeight']),this[_0x36f7f4(-0xf5,-0xd5)]['globalCompositeOperation']='lighter',this['canvasContext'][_0x36f7f4(-0x109,-0x119)]=0.9;const _0x536b80=this['_map']['scene']['mode']!==Cesium['SceneMode'][_0x36f7f4(-0x11e,-0xfc)],_0x2bf6d0=this['canvasWidth']*0.25;function _0x1a7eea(_0x2af7b1,_0x3d7260){return _0x2cde9c(_0x2af7b1-0x14e,_0x3d7260);}function _0x36f7f4(_0x4427d4,_0x41981f){return _0x2cde9c(_0x4427d4- -0x6c,_0x41981f);}if(this['_colorRamp'])for(let _0x3e6864=0x0,_0x5aae89=_0x4c1c75['length'];_0x3e6864<_0x5aae89;_0x3e6864++){const _0xb9d137=_0x4c1c75[_0x3e6864],_0xe2bbd8=this['_tomap'](_0xb9d137,_0xb9d137[_0x1a7eea(0x2b,0x85)],_0xb9d137[_0x1a7eea(0x5c,0x5c)],_0xb9d137[_0x1a7eea(0xff,0x165)]),_0x885e6e=this['_tomap'](_0xb9d137,_0xb9d137['tlng'],_0xb9d137['tlat'],_0xb9d137['talt']);if(!_0xe2bbd8||!_0x885e6e)continue;if(_0x536b80&&Math[_0x36f7f4(-0x114,-0xd4)](_0xe2bbd8[0x0]-_0x885e6e[0x0])>=_0x2bf6d0)continue;this['canvasContext']['beginPath'](),this[_0x36f7f4(-0xf5,-0x158)]['lineWidth']=this[_0x1a7eea(0xf,-0x69)],this['canvasContext'][_0x36f7f4(-0x169,-0x181)]=this['_colorRamp'][_0x36f7f4(-0x1b3,-0x16c)](_0xb9d137[_0x1a7eea(-0xb,0x44)]),this[_0x1a7eea(0xc5,0xcf)]['moveTo'](_0xe2bbd8[0x0],_0xe2bbd8[0x1]),this['canvasContext']['lineTo'](_0x885e6e[0x0],_0x885e6e[0x1]),this[_0x1a7eea(0xc5,0xc3)][_0x1a7eea(0x85,0x82)]();}else{this[_0x36f7f4(-0xf5,-0x15d)][_0x1a7eea(0x63,0xd2)](),this[_0x1a7eea(0xc5,0x12c)][_0x36f7f4(-0x1ab,-0x1bb)]=this['lineWidth'],this[_0x1a7eea(0xc5,0x48)][_0x1a7eea(0x51,0xb8)]=this['color'];for(let _0x5e4ff2=0x0,_0x481f0b=_0x4c1c75[_0x1a7eea(0x101,0x8e)];_0x5e4ff2<_0x481f0b;_0x5e4ff2++){const _0x26c5d1=_0x4c1c75[_0x5e4ff2],_0x3c1f8e=this['_tomap'](_0x26c5d1,_0x26c5d1['lng'],_0x26c5d1['lat'],_0x26c5d1['alt']),_0x1ae923=this[_0x36f7f4(-0x173,-0x106)](_0x26c5d1,_0x26c5d1[_0x1a7eea(0xa,0x4a)],_0x26c5d1['tlat'],_0x26c5d1['talt']);if(!_0x3c1f8e||!_0x1ae923)continue;if(_0x536b80&&Math['abs'](_0x3c1f8e[0x0]-_0x1ae923[0x0])>=_0x2bf6d0)continue;this[_0x1a7eea(0xc5,0xa0)]['moveTo'](_0x3c1f8e[0x0],_0x3c1f8e[0x1]),this['canvasContext'][_0x36f7f4(-0x15f,-0x14e)](_0x1ae923[0x0],_0x1ae923[0x1]);}this['canvasContext'][_0x36f7f4(-0x135,-0x188)]();}}['_tomap'](_0x1681e9,_0x4b3312,_0xf96218,_0x5b7b04){const _0x113e35=Cesium[_0x2273b8(0x40,0x5)]['fromDegrees'](_0x4b3312,_0xf96218,_0x5b7b04??this['fixedHeight']);function _0x2273b8(_0x2aa9b5,_0x1cbf82){return _0x2cde9c(_0x2aa9b5-0xf3,_0x1cbf82);}const _0x5f21ee=this[_0x31c8e2(0x4a2,0x42d)][_0x2273b8(-0x37,-0xbf)];if(_0x5f21ee[_0x31c8e2(0x316,0x382)]===Cesium['SceneMode']['SCENE3D']){const _0x32dd9f=new Cesium['EllipsoidalOccluder'](_0x5f21ee['globe']['ellipsoid'],_0x5f21ee['camera'][_0x2273b8(-0x40,-0x83)]),_0x470e56=_0x32dd9f['isPointVisible'](_0x113e35);if(!_0x470e56)return _0x1681e9['age']=0x0,null;}function _0x31c8e2(_0x3b0648,_0x1c6b16){return _0x5266e8(_0x3b0648,_0x1c6b16-0x3c);}const _0x88542d=mars3d__namespace['PointTrans'][_0x2273b8(0x68,0x3b)](this[_0x31c8e2(0x3e8,0x42d)]['scene'],_0x113e35);return _0x88542d?[_0x88542d['x'],_0x88542d['y']]:null;}['clear'](){this['windField']['clear']();function _0x3be601(_0x4debe6,_0xc32e71){return _0x5266e8(_0x4debe6,_0xc32e71- -0x4f5);}delete this[_0x3be601(-0x169,-0x112)];}['initWorker'](){function _0x16bd29(_0x5b7f80,_0x3ddeeb){return _0x2cde9c(_0x3ddeeb- -0x61,_0x5b7f80);}function _0x1b7fa3(_0x47cc29,_0x4e1be7){return _0x5266e8(_0x47cc29,_0x4e1be7-0xd4);}this['worker']=new Worker(this[_0x1b7fa3(0x496,0x4bb)]['worker']),this['worker']['onmessage']=_0x31822f=>{this[_0xa45d17(-0x62,-0x1d)](_0x31822f['data']['particles']);function _0xa45d17(_0x11e9cb,_0x5a0b4b){return _0x1b7fa3(_0x11e9cb,_0x5a0b4b- -0x4fa);}this['_updateIng2']=![];},this[_0x1b7fa3(0x43c,0x455)]={'init':_0x1df4b5=>{const _0xa2f937={};_0xa2f937['type']='init';function _0x45f0f9(_0x149257,_0x58c157){return _0x1b7fa3(_0x149257,_0x58c157- -0x4fe);}function _0x15f561(_0x3c0011,_0x38bea9){return _0x16bd29(_0x3c0011,_0x38bea9-0x466);}_0xa2f937['options']=_0x1df4b5,this[_0x15f561(0x3e6,0x38b)][_0x15f561(0x32b,0x321)](_0xa2f937);},'setOptions':_0x1dfbc9=>{const _0x16730e={};function _0x545ec7(_0x4eaf50,_0x23bd13){return _0x16bd29(_0x4eaf50,_0x23bd13-0x591);}_0x16730e['type']='setOptions',_0x16730e['options']=_0x1dfbc9,this['worker'][_0x545ec7(0x464,0x44c)](_0x16730e);},'setDate':_0x45dd91=>{const _0x4b780e={};_0x4b780e['type']='setDate',_0x4b780e['data']=_0x45dd91,this['worker']['postMessage'](_0x4b780e);},'update':()=>{if(this[_0x115b55(0x30b,0x2bd)])return;function _0x115b55(_0x4fadb8,_0x3acd90){return _0x16bd29(_0x4fadb8,_0x3acd90-0x436);}this[_0x115b55(0x29c,0x2bd)]=!![];const _0x371cf5={};function _0x1ab51b(_0x42caea,_0x4a3ab5){return _0x1b7fa3(_0x4a3ab5,_0x42caea-0xe8);}_0x371cf5['type']='update',this[_0x1ab51b(0x599,0x527)]['postMessage'](_0x371cf5);},'clear':()=>{function _0x55e0fe(_0x380d4b,_0x437e30){return _0x1b7fa3(_0x437e30,_0x380d4b- -0x610);}function _0x3ea18d(_0x2a41c7,_0xb4738d){return _0x1b7fa3(_0xb4738d,_0x2a41c7- -0x1e6);}const _0x4fc152={};_0x4fc152[_0x3ea18d(0x281,0x298)]='clear',this['worker'][_0x3ea18d(0x261,0x27b)](_0x4fc152);}},this['windField']['init'](this['options']);}}mars3d__namespace['LayerUtil'][_0x2cde9c(-0x6b,-0xe5)](_0x5266e8(0x38d,0x3b9),CanvasWindLayer),mars3d__namespace[_0x2cde9c(-0x98,-0xf3)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x2cde9c(-0xe3,-0xb3)]=CanvasWindField,mars3d__namespace['Log']['logInfo'](_0x5266e8(0x42a,0x3a7)+version+_0x2cde9c(-0x117,-0x169)+buildTime),mars3d__namespace['WindUtil']=WindUtil,exports[_0x5266e8(0x3be,0x374)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x2cde9c(-0xdf,-0x79)]=WindLayer,exports[_0x5266e8(0x30a,0x331)]=WindUtil;const _0x4055c8={};_0x4055c8['value']=!![],Object[_0x5266e8(0x405,0x3ad)](exports,'__esModule',_0x4055c8);
}));
