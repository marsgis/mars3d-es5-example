/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.5
 * 编译日期：2024-10-29 21:56
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x46e408,_0x13e56f){function _0x44aca9(_0x3f20e2,_0x5d8b74){return _0x290a(_0x3f20e2- -0x2a1,_0x5d8b74);}function _0x27e560(_0x3e6d36,_0x2a91a6){return _0x290a(_0x2a91a6-0x9d,_0x3e6d36);}const _0xe8412f=_0x46e408();while(!![]){try{const _0x21f55a=-parseInt(_0x44aca9(-0x3e,-0x7d))/0x1*(-parseInt(_0x44aca9(-0x45,0x2c))/0x2)+parseInt(_0x44aca9(-0x1,-0x27))/0x3*(parseInt(_0x44aca9(0x8,-0x10))/0x4)+-parseInt(_0x27e560(0x320,0x2ca))/0x5+parseInt(_0x27e560(0x398,0x306))/0x6+-parseInt(_0x27e560(0x2c2,0x2d1))/0x7+-parseInt(_0x27e560(0x2aa,0x26b))/0x8+-parseInt(_0x44aca9(-0xdb,-0x166))/0x9*(-parseInt(_0x27e560(0x28a,0x27e))/0xa);if(_0x21f55a===_0x13e56f)break;else _0xe8412f['push'](_0xe8412f['shift']());}catch(_0x16e5fe){_0xe8412f['push'](_0xe8412f['shift']());}}}(_0x12a4,0x245b1));function _interopNamespace(_0x31f4de){if(_0x31f4de&&_0x31f4de['__esModule'])return _0x31f4de;function _0x3fda71(_0x5c8a0e,_0x4b9566){return _0x290a(_0x4b9566- -0x25f,_0x5c8a0e);}function _0x58a4f3(_0xed270c,_0x58e8ed){return _0x290a(_0x58e8ed- -0x259,_0xed270c);}var _0x3cbbe6=Object[_0x3fda71(-0x39,0x32)](null);return _0x31f4de&&Object['keys'](_0x31f4de)[_0x3fda71(-0xab,-0xaf)](function(_0x1e4cec){if(_0x1e4cec!=='default'){var _0x357107=Object['getOwnPropertyDescriptor'](_0x31f4de,_0x1e4cec);Object['defineProperty'](_0x3cbbe6,_0x1e4cec,_0x357107['get']?_0x357107:{'enumerable':!![],'get':function(){return _0x31f4de[_0x1e4cec];}});}}),_0x3cbbe6[_0x58a4f3(0x26,-0x40)]=_0x31f4de,_0x3cbbe6;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0x565818,_0x21a541){const _0x3fd403=_0x565818*Math['cos'](Cesium$7['Math']['toRadians'](_0x21a541));return _0x3fd403;}function getV(_0x4c3677,_0x2fcf3f){function _0x40ead8(_0x232ff7,_0x4d4f13){return _0x290a(_0x4d4f13- -0x3e4,_0x232ff7);}const _0x61578f=_0x4c3677*Math[_0x40ead8(-0x180,-0x1e4)](Cesium$7[_0x2f7f5c(-0x11a,-0x17d)]['toRadians'](_0x2fcf3f));function _0x2f7f5c(_0x1430cc,_0x4f6fb8){return _0x290a(_0x1430cc- -0x39d,_0x4f6fb8);}return _0x61578f;}function getSpeed(_0x2d5478,_0x1dbc11){function _0x59d0a7(_0x3c96de,_0x46c027){return _0x290a(_0x46c027-0x1be,_0x3c96de);}function _0x21c60d(_0x10da19,_0x47debb){return _0x290a(_0x10da19- -0x267,_0x47debb);}const _0x42385a=Math['sqrt'](Math[_0x59d0a7(0x3fd,0x3d0)](_0x2d5478,0x2)+Math[_0x59d0a7(0x367,0x3d0)](_0x1dbc11,0x2));return _0x42385a;}function getDirection(_0xdd395c,_0x195cd4){let _0x1eac91=Cesium$7[_0x502065(-0x144,-0x11f)]['toDegrees'](Math['atan2'](_0x195cd4,_0xdd395c));function _0x502065(_0x30d6be,_0x38cbaa){return _0x290a(_0x38cbaa- -0x3a2,_0x30d6be);}return _0x1eac91+=_0x1eac91<0x0?0x168:0x0,_0x1eac91;}const _0x5c16ff={};_0x5c16ff[_0x3f25ac(0x191,0x154)]=null,_0x5c16ff[_0x3f25ac(0x94,0xac)]=getU,_0x5c16ff['getV']=getV,_0x5c16ff[_0x26960e(0x5d3,0x592)]=getSpeed,_0x5c16ff['getDirection']=getDirection;var WindUtil=_0x5c16ff;const Cesium$6=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x4e1c92){function _0x15e0a4(_0x4b976f,_0x220c71){return _0x3f25ac(_0x4b976f,_0x220c71- -0x100);}this['commandType']=_0x4e1c92['commandType'],this['geometry']=_0x4e1c92['geometry'],this[_0x17489e(-0x64,-0x6)]=_0x4e1c92[_0x17489e(0x41,-0x6)],this['primitiveType']=_0x4e1c92[_0x17489e(-0xba,-0x36)],this['uniformMap']=_0x4e1c92[_0x17489e(-0x14a,-0xda)],this['vertexShaderSource']=_0x4e1c92['vertexShaderSource'],this['fragmentShaderSource']=_0x4e1c92[_0x17489e(-0x14,-0x89)],this['rawRenderState']=_0x4e1c92['rawRenderState'],this['framebuffer']=_0x4e1c92['framebuffer'],this['outputTexture']=_0x4e1c92['outputTexture'],this['autoClear']=_0x4e1c92[_0x15e0a4(-0x9c,-0x3f)]??![],this[_0x15e0a4(-0x1e,0x4c)]=_0x4e1c92[_0x17489e(0x97,0x27)],this['show']=!![],this[_0x17489e(-0x17c,-0xe7)]=undefined;function _0x17489e(_0x43be38,_0x856ed2){return _0x26960e(_0x43be38,_0x856ed2- -0x5ee);}this[_0x15e0a4(-0x12,0xb)]=undefined,this[_0x15e0a4(-0xd7,-0x3f)]&&(this['clearCommand']=new Cesium$6[(_0x15e0a4(0x7,0x17))]({'color':new Cesium$6[(_0x15e0a4(0x3b,-0x38))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6[_0x17489e(-0x65,-0x80)][_0x15e0a4(-0x18,-0xa7)]}));}[_0x26960e(0x528,0x5b6)](_0x3ff85c){function _0x1cdcf2(_0x415ec2,_0x3090a3){return _0x26960e(_0x3090a3,_0x415ec2- -0x720);}function _0x396682(_0x1a1104,_0x185a48){return _0x3f25ac(_0x1a1104,_0x185a48-0xcd);}switch(this['commandType']){case'Draw':{const _0x4724dd=Cesium$6[_0x396682(0x17f,0x131)]['fromGeometry']({'context':_0x3ff85c,'geometry':this['geometry'],'attributeLocations':this[_0x396682(0x1e5,0x1ec)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']}),_0x4d8e19={};_0x4d8e19['context']=_0x3ff85c,_0x4d8e19[_0x396682(0x1d9,0x1ec)]=this['attributeLocations'],_0x4d8e19[_0x1cdcf2(-0x201,-0x190)]=this[_0x1cdcf2(-0x201,-0x21b)],_0x4d8e19[_0x1cdcf2(-0x1bb,-0x232)]=this[_0x396682(0x158,0x169)];const _0x41b14e=Cesium$6[_0x1cdcf2(-0x1fc,-0x175)]['fromCache'](_0x4d8e19),_0x52a50b=Cesium$6['RenderState'][_0x1cdcf2(-0x122,-0x1ab)](this['rawRenderState']);return new Cesium$6[(_0x1cdcf2(-0x184,-0x21b))]({'owner':this,'vertexArray':_0x4724dd,'primitiveType':this['primitiveType'],'uniformMap':this[_0x1cdcf2(-0x20c,-0x285)],'modelMatrix':Cesium$6[_0x396682(0x167,0x1ae)][_0x1cdcf2(-0x1e2,-0x27a)],'shaderProgram':_0x41b14e,'framebuffer':this[_0x1cdcf2(-0x107,-0xcc)],'renderState':_0x52a50b,'pass':Cesium$6['Pass']['OPAQUE']});}case'Compute':{const _0x131ced={};return _0x131ced[_0x1cdcf2(-0x1dc,-0x201)]=this,_0x131ced[_0x1cdcf2(-0x1bb,-0x24a)]=this[_0x396682(0x137,0x169)],_0x131ced['uniformMap']=this['uniformMap'],_0x131ced[_0x396682(0x18f,0x224)]=this[_0x1cdcf2(-0x100,-0x132)],_0x131ced['persists']=!![],new Cesium$6['ComputeCommand'](_0x131ced);}}}['setGeometry'](_0xc25fed,_0x2a94c3){this[_0x2486d9(-0x56,-0xc8)]=_0x2a94c3;function _0xe3c624(_0x2411cc,_0x3f1811){return _0x26960e(_0x2411cc,_0x3f1811- -0x49d);}const _0xe4fe0b=Cesium$6['VertexArray'][_0x2486d9(-0x176,-0xe4)]({'context':_0xc25fed,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']});function _0x2486d9(_0x3d8b2b,_0xc42059){return _0x3f25ac(_0x3d8b2b,_0xc42059- -0x17e);}this[_0xe3c624(0x77,0x6a)]['vertexArray']=_0xe4fe0b;}[_0x26960e(0x5a3,0x5d1)](_0x4c5e63){if(!this['show'])return;function _0x3c722c(_0x2111bb,_0xdc509a){return _0x26960e(_0xdc509a,_0x2111bb- -0x23d);}if(_0x4c5e63['mode']!==Cesium$6[_0x3c722c(0x34b,0x2b4)]['SCENE3D'])return;!Cesium$6['defined'](this['commandToExecute'])&&(this[_0x580d23(0x387,0x2f0)]=this['createCommand'](_0x4c5e63['context']));function _0x580d23(_0xb6557,_0x143f33){return _0x26960e(_0x143f33,_0xb6557- -0x180);}Cesium$6['defined'](this['preExecute'])&&this['preExecute'](),Cesium$6[_0x3c722c(0x36e,0x405)](this['clearCommand'])&&_0x4c5e63[_0x3c722c(0x3d2,0x3bc)]['push'](this['clearCommand']),_0x4c5e63['commandList']['push'](this[_0x580d23(0x387,0x3e4)]);}[_0x26960e(0x591,0x5ec)](){return![];}[_0x26960e(0x658,0x5f7)](){function _0xa537aa(_0x5f06c1,_0x3e1498){return _0x3f25ac(_0x3e1498,_0x5f06c1- -0x195);}function _0x2259b1(_0x54469c,_0x2f8ad7){return _0x3f25ac(_0x2f8ad7,_0x54469c-0x1ba);}if(this['clearCommand']){var _0x2a8b9a,_0x24c310;(_0x2a8b9a=this['clearCommand'])!==null&&_0x2a8b9a!==void 0x0&&_0x2a8b9a['vertexArray']&&this['clearCommand'][_0x2259b1(0x293,0x236)]['destroy'](),(_0x24c310=this['clearCommand'])!==null&&_0x24c310!==void 0x0&&_0x24c310['shaderProgram']&&this[_0xa537aa(-0x8a,-0x14)]['shaderProgram'][_0x2259b1(0x2e8,0x2bb)](),delete this['clearCommand'];}return this['commandToExecute']&&(this['commandToExecute']['vertexArray']&&this[_0x2259b1(0x1f8,0x1e5)]['vertexArray']['destroy'](),this['commandToExecute']['shaderProgram']&&this['commandToExecute'][_0xa537aa(-0x127,-0x148)][_0x2259b1(0x2e8,0x377)](),delete this['commandToExecute']),Cesium$6[_0xa537aa(-0x80,-0xee)](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0x11e174=function(){function _0x364938(_0x47f5bf,_0x1f7fd3){return _0x290a(_0x1f7fd3-0x7e,_0x47f5bf);}function _0x27b466(_0xdb93ff,_0x236cf4){return _0x290a(_0x236cf4-0x162,_0xdb93ff);}const _0x5768be=new Cesium$5['Geometry']({'attributes':new Cesium$5[(_0x364938(0x248,0x26e))]({'position':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5['ComponentDatatype'][_0x27b466(0x3b6,0x338)],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});return _0x5768be;},_0x23bf11=function(_0x4b661c,_0x5cafcd){if(Cesium$5[_0x1467b7(0x596,0x60d)](_0x5cafcd)){const _0x5bc7f6={};_0x5bc7f6[_0x4fb163(0x432,0x3df)]=_0x5cafcd,_0x4b661c['source']=_0x5bc7f6;}const _0x45bfec=new Cesium$5['Texture'](_0x4b661c);function _0x4fb163(_0x365e4f,_0x5855db){return _0x290a(_0x5855db-0x19a,_0x365e4f);}function _0x1467b7(_0x13c90b,_0x525108){return _0x290a(_0x13c90b-0x355,_0x525108);}return _0x45bfec;};function _0x57ff49(_0x55521d,_0x4abd89){return _0x26960e(_0x55521d,_0x4abd89- -0x6a4);}const _0x32a79f=function(_0x105d12,_0x2afb32,_0xcb6cd8){const _0x5699fc={};function _0x305d2c(_0x3c2e86,_0xb49099){return _0x290a(_0xb49099-0x322,_0x3c2e86);}_0x5699fc['context']=_0x105d12,_0x5699fc[_0x305d2c(0x4c8,0x4d3)]=[_0x2afb32];function _0x19e77e(_0x208692,_0x7b6aa){return _0x290a(_0x7b6aa-0xc0,_0x208692);}_0x5699fc[_0x305d2c(0x591,0x536)]=_0xcb6cd8;const _0x1429b6=new Cesium$5[(_0x305d2c(0x531,0x4e9))](_0x5699fc);return _0x1429b6;},_0x10f028=function(_0x5f00bc){const _0x542629=!![],_0x222210=![];function _0x551595(_0x22d67a,_0x2f40c7){return _0x290a(_0x2f40c7-0x10f,_0x22d67a);}const _0xc5d631={};_0xc5d631[_0x168a6b(0x61d,0x683)]=_0x5f00bc[_0x168a6b(0x61d,0x5c9)],_0xc5d631['depthTest']=_0x5f00bc['depthTest'],_0xc5d631['depthMask']=_0x5f00bc[_0x168a6b(0x569,0x5f6)];function _0x168a6b(_0x1d1af9,_0x3ee298){return _0x290a(_0x1d1af9-0x396,_0x3ee298);}_0xc5d631[_0x168a6b(0x601,0x61b)]=_0x5f00bc['blending'];const _0x149bb6=_0xc5d631,_0xe112e8=Cesium$5['Appearance'][_0x168a6b(0x526,0x57e)](_0x542629,_0x222210,_0x149bb6);return _0xe112e8;},_0x2f2016=function(_0x4a1fd1){const _0x4d47b2={},_0x305c3c=Cesium$5['Math']['mod'](_0x4a1fd1['west'],Cesium$5['Math'][_0x3ffe5c(0xdf,0xd3)]),_0x1d48b8=Cesium$5['Math']['mod'](_0x4a1fd1['east'],Cesium$5['Math'][_0x3ffe5c(0x116,0xd3)]),_0x420f82=_0x4a1fd1[_0x293a5d(0x610,0x5e1)];let _0x5d128c,_0x3a7fef;_0x420f82>Cesium$5[_0x293a5d(0x651,0x662)]['THREE_PI_OVER_TWO']?(_0x5d128c=0x0,_0x3a7fef=Cesium$5['Math']['TWO_PI']):_0x1d48b8-_0x305c3c<_0x420f82?(_0x5d128c=_0x305c3c,_0x3a7fef=_0x305c3c+_0x420f82):(_0x5d128c=_0x305c3c,_0x3a7fef=_0x1d48b8);_0x4d47b2[_0x293a5d(0x504,0x584)]={'min':Cesium$5[_0x293a5d(0x6f4,0x662)][_0x3ffe5c(-0x61,0x15)](_0x5d128c),'max':Cesium$5['Math']['toDegrees'](_0x3a7fef)};const _0x1439ac=_0x4a1fd1[_0x293a5d(0x61b,0x65e)],_0x3a8341=_0x4a1fd1[_0x293a5d(0x645,0x62f)],_0x46659b=_0x4a1fd1[_0x3ffe5c(0x13,0x5a)];function _0x293a5d(_0x2c7c24,_0x8df244){return _0x290a(_0x8df244-0x3df,_0x2c7c24);}const _0x1d1ec7=_0x46659b>Cesium$5['Math']['PI']/0xc?_0x46659b/0x2:0x0;function _0x3ffe5c(_0x50048f,_0x3e5b7a){return _0x290a(_0x3e5b7a- -0x1cf,_0x50048f);}let _0x58449b=Cesium$5[_0x3ffe5c(0xbd,0xb4)]['clampToLatitudeRange'](_0x1439ac-_0x1d1ec7),_0x8b7b4e=Cesium$5[_0x3ffe5c(0xb1,0xb4)][_0x3ffe5c(0xcb,0xa8)](_0x3a8341+_0x1d1ec7);return _0x58449b<-Cesium$5[_0x3ffe5c(0xa8,0xb4)]['PI_OVER_THREE']&&(_0x58449b=-Cesium$5[_0x293a5d(0x6d6,0x662)]['PI_OVER_TWO']),_0x8b7b4e>Cesium$5['Math'][_0x3ffe5c(0x7e,0xe5)]&&(_0x8b7b4e=Cesium$5['Math']['PI_OVER_TWO']),_0x4d47b2['lat']={'min':Cesium$5[_0x293a5d(0x6e7,0x662)][_0x293a5d(0x5a4,0x5c3)](_0x58449b),'max':Cesium$5['Math']['toDegrees'](_0x8b7b4e)},_0x4d47b2;},_0x4eff59={};return _0x4eff59['getFullscreenQuad']=_0x11e174,_0x4eff59['createTexture']=_0x23bf11,_0x4eff59[_0x57ff49(-0x1a9,-0x176)]=_0x32a79f,_0x4eff59['createRawRenderState']=_0x10f028,_0x4eff59['viewRectangleToLonLatRange']=_0x2f2016,_0x4eff59;}());function _0x3f25ac(_0x4e1cce,_0x567db2){return _0x290a(_0x567db2- -0x15f,_0x4e1cce);}var fullscreenVert='#version\x20300\x20es\x0a\x0ain\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20gl_Position\x20=\x20vec4(position,\x201.0f);\x0a}\x0a',screenDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20trailsColor;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a',segmentDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20bool\x20colour;\x0a\x0ain\x20float\x20heightNormalization;\x0ain\x20float\x20speedNormalization;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speedNormalization\x20>\x20zero)\x20{\x0a\x20\x20\x20\x20if(colour)\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(heightNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',segmentDrawVert=_0x26960e(0x512,0x55b),trailDrawFrag='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0aout\x20vec4\x20fragColor;\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0f\x20*\x20trailsColor)\x20/\x20255.0f;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20if(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20pointsColor;\x0a\x20\x20}\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20trailsColor;\x0a\x20\x20}\x0a\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a';const Cesium$4=mars3d__namespace[_0x26960e(0x535,0x510)];class ParticlesRendering{constructor(_0x1f3de2,_0x42ec76,_0x4c276c,_0x4f7406,_0x1ace54){function _0x1a1362(_0x3bfa77,_0x4a5ad2){return _0x26960e(_0x3bfa77,_0x4a5ad2- -0x4cf);}this['colour']=_0x4c276c['colors']==='height';function _0x1209cf(_0x261519,_0x3e7ccd){return _0x26960e(_0x3e7ccd,_0x261519- -0x309);}this[_0x1a1362(-0x6,0x28)](_0x1f3de2,_0x42ec76,_0x4c276c[_0x1a1362(0x94,0x116)]),this[_0x1a1362(0x8f,0x31)](_0x1f3de2),this[_0x1209cf(0x2c6,0x307)](_0x1f3de2,_0x42ec76,_0x4c276c,_0x4f7406,_0x1ace54);}[_0x26960e(0x473,0x4f7)](_0x3ddf88,_0xa576b7,_0xa93a85){const _0x10bc5d={};_0x10bc5d['context']=_0x3ddf88,_0x10bc5d['width']=_0x3ddf88['drawingBufferWidth'],_0x10bc5d['height']=_0x3ddf88[_0x78d09(0x362,0x3a3)],_0x10bc5d['pixelFormat']=Cesium$4['PixelFormat'][_0x1739c9(0x96,0x13)],_0x10bc5d[_0x78d09(0x3c7,0x3f7)]=Cesium$4[_0x78d09(0x31c,0x350)]['UNSIGNED_BYTE'];const _0x309350=_0x10bc5d,_0x4c5fd6={};_0x4c5fd6[_0x78d09(0x3c9,0x449)]=_0x3ddf88,_0x4c5fd6['width']=_0x3ddf88['drawingBufferWidth'],_0x4c5fd6[_0x78d09(0x338,0x37a)]=_0x3ddf88['drawingBufferHeight'];function _0x1739c9(_0x136b12,_0x5dc3f0){return _0x26960e(_0x136b12,_0x5dc3f0- -0x506);}_0x4c5fd6['pixelFormat']=Cesium$4[_0x78d09(0x332,0x325)][_0x78d09(0x3ca,0x395)],_0x4c5fd6['pixelDatatype']=Cesium$4['PixelDatatype']['UNSIGNED_INT'];const _0x382145=_0x4c5fd6,_0x1bbf14=_0xa93a85['length'],_0x2a01e2=new Float32Array(_0x1bbf14*0x3);function _0x78d09(_0x14d1b0,_0x30057d){return _0x26960e(_0x30057d,_0x14d1b0- -0x25b);}for(let _0x4b723b=0x0;_0x4b723b<_0x1bbf14;_0x4b723b++){const _0xa0ddb6=Cesium$4[_0x1739c9(0x5f,0x8b)]['fromCssColorString'](_0xa93a85[_0x4b723b]);_0x2a01e2[0x3*_0x4b723b]=_0xa0ddb6['red'],_0x2a01e2[0x3*_0x4b723b+0x1]=_0xa0ddb6[_0x78d09(0x2fd,0x36a)],_0x2a01e2[0x3*_0x4b723b+0x2]=_0xa0ddb6[_0x78d09(0x2e1,0x343)];}const _0x32a39b={'context':_0x3ddf88,'width':_0x1bbf14,'height':0x1,'pixelFormat':Cesium$4['PixelFormat']['RGB'],'pixelDatatype':Cesium$4['PixelDatatype']['FLOAT'],'sampler':new Cesium$4[(_0x78d09(0x2e8,0x2e7))]({'minificationFilter':Cesium$4['TextureMinificationFilter'][_0x1739c9(0x2e,0x95)],'magnificationFilter':Cesium$4['TextureMagnificationFilter']['LINEAR']})};this[_0x78d09(0x33b,0x306)]={'segmentsColor':Util[_0x78d09(0x367,0x35e)](_0x309350),'segmentsDepth':Util['createTexture'](_0x382145),'currentTrailsColor':Util['createTexture'](_0x309350),'currentTrailsDepth':Util['createTexture'](_0x382145),'nextTrailsColor':Util['createTexture'](_0x309350),'nextTrailsDepth':Util[_0x78d09(0x367,0x369)](_0x382145),'colorTable':Util['createTexture'](_0x32a39b,_0x2a01e2)};}['createRenderingFramebuffers'](_0x5746cf){function _0x2bfe20(_0x1e5dea,_0x406a91){return _0x3f25ac(_0x1e5dea,_0x406a91-0x4c);}function _0x55cb35(_0x282ed9,_0x3a80ca){return _0x3f25ac(_0x282ed9,_0x3a80ca-0x32f);}this[_0x55cb35(0x42e,0x430)]={'segments':Util['createFramebuffer'](_0x5746cf,this[_0x55cb35(0x42b,0x3fc)]['segmentsColor'],this['textures'][_0x2bfe20(0xe6,0xa8)]),'currentTrails':Util['createFramebuffer'](_0x5746cf,this[_0x2bfe20(0x172,0x119)][_0x2bfe20(0x13e,0xa4)],this[_0x2bfe20(0x164,0x119)]['currentTrailsDepth']),'nextTrails':Util['createFramebuffer'](_0x5746cf,this['textures']['nextTrailsColor'],this['textures'][_0x55cb35(0x3fd,0x3f6)])};}['createSegmentsGeometry'](_0x313d7a){const _0x31849c=0x4;let _0x4c94ef=[];for(let _0x5f2475=0x0;_0x5f2475<_0x313d7a[_0x462947(-0x1a7,-0x211)];_0x5f2475++){for(let _0x18b7bb=0x0;_0x18b7bb<_0x313d7a['particlesTextureSize'];_0x18b7bb++){for(let _0x2f164e=0x0;_0x2f164e<_0x31849c;_0x2f164e++){_0x4c94ef['push'](_0x5f2475/_0x313d7a['particlesTextureSize']),_0x4c94ef['push'](_0x18b7bb/_0x313d7a['particlesTextureSize']);}}}_0x4c94ef=new Float32Array(_0x4c94ef);function _0x5e7836(_0x4db491,_0x911d2f){return _0x26960e(_0x911d2f,_0x4db491- -0x513);}let _0x3d88dd=[];for(let _0x4b1f02=0x0;_0x4b1f02<_0x313d7a['maxParticles'];_0x4b1f02++){_0x3d88dd[_0x5e7836(0x5f,0x36)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x3d88dd=new Float32Array(_0x3d88dd);let _0x330c23=[];for(let _0x1fbfc4=0x0,_0x4678ed=0x0;_0x1fbfc4<_0x313d7a[_0x462947(-0x1cc,-0x1d7)];_0x1fbfc4++){_0x330c23[_0x462947(-0x16b,-0x1ce)](_0x4678ed+0x0,_0x4678ed+0x1,_0x4678ed+0x2,_0x4678ed+0x2,_0x4678ed+0x1,_0x4678ed+0x3),_0x4678ed+=_0x31849c;}_0x330c23=new Uint32Array(_0x330c23);const _0x55f626=new Cesium$4['Geometry']({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4[_0x462947(-0x104,-0x175)][_0x5e7836(0x2d,-0x29)],'componentsPerAttribute':0x2,'values':_0x4c94ef}),'normal':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4['ComponentDatatype'][_0x5e7836(0x2d,0x7d)],'componentsPerAttribute':0x3,'values':_0x3d88dd})}),'indices':_0x330c23});function _0x462947(_0x2febe2,_0x2b4996){return _0x3f25ac(_0x2febe2,_0x2b4996- -0x277);}return _0x55f626;}[_0x26960e(0x537,0x5cf)](_0x240c9c,_0x64d984,_0x11dce9,_0x5064dc,_0x29c5ff){const _0x37430e=this,_0x4c7fd8={};_0x4c7fd8['st']=0x0,_0x4c7fd8['normal']=0x1;const _0x47ea64={};_0x47ea64[_0x27b968(0x355,0x3ed)]=[segmentDrawVert];const _0x35c924={};_0x35c924['sources']=[segmentDrawFrag];const _0x1f2c79={};_0x1f2c79[_0x2d09ce(-0x62,-0x75)]=!![];const _0x3ef5b7={};_0x3ef5b7[_0x2d09ce(-0x11a,-0x89)]=undefined,_0x3ef5b7['depthTest']=_0x1f2c79,_0x3ef5b7['depthMask']=!![];const _0x388d89={};_0x388d89['position']=0x0,_0x388d89['st']=0x1;const _0x262119={};function _0x27b968(_0x2bec65,_0x553772){return _0x3f25ac(_0x2bec65,_0x553772-0x2cc);}_0x262119['defines']=[_0x2d09ce(-0xba,-0x12d)],_0x262119[_0x27b968(0x35e,0x3ed)]=[fullscreenVert];const _0xf27f3b={};_0xf27f3b['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'];function _0x2d09ce(_0x5c6a04,_0x3661b0){return _0x3f25ac(_0x5c6a04,_0x3661b0- -0x1b1);}_0xf27f3b['sources']=[trailDrawFrag];const _0x387373={};_0x387373[_0x2d09ce(-0x33,-0x86)]=0x0,_0x387373['st']=0x1;const _0x188e23={};_0x188e23['defines']=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x188e23['sources']=[fullscreenVert];const _0x359008={};_0x359008[_0x27b968(0x3be,0x348)]=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x359008['sources']=[screenDrawFrag];const _0x1378f7={};_0x1378f7['enabled']=![];const _0x46addb={};_0x46addb[_0x27b968(0x441,0x408)]=!![],this[_0x27b968(0x37b,0x3be)]={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x4c7fd8,'geometry':this['createSegmentsGeometry'](_0x11dce9),'primitiveType':Cesium$4[_0x27b968(0x3b6,0x39c)][_0x27b968(0x345,0x38c)],'uniformMap':{'previousParticlesPosition':function(){function _0x48c724(_0x572e05,_0x463060){return _0x2d09ce(_0x572e05,_0x463060-0x4c7);}return _0x29c5ff['particlesTextures'][_0x48c724(0x3e7,0x3b1)];},'currentParticlesPosition':function(){function _0x562e5b(_0xdd86c,_0x151b52){return _0x2d09ce(_0xdd86c,_0x151b52- -0x13);}return _0x29c5ff[_0x562e5b(-0x1ce,-0x18e)]['currentParticlesPosition'];},'postProcessingPosition':function(){function _0x2f4325(_0x19dd8e,_0x261e28){return _0x27b968(_0x19dd8e,_0x261e28- -0xc6);}return _0x29c5ff['particlesTextures'][_0x2f4325(0x213,0x24e)];},'particlesSpeed':function(){return _0x29c5ff['particlesTextures']['particlesSpeed'];},'colorTable':function(){return _0x37430e['textures']['colorTable'];},'aspect':function(){return _0x240c9c['drawingBufferWidth']/_0x240c9c['drawingBufferHeight'];},'H':function(){return _0x64d984['H']['array'];},'hRange':function(){function _0x595a88(_0x50a3b4,_0x2baec2){return _0x27b968(_0x50a3b4,_0x2baec2- -0x2cb);}return new Cesium$4['Cartesian2'](_0x64d984['H']['min'],_0x64d984['H'][_0x595a88(0xc,0x6a)]);},'uSpeedRange':function(){function _0x1e4be5(_0x4d96d3,_0x2eef6e){return _0x2d09ce(_0x2eef6e,_0x4d96d3-0xfd);}return new Cesium$4['Cartesian2'](_0x64d984['U']['min'],_0x64d984['U'][_0x1e4be5(-0x4b,-0xc8)]);},'vSpeedRange':function(){function _0x4d8ea3(_0x29ae12,_0x4c662f){return _0x2d09ce(_0x29ae12,_0x4c662f-0x1bb);}function _0x2f88c4(_0x3ff061,_0x268741){return _0x27b968(_0x268741,_0x3ff061- -0x4cc);}return new Cesium$4['Cartesian2'](_0x64d984['V'][_0x4d8ea3(0x16,0x9f)],_0x64d984['V'][_0x2f88c4(-0x197,-0x1e6)]);},'wSpeedRange':function(){return new Cesium$4['Cartesian2'](_0x64d984['W']['min'],_0x64d984['W']['max']);},'pixelSize':function(){function _0x191d18(_0x2cf7ab,_0x16e478){return _0x27b968(_0x2cf7ab,_0x16e478- -0x4a);}return _0x5064dc[_0x191d18(0x30c,0x2f2)];},'lineWidth':function(){return _0x11dce9['lineWidth'];},'particleHeight':function(){return _0x11dce9['particleHeight'];},'colour':function(){function _0x2f59ac(_0x41d305,_0x2d9bc8){return _0x2d09ce(_0x41d305,_0x2d9bc8-0x4ed);}return _0x37430e[_0x2f59ac(0x448,0x41b)];}},'vertexShaderSource':new Cesium$4[(_0x2d09ce(-0x115,-0x165))](_0x47ea64),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x35c924),'rawRenderState':Util['createRawRenderState'](_0x3ef5b7),'framebuffer':this[_0x27b968(0x34b,0x3cd)]['segments'],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x388d89,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType'][_0x27b968(0x2ff,0x38c)],'uniformMap':{'segmentsColorTexture':function(){return _0x37430e['textures']['segmentsColor'];},'segmentsDepthTexture':function(){function _0x36ffa9(_0x3704ce,_0x231207){return _0x27b968(_0x231207,_0x3704ce- -0x10d);}return _0x37430e['textures'][_0x36ffa9(0x21b,0x206)];},'currentTrailsColor':function(){function _0x1b581c(_0x3b856c,_0x1d7f5b){return _0x2d09ce(_0x1d7f5b,_0x3b856c-0x3be);}return _0x37430e['framebuffers'][_0x1b581c(0x2c6,0x356)]['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x414c7b(_0x28f20c,_0x26fb03){return _0x27b968(_0x28f20c,_0x26fb03-0x224);}function _0x538a29(_0x19ee0e,_0x11ba63){return _0x2d09ce(_0x11ba63,_0x19ee0e-0x330);}return _0x37430e[_0x414c7b(0x5bd,0x5f1)][_0x414c7b(0x5d3,0x5a9)][_0x414c7b(0x533,0x5a5)];},'fadeOpacity':function(){return _0x11dce9['fadeOpacity'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x262119),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0xf27f3b),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction'][_0x27b968(0x3da,0x39b)]},'depthMask':!![]}),'framebuffer':this['framebuffers'][_0x27b968(0x3e0,0x384)],'autoClear':!![],'preExecute':function(){function _0x5c88fd(_0x448f5a,_0x12b5bd){return _0x2d09ce(_0x448f5a,_0x12b5bd- -0x2f);}function _0x219c56(_0x3eb8b8,_0x1f3465){return _0x27b968(_0x1f3465,_0x3eb8b8-0x86);}if(_0x11dce9['dynamic']){const _0x4a604c=_0x37430e['framebuffers']['currentTrails'];_0x37430e[_0x219c56(0x453,0x47c)][_0x219c56(0x40b,0x3e2)]=_0x37430e['framebuffers']['nextTrails'],_0x37430e[_0x5c88fd(-0x11d,-0xdf)]['nextTrails']=_0x4a604c;}_0x37430e['primitives'][_0x5c88fd(-0x10f,-0xe6)][_0x5c88fd(-0x218,-0x1a2)]['framebuffer']=_0x37430e[_0x219c56(0x453,0x424)][_0x5c88fd(-0x19f,-0x128)],_0x37430e[_0x5c88fd(-0xf4,-0xee)]['trails'][_0x5c88fd(-0x15a,-0xd5)][_0x5c88fd(-0xa8,-0x90)]=_0x37430e['framebuffers']['nextTrails'];}}),'screen':new CustomPrimitive({'commandType':_0x27b968(0x311,0x305),'attributeLocations':_0x387373,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){return _0x37430e['framebuffers']['nextTrails']['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x226e7f(_0x158250,_0x67dfd7){return _0x27b968(_0x67dfd7,_0x158250-0x13a);}function _0xf6c26c(_0x19ed1a,_0x5d6f5c){return _0x27b968(_0x5d6f5c,_0x19ed1a- -0x48a);}return _0x37430e[_0xf6c26c(-0xbd,-0x12b)][_0xf6c26c(-0x106,-0x9d)][_0x226e7f(0x4bb,0x48b)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x188e23),'fragmentShaderSource':new Cesium$4[(_0x27b968(0x286,0x318))](_0x359008),'rawRenderState':Util[_0x2d09ce(-0x8b,-0x121)]({'viewport':undefined,'depthTest':_0x1378f7,'depthMask':!![],'blending':_0x46addb}),'framebuffer':undefined})};}}var CalculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20W;\x20//\x20upward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0auniform\x20float\x20speedScaleFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20//\x20map\x20the\x20z-axis\x20value\x20to\x20the\x20nearest\x20bit\x20plane\x20to\x20ensure\x20that\x20the\x20result\x20is\x20an\x20integer\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205,\x207,\x208,\x209],\x20width\x20=\x202,\x20height\x20=\x202,\x20level\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x206\x207\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x202\x203\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0afloat\x20interpolateTexture(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x201.0f\x20*\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x201.0f\x20*\x20interval.y;\x0a\x0a\x20\x20float\x20lon0_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon1_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon0_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat1,\x20lev));\x0a\x20\x20float\x20lon1_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat1,\x20lev));\x0a\x0a\x20\x20float\x20lon_lat0\x20=\x20mix(lon0_lat0,\x20lon1_lat0,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat1\x20=\x20mix(lon0_lat1,\x20lon1_lat1,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat\x20=\x20mix(lon_lat0,\x20lon_lat1,\x20lat\x20-\x20lat0);\x0a\x20\x20return\x20lon_lat;\x0a}\x0a\x0avec3\x20linearInterpolation(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bilinear_interpolation\x0a\x20\x20float\x20u\x20=\x20interpolateTexture(U,\x20lonLatLev);\x0a\x20\x20float\x20v\x20=\x20interpolateTexture(V,\x20lonLatLev);\x0a\x20\x20float\x20w\x20=\x20interpolateTexture(W,\x20lonLatLev);\x0a\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec3\x20convertSpeedUnitToLonLat(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20float\x20w\x20=\x20speed.z;\x0a\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20return\x20windVectorInLonLatLev;\x0a}\x0a\x0avec3\x20calculateSpeedByRungeKutta2(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec3\x20y_n\x20=\x20lonLatLev;\x0a\x20\x20vec3\x20f_n\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec3\x20speed\x20=\x20h\x20*\x20linearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20getRange(vec2\x20range)\x20{\x0a\x20\x20float\x20x1\x20=\x200.0f\x20-\x20range.x;\x0a\x20\x20float\x20x2\x20=\x20range.y\x20-\x200.0f;\x0a\x20\x20if(x1\x20<\x200.0f\x20||\x20x2\x20<\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(abs(x1),\x20abs(x2));\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x20abs(max(x1,\x20x2)));\x0a\x20\x20}\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20vec2\x20uRange\x20=\x20getRange(uSpeedRange);\x0a\x20\x20vec2\x20vRange\x20=\x20getRange(vSpeedRange);\x0a\x20\x20vec2\x20wRange\x20=\x20getRange(wSpeedRange);\x0a\x20\x20if(length(speed.xyz)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x200.0f;\x0a\x20\x20}\x0a\x0a\x20\x20percent.x\x20=\x20(abs(speed.x)\x20-\x20uRange.x)\x20/\x20(uRange.y\x20-\x20uRange.x);\x0a\x20\x20percent.y\x20=\x20(abs(speed.y)\x20-\x20vRange.x)\x20/\x20(vRange.y\x20-\x20vRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(abs(speed.z)\x20-\x20wRange.x)\x20/\x20(wRange.y\x20-\x20wRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speedOrigin\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLatLev);\x0a\x20\x20vec3\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLatLev,\x20speed);\x0a\x0a\x20\x20vec4\x20particleSpeed\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speed\x20/\x20speedScaleFactor));\x0a\x20\x20\x20\x20//\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',PostProcessingPositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x0a\x0auniform\x20sampler2D\x20H;\x20//\x20particles\x20height\x20textures\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0auniform\x20vec2\x20viewerLonRange;\x0auniform\x20vec2\x20viewerLatRange;\x0a\x0aconst\x20float\x20randomCoefficient\x20=\x200.1f;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0aconst\x20float\x20dropRate\x20=\x200.1f;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0aconst\x20float\x20dropRateBump\x20=\x200.1f;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0avec4\x20getTextureValue(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20vec4\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D);\x0a\x20\x20return\x20result;\x0a}\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0abool\x20particleNoSpeed(vec3\x20particle)\x20{\x0a\x20\x20vec4\x20speed\x20=\x20getTextureValue(particlesSpeed,\x20particle);\x0a\x20\x20return\x20speed.r\x20==\x200.0f\x20&&\x20speed.g\x20==\x200.0f;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0f);\x0a\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20float\x20height\x20=\x20getTextureValue(H,\x20vec3(randomLon,\x20randomLat,\x20lev)).r;\x0a\x0a\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20height);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20viewerLatRange.x\x20||\x20particle.y\x20>\x20viewerLatRange.y\x20||\x20particle.x\x20<\x20viewerLonRange.x\x20||\x20particle.x\x20>\x20viewerLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x0a}\x0a',UpdatePositionShader='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x20Unit\x20converted\x20to\x20degrees\x20of\x20longitude\x20and\x20latitude\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20speed;\x0a\x20\x20if(length(speed.rgb)\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a';const Cesium$3=mars3d__namespace['Cesium'];class ParticlesComputing{constructor(_0x12d1ef,_0x5bf3bc,_0x36cfd0,_0x500ed2){function _0x24dddf(_0x6456a7,_0x4ecd45){return _0x3f25ac(_0x4ecd45,_0x6456a7- -0x1b1);}this['data']=_0x5bf3bc,this[_0x24dddf(-0xeb,-0xea)](_0x12d1ef,_0x5bf3bc),this['createParticlesTextures'](_0x12d1ef,_0x36cfd0,_0x500ed2),this['createComputingPrimitives'](_0x5bf3bc,_0x36cfd0,_0x500ed2);}[_0x3f25ac(0x83,0xc6)](_0x312e20,_0x57a720){function _0x43190a(_0x4fb8b1,_0x1b5b26){return _0x3f25ac(_0x4fb8b1,_0x1b5b26-0xbd);}var _0xbd547;const _0x2a67a6={'context':_0x312e20,'width':_0x57a720['dimensions']['lon'],'height':_0x57a720[_0x43190a(0x14f,0x1a1)][_0x1a4792(0x5fc,0x59e)]*(_0x57a720['dimensions']['lev']||0x1),'pixelFormat':Cesium$3['PixelFormat']['RED'],'pixelDatatype':Cesium$3['PixelDatatype'][_0x43190a(0x110,0x134)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3['TextureMinificationFilter'][_0x43190a(0x1c5,0x20a)],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x43190a(0x296,0x20a)]})};function _0x1a4792(_0x30159a,_0x119200){return _0x26960e(_0x119200,_0x30159a-0x4a);}this['windTextures']={'U':Util['createTexture'](_0x2a67a6,_0x57a720['U'][_0x43190a(0x239,0x1a0)]),'V':Util['createTexture'](_0x2a67a6,_0x57a720['V']['array']),'W':Util[_0x43190a(0x11e,0x1b6)](_0x2a67a6,((_0xbd547=_0x57a720['W'])===null||_0xbd547===void 0x0?void 0x0:_0xbd547['array'])??_0x57a720['U'][_0x43190a(0x1e8,0x1a0)]),'H':Util['createTexture'](_0x2a67a6,_0x57a720['H'][_0x43190a(0x1d0,0x1a0)])};}['createParticlesTextures'](_0x3a1b94,_0x39a3d0,_0x1c2593){function _0x2fa1be(_0x29f90a,_0x3cc1b4){return _0x26960e(_0x29f90a,_0x3cc1b4- -0x339);}function _0xe7a1a(_0x1ca6c0,_0x359097){return _0x3f25ac(_0x1ca6c0,_0x359097- -0x19d);}const _0x4e4811={'context':_0x3a1b94,'width':_0x39a3d0[_0xe7a1a(-0xad,-0x137)],'height':_0x39a3d0['particlesTextureSize'],'pixelFormat':Cesium$3['PixelFormat']['RGBA'],'pixelDatatype':Cesium$3[_0xe7a1a(-0x137,-0xef)]['FLOAT'],'flipY':![],'sampler':new Cesium$3[(_0x2fa1be(0x17a,0x20a))]({'minificationFilter':Cesium$3['TextureMinificationFilter'][_0xe7a1a(-0x3d,-0x50)],'magnificationFilter':Cesium$3[_0xe7a1a(-0x14e,-0xd8)]['NEAREST']})},_0x229e76=this['randomizeParticles'](_0x39a3d0['maxParticles'],_0x1c2593),_0x3505f2=new Float32Array(0x4*_0x39a3d0['maxParticles'])[_0x2fa1be(0x1e2,0x1f2)](0x0);this['particlesTextures']={'previousParticlesPosition':Util[_0x2fa1be(0x246,0x289)](_0x4e4811,_0x229e76),'currentParticlesPosition':Util['createTexture'](_0x4e4811,_0x229e76),'nextParticlesPosition':Util['createTexture'](_0x4e4811,_0x229e76),'postProcessingPosition':Util['createTexture'](_0x4e4811,_0x229e76),'particlesSpeed':Util['createTexture'](_0x4e4811,_0x3505f2)};}[_0x3f25ac(0x17a,0x134)](_0x3f62c1,_0x513304){function _0x1358ae(_0x38bcb9,_0x1e071b){return _0x3f25ac(_0x1e071b,_0x38bcb9-0x39d);}function _0x53db51(_0x2c54b1,_0x5cdc70){return _0x26960e(_0x2c54b1,_0x5cdc70- -0x3f4);}const _0x3bf334=new Float32Array(0x4*_0x3f62c1);for(let _0x2d01e7=0x0;_0x2d01e7<_0x3f62c1;_0x2d01e7++){_0x3bf334[0x4*_0x2d01e7]=Cesium$3[_0x1358ae(0x4c1,0x51b)][_0x53db51(0x7a,0x104)](_0x513304[_0x53db51(0x1ad,0x1bd)]['x'],_0x513304['lonRange']['y']),_0x3bf334[0x4*_0x2d01e7+0x1]=Cesium$3['Math'][_0x1358ae(0x3cc,0x3f9)](_0x513304[_0x1358ae(0x499,0x426)]['x'],_0x513304['latRange']['y']),_0x3bf334[0x4*_0x2d01e7+0x2]=Cesium$3['Math']['randomBetween'](this[_0x1358ae(0x4ae,0x514)][_0x1358ae(0x494,0x43b)][_0x1358ae(0x432,0x470)],this['data']['lev']['max']),_0x3bf334[0x4*_0x2d01e7+0x3]=0x0;}return _0x3bf334;}[_0x3f25ac(0x104,0xd8)](_0x459ca9){const _0x133579=[_0x459ca9['dimensions']['lon'],_0x459ca9[_0x29a0c3(0x49d,0x433)]['lat'],_0x459ca9[_0x29a0c3(0x421,0x433)]['lev']],_0x198b55=[_0x459ca9['lon'][_0x29a0c3(0x3b0,0x3e4)],_0x459ca9[_0x3c630d(0x61d,0x627)][_0x29a0c3(0x387,0x3e4)],_0x459ca9['lev']['min']],_0x3426b9=[_0x459ca9['lon'][_0x29a0c3(0x43d,0x3b8)],_0x459ca9[_0x3c630d(0x64f,0x627)]['max'],_0x459ca9['lev']['max']],_0x11e593=[(_0x3426b9[0x0]-_0x198b55[0x0])/(_0x133579[0x0]-0x1),(_0x3426b9[0x1]-_0x198b55[0x1])/(_0x133579[0x1]-0x1),_0x133579[0x2]>0x1?(_0x3426b9[0x2]-_0x198b55[0x2])/(_0x133579[0x2]-0x1):0x1],_0x4c7a3b=Math[_0x29a0c3(0x3af,0x3ee)](Math['random']()*_0x459ca9['U']['array']['length']),_0x3e9589=_0x4c7a3b%(_0x133579[0x0]*_0x133579[0x1]),_0x3d57f7=Math[_0x3c630d(0x5d8,0x5dd)](_0x3e9589/_0x133579[0x0]),_0x3774f9=_0x3e9589%_0x133579[0x0],_0x43ff8c=Cesium$3[_0x3c630d(0x6b3,0x662)]['randomBetween'](_0x198b55[0x0]+_0x3774f9*_0x11e593[0x0],_0x198b55[0x0]+(_0x3774f9+0x1)*_0x11e593[0x0]);function _0x3c630d(_0x590609,_0x184d51){return _0x3f25ac(_0x590609,_0x184d51-0x53e);}const _0x1ba142=Cesium$3['Math'][_0x29a0c3(0x34c,0x37e)](_0x198b55[0x1]+(_0x3d57f7-0x1)*_0x11e593[0x1],_0x198b55[0x1]+_0x3d57f7*_0x11e593[0x1]);function _0x29a0c3(_0x2f570f,_0x27c5f2){return _0x26960e(_0x2f570f,_0x27c5f2- -0x17a);}const _0x2abc21=_0x459ca9['H']['array'][_0x4c7a3b]||0x0;return[_0x43ff8c,_0x1ba142,_0x2abc21];}[_0x3f25ac(0x90,0x110)](){function _0x2ac41c(_0x2caa42,_0x216703){return _0x3f25ac(_0x2caa42,_0x216703-0x227);}Object['keys'](this[_0x2ac41c(0x25d,0x25d)])['forEach'](_0x1861cf=>{this['particlesTextures'][_0x1861cf]['destroy']();});}[_0x3f25ac(0x15,0x8a)](_0x315d51,_0x100c7c,_0x71f0c7){const _0x49fd3e=new Cesium$3[(_0x99d253(0xa6,0x75))](_0x315d51[_0x99d253(0xc2,0x63)]['lon'],_0x315d51['dimensions'][_0x50a4df(0x1e2,0x191)],_0x315d51['dimensions']['lev']),_0x530228=new Cesium$3[(_0x99d253(0x2,0x75))](_0x315d51[_0x50a4df(0xd2,0xee)]['min'],_0x315d51[_0x50a4df(0x1ea,0x191)]['min'],_0x315d51[_0x99d253(0xc,0x76)]['min']),_0x5dea08=new Cesium$3[(_0x50a4df(0x108,0x19e))](_0x315d51['lon']['max'],_0x315d51[_0x50a4df(0x1fb,0x191)]['max'],_0x315d51['lev']['max']),_0x3d1fd3=new Cesium$3['Cartesian3']((_0x5dea08['x']-_0x530228['x'])/(_0x49fd3e['x']-0x1),(_0x5dea08['y']-_0x530228['y'])/(_0x49fd3e['y']-0x1),_0x49fd3e['z']>0x1?(_0x5dea08['z']-_0x530228['z'])/(_0x49fd3e['z']-0x1):0x1),_0x12c52f=new Cesium$3[(_0x50a4df(0xfc,0x129))](_0x315d51['lon']['min'],_0x315d51[_0x50a4df(0x7a,0xee)][_0x50a4df(0xcf,0x111)]),_0x27b449=new Cesium$3[(_0x99d253(0x7e,0x0))](_0x315d51['lat']['min'],_0x315d51[_0x50a4df(0x17c,0x191)][_0x99d253(-0x34,-0x18)]);function _0x50a4df(_0x10bb88,_0x3c6930){return _0x3f25ac(_0x10bb88,_0x3c6930-0xa8);}const _0x2ce7bc=new Cesium$3['Cartesian2'](_0x315d51['U']['min'],_0x315d51['U'][_0x99d253(0x3c,-0x18)]),_0x1118b4=new Cesium$3[(_0x50a4df(0x103,0x129))](_0x315d51['V'][_0x50a4df(0x176,0x13d)],_0x315d51['V'][_0x99d253(0x22,-0x18)]),_0x2dcef6=new Cesium$3['Cartesian2'](_0x315d51['W'][_0x99d253(0x67,0x14)],_0x315d51['W'][_0x50a4df(0xe9,0x111)]),_0x2d039d=this,_0x428837={};_0x428837['U']=function(){function _0xa5dadf(_0x287f45,_0x30368d){return _0x99d253(_0x30368d,_0x287f45- -0x1bc);}return _0x2d039d[_0xa5dadf(-0x208,-0x1fe)]['U'];},_0x428837['V']=function(){function _0x35ea09(_0x45e070,_0x15bdd7){return _0x50a4df(_0x15bdd7,_0x45e070- -0x242);}return _0x2d039d[_0x35ea09(-0x165,-0x1a1)]['V'];},_0x428837['W']=function(){function _0x14a025(_0x42d3b2,_0x324c84){return _0x99d253(_0x324c84,_0x42d3b2-0x2ae);}return _0x2d039d[_0x14a025(0x262,0x1f6)]['W'];};function _0x99d253(_0x1c9213,_0x439c0c){return _0x3f25ac(_0x1c9213,_0x439c0c- -0x81);}_0x428837['currentParticlesPosition']=function(){function _0x469d56(_0x3093fc,_0x267d85){return _0x99d253(_0x3093fc,_0x267d85- -0x1aa);}return _0x2d039d['particlesTextures'][_0x469d56(-0x19a,-0x17a)];},_0x428837[_0x99d253(0x16,0xac)]=function(){return _0x49fd3e;},_0x428837[_0x50a4df(0x18b,0x109)]=function(){return _0x530228;},_0x428837['maximum']=function(){return _0x5dea08;},_0x428837[_0x50a4df(0xe9,0x13f)]=function(){return _0x3d1fd3;},_0x428837[_0x50a4df(0x18e,0x1b6)]=function(){return _0x2ce7bc;},_0x428837['vSpeedRange']=function(){return _0x1118b4;},_0x428837['wSpeedRange']=function(){return _0x2dcef6;},_0x428837['speedScaleFactor']=function(){function _0x50df38(_0x336fab,_0x4311f3){return _0x99d253(_0x336fab,_0x4311f3- -0x1d4);}function _0x5e9d63(_0x2a1aa6,_0x54467c){return _0x99d253(_0x2a1aa6,_0x54467c- -0x6a);}return _0x71f0c7[_0x50df38(-0x19d,-0x1e5)]*_0x100c7c[_0x5e9d63(-0x29,0x24)];};const _0x34072c={};_0x34072c['sources']=[CalculateSpeedShader];const _0x53e1b9={};_0x53e1b9[_0x99d253(0x91,0xa0)]=[UpdatePositionShader];const _0x4662d3={};_0x4662d3[_0x50a4df(0x152,0x1c9)]=[PostProcessingPositionShader],this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x50a4df(0xf3,0xfb),'uniformMap':_0x428837,'fragmentShaderSource':new Cesium$3[(_0x99d253(-0xac,-0x35))](_0x34072c),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':function(){function _0x29f2fa(_0x12da90,_0x4f8a13){return _0x99d253(_0x4f8a13,_0x12da90-0x340);}function _0x2ec122(_0x18d122,_0x5dbb2f){return _0x99d253(_0x18d122,_0x5dbb2f-0xd7);}if(_0x100c7c!==undefined&&_0x100c7c['dynamic']){const _0x3da858=_0x2d039d['particlesTextures']['previousParticlesPosition'];_0x2d039d['particlesTextures']['previousParticlesPosition']=_0x2d039d[_0x2ec122(0x99,0x8c)]['currentParticlesPosition'],_0x2d039d['particlesTextures']['currentParticlesPosition']=_0x2d039d[_0x2ec122(0xbe,0x8c)]['postProcessingPosition'],_0x2d039d['particlesTextures']['postProcessingPosition']=_0x3da858;}_0x2d039d['primitives'][_0x29f2fa(0x348,0x360)]['commandToExecute']['outputTexture']=_0x2d039d[_0x29f2fa(0x2f5,0x356)][_0x2ec122(0x1ab,0x132)];}}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':function(){function _0x30c54c(_0x7868ae,_0xbbca35){return _0x99d253(_0xbbca35,_0x7868ae- -0xfe);}function _0x4bb273(_0x5d1a54,_0x4855b5){return _0x50a4df(_0x5d1a54,_0x4855b5- -0x256);}return _0x2d039d[_0x30c54c(-0x149,-0x143)][_0x4bb273(-0x170,-0xfd)];},'particlesSpeed':function(){return _0x2d039d['particlesTextures']['particlesSpeed'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x53e1b9),'outputTexture':this[_0x99d253(-0xaf,-0x4b)][_0x50a4df(0xff,0x102)],'preExecute':function(){function _0x58fc8d(_0x6b1d29,_0x4432c7){return _0x99d253(_0x6b1d29,_0x4432c7-0x2a0);}function _0x47a0b7(_0x406e0e,_0x8af167){return _0x50a4df(_0x8af167,_0x406e0e- -0x1bb);}_0x2d039d[_0x58fc8d(0x346,0x311)]['updatePosition']['commandToExecute'][_0x47a0b7(0x44,-0x3b)]=_0x2d039d['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x50a4df(0x66,0xfb),'uniformMap':{'nextParticlesPosition':function(){function _0x4f5f23(_0x49bf01,_0x28edf8){return _0x50a4df(_0x49bf01,_0x28edf8-0x20a);}return _0x2d039d['particlesTextures'][_0x4f5f23(0x2c9,0x30c)];},'particlesSpeed':function(){return _0x2d039d['particlesTextures']['particlesSpeed'];},'viewerLonRange':function(){return _0x71f0c7['lonRange'];},'viewerLatRange':function(){return _0x71f0c7['latRange'];},'lonRange':function(){return _0x12c52f;},'latRange':function(){return _0x27b449;},'dimension':function(){return _0x49fd3e;},'minimum':function(){return _0x530228;},'maximum':function(){return _0x5dea08;},'interval':function(){return _0x3d1fd3;},'H':function(){return _0x2d039d['windTextures']['H'];},'randomCoefficient':function(){const _0x1b6d3d=Math['random']();return _0x1b6d3d;},'dropRate':function(){return _0x100c7c['dropRate'];},'dropRateBump':function(){return _0x100c7c['dropRateBump'];}},'fragmentShaderSource':new Cesium$3[(_0x50a4df(0x111,0xf4))](_0x4662d3),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':function(){function _0x3e72af(_0x3ff43e,_0x2e0fa2){return _0x50a4df(_0x2e0fa2,_0x3ff43e- -0x30);}function _0x14d89c(_0x17a40a,_0xf5ef61){return _0x99d253(_0x17a40a,_0xf5ef61- -0xe1);}_0x2d039d[_0x14d89c(-0xd4,-0x70)][_0x3e72af(0xc0,0xd0)]['commandToExecute']['outputTexture']=_0x2d039d['particlesTextures']['postProcessingPosition'];}})};}}const Cesium$2=mars3d__namespace['Cesium'];class ParticleSystem{constructor(_0x2302ee,_0x299ca8,_0x241917,_0x83f94f){this[_0x4f8bf2(0x27d,0x2d5)]=_0x2302ee,_0x299ca8={..._0x299ca8};_0x299ca8['udata']&&_0x299ca8[_0x4f8bf2(0x173,0x200)]&&(_0x299ca8['dimensions']={},_0x299ca8['dimensions'][_0x4f8bf2(0x144,0x1c0)]=_0x299ca8[_0x4e6aae(0x5e8,0x66c)],_0x299ca8['dimensions']['lat']=_0x299ca8['rows'],_0x299ca8[_0x4e6aae(0x592,0x5ed)]['lev']=_0x299ca8[_0x4e6aae(0x5a5,0x612)]||0x1,_0x299ca8['lon']={},_0x299ca8['lon']['min']=_0x299ca8[_0x4e6aae(0x608,0x5e3)],_0x299ca8['lon']['max']=_0x299ca8['xmax'],_0x299ca8[_0x4e6aae(0x597,0x5bb)]={},_0x299ca8['lat']['min']=_0x299ca8['ymin'],_0x299ca8[_0x4f8bf2(0x1cd,0x263)]['max']=_0x299ca8[_0x4f8bf2(0x2cc,0x281)],_0x299ca8['lev']={},_0x299ca8['lev']['min']=_0x299ca8['levmin']??0x1,_0x299ca8[_0x4e6aae(0x5a5,0x5d0)][_0x4f8bf2(0x222,0x1e3)]=_0x299ca8[_0x4e6aae(0x503,0x567)]??0x1,_0x299ca8['U']={},_0x299ca8['U']['array']=new Float32Array(_0x299ca8['udata']),_0x299ca8['U'][_0x4f8bf2(0x220,0x20f)]=_0x299ca8['umin']??Math[_0x4e6aae(0x543,0x4c2)](..._0x299ca8[_0x4f8bf2(0x21f,0x21e)]),_0x299ca8['U']['max']=_0x299ca8['umax']??Math['max'](..._0x299ca8[_0x4e6aae(0x552,0x5ad)]),_0x299ca8['V']={},_0x299ca8['V']['array']=new Float32Array(_0x299ca8['vdata']),_0x299ca8['V']['min']=_0x299ca8['vmin']??Math[_0x4f8bf2(0x1a2,0x20f)](..._0x299ca8['vdata']),_0x299ca8['V']['max']=_0x299ca8['vmax']??Math[_0x4e6aae(0x517,0x4f3)](..._0x299ca8['vdata']));!_0x299ca8['W']&&(_0x299ca8['W']={'array':new Float32Array(_0x299ca8['U']['array']['length']),'min':0x0,'max':0x0});if(!_0x299ca8['H']){var _0x32ea5d;_0x299ca8['H']={'array':new Float32Array(_0x299ca8['U']['array'][_0x4e6aae(0x519,0x4a6)]),'min':0x0,'max':0x0};if((_0x32ea5d=_0x299ca8[_0x4e6aae(0x5a5,0x51b)])!==null&&_0x32ea5d!==void 0x0&&_0x32ea5d[_0x4f8bf2(0x262,0x25d)]){const {lon:_0x428941,lat:_0xd9baaa,lev:_0x31d12a}=_0x299ca8[_0x4e6aae(0x592,0x502)];for(let _0x3c6e53=0x0;_0x3c6e53<_0x31d12a;_0x3c6e53++){for(let _0xf28ef7=0x0;_0xf28ef7<_0xd9baaa;_0xf28ef7++){for(let _0x1920d2=0x0;_0x1920d2<_0x428941;_0x1920d2++){const _0x48aa3c=_0x3c6e53*(_0x428941*_0xd9baaa)+_0xf28ef7*_0x428941+_0x1920d2;_0x299ca8['H']['array'][_0x48aa3c]=_0x299ca8['lev']['array'][_0x3c6e53];}}}_0x299ca8['H']['min']=Math[_0x4f8bf2(0x254,0x20f)](..._0x299ca8[_0x4f8bf2(0x28a,0x271)][_0x4e6aae(0x591,0x53d)]),_0x299ca8['H']['max']=Math[_0x4e6aae(0x517,0x57d)](..._0x299ca8['lev'][_0x4f8bf2(0x247,0x25d)]);}}this[_0x4e6aae(0x5bf,0x5a7)]=_0x299ca8;function _0x4f8bf2(_0x409706,_0x182f75){return _0x3f25ac(_0x409706,_0x182f75-0x17a);}function _0x4e6aae(_0x22ce5f,_0x38bcca){return _0x3f25ac(_0x38bcca,_0x22ce5f-0x4ae);}this['options']=_0x241917,this['viewerParameters']=_0x83f94f,this['particlesComputing']=new ParticlesComputing(this['context'],this['data'],this['options'],this['viewerParameters']),this['particlesRendering']=new ParticlesRendering(this[_0x4f8bf2(0x248,0x2d5)],this['data'],this['options'],this['viewerParameters'],this['particlesComputing']);}['canvasResize'](_0x3ffb95){function _0xa4827a(_0x361c43,_0x51cb2b){return _0x26960e(_0x51cb2b,_0x361c43- -0xa9);}this['particlesComputing'][_0x2d3fa4(0x22a,0x244)]();function _0x2d3fa4(_0x4b2123,_0x5d9266){return _0x26960e(_0x5d9266,_0x4b2123- -0x3af);}Object['keys'](this[_0xa4827a(0x4ca,0x4d4)][_0xa4827a(0x455,0x420)])['forEach'](_0x519e2f=>{this['particlesComputing']['windTextures'][_0x519e2f]['destroy']();}),this['particlesRendering']['textures'][_0x2d3fa4(0x1d6,0x144)]['destroy'](),Object['keys'](this[_0xa4827a(0x505,0x4e4)][_0x2d3fa4(0x21b,0x21b)])[_0x2d3fa4(0x16b,0x1fd)](_0x469916=>{function _0x21add3(_0x1901d7,_0x2c8aab){return _0xa4827a(_0x1901d7-0x7c,_0x2c8aab);}this[_0x21add3(0x581,0x5b0)]['framebuffers'][_0x469916]['destroy']();}),this[_0x2d3fa4(0x275,0x2a6)]=_0x3ffb95,this[_0xa4827a(0x4ca,0x44d)]=new ParticlesComputing(this[_0x2d3fa4(0x275,0x2e7)],this[_0x2d3fa4(0x22b,0x210)],this[_0xa4827a(0x4ec,0x529)],this[_0x2d3fa4(0x223,0x290)]),this[_0x2d3fa4(0x1ff,0x1e1)]=new ParticlesRendering(this['context'],this[_0xa4827a(0x531,0x521)],this['options'],this[_0x2d3fa4(0x223,0x2aa)],this['particlesComputing']);}['clearFramebuffers'](){function _0x1b0a95(_0x51825e,_0x4a5ced){return _0x26960e(_0x51825e,_0x4a5ced- -0x67e);}function _0x23bb8e(_0x70f6eb,_0x2057d0){return _0x26960e(_0x2057d0,_0x70f6eb- -0x9);}const _0x315b67=new Cesium$2[(_0x23bb8e(0x5d7,0x5ad))]({'color':new Cesium$2[(_0x1b0a95(-0x126,-0xed))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x1b0a95(-0x16c,-0x110)]['OPAQUE']});Object[_0x23bb8e(0x5b5,0x536)](this['particlesRendering']['framebuffers'])['forEach'](_0x3703a4=>{_0x315b67['framebuffer']=this[_0x4343d1(-0x7a,-0x8b)][_0x3b6d6d(-0x181,-0x1cc)][_0x3703a4];function _0x4343d1(_0x536fd7,_0x3e9b33){return _0x1b0a95(_0x536fd7,_0x3e9b33-0x45);}function _0x3b6d6d(_0x5d5368,_0x2bf8f2){return _0x1b0a95(_0x2bf8f2,_0x5d5368- -0xcd);}_0x315b67[_0x4343d1(-0x3d,-0x4e)](this['context']);});}[_0x3f25ac(0x45,0xad)](_0x364b6b,_0x5e8505=!![]){function _0x1a4b3e(_0x329f0d,_0x30c631){return _0x3f25ac(_0x329f0d,_0x30c631-0x3f3);}function _0x15cdbe(_0x25a136,_0x1d27a9){return _0x26960e(_0x1d27a9,_0x25a136- -0x17a);}_0x5e8505&&(this[_0x1a4b3e(0x516,0x509)](),this[_0x1a4b3e(0x500,0x49d)][_0x15cdbe(0x45f,0x408)](),this['particlesComputing']['createParticlesTextures'](this['context'],this[_0x15cdbe(0x41b,0x494)],this['viewerParameters']));if(_0x364b6b){var _0x2bfde0;const _0x233afa=this['particlesRendering']['createSegmentsGeometry'](this[_0x15cdbe(0x41b,0x392)]);this['particlesRendering']['primitives']['segments']['geometry']=_0x233afa;const _0x2e67a2=Cesium$2['VertexArray'][_0x1a4b3e(0x4a5,0x48d)]({'context':this['context'],'geometry':_0x233afa,'attributeLocations':this['particlesRendering'][_0x15cdbe(0x441,0x400)][_0x15cdbe(0x3e5,0x38e)]['attributeLocations'],'bufferUsage':Cesium$2[_0x1a4b3e(0x4c1,0x490)][_0x15cdbe(0x3d7,0x37d)]});(_0x2bfde0=this['particlesRendering'][_0x1a4b3e(0x52d,0x4e5)])!==null&&_0x2bfde0!==void 0x0&&(_0x2bfde0=_0x2bfde0['segments'])!==null&&_0x2bfde0!==void 0x0&&_0x2bfde0[_0x15cdbe(0x38d,0x326)]&&(this['particlesRendering'][_0x15cdbe(0x441,0x49b)]['segments']['commandToExecute']['vertexArray']=_0x2e67a2);}}['setOptions'](_0x168bb4){let _0x27dc69=![];function _0x32f65c(_0xcbcad2,_0x2cad75){return _0x26960e(_0xcbcad2,_0x2cad75- -0x1cc);}this['options'][_0x32f65c(0x364,0x39d)]!==_0x168bb4['maxParticles']&&(_0x27dc69=!![]);function _0x3850fc(_0x3cf1e2,_0x47eb82){return _0x3f25ac(_0x47eb82,_0x3cf1e2- -0x257);}Object[_0x32f65c(0x478,0x3f2)](_0x168bb4)[_0x32f65c(0x376,0x34e)](_0x2e1fc8=>{function _0x50a14e(_0x1e978a,_0x5b18a6){return _0x3850fc(_0x1e978a-0x342,_0x5b18a6);}this[_0x50a14e(0x1b7,0x16b)][_0x2e1fc8]=_0x168bb4[_0x2e1fc8];}),this['refreshParticles'](_0x27dc69,_0x168bb4['dynamic']);}['applyViewerParameters'](_0x4db9c7){function _0x3fce03(_0x124c65,_0x36579f){return _0x26960e(_0x124c65,_0x36579f- -0x2ea);}function _0x35bfe1(_0x407bb7,_0x5a02b3){return _0x26960e(_0x5a02b3,_0x407bb7- -0x356);}Object[_0x35bfe1(0x268,0x2b1)](_0x4db9c7)['forEach'](_0x4160df=>{this['viewerParameters'][_0x4160df]=_0x4db9c7[_0x4160df];}),this['refreshParticles'](![]),!this['options'][_0x3fce03(0x1c1,0x224)]&&(this[_0x3fce03(0x292,0x2ab)]['dynamic']=!![],this[_0x35bfe1(0x244,0x273)](this[_0x35bfe1(0x23f,0x268)]),setTimeout(()=>{this['options']['dynamic']=![];function _0x2a5412(_0x538fff,_0x4faaf8){return _0x35bfe1(_0x4faaf8-0x220,_0x538fff);}this[_0x2a5412(0x4b8,0x464)](this['options']);},0x1f4));}[_0x3f25ac(0x160,0x12e)](){clearTimeout(this['canrefresh']);function _0x3ade2d(_0x3023db,_0x14decb){return _0x26960e(_0x14decb,_0x3023db- -0x24a);}function _0x28305e(_0x3d617d,_0x5e3748){return _0x3f25ac(_0x3d617d,_0x5e3748-0x539);}this['particlesComputing']['destroyParticlesTextures'](),Object[_0x3ade2d(0x374,0x3dc)](this['particlesComputing']['windTextures'])[_0x3ade2d(0x2d0,0x30b)](_0x2bb5c6=>{function _0x804079(_0x1b1254,_0x566d58){return _0x28305e(_0x1b1254,_0x566d58- -0x56c);}function _0x20ecf8(_0xeb9ddc,_0x4fefd2){return _0x28305e(_0xeb9ddc,_0x4fefd2- -0x7e);}this[_0x804079(0x63,0x77)][_0x804079(0x50,0x2)][_0x2bb5c6]['destroy']();}),this['particlesRendering']['textures']['colorTable']['destroy'](),Object['keys'](this[_0x28305e(0x5ce,0x61e)]['framebuffers'])['forEach'](_0x7268cb=>{function _0x441c91(_0x68fcca,_0x4f9bdc){return _0x3ade2d(_0x4f9bdc- -0x1d9,_0x68fcca);}this['particlesRendering']['framebuffers'][_0x7268cb][_0x441c91(0x165,0x1d4)]();});for(const _0x111195 in this){delete this[_0x111195];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace[_0x3f25ac(0xfe,0x87)]['BaseLayer'];function _0x26960e(_0x3b906e,_0x223aa8){return _0x290a(_0x223aa8-0x36a,_0x3b906e);}const _0x55866e={};_0x55866e[_0x3f25ac(0x60,0x8c)]=0x1000,_0x55866e['fixedHeight']=0x0,_0x55866e['fadeOpacity']=0.996,_0x55866e[_0x3f25ac(0x137,0x105)]=0.003,_0x55866e[_0x26960e(0x563,0x5c8)]=0.01,_0x55866e['speedFactor']=0.5,_0x55866e[_0x26960e(0x56c,0x53b)]=0x2,_0x55866e['colors']=['rgb(206,255,255)'],_0x55866e['dynamic']=!![];const DEF_OPTIONS=_0x55866e;class WindLayer extends BaseLayer$1{constructor(_0x20fd19={}){function _0x1fca9b(_0x39487b,_0x4a96bc){return _0x3f25ac(_0x4a96bc,_0x39487b- -0x271);}_0x20fd19={...DEF_OPTIONS,..._0x20fd19},super(_0x20fd19),this[_0x1fca9b(-0x21a,-0x1ce)](_0x20fd19);}get['layer'](){return this['primitives'];}get[_0x26960e(0x549,0x5da)](){return this['_data'];}set['data'](_0x4d509d){function _0x2c68d4(_0x58a665,_0x18203b){return _0x3f25ac(_0x58a665,_0x18203b-0x208);}this[_0x2c68d4(0x2d2,0x323)](_0x4d509d);}get['colors'](){function _0xf6e443(_0x8b822a,_0x10b58b){return _0x3f25ac(_0x10b58b,_0x8b822a-0x42b);}function _0x4d9370(_0x5774da,_0x3740b3){return _0x3f25ac(_0x3740b3,_0x5774da-0xce);}return this[_0xf6e443(0x4f7,0x4ad)][_0xf6e443(0x547,0x5d8)];}set['colors'](_0x8d3137){this['options']['colors']=_0x8d3137;if(this[_0x1266c6(0x11e,0xbd)]){const _0x42998f={};_0x42998f[_0x3c9a4d(0x606,0x5c4)]=_0x8d3137,this['particleSystem']['setOptions'](_0x42998f);}function _0x1266c6(_0x22e3b3,_0x12e552){return _0x3f25ac(_0x22e3b3,_0x12e552-0x3d);}function _0x3c9a4d(_0x38c935,_0x2676f3){return _0x3f25ac(_0x38c935,_0x2676f3-0x4a8);}this['resize']();}[_0x3f25ac(0x194,0x112)](){}[_0x26960e(0x51e,0x5a4)](){this['scene']=this['_map'][_0x3050d5(0x354,0x2dc)],this['camera']=this[_0x32f17a(0x12e,0xe1)][_0x3050d5(0x273,0x304)],this['primitives']=new Cesium$1['PrimitiveCollection'](),this['_map']['scene'][_0x32f17a(0xf0,0xd4)]['add'](this['primitives']),this[_0x32f17a(0x107,0x184)]={'lonRange':new Cesium$1[(_0x32f17a(0x7f,0xda))](),'latRange':new Cesium$1[(_0x3050d5(0x348,0x30f))](),'pixelSize':0x0,'lonDisplayRange':new Cesium$1['Cartesian2'](),'latDisplayRange':new Cesium$1[(_0x32f17a(0x7f,0x1e))]()},this[_0x32f17a(0x112,0xb3)]=new Cesium$1['BoundingSphere'](Cesium$1['Cartesian3'][_0x32f17a(0x150,0x1c9)],Cesium$1['Ellipsoid']['WGS84'][_0x3050d5(0x2cb,0x345)]),this['updateViewerParameters'](),window['addEventListener']('resize',this['resize']['bind'](this),![]),this[_0x3050d5(0x2d2,0x2eb)]=![],this['mouse_move']=![],this[_0x32f17a(0x12e,0xe9)]['on'](mars3d__namespace[_0x32f17a(0xd8,0x102)][_0x32f17a(0xa0,0xba)],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x3050d5(0x2d3,0x2ec)],this[_0x3050d5(0x37f,0x3ce)],this),this['_map']['on'](mars3d__namespace[_0x32f17a(0xd8,0xfe)]['mouseUp'],this[_0x32f17a(0xee,0x13a)],this);function _0x32f17a(_0x3f3061,_0x7cd3be){return _0x26960e(_0x7cd3be,_0x3f3061- -0x4cb);}function _0x3050d5(_0x469c83,_0x4aeacc){return _0x26960e(_0x469c83,_0x4aeacc- -0x23b);}this[_0x3050d5(0x40f,0x3be)]['on'](mars3d__namespace['EventType'][_0x32f17a(0x128,0xb1)],this[_0x32f17a(0xad,0xf8)],this),this['_data']&&this['setData'](this['_data']);}[_0x26960e(0x565,0x541)](){window[_0x1bda3a(0x154,0x1be)](_0x1bda3a(0x1c2,0x1de),this[_0x50986d(-0x1a7,-0x141)]),this[_0x50986d(-0x154,-0xee)][_0x50986d(-0x135,-0x140)](mars3d__namespace['EventType'][_0x50986d(-0x250,-0x20a)],this['_onMap_preRenderEvent'],this),this[_0x50986d(-0x154,-0x13f)]['off'](mars3d__namespace['EventType'][_0x1bda3a(0x20d,0x1a3)],this['_onMapWhellEvent'],this);function _0x50986d(_0x2ccefb,_0x5b8cc2){return _0x3f25ac(_0x5b8cc2,_0x2ccefb- -0x284);}function _0x1bda3a(_0x1568e9,_0x183322){return _0x26960e(_0x1568e9,_0x183322- -0x3c8);}this['_map'][_0x50986d(-0x135,-0x14f)](mars3d__namespace['EventType']['mouseDown'],this[_0x50986d(-0x144,-0x1cd)],this),this['_map']['off'](mars3d__namespace['EventType'][_0x1bda3a(0x233,0x1e8)],this[_0x1bda3a(0x284,0x1f1)],this),this[_0x1bda3a(0x28c,0x231)][_0x1bda3a(0x211,0x250)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this[_0x1bda3a(0x235,0x1f3)]['removeAll'](),this[_0x50986d(-0x154,-0x1da)][_0x50986d(-0x236,-0x28e)][_0x50986d(-0x192,-0x15d)]['remove'](this['primitives']);}['resize'](){function _0x26da88(_0xab5fca,_0xa0eeae){return _0x26960e(_0xa0eeae,_0xab5fca- -0x23d);}if(!this['show']||!this['particleSystem'])return;this['primitives'][_0x1adfa7(0x31,0x96)]=![],this['primitives']['removeAll']();function _0x1adfa7(_0x47a542,_0x171598){return _0x26960e(_0x171598,_0x47a542- -0x5eb);}this['_map']['once'](mars3d__namespace[_0x26da88(0x366,0x30a)]['preRender'],this['_onMap_preRenderEvent'],this);}['_onMap_preRenderEvent'](_0x5dc7f1){this['particleSystem']['canvasResize'](this[_0x579ee7(0x42c,0x466)]['context']),this[_0x3e9214(0x35,0x14)]();function _0x3e9214(_0x539a25,_0x5f38c9){return _0x3f25ac(_0x5f38c9,_0x539a25- -0x11c);}function _0x579ee7(_0x375070,_0x33f6c8){return _0x26960e(_0x33f6c8,_0x375070- -0xeb);}this['primitives']['show']=!![];}['_onMapWhellEvent'](_0x1f1ddb){clearTimeout(this[_0x3048b5(-0x7d,-0x99)]);if(!this['show']||!this['particleSystem'])return;this['primitives']['show']=![];function _0x3048b5(_0x12bebb,_0x19fc5e){return _0x3f25ac(_0x19fc5e,_0x12bebb- -0x12f);}this['refreshTimer']=setTimeout(()=>{function _0x2bed11(_0x26e28d,_0x2c3974){return _0x3048b5(_0x2c3974-0x54e,_0x26e28d);}if(!this[_0x2bed11(0x5ff,0x572)])return;function _0x820053(_0x42f500,_0x14bf52){return _0x3048b5(_0x14bf52-0x550,_0x42f500);}this[_0x2bed11(0x50b,0x4b7)]();},0xc8);}['_onMouseDownEvent'](_0x59329c){function _0x222274(_0x2dacdc,_0x2db39a){return _0x3f25ac(_0x2db39a,_0x2dacdc-0x1b5);}this[_0x222274(0x212,0x228)]=!![];}['_onMouseMoveEvent'](_0x272035){if(!this['show']||!this[_0x59d86b(0x44f,0x4cc)])return;function _0x59d86b(_0x165953,_0x3977a8){return _0x3f25ac(_0x3977a8,_0x165953-0x3cf);}function _0x488215(_0x535546,_0xd04a50){return _0x3f25ac(_0xd04a50,_0x535546- -0x273);}this['mouse_down']&&(this['primitives']['show']=![],this[_0x59d86b(0x42f,0x3bb)]=!![]);}['_onMouseUpEvent'](_0x486a83){function _0x125b4d(_0x44ba5d,_0x101c20){return _0x26960e(_0x101c20,_0x44ba5d- -0x2b3);}if(!this[_0x125b4d(0x369,0x3c4)]||!this[_0x125b4d(0x296,0x323)])return;this[_0x125b4d(0x273,0x1df)]&&this['mouse_move']&&this['redraw']();this[_0x38c190(-0xff,-0xf0)]['show']=!![];function _0x38c190(_0x48ae90,_0x48f3e4){return _0x3f25ac(_0x48f3e4,_0x48ae90- -0x1f1);}this['mouse_down']=![],this['mouse_move']=![];}['redraw'](){if(!this['_map']||!this[_0x1cec81(0x537,0x558)])return;function _0x1cec81(_0x12de4e,_0x173588){return _0x26960e(_0x12de4e,_0x173588- -0xc4);}this[_0x39ce61(0x562,0x4e9)](),this[_0x1cec81(0x4d7,0x485)][_0x39ce61(0x47d,0x42e)](this[_0x39ce61(0x494,0x4d4)]);function _0x39ce61(_0x92b2ed,_0xf3168){return _0x26960e(_0x92b2ed,_0xf3168- -0xfe);}this['primitives'][_0x1cec81(0x5be,0x558)]=!![];}['setData'](_0x1cb276){this['_data']=_0x1cb276;this[_0x19b2d3(0x1a3,0x210)]&&this['particleSystem'][_0x388381(0x4dd,0x541)]();this[_0x388381(0x502,0x493)]=new ParticleSystem(this['scene']['context'],_0x1cb276,this[_0x388381(0x5e7,0x561)](),this['viewerParameters']);function _0x19b2d3(_0x331c7c,_0x59ded8){return _0x3f25ac(_0x59ded8,_0x331c7c-0x123);}function _0x388381(_0x243cab,_0x5a2413){return _0x3f25ac(_0x243cab,_0x5a2413-0x413);}this['addPrimitives']();}[_0x26960e(0x597,0x520)](_0x31ac30,_0x207bcc){function _0x17292b(_0x1a1338,_0x406b0b){return _0x3f25ac(_0x406b0b,_0x1a1338-0x493);}function _0x1311ca(_0x4fcfb,_0x25cd6d){return _0x3f25ac(_0x4fcfb,_0x25cd6d- -0xa);}if(_0x31ac30)for(const _0x2b96db in _0x31ac30){this[_0x2b96db]=_0x31ac30[_0x2b96db];}this[_0x1311ca(0xf4,0x76)]&&this[_0x1311ca(0x70,0x76)]['setOptions'](this['getOptions']());}['getOptions'](){const _0x550c2f=Math[_0x3c5432(0x3ac,0x3b2)](Math['sqrt'](this[_0x100583(0x354,0x2d0)]));this['particlesNumber']=_0x550c2f*_0x550c2f;function _0x3c5432(_0x31e221,_0x416f4c){return _0x26960e(_0x31e221,_0x416f4c- -0x1d9);}const _0x209d26={};_0x209d26['particlesTextureSize']=_0x550c2f,_0x209d26['maxParticles']=this['particlesNumber'],_0x209d26[_0x100583(0x311,0x360)]=this[_0x100583(0x335,0x360)],_0x209d26['particleHeight']=this['fixedHeight'];function _0x100583(_0x28e476,_0x2848fc){return _0x3f25ac(_0x28e476,_0x2848fc-0x244);}return _0x209d26[_0x3c5432(0x418,0x44d)]=this[_0x3c5432(0x3bc,0x44d)],_0x209d26['dropRate']=this['dropRate'],_0x209d26['dropRateBump']=this['dropRateBump'],_0x209d26[_0x3c5432(0x472,0x3ff)]=this[_0x3c5432(0x39b,0x3ff)],_0x209d26[_0x100583(0x289,0x2b6)]=this['lineWidth'],_0x209d26[_0x100583(0x2b8,0x289)]=this['dynamic'],_0x209d26;}[_0x26960e(0x6a0,0x61a)](){function _0x4ee106(_0x5d2a3e,_0x3928f1){return _0x26960e(_0x5d2a3e,_0x3928f1- -0x2b4);}this['primitives']['add'](this[_0x4ee106(0x215,0x295)]['particlesComputing'][_0x4ee106(0x37f,0x307)]['calculateSpeed']),this['primitives'][_0x18cb54(0x295,0x321)](this['particleSystem']['particlesComputing']['primitives']['updatePosition']),this[_0x18cb54(0x309,0x286)][_0x18cb54(0x295,0x255)](this['particleSystem'][_0x4ee106(0x31d,0x2bf)][_0x4ee106(0x2c2,0x307)]['postProcessingPosition']);function _0x18cb54(_0x2bed7c,_0x475219){return _0x3f25ac(_0x475219,_0x2bed7c-0x217);}this[_0x18cb54(0x309,0x2f5)]['add'](this[_0x18cb54(0x297,0x248)]['particlesRendering'][_0x4ee106(0x311,0x307)]['segments']),this[_0x4ee106(0x28f,0x307)]['add'](this['particleSystem']['particlesRendering']['primitives'][_0x4ee106(0x2e5,0x30f)]),this[_0x18cb54(0x309,0x2ad)][_0x18cb54(0x295,0x29d)](this['particleSystem'][_0x4ee106(0x2d1,0x2fa)]['primitives']['screen']);}['updateViewerParameters'](){let _0x42b4b8=this['camera'][_0x19ab49(0x169,0xf6)](this[_0x19ab49(0x6b,0x9d)][_0x2525a0(0x6,-0x2a)][_0x19ab49(0x116,0x13d)]);function _0x2525a0(_0x265735,_0x2d0807){return _0x3f25ac(_0x265735,_0x2d0807- -0x153);}if(!_0x42b4b8){const _0x24a2b3=this['_map'][_0x2525a0(0x2b,-0x2d)]();_0x42b4b8=Cesium$1[_0x19ab49(0x1e2,0x152)]['fromDegrees'](_0x24a2b3[_0x2525a0(-0x40,0x7)],_0x24a2b3[_0x19ab49(0x1f3,0x18a)],_0x24a2b3['xmax'],_0x24a2b3['ymax']);}const _0xbaf87a=Util['viewRectangleToLonLatRange'](_0x42b4b8);this['_data']?(this['viewerParameters'][_0x19ab49(0xda,0x137)]['x']=Math['max'](_0xbaf87a['lon'][_0x19ab49(0xe2,0xe4)],this['_data']['xmin']),this['viewerParameters'][_0x19ab49(0xc6,0x137)]['y']=Math[_0x19ab49(0x128,0xe4)](_0xbaf87a[_0x2525a0(-0xe7,-0x10d)]['max'],this[_0x19ab49(0xfd,0xe8)]['xmax']),this[_0x19ab49(0xc7,0x158)][_0x2525a0(-0xe1,-0x57)]['x']=Math['max'](_0xbaf87a[_0x2525a0(-0x88,-0x6a)][_0x2525a0(-0x13d,-0xbe)],this['_data'][_0x2525a0(0xd,-0x18)]),this[_0x19ab49(0x1cd,0x158)]['latRange']['y']=Math[_0x19ab49(0x74,0xe4)](_0xbaf87a['lat']['max'],this[_0x19ab49(0x133,0xe8)][_0x2525a0(-0xb9,-0x4c)])):(this[_0x2525a0(-0x7c,-0x4a)]['lonRange']['x']=_0xbaf87a[_0x19ab49(0x110,0x95)][_0x2525a0(-0xd8,-0xbe)],this['viewerParameters']['lonRange']['y']=_0xbaf87a[_0x19ab49(0x59,0x95)]['max'],this['viewerParameters']['latRange']['x']=_0xbaf87a['lat'][_0x2525a0(-0x10f,-0xbe)],this['viewerParameters'][_0x19ab49(0x1c2,0x14b)]['y']=_0xbaf87a['lat'][_0x19ab49(0x129,0xb8)]);let _0x17e885=this['camera']['getPixelSize'](this['globeBoundingSphere'],this[_0x19ab49(0xf4,0x9d)]['drawingBufferWidth'],this['scene']['drawingBufferHeight']);const _0x378ae2=this[_0x19ab49(0x121,0x9d)]['drawingBufferHeight']*0.3;_0x17e885<_0x378ae2&&(_0x17e885=_0x378ae2);function _0x19ab49(_0x4e9614,_0x426415){return _0x3f25ac(_0x4e9614,_0x426415-0x4f);}this['viewerParameters']['pixelSize']=_0x17e885;}}mars3d__namespace[_0x3f25ac(0x112,0x147)][_0x26960e(0x4f5,0x516)](_0x26960e(0x66f,0x611),WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null;function _0x1f0231(_0x3a0496,_0x2897c5){return _0x3f25ac(_0x2897c5,_0x3a0496- -0x1de);}this[_0x107aa0(0x510,0x4af)]=null,this[_0x1f0231(-0x150,-0xb7)]=null;function _0x107aa0(_0x38f1c1,_0x5759c7){return _0x26960e(_0x5759c7,_0x38f1c1- -0xa2);}this[_0x1f0231(-0x133,-0x12c)]=null,this[_0x1f0231(-0x15f,-0xd6)]=null,this['speed']=null;}[_0x26960e(0x567,0x5f7)](){for(const _0x84639 in this){delete this[_0x84639];}}}class CanvasWindField{constructor(_0x4b0d04){function _0x4d69dc(_0x41799f,_0x2015b7){return _0x3f25ac(_0x2015b7,_0x41799f-0x1e9);}this[_0x4d69dc(0x2ba,0x299)](_0x4b0d04);}get[_0x26960e(0x575,0x5c9)](){return this['_speedRate'];}set['speedRate'](_0x31ae29){function _0x5c49d0(_0x3fb1c6,_0x4030b2){return _0x3f25ac(_0x3fb1c6,_0x4030b2- -0xd0);}this['_speedRate']=(0x64-(_0x31ae29>0x63?0x63:_0x31ae29))*0x64;function _0x3b369c(_0x1d46a0,_0x5dc7eb){return _0x3f25ac(_0x5dc7eb,_0x1d46a0-0x1e8);}this['_calc_speedRate']=[(this['xmax']-this[_0x3b369c(0x342,0x37c)])/this['_speedRate'],(this['ymax']-this[_0x5c49d0(-0x26,0x6b)])/this['_speedRate']];}get[_0x26960e(0x5af,0x535)](){return this['_maxAge'];}set[_0x26960e(0x573,0x535)](_0x3db5ba){function _0x4d71e2(_0x4577d1,_0x253b2d){return _0x3f25ac(_0x253b2d,_0x4577d1-0x46d);}this[_0x4d71e2(0x521,0x513)]=_0x3db5ba;}['setOptions'](_0x17b806){this['options']=_0x17b806;function _0x679432(_0xdcd665,_0x1a5530){return _0x26960e(_0xdcd665,_0x1a5530- -0x31);}this['maxAge']=_0x17b806['maxAge']||0x78,this['speedRate']=_0x17b806[_0x679432(0x551,0x598)]||0x32;function _0x1cf33e(_0x4b3e35,_0x4f7a5b){return _0x3f25ac(_0x4b3e35,_0x4f7a5b-0x4be);}this['particles']=[];const _0x471966=_0x17b806[_0x679432(0x4e6,0x524)]||0x1000;for(let _0x1ed89d=0x0;_0x1ed89d<_0x471966;_0x1ed89d++){const _0x3fd9b5=this['_randomParticle'](new CanvasParticle());this[_0x679432(0x4ee,0x4d7)][_0x679432(0x550,0x541)](_0x3fd9b5);}}['setDate'](_0x2ac8c3){this[_0x57683c(0x639,0x5f4)]=_0x2ac8c3[_0x57683c(0x56f,0x5f4)],this[_0x31d530(0x5cb,0x596)]=_0x2ac8c3['cols'],this['xmin']=_0x2ac8c3['xmin'],this[_0x31d530(0x5da,0x61f)]=_0x2ac8c3['xmax'],this['ymin']=_0x2ac8c3['ymin'],this['ymax']=_0x2ac8c3['ymax'],this['grid']=[];const _0x4d8769=_0x2ac8c3['udata'],_0x2a7ba8=_0x2ac8c3[_0x31d530(0x517,0x554)];let _0x3e6e05=![];_0x4d8769[_0x31d530(0x4fc,0x463)]===this['rows']&&_0x4d8769[0x0]['length']===this[_0x31d530(0x5cb,0x5de)]&&(_0x3e6e05=!![]);let _0xca4d21=0x0;function _0x57683c(_0x30fc36,_0x21baff){return _0x3f25ac(_0x30fc36,_0x21baff-0x4af);}let _0x2eb691=null,_0x2890c1=null;function _0x31d530(_0x22e51f,_0x30a7fd){return _0x3f25ac(_0x30a7fd,_0x22e51f-0x491);}for(let _0x46a4ab=0x0;_0x46a4ab<this['rows'];_0x46a4ab++){_0x2eb691=[];for(let _0x2bfe79=0x0;_0x2bfe79<this['cols'];_0x2bfe79++,_0xca4d21++){_0x3e6e05?_0x2890c1=this[_0x31d530(0x5c8,0x634)](_0x4d8769[_0x46a4ab][_0x2bfe79],_0x2a7ba8[_0x46a4ab][_0x2bfe79]):_0x2890c1=this['_calcUV'](_0x4d8769[_0xca4d21],_0x2a7ba8[_0xca4d21]),_0x2eb691['push'](_0x2890c1);}this[_0x57683c(0x5ae,0x5e2)]['push'](_0x2eb691);}this['options']['reverseY']&&this['grid'][_0x31d530(0x589,0x565)]();}[_0x26960e(0x4d2,0x51d)](){function _0x2e0ad3(_0x325bb5,_0x4cd9a7){return _0x26960e(_0x4cd9a7,_0x325bb5- -0x257);}function _0x564347(_0x30df64,_0x4a50a5){return _0x26960e(_0x4a50a5,_0x30df64- -0x6ea);}delete this['rows'],delete this['cols'],delete this['xmin'],delete this['xmax'],delete this[_0x2e0ad3(0x3ad,0x330)],delete this[_0x2e0ad3(0x379,0x391)],delete this[_0x564347(-0xee,-0xc2)],delete this['particles'];}['toGridXY'](_0x3ef56c,_0x4714c2){const _0x1d33e8=(_0x3ef56c-this['xmin'])/(this[_0x2460a1(0x257,0x26f)]-this['xmin'])*(this['cols']-0x1);function _0x2460a1(_0x10b166,_0x525bf7){return _0x26960e(_0x525bf7,_0x10b166- -0x3bb);}const _0x2f624b=(this['ymax']-_0x4714c2)/(this['ymax']-this['ymin'])*(this['rows']-0x1);return[_0x1d33e8,_0x2f624b];}[_0x26960e(0x5a6,0x5f0)](_0xa46ce8,_0x433fdb){if(_0xa46ce8<0x0||_0xa46ce8>=this['cols']||_0x433fdb>=this[_0x52f9b8(0x1fb,0x269)])return[0x0,0x0,0x0];const _0x149e31=Math['floor'](_0xa46ce8),_0x26c6d8=Math['floor'](_0x433fdb);if(_0x149e31===_0xa46ce8&&_0x26c6d8===_0x433fdb)return this['grid'][_0x433fdb][_0xa46ce8];const _0x4fb94d=_0x149e31+0x1,_0x43c158=_0x26c6d8+0x1;function _0x2c2d52(_0xe87c8b,_0x1e08c6){return _0x3f25ac(_0xe87c8b,_0x1e08c6-0x3e6);}const _0x276f6c=this['getUVByXY'](_0x149e31,_0x26c6d8),_0x2f62e7=this[_0x2c2d52(0x584,0x50d)](_0x4fb94d,_0x26c6d8);function _0x52f9b8(_0x1359ec,_0x1bbcce){return _0x26960e(_0x1359ec,_0x1bbcce- -0x3a5);}const _0x284a12=this[_0x2c2d52(0x50c,0x50d)](_0x149e31,_0x43c158),_0x1353cb=this['getUVByXY'](_0x4fb94d,_0x43c158);let _0x42a1ab=null;try{_0x42a1ab=this[_0x52f9b8(0x2e2,0x263)](_0xa46ce8-_0x149e31,_0x433fdb-_0x26c6d8,_0x276f6c,_0x2f62e7,_0x284a12,_0x1353cb);}catch(_0x5187ae){console[_0x52f9b8(0x2d4,0x25d)](_0xa46ce8,_0x433fdb);}return _0x42a1ab;}['_bilinearInterpolation'](_0x13cae1,_0x23e2c4,_0x9755bd,_0x24f52c,_0x29d196,_0x27379b){const _0x407e35=0x1-_0x13cae1,_0x470b65=0x1-_0x23e2c4;function _0x27b560(_0x3bffe4,_0x389d7a){return _0x26960e(_0x389d7a,_0x3bffe4- -0x25e);}const _0x14984a=_0x407e35*_0x470b65,_0x3fe30f=_0x13cae1*_0x470b65,_0x214b26=_0x407e35*_0x23e2c4,_0x1e3ce0=_0x13cae1*_0x23e2c4,_0x2f9976=_0x9755bd[0x0]*_0x14984a+_0x24f52c[0x0]*_0x3fe30f+_0x29d196[0x0]*_0x214b26+_0x27379b[0x0]*_0x1e3ce0,_0x2cae9d=_0x9755bd[0x1]*_0x14984a+_0x24f52c[0x1]*_0x3fe30f+_0x29d196[0x1]*_0x214b26+_0x27379b[0x1]*_0x1e3ce0;return this[_0x27b560(0x3a2,0x3bc)](_0x2f9976,_0x2cae9d);}['_calcUV'](_0x51b04e,_0x5dbc27){return[+_0x51b04e,+_0x5dbc27,Math['sqrt'](_0x51b04e*_0x51b04e+_0x5dbc27*_0x5dbc27)];}['getUVByPoint'](_0x261e08,_0x2ad436){if(!this['isInExtent'](_0x261e08,_0x2ad436))return null;const _0x457fd2=this['toGridXY'](_0x261e08,_0x2ad436),_0x3ca85f=this['getUVByXY'](_0x457fd2[0x0],_0x457fd2[0x1]);return _0x3ca85f;}[_0x26960e(0x559,0x584)](_0x5b1fb1,_0x4ad1ff){return _0x5b1fb1>=this['xmin']&&_0x5b1fb1<=this['xmax']&&_0x4ad1ff>=this['ymin']&&_0x4ad1ff<=this['ymax']?!![]:![];}[_0x26960e(0x598,0x536)](){const _0xd70479=fRandomByfloat(this['xmin'],this[_0x3564d5(0x39b,0x317)]),_0x4ca506=fRandomByfloat(this['ymin'],this['ymax']);function _0x3564d5(_0x1c5744,_0x3c897a){return _0x26960e(_0x3c897a,_0x1c5744- -0x277);}const _0x57358e={};function _0x473c08(_0xe77614,_0x10c5d3){return _0x3f25ac(_0xe77614,_0x10c5d3-0xc2);}return _0x57358e[_0x473c08(0x152,0x1ab)]=_0x4ca506,_0x57358e['lng']=_0xd70479,_0x57358e;}[_0x3f25ac(0x148,0xeb)](){let _0x650313,_0x71594b,_0x4c04ae;function _0x2bfb5c(_0x44ad2a,_0x4de354){return _0x26960e(_0x4de354,_0x44ad2a- -0x612);}function _0x1fe765(_0x2b0e2d,_0x3ac571){return _0x3f25ac(_0x3ac571,_0x2b0e2d-0x201);}for(let _0x4b35b6=0x0,_0x22924c=this['particles']['length'];_0x4b35b6<_0x22924c;_0x4b35b6++){let _0x119d90=this[_0x2bfb5c(-0x10a,-0x18b)][_0x4b35b6];_0x119d90[_0x2bfb5c(-0xca,-0xc4)]<=0x0&&(_0x119d90=this[_0x1fe765(0x2d8,0x280)](_0x119d90));if(_0x119d90[_0x1fe765(0x280,0x238)]>0x0){const _0x5e5741=_0x119d90[_0x2bfb5c(-0xbb,-0x43)],_0x509b7c=_0x119d90['tlat'];_0x4c04ae=this[_0x1fe765(0x260,0x1c7)](_0x5e5741,_0x509b7c),_0x4c04ae?(_0x650313=_0x5e5741+this[_0x1fe765(0x357,0x325)][0x0]*_0x4c04ae[0x0],_0x71594b=_0x509b7c+this['_calc_speedRate'][0x1]*_0x4c04ae[0x1],_0x119d90['lng']=_0x5e5741,_0x119d90[_0x2bfb5c(-0x60,-0x52)]=_0x509b7c,_0x119d90['tlng']=_0x650313,_0x119d90['tlat']=_0x71594b,_0x119d90[_0x1fe765(0x361,0x31a)]=_0x4c04ae[0x2],_0x119d90[_0x2bfb5c(-0xca,-0x59)]--):_0x119d90['age']=0x0;}}return this[_0x2bfb5c(-0x10a,-0x111)];}['_randomParticle'](_0x3b5e3f){let _0x31b5fd,_0x55ed8b;for(let _0x3deddb=0x0;_0x3deddb<0x1e;_0x3deddb++){_0x31b5fd=this['getRandomLatLng'](),_0x55ed8b=this['getUVByPoint'](_0x31b5fd['lng'],_0x31b5fd['lat']);if(_0x55ed8b&&_0x55ed8b[0x2]>0x0)break;}if(!_0x55ed8b)return _0x3b5e3f;const _0x883c55=_0x31b5fd['lng']+this['_calc_speedRate'][0x0]*_0x55ed8b[0x0],_0x517da2=_0x31b5fd['lat']+this['_calc_speedRate'][0x1]*_0x55ed8b[0x1];_0x3b5e3f['lng']=_0x31b5fd[_0x46ea0b(0x3aa,0x3a4)],_0x3b5e3f[_0x51411a(0x176,0x16e)]=_0x31b5fd[_0x46ea0b(0x435,0x455)];function _0x51411a(_0x4d1fcf,_0x46c378){return _0x3f25ac(_0x4d1fcf,_0x46c378-0x85);}_0x3b5e3f['tlng']=_0x883c55,_0x3b5e3f[_0x51411a(0x11e,0x130)]=_0x517da2;function _0x46ea0b(_0x1c3945,_0x4dbe49){return _0x3f25ac(_0x1c3945,_0x4dbe49-0x36c);}return _0x3b5e3f['age']=Math[_0x46ea0b(0x382,0x3dd)](Math['random']()*this['maxAge']),_0x3b5e3f[_0x46ea0b(0x450,0x4cc)]=_0x55ed8b[0x2],_0x3b5e3f;}[_0x3f25ac(0x101,0x12e)](){for(const _0x50408d in this){delete this[_0x50408d];}}}function fRandomByfloat(_0x41868f,_0x4609f8){return _0x41868f+Math['random']()*(_0x4609f8-_0x41868f);}const Cesium=mars3d__namespace[_0x3f25ac(-0x10,0x47)],BaseLayer=mars3d__namespace['layer'][_0x3f25ac(0x32,0xcb)];class CanvasWindLayer extends BaseLayer{constructor(_0x52c89d={}){super(_0x52c89d),this['_setOptionsHook'](_0x52c89d);function _0xd7ef75(_0xd7ab1d,_0x5c4442){return _0x3f25ac(_0x5c4442,_0xd7ab1d-0x267);}this[_0x1fabc8(0x3af,0x374)]=null;function _0x1fabc8(_0x28e5cb,_0x47459b){return _0x3f25ac(_0x28e5cb,_0x47459b-0x279);}_0x52c89d['colors']&&_0x52c89d['steps']&&(this[_0x1fabc8(0x354,0x34f)]=new mars3d__namespace[(_0x1fabc8(0x404,0x393))](_0x52c89d));}['_setOptionsHook'](_0x689340,_0x4f1482){this[_0x1f33c8(0x290,0x2f4)]=0x3e8/(_0x689340['frameRate']||0xa),this['_pointerEvents']=this['options']['pointerEvents']??![];function _0x1f33c8(_0x1e58d0,_0x1f5acd){return _0x26960e(_0x1e58d0,_0x1f5acd- -0x268);}this[_0x1f33c8(0x3e6,0x397)]=_0x689340[_0x1f33c8(0x41b,0x397)]||_0x3a85a7(0x3b1,0x374),this['lineWidth']=_0x689340['lineWidth']||0x1,this[_0x1f33c8(0x2f2,0x29e)]=_0x689340[_0x1f33c8(0x2ba,0x29e)]??0x0;function _0x3a85a7(_0x4636f8,_0x17366a){return _0x26960e(_0x17366a,_0x4636f8- -0x277);}this[_0x3a85a7(0x38a,0x2f9)]=_0x689340[_0x1f33c8(0x3f0,0x399)]??![],this[_0x1f33c8(0x224,0x2a3)]&&this['windField']['setOptions'](_0x689340);}get['layer'](){return this['canvas'];}get['canvasWidth'](){function _0xd41d39(_0x43284e,_0x447292){return _0x26960e(_0x447292,_0x43284e- -0x27);}return this['_map']['scene'][_0xd41d39(0x59d,0x587)]['clientWidth'];}get['canvasHeight'](){function _0x30da5c(_0x49a9a6,_0x5ec0b5){return _0x26960e(_0x49a9a6,_0x5ec0b5- -0x38b);}return this['_map']['scene']['canvas'][_0x30da5c(0xee,0x182)];}get['pointerEvents'](){function _0x6b4f90(_0x421c42,_0x1d8a6a){return _0x3f25ac(_0x421c42,_0x1d8a6a-0x4a);}return this[_0x6b4f90(0x9c,0x108)];}set['pointerEvents'](_0x4b479c){this[_0x198dab(0x428,0x423)]=_0x4b479c;function _0x1d0b55(_0x4cbdd4,_0x3a65ee){return _0x3f25ac(_0x4cbdd4,_0x3a65ee-0x194);}function _0x198dab(_0x5142bd,_0x24b4da){return _0x26960e(_0x24b4da,_0x5142bd- -0x15f);}if(!this[_0x1d0b55(0x221,0x28f)])return;_0x4b479c?this['canvas'][_0x198dab(0x39c,0x434)]['pointer-events']='all':this[_0x198dab(0x465,0x4a6)][_0x1d0b55(0x160,0x1c6)][_0x198dab(0x468,0x3fb)]='none';}get[_0x3f25ac(0xfb,0x8c)](){function _0x5eb6aa(_0xfdafc0,_0x33ac14){return _0x3f25ac(_0xfdafc0,_0x33ac14- -0x13e);}return this[_0x5eb6aa(-0xe6,-0x72)]['particlesNumber'];}set['particlesNumber'](_0x219b4f){function _0x56b907(_0x5cd9d5,_0x18c01b){return _0x3f25ac(_0x5cd9d5,_0x18c01b-0x12e);}this[_0x56b907(0x220,0x1fa)]['particlesNumber']=_0x219b4f,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{function _0x4ef50c(_0x307ced,_0x27fdae){return _0x56b907(_0x307ced,_0x27fdae-0x165);}this[_0x4ef50c(0x2d5,0x32b)]();},0x1f4);}get['speedRate'](){function _0x514170(_0x20d2a1,_0x226cf7){return _0x26960e(_0x20d2a1,_0x226cf7- -0x30f);}return this['options'][_0x514170(0x23f,0x2ba)];}set['speedRate'](_0x5a9934){this['options'][_0x5bbd81(0x368,0x32b)]=_0x5a9934;function _0x5ea626(_0x3b8e6a,_0x316fa4){return _0x3f25ac(_0x3b8e6a,_0x316fa4- -0x278);}function _0x5bbd81(_0x50899c,_0x179f96){return _0x3f25ac(_0x50899c,_0x179f96-0x22b);}this[_0x5bbd81(0x22e,0x26d)]&&(this[_0x5ea626(-0x24a,-0x236)][_0x5bbd81(0x317,0x32b)]=_0x5a9934);}get[_0x3f25ac(0xe7,0x6c)](){function _0x1c942b(_0x204fcd,_0x4344eb){return _0x26960e(_0x4344eb,_0x204fcd- -0x52f);}return this['options'][_0x1c942b(0x6,-0x62)];}set['maxAge'](_0x1397c1){this[_0x358983(0x72,0xe7)][_0x358983(0x85,0x87)]=_0x1397c1;function _0x358983(_0x11c721,_0x310949){return _0x26960e(_0x11c721,_0x310949- -0x4ae);}function _0x3aaa2f(_0xb38bb1,_0x11378d){return _0x3f25ac(_0x11378d,_0xb38bb1-0x517);}this['windField']&&(this['windField']['maxAge']=_0x1397c1);}get[_0x3f25ac(0x151,0x111)](){function _0x15ba88(_0x2eef00,_0x312b1e){return _0x26960e(_0x312b1e,_0x2eef00- -0x322);}return this[_0x15ba88(0x2cc,0x33e)];}set[_0x26960e(0x5d8,0x5da)](_0x2238fb){function _0x2ed98e(_0x16eba3,_0x1dfedb){return _0x26960e(_0x1dfedb,_0x16eba3- -0x456);}this[_0x2ed98e(0x18e,0x12a)](_0x2238fb);}get[_0x3f25ac(0x69,0x8b)](){function _0x40ad1b(_0x394705,_0xde84d7){return _0x3f25ac(_0x394705,_0xde84d7- -0x14c);}function _0x44eedc(_0x2e5212,_0x6eb955){return _0x3f25ac(_0x6eb955,_0x2e5212-0x6b);}let _0x22a867=this['windData']['xmin'],_0x57ce87=this[_0x44eedc(0x190,0x195)][_0x44eedc(0x1b4,0x1fe)],_0x41e8eb=this['windData']['ymin'],_0x5c4d24=this['windData'][_0x40ad1b(-0xa6,-0x45)];return _0x57ce87>=0x167&&_0x22a867===0x0&&(_0x22a867=-0xb4,_0x57ce87=0xb4),_0x22a867=Math[_0x44eedc(0xd4,0x72)](_0x22a867,-0xb4),_0x57ce87=Math[_0x40ad1b(-0x6a,-0xb7)](_0x57ce87,0xb4),_0x41e8eb=Math['max'](_0x41e8eb,-0x5a),_0x5c4d24=Math['min'](_0x5c4d24,0x5a),Cesium[_0x40ad1b(-0x87,-0x49)][_0x40ad1b(-0x8c,-0x1)](_0x22a867,_0x41e8eb,_0x57ce87,_0x5c4d24);}['_showHook'](_0x3f8503){function _0x585215(_0x1e00c5,_0x2e7b5d){return _0x3f25ac(_0x2e7b5d,_0x1e00c5- -0x27e);}function _0x473d46(_0x2e3483,_0xa00e9b){return _0x26960e(_0xa00e9b,_0x2e3483- -0x37a);}_0x3f8503?this['_addedHook']():(this['windData']&&(this['options'][_0x585215(-0x16d,-0x16d)]=this[_0x473d46(0x274,0x2b4)]),this['_removedHook']());}['_mountedHook'](){function _0x39ccb0(_0x4b959d,_0x19cfcf){return _0x3f25ac(_0x19cfcf,_0x4b959d-0x26);}function _0x1d74d6(_0x4cdf9e,_0x5a33e2){return _0x3f25ac(_0x5a33e2,_0x4cdf9e- -0x1cf);}this[_0x39ccb0(0xf2,0x67)][_0x1d74d6(-0x129,-0x193)]?this['initWorker']():this[_0x1d74d6(-0x18d,-0x1ac)]=new CanvasWindField(this[_0x39ccb0(0xf2,0xd6)]);}['_addedHook'](){function _0x532991(_0x492160,_0x45e727){return _0x3f25ac(_0x45e727,_0x492160-0x380);}this[_0x15de69(0x54b,0x51a)]=this['_createCanvas']();function _0x15de69(_0x36ef31,_0x15e3d3){return _0x3f25ac(_0x15e3d3,_0x36ef31-0x450);}const _0x348f95={};_0x348f95[_0x532991(0x443,0x49a)]=!![],this['canvasContext']=this[_0x532991(0x47b,0x4f5)]['getContext']('2d',_0x348f95),this[_0x532991(0x403,0x472)](),this['options']['data']&&this['setData'](this['options']['data']);}['_removedHook'](){function _0x59350f(_0x10ef5,_0x365290){return _0x26960e(_0x365290,_0x10ef5- -0x48b);}this[_0x59350f(0x92,0x42)](),this['unbindEvent']();function _0x4b326f(_0x4b494d,_0x2a705f){return _0x26960e(_0x4b494d,_0x2a705f- -0x1ba);}this['canvas']&&(this['_map'][_0x59350f(0xbb,0x7a)][_0x59350f(0x71,0x3)](this['canvas']),delete this['canvas']);}['_createCanvas'](){const _0x2db96b=mars3d__namespace[_0x1022f2(0x2f6,0x29e)][_0x1022f2(0x30f,0x2e4)]('canvas',_0x1022f2(0x20d,0x1f3),this['_map'][_0x1022f2(0x25a,0x2dd)]);_0x2db96b['style'][_0x1022f2(0x308,0x2fe)]='absolute';function _0x4c0860(_0x62925c,_0x43e9b7){return _0x3f25ac(_0x43e9b7,_0x62925c-0x335);}_0x2db96b['style'][_0x1022f2(0x218,0x266)]='0px',_0x2db96b['style'][_0x4c0860(0x39f,0x30e)]='0px',_0x2db96b['style']['width']=this['_map']['scene'][_0x1022f2(0x2d8,0x2a4)]['clientWidth']+'px',_0x2db96b['style'][_0x1022f2(0x2a7,0x2a3)]=this['_map']['scene']['canvas'][_0x4c0860(0x379,0x403)]+'px',_0x2db96b[_0x4c0860(0x367,0x35f)]['pointerEvents']=this[_0x1022f2(0x29b,0x326)]?'auto':_0x1022f2(0x22c,0x1e4);function _0x1022f2(_0x97685e,_0x3afa35){return _0x26960e(_0x3afa35,_0x97685e- -0x2ec);}return _0x2db96b[_0x1022f2(0x20f,0x1d0)]['zIndex']=this[_0x1022f2(0x2a9,0x289)][_0x1022f2(0x217,0x1f3)]??0x9,_0x2db96b[_0x4c0860(0x3d8,0x38a)]=this['_map'][_0x1022f2(0x22b,0x196)][_0x4c0860(0x430,0x3ba)][_0x1022f2(0x26a,0x27b)],_0x2db96b[_0x1022f2(0x2a7,0x275)]=this['_map'][_0x4c0860(0x383,0x35b)][_0x1022f2(0x2d8,0x2d8)]['clientHeight'],_0x2db96b;}['resize'](){function _0x205850(_0x278302,_0x1cfff2){return _0x26960e(_0x1cfff2,_0x278302- -0x3e6);}function _0x2cbb06(_0x1e3ee8,_0x313b56){return _0x3f25ac(_0x313b56,_0x1e3ee8-0x68);}this['canvas']&&(this['canvas']['style']['width']=this[_0x2cbb06(0x198,0x1ef)]['scene']['canvas']['clientWidth']+'px',this[_0x205850(0x1de,0x20d)][_0x205850(0x115,0xd5)]['height']=this[_0x205850(0x213,0x1e6)][_0x205850(0x131,0xe2)]['canvas'][_0x2cbb06(0xac,0x81)]+'px',this[_0x205850(0x1de,0x1ac)]['width']=this['_map']['scene'][_0x2cbb06(0x163,0xd2)]['clientWidth'],this[_0x205850(0x1de,0x1bb)]['height']=this[_0x2cbb06(0x198,0x142)]['scene']['canvas']['clientHeight']);}['bindEvent'](){const _0x28d639=this;let _0x3d9ab0=Date['now']();(function _0x21c76a(){if(_0x28d639['isDestroy'])return;_0x28d639['_animateFrame']=window['requestAnimationFrame'](_0x21c76a);function _0x6d6c34(_0x15234d,_0x2d89d4){return _0x290a(_0x2d89d4- -0x29,_0x15234d);}function _0x20f648(_0x3efd72,_0x3f39cc){return _0x290a(_0x3efd72- -0x40,_0x3f39cc);}if(_0x28d639[_0x6d6c34(0x30c,0x289)]&&_0x28d639['windField']){const _0x76fb23=Date[_0x6d6c34(0x269,0x220)](),_0x4e067c=_0x76fb23-_0x3d9ab0;_0x4e067c>_0x28d639['frameTime']&&(_0x3d9ab0=_0x76fb23-_0x4e067c%_0x28d639['frameTime'],_0x28d639[_0x6d6c34(0x21c,0x23e)]());}}(),window[_0x2b2369(0x16c,0x128)](_0x2b2369(0x15d,0xcb),this['resize'][_0x4e4239(0x4ac,0x52f)](this),![]),this['mouse_down']=![]);function _0x4e4239(_0x82546a,_0x2a1b91){return _0x3f25ac(_0x2a1b91,_0x82546a-0x418);}function _0x2b2369(_0x23e84e,_0x582f21){return _0x3f25ac(_0x582f21,_0x23e84e-0x80);}this[_0x4e4239(0x478,0x4a5)]=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x2b2369(0x1b0,0x161)]['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace[_0x2b2369(0x15a,0x1a5)]['mouseUp'],this[_0x4e4239(0x508,0x493)],this));}['unbindEvent'](){window['cancelAnimationFrame'](this[_0x1b9c2f(0x4a8,0x4fd)]);function _0x1b9c2f(_0x3bbe0b,_0x430d34){return _0x3f25ac(_0x430d34,_0x3bbe0b-0x379);}function _0x4aaef0(_0x1b3487,_0x170a1d){return _0x3f25ac(_0x1b3487,_0x170a1d-0x301);}delete this[_0x4aaef0(0x430,0x430)],window['removeEventListener'](_0x1b9c2f(0x456,0x4c7),this['resize']),this['options'][_0x1b9c2f(0x496,0x4d0)]&&(this['_map']['off'](mars3d__namespace[_0x4aaef0(0x46b,0x3db)]['wheel'],this[_0x4aaef0(0x461,0x42d)],this),this['_map'][_0x4aaef0(0x442,0x450)](mars3d__namespace[_0x4aaef0(0x463,0x3db)][_0x4aaef0(0x3ba,0x35f)],this[_0x4aaef0(0x432,0x441)],this),this['_map']['off'](mars3d__namespace['EventType'][_0x4aaef0(0x41b,0x3e8)],this['_onMouseUpEvent'],this),this[_0x1b9c2f(0x4a9,0x482)]['off'](mars3d__namespace[_0x4aaef0(0x357,0x3db)]['mouseMove'],this[_0x1b9c2f(0x428,0x440)],this));}['_onMapWhellEvent'](_0x197d11){clearTimeout(this['refreshTimer']);if(!this['show']||!this['canvas'])return;function _0x17f275(_0x5dac1d,_0x4e0893){return _0x3f25ac(_0x5dac1d,_0x4e0893-0x11a);}this['canvas']['style']['visibility']=_0x17f275(0x25e,0x257),this['refreshTimer']=setTimeout(()=>{if(!this[_0x5b425e(0x35d,0x39e)])return;function _0x5b425e(_0x1c6336,_0x33bdd6){return _0x17f275(_0x33bdd6,_0x1c6336-0xf0);}function _0x246137(_0x2ef822,_0x49da21){return _0x17f275(_0x49da21,_0x2ef822- -0x2f4);}this[_0x246137(-0x142,-0x132)](),this[_0x5b425e(0x305,0x2ad)]['style']['visibility']='visible';},0xc8);}['_onMouseDownEvent'](_0x2410ac){function _0x5770d1(_0x367f9e,_0x125fe1){return _0x26960e(_0x125fe1,_0x367f9e- -0x427);}function _0x132a33(_0x290a10,_0x43875e){return _0x3f25ac(_0x43875e,_0x290a10-0x231);}this['mouse_down']=!![],this[_0x132a33(0x361,0x315)]['off'](mars3d__namespace['EventType'][_0x132a33(0x35b,0x2c1)],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x132a33(0x35b,0x3a1)],this['_onMouseMoveEvent'],this);}[_0x26960e(0x5c6,0x578)](_0x33794b){function _0x418c1e(_0x5ce4b3,_0x2d6498){return _0x3f25ac(_0x2d6498,_0x5ce4b3-0x19e);}if(!this[_0x418c1e(0x2f1,0x349)]||!this['canvas'])return;function _0x2d2541(_0x2b47d1,_0x4af083){return _0x3f25ac(_0x2b47d1,_0x4af083- -0x12f);}this['mouse_down']&&(this['canvas']['style'][_0x2d2541(-0x16f,-0xec)]='hidden',this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x4603a2){if(!this['show']||!this['canvas'])return;this['_map']['off'](mars3d__namespace[_0x378d1a(0x2d,0xae)]['mouseMove'],this[_0x378d1a(0x2,0x86)],this);this['mouse_down']&&this[_0x378d1a(-0x4d,-0x1b)]&&this[_0x378d1a(-0x15,-0x2c)]();function _0x378d1a(_0x3ad2ab,_0x4be53f){return _0x3f25ac(_0x4be53f,_0x3ad2ab- -0xad);}this['canvas'][_0x378d1a(-0x7b,-0xdc)]['visibility']='visible';function _0x3da383(_0x47d626,_0x21e534){return _0x26960e(_0x47d626,_0x21e534- -0x6e0);}this[_0x3da383(-0x1c4,-0x1ba)]=![],this[_0x3da383(-0x143,-0x1b7)]=![];}['setData'](_0x5436dc){function _0x32ed72(_0xefdf87,_0x2d024d){return _0x3f25ac(_0x2d024d,_0xefdf87- -0x1a2);}this[_0x2ca851(0x470,0x4ee)](),this['windData']=_0x5436dc,this['windField'][_0x32ed72(-0x4a,0x46)](_0x5436dc);function _0x2ca851(_0x52cc43,_0x21e5b6){return _0x26960e(_0x52cc43,_0x21e5b6- -0x2f);}this['redraw']();}['redraw'](){function _0x290ef6(_0xc3a4a0,_0x357b81){return _0x3f25ac(_0x357b81,_0xc3a4a0-0x1ac);}function _0xb97d66(_0x5e6ead,_0x2fbf1b){return _0x26960e(_0x5e6ead,_0x2fbf1b- -0x447);}if(!this['show'])return;this[_0x290ef6(0x1ee,0x19f)]['setOptions'](this[_0x290ef6(0x278,0x20c)]),this['update']();}['update'](){if(this['_updateIng'])return;function _0x489250(_0x358053,_0x48f923){return _0x3f25ac(_0x358053,_0x48f923-0x320);}this['_updateIng']=!![];if(this['worker'])this['windField']['update']();else{const _0x16effd=this[_0x489250(0x2ed,0x362)]['getParticles']();this['_drawLines'](_0x16effd);}this['_updateIng']=![];}['_drawLines'](_0x2db245){this[_0x9b5085(0x617,0x61f)]=_0x2db245,this['canvasContext']['globalCompositeOperation']=_0x9b5085(0x5a1,0x623),this[_0x9b5085(0x5b5,0x591)]['fillRect'](0x0,0x0,this[_0x4a63db(0x427,0x3a5)],this['canvasHeight']),this[_0x4a63db(0x3ff,0x40b)]['globalCompositeOperation']='lighter';function _0x9b5085(_0x5127b1,_0x490b04){return _0x26960e(_0x5127b1,_0x490b04-0x18);}function _0x4a63db(_0x12559d,_0xbd4037){return _0x26960e(_0x12559d,_0xbd4037- -0x16e);}this['canvasContext'][_0x4a63db(0x3bd,0x39b)]=0.9;const _0x261966=this['_map'][_0x9b5085(0x59b,0x52f)][_0x9b5085(0x5ca,0x625)]!==Cesium[_0x9b5085(0x633,0x5a0)][_0x4a63db(0x48c,0x4bc)],_0xe103f6=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x4facd1=0x0,_0x2582f9=_0x2db245['length'];_0x4facd1<_0x2582f9;_0x4facd1++){const _0x3252fb=_0x2db245[_0x4facd1],_0x327b44=this['_tomap'](_0x3252fb,_0x3252fb['lng'],_0x3252fb['lat'],_0x3252fb['alt']),_0x2e6d95=this['_tomap'](_0x3252fb,_0x3252fb['tlng'],_0x3252fb[_0x9b5085(0x5f8,0x58c)],_0x3252fb[_0x9b5085(0x5d0,0x612)]);if(!_0x327b44||!_0x2e6d95)continue;if(_0x261966&&Math['abs'](_0x327b44[0x0]-_0x2e6d95[0x0])>=_0xe103f6)continue;this[_0x4a63db(0x46a,0x40b)]['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x4a63db(0x471,0x431)][_0x9b5085(0x528,0x522)](_0x3252fb[_0x4a63db(0x46c,0x4bb)]),this['canvasContext']['moveTo'](_0x327b44[0x0],_0x327b44[0x1]),this['canvasContext']['lineTo'](_0x2e6d95[0x0],_0x2e6d95[0x1]),this[_0x4a63db(0x43d,0x40b)]['stroke']();}else{this[_0x4a63db(0x3bb,0x40b)][_0x4a63db(0x4d5,0x4b9)](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x9b5085(0x5b9,0x591)][_0x4a63db(0x3f8,0x3d4)]=this['color'];for(let _0x308337=0x0,_0x5d917f=_0x2db245['length'];_0x308337<_0x5d917f;_0x308337++){const _0x57ac2c=_0x2db245[_0x308337],_0x5a8ae4=this[_0x4a63db(0x484,0x46e)](_0x57ac2c,_0x57ac2c['lng'],_0x57ac2c[_0x4a63db(0x3c8,0x444)],_0x57ac2c['alt']),_0x43adda=this['_tomap'](_0x57ac2c,_0x57ac2c[_0x9b5085(0x4f6,0x56f)],_0x57ac2c[_0x9b5085(0x615,0x58c)],_0x57ac2c['talt']);if(!_0x5a8ae4||!_0x43adda)continue;if(_0x261966&&Math[_0x4a63db(0x451,0x468)](_0x5a8ae4[0x0]-_0x43adda[0x0])>=_0xe103f6)continue;this[_0x4a63db(0x3b5,0x40b)]['moveTo'](_0x5a8ae4[0x0],_0x5a8ae4[0x1]),this['canvasContext']['lineTo'](_0x43adda[0x0],_0x43adda[0x1]);}this['canvasContext']['stroke']();}}[_0x3f25ac(0x191,0x113)](_0x517aa3,_0x177d4f,_0x38ea42,_0x4798dc){const _0x1a9847=Cesium[_0x2f0c94(-0x15d,-0x170)][_0x2f0c94(-0x108,-0x81)](_0x177d4f,_0x38ea42,_0x4798dc??this[_0x2f0c94(-0x216,-0x1e1)]),_0x29cafc=this['_map'][_0x478f3c(0x2bf,0x280)];function _0x2f0c94(_0x5c5fa1,_0x2bd52d){return _0x3f25ac(_0x2bd52d,_0x5c5fa1- -0x253);}if(_0x29cafc[_0x478f3c(0x3b5,0x418)]===Cesium['SceneMode'][_0x2f0c94(-0xf2,-0x18a)]){const _0x2a0e72=new Cesium[(_0x2f0c94(-0x217,-0x19e))](_0x29cafc['globe'][_0x2f0c94(-0x165,-0x114)],_0x29cafc[_0x2f0c94(-0x1dd,-0x234)]['positionWC']),_0x2d1126=_0x2a0e72['isPointVisible'](_0x1a9847);if(!_0x2d1126)return _0x517aa3['age']=0x0,null;}const _0x2ac536=mars3d__namespace['PointTrans']['toWindowCoordinates'](this[_0x2f0c94(-0x123,-0x10a)][_0x2f0c94(-0x205,-0x202)],_0x1a9847);function _0x478f3c(_0x177062,_0x9d4d0c){return _0x26960e(_0x9d4d0c,_0x177062- -0x258);}return _0x2ac536?[_0x2ac536['x'],_0x2ac536['y']]:null;}['clear'](){this['windField']['clear'](),delete this['windData'];}['initWorker'](){this['worker']=new Worker(this['options']['worker']),this['worker']['onmessage']=_0x1ddd28=>{this['_drawLines'](_0x1ddd28[_0x39dd7d(0x257,0x267)]['particles']);function _0x250847(_0x351254,_0x1cbffb){return _0x290a(_0x1cbffb- -0x5e,_0x351254);}function _0x39dd7d(_0x1b5cf6,_0x1316c6){return _0x290a(_0x1316c6- -0x9,_0x1b5cf6);}this[_0x39dd7d(0x2a7,0x236)]=![];},this['windField']={'init':_0x247862=>{const _0x3c25cc={};_0x3c25cc[_0x2bc459(-0x1a0,-0x1fe)]='init';function _0x2bc459(_0x3dbc62,_0x5bc29b){return _0x290a(_0x3dbc62- -0x3d3,_0x5bc29b);}function _0x221e60(_0x31e185,_0x25cdc9){return _0x290a(_0x31e185- -0x30f,_0x25cdc9);}_0x3c25cc[_0x2bc459(-0x1a8,-0x1df)]=_0x247862,this['worker']['postMessage'](_0x3c25cc);},'setOptions':_0x58edfe=>{function _0x231d24(_0x422bbb,_0x411dc2){return _0x290a(_0x422bbb- -0x10c,_0x411dc2);}const _0xd1838e={};function _0x331d80(_0x781595,_0x44c58f){return _0x290a(_0x781595-0x3d5,_0x44c58f);}_0xd1838e[_0x331d80(0x608,0x59d)]=_0x331d80(0x605,0x5da),_0xd1838e[_0x231d24(0x11f,0x117)]=_0x58edfe,this['worker']['postMessage'](_0xd1838e);},'setDate':_0x515857=>{const _0x1173c6={};_0x1173c6['type']=_0x9fc801(-0x11a,-0xe7);function _0x9fc801(_0x4d9d5f,_0x4c55a7){return _0x290a(_0x4c55a7- -0x39e,_0x4d9d5f);}_0x1173c6['data']=_0x515857,this['worker']['postMessage'](_0x1173c6);},'update':()=>{if(this[_0x5f24aa(0xf5,0x95)])return;this[_0xbb4640(0x4c1,0x492)]=!![];function _0x5f24aa(_0x402029,_0x51804a){return _0x290a(_0x51804a- -0x1aa,_0x402029);}const _0x4f83a7={};function _0xbb4640(_0x3df753,_0x3b42c2){return _0x290a(_0x3df753-0x282,_0x3b42c2);}_0x4f83a7[_0x5f24aa(0xef,0x89)]='update',this['worker']['postMessage'](_0x4f83a7);},'clear':()=>{const _0x1bfcb2={};_0x1bfcb2[_0x3e0be9(0x165,0x15a)]='clear';function _0x3e0be9(_0x1f6d1a,_0x48710e){return _0x290a(_0x48710e- -0xd9,_0x1f6d1a);}function _0x5e0515(_0x27c45c,_0x4b458f){return _0x290a(_0x27c45c-0x286,_0x4b458f);}this[_0x5e0515(0x48b,0x4e0)]['postMessage'](_0x1bfcb2);}},this['windField']['init'](this['options']);}}mars3d__namespace['LayerUtil'][_0x3f25ac(0x64,0x4d)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports[_0x3f25ac(0xee,0xa8)]=CanvasWindField,exports[_0x26960e(0x4cf,0x512)]=CanvasWindLayer,exports[_0x3f25ac(0x14d,0xf3)]=WindLayer,exports['WindUtil']=WindUtil;const _0x3a06df={};function _0x12a4(){const _0x2e4881=['CanvasWindField','push','particlesComputing','tlat','getU','refreshParticles','PixelDatatype','_onMouseMoveEvent','canvasContext','currentParticlesPosition','refreshTimer','pow','_maxAge','depthTexture','geometry','minimumRadius','nextTrails','currentTrails','default','isInExtent','colorTable','removeEventListener','_pointerEvents','SceneMode','TRIANGLES','autoClear','ceil','willReadFrequently','PixelFormat','TextureMagnificationFilter','createWindTextures','nextTrailsDepth','Color','getSpeed','height','BaseLayer','options','textures','38765TEvGMC','ALWAYS','PrimitiveType','setOptions','LINEAR','DrawCommand','type','1901501xclrsQ','_colorRamp','_randomParticle','getValidRange','vertexArray','EventType','_addedHook','particlesSpeed','resize','value','colour','_updateIng2','Matrix4','defined','array','dimensions','particlesRendering','arrayBufferView','mouseUp','lonRange','lat','now','getParticles','addEventListener','createCommand','ellipsoid','primitiveType','_onMouseUpEvent','north','primitives','WindLayer','drawingBufferHeight','keys','Cartesian3','lev','reverse','createTexture','trails','canvas','latRange','540762lJySlx','pointer-events','dropRateBump','speedRate','framebuffers','ComponentDatatype','Rectangle','1suHnFR','dropRate','createRenderingPrimitives','ymax','update','viewerParameters','55290lhydrk','clearCommand','blending','abs','uSpeedRange','speedFactor','destroyParticlesTextures','data','_mountedHook','_tomap','globeBoundingSphere','destroyObject','clearFramebuffers','ClearCommand','clampToLatitudeRange','DomUtil','ColorRamp','setData','colors','mouseHidden','updateViewerParameters','attributeLocations','south','sources','execute','isDestroyed','Math','windData','getExtent','getUVByXY','viewport','globe','mouseMove','position','_onMapWhellEvent','dimension','destroy','_animateFrame','_map','talt','create','grid','randomizeParticles','fromCache','color','_calcUV','reverseY','log','cols','ymin','enabled','hidden','_canvasParticles','_bilinearInterpolation','_onMouseDownEvent','27wEyEuO','destination-in','TWO_PI','mode','rows','commandList','LayerUtil','wind','xmax','99856cploZS','fromDegrees','preExecute','NEAREST','getOptions','off','framebuffer','addPrimitives','ZERO','show','__proto__','PI_OVER_THREE','_calc_speedRate','outputTexture','setDate','pixelDatatype','xmin','context','DEPTH_COMPONENT','fadeOpacity','beginPath','#ffffff','speed','SCENE3D','createRenderingTextures','randomBetween','mars3d-canvasWind','getDefaultRenderState','style','removeChild','preRender','windTextures','particlesTextures','createRenderingFramebuffers','lng','Draw','zIndex','top','EllipsoidalOccluder','fixedHeight','commandToExecute','particles','globalAlpha','getColor','windField','visibility','clientHeight','dynamic','lon','Cesium','postProcessingPosition','CanvasWindLayer','canvasWidth','uniformMap','ShaderSource','register','scene','none','RGBA','forEach','colorTextures','Compute','clear','levmax','vertexShaderSource','_setOptionsHook','currentTrailsColor','OPAQUE','nextParticlesPosition','ShaderProgram','segmentsDepth','mouse_down','mouseDown','getUVByPoint','mouse_move','minimum','fill','applyViewerParameters','VertexArray','createFramebuffer','particlesTextureSize','882gtBrZJ','Framebuffer','max','left','length','maxAge','getRandomLatLng','shaderProgram','892296WhsUey','pixelSize','round','lineWidth','blue','depthMask','IDENTITY','camera','FLOAT','_removedHook','strokeStyle','Sampler','owner','defines','container','add','age','particleSystem','Cartesian2','3630IpscYI','bindEvent','DISABLE_GL_POSITION_LOG_DEPTH','toDegrees','vdata','layer','STATIC_DRAW','calculateSpeed','createComputingPrimitives','rectangle','particlesNumber','clientWidth','tlng','green','createRawRenderState','GeometryAttributes','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20lines\x20drawing\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0auniform\x20vec2\x20hRange;\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0aout\x20float\x20heightNormalization;\x0aout\x20float\x20speedNormalization;\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight\x20+\x20lonLatLev.z;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0f,\x20360.0f)\x20-\x20180.0f;\x0a\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0f;\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(speed.z\x20-\x20wSpeedRange.x)\x20/\x20(wSpeedRange.y\x20-\x20wSpeedRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20vec3\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rgb;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x20\x20\x20\x20//\x20render\x20lines\x20with\x20triangles\x20and\x20miter\x20joint\x0a\x20\x20\x20\x20//\x20read\x20https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html\x20for\x20detail\x0a\x20\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20projectedCoordinates.next,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.next\x20+\x20offset;\x0a\x20\x20}\x0a\x0a\x20\x20heightNormalization\x20=\x20(currentPosition.z\x20-\x20hRange.x)\x20/\x20(hRange.y\x20-\x20hRange.x);\x0a\x0a\x20\x20speedNormalization\x20=\x20texture(particlesSpeed,\x20particleIndex).a;\x0a}\x0a','frameTime','bind','min','segments','interval','redraw','_data','fromGeometry','previousParticlesPosition','fragmentShaderSource','BufferUsage','__esModule','floor','maxParticles','sin','wheel','width','udata','Pass','worker','computeViewRectangle'];_0x12a4=function(){return _0x2e4881;};return _0x12a4();}function _0x290a(_0x15d575,_0x1ff9bf){const _0x12a4f8=_0x12a4();return _0x290a=function(_0x290a69,_0x4630f1){_0x290a69=_0x290a69-0x18d;let _0x31ad2f=_0x12a4f8[_0x290a69];return _0x31ad2f;},_0x290a(_0x15d575,_0x1ff9bf);}_0x3a06df[_0x3f25ac(0xcb,0xde)]=!![],Object['defineProperty'](exports,_0x26960e(0x583,0x567),_0x3a06df);
}));
