/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.5
 * 编译日期：2024-10-25 21:50
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';function _0x121b(_0x10ab02,_0x4f6097){const _0x248239=_0x2482();return _0x121b=function(_0x121ba1,_0x49a4cd){_0x121ba1=_0x121ba1-0x17a;let _0x5f12fa=_0x248239[_0x121ba1];return _0x5f12fa;},_0x121b(_0x10ab02,_0x4f6097);}(function(_0x1b1f05,_0x171ee8){function _0x4b2ee9(_0xb6dc51,_0x2a3c64){return _0x121b(_0x2a3c64- -0x163,_0xb6dc51);}const _0x404deb=_0x1b1f05();function _0x153f93(_0x5d1beb,_0x133cf7){return _0x121b(_0x5d1beb-0x390,_0x133cf7);}while(!![]){try{const _0x5cdc16=parseInt(_0x4b2ee9(0x181,0xf0))/0x1+parseInt(_0x153f93(0x5be,0x650))/0x2*(parseInt(_0x153f93(0x5f4,0x68a))/0x3)+parseInt(_0x153f93(0x538,0x596))/0x4+-parseInt(_0x4b2ee9(0x28,0x82))/0x5*(parseInt(_0x153f93(0x637,0x5cb))/0x6)+parseInt(_0x4b2ee9(0x75,0xce))/0x7+-parseInt(_0x153f93(0x5e7,0x5c5))/0x8*(parseInt(_0x4b2ee9(0x90,0x75))/0x9)+-parseInt(_0x153f93(0x622,0x681))/0xa;if(_0x5cdc16===_0x171ee8)break;else _0x404deb['push'](_0x404deb['shift']());}catch(_0x860bac){_0x404deb['push'](_0x404deb['shift']());}}}(_0x2482,0xaae52));function _interopNamespace(_0x1a5f68){if(_0x1a5f68&&_0x1a5f68[_0x3aaeb3(0x1e0,0x194)])return _0x1a5f68;var _0x210f85=Object[_0x3aaeb3(0x2dd,0x314)](null);_0x1a5f68&&Object[_0x4f637b(0x255,0x1ed)](_0x1a5f68)[_0x3aaeb3(0x226,0x19d)](function(_0x47ca0f){function _0x6897dd(_0x1a7726,_0x11d0fc){return _0x4f637b(_0x1a7726- -0x24c,_0x11d0fc);}function _0x1df080(_0x141bf5,_0x204f66){return _0x3aaeb3(_0x141bf5- -0x159,_0x204f66);}if(_0x47ca0f!==_0x6897dd(-0x49,-0x4f)){var _0x27932d=Object['getOwnPropertyDescriptor'](_0x1a5f68,_0x47ca0f);Object['defineProperty'](_0x210f85,_0x47ca0f,_0x27932d[_0x1df080(0x132,0x9f)]?_0x27932d:{'enumerable':!![],'get':function(){return _0x1a5f68[_0x47ca0f];}});}});function _0x4f637b(_0x29d201,_0x163068){return _0x121b(_0x29d201- -0x47,_0x163068);}_0x210f85['default']=_0x1a5f68;function _0x3aaeb3(_0x28104b,_0x27f37f){return _0x121b(_0x28104b-0x42,_0x27f37f);}return _0x210f85;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0x32b25e,_0x24bba3){const _0xcc84e9=_0x32b25e*Math['cos'](Cesium$7['Math']['toRadians'](_0x24bba3));return _0xcc84e9;}function getV(_0x1ba8d9,_0xd9d925){function _0x568d09(_0x479557,_0x31572c){return _0x121b(_0x31572c-0x3cd,_0x479557);}const _0x588772=_0x1ba8d9*Math['sin'](Cesium$7[_0x568d09(0x62e,0x621)]['toRadians'](_0xd9d925));return _0x588772;}function getSpeed(_0x33d682,_0x173219){const _0x268f22=Math['sqrt'](Math['pow'](_0x33d682,0x2)+Math[_0x4a72b7(-0x94,-0xc0)](_0x173219,0x2));function _0x4a72b7(_0x4ccfc2,_0x7b48be){return _0x121b(_0x4ccfc2- -0x318,_0x7b48be);}return _0x268f22;}function getDirection(_0x22c541,_0x50e661){let _0x1f296a=Cesium$7[_0x3dad07(0x1b0,0x218)]['toDegrees'](Math['atan2'](_0x50e661,_0x22c541));_0x1f296a+=_0x1f296a<0x0?0x168:0x0;function _0x3dad07(_0x178859,_0x3e784a){return _0x121b(_0x178859- -0xa4,_0x3e784a);}return _0x1f296a;}const _0x1ff4e1={};_0x1ff4e1['__proto__']=null,_0x1ff4e1[_0x4855c4(0x278,0x234)]=getU,_0x1ff4e1[_0x41fe3c(0x1e,0xa7)]=getV,_0x1ff4e1['getSpeed']=getSpeed,_0x1ff4e1[_0x41fe3c(0xc7,0xab)]=getDirection;var WindUtil=_0x1ff4e1;const Cesium$6=mars3d__namespace[_0x41fe3c(-0x34,0x2f)];function _0x41fe3c(_0x108a02,_0x1b91bc){return _0x121b(_0x1b91bc- -0x173,_0x108a02);}class CustomPrimitive{constructor(_0x119bbf){this['commandType']=_0x119bbf['commandType'],this['geometry']=_0x119bbf[_0x4a2e2d(0x538,0x4a2)],this['attributeLocations']=_0x119bbf['attributeLocations'],this[_0xb5cf60(0x28f,0x2e1)]=_0x119bbf['primitiveType'],this[_0xb5cf60(0x2b6,0x2be)]=_0x119bbf[_0xb5cf60(0x263,0x2be)],this[_0x4a2e2d(0x4c0,0x536)]=_0x119bbf['vertexShaderSource'],this[_0x4a2e2d(0x54e,0x55c)]=_0x119bbf['fragmentShaderSource'],this[_0x4a2e2d(0x58a,0x527)]=_0x119bbf['rawRenderState'],this[_0x4a2e2d(0x5ed,0x564)]=_0x119bbf[_0x4a2e2d(0x4ce,0x564)],this['outputTexture']=_0x119bbf['outputTexture'],this['autoClear']=_0x119bbf[_0xb5cf60(0x213,0x27e)]??![],this['preExecute']=_0x119bbf[_0x4a2e2d(0x51e,0x540)],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined;function _0xb5cf60(_0x255472,_0x274484){return _0x41fe3c(_0x255472,_0x274484-0x234);}function _0x4a2e2d(_0x1be9f0,_0x5402e8){return _0x4855c4(_0x5402e8-0x323,_0x1be9f0);}this[_0xb5cf60(0x313,0x27e)]&&(this['clearCommand']=new Cesium$6['ClearCommand']({'color':new Cesium$6['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x4a2e2d(0x5fa,0x564)],'pass':Cesium$6['Pass']['OPAQUE']}));}['createCommand'](_0x40df27){function _0x5371e2(_0x35840d,_0xd47b85){return _0x4855c4(_0x35840d- -0x262,_0xd47b85);}function _0xaaad69(_0x39437f,_0x1fc635){return _0x4855c4(_0x39437f-0x306,_0x1fc635);}switch(this['commandType']){case'Draw':{const _0x3cc1f3=Cesium$6['VertexArray'][_0xaaad69(0x4b3,0x51d)]({'context':_0x40df27,'geometry':this[_0x5371e2(-0xe3,-0xe0)],'attributeLocations':this[_0x5371e2(-0x12,-0x81)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']}),_0x406b5f={};_0x406b5f[_0xaaad69(0x46b,0x47e)]=_0x40df27,_0x406b5f[_0xaaad69(0x556,0x54f)]=this[_0xaaad69(0x556,0x4fe)],_0x406b5f[_0x5371e2(-0x4f,-0x2f)]=this['vertexShaderSource'],_0x406b5f['fragmentShaderSource']=this['fragmentShaderSource'];const _0x5cd127=Cesium$6['ShaderProgram']['fromCache'](_0x406b5f),_0x23e7da=Cesium$6['RenderState']['fromCache'](this['rawRenderState']);return new Cesium$6[(_0x5371e2(-0x4d,-0x44))]({'owner':this,'vertexArray':_0x3cc1f3,'primitiveType':this['primitiveType'],'uniformMap':this['uniformMap'],'modelMatrix':Cesium$6['Matrix4']['IDENTITY'],'shaderProgram':_0x5cd127,'framebuffer':this['framebuffer'],'renderState':_0x23e7da,'pass':Cesium$6[_0xaaad69(0x53d,0x4aa)][_0x5371e2(-0x94,-0xdb)]});}case _0x5371e2(-0x27,-0x4e):{const _0x1cfb0f={};return _0x1cfb0f[_0xaaad69(0x4a3,0x4dd)]=this,_0x1cfb0f[_0x5371e2(-0x29,-0x4f)]=this['fragmentShaderSource'],_0x1cfb0f['uniformMap']=this[_0xaaad69(0x4de,0x4fd)],_0x1cfb0f[_0xaaad69(0x4fc,0x50f)]=this['outputTexture'],_0x1cfb0f['persists']=!![],new Cesium$6[(_0xaaad69(0x4a5,0x47a))](_0x1cfb0f);}}}['setGeometry'](_0x2e46a6,_0xb28921){this[_0x289582(-0x23b,-0x258)]=_0xb28921;function _0x289582(_0x2606fa,_0x2a071c){return _0x4855c4(_0x2606fa- -0x3ba,_0x2a071c);}const _0x3adf20=Cesium$6['VertexArray']['fromGeometry']({'context':_0x2e46a6,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6['BufferUsage'][_0x530a58(-0x1ae,-0x242)]});function _0x530a58(_0x2c430a,_0x17dcca){return _0x41fe3c(_0x2c430a,_0x17dcca- -0x24a);}this['commandToExecute'][_0x289582(-0x1dc,-0x1e2)]=_0x3adf20;}[_0x41fe3c(0xf3,0x7f)](_0x5a7919){function _0x2282c3(_0x3493d3,_0x4d8853){return _0x4855c4(_0x4d8853-0x5d,_0x3493d3);}if(!this[_0x4a1586(0x100,0x190)])return;if(_0x5a7919['mode']!==Cesium$6[_0x2282c3(0x291,0x24a)]['SCENE3D'])return;!Cesium$6[_0x4a1586(0x9f,0xe0)](this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x5a7919['context']));Cesium$6['defined'](this[_0x2282c3(0x30f,0x27a)])&&this['preExecute']();function _0x4a1586(_0x53c7c3,_0x388357){return _0x4855c4(_0x388357- -0x8b,_0x53c7c3);}Cesium$6['defined'](this[_0x2282c3(0x2a7,0x2db)])&&_0x5a7919['commandList'][_0x2282c3(0x1ac,0x1b5)](this[_0x2282c3(0x2f4,0x2db)]),_0x5a7919[_0x4a1586(0x1d6,0x18e)]['push'](this['commandToExecute']);}[_0x4855c4(0x26c,0x2b8)](){return![];}[_0x41fe3c(0x58,0x82)](){if(this[_0x4b68f7(0x1a5,0x209)]){var _0x412c37,_0x5ca6fe;(_0x412c37=this['clearCommand'])!==null&&_0x412c37!==void 0x0&&_0x412c37[_0x7c282e(-0x9c,-0x1e)]&&this['clearCommand'][_0x7c282e(-0x21,-0x1e)]['destroy'](),(_0x5ca6fe=this[_0x4b68f7(0x1a5,0x14e)])!==null&&_0x5ca6fe!==void 0x0&&_0x5ca6fe['shaderProgram']&&this['clearCommand']['shaderProgram']['destroy'](),delete this['clearCommand'];}function _0x4b68f7(_0x3cecab,_0x5da231){return _0x4855c4(_0x3cecab- -0xd9,_0x5da231);}this[_0x7c282e(0xdb,0x53)]&&(this['commandToExecute']['vertexArray']&&this['commandToExecute'][_0x7c282e(-0x9a,-0x1e)]['destroy'](),this['commandToExecute']['shaderProgram']&&this[_0x4b68f7(0x176,0x12c)]['shaderProgram']['destroy'](),delete this['commandToExecute']);function _0x7c282e(_0x55e8e0,_0x1b08d0){return _0x4855c4(_0x1b08d0- -0x1fc,_0x55e8e0);}return Cesium$6[_0x7c282e(-0xe7,-0x63)](this);}}const Cesium$5=mars3d__namespace[_0x4855c4(0x17d,0x1ba)],Util=(function(){function _0x5b827e(_0x141635,_0xe0aa49){return _0x41fe3c(_0x141635,_0xe0aa49-0x3dc);}const _0x164d28=function(){const _0x475a1e=new Cesium$5['Geometry']({'attributes':new Cesium$5[(_0x1f2a95(0xd1,0x5e))]({'position':new Cesium$5[(_0x1f2a95(0x56,0xe9))]({'componentDatatype':Cesium$5[_0x52159c(-0xcc,-0x6a)]['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});function _0x52159c(_0x7a300d,_0x19ef80){return _0x121b(_0x7a300d- -0x271,_0x19ef80);}function _0x1f2a95(_0x10061a,_0x4c33f1){return _0x121b(_0x10061a- -0x137,_0x4c33f1);}return _0x475a1e;},_0x1026c3=function(_0x59fb61,_0x21d127){function _0x190f8f(_0x5669c5,_0x18478d){return _0x121b(_0x5669c5-0x2a2,_0x18478d);}if(Cesium$5[_0x190f8f(0x432,0x4a4)](_0x21d127)){const _0x200d8b={};_0x200d8b['arrayBufferView']=_0x21d127,_0x59fb61['source']=_0x200d8b;}const _0x2d3473=new Cesium$5['Texture'](_0x59fb61);return _0x2d3473;};function _0x2992b2(_0x3fca6e,_0x5c035e){return _0x41fe3c(_0x3fca6e,_0x5c035e-0x2e0);}const _0x369b11=function(_0x49b549,_0x55be01,_0x11026f){const _0x598d1d={};_0x598d1d['context']=_0x49b549;function _0x54c36f(_0x4c0a11,_0x143f17){return _0x121b(_0x4c0a11-0x89,_0x143f17);}_0x598d1d['colorTextures']=[_0x55be01],_0x598d1d[_0x54c36f(0x274,0x230)]=_0x11026f;const _0x16e0b2=new Cesium$5['Framebuffer'](_0x598d1d);return _0x16e0b2;},_0xe6ea7f=function(_0x431cfc){const _0x34e689=!![],_0x4ef6ff=![];function _0xf581b6(_0x163f4c,_0x34783a){return _0x121b(_0x34783a-0x130,_0x163f4c);}function _0x30a26f(_0x2f868a,_0x419de8){return _0x121b(_0x2f868a- -0x45,_0x419de8);}const _0xafc8c5={};_0xafc8c5['viewport']=_0x431cfc[_0xf581b6(0x321,0x2dd)],_0xafc8c5['depthTest']=_0x431cfc[_0xf581b6(0x407,0x373)],_0xafc8c5['depthMask']=_0x431cfc[_0x30a26f(0x191,0x106)],_0xafc8c5[_0x30a26f(0x242,0x23a)]=_0x431cfc[_0xf581b6(0x38d,0x3b7)];const _0x21c3c5=_0xafc8c5,_0x2b2c38=Cesium$5[_0x30a26f(0x1b7,0x121)]['getDefaultRenderState'](_0x34e689,_0x4ef6ff,_0x21c3c5);return _0x2b2c38;},_0x17fbcc=function(_0x44bb25){const _0x7c0352={},_0x2acf03=Cesium$5['Math']['mod'](_0x44bb25['west'],Cesium$5[_0x2011e5(0x350,0x3b3)][_0x3dbcd2(0x1e0,0x1f2)]),_0x1ed586=Cesium$5['Math'][_0x3dbcd2(0x223,0x240)](_0x44bb25[_0x3dbcd2(0x1c9,0x208)],Cesium$5['Math']['TWO_PI']),_0x3c6f66=_0x44bb25[_0x2011e5(0x457,0x3e8)];let _0x46e2d7,_0x54e0ea;_0x3c6f66>Cesium$5[_0x2011e5(0x341,0x3b3)]['THREE_PI_OVER_TWO']?(_0x46e2d7=0x0,_0x54e0ea=Cesium$5[_0x2011e5(0x3bd,0x3b3)]['TWO_PI']):_0x1ed586-_0x2acf03<_0x3c6f66?(_0x46e2d7=_0x2acf03,_0x54e0ea=_0x2acf03+_0x3c6f66):(_0x46e2d7=_0x2acf03,_0x54e0ea=_0x1ed586);_0x7c0352[_0x2011e5(0x340,0x370)]={'min':Cesium$5['Math']['toDegrees'](_0x46e2d7),'max':Cesium$5['Math'][_0x3dbcd2(0x199,0x16d)](_0x54e0ea)};function _0x3dbcd2(_0x15725f,_0x16b03a){return _0x121b(_0x16b03a- -0xd,_0x15725f);}const _0x25c2a3=_0x44bb25[_0x3dbcd2(0x223,0x193)],_0x352805=_0x44bb25[_0x2011e5(0x2b0,0x32a)],_0x1331d0=_0x44bb25[_0x2011e5(0x3eb,0x35f)],_0x25f490=_0x1331d0>Cesium$5['Math']['PI']/0xc?_0x1331d0/0x2:0x0;let _0x3cc2f0=Cesium$5[_0x3dbcd2(0x2ad,0x247)][_0x3dbcd2(0x1a7,0x1c6)](_0x25c2a3-_0x25f490),_0x5d0794=Cesium$5['Math']['clampToLatitudeRange'](_0x352805+_0x25f490);_0x3cc2f0<-Cesium$5[_0x3dbcd2(0x2a2,0x247)]['PI_OVER_THREE']&&(_0x3cc2f0=-Cesium$5['Math'][_0x2011e5(0x2d7,0x348)]);_0x5d0794>Cesium$5['Math']['PI_OVER_THREE']&&(_0x5d0794=Cesium$5[_0x2011e5(0x40f,0x3b3)][_0x2011e5(0x389,0x348)]);_0x7c0352[_0x2011e5(0x354,0x38f)]={'min':Cesium$5[_0x3dbcd2(0x228,0x247)][_0x3dbcd2(0x16c,0x16d)](_0x3cc2f0),'max':Cesium$5[_0x2011e5(0x422,0x3b3)]['toDegrees'](_0x5d0794)};function _0x2011e5(_0x170ede,_0x1147e4){return _0x121b(_0x1147e4-0x15f,_0x170ede);}return _0x7c0352;},_0x513273={};return _0x513273['getFullscreenQuad']=_0x164d28,_0x513273[_0x5b827e(0x3e7,0x403)]=_0x1026c3,_0x513273['createFramebuffer']=_0x369b11,_0x513273[_0x2992b2(0x286,0x31b)]=_0xe6ea7f,_0x513273['viewRectangleToLonLatRange']=_0x17fbcc,_0x513273;}());var fullscreenVert='#version\x20300\x20es\x0a\x0ain\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20gl_Position\x20=\x20vec4(position,\x201.0f);\x0a}\x0a',screenDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20trailsColor;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a',segmentDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20bool\x20colour;\x0a\x0ain\x20float\x20heightNormalization;\x0ain\x20float\x20speedNormalization;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speedNormalization\x20>\x20zero)\x20{\x0a\x20\x20\x20\x20if(colour)\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(heightNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',segmentDrawVert='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20lines\x20drawing\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0auniform\x20vec2\x20hRange;\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0aout\x20float\x20heightNormalization;\x0aout\x20float\x20speedNormalization;\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight\x20+\x20lonLatLev.z;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0f,\x20360.0f)\x20-\x20180.0f;\x0a\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0f;\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(speed.z\x20-\x20wSpeedRange.x)\x20/\x20(wSpeedRange.y\x20-\x20wSpeedRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20vec3\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rgb;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x20\x20\x20\x20//\x20render\x20lines\x20with\x20triangles\x20and\x20miter\x20joint\x0a\x20\x20\x20\x20//\x20read\x20https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html\x20for\x20detail\x0a\x20\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20projectedCoordinates.next,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.next\x20+\x20offset;\x0a\x20\x20}\x0a\x0a\x20\x20heightNormalization\x20=\x20(currentPosition.z\x20-\x20hRange.x)\x20/\x20(hRange.y\x20-\x20hRange.x);\x0a\x0a\x20\x20speedNormalization\x20=\x20texture(particlesSpeed,\x20particleIndex).a;\x0a}\x0a',trailDrawFrag=_0x41fe3c(0x22,0x1e);const Cesium$4=mars3d__namespace['Cesium'];class ParticlesRendering{constructor(_0x3f0363,_0x52183d,_0x456338,_0x311882,_0x2d3ddc){function _0x567739(_0x5e022a,_0x1cd909){return _0x4855c4(_0x1cd909-0x204,_0x5e022a);}this['colour']=_0x456338[_0x567739(0x460,0x44d)]==='height',this['createRenderingTextures'](_0x3f0363,_0x52183d,_0x456338[_0x661b11(-0x18c,-0x143)]);function _0x661b11(_0x15ca70,_0x36c9d1){return _0x41fe3c(_0x15ca70,_0x36c9d1- -0x23e);}this['createRenderingFramebuffers'](_0x3f0363),this['createRenderingPrimitives'](_0x3f0363,_0x52183d,_0x456338,_0x311882,_0x2d3ddc);}[_0x41fe3c(0x14,0x54)](_0x4846ed,_0x4c8a87,_0x1fbd5f){const _0x4ba3e3={};_0x4ba3e3['context']=_0x4846ed,_0x4ba3e3['width']=_0x4846ed[_0x3fbe07(0x3dc,0x413)],_0x4ba3e3['height']=_0x4846ed['drawingBufferHeight'],_0x4ba3e3['pixelFormat']=Cesium$4['PixelFormat'][_0x3fbe07(0x37b,0x3be)],_0x4ba3e3['pixelDatatype']=Cesium$4['PixelDatatype']['UNSIGNED_BYTE'];const _0x23951d=_0x4ba3e3;function _0x22dabf(_0xb7445,_0x3bae59){return _0x4855c4(_0xb7445-0x35a,_0x3bae59);}const _0x37803a={};_0x37803a['context']=_0x4846ed,_0x37803a['width']=_0x4846ed['drawingBufferWidth'],_0x37803a[_0x3fbe07(0x452,0x41f)]=_0x4846ed['drawingBufferHeight'],_0x37803a['pixelFormat']=Cesium$4[_0x22dabf(0x5c3,0x60c)]['DEPTH_COMPONENT'],_0x37803a['pixelDatatype']=Cesium$4['PixelDatatype'][_0x3fbe07(0x4e5,0x48c)];function _0x3fbe07(_0x3e8b30,_0x37f79f){return _0x41fe3c(_0x3e8b30,_0x37f79f-0x392);}const _0x2b2cef=_0x37803a,_0x289137=_0x1fbd5f[_0x22dabf(0x521,0x55b)],_0x15a72b=new Float32Array(_0x289137*0x3);for(let _0xb473dc=0x0;_0xb473dc<_0x289137;_0xb473dc++){const _0x1690da=Cesium$4[_0x3fbe07(0x3d2,0x3c5)]['fromCssColorString'](_0x1fbd5f[_0xb473dc]);_0x15a72b[0x3*_0xb473dc]=_0x1690da[_0x22dabf(0x5cf,0x5ec)],_0x15a72b[0x3*_0xb473dc+0x1]=_0x1690da['green'],_0x15a72b[0x3*_0xb473dc+0x2]=_0x1690da[_0x22dabf(0x4ba,0x426)];}const _0xd3e92e={'context':_0x4846ed,'width':_0x289137,'height':0x1,'pixelFormat':Cesium$4['PixelFormat'][_0x22dabf(0x4b5,0x4f3)],'pixelDatatype':Cesium$4['PixelDatatype']['FLOAT'],'sampler':new Cesium$4['Sampler']({'minificationFilter':Cesium$4[_0x3fbe07(0x398,0x3b6)]['LINEAR'],'magnificationFilter':Cesium$4['TextureMagnificationFilter']['LINEAR']})};this[_0x22dabf(0x512,0x572)]={'segmentsColor':Util['createTexture'](_0x23951d),'segmentsDepth':Util[_0x3fbe07(0x429,0x3b9)](_0x2b2cef),'currentTrailsColor':Util[_0x22dabf(0x4cf,0x4a5)](_0x23951d),'currentTrailsDepth':Util[_0x3fbe07(0x357,0x3b9)](_0x2b2cef),'nextTrailsColor':Util['createTexture'](_0x23951d),'nextTrailsDepth':Util['createTexture'](_0x2b2cef),'colorTable':Util['createTexture'](_0xd3e92e,_0x15a72b)};}['createRenderingFramebuffers'](_0xaf0c6a){function _0x4693d9(_0x2af70a,_0x21e529){return _0x41fe3c(_0x21e529,_0x2af70a-0x75);}function _0x520c30(_0x16dec6,_0x46f341){return _0x41fe3c(_0x46f341,_0x16dec6- -0x274);}this[_0x4693d9(0x83,0x2a)]={'segments':Util['createFramebuffer'](_0xaf0c6a,this['textures']['segmentsColor'],this[_0x520c30(-0x20a,-0x1bd)][_0x520c30(-0x21e,-0x212)]),'currentTrails':Util['createFramebuffer'](_0xaf0c6a,this['textures']['currentTrailsColor'],this['textures']['currentTrailsDepth']),'nextTrails':Util['createFramebuffer'](_0xaf0c6a,this[_0x520c30(-0x20a,-0x257)]['nextTrailsColor'],this['textures']['nextTrailsDepth'])};}[_0x4855c4(0x159,0xd8)](_0x50f39c){function _0x3761f6(_0x223534,_0x31cf8c){return _0x41fe3c(_0x31cf8c,_0x223534-0x351);}const _0x47f8b3=0x4;let _0x11d734=[];for(let _0x157c9c=0x0;_0x157c9c<_0x50f39c['particlesTextureSize'];_0x157c9c++){for(let _0x517657=0x0;_0x517657<_0x50f39c['particlesTextureSize'];_0x517657++){for(let _0xdcaf8c=0x0;_0xdcaf8c<_0x47f8b3;_0xdcaf8c++){_0x11d734['push'](_0x157c9c/_0x50f39c['particlesTextureSize']),_0x11d734[_0x3761f6(0x35b,0x3ce)](_0x517657/_0x50f39c['particlesTextureSize']);}}}function _0x1866f2(_0x70110b,_0x1a1b84){return _0x41fe3c(_0x1a1b84,_0x70110b-0x3fa);}_0x11d734=new Float32Array(_0x11d734);let _0x2706e1=[];for(let _0x3a2ba5=0x0;_0x3a2ba5<_0x50f39c['maxParticles'];_0x3a2ba5++){_0x2706e1['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x2706e1=new Float32Array(_0x2706e1);let _0x3a4087=[];for(let _0x34caae=0x0,_0x11edc7=0x0;_0x34caae<_0x50f39c[_0x1866f2(0x4dc,0x54b)];_0x34caae++){_0x3a4087[_0x1866f2(0x404,0x425)](_0x11edc7+0x0,_0x11edc7+0x1,_0x11edc7+0x2,_0x11edc7+0x2,_0x11edc7+0x1,_0x11edc7+0x3),_0x11edc7+=_0x47f8b3;}_0x3a4087=new Uint32Array(_0x3a4087);const _0x5dd30a=new Cesium$4['Geometry']({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4[(_0x1866f2(0x414,0x3f2))]({'componentDatatype':Cesium$4[_0x1866f2(0x42c,0x39a)][_0x1866f2(0x4a8,0x4e5)],'componentsPerAttribute':0x2,'values':_0x11d734}),'normal':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x3,'values':_0x2706e1})}),'indices':_0x3a4087});return _0x5dd30a;}[_0x41fe3c(0x144,0x10a)](_0x4190c0,_0x439de4,_0x579f3f,_0x1fb9fb,_0x29facc){const _0x268e3d=this,_0x1baba4={};_0x1baba4['st']=0x0,_0x1baba4['normal']=0x1;const _0xadef5a={};_0xadef5a[_0x49f8c9(-0xba,-0xd9)]=[segmentDrawVert];function _0xd6681c(_0x4587e3,_0x444c8f){return _0x4855c4(_0x444c8f- -0xee,_0x4587e3);}const _0x513462={};_0x513462[_0x49f8c9(-0x134,-0xd9)]=[segmentDrawFrag];const _0x38909e={};_0x38909e['enabled']=!![];const _0x4cd79f={};_0x4cd79f['viewport']=undefined,_0x4cd79f['depthTest']=_0x38909e,_0x4cd79f['depthMask']=!![];const _0x1275bb={};_0x1275bb['position']=0x0,_0x1275bb['st']=0x1;const _0x507e37={};_0x507e37[_0x49f8c9(-0x4c,0x3)]=[_0xd6681c(0xf8,0xcf)],_0x507e37[_0x49f8c9(-0x12e,-0xd9)]=[fullscreenVert];const _0x3f6332={};_0x3f6332['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x3f6332[_0x49f8c9(-0xcb,-0xd9)]=[trailDrawFrag];const _0x541860={};_0x541860['position']=0x0;function _0x49f8c9(_0x3d1c15,_0x19ea4b){return _0x41fe3c(_0x3d1c15,_0x19ea4b- -0xe5);}_0x541860['st']=0x1;const _0x449d75={};_0x449d75['defines']=[_0x49f8c9(-0x6c,-0x76)],_0x449d75['sources']=[fullscreenVert];const _0x5ec16a={};_0x5ec16a['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x5ec16a['sources']=[screenDrawFrag];const _0x4a60bb={};_0x4a60bb['enabled']=![];const _0x4d03d9={};_0x4d03d9[_0x49f8c9(0x5a,0x9)]=!![],this['primitives']={'segments':new CustomPrimitive({'commandType':_0xd6681c(0x5d,0xcd),'attributeLocations':_0x1baba4,'geometry':this['createSegmentsGeometry'](_0x579f3f),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'previousParticlesPosition':function(){function _0xa39493(_0x15bcde,_0x4da3d7){return _0xd6681c(_0x4da3d7,_0x15bcde-0x483);}return _0x29facc[_0xa39493(0x4f7,0x4c6)]['previousParticlesPosition'];},'currentParticlesPosition':function(){return _0x29facc['particlesTextures']['currentParticlesPosition'];},'postProcessingPosition':function(){return _0x29facc['particlesTextures']['postProcessingPosition'];},'particlesSpeed':function(){function _0x2a7488(_0x19a7f2,_0x9d5f51){return _0x49f8c9(_0x19a7f2,_0x9d5f51-0x123);}return _0x29facc[_0x2a7488(0x22,0x52)]['particlesSpeed'];},'colorTable':function(){function _0xa928ba(_0x379363,_0x27c7bf){return _0xd6681c(_0x379363,_0x27c7bf-0x306);}return _0x268e3d['textures'][_0xa928ba(0x343,0x375)];},'aspect':function(){return _0x4190c0['drawingBufferWidth']/_0x4190c0['drawingBufferHeight'];},'H':function(){return _0x439de4['H']['array'];},'hRange':function(){function _0x14a2fd(_0x18d168,_0x2027ae){return _0x49f8c9(_0x2027ae,_0x18d168-0x2ac);}return new Cesium$4['Cartesian2'](_0x439de4['H'][_0x14a2fd(0x26c,0x242)],_0x439de4['H']['max']);},'uSpeedRange':function(){function _0x91e891(_0xf43f4f,_0x1f67ee){return _0xd6681c(_0xf43f4f,_0x1f67ee-0x4ef);}function _0x254fa0(_0x5c5fa2,_0x13f95c){return _0x49f8c9(_0x13f95c,_0x5c5fa2-0x413);}return new Cesium$4[(_0x254fa0(0x426,0x443))](_0x439de4['U'][_0x254fa0(0x3d3,0x366)],_0x439de4['U'][_0x91e891(0x659,0x641)]);},'vSpeedRange':function(){function _0x75222f(_0x139982,_0x1c7c14){return _0xd6681c(_0x139982,_0x1c7c14- -0x29a);}return new Cesium$4['Cartesian2'](_0x439de4['V']['min'],_0x439de4['V'][_0x75222f(-0xbe,-0x148)]);},'wSpeedRange':function(){function _0x3d4c79(_0x2547f8,_0x3ac5d1){return _0xd6681c(_0x2547f8,_0x3ac5d1-0x24f);}function _0x51616a(_0xfe299c,_0x124abb){return _0x49f8c9(_0x124abb,_0xfe299c-0x181);}return new Cesium$4[(_0x51616a(0x194,0x226))](_0x439de4['W'][_0x51616a(0x141,0x1a1)],_0x439de4['W'][_0x51616a(0x18e,0x1aa)]);},'pixelSize':function(){function _0x20159f(_0x55a8d6,_0x122b6){return _0x49f8c9(_0x55a8d6,_0x122b6-0x583);}return _0x1fb9fb[_0x20159f(0x46c,0x4ff)];},'lineWidth':function(){return _0x579f3f['lineWidth'];},'particleHeight':function(){function _0x639514(_0x5302df,_0x428f98){return _0x49f8c9(_0x428f98,_0x5302df-0x409);}return _0x579f3f[_0x639514(0x3c7,0x378)];},'colour':function(){function _0x49a74e(_0x189392,_0x42c35f){return _0xd6681c(_0x189392,_0x42c35f-0x443);}return _0x268e3d[_0x49a74e(0x59b,0x57f)];}},'vertexShaderSource':new Cesium$4[(_0x49f8c9(0x77,0x30))](_0xadef5a),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x513462),'rawRenderState':Util['createRawRenderState'](_0x4cd79f),'framebuffer':this[_0xd6681c(0xfa,0x6e)]['segments'],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x1275bb,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'segmentsColorTexture':function(){function _0x44cbad(_0x25be52,_0xebc25c){return _0xd6681c(_0x25be52,_0xebc25c-0x497);}return _0x268e3d[_0x44cbad(0x4d5,0x561)]['segmentsColor'];},'segmentsDepthTexture':function(){return _0x268e3d['textures']['segmentsDepth'];},'currentTrailsColor':function(){return _0x268e3d['framebuffers']['currentTrails']['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0xdf7eb4(_0x1d61da,_0xf714f4){return _0x49f8c9(_0xf714f4,_0x1d61da- -0xc2);}function _0x5754ce(_0x5e3b9a,_0x12931f){return _0xd6681c(_0x12931f,_0x5e3b9a-0xf);}return _0x268e3d[_0xdf7eb4(-0x199,-0x147)][_0x5754ce(0x188,0x134)]['depthTexture'];},'fadeOpacity':function(){function _0x4ee32b(_0x3dfb89,_0x5a2a38){return _0xd6681c(_0x3dfb89,_0x5a2a38-0x17d);}return _0x579f3f[_0x4ee32b(0x30a,0x283)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x507e37),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x3f6332),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4[_0x49f8c9(-0x8e,-0x51)]['ALWAYS']},'depthMask':!![]}),'framebuffer':this['framebuffers'][_0x49f8c9(-0x41,-0x49)],'autoClear':!![],'preExecute':function(){function _0x3326bc(_0xf81c9b,_0x5445c3){return _0xd6681c(_0xf81c9b,_0x5445c3-0x26f);}if(_0x579f3f[_0x52a771(0xdd,0xa0)]){const _0x5606df=_0x268e3d['framebuffers'][_0x3326bc(0x3e1,0x3e8)];_0x268e3d[_0x3326bc(0x300,0x2dd)][_0x3326bc(0x401,0x3e8)]=_0x268e3d[_0x52a771(0x9f,0x42)][_0x3326bc(0x329,0x36b)],_0x268e3d[_0x52a771(0x9f,0xb0)][_0x3326bc(0x38a,0x36b)]=_0x5606df;}_0x268e3d['primitives']['trails'][_0x3326bc(0x391,0x3d0)][_0x3326bc(0x406,0x3c2)]=_0x268e3d[_0x52a771(0x9f,0x3b)]['nextTrails'];function _0x52a771(_0x3684e2,_0x544699){return _0xd6681c(_0x544699,_0x3684e2-0x31);}_0x268e3d[_0x52a771(0x17b,0x10b)][_0x3326bc(0x369,0x381)]['clearCommand'][_0x52a771(0x184,0x1fc)]=_0x268e3d['framebuffers'][_0x3326bc(0x314,0x36b)];}}),'screen':new CustomPrimitive({'commandType':_0xd6681c(0xef,0xcd),'attributeLocations':_0x541860,'geometry':Util[_0xd6681c(0xf6,0xbc)](),'primitiveType':Cesium$4['PrimitiveType'][_0x49f8c9(0x59,0x37)],'uniformMap':{'trailsColorTexture':function(){function _0x2c3116(_0x3c0d5c,_0x35a548){return _0x49f8c9(_0x3c0d5c,_0x35a548-0x477);}return _0x268e3d['framebuffers'][_0x2c3116(0x40e,0x42e)]['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x2cdab2(_0x236719,_0x16fc7f){return _0xd6681c(_0x236719,_0x16fc7f- -0x26b);}return _0x268e3d['framebuffers'][_0x2cdab2(-0xf3,-0x16f)]['depthTexture'];}},'vertexShaderSource':new Cesium$4[(_0x49f8c9(0x65,0x30))](_0x449d75),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x5ec16a),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0x4a60bb,'depthMask':!![],'blending':_0x4d03d9}),'framebuffer':undefined})};}}var CalculateSpeedShader=_0x41fe3c(0x1c4,0x133),PostProcessingPositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x0a\x0auniform\x20sampler2D\x20H;\x20//\x20particles\x20height\x20textures\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0auniform\x20vec2\x20viewerLonRange;\x0auniform\x20vec2\x20viewerLatRange;\x0a\x0aconst\x20float\x20randomCoefficient\x20=\x200.1f;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0aconst\x20float\x20dropRate\x20=\x200.1f;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0aconst\x20float\x20dropRateBump\x20=\x200.1f;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0avec4\x20getTextureValue(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20vec4\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D);\x0a\x20\x20return\x20result;\x0a}\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0abool\x20particleNoSpeed(vec3\x20particle)\x20{\x0a\x20\x20vec4\x20speed\x20=\x20getTextureValue(particlesSpeed,\x20particle);\x0a\x20\x20return\x20speed.r\x20==\x200.0f\x20&&\x20speed.g\x20==\x200.0f;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0f);\x0a\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20float\x20height\x20=\x20getTextureValue(H,\x20vec3(randomLon,\x20randomLat,\x20lev)).r;\x0a\x0a\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20height);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20viewerLatRange.x\x20||\x20particle.y\x20>\x20viewerLatRange.y\x20||\x20particle.x\x20<\x20viewerLonRange.x\x20||\x20particle.x\x20>\x20viewerLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x0a}\x0a',UpdatePositionShader=_0x4855c4(0x164,0x122);const Cesium$3=mars3d__namespace['Cesium'];class ParticlesComputing{constructor(_0x29ba5e,_0x48d1df,_0x63a82e,_0x438faa){this[_0x32beb5(0x5ca,0x56c)]=_0x48d1df,this[_0x32beb5(0x516,0x56e)](_0x29ba5e,_0x48d1df);function _0x32beb5(_0x123bb6,_0x520ab1){return _0x4855c4(_0x520ab1-0x35a,_0x123bb6);}function _0x52ba29(_0x1ea83b,_0x5a5b38){return _0x4855c4(_0x5a5b38- -0x1b7,_0x1ea83b);}this[_0x52ba29(0xb4,0x2d)](_0x29ba5e,_0x63a82e,_0x438faa),this[_0x32beb5(0x4c4,0x510)](_0x48d1df,_0x63a82e,_0x438faa);}[_0x4855c4(0x214,0x217)](_0x422f75,_0x11cddc){function _0x247cba(_0x32f0b6,_0x32063a){return _0x41fe3c(_0x32063a,_0x32f0b6-0x3ad);}function _0x36c516(_0x31aceb,_0xcf97c){return _0x4855c4(_0xcf97c- -0x10b,_0x31aceb);}var _0x4412ed;const _0x5bb71e={'context':_0x422f75,'width':_0x11cddc['dimensions']['lon'],'height':_0x11cddc[_0x247cba(0x4d8,0x4a7)][_0x36c516(0xbb,0x100)]*(_0x11cddc['dimensions']['lev']||0x1),'pixelFormat':Cesium$3[_0x247cba(0x4c8,0x4a7)][_0x247cba(0x3f2,0x36d)],'pixelDatatype':Cesium$3['PixelDatatype'][_0x36c516(0x6d,0xf1)],'flipY':![],'sampler':new Cesium$3[(_0x247cba(0x3e1,0x416))]({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x36c516(0x136,0xb8)]})};this['windTextures']={'U':Util[_0x247cba(0x3d4,0x416)](_0x5bb71e,_0x11cddc['U']['array']),'V':Util['createTexture'](_0x5bb71e,_0x11cddc['V']['array']),'W':Util['createTexture'](_0x5bb71e,((_0x4412ed=_0x11cddc['W'])===null||_0x4412ed===void 0x0?void 0x0:_0x4412ed['array'])??_0x11cddc['U'][_0x247cba(0x3e4,0x41c)]),'H':Util[_0x247cba(0x3d4,0x446)](_0x5bb71e,_0x11cddc['H']['array'])};}[_0x41fe3c(0x40,0x96)](_0x2eddf7,_0x3838c8,_0x25b367){const _0x169133={'context':_0x2eddf7,'width':_0x3838c8[_0x3b66b8(0x3a8,0x39f)],'height':_0x3838c8[_0x3b66b8(0x3a8,0x3e5)],'pixelFormat':Cesium$3['PixelFormat']['RGBA'],'pixelDatatype':Cesium$3[_0x3b66b8(0x3f7,0x397)]['FLOAT'],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0x54464d(-0x1f7,-0x189)][_0x54464d(-0x1a6,-0x187)],'magnificationFilter':Cesium$3['TextureMagnificationFilter']['NEAREST']})},_0x55150f=this['randomizeParticles'](_0x3838c8['maxParticles'],_0x25b367);function _0x54464d(_0x97f2aa,_0x42026e){return _0x41fe3c(_0x42026e,_0x97f2aa- -0x21b);}function _0x3b66b8(_0x1b5b62,_0x456cdf){return _0x4855c4(_0x1b5b62-0x1cb,_0x456cdf);}const _0x41f980=new Float32Array(0x4*_0x3838c8['maxParticles'])[_0x54464d(-0x206,-0x172)](0x0);this[_0x3b66b8(0x32d,0x3c0)]={'previousParticlesPosition':Util[_0x54464d(-0x1f4,-0x1f5)](_0x169133,_0x55150f),'currentParticlesPosition':Util['createTexture'](_0x169133,_0x55150f),'nextParticlesPosition':Util['createTexture'](_0x169133,_0x55150f),'postProcessingPosition':Util['createTexture'](_0x169133,_0x55150f),'particlesSpeed':Util[_0x54464d(-0x1f4,-0x196)](_0x169133,_0x41f980)};}[_0x41fe3c(0x16,0x30)](_0x546694,_0x2b6ad4){const _0x498eeb=new Float32Array(0x4*_0x546694);for(let _0x57cdbe=0x0;_0x57cdbe<_0x546694;_0x57cdbe++){_0x498eeb[0x4*_0x57cdbe]=Cesium$3[_0x2e7edd(0x30,0x4)]['randomBetween'](_0x2b6ad4[_0x2e7edd(0x1f,0x33)]['x'],_0x2b6ad4['lonRange']['y']),_0x498eeb[0x4*_0x57cdbe+0x1]=Cesium$3[_0x4a25a6(0x59e,0x5d4)]['randomBetween'](_0x2b6ad4[_0x2e7edd(0x26,0x17)]['x'],_0x2b6ad4['latRange']['y']),_0x498eeb[0x4*_0x57cdbe+0x2]=Cesium$3['Math']['randomBetween'](this['data']['lev']['min'],this['data']['lev'][_0x4a25a6(0x5af,0x604)]),_0x498eeb[0x4*_0x57cdbe+0x3]=0x0;}function _0x4a25a6(_0x30209f,_0x4cae2e){return _0x41fe3c(_0x4cae2e,_0x30209f-0x4bd);}function _0x2e7edd(_0x496ff7,_0x4777eb){return _0x4855c4(_0x4777eb- -0x22b,_0x496ff7);}return _0x498eeb;}[_0x41fe3c(0xfd,0x7a)](_0x574e7d){const _0x533039=[_0x574e7d['dimensions']['lon'],_0x574e7d['dimensions']['lat'],_0x574e7d['dimensions']['lev']],_0x5238cd=[_0x574e7d['lon'][_0x2ab31a(0x528,0x4d0)],_0x574e7d['lat']['min'],_0x574e7d['lev'][_0x417149(0x54b,0x580)]],_0x5c8799=[_0x574e7d[_0x2ab31a(0x45e,0x4c9)][_0x2ab31a(0x4b9,0x51d)],_0x574e7d[_0x2ab31a(0x4db,0x4e8)][_0x2ab31a(0x4fa,0x51d)],_0x574e7d[_0x417149(0x605,0x600)]['max']],_0x52098c=[(_0x5c8799[0x0]-_0x5238cd[0x0])/(_0x533039[0x0]-0x1),(_0x5c8799[0x1]-_0x5238cd[0x1])/(_0x533039[0x1]-0x1),_0x533039[0x2]>0x1?(_0x5c8799[0x2]-_0x5238cd[0x2])/(_0x533039[0x2]-0x1):0x1],_0x6abaa5=Math[_0x2ab31a(0x47f,0x4e7)](Math['random']()*_0x574e7d['U']['array']['length']),_0xf3f014=_0x6abaa5%(_0x533039[0x0]*_0x533039[0x1]),_0x4b4c9f=Math['floor'](_0xf3f014/_0x533039[0x0]),_0x18bccc=_0xf3f014%_0x533039[0x0];function _0x2ab31a(_0x579052,_0x43e005){return _0x41fe3c(_0x579052,_0x43e005-0x42b);}const _0x26a4bb=Cesium$3[_0x417149(0x648,0x5bc)][_0x417149(0x5bf,0x539)](_0x5238cd[0x0]+_0x18bccc*_0x52098c[0x0],_0x5238cd[0x0]+(_0x18bccc+0x1)*_0x52098c[0x0]),_0xc3d5b6=Cesium$3[_0x417149(0x5f3,0x5bc)][_0x2ab31a(0x507,0x489)](_0x5238cd[0x1]+(_0x4b4c9f-0x1)*_0x52098c[0x1],_0x5238cd[0x1]+_0x4b4c9f*_0x52098c[0x1]);function _0x417149(_0x528a3c,_0x543587){return _0x4855c4(_0x543587-0x38d,_0x528a3c);}const _0x29dba8=_0x574e7d['H'][_0x417149(0x503,0x512)][_0x6abaa5]||0x0;return[_0x26a4bb,_0xc3d5b6,_0x29dba8];}['destroyParticlesTextures'](){function _0xd906f3(_0x242840,_0x215ff5){return _0x4855c4(_0x215ff5- -0xbb,_0x242840);}Object['keys'](this['particlesTextures'])[_0xd906f3(0x102,0x104)](_0x3d14ab=>{this['particlesTextures'][_0x3d14ab]['destroy']();});}[_0x4855c4(0x1b6,0x19c)](_0x2c9189,_0x34bd9c,_0x3ce5a8){const _0x3b4696=new Cesium$3['Cartesian3'](_0x2c9189['dimensions'][_0x1a7fbf(0x523,0x599)],_0x2c9189['dimensions'][_0x1a7fbf(0x542,0x4c9)],_0x2c9189[_0x2a4b71(0x2ba,0x274)][_0x1a7fbf(0x5aa,0x63e)]),_0x7f76dd=new Cesium$3[(_0x1a7fbf(0x4a5,0x4ae))](_0x2c9189['lon']['min'],_0x2c9189['lat']['min'],_0x2c9189['lev']['min']),_0x5572bd=new Cesium$3['Cartesian3'](_0x2c9189['lon'][_0x2a4b71(0x281,0x250)],_0x2c9189[_0x1a7fbf(0x542,0x4e3)]['max'],_0x2c9189['lev']['max']),_0x4f4d6d=new Cesium$3['Cartesian3']((_0x5572bd['x']-_0x7f76dd['x'])/(_0x3b4696['x']-0x1),(_0x5572bd['y']-_0x7f76dd['y'])/(_0x3b4696['y']-0x1),_0x3b4696['z']>0x1?(_0x5572bd['z']-_0x7f76dd['z'])/(_0x3b4696['z']-0x1):0x1),_0x5e3db6=new Cesium$3[(_0x1a7fbf(0x57d,0x5b1))](_0x2c9189['lon']['min'],_0x2c9189['lon']['max']),_0x9729d9=new Cesium$3[(_0x2a4b71(0x287,0x2e3))](_0x2c9189['lat']['min'],_0x2c9189[_0x1a7fbf(0x542,0x532)]['max']),_0x5ec256=new Cesium$3['Cartesian2'](_0x2c9189['U'][_0x2a4b71(0x234,0x255)],_0x2c9189['U'][_0x2a4b71(0x281,0x260)]),_0x38e105=new Cesium$3['Cartesian2'](_0x2c9189['V']['min'],_0x2c9189['V']['max']),_0x53d0c1=new Cesium$3['Cartesian2'](_0x2c9189['W']['min'],_0x2c9189['W']['max']),_0x259e76=this,_0x33f10d={};_0x33f10d['U']=function(){return _0x259e76['windTextures']['U'];},_0x33f10d['V']=function(){return _0x259e76['windTextures']['V'];},_0x33f10d['W']=function(){return _0x259e76['windTextures']['W'];},_0x33f10d['currentParticlesPosition']=function(){return _0x259e76['particlesTextures']['currentParticlesPosition'];},_0x33f10d['dimension']=function(){return _0x3b4696;},_0x33f10d['minimum']=function(){return _0x7f76dd;},_0x33f10d[_0x2a4b71(0x2bb,0x2ff)]=function(){return _0x5572bd;},_0x33f10d['interval']=function(){return _0x4f4d6d;},_0x33f10d['uSpeedRange']=function(){return _0x5ec256;},_0x33f10d[_0x2a4b71(0x1d7,0x141)]=function(){return _0x38e105;},_0x33f10d[_0x1a7fbf(0x59f,0x5c6)]=function(){return _0x53d0c1;};function _0x2a4b71(_0x3a9461,_0x28fec3){return _0x4855c4(_0x3a9461-0x41,_0x28fec3);}_0x33f10d['speedScaleFactor']=function(){return _0x3ce5a8['pixelSize']*_0x34bd9c['speedFactor'];};const _0x368de7={};_0x368de7[_0x2a4b71(0x19b,0x1c8)]=[CalculateSpeedShader];const _0x2bbaf5={};_0x2bbaf5['sources']=[UpdatePositionShader];const _0x19af07={};function _0x1a7fbf(_0x3b76da,_0x55003f){return _0x41fe3c(_0x55003f,_0x3b76da-0x485);}_0x19af07['sources']=[PostProcessingPositionShader],this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':_0x33f10d,'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x368de7),'outputTexture':this[_0x2a4b71(0x1a3,0x1e3)]['particlesSpeed'],'preExecute':function(){function _0x31a3f6(_0x56a372,_0x1680bc){return _0x1a7fbf(_0x1680bc-0x70,_0x56a372);}function _0x59c041(_0x443ab1,_0x4ea0c8){return _0x2a4b71(_0x4ea0c8- -0x76,_0x443ab1);}if(_0x34bd9c!==undefined&&_0x34bd9c['dynamic']){const _0xf8b6bf=_0x259e76[_0x59c041(0xa8,0x12d)][_0x59c041(0x126,0x12c)];_0x259e76['particlesTextures']['previousParticlesPosition']=_0x259e76['particlesTextures'][_0x59c041(0xf9,0x187)],_0x259e76[_0x59c041(0xeb,0x12d)]['currentParticlesPosition']=_0x259e76[_0x59c041(0xfb,0x12d)]['postProcessingPosition'],_0x259e76['particlesTextures']['postProcessingPosition']=_0xf8b6bf;}_0x259e76['primitives'][_0x59c041(0x1b9,0x185)]['commandToExecute']['outputTexture']=_0x259e76[_0x31a3f6(0x480,0x509)]['particlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':_0x2a4b71(0x27c,0x2b7),'uniformMap':{'currentParticlesPosition':function(){return _0x259e76['particlesTextures']['currentParticlesPosition'];},'particlesSpeed':function(){function _0x3679b2(_0xc25b7d,_0x5a80d8){return _0x1a7fbf(_0xc25b7d- -0x3f4,_0x5a80d8);}return _0x259e76['particlesTextures'][_0x3679b2(0xb0,0x99)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x2bbaf5),'outputTexture':this[_0x2a4b71(0x1a3,0x1a8)]['nextParticlesPosition'],'preExecute':function(){function _0x418f44(_0x4ec41b,_0x2c1763){return _0x2a4b71(_0x4ec41b-0x111,_0x2c1763);}_0x259e76['primitives']['updatePosition'][_0x418f44(0x3a1,0x337)]['outputTexture']=_0x259e76['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':function(){function _0x31b6f9(_0x3b1e77,_0x4190ed){return _0x1a7fbf(_0x3b1e77- -0x440,_0x4190ed);}return _0x259e76['particlesTextures'][_0x31b6f9(0x87,0x93)];},'particlesSpeed':function(){function _0x51a6f3(_0xec230f,_0x3b3327){return _0x1a7fbf(_0xec230f- -0x2bd,_0x3b3327);}return _0x259e76['particlesTextures'][_0x51a6f3(0x1e7,0x277)];},'viewerLonRange':function(){function _0x2bfcb8(_0x1b2ea1,_0x3d0eab){return _0x1a7fbf(_0x1b2ea1- -0x49e,_0x3d0eab);}return _0x3ce5a8[_0x2bfcb8(0xf7,0xe1)];},'viewerLatRange':function(){return _0x3ce5a8['latRange'];},'lonRange':function(){return _0x5e3db6;},'latRange':function(){return _0x9729d9;},'dimension':function(){return _0x3b4696;},'minimum':function(){return _0x7f76dd;},'maximum':function(){return _0x5572bd;},'interval':function(){return _0x4f4d6d;},'H':function(){function _0x386014(_0x334d12,_0x3f20d7){return _0x1a7fbf(_0x334d12- -0x18b,_0x3f20d7);}return _0x259e76[_0x386014(0x3cf,0x45e)]['H'];},'randomCoefficient':function(){function _0x5b1445(_0x2cf784,_0x1813ec){return _0x1a7fbf(_0x1813ec- -0x4e,_0x2cf784);}const _0x36298f=Math[_0x5b1445(0x469,0x4f0)]();return _0x36298f;},'dropRate':function(){function _0x142874(_0x270917,_0x28110a){return _0x2a4b71(_0x28110a- -0x121,_0x270917);}return _0x34bd9c[_0x142874(0x129,0x14b)];},'dropRateBump':function(){function _0x59cfed(_0x73cf84,_0x56577e){return _0x2a4b71(_0x56577e- -0x9a,_0x73cf84);}return _0x34bd9c[_0x59cfed(0x208,0x180)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x19af07),'outputTexture':this[_0x2a4b71(0x1a3,0x141)][_0x2a4b71(0x233,0x290)],'preExecute':function(){function _0x35a8ba(_0x7123d,_0x344fb1){return _0x2a4b71(_0x344fb1- -0x2c3,_0x7123d);}function _0x29d183(_0x534add,_0x24476e){return _0x1a7fbf(_0x24476e- -0x272,_0x534add);}_0x259e76[_0x35a8ba(0x1c,-0x4a)][_0x29d183(0x241,0x2b7)]['commandToExecute']['outputTexture']=_0x259e76[_0x35a8ba(-0x101,-0x120)][_0x35a8ba(-0x8b,-0x90)];}})};}}const Cesium$2=mars3d__namespace['Cesium'];class ParticleSystem{constructor(_0x152e64,_0x409d6d,_0xa8b715,_0x5aac52){function _0x46e783(_0xd3b8a,_0x28b128){return _0x41fe3c(_0x28b128,_0xd3b8a-0x476);}this['context']=_0x152e64,_0x409d6d={..._0x409d6d};_0x409d6d[_0x46e783(0x522,0x48b)]&&_0x409d6d[_0x2d4063(0xba,0x39)]&&(_0x409d6d['dimensions']={},_0x409d6d[_0x46e783(0x5a1,0x572)]['lon']=_0x409d6d['cols'],_0x409d6d['dimensions']['lat']=_0x409d6d[_0x2d4063(0x12b,0x121)],_0x409d6d['dimensions'][_0x2d4063(0xc1,0x13b)]=_0x409d6d['lev']||0x1,_0x409d6d['lon']={},_0x409d6d[_0x2d4063(0x142,0xb4)]['min']=_0x409d6d['xmin'],_0x409d6d[_0x46e783(0x514,0x56d)][_0x2d4063(0x128,0x108)]=_0x409d6d[_0x46e783(0x59c,0x535)],_0x409d6d['lat']={},_0x409d6d[_0x2d4063(0x5b,0xd3)]['min']=_0x409d6d[_0x46e783(0x540,0x570)],_0x409d6d['lat']['max']=_0x409d6d[_0x46e783(0x598,0x52a)],_0x409d6d['lev']={},_0x409d6d[_0x2d4063(0x17a,0x13b)]['min']=_0x409d6d['levmin']??0x1,_0x409d6d['lev']['max']=_0x409d6d['levmax']??0x1,_0x409d6d['U']={},_0x409d6d['U'][_0x2d4063(0x89,0x4d)]=new Float32Array(_0x409d6d['udata']),_0x409d6d['U']['min']=_0x409d6d[_0x46e783(0x57b,0x5b3)]??Math['min'](..._0x409d6d['udata']),_0x409d6d['U']['max']=_0x409d6d[_0x2d4063(0x6,0x9d)]??Math['max'](..._0x409d6d['udata']),_0x409d6d['V']={},_0x409d6d['V'][_0x46e783(0x4ad,0x541)]=new Float32Array(_0x409d6d[_0x46e783(0x499,0x507)]),_0x409d6d['V'][_0x2d4063(0xa1,0xbb)]=_0x409d6d['vmin']??Math['min'](..._0x409d6d['vdata']),_0x409d6d['V'][_0x2d4063(0x19c,0x108)]=_0x409d6d[_0x46e783(0x572,0x56f)]??Math['max'](..._0x409d6d['vdata']));!_0x409d6d['W']&&(_0x409d6d['W']={'array':new Float32Array(_0x409d6d['U']['array']['length']),'min':0x0,'max':0x0});if(!_0x409d6d['H']){var _0x4a5f9e;_0x409d6d['H']={'array':new Float32Array(_0x409d6d['U'][_0x46e783(0x4ad,0x4b6)]['length']),'min':0x0,'max':0x0};if((_0x4a5f9e=_0x409d6d['lev'])!==null&&_0x4a5f9e!==void 0x0&&_0x4a5f9e['array']){const {lon:_0x28c2f4,lat:_0x38ebb0,lev:_0x326ce6}=_0x409d6d['dimensions'];for(let _0x1118ef=0x0;_0x1118ef<_0x326ce6;_0x1118ef++){for(let _0xaa5598=0x0;_0xaa5598<_0x38ebb0;_0xaa5598++){for(let _0xcac2a6=0x0;_0xcac2a6<_0x28c2f4;_0xcac2a6++){const _0x1e4416=_0x1118ef*(_0x28c2f4*_0x38ebb0)+_0xaa5598*_0x28c2f4+_0xcac2a6;_0x409d6d['H']['array'][_0x1e4416]=_0x409d6d['lev'][_0x2d4063(0xa3,0x4d)][_0x1118ef];}}}_0x409d6d['H']['min']=Math[_0x2d4063(0x13d,0xbb)](..._0x409d6d['lev']['array']),_0x409d6d['H']['max']=Math['max'](..._0x409d6d['lev']['array']);}}this['data']=_0x409d6d,this['options']=_0xa8b715,this[_0x2d4063(0x84,0xbf)]=_0x5aac52,this['particlesComputing']=new ParticlesComputing(this[_0x46e783(0x48d,0x415)],this[_0x2d4063(0xbf,0xda)],this['options'],this[_0x2d4063(0x60,0xbf)]);function _0x2d4063(_0x1220b4,_0x310425){return _0x41fe3c(_0x1220b4,_0x310425-0x16);}this['particlesRendering']=new ParticlesRendering(this['context'],this['data'],this['options'],this[_0x46e783(0x51f,0x501)],this['particlesComputing']);}[_0x4855c4(0x266,0x2ca)](_0x28de05){this['particlesComputing'][_0x5956d0(-0x186,-0x182)]();function _0x5da0d1(_0x429913,_0x7f6487){return _0x41fe3c(_0x429913,_0x7f6487-0x78);}Object['keys'](this[_0x5da0d1(0x29,0xa1)]['windTextures'])[_0x5956d0(-0x152,-0x10f)](_0x4ae205=>{this['particlesComputing']['windTextures'][_0x4ae205]['destroy']();}),this[_0x5da0d1(0x17f,0x12d)]['textures'][_0x5da0d1(0x110,0x87)]['destroy'](),Object[_0x5da0d1(0x126,0x1a1)](this[_0x5da0d1(0xb9,0x12d)]['framebuffers'])[_0x5da0d1(0xff,0xe9)](_0x4752f5=>{function _0x27a376(_0x248e64,_0x45e5c5){return _0x5da0d1(_0x248e64,_0x45e5c5-0xad);}this['particlesRendering']['framebuffers'][_0x4752f5][_0x27a376(0x190,0x1a7)]();}),this[_0x5956d0(-0x1ac,-0x21e)]=_0x28de05,this[_0x5956d0(-0x19a,-0x1f1)]=new ParticlesComputing(this[_0x5da0d1(0x1a,0x8f)],this[_0x5da0d1(0x196,0x13c)],this['options'],this['viewerParameters']);function _0x5956d0(_0x4ccd8d,_0x384565){return _0x41fe3c(_0x384565,_0x4ccd8d- -0x1c3);}this['particlesRendering']=new ParticlesRendering(this[_0x5956d0(-0x1ac,-0x23d)],this['data'],this[_0x5956d0(-0xa2,-0x11d)],this['viewerParameters'],this[_0x5da0d1(0xcb,0xa1)]);}['clearFramebuffers'](){function _0x3abd18(_0x5e4d27,_0x138932){return _0x4855c4(_0x138932-0xab,_0x5e4d27);}function _0x552b83(_0x1a2b8b,_0x59ad01){return _0x41fe3c(_0x1a2b8b,_0x59ad01-0x1d1);}const _0x101c10=new Cesium$2['ClearCommand']({'color':new Cesium$2[(_0x3abd18(0x1a4,0x22c))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x552b83(0x303,0x2ba)]['OPAQUE']});Object['keys'](this['particlesRendering']['framebuffers'])[_0x552b83(0x25e,0x242)](_0x2f2cf2=>{_0x101c10[_0x2f18b1(0x4e1,0x49f)]=this[_0x99ec66(0x20b,0x1e7)]['framebuffers'][_0x2f2cf2];function _0x99ec66(_0x13dfb4,_0x586d81){return _0x552b83(_0x13dfb4,_0x586d81- -0x9f);}function _0x2f18b1(_0x34c891,_0xb4f287){return _0x3abd18(_0x34c891,_0xb4f287-0x1b3);}_0x101c10[_0x99ec66(0x1e6,0x157)](this['context']);});}['refreshParticles'](_0x3e98f9,_0x14657e=!![]){function _0x492c13(_0x5a5147,_0x2a8ad4){return _0x41fe3c(_0x5a5147,_0x2a8ad4-0x4a6);}_0x14657e&&(this['clearFramebuffers'](),this['particlesComputing'][_0x492c13(0x531,0x4e3)](),this['particlesComputing']['createParticlesTextures'](this[_0x5968d7(-0x29,-0x92)],this[_0x492c13(0x63f,0x5c7)],this['viewerParameters']));function _0x5968d7(_0x412048,_0xe589b2){return _0x41fe3c(_0xe589b2,_0x412048- -0x40);}if(_0x3e98f9){var _0x383c3b;const _0x51b477=this['particlesRendering']['createSegmentsGeometry'](this['options']);this['particlesRendering']['primitives'][_0x492c13(0x4b4,0x4c7)]['geometry']=_0x51b477;const _0x1186b1=Cesium$2[_0x5968d7(0x24,0xd)]['fromGeometry']({'context':this['context'],'geometry':_0x51b477,'attributeLocations':this['particlesRendering'][_0x5968d7(0xaa,0xcd)]['segments']['attributeLocations'],'bufferUsage':Cesium$2['BufferUsage']['STATIC_DRAW']});(_0x383c3b=this[_0x492c13(0x5b8,0x55b)]['primitives'])!==null&&_0x383c3b!==void 0x0&&(_0x383c3b=_0x383c3b['segments'])!==null&&_0x383c3b!==void 0x0&&_0x383c3b['commandToExecute']&&(this[_0x492c13(0x50f,0x55b)][_0x5968d7(0xaa,0xc7)]['segments']['commandToExecute']['vertexArray']=_0x1186b1);}}['setOptions'](_0x2a4df2){let _0x50a7c4=![];function _0x966c29(_0x501b7d,_0x28918a){return _0x41fe3c(_0x501b7d,_0x28918a-0x263);}this['options']['maxParticles']!==_0x2a4df2['maxParticles']&&(_0x50a7c4=!![]);Object[_0x966c29(0x39d,0x38c)](_0x2a4df2)[_0x966c29(0x2ad,0x2d4)](_0x116116=>{function _0x152071(_0x2c1fad,_0x196687){return _0x1bdd64(_0x2c1fad,_0x196687- -0x33c);}this[_0x152071(0x1ab,0x204)][_0x116116]=_0x2a4df2[_0x116116];});function _0x1bdd64(_0x4d05c1,_0x24c247){return _0x4855c4(_0x24c247-0x2d1,_0x4d05c1);}this['refreshParticles'](_0x50a7c4,_0x2a4df2['dynamic']);}['applyViewerParameters'](_0x511b09){Object[_0x1ede6d(0x2bb,0x336)](_0x511b09)[_0x476260(0x175,0x1a3)](_0x477b1c=>{function _0x4d94fd(_0x590070,_0x3ba491){return _0x476260(_0x3ba491- -0x34e,_0x590070);}this[_0x4d94fd(-0x16b,-0x1a1)][_0x477b1c]=_0x511b09[_0x477b1c];}),this[_0x1ede6d(0x296,0x213)](![]);function _0x476260(_0x7aaf2c,_0x538a54){return _0x41fe3c(_0x538a54,_0x7aaf2c-0x104);}function _0x1ede6d(_0x48768b,_0x383b79){return _0x41fe3c(_0x383b79,_0x48768b-0x192);}!this['options']['dynamic']&&(this[_0x1ede6d(0x2b3,0x2a9)]['dynamic']=!![],this[_0x476260(0x188,0x128)](this['options']),setTimeout(()=>{this['options']['dynamic']=![];function _0x28d93a(_0x2269af,_0x43be7d){return _0x476260(_0x2269af- -0x81,_0x43be7d);}this['setOptions'](this[_0x28d93a(0x1a4,0x115)]);},0x1f4));}[_0x41fe3c(0xad,0x82)](){clearTimeout(this['canrefresh']),this[_0x3ce3f0(0x24c,0x212)]['destroyParticlesTextures'](),Object[_0x4e9520(-0x6,-0x21)](this['particlesComputing']['windTextures'])['forEach'](_0x3a6428=>{function _0x4d0320(_0x106484,_0x5ccaf9){return _0x3ce3f0(_0x5ccaf9- -0x3c2,_0x106484);}this['particlesComputing']['windTextures'][_0x3a6428][_0x4d0320(-0x133,-0x11d)]();}),this[_0x4e9520(-0x7a,-0xa7)][_0x3ce3f0(0x28d,0x22d)][_0x4e9520(-0x120,-0xfb)]['destroy']();function _0x3ce3f0(_0x1ee2d6,_0x51bcfa){return _0x4855c4(_0x1ee2d6-0xd5,_0x51bcfa);}function _0x4e9520(_0x41e486,_0x106691){return _0x41fe3c(_0x106691,_0x41e486- -0x12f);}Object['keys'](this[_0x4e9520(-0x7a,-0xb1)][_0x3ce3f0(0x231,0x261)])['forEach'](_0x2ca2b1=>{function _0x5ddb6f(_0x23734d,_0x19c1b5){return _0x3ce3f0(_0x23734d-0x2ae,_0x19c1b5);}this[_0x5ddb6f(0x586,0x538)]['framebuffers'][_0x2ca2b1]['destroy']();});for(const _0x1d2d95 in this){delete this[_0x1d2d95];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x4855c4(0x1cb,0x24b)],_0x408d12={};_0x408d12[_0x4855c4(0x244,0x2d7)]=0x1000,_0x408d12[_0x4855c4(0x1a7,0x11f)]=0x0,_0x408d12['fadeOpacity']=0.996,_0x408d12['dropRate']=0.003,_0x408d12[_0x4855c4(0x1d9,0x168)]=0.01,_0x408d12['speedFactor']=0.5,_0x408d12['lineWidth']=0x2,_0x408d12['colors']=['rgb(206,255,255)'],_0x408d12['dynamic']=!![];function _0x2482(){const _0x4be306=['outputTexture','viewerParameters','CanvasWindLayer','getDirection','udata','primitiveType','FLOAT','_map','globalCompositeOperation','xmin','trails','SCENE3D','_canrefresh','particlesRendering','rawRenderState','_randomParticle','speedRate','random','visible','394nakLUd','floor','lat','2388946zsYThk','_data','camera','onmessage','mouseMove','canvasContext','data','vertexShaderSource','createWindTextures','DrawCommand','abs','isPointVisible','ymin','commandList','worker','show','resize','preExecute','depthTest','absolute','getRandomLatLng','none','updateViewerParameters','windTextures','get','default','defineProperty','_tomap','mod','Rectangle','colour','dropRate','PixelDatatype','mouseDown','1253158MGTJnC','Math','maxParticles','canvas','94792pXVIBS','_calcUV','0px','Ellipsoid','defines','Pass','primitives','fragmentShaderSource','EventType','Compute','enabled','lineTo','moveTo','5862hgpqER','max','framebuffer','latRange','all','particlesNumber','grid','Cartesian2','setData','UNSIGNED_INT','colors','vmax','style','_drawLines','fromDegrees','LayerUtil','commandToExecute','attributeLocations','round','refreshParticles','umin','_createCanvas','mars3d-canvasWind','speed','redraw','createRenderingPrimitives','rows','preRender','_updateIng2','maxAge','off','lonRange','pow','minimumRadius','_addedHook','blending','ShaderSource','width','cancelAnimationFrame','canvasResize','currentTrails','wSpeedRange','PixelFormat','TRIANGLES','hidden','isDestroyed','4422630KWGKFw','_onMapWhellEvent','options','ymax','clear','initWorker','lev','xmax','red','create','keys','getU','dimensions','maximum','tlng','ceil','age','clearCommand','scene','tlat','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20W;\x20//\x20upward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0auniform\x20float\x20speedScaleFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20//\x20map\x20the\x20z-axis\x20value\x20to\x20the\x20nearest\x20bit\x20plane\x20to\x20ensure\x20that\x20the\x20result\x20is\x20an\x20integer\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205,\x207,\x208,\x209],\x20width\x20=\x202,\x20height\x20=\x202,\x20level\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x206\x207\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x202\x203\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0afloat\x20interpolateTexture(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x201.0f\x20*\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x201.0f\x20*\x20interval.y;\x0a\x0a\x20\x20float\x20lon0_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon1_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon0_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat1,\x20lev));\x0a\x20\x20float\x20lon1_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat1,\x20lev));\x0a\x0a\x20\x20float\x20lon_lat0\x20=\x20mix(lon0_lat0,\x20lon1_lat0,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat1\x20=\x20mix(lon0_lat1,\x20lon1_lat1,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat\x20=\x20mix(lon_lat0,\x20lon_lat1,\x20lat\x20-\x20lat0);\x0a\x20\x20return\x20lon_lat;\x0a}\x0a\x0avec3\x20linearInterpolation(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bilinear_interpolation\x0a\x20\x20float\x20u\x20=\x20interpolateTexture(U,\x20lonLatLev);\x0a\x20\x20float\x20v\x20=\x20interpolateTexture(V,\x20lonLatLev);\x0a\x20\x20float\x20w\x20=\x20interpolateTexture(W,\x20lonLatLev);\x0a\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec3\x20convertSpeedUnitToLonLat(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20float\x20w\x20=\x20speed.z;\x0a\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20return\x20windVectorInLonLatLev;\x0a}\x0a\x0avec3\x20calculateSpeedByRungeKutta2(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec3\x20y_n\x20=\x20lonLatLev;\x0a\x20\x20vec3\x20f_n\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec3\x20speed\x20=\x20h\x20*\x20linearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20getRange(vec2\x20range)\x20{\x0a\x20\x20float\x20x1\x20=\x200.0f\x20-\x20range.x;\x0a\x20\x20float\x20x2\x20=\x20range.y\x20-\x200.0f;\x0a\x20\x20if(x1\x20<\x200.0f\x20||\x20x2\x20<\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(abs(x1),\x20abs(x2));\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x20abs(max(x1,\x20x2)));\x0a\x20\x20}\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20vec2\x20uRange\x20=\x20getRange(uSpeedRange);\x0a\x20\x20vec2\x20vRange\x20=\x20getRange(vSpeedRange);\x0a\x20\x20vec2\x20wRange\x20=\x20getRange(wSpeedRange);\x0a\x20\x20if(length(speed.xyz)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x200.0f;\x0a\x20\x20}\x0a\x0a\x20\x20percent.x\x20=\x20(abs(speed.x)\x20-\x20uRange.x)\x20/\x20(uRange.y\x20-\x20uRange.x);\x0a\x20\x20percent.y\x20=\x20(abs(speed.y)\x20-\x20vRange.x)\x20/\x20(vRange.y\x20-\x20vRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(abs(speed.z)\x20-\x20wRange.x)\x20/\x20(wRange.y\x20-\x20wRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speedOrigin\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLatLev);\x0a\x20\x20vec3\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLatLev,\x20speed);\x0a\x0a\x20\x20vec4\x20particleSpeed\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speed\x20/\x20speedScaleFactor));\x0a\x20\x20\x20\x20//\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','1794oVnEMy','toDegrees','STATIC_DRAW','_animateFrame','push','createSegmentsGeometry','sources','RGB','framebuffers','colorTable','lineWidth','_maxAge','blue','previousParticlesPosition','particlesTextures','fill','#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x20Unit\x20converted\x20to\x20degrees\x20of\x20longitude\x20and\x20latitude\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20speed;\x0a\x20\x20if(length(speed.rgb)\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a','context','windData','toWindowCoordinates','GeometryAttribute','_onMap_preRenderEvent','sqrt','defined','#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0aout\x20vec4\x20fragColor;\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0f\x20*\x20trailsColor)\x20/\x20255.0f;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20if(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20pointsColor;\x0a\x20\x20}\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20trailsColor;\x0a\x20\x20}\x0a\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a','particlesSpeed','Cartesian3','segments','isInExtent','vdata','TextureMinificationFilter','execute','_onMouseUpEvent','createTexture','mouse_move','particlesComputing','removeAll','__esModule','RGBA','south','mouse_down','Cesium','randomizeParticles','geometry','ComponentDatatype','Color','Sampler','800032uHgrSj','reverseY','array','refreshTimer','globeBoundingSphere','viewport','createRawRenderState','_onMouseDownEvent','destroyParticlesTextures','layer','now','add','getColor','nextParticlesPosition','getParticles','frameTime','RED','postMessage','lighter','vSpeedRange','visibility','autoClear','destroyObject','dynamic','reverse','type','owner','globe','ComputeCommand','getContext','windField','createRenderingTextures','setDate','segmentsDepth','mouseHidden','north','fixedHeight','cols','_mountedHook','getFullscreenQuad','canvasHeight','randomBetween','fromGeometry','clampToLatitudeRange','pixelSize','EllipsoidalOccluder','depthMask','VertexArray','711nBdFJF','bind','position','createComputingPrimitives','clientHeight','textures','particleSystem','calculateSpeed','Draw','currentParticlesPosition','DISABLE_GL_POSITION_LOG_DEPTH','lng','forEach','1690kQbGFD','drawingBufferHeight','talt','NEAREST','PI_OVER_TWO','ColorRamp','depthTexture','length','getValidRange','wheel','color','BaseLayer','pointerEvents','update','OPAQUE','drawingBufferWidth','destroy','_bilinearInterpolation','setOptions','_speedRate','getUVByXY','umax','addPrimitives','Appearance','uniformMap','dropRateBump','TWO_PI','height','_updateIng','particlesTextureSize','vertexArray','_onMouseMoveEvent','computeViewRectangle','_colorRamp','DepthFunction','GeometryAttributes','createParticlesTextures','speedFactor','_pointerEvents','zIndex','CanvasWindField','container','nextTrails','WindUtil','lon','SceneMode','particles','bindEvent','east','particleHeight','postProcessingPosition','min','fadeOpacity','getV'];_0x2482=function(){return _0x4be306;};return _0x2482();}const DEF_OPTIONS=_0x408d12;class WindLayer extends BaseLayer$1{constructor(_0x12eff6={}){_0x12eff6={...DEF_OPTIONS,..._0x12eff6},super(_0x12eff6),this['_setOptionsHook'](_0x12eff6);}get['layer'](){function _0x39e45a(_0x1e30c3,_0x28869e){return _0x41fe3c(_0x28869e,_0x1e30c3-0xf8);}return this[_0x39e45a(0x1e2,0x243)];}get[_0x41fe3c(0x36,0xc4)](){function _0x21539d(_0xeb6c0e,_0x49df39){return _0x4855c4(_0xeb6c0e- -0x25,_0x49df39);}return this[_0x21539d(0x1e8,0x1c5)];}set[_0x41fe3c(0x131,0xc4)](_0x336684){this['setData'](_0x336684);}get['colors'](){function _0x564af5(_0x1d8e61,_0x38ca26){return _0x4855c4(_0x1d8e61-0xce,_0x38ca26);}return this[_0x564af5(0x33d,0x3c2)]['colors'];}set['colors'](_0x256c66){this[_0x569169(0x105,0x123)][_0x569169(0xed,0xfd)]=_0x256c66;if(this['particleSystem']){const _0x5ed95d={};_0x5ed95d['colors']=_0x256c66,this[_0x2d3f92(-0x16e,-0x10d)]['setOptions'](_0x5ed95d);}function _0x2d3f92(_0x22dfeb,_0x4676b1){return _0x4855c4(_0x22dfeb- -0x327,_0x4676b1);}function _0x569169(_0x355394,_0x3aad04){return _0x41fe3c(_0x355394,_0x3aad04-0x2);}this[_0x2d3f92(-0x10b,-0x10b)]();}['_mountedHook'](){}[_0x41fe3c(0xc8,0x113)](){this[_0x335dbb(-0x59,-0x2b)]=this['_map']['scene'],this['camera']=this['_map']['camera'];function _0x335dbb(_0x3413b4,_0x170a35){return _0x41fe3c(_0x170a35,_0x3413b4- -0x18a);}this['primitives']=new Cesium$1['PrimitiveCollection'](),this['_map']['scene'][_0x335dbb(-0xa0,-0xf8)]['add'](this['primitives']),this['viewerParameters']={'lonRange':new Cesium$1[(_0x4a139e(0x593,0x565))](),'latRange':new Cesium$1[(_0x4a139e(0x59b,0x565))](),'pixelSize':0x0,'lonDisplayRange':new Cesium$1['Cartesian2'](),'latDisplayRange':new Cesium$1[(_0x4a139e(0x5c2,0x565))]()},this[_0x335dbb(-0x151,-0x122)]=new Cesium$1['BoundingSphere'](Cesium$1[_0x4a139e(0x501,0x48d)]['ZERO'],Cesium$1[_0x4a139e(0x4c5,0x554)]['WGS84'][_0x335dbb(-0x78,-0xee)]),this[_0x4a139e(0x53b,0x541)](),window['addEventListener']('resize',this['resize'][_0x335dbb(-0x124,-0x152)](this),![]),this['mouse_down']=![],this['mouse_move']=![],this[_0x335dbb(-0xdb,-0xe5)]['on'](mars3d__namespace[_0x335dbb(-0x9e,-0x8c)][_0x4a139e(0x540,0x4e8)],this[_0x335dbb(-0x6a,-0x8f)],this);function _0x4a139e(_0x1a8b10,_0x5ec9ef){return _0x41fe3c(_0x1a8b10,_0x5ec9ef-0x46d);}this['_map']['on'](mars3d__namespace['EventType'][_0x335dbb(-0xab,-0x106)],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace[_0x335dbb(-0x9e,-0x12b)]['mouseUp'],this[_0x335dbb(-0x164,-0x1b2)],this),this['_map']['on'](mars3d__namespace[_0x4a139e(0x538,0x559)]['mouseMove'],this['_onMouseMoveEvent'],this),this['_data']&&this['setData'](this[_0x4a139e(0x4c2,0x52c)]);}['_removedHook'](){window['removeEventListener'](_0x43eea6(-0x1de,-0x188),this['resize']),this[_0x43eea6(-0x189,-0x1a7)]['off'](mars3d__namespace['EventType'][_0x43eea6(-0x1ca,-0x14a)],this[_0x43eea6(-0x23b,-0x23b)],this),this['_map']['off'](mars3d__namespace[_0xf234df(0x294,0x285)]['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0x43eea6(-0xf8,-0x177)],this['_onMouseDownEvent'],this),this['_map'][_0xf234df(0x2bf,0x2a8)](mars3d__namespace[_0x43eea6(-0x173,-0x16a)]['mouseUp'],this['_onMouseUpEvent'],this),this['_map'][_0x43eea6(-0x1de,-0x147)](mars3d__namespace['EventType'][_0x43eea6(-0x100,-0x194)],this['_onMouseMoveEvent'],this);function _0xf234df(_0x3c4b1b,_0x2273a5){return _0x4855c4(_0x2273a5-0x4b,_0x3c4b1b);}function _0x43eea6(_0x300db5,_0x5b2842){return _0x4855c4(_0x5b2842- -0x3a4,_0x300db5);}this[_0x43eea6(-0x18d,-0x16c)][_0x43eea6(-0x242,-0x22c)](),this['_map'][_0xf234df(0x30c,0x2ca)]['primitives']['remove'](this[_0x43eea6(-0x11a,-0x16c)]);}[_0x41fe3c(0x65,0xce)](){function _0x54398b(_0x33c442,_0x3c9ea3){return _0x41fe3c(_0x3c9ea3,_0x33c442-0x68);}if(!this['show']||!this['particleSystem'])return;function _0x23e319(_0x22198c,_0x44d116){return _0x4855c4(_0x44d116-0x274,_0x22198c);}this[_0x23e319(0x504,0x4ac)]['show']=![],this['primitives'][_0x54398b(0x92,0xcb)](),this['_map']['once'](mars3d__namespace['EventType']['preRender'],this['_onMap_preRenderEvent'],this);}['_onMap_preRenderEvent'](_0x4873b9){function _0x30401b(_0x2402db,_0x30df7b){return _0x4855c4(_0x2402db- -0x242,_0x30df7b);}this['particleSystem']['canvasResize'](this['scene']['context']),this['addPrimitives'](),this[_0x30401b(-0xa,0x84)]['show']=!![];}['_onMapWhellEvent'](_0x2eccd0){function _0x1ce7e1(_0x5ce4fe,_0x3604b7){return _0x41fe3c(_0x3604b7,_0x5ce4fe-0xdf);}clearTimeout(this['refreshTimer']);if(!this[_0x1ce7e1(0x1ac,0x212)]||!this['particleSystem'])return;this['primitives']['show']=![],this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;this['redraw']();},0xc8);}[_0x4855c4(0x18a,0x1b9)](_0x58dfb9){function _0x58c83b(_0x326f74,_0x3b62e){return _0x4855c4(_0x326f74-0x54,_0x3b62e);}this[_0x58c83b(0x1d0,0x215)]=!![];}['_onMouseMoveEvent'](_0x232942){if(!this['show']||!this['particleSystem'])return;function _0xdb2566(_0xf036b,_0x28d7dd){return _0x4855c4(_0x28d7dd-0x3cb,_0xf036b);}function _0x4d8278(_0x5b1516,_0x4cc799){return _0x4855c4(_0x5b1516-0x3cc,_0x4cc799);}this[_0xdb2566(0x590,0x547)]&&(this['primitives'][_0xdb2566(0x596,0x5e6)]=![],this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x560f41){if(!this[_0x37ffe6(0x1fc,0x226)]||!this['particleSystem'])return;this['mouse_down']&&this[_0xc5c0ab(0x508,0x4ab)]&&this['redraw']();this['primitives']['show']=!![],this[_0xc5c0ab(0x464,0x4b1)]=![];function _0xc5c0ab(_0x12d84b,_0x43a352){return _0x4855c4(_0x43a352-0x335,_0x12d84b);}function _0x37ffe6(_0x49c7c6,_0x57e124){return _0x41fe3c(_0x49c7c6,_0x57e124-0x159);}this['mouse_move']=![];}[_0x4855c4(0x257,0x2b8)](){function _0x1a13b4(_0x4c069f,_0x122e79){return _0x4855c4(_0x4c069f-0x337,_0x122e79);}if(!this['_map']||!this[_0x2993be(0x1d2,0x216)])return;this['updateViewerParameters']();function _0x2993be(_0x42c474,_0x3e47c0){return _0x41fe3c(_0x3e47c0,_0x42c474-0x105);}this[_0x1a13b4(0x4f0,0x485)]['applyViewerParameters'](this['viewerParameters']),this[_0x2993be(0x1ef,0x208)]['show']=!![];}['setData'](_0xc28cb7){this['_data']=_0xc28cb7;function _0x4f243c(_0x466ae8,_0x428c68){return _0x41fe3c(_0x428c68,_0x466ae8-0x284);}this['particleSystem']&&this['particleSystem']['destroy']();this['particleSystem']=new ParticleSystem(this['scene'][_0x4f243c(0x29b,0x2ca)],_0xc28cb7,this['getOptions'](),this[_0x14403f(-0x69,-0x97)]);function _0x14403f(_0x4fbf6b,_0x4b0fb1){return _0x41fe3c(_0x4fbf6b,_0x4b0fb1- -0x140);}this[_0x14403f(-0xe7,-0xb8)]();}['_setOptionsHook'](_0x1635a9,_0x1046ef){if(_0x1635a9)for(const _0x3ed777 in _0x1635a9){this[_0x3ed777]=_0x1635a9[_0x3ed777];}function _0x3c0cee(_0x1bf2dd,_0x3589bb){return _0x41fe3c(_0x1bf2dd,_0x3589bb-0x1c8);}this[_0x3c0cee(0x264,0x233)]&&this['particleSystem']['setOptions'](this['getOptions']());}['getOptions'](){const _0x15f858=Math[_0x127872(0x203,0x25f)](Math[_0x127872(0x1c4,0x14d)](this[_0x127872(0x245,0x227)]));this['particlesNumber']=_0x15f858*_0x15f858;const _0xa708d5={};function _0x47d863(_0x5c0476,_0x5b0b80){return _0x4855c4(_0x5b0b80- -0x32e,_0x5c0476);}_0xa708d5['particlesTextureSize']=_0x15f858,_0xa708d5['maxParticles']=this['particlesNumber'],_0xa708d5[_0x127872(0x1c5,0x22c)]=this[_0x47d863(-0x17b,-0xe5)],_0xa708d5['particleHeight']=this[_0x127872(0x164,0x18a)],_0xa708d5[_0x127872(0x226,0x1d7)]=this['fadeOpacity'],_0xa708d5[_0x47d863(-0x96,-0x103)]=this['dropRate'],_0xa708d5['dropRateBump']=this[_0x47d863(-0x174,-0x155)];function _0x127872(_0x595397,_0x228882){return _0x4855c4(_0x228882- -0x1d,_0x595397);}return _0xa708d5[_0x127872(0x194,0x1c8)]=this['speedFactor'],_0xa708d5['lineWidth']=this['lineWidth'],_0xa708d5['dynamic']=this[_0x127872(0x10a,0x17d)],_0xa708d5;}[_0x4855c4(0x1d6,0x173)](){function _0x3bb3ba(_0x36216d,_0x5be355){return _0x41fe3c(_0x5be355,_0x36216d-0x447);}function _0xee47c9(_0x1e8c41,_0x4958f2){return _0x41fe3c(_0x1e8c41,_0x4958f2-0x368);}this[_0x3bb3ba(0x531,0x525)][_0x3bb3ba(0x487,0x4ba)](this['particleSystem']['particlesComputing']['primitives']['calculateSpeed']),this['primitives'][_0x3bb3ba(0x487,0x439)](this['particleSystem']['particlesComputing']['primitives']['updatePosition']),this[_0x3bb3ba(0x531,0x500)]['add'](this['particleSystem']['particlesComputing'][_0xee47c9(0x3f9,0x452)]['postProcessingPosition']),this['primitives'][_0xee47c9(0x312,0x3a8)](this['particleSystem']['particlesRendering'][_0x3bb3ba(0x531,0x529)]['segments']),this['primitives']['add'](this['particleSystem']['particlesRendering'][_0xee47c9(0x4ca,0x452)]['trails']),this['primitives']['add'](this['particleSystem'][_0xee47c9(0x409,0x41d)][_0xee47c9(0x468,0x452)]['screen']);}[_0x4855c4(0x222,0x209)](){function _0x53a62b(_0x1637d7,_0x5861d9){return _0x4855c4(_0x1637d7-0x109,_0x5861d9);}let _0x9f27c0=this[_0x550c4a(0x140,0x1b4)][_0x550c4a(0x112,0x1a9)](this['scene'][_0x550c4a(0xd0,0x70)]['ellipsoid']);if(!_0x9f27c0){const _0x5f0aef=this[_0x550c4a(0x12f,0xf7)]['getExtent']();_0x9f27c0=Cesium$1['Rectangle']['fromDegrees'](_0x5f0aef['xmin'],_0x5f0aef['ymin'],_0x5f0aef['xmax'],_0x5f0aef['ymax']);}function _0x550c4a(_0x191118,_0x27777c){return _0x41fe3c(_0x27777c,_0x191118-0x80);}const _0x450f43=Util['viewRectangleToLonLatRange'](_0x9f27c0);this[_0x550c4a(0x13f,0x1b5)]?(this['viewerParameters']['lonRange']['x']=Math['max'](_0x450f43['lon']['min'],this[_0x550c4a(0x13f,0x14f)]['xmin']),this['viewerParameters'][_0x53a62b(0x367,0x2ec)]['y']=Math['min'](_0x450f43['lon']['max'],this[_0x53a62b(0x316,0x2bc)][_0x53a62b(0x37d,0x400)]),this['viewerParameters'][_0x550c4a(0x174,0x1d3)]['x']=Math['max'](_0x450f43['lat']['min'],this[_0x550c4a(0x13f,0x114)]['ymin']),this['viewerParameters'][_0x53a62b(0x34b,0x3be)]['y']=Math[_0x53a62b(0x2fc,0x27e)](_0x450f43['lat']['max'],this[_0x550c4a(0x13f,0x1ce)][_0x550c4a(0x1a2,0x1b2)])):(this[_0x53a62b(0x300,0x2ca)]['lonRange']['x']=_0x450f43['lon']['min'],this['viewerParameters']['lonRange']['y']=_0x450f43['lon']['max'],this['viewerParameters']['latRange']['x']=_0x450f43['lat'][_0x550c4a(0x125,0x192)],this[_0x53a62b(0x300,0x394)][_0x550c4a(0x174,0x1c7)]['y']=_0x450f43['lat']['max']);let _0x42e39c=this[_0x550c4a(0x140,0x10f)]['getPixelSize'](this['globeBoundingSphere'],this['scene']['drawingBufferWidth'],this['scene']['drawingBufferHeight']);const _0x56a799=this['scene'][_0x53a62b(0x2ca,0x333)]*0.3;_0x42e39c<_0x56a799&&(_0x42e39c=_0x56a799),this['viewerParameters']['pixelSize']=_0x42e39c;}}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace[_0x41fe3c(0xc1,0x3e)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x12fcdf(_0x3d825e,_0x1a5376){return _0x41fe3c(_0x1a5376,_0x3d825e- -0x8);}this['lng']=null,this[_0x334a45(-0x32,-0x40)]=null;function _0x334a45(_0x146a7,_0x510894){return _0x4855c4(_0x146a7- -0x23d,_0x510894);}this[_0x334a45(0x3e,0xe)]=null,this[_0x12fcdf(0x12a,0xb5)]=null,this[_0x334a45(0x40,0x59)]=null,this[_0x12fcdf(0x100,0x13b)]=null;}[_0x41fe3c(0xe4,0x82)](){for(const _0x3a69c1 in this){delete this[_0x3a69c1];}}}function _0x4855c4(_0x12203d,_0x1fbf02){return _0x121b(_0x12203d- -0x25,_0x1fbf02);}class CanvasWindField{constructor(_0x335c7e){this['setOptions'](_0x335c7e);}get[_0x4855c4(0x206,0x1f8)](){function _0x2abf91(_0xd1cf9e,_0xe4a88){return _0x41fe3c(_0xe4a88,_0xd1cf9e-0x128);}return this[_0x2abf91(0x1ad,0x1b8)];}set['speedRate'](_0x571c90){function _0x55ba8c(_0x4e0c41,_0x372594){return _0x41fe3c(_0x4e0c41,_0x372594-0x32c);}this[_0x22fd23(0x6a,0x57)]=(0x64-(_0x571c90>0x63?0x63:_0x571c90))*0x64;function _0x22fd23(_0x670e6c,_0x2b9151){return _0x4855c4(_0x670e6c- -0x169,_0x2b9151);}this['_calc_speedRate']=[(this['xmax']-this['xmin'])/this['_speedRate'],(this[_0x22fd23(0x107,0xce)]-this[_0x55ba8c(0x35f,0x3f6)])/this['_speedRate']];}get['maxAge'](){function _0x18f350(_0x23472a,_0x56b48b){return _0x4855c4(_0x56b48b-0x394,_0x23472a);}return this[_0x18f350(0x475,0x4f3)];}set[_0x41fe3c(0x118,0x10e)](_0x2f4820){this['_maxAge']=_0x2f4820;}[_0x41fe3c(0x111,0x84)](_0x35a6de){function _0x447653(_0x3182a8,_0x5dd467){return _0x41fe3c(_0x5dd467,_0x3182a8-0x1ee);}this['options']=_0x35a6de,this[_0x447653(0x2fc,0x270)]=_0x35a6de[_0x53e658(-0x152,-0xc8)]||0x78,this[_0x53e658(-0xe6,-0x11e)]=_0x35a6de['speedRate']||0x32;function _0x53e658(_0x1f6c31,_0x3d80cb){return _0x41fe3c(_0x1f6c31,_0x3d80cb- -0x1d6);}this['particles']=[];const _0x56b269=_0x35a6de[_0x53e658(-0xa7,-0xe0)]||0x1000;for(let _0x5b12c8=0x0;_0x5b12c8<_0x56b269;_0x5b12c8++){const _0x277be2=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x277be2);}}['setDate'](_0x22cba2){this[_0x16c512(0x40f,0x412)]=_0x22cba2['rows'],this['cols']=_0x22cba2['cols'],this['xmin']=_0x22cba2['xmin'],this[_0x16ee01(0xa,0x3a)]=_0x22cba2[_0x16ee01(0xa,-0x3a)];function _0x16c512(_0x3626a1,_0x560f96){return _0x4855c4(_0x3626a1-0x1b6,_0x560f96);}this['ymin']=_0x22cba2[_0x16ee01(-0x52,-0xd2)],this[_0x16ee01(0x6,0x5f)]=_0x22cba2['ymax'],this['grid']=[];const _0x9ce3f7=_0x22cba2['udata'],_0x2e831c=_0x22cba2[_0x16c512(0x327,0x3bb)];let _0x5e6680=![];function _0x16ee01(_0x4c9df7,_0x12db59){return _0x41fe3c(_0x12db59,_0x4c9df7- -0x11c);}_0x9ce3f7[_0x16ee01(-0xa3,-0x18)]===this['rows']&&_0x9ce3f7[0x0]['length']===this['cols']&&(_0x5e6680=!![]);let _0x18b882=0x0,_0x445f70=null,_0x4d41b9=null;for(let _0x5412f2=0x0;_0x5412f2<this['rows'];_0x5412f2++){_0x445f70=[];for(let _0x307c46=0x0;_0x307c46<this['cols'];_0x307c46++,_0x18b882++){_0x5e6680?_0x4d41b9=this['_calcUV'](_0x9ce3f7[_0x5412f2][_0x307c46],_0x2e831c[_0x5412f2][_0x307c46]):_0x4d41b9=this[_0x16ee01(-0x37,0x36)](_0x9ce3f7[_0x18b882],_0x2e831c[_0x18b882]),_0x445f70[_0x16ee01(-0x112,-0x160)](_0x4d41b9);}this[_0x16ee01(-0x25,-0xa0)]['push'](_0x445f70);}this['options'][_0x16ee01(-0xe6,-0x6b)]&&this[_0x16ee01(-0x25,0x1a)][_0x16c512(0x351,0x313)]();}[_0x41fe3c(0x1a3,0x123)](){function _0x5df811(_0x15a156,_0x274a3c){return _0x4855c4(_0x15a156-0x312,_0x274a3c);}delete this['rows'];function _0x12af7f(_0xeed7eb,_0x3c6d70){return _0x41fe3c(_0x3c6d70,_0xeed7eb-0x517);}delete this[_0x12af7f(0x571,0x5ab)],delete this[_0x5df811(0x511,0x483)],delete this['xmax'],delete this['ymin'],delete this[_0x5df811(0x582,0x59e)],delete this['grid'],delete this['particles'];}['toGridXY'](_0x1e50ab,_0x3e6048){const _0x27cc12=(_0x1e50ab-this['xmin'])/(this[_0x504425(0x425,0x3ff)]-this['xmin'])*(this['cols']-0x1);function _0x504425(_0x174da4,_0x5bfd85){return _0x41fe3c(_0x5bfd85,_0x174da4-0x2ff);}const _0x40c3f9=(this[_0x504425(0x421,0x473)]-_0x3e6048)/(this[_0x165276(0x295,0x316)]-this[_0x504425(0x3c9,0x369)])*(this['rows']-0x1);function _0x165276(_0x316a5a,_0x196db9){return _0x4855c4(_0x316a5a-0x25,_0x196db9);}return[_0x27cc12,_0x40c3f9];}['getUVByXY'](_0x1916ed,_0x49049e){if(_0x1916ed<0x0||_0x1916ed>=this['cols']||_0x49049e>=this['rows'])return[0x0,0x0,0x0];const _0x148ae2=Math['floor'](_0x1916ed),_0x2e28d9=Math['floor'](_0x49049e);if(_0x148ae2===_0x1916ed&&_0x2e28d9===_0x49049e)return this['grid'][_0x49049e][_0x1916ed];const _0x4e9097=_0x148ae2+0x1;function _0xc3e15(_0x3ccb77,_0x38297c){return _0x41fe3c(_0x38297c,_0x3ccb77-0xff);}const _0x58932d=_0x2e28d9+0x1,_0x5a7833=this[_0xc3e15(0x185,0x1ab)](_0x148ae2,_0x2e28d9),_0x5d1cb8=this['getUVByXY'](_0x4e9097,_0x2e28d9),_0x4ff886=this['getUVByXY'](_0x148ae2,_0x58932d);function _0x2b08b1(_0xcc17ac,_0x29dc4c){return _0x4855c4(_0xcc17ac-0xea,_0x29dc4c);}const _0x5adbd3=this['getUVByXY'](_0x4e9097,_0x58932d);let _0x2b6eb2=null;try{_0x2b6eb2=this[_0xc3e15(0x182,0x211)](_0x1916ed-_0x148ae2,_0x49049e-_0x2e28d9,_0x5a7833,_0x5d1cb8,_0x4ff886,_0x5adbd3);}catch(_0x2f326e){console['log'](_0x1916ed,_0x49049e);}return _0x2b6eb2;}[_0x41fe3c(0x19,0x83)](_0x1d05d4,_0x3fb407,_0x3ce84e,_0x48108c,_0xc84746,_0x53324d){const _0x226160=0x1-_0x1d05d4,_0x4be9b0=0x1-_0x3fb407,_0x4819ce=_0x226160*_0x4be9b0,_0x4daf0c=_0x1d05d4*_0x4be9b0,_0x514ed0=_0x226160*_0x3fb407,_0xbf0727=_0x1d05d4*_0x3fb407,_0x3836d1=_0x3ce84e[0x0]*_0x4819ce+_0x48108c[0x0]*_0x4daf0c+_0xc84746[0x0]*_0x514ed0+_0x53324d[0x0]*_0xbf0727,_0x5723fe=_0x3ce84e[0x1]*_0x4819ce+_0x48108c[0x1]*_0x4daf0c+_0xc84746[0x1]*_0x514ed0+_0x53324d[0x1]*_0xbf0727;return this['_calcUV'](_0x3836d1,_0x5723fe);}['_calcUV'](_0x3d1888,_0x5a01bb){function _0x4d1ae1(_0x324c25,_0x4c7f2c){return _0x4855c4(_0x324c25-0x138,_0x4c7f2c);}return[+_0x3d1888,+_0x5a01bb,Math[_0x4d1ae1(0x2a2,0x238)](_0x3d1888*_0x3d1888+_0x5a01bb*_0x5a01bb)];}['getUVByPoint'](_0x2fe705,_0x237568){function _0x50bd95(_0x1ff285,_0x5a950c){return _0x41fe3c(_0x5a950c,_0x1ff285- -0x22c);}if(!this[_0x19b396(-0xae,-0x5a)](_0x2fe705,_0x237568))return null;const _0x3b32db=this['toGridXY'](_0x2fe705,_0x237568),_0x4f6cdb=this[_0x19b396(-0x4a,-0xb7)](_0x3b32db[0x0],_0x3b32db[0x1]);function _0x19b396(_0x409e20,_0x5a75f8){return _0x41fe3c(_0x5a75f8,_0x409e20- -0xd0);}return _0x4f6cdb;}['isInExtent'](_0x1d4b56,_0x3033d1){function _0x17db8c(_0x1cfbd4,_0x800a47){return _0x41fe3c(_0x1cfbd4,_0x800a47-0x44b);}return _0x1d4b56>=this['xmin']&&_0x1d4b56<=this['xmax']&&_0x3033d1>=this['ymin']&&_0x3033d1<=this[_0x17db8c(0x563,0x56d)]?!![]:![];}[_0x41fe3c(0x57,0xd2)](){const _0x368b10=fRandomByfloat(this[_0x42ea03(0x36c,0x3a7)],this['xmax']),_0x5e5a9e=fRandomByfloat(this['ymin'],this['ymax']),_0x594c22={};_0x594c22['lat']=_0x5e5a9e;function _0x2296cc(_0x4e90a5,_0x4ee92d){return _0x41fe3c(_0x4ee92d,_0x4e90a5-0x377);}_0x594c22[_0x42ea03(0x2e4,0x366)]=_0x368b10;function _0x42ea03(_0x247bc3,_0x447c26){return _0x4855c4(_0x447c26-0x1a8,_0x247bc3);}return _0x594c22;}[_0x41fe3c(-0x4b,0x43)](){function _0x215a38(_0x3dddaf,_0x45e39d){return _0x4855c4(_0x45e39d- -0x187,_0x3dddaf);}let _0x458105,_0x1d7247,_0x3ed00e;function _0x119e7f(_0xd6ade6,_0x54efeb){return _0x4855c4(_0x54efeb-0x1be,_0xd6ade6);}for(let _0x1fae6b=0x0,_0x1d5c8f=this['particles'][_0x119e7f(0x390,0x385)];_0x1fae6b<_0x1d5c8f;_0x1fae6b++){let _0x4b623c=this[_0x215a38(0xdd,0x67)][_0x1fae6b];_0x4b623c['age']<=0x0&&(_0x4b623c=this['_randomParticle'](_0x4b623c));if(_0x4b623c['age']>0x0){const _0x51cfb0=_0x4b623c[_0x215a38(0xd6,0xf4)],_0x53f320=_0x4b623c[_0x119e7f(0x4d0,0x43e)];_0x3ed00e=this['getUVByPoint'](_0x51cfb0,_0x53f320),_0x3ed00e?(_0x458105=_0x51cfb0+this['_calc_speedRate'][0x0]*_0x3ed00e[0x0],_0x1d7247=_0x53f320+this['_calc_speedRate'][0x1]*_0x3ed00e[0x1],_0x4b623c[_0x119e7f(0x3c5,0x37c)]=_0x51cfb0,_0x4b623c[_0x119e7f(0x35f,0x3c9)]=_0x53f320,_0x4b623c['tlng']=_0x458105,_0x4b623c[_0x119e7f(0x3e8,0x43e)]=_0x1d7247,_0x4b623c[_0x119e7f(0x3d3,0x414)]=_0x3ed00e[0x2],_0x4b623c['age']--):_0x4b623c['age']=0x0;}}return this['particles'];}[_0x4855c4(0x205,0x23d)](_0x4c54f0){function _0x473cac(_0x5ddea7,_0x95ac06){return _0x4855c4(_0x95ac06- -0x2a8,_0x5ddea7);}let _0x11e86a,_0x40652f;for(let _0x91291d=0x0;_0x91291d<0x1e;_0x91291d++){_0x11e86a=this[_0x473cac(-0xe3,-0x88)](),_0x40652f=this['getUVByPoint'](_0x11e86a[_0x473cac(-0x170,-0xea)],_0x11e86a['lat']);if(_0x40652f&&_0x40652f[0x2]>0x0)break;}if(!_0x40652f)return _0x4c54f0;const _0x14d9da=_0x11e86a[_0x424dbe(0x24d,0x1cb)]+this['_calc_speedRate'][0x0]*_0x40652f[0x0],_0x5d8388=_0x11e86a['lat']+this['_calc_speedRate'][0x1]*_0x40652f[0x1];_0x4c54f0['lng']=_0x11e86a['lng'],_0x4c54f0[_0x473cac(-0x18,-0x9d)]=_0x11e86a[_0x424dbe(0x1fa,0x218)];function _0x424dbe(_0x1d28dd,_0x138311){return _0x41fe3c(_0x1d28dd,_0x138311-0x15b);}return _0x4c54f0['tlng']=_0x14d9da,_0x4c54f0['tlat']=_0x5d8388,_0x4c54f0[_0x424dbe(0x2c4,0x28a)]=Math[_0x424dbe(0x1cb,0x25e)](Math[_0x424dbe(0x1b9,0x214)]()*this[_0x473cac(0x14,-0x4c)]),_0x4c54f0['speed']=_0x40652f[0x2],_0x4c54f0;}['destroy'](){for(const _0x281866 in this){delete this[_0x281866];}}}function fRandomByfloat(_0x126a58,_0x30e335){function _0x1a39e7(_0x58425f,_0x2a8e9d){return _0x4855c4(_0x58425f- -0x24a,_0x2a8e9d);}return _0x126a58+Math[_0x1a39e7(-0x43,-0x3b)]()*(_0x30e335-_0x126a58);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x41fe3c(0x21,0x3e)][_0x41fe3c(0xf6,0x7d)];class CanvasWindLayer extends BaseLayer{constructor(_0x1e5190={}){function _0x292e30(_0x989088,_0x1ca5fd){return _0x41fe3c(_0x1ca5fd,_0x989088- -0x128);}super(_0x1e5190),this['_setOptionsHook'](_0x1e5190),this[_0x36c547(0x5c7,0x626)]=null;function _0x36c547(_0x15b824,_0x161410){return _0x4855c4(_0x15b824-0x396,_0x161410);}_0x1e5190['colors']&&_0x1e5190['steps']&&(this[_0x36c547(0x577,0x53b)]=new mars3d__namespace[(_0x292e30(-0xb1,-0x144))](_0x1e5190));}['_setOptionsHook'](_0x4dbc7e,_0x32adc1){this[_0x41d2b8(0x168,0x14a)]=0x3e8/(_0x4dbc7e['frameRate']||0xa),this['_pointerEvents']=this[_0x41d2b8(0x245,0x1eb)][_0x41d2b8(0x1a2,0x201)]??![],this[_0x41d2b8(0x1a0,0x17d)]=_0x4dbc7e['color']||'#ffffff';function _0x41d2b8(_0x5602ec,_0x1f1d24){return _0x41fe3c(_0x1f1d24,_0x5602ec-0x124);}this['lineWidth']=_0x4dbc7e[_0x27bc13(-0x254,-0x1fb)]||0x1,this[_0x41d2b8(0x17d,0xf0)]=_0x4dbc7e['fixedHeight']??0x0,this['reverseY']=_0x4dbc7e['reverseY']??![];function _0x27bc13(_0x387e2c,_0x86bb6e){return _0x4855c4(_0x86bb6e- -0x359,_0x387e2c);}this[_0x27bc13(-0x224,-0x1b8)]&&this['windField'][_0x41d2b8(0x1a8,0x11b)](_0x4dbc7e);}get[_0x41fe3c(0x7b,0x3e)](){return this['canvas'];}get['canvasWidth'](){function _0x4b899b(_0x48d6c8,_0x1a9c91){return _0x41fe3c(_0x48d6c8,_0x1a9c91- -0xe4);}return this['_map'][_0x4b899b(0xa7,0x4d)]['canvas']['clientWidth'];}get['canvasHeight'](){function _0x1840c3(_0x26af44,_0x29d615){return _0x41fe3c(_0x26af44,_0x29d615- -0x212);}function _0x4bd0e3(_0x3c2b44,_0x3c124f){return _0x4855c4(_0x3c2b44-0x14b,_0x3c124f);}return this[_0x4bd0e3(0x348,0x2c6)][_0x1840c3(-0x150,-0xe1)]['canvas']['clientHeight'];}get['pointerEvents'](){function _0x376ac7(_0x2ed4a5,_0x52efb0){return _0x41fe3c(_0x52efb0,_0x2ed4a5-0x3d7);}return this[_0x376ac7(0x46f,0x47a)];}set['pointerEvents'](_0x2c2845){function _0x723ef5(_0x202101,_0x52943f){return _0x41fe3c(_0x202101,_0x52943f-0x56);}this['_pointerEvents']=_0x2c2845;function _0x5cf4d6(_0x6f4b90,_0xb3df91){return _0x4855c4(_0x6f4b90- -0x4e,_0xb3df91);}if(!this['canvas'])return;_0x2c2845?this['canvas'][_0x5cf4d6(0x1fd,0x27c)]['pointer-events']=_0x5cf4d6(0x1f5,0x1b6):this[_0x5cf4d6(0x1e3,0x182)][_0x723ef5(0x17b,0x153)]['pointer-events']='none';}get[_0x41fe3c(0x68,0xf6)](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x616dae){this['options']['particlesNumber']=_0x616dae,clearTimeout(this[_0x56278d(0x365,0x3de)]);function _0x56278d(_0x5b2805,_0xb71512){return _0x4855c4(_0x5b2805-0x163,_0xb71512);}this['_canrefresh']=setTimeout(()=>{function _0x1704ba(_0xfb1c3e,_0x12b34){return _0x56278d(_0x12b34- -0x1ff,_0xfb1c3e);}this[_0x1704ba(0x1f2,0x1bb)]();},0x1f4);}get[_0x41fe3c(0x7e,0xb8)](){return this['options']['speedRate'];}set['speedRate'](_0x30d654){this['options']['speedRate']=_0x30d654;function _0x19b4cf(_0x309461,_0x161b13){return _0x4855c4(_0x161b13- -0x3,_0x309461);}function _0xe3bb3f(_0x4c36ac,_0x15287a){return _0x4855c4(_0x4c36ac- -0xa7,_0x15287a);}this['windField']&&(this[_0x19b4cf(0x225,0x19e)][_0x19b4cf(0x27d,0x203)]=_0x30d654);}get['maxAge'](){function _0x53dcbb(_0x464409,_0x3d7ce0){return _0x41fe3c(_0x3d7ce0,_0x464409-0x51);}function _0x55b3fd(_0x5708ba,_0x194c13){return _0x41fe3c(_0x194c13,_0x5708ba- -0xa7);}return this[_0x53dcbb(0x172,0x19a)][_0x55b3fd(0x67,0xc0)];}set['maxAge'](_0x579685){function _0x4119f4(_0x308280,_0x2573b4){return _0x4855c4(_0x2573b4- -0x33,_0x308280);}function _0x8e3b2c(_0x195067,_0x1b3596){return _0x4855c4(_0x1b3596-0x95,_0x195067);}this['options'][_0x8e3b2c(0x321,0x2f1)]=_0x579685,this['windField']&&(this['windField'][_0x4119f4(0x27c,0x229)]=_0x579685);}get['data'](){function _0x3ce16b(_0x433c1f,_0x583291){return _0x41fe3c(_0x433c1f,_0x583291-0x35e);}return this[_0x3ce16b(0x3d6,0x376)];}set[_0x41fe3c(0x133,0xc4)](_0x5e8665){function _0x708743(_0x5c3fb5,_0x3dc200){return _0x41fe3c(_0x5c3fb5,_0x3dc200-0x1fe);}this[_0x708743(0x287,0x2f7)](_0x5e8665);}get['rectangle'](){let _0x3faa80=this['windData']['xmin'],_0x1eebb0=this['windData'][_0x39a453(0x59,0xcf)],_0x434a27=this['windData'][_0x39a453(0x42,0x73)];function _0x464204(_0x5bc7b3,_0x31fb1b){return _0x41fe3c(_0x5bc7b3,_0x31fb1b-0x1df);}let _0x33113e=this['windData']['ymax'];_0x1eebb0>=0x167&&_0x3faa80===0x0&&(_0x3faa80=-0xb4,_0x1eebb0=0xb4);function _0x39a453(_0x1cb79e,_0x287278){return _0x41fe3c(_0x1cb79e,_0x287278- -0x57);}return _0x3faa80=Math['max'](_0x3faa80,-0xb4),_0x1eebb0=Math['min'](_0x1eebb0,0xb4),_0x434a27=Math['max'](_0x434a27,-0x5a),_0x33113e=Math[_0x464204(0x2ed,0x284)](_0x33113e,0x5a),Cesium[_0x464204(0x349,0x2ba)]['fromDegrees'](_0x3faa80,_0x434a27,_0x1eebb0,_0x33113e);}['_showHook'](_0x2325f7){function _0x37fea1(_0x26d83f,_0x47bf13){return _0x41fe3c(_0x26d83f,_0x47bf13- -0xb4);}function _0x5b2ba1(_0x3bfd78,_0x4c0592){return _0x41fe3c(_0x4c0592,_0x3bfd78-0x3f8);}_0x2325f7?this[_0x5b2ba1(0x50b,0x50f)]():(this['windData']&&(this['options']['data']=this[_0x5b2ba1(0x410,0x424)]),this['_removedHook']());}[_0x41fe3c(0xaa,0x5b)](){function _0x5bf9a4(_0x4afd81,_0x5a479b){return _0x4855c4(_0x5a479b- -0x3a0,_0x4afd81);}function _0xc92f90(_0xc2d749,_0x38e530){return _0x4855c4(_0x38e530- -0x339,_0xc2d749);}this[_0xc92f90(-0x106,-0xca)]['worker']?this[_0xc92f90(-0xba,-0xc7)]():this['windField']=new CanvasWindField(this['options']);}[_0x41fe3c(0x91,0x113)](){this[_0x41682e(0x423,0x3c3)]=this[_0x41682e(0x446,0x3de)]();const _0x578d75={};_0x578d75['willReadFrequently']=!![];function _0x41682e(_0x2581d9,_0xf62418){return _0x4855c4(_0x2581d9-0x1f2,_0xf62418);}this['canvasContext']=this[_0x55fc96(0x289,0x2e1)][_0x41682e(0x392,0x304)]('2d',_0x578d75);function _0x55fc96(_0x52f5c1,_0x8302dd){return _0x4855c4(_0x8302dd-0xb0,_0x52f5c1);}this[_0x55fc96(0x2ac,0x29f)](),this[_0x41682e(0x461,0x449)]['data']&&this[_0x41682e(0x439,0x495)](this[_0x55fc96(0x307,0x31f)]['data']);}['_removedHook'](){this[_0x3d554d(-0xda,-0x91)]();function _0x53be7f(_0x1f510a,_0x2923bf){return _0x4855c4(_0x2923bf- -0x302,_0x1f510a);}this['unbindEvent']();function _0x3d554d(_0x1e4c1f,_0x57d61c){return _0x4855c4(_0x1e4c1f- -0x34b,_0x57d61c);}this['canvas']&&(this['_map']['container']['removeChild'](this[_0x53be7f(-0xe1,-0xd1)]),delete this['canvas']);}['_createCanvas'](){const _0x2aa85e=mars3d__namespace['DomUtil'][_0x879ed6(0x5a,-0x7)](_0x4bd215(0x402,0x434),_0x879ed6(0x39,0x61),this['_map'][_0x879ed6(-0x33,0x2)]);_0x2aa85e[_0x879ed6(0x2f,0x82)][_0x4bd215(0x341,0x3b8)]=_0x4bd215(0x3c1,0x422),_0x2aa85e['style']['top']='0px';function _0x4bd215(_0x29f5a4,_0x51e122){return _0x41fe3c(_0x29f5a4,_0x51e122-0x351);}_0x2aa85e['style']['left']=_0x4bd215(0x492,0x437),_0x2aa85e[_0x879ed6(0x2f,-0x37)][_0x4bd215(0x46b,0x467)]=this['_map'][_0x4bd215(0x3f9,0x482)]['canvas']['clientWidth']+'px';function _0x879ed6(_0x28a846,_0x40d692){return _0x4855c4(_0x28a846- -0x21c,_0x40d692);}return _0x2aa85e['style']['height']=this[_0x4bd215(0x449,0x400)][_0x4bd215(0x415,0x482)][_0x4bd215(0x405,0x434)]['clientHeight']+'px',_0x2aa85e[_0x879ed6(0x2f,-0x17)][_0x4bd215(0x41d,0x3cf)]=this['_pointerEvents']?'auto':_0x879ed6(0x5,0x4c),_0x2aa85e['style'][_0x4bd215(0x3b8,0x3ea)]=this['options'][_0x4bd215(0x479,0x3ea)]??0x9,_0x2aa85e[_0x879ed6(0x48,0xa5)]=this['_map']['scene']['canvas']['clientWidth'],_0x2aa85e[_0x4bd215(0x3c1,0x3de)]=this['_map']['scene']['canvas']['clientHeight'],_0x2aa85e;}[_0x41fe3c(0x14a,0xce)](){function _0x17ffef(_0x336844,_0x4be846){return _0x4855c4(_0x336844-0x170,_0x4be846);}function _0x599ab1(_0x582b9b,_0x528410){return _0x41fe3c(_0x528410,_0x582b9b-0x1c0);}this['canvas']&&(this[_0x599ab1(0x2a3,0x308)][_0x599ab1(0x2bd,0x33a)]['width']=this[_0x599ab1(0x26f,0x2a6)][_0x17ffef(0x3ef,0x3cf)]['canvas']['clientWidth']+'px',this[_0x17ffef(0x3a1,0x37e)]['style']['height']=this[_0x599ab1(0x26f,0x257)]['scene'][_0x599ab1(0x2a3,0x320)][_0x17ffef(0x327,0x2df)]+'px',this[_0x17ffef(0x3a1,0x30e)][_0x599ab1(0x2d6,0x278)]=this['_map']['scene'][_0x17ffef(0x3a1,0x37f)]['clientWidth'],this['canvas']['height']=this['_map'][_0x17ffef(0x3ef,0x3a2)]['canvas']['clientHeight']);}['bindEvent'](){const _0x19bd14=this;let _0x56de4a=Date['now']();function _0x10ee64(_0x5c2bfd,_0x34a303){return _0x4855c4(_0x5c2bfd-0x3aa,_0x34a303);}(function _0x4ef59b(){if(_0x19bd14['isDestroy'])return;_0x19bd14[_0x1ffddb(-0x2e1,-0x25c)]=window['requestAnimationFrame'](_0x4ef59b);function _0x1ffddb(_0x31b163,_0x420137){return _0x121b(_0x420137- -0x3d8,_0x31b163);}function _0x2628dc(_0x1c3efd,_0x586e3e){return _0x121b(_0x586e3e- -0x2bc,_0x1c3efd);}if(_0x19bd14[_0x1ffddb(-0x18e,-0x198)]&&_0x19bd14['windField']){const _0x4b2f79=Date[_0x1ffddb(-0x1b4,-0x226)](),_0x30d227=_0x4b2f79-_0x56de4a;_0x30d227>_0x19bd14['frameTime']&&(_0x56de4a=_0x4b2f79-_0x30d227%_0x19bd14[_0x1ffddb(-0x234,-0x221)],_0x19bd14['update']());}}(),window['addEventListener']('resize',this['resize']['bind'](this),![]),this['mouse_down']=![]);function _0x5b1c1c(_0x429aa6,_0x49258c){return _0x41fe3c(_0x49258c,_0x429aa6- -0x11b);}this['mouse_move']=![],this['options'][_0x5b1c1c(-0xc4,-0x30)]&&(this[_0x5b1c1c(-0x6c,0x1b)]['on'](mars3d__namespace[_0x5b1c1c(-0x2f,-0xa2)]['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace[_0x10ee64(0x5e4,0x5d9)][_0x10ee64(0x5d7,0x60e)],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace[_0x10ee64(0x5e4,0x623)]['mouseUp'],this['_onMouseUpEvent'],this));}['unbindEvent'](){window[_0x4fe29d(0x1aa,0x115)](this[_0x4fe29d(0x9c,0xa7)]);function _0x4fe29d(_0x44c5af,_0x4d2bbc){return _0x4855c4(_0x44c5af- -0xbb,_0x4d2bbc);}delete this[_0x468715(-0x192,-0x1b2)],window['removeEventListener']('resize',this['resize']);function _0x468715(_0x5721ed,_0x2f5562){return _0x4855c4(_0x5721ed- -0x2e9,_0x2f5562);}this['options']['mouseHidden']&&(this['_map'][_0x468715(-0x8c,-0x88)](mars3d__namespace[_0x4fe29d(0x17f,0x137)][_0x4fe29d(0x10e,0x94)],this['_onMapWhellEvent'],this),this['_map'][_0x468715(-0x8c,-0x14)](mars3d__namespace[_0x468715(-0xaf,-0x5f)][_0x468715(-0xbc,-0xa4)],this[_0x468715(-0x15f,-0x160)],this),this[_0x468715(-0xec,-0x11a)]['off'](mars3d__namespace[_0x468715(-0xaf,-0xe8)]['mouseUp'],this[_0x468715(-0x175,-0xff)],this),this[_0x4fe29d(0x142,0xf8)]['off'](mars3d__namespace['EventType'][_0x4fe29d(0x155,0x189)],this[_0x468715(-0x10a,-0x174)],this));}['_onMapWhellEvent'](_0x1a2263){clearTimeout(this['refreshTimer']);if(!this[_0x220896(-0x133,-0x11c)]||!this[_0x220896(-0x7a,-0x106)])return;this['canvas'][_0x220896(-0x176,-0xec)]['visibility']=_0x41b538(0xdb,0xe5);function _0x41b538(_0x1699d9,_0x3de9dc){return _0x41fe3c(_0x1699d9,_0x3de9dc- -0x38);}function _0x220896(_0x3c78e2,_0x3cf032){return _0x41fe3c(_0x3c78e2,_0x3cf032- -0x1e9);}this[_0x41b538(0x1c,0x0)]=setTimeout(()=>{function _0x1f0321(_0x48ad5e,_0x10206d){return _0x220896(_0x10206d,_0x48ad5e-0x3b7);}if(!this[_0x5b8e35(0x12e,0x155)])return;this['redraw']();function _0x5b8e35(_0x22ca73,_0x146d7b){return _0x220896(_0x22ca73,_0x146d7b-0x271);}this[_0x5b8e35(0x1b7,0x16b)][_0x5b8e35(0xfd,0x185)]['visibility']='visible';},0xc8);}[_0x4855c4(0x18a,0x111)](_0x3890d4){function _0x1db81f(_0x3a0bce,_0x5e254a){return _0x4855c4(_0x3a0bce-0x3a5,_0x5e254a);}this['mouse_down']=!![];function _0x4e4043(_0x57b102,_0x5d1c0e){return _0x4855c4(_0x5d1c0e-0x105,_0x57b102);}this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x4e4043(0x301,0x2e4)],this),this['_map']['on'](mars3d__namespace[_0x4e4043(0x3c5,0x33f)][_0x4e4043(0x3a2,0x315)],this['_onMouseMoveEvent'],this);}[_0x41fe3c(-0x2,0x91)](_0xe576d6){function _0x36b378(_0x2a730b,_0x12f647){return _0x4855c4(_0x12f647-0x138,_0x2a730b);}function _0x1a4ece(_0x20c15d,_0x300861){return _0x41fe3c(_0x300861,_0x20c15d-0x286);}if(!this['show']||!this['canvas'])return;this['mouse_down']&&(this[_0x36b378(0x35d,0x369)]['style'][_0x36b378(0x31a,0x2cf)]='hidden',this[_0x36b378(0x279,0x2ae)]=!![]);}['_onMouseUpEvent'](_0xf4b1fb){if(!this[_0x46b10a(0x2ea,0x30d)]||!this[_0x87840c(-0x3a,-0xbc)])return;function _0x46b10a(_0x357cd4,_0x3a65b0){return _0x4855c4(_0x3a65b0-0xf2,_0x357cd4);}this[_0x87840c(-0x6e,-0x20)][_0x87840c(-0xe,-0x62)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);this[_0x46b10a(0x234,0x26e)]&&this[_0x46b10a(0x1ec,0x268)]&&this['redraw']();this[_0x87840c(-0x3a,-0x6c)]['style'][_0x87840c(-0xd4,-0x16a)]=_0x46b10a(0x328,0x2fa);function _0x87840c(_0x52c8cf,_0x308650){return _0x4855c4(_0x52c8cf- -0x26b,_0x308650);}this[_0x87840c(-0xef,-0xc5)]=![],this[_0x46b10a(0x230,0x268)]=![];}[_0x41fe3c(0x15b,0xf9)](_0x421f69){this[_0x464398(0x105,0x88)]();function _0x464398(_0x37b5ba,_0x458331){return _0x4855c4(_0x37b5ba- -0x16c,_0x458331);}this['windData']=_0x421f69,this['windField']['setDate'](_0x421f69),this['redraw']();}[_0x4855c4(0x257,0x1ea)](){function _0x3c77cc(_0x5897c0,_0x41ec4f){return _0x4855c4(_0x5897c0- -0x161,_0x41ec4f);}function _0x1d9364(_0x5a60be,_0x565f78){return _0x41fe3c(_0x565f78,_0x5a60be- -0xfd);}if(!this[_0x3c77cc(0xba,0x85)])return;this['windField'][_0x1d9364(-0x79,-0xf5)](this['options']),this[_0x3c77cc(0x6c,0x85)]();}[_0x4855c4(0x1cd,0x13c)](){function _0x311cf6(_0x522b8c,_0x146515){return _0x4855c4(_0x146515-0x27b,_0x522b8c);}if(this['_updateIng'])return;this[_0x311cf6(0x4b8,0x457)]=!![];if(this['worker'])this[_0x3cb9c0(0x300,0x389)][_0x3cb9c0(0x32c,0x325)]();else{const _0x413f28=this[_0x311cf6(0x3ea,0x41c)][_0x3cb9c0(0x2f0,0x26d)]();this[_0x3cb9c0(0x3ab,0x3de)](_0x413f28);}function _0x3cb9c0(_0x35a9ff,_0x1bfc3d){return _0x41fe3c(_0x1bfc3d,_0x35a9ff-0x2ad);}this[_0x3cb9c0(0x33b,0x317)]=![];}['_drawLines'](_0x24711c){this['_canvasParticles']=_0x24711c,this[_0x24b214(0x3af,0x43b)][_0x24b214(0x39c,0x3d8)]='destination-in',this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this[_0x24b214(0x349,0x2e7)]),this['canvasContext']['globalCompositeOperation']=_0x24b214(0x333,0x38c);function _0x24b214(_0x3b6c2f,_0x243555){return _0x4855c4(_0x3b6c2f-0x19e,_0x243555);}function _0x5c4a03(_0x1855fa,_0x6ef18b){return _0x41fe3c(_0x1855fa,_0x6ef18b-0x20e);}this['canvasContext']['globalAlpha']=0.9;const _0x1b9424=this['_map']['scene']['mode']!==Cesium['SceneMode'][_0x24b214(0x39f,0x38b)],_0xaba23=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x2c6e1d=0x0,_0x495242=_0x24711c['length'];_0x2c6e1d<_0x495242;_0x2c6e1d++){const _0x1a2602=_0x24711c[_0x2c6e1d],_0x463b8b=this['_tomap'](_0x1a2602,_0x1a2602['lng'],_0x1a2602['lat'],_0x1a2602['alt']),_0x346eb0=this['_tomap'](_0x1a2602,_0x1a2602[_0x24b214(0x419,0x41c)],_0x1a2602['tlat'],_0x1a2602[_0x24b214(0x360,0x3ee)]);if(!_0x463b8b||!_0x346eb0)continue;if(_0x1b9424&&Math['abs'](_0x463b8b[0x0]-_0x346eb0[0x0])>=_0xaba23)continue;this['canvasContext']['beginPath'](),this[_0x24b214(0x3af,0x3ce)]['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x5c4a03(0x23d,0x2a1)][_0x5c4a03(0x209,0x24f)](_0x1a2602['speed']),this['canvasContext'][_0x24b214(0x3dc,0x3ab)](_0x463b8b[0x0],_0x463b8b[0x1]),this[_0x5c4a03(0x2ba,0x2d1)][_0x5c4a03(0x28e,0x2fd)](_0x346eb0[0x0],_0x346eb0[0x1]),this[_0x5c4a03(0x338,0x2d1)]['stroke']();}else{this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this[_0x24b214(0x2fc,0x2e0)],this[_0x24b214(0x3af,0x3bf)]['strokeStyle']=this['color'];for(let _0x4433ff=0x0,_0x3c8dd6=_0x24711c[_0x5c4a03(0x2d0,0x287)];_0x4433ff<_0x3c8dd6;_0x4433ff++){const _0x20c658=_0x24711c[_0x4433ff],_0x1cb530=this[_0x24b214(0x3c5,0x387)](_0x20c658,_0x20c658[_0x24b214(0x35c,0x2e4)],_0x20c658['lat'],_0x20c658['alt']),_0x289b95=this['_tomap'](_0x20c658,_0x20c658['tlng'],_0x20c658[_0x5c4a03(0x37f,0x340)],_0x20c658['talt']);if(!_0x1cb530||!_0x289b95)continue;if(_0x1b9424&&Math[_0x24b214(0x3b4,0x3e1)](_0x1cb530[0x0]-_0x289b95[0x0])>=_0xaba23)continue;this[_0x5c4a03(0x2ed,0x2d1)][_0x5c4a03(0x38c,0x2fe)](_0x1cb530[0x0],_0x1cb530[0x1]),this['canvasContext']['lineTo'](_0x289b95[0x0],_0x289b95[0x1]);}this['canvasContext']['stroke']();}}[_0x4855c4(0x227,0x24f)](_0x1fb696,_0x56b74e,_0x3d0409,_0x1fdab3){const _0x227375=Cesium[_0x524e98(0x9a,0x75)][_0x524e98(0x179,0x142)](_0x56b74e,_0x3d0409,_0x1fdab3??this['fixedHeight']),_0x38070e=this['_map'][_0x26afd5(0x542,0x5a0)];if(_0x38070e['mode']===Cesium['SceneMode']['SCENE3D']){const _0x15f41d=new Cesium[(_0x524e98(0xdc,0xa2))](_0x38070e['globe']['ellipsoid'],_0x38070e['camera']['positionWC']),_0x4a26d6=_0x15f41d[_0x524e98(0x143,0x131)](_0x227375);if(!_0x4a26d6)return _0x1fb696['age']=0x0,null;}const _0x562244=mars3d__namespace['PointTrans'][_0x524e98(0x93,0x29)](this[_0x524e98(0x129,0x1b3)][_0x524e98(0x1ab,0x1f6)],_0x227375);function _0x26afd5(_0x422d89,_0x4bc461){return _0x4855c4(_0x4bc461-0x321,_0x422d89);}function _0x524e98(_0xcd1822,_0x3faca4){return _0x4855c4(_0xcd1822- -0xd4,_0x3faca4);}return _0x562244?[_0x562244['x'],_0x562244['y']]:null;}['clear'](){this['windField']['clear'](),delete this['windData'];}[_0x41fe3c(0x172,0x124)](){function _0x516ba9(_0x49445a,_0x1c0632){return _0x41fe3c(_0x49445a,_0x1c0632-0x4f5);}this[_0x516ba9(0x5b9,0x5c1)]=new Worker(this['options']['worker']);function _0x58333a(_0x55cff6,_0x5da1e9){return _0x4855c4(_0x55cff6- -0xa2,_0x5da1e9);}this['worker'][_0x516ba9(0x59b,0x5b6)]=_0x1e8b14=>{this['_drawLines'](_0x1e8b14['data']['particles']);function _0x49090c(_0x1bca2e,_0x2264e4){return _0x516ba9(_0x1bca2e,_0x2264e4- -0x46);}this[_0x49090c(0x571,0x5bc)]=![];},this[_0x516ba9(0x5c5,0x548)]={'init':_0x5b7903=>{const _0x72c00b={};function _0xa3b806(_0x282881,_0x7eb117){return _0x516ba9(_0x282881,_0x7eb117- -0x726);}_0x72c00b['type']='init';function _0x1d5825(_0x41d489,_0x25ca04){return _0x516ba9(_0x25ca04,_0x41d489- -0x194);}_0x72c00b[_0xa3b806(-0x181,-0x110)]=_0x5b7903,this['worker'][_0xa3b806(-0x172,-0x1eb)](_0x72c00b);},'setOptions':_0x4d08cd=>{const _0x23f15b={};function _0xbf888c(_0x4629ee,_0xe0941){return _0x516ba9(_0xe0941,_0x4629ee- -0x50);}_0x23f15b['type']='setOptions',_0x23f15b['options']=_0x4d08cd,this[_0xbf888c(0x571,0x52a)]['postMessage'](_0x23f15b);},'setDate':_0x23c9cb=>{const _0x34dbf2={};_0x34dbf2['type']=_0x3133f2(-0x1fd,-0x1d3),_0x34dbf2['data']=_0x23c9cb;function _0x3133f2(_0x486218,_0x5b543b){return _0x516ba9(_0x486218,_0x5b543b- -0x71d);}this['worker']['postMessage'](_0x34dbf2);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];function _0x2e174f(_0x556e52,_0x24bbce){return _0x58333a(_0x24bbce-0x42d,_0x556e52);}function _0x56e362(_0x3134ed,_0x4ffa19){return _0x58333a(_0x4ffa19-0x1c9,_0x3134ed);}const _0x41d16b={};_0x41d16b[_0x2e174f(0x4cc,0x527)]='update',this['worker'][_0x2e174f(0x4e0,0x51f)](_0x41d16b);},'clear':()=>{const _0x1fae93={};function _0x289702(_0x2a4f0a,_0x3d4284){return _0x516ba9(_0x3d4284,_0x2a4f0a- -0x721);}_0x1fae93['type']='clear';function _0x14b091(_0x14f493,_0x485a11){return _0x58333a(_0x485a11-0xfb,_0x14f493);}this[_0x289702(-0x160,-0x1b0)][_0x289702(-0x1e6,-0x196)](_0x1fae93);}},this[_0x58333a(0xff,0x161)]['init'](this[_0x58333a(0x1cd,0x1b7)]);}}mars3d__namespace[_0x4855c4(0x24e,0x1c7)]['register']('canvasWind',CanvasWindLayer),mars3d__namespace[_0x4855c4(0x18c,0x106)][_0x41fe3c(0xba,0xaa)]=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x41fe3c(0x37,0x9d)]=WindUtil,exports[_0x41fe3c(0x19,0x9a)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x2231f={};_0x2231f['value']=!![],Object[_0x41fe3c(0x81,0xd8)](exports,_0x4855c4(0x179,0x1b4),_0x2231f);
}));
