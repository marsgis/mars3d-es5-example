/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.7
 * 编译日期：2024-11-17 22:49
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x1e0f06,_0x40485c){const _0x12ec12=_0x1e0f06();function _0x973891(_0x2c5175,_0xea2de){return _0x4d13(_0x2c5175-0x319,_0xea2de);}function _0x1b552b(_0x4fb057,_0x25c231){return _0x4d13(_0x25c231-0x247,_0x4fb057);}while(!![]){try{const _0x3793c7=parseInt(_0x973891(0x4c5,0x558))/0x1*(parseInt(_0x1b552b(0x443,0x3f5))/0x2)+-parseInt(_0x973891(0x4fc,0x544))/0x3*(-parseInt(_0x1b552b(0x3db,0x426))/0x4)+parseInt(_0x1b552b(0x369,0x3ba))/0x5*(parseInt(_0x973891(0x50a,0x59b))/0x6)+-parseInt(_0x973891(0x484,0x3fc))/0x7+parseInt(_0x973891(0x4a2,0x460))/0x8*(parseInt(_0x973891(0x52e,0x5ab))/0x9)+parseInt(_0x1b552b(0x3c9,0x3bf))/0xa*(parseInt(_0x973891(0x433,0x3b6))/0xb)+-parseInt(_0x973891(0x49d,0x40a))/0xc;if(_0x3793c7===_0x40485c)break;else _0x12ec12['push'](_0x12ec12['shift']());}catch(_0x1f8578){_0x12ec12['push'](_0x12ec12['shift']());}}}(_0x4702,0xc0f89));function _interopNamespace(_0x222272){if(_0x222272&&_0x222272['__esModule'])return _0x222272;var _0x46dfcc=Object['create'](null);_0x222272&&Object[_0x1952c6(0x2d3,0x2ad)](_0x222272)['forEach'](function(_0xb0f3b0){function _0x2b45a5(_0x4e2211,_0x5f570c){return _0x1952c6(_0x4e2211,_0x5f570c-0x240);}function _0x3884ef(_0xd937e2,_0x528fd8){return _0x1952c6(_0xd937e2,_0x528fd8- -0x157);}if(_0xb0f3b0!==_0x2b45a5(0x4c5,0x531)){var _0xf2b0e=Object[_0x2b45a5(0x557,0x4ea)](_0x222272,_0xb0f3b0);Object['defineProperty'](_0x46dfcc,_0xb0f3b0,_0xf2b0e['get']?_0xf2b0e:{'enumerable':!![],'get':function(){return _0x222272[_0xb0f3b0];}});}});_0x46dfcc[_0x1952c6(0x263,0x2f1)]=_0x222272;function _0x1952c6(_0x37cc63,_0x4d8c8f){return _0x4d13(_0x4d8c8f-0x162,_0x37cc63);}function _0x26acac(_0x2a95b2,_0x417209){return _0x4d13(_0x417209-0xfa,_0x2a95b2);}return _0x46dfcc;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace[_0x39b9f7(0x43f,0x3ed)];function getU(_0x979a6f,_0x3da87d){function _0x9b2cc1(_0x5a7163,_0x12202a){return _0x39b9f7(_0x5a7163,_0x12202a- -0x25b);}const _0x50388c=_0x979a6f*Math['cos'](Cesium$7[_0x9b2cc1(0x106,0xd3)]['toRadians'](_0x3da87d));return _0x50388c;}function getV(_0x4bc3b0,_0xe91df9){function _0x39b866(_0x44ac18,_0x1ac4ec){return _0x39b9f7(_0x1ac4ec,_0x44ac18- -0x5fe);}const _0x2621cc=_0x4bc3b0*Math['sin'](Cesium$7[_0x39b866(-0x2d0,-0x29b)]['toRadians'](_0xe91df9));return _0x2621cc;}function getSpeed(_0x5e2121,_0x3d4bbf){const _0x12e28a=Math[_0x446c52(-0x202,-0x1d4)](Math[_0x335776(0x313,0x396)](_0x5e2121,0x2)+Math['pow'](_0x3d4bbf,0x2));function _0x335776(_0x4d3926,_0x45d527){return _0x39b9f7(_0x45d527,_0x4d3926- -0xa6);}function _0x446c52(_0x2885ee,_0x593341){return _0x39b9f7(_0x593341,_0x2885ee- -0x5b2);}return _0x12e28a;}function getDirection(_0x37b657,_0x81b038){let _0x1185d6=Cesium$7['Math']['toDegrees'](Math['atan2'](_0x81b038,_0x37b657));return _0x1185d6+=_0x1185d6<0x0?0x168:0x0,_0x1185d6;}const _0x172ae9={};_0x172ae9['__proto__']=null,_0x172ae9[_0x39b9f7(0x3e6,0x44b)]=getU,_0x172ae9[_0x362994(-0x12e,-0x193)]=getV,_0x172ae9[_0x362994(-0x1a4,-0x1cd)]=getSpeed,_0x172ae9['getDirection']=getDirection;var WindUtil=_0x172ae9;const Cesium$6=mars3d__namespace[_0x39b9f7(0x38e,0x3ed)];class CustomPrimitive{constructor(_0x4630e6){this['commandType']=_0x4630e6['commandType'],this['geometry']=_0x4630e6['geometry'],this['attributeLocations']=_0x4630e6['attributeLocations'],this['primitiveType']=_0x4630e6[_0x1e3d8a(0x49b,0x4cc)],this['uniformMap']=_0x4630e6[_0x2e34d0(0x249,0x1d1)];function _0x1e3d8a(_0x38332d,_0x1f818f){return _0x39b9f7(_0x1f818f,_0x38332d-0x128);}this['vertexShaderSource']=_0x4630e6['vertexShaderSource'],this['fragmentShaderSource']=_0x4630e6[_0x1e3d8a(0x56f,0x528)],this[_0x1e3d8a(0x459,0x493)]=_0x4630e6[_0x2e34d0(0x16f,0x103)];function _0x2e34d0(_0x5f216b,_0x28ef37){return _0x39b9f7(_0x5f216b,_0x28ef37- -0x22e);}this['framebuffer']=_0x4630e6['framebuffer'],this[_0x1e3d8a(0x557,0x596)]=_0x4630e6['outputTexture'],this[_0x1e3d8a(0x550,0x587)]=_0x4630e6[_0x1e3d8a(0x550,0x4c5)]??![],this[_0x2e34d0(0x117,0x19f)]=_0x4630e6[_0x2e34d0(0x223,0x19f)],this[_0x2e34d0(0x21c,0x1cd)]=!![],this[_0x2e34d0(0x1cd,0x16c)]=undefined,this['clearCommand']=undefined,this['autoClear']&&(this['clearCommand']=new Cesium$6['ClearCommand']({'color':new Cesium$6['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6[_0x1e3d8a(0x463,0x4db)]['OPAQUE']}));}[_0x362994(-0x194,-0x1d4)](_0x1af31b){function _0x6d800(_0xf74bbd,_0xa9c385){return _0x39b9f7(_0xa9c385,_0xf74bbd- -0x6e);}function _0x3b52f1(_0x55db17,_0x1786d4){return _0x362994(_0x1786d4,_0x55db17-0x335);}switch(this['commandType']){case _0x3b52f1(0x15a,0x113):{const _0x4d32c9=Cesium$6['VertexArray'][_0x6d800(0x32f,0x3bf)]({'context':_0x1af31b,'geometry':this[_0x3b52f1(0xe5,0x79)],'attributeLocations':this[_0x3b52f1(0x17d,0x1da)],'bufferUsage':Cesium$6['BufferUsage'][_0x6d800(0x3a8,0x34e)]}),_0x2dc466={};_0x2dc466[_0x3b52f1(0x13a,0x168)]=_0x1af31b,_0x2dc466['attributeLocations']=this['attributeLocations'],_0x2dc466['vertexShaderSource']=this['vertexShaderSource'],_0x2dc466['fragmentShaderSource']=this['fragmentShaderSource'];const _0x44e0ea=Cesium$6['ShaderProgram']['fromCache'](_0x2dc466),_0xee9194=Cesium$6['RenderState'][_0x6d800(0x3d3,0x3cd)](this['rawRenderState']);return new Cesium$6[(_0x3b52f1(0x1f7,0x1bd))]({'owner':this,'vertexArray':_0x4d32c9,'primitiveType':this['primitiveType'],'uniformMap':this['uniformMap'],'modelMatrix':Cesium$6['Matrix4'][_0x6d800(0x35a,0x3e0)],'shaderProgram':_0x44e0ea,'framebuffer':this['framebuffer'],'renderState':_0xee9194,'pass':Cesium$6['Pass']['OPAQUE']});}case _0x3b52f1(0x1bb,0x1fe):{const _0x556e6e={};return _0x556e6e['owner']=this,_0x556e6e['fragmentShaderSource']=this[_0x6d800(0x3d9,0x3bd)],_0x556e6e[_0x3b52f1(0x1b8,0x188)]=this[_0x6d800(0x391,0x404)],_0x556e6e['outputTexture']=this['outputTexture'],_0x556e6e['persists']=!![],new Cesium$6['ComputeCommand'](_0x556e6e);}}}[_0x39b9f7(0x37e,0x3e5)](_0x31614f,_0x2ba389){function _0x53ccf0(_0x3a7a1c,_0x273232){return _0x39b9f7(_0x3a7a1c,_0x273232- -0x4aa);}this[_0x59d32a(-0x5b,0x3a)]=_0x2ba389;function _0x59d32a(_0x1f4ee8,_0x1e5b8c){return _0x39b9f7(_0x1f4ee8,_0x1e5b8c- -0x2f2);}const _0x424c18=Cesium$6[_0x53ccf0(-0xe9,-0x66)]['fromGeometry']({'context':_0x31614f,'geometry':this['geometry'],'attributeLocations':this[_0x59d32a(0xa2,0xd2)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']});this[_0x53ccf0(-0x16d,-0x110)][_0x53ccf0(-0x1bd,-0x157)]=_0x424c18;}[_0x362994(-0x1f5,-0x16e)](_0x3f4d8f){if(!this['show'])return;if(_0x3f4d8f[_0x4e4e1a(0x465,0x3fc)]!==Cesium$6[_0x4e4e1a(0x370,0x306)]['SCENE3D'])return;function _0x27d004(_0x4891fb,_0x2dd22e){return _0x39b9f7(_0x4891fb,_0x2dd22e-0x1a6);}!Cesium$6['defined'](this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x3f4d8f['context']));Cesium$6['defined'](this['preExecute'])&&this[_0x4e4e1a(0x416,0x41a)]();function _0x4e4e1a(_0x5d6f92,_0x12b5eb){return _0x362994(_0x12b5eb,_0x5d6f92-0x5c5);}Cesium$6[_0x27d004(0x59e,0x539)](this['clearCommand'])&&_0x3f4d8f['commandList']['push'](this['clearCommand']),_0x3f4d8f['commandList']['push'](this['commandToExecute']);}[_0x362994(-0x1de,-0x1f1)](){return![];}[_0x39b9f7(0x35f,0x347)](){if(this[_0x19c337(0x455,0x41f)]){var _0x2b3789,_0x389f5d;(_0x2b3789=this['clearCommand'])!==null&&_0x2b3789!==void 0x0&&_0x2b3789['vertexArray']&&this[_0x19c337(0x455,0x4bf)]['vertexArray']['destroy'](),(_0x389f5d=this['clearCommand'])!==null&&_0x389f5d!==void 0x0&&_0x389f5d['shaderProgram']&&this['clearCommand']['shaderProgram'][_0x4937aa(-0x1af,-0x205)](),delete this['clearCommand'];}this['commandToExecute']&&(this['commandToExecute'][_0x19c337(0x44a,0x3f8)]&&this['commandToExecute']['vertexArray']['destroy'](),this[_0x19c337(0x491,0x48b)][_0x19c337(0x533,0x546)]&&this['commandToExecute']['shaderProgram']['destroy'](),delete this['commandToExecute']);function _0x4937aa(_0xd94afe,_0x19a6a7){return _0x39b9f7(_0xd94afe,_0x19a6a7- -0x54c);}function _0x19c337(_0x4a6597,_0x5c84fa){return _0x39b9f7(_0x5c84fa,_0x4a6597-0xf7);}return Cesium$6['destroyObject'](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0x2fea34=function(){function _0x3a9281(_0x4ee7f2,_0x151f18){return _0x4d13(_0x151f18- -0x200,_0x4ee7f2);}function _0x413887(_0xbf0419,_0x2d291a){return _0x4d13(_0x2d291a-0x261,_0xbf0419);}const _0x46eefd=new Cesium$5['Geometry']({'attributes':new Cesium$5[(_0x413887(0x464,0x437))]({'position':new Cesium$5[(_0x3a9281(0x1,-0x84))]({'componentDatatype':Cesium$5[_0x413887(0x3a7,0x3ef)][_0x413887(0x41b,0x3e7)],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5[(_0x3a9281(-0x8,-0x84))]({'componentDatatype':Cesium$5[_0x3a9281(-0xf,-0x72)][_0x413887(0x3ff,0x3e7)],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});return _0x46eefd;},_0x179cbe=function(_0x270672,_0x5720b0){function _0x37f464(_0x3b0ffc,_0x477dd7){return _0x4d13(_0x3b0ffc- -0x99,_0x477dd7);}if(Cesium$5['defined'](_0x5720b0)){const _0x3ed7c1={};_0x3ed7c1[_0x37f464(0x164,0x1a3)]=_0x5720b0,_0x270672['source']=_0x3ed7c1;}const _0x34321b=new Cesium$5['Texture'](_0x270672);return _0x34321b;},_0x3a1786=function(_0x34f241,_0x5b5f59,_0x2f1915){const _0x572ebf={};function _0x33c3d7(_0x478b7b,_0x1b0c2b){return _0x4d13(_0x1b0c2b-0x130,_0x478b7b);}_0x572ebf[_0x3ecee0(0x344,0x331)]=_0x34f241,_0x572ebf['colorTextures']=[_0x5b5f59],_0x572ebf[_0x33c3d7(0x1ce,0x243)]=_0x2f1915;function _0x3ecee0(_0x338f45,_0x1047d9){return _0x4d13(_0x338f45-0x1f4,_0x1047d9);}const _0x3c495d=new Cesium$5[(_0x3ecee0(0x3ce,0x3f6))](_0x572ebf);return _0x3c495d;},_0x1c2b8f=function(_0x48cc5f){const _0xa04c7b=!![],_0x134850=![],_0x2ded7b={};_0x2ded7b['viewport']=_0x48cc5f['viewport'],_0x2ded7b[_0x2b2702(0x2d7,0x29c)]=_0x48cc5f[_0x2b2702(0x2d7,0x272)],_0x2ded7b[_0x11580b(0x353,0x2e0)]=_0x48cc5f[_0x2b2702(0x275,0x2f9)],_0x2ded7b[_0x2b2702(0x232,0x1a4)]=_0x48cc5f[_0x2b2702(0x232,0x2b5)];const _0x3bd198=_0x2ded7b;function _0x2b2702(_0x3b960d,_0x41d020){return _0x4d13(_0x3b960d-0x122,_0x41d020);}const _0x4bbb57=Cesium$5['Appearance']['getDefaultRenderState'](_0xa04c7b,_0x134850,_0x3bd198);function _0x11580b(_0x3542e4,_0xbde7e8){return _0x4d13(_0xbde7e8-0x18d,_0x3542e4);}return _0x4bbb57;};function _0xf9c0ac(_0x592cb1,_0xb9ee8b){return _0x39b9f7(_0xb9ee8b,_0x592cb1-0x21);}const _0x37ea0=function(_0x3e83a1){const _0x448782={},_0x4e4811=Cesium$5['Math'][_0x5e04b5(0x36,-0x3c)](_0x3e83a1['west'],Cesium$5[_0x5e04b5(-0x2,0x34)][_0x535df2(0x4ad,0x4df)]),_0x4ac6e9=Cesium$5['Math'][_0x535df2(0x430,0x407)](_0x3e83a1[_0x5e04b5(0x4a,0x68)],Cesium$5['Math']['TWO_PI']),_0x513bf8=_0x3e83a1[_0x535df2(0x499,0x478)];let _0x47f4bd,_0x29e809;_0x513bf8>Cesium$5['Math']['THREE_PI_OVER_TWO']?(_0x47f4bd=0x0,_0x29e809=Cesium$5[_0x535df2(0x3f8,0x3f4)]['TWO_PI']):_0x4ac6e9-_0x4e4811<_0x513bf8?(_0x47f4bd=_0x4e4811,_0x29e809=_0x4e4811+_0x513bf8):(_0x47f4bd=_0x4e4811,_0x29e809=_0x4ac6e9);_0x448782[_0x535df2(0x4e2,0x557)]={'min':Cesium$5['Math']['toDegrees'](_0x47f4bd),'max':Cesium$5['Math']['toDegrees'](_0x29e809)};const _0x134d01=_0x3e83a1['south'],_0x2a69ef=_0x3e83a1['north'],_0x2333da=_0x3e83a1['height'];function _0x5e04b5(_0x4b5292,_0x362596){return _0x4d13(_0x4b5292- -0xff,_0x362596);}const _0x22cbf7=_0x2333da>Cesium$5['Math']['PI']/0xc?_0x2333da/0x2:0x0;let _0xcbe0ce=Cesium$5[_0x535df2(0x3f8,0x48a)]['clampToLatitudeRange'](_0x134d01-_0x22cbf7);function _0x535df2(_0x10a6a7,_0x2c2601){return _0x4d13(_0x10a6a7-0x2fb,_0x2c2601);}let _0xc16b62=Cesium$5[_0x535df2(0x3f8,0x377)][_0x5e04b5(0x2f,-0x64)](_0x2a69ef+_0x22cbf7);return _0xcbe0ce<-Cesium$5[_0x5e04b5(-0x2,-0x60)][_0x5e04b5(0xf3,0xbb)]&&(_0xcbe0ce=-Cesium$5['Math'][_0x535df2(0x42b,0x435)]),_0xc16b62>Cesium$5['Math']['PI_OVER_THREE']&&(_0xc16b62=Cesium$5['Math']['PI_OVER_TWO']),_0x448782[_0x535df2(0x516,0x561)]={'min':Cesium$5[_0x5e04b5(-0x2,0x5c)][_0x535df2(0x4f5,0x49a)](_0xcbe0ce),'max':Cesium$5[_0x5e04b5(-0x2,-0x8a)]['toDegrees'](_0xc16b62)},_0x448782;},_0x286ede={};_0x286ede['getFullscreenQuad']=_0x2fea34,_0x286ede['createTexture']=_0x179cbe;function _0x3c871a(_0x42a639,_0x36384f){return _0x362994(_0x36384f,_0x42a639-0x713);}return _0x286ede[_0x3c871a(0x5df,0x55b)]=_0x3a1786,_0x286ede[_0xf9c0ac(0x355,0x3e4)]=_0x1c2b8f,_0x286ede['viewRectangleToLonLatRange']=_0x37ea0,_0x286ede;}());var fullscreenVert='#version\x20300\x20es\x0a\x0ain\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20gl_Position\x20=\x20vec4(position,\x201.0f);\x0a}\x0a',screenDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20trailsColor;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a';function _0x39b9f7(_0x24984a,_0x405a8a){return _0x4d13(_0x405a8a-0x231,_0x24984a);}var segmentDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20bool\x20colour;\x0a\x0ain\x20float\x20heightNormalization;\x0ain\x20float\x20speedNormalization;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speedNormalization\x20>\x20zero)\x20{\x0a\x20\x20\x20\x20if(colour)\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(heightNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',segmentDrawVert='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20lines\x20drawing\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0auniform\x20vec2\x20hRange;\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0aout\x20float\x20heightNormalization;\x0aout\x20float\x20speedNormalization;\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight\x20+\x20lonLatLev.z;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0f,\x20360.0f)\x20-\x20180.0f;\x0a\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0f;\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(speed.z\x20-\x20wSpeedRange.x)\x20/\x20(wSpeedRange.y\x20-\x20wSpeedRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20vec3\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rgb;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x20\x20\x20\x20//\x20render\x20lines\x20with\x20triangles\x20and\x20miter\x20joint\x0a\x20\x20\x20\x20//\x20read\x20https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html\x20for\x20detail\x0a\x20\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20projectedCoordinates.next,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.next\x20+\x20offset;\x0a\x20\x20}\x0a\x0a\x20\x20heightNormalization\x20=\x20(currentPosition.z\x20-\x20hRange.x)\x20/\x20(hRange.y\x20-\x20hRange.x);\x0a\x0a\x20\x20speedNormalization\x20=\x20texture(particlesSpeed,\x20particleIndex).a;\x0a}\x0a',trailDrawFrag='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0aout\x20vec4\x20fragColor;\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0f\x20*\x20trailsColor)\x20/\x20255.0f;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20if(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20pointsColor;\x0a\x20\x20}\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20trailsColor;\x0a\x20\x20}\x0a\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a';const Cesium$4=mars3d__namespace['Cesium'];class ParticlesRendering{constructor(_0x28e939,_0xa11639,_0x21e343,_0x452ea0,_0x412b4c){this['colour']=_0x21e343['colors']==='height';function _0x13efdd(_0x5e92e7,_0x2ef82d){return _0x39b9f7(_0x2ef82d,_0x5e92e7-0x149);}this['createRenderingTextures'](_0x28e939,_0xa11639,_0x21e343[_0x5e90f5(0x1a6,0x1d6)]),this['createRenderingFramebuffers'](_0x28e939);function _0x5e90f5(_0x3408e4,_0x2ffa3b){return _0x39b9f7(_0x3408e4,_0x2ffa3b- -0x172);}this[_0x13efdd(0x51a,0x4ec)](_0x28e939,_0xa11639,_0x21e343,_0x452ea0,_0x412b4c);}[_0x39b9f7(0x2bb,0x33f)](_0x47d0af,_0x12fdae,_0x4fb6be){const _0x11b141={};_0x11b141[_0x22d915(-0x215,-0x24f)]=_0x47d0af,_0x11b141['width']=_0x47d0af['drawingBufferWidth'],_0x11b141[_0x227dc1(0x172,0x190)]=_0x47d0af['drawingBufferHeight'],_0x11b141['pixelFormat']=Cesium$4['PixelFormat']['RGBA'],_0x11b141[_0x22d915(-0x244,-0x292)]=Cesium$4[_0x22d915(-0x174,-0x1bf)]['UNSIGNED_BYTE'];const _0x4b2056=_0x11b141,_0x23ccb3={};_0x23ccb3['context']=_0x47d0af,_0x23ccb3[_0x227dc1(0x13c,0x110)]=_0x47d0af['drawingBufferWidth'],_0x23ccb3[_0x227dc1(0x172,0x140)]=_0x47d0af[_0x227dc1(0xb0,0x97)],_0x23ccb3['pixelFormat']=Cesium$4['PixelFormat'][_0x227dc1(0xc2,0x131)],_0x23ccb3['pixelDatatype']=Cesium$4[_0x22d915(-0x1bb,-0x1bf)]['UNSIGNED_INT'];function _0x227dc1(_0x240729,_0x2d8361){return _0x39b9f7(_0x2d8361,_0x240729- -0x293);}const _0x5ec02d=_0x23ccb3,_0x28ebb3=_0x4fb6be['length'];function _0x22d915(_0x3cb494,_0xcfbc7d){return _0x362994(_0x3cb494,_0xcfbc7d- -0x54);}const _0x53f4fe=new Float32Array(_0x28ebb3*0x3);for(let _0x2c3418=0x0;_0x2c3418<_0x28ebb3;_0x2c3418++){const _0x138258=Cesium$4['Color']['fromCssColorString'](_0x4fb6be[_0x2c3418]);_0x53f4fe[0x3*_0x2c3418]=_0x138258['red'],_0x53f4fe[0x3*_0x2c3418+0x1]=_0x138258['green'],_0x53f4fe[0x3*_0x2c3418+0x2]=_0x138258[_0x227dc1(0x180,0x150)];}const _0xdf2fbc={'context':_0x47d0af,'width':_0x28ebb3,'height':0x1,'pixelFormat':Cesium$4['PixelFormat'][_0x22d915(-0x274,-0x270)],'pixelDatatype':Cesium$4['PixelDatatype']['FLOAT'],'sampler':new Cesium$4['Sampler']({'minificationFilter':Cesium$4['TextureMinificationFilter'][_0x22d915(-0x149,-0x1af)],'magnificationFilter':Cesium$4['TextureMagnificationFilter'][_0x22d915(-0x243,-0x1af)]})};this[_0x227dc1(0xb6,0x60)]={'segmentsColor':Util['createTexture'](_0x4b2056),'segmentsDepth':Util[_0x227dc1(0x12a,0x128)](_0x5ec02d),'currentTrailsColor':Util['createTexture'](_0x4b2056),'currentTrailsDepth':Util[_0x22d915(-0x1b8,-0x213)](_0x5ec02d),'nextTrailsColor':Util[_0x227dc1(0x12a,0x127)](_0x4b2056),'nextTrailsDepth':Util['createTexture'](_0x5ec02d),'colorTable':Util[_0x22d915(-0x2a7,-0x213)](_0xdf2fbc,_0x53f4fe)};}[_0x362994(-0x192,-0x1c4)](_0x4ca035){function _0x5814dd(_0x31a951,_0x231638){return _0x362994(_0x31a951,_0x231638-0x590);}function _0x4e5b06(_0x58807b,_0x14b8ae){return _0x362994(_0x14b8ae,_0x58807b-0x291);}this['framebuffers']={'segments':Util[_0x5814dd(0x4c6,0x45c)](_0x4ca035,this['textures']['segmentsColor'],this['textures']['segmentsDepth']),'currentTrails':Util[_0x4e5b06(0x15d,0x104)](_0x4ca035,this['textures'][_0x5814dd(0x303,0x347)],this['textures'][_0x4e5b06(0xf0,0x145)]),'nextTrails':Util[_0x5814dd(0x4d9,0x45c)](_0x4ca035,this['textures'][_0x5814dd(0x3ae,0x356)],this[_0x5814dd(0x2f8,0x35d)]['nextTrailsDepth'])};}[_0x362994(-0x246,-0x212)](_0x5e1bde){const _0x163dac=0x4;let _0xec2cb6=[];for(let _0x139fb9=0x0;_0x139fb9<_0x5e1bde['particlesTextureSize'];_0x139fb9++){for(let _0x944dd2=0x0;_0x944dd2<_0x5e1bde['particlesTextureSize'];_0x944dd2++){for(let _0x95c368=0x0;_0x95c368<_0x163dac;_0x95c368++){_0xec2cb6['push'](_0x139fb9/_0x5e1bde['particlesTextureSize']),_0xec2cb6['push'](_0x944dd2/_0x5e1bde[_0x10a0c4(-0x190,-0x1b7)]);}}}_0xec2cb6=new Float32Array(_0xec2cb6);function _0x10a0c4(_0x28aece,_0x9e6c5d){return _0x362994(_0x28aece,_0x9e6c5d- -0x67);}function _0x4e4b80(_0x5e729e,_0x313b66){return _0x362994(_0x5e729e,_0x313b66-0x368);}let _0x19cb29=[];for(let _0x195862=0x0;_0x195862<_0x5e1bde['maxParticles'];_0x195862++){_0x19cb29['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x19cb29=new Float32Array(_0x19cb29);let _0x3414c0=[];for(let _0x2196ec=0x0,_0x1e5995=0x0;_0x2196ec<_0x5e1bde['maxParticles'];_0x2196ec++){_0x3414c0[_0x10a0c4(-0x16c,-0x19a)](_0x1e5995+0x0,_0x1e5995+0x1,_0x1e5995+0x2,_0x1e5995+0x2,_0x1e5995+0x1,_0x1e5995+0x3),_0x1e5995+=_0x163dac;}_0x3414c0=new Uint32Array(_0x3414c0);const _0x4bc3c0=new Cesium$4['Geometry']({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4[_0x4e4b80(0x137,0x1ab)]['FLOAT'],'componentsPerAttribute':0x2,'values':_0xec2cb6}),'normal':new Cesium$4[(_0x10a0c4(-0x22a,-0x236))]({'componentDatatype':Cesium$4['ComponentDatatype'][_0x4e4b80(0x226,0x1a3)],'componentsPerAttribute':0x3,'values':_0x19cb29})}),'indices':_0x3414c0});return _0x4bc3c0;}[_0x39b9f7(0x3a0,0x3d1)](_0x1b6653,_0x12d395,_0x1b02ed,_0x1360b1,_0x11f92d){const _0x4fa3e7=this,_0x4570fa={};_0x4570fa['st']=0x0;function _0x24f455(_0x42057c,_0x531d50){return _0x362994(_0x531d50,_0x42057c-0x1aa);}_0x4570fa['normal']=0x1;const _0xcf215f={};_0xcf215f['sources']=[segmentDrawVert];const _0x437f98={};_0x437f98['sources']=[segmentDrawFrag];const _0x4f8018={};_0x4f8018['enabled']=!![];const _0x56497c={};_0x56497c['viewport']=undefined,_0x56497c[_0x24f455(0x14,0x3c)]=_0x4f8018,_0x56497c['depthMask']=!![];const _0x293a0d={};_0x293a0d['position']=0x0,_0x293a0d['st']=0x1;const _0x378176={};_0x378176[_0x2d254c(-0x158,-0xde)]=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x378176[_0x2d254c(-0x42,0x5)]=[fullscreenVert];const _0x217d8={};_0x217d8[_0x24f455(-0x96,-0xeb)]=[_0x2d254c(-0x62,-0xaa)],_0x217d8[_0x2d254c(0x4c,0x5)]=[trailDrawFrag];const _0x191560={};_0x191560[_0x24f455(-0x24,-0x1b)]=0x0;function _0x2d254c(_0x138322,_0x4d89e2){return _0x39b9f7(_0x138322,_0x4d89e2- -0x41a);}_0x191560['st']=0x1;const _0xa39e3b={};_0xa39e3b['defines']=['DISABLE_GL_POSITION_LOG_DEPTH'],_0xa39e3b['sources']=[fullscreenVert];const _0x179750={};_0x179750['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x179750['sources']=[screenDrawFrag];const _0x595eb8={};_0x595eb8['enabled']=![];const _0x212489={};_0x212489['enabled']=!![],this[_0x2d254c(-0x169,-0xef)]={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x4570fa,'geometry':this['createSegmentsGeometry'](_0x1b02ed),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'previousParticlesPosition':function(){function _0x466df3(_0x1ed135,_0x424373){return _0x2d254c(_0x1ed135,_0x424373-0x1a4);}return _0x11f92d['particlesTextures'][_0x466df3(0xc1,0xe1)];},'currentParticlesPosition':function(){function _0x4d258d(_0x168b77,_0x4757c3){return _0x2d254c(_0x168b77,_0x4757c3-0x1eb);}return _0x11f92d[_0x4d258d(0x98,0x129)]['currentParticlesPosition'];},'postProcessingPosition':function(){return _0x11f92d['particlesTextures']['postProcessingPosition'];},'particlesSpeed':function(){function _0x4c339f(_0x174a57,_0x4479fd){return _0x2d254c(_0x174a57,_0x4479fd-0x2c1);}function _0x11d3b3(_0x47e29f,_0x5c2634){return _0x2d254c(_0x5c2634,_0x47e29f-0x61);}return _0x11f92d[_0x11d3b3(-0x61,-0x86)][_0x4c339f(0x304,0x2e9)];},'colorTable':function(){return _0x4fa3e7['textures']['colorTable'];},'aspect':function(){return _0x1b6653['drawingBufferWidth']/_0x1b6653['drawingBufferHeight'];},'H':function(){return _0x12d395['H']['array'];},'hRange':function(){function _0x30e55f(_0xdbc30c,_0xcf6e44){return _0x24f455(_0xcf6e44-0x46b,_0xdbc30c);}return new Cesium$4['Cartesian2'](_0x12d395['H']['min'],_0x12d395['H'][_0x30e55f(0x44f,0x425)]);},'uSpeedRange':function(){function _0x4e0087(_0x3430ad,_0x165f75){return _0x24f455(_0x165f75- -0x147,_0x3430ad);}return new Cesium$4['Cartesian2'](_0x12d395['U']['min'],_0x12d395['U'][_0x4e0087(-0x18c,-0x18d)]);},'vSpeedRange':function(){function _0x30f4d3(_0x28c8ca,_0x4e6f9e){return _0x24f455(_0x28c8ca- -0x1a7,_0x4e6f9e);}function _0x3f9bb4(_0x3ca325,_0x41c4c3){return _0x2d254c(_0x3ca325,_0x41c4c3-0x30);}return new Cesium$4[(_0x3f9bb4(0x52,-0x25))](_0x12d395['V'][_0x3f9bb4(0x68,0x4a)],_0x12d395['V'][_0x3f9bb4(-0x9d,-0x5e)]);},'wSpeedRange':function(){function _0xbf0917(_0x56b2ff,_0x3ed6fe){return _0x2d254c(_0x3ed6fe,_0x56b2ff-0x177);}return new Cesium$4[(_0xbf0917(0x122,0x1a9))](_0x12d395['W']['min'],_0x12d395['W']['max']);},'pixelSize':function(){function _0x329539(_0x8159ce,_0x213166){return _0x24f455(_0x8159ce- -0x21,_0x213166);}return _0x1360b1[_0x329539(0x3d,0x81)];},'lineWidth':function(){return _0x1b02ed['lineWidth'];},'particleHeight':function(){return _0x1b02ed['particleHeight'];},'colour':function(){return _0x4fa3e7['colour'];}},'vertexShaderSource':new Cesium$4[(_0x24f455(0x32,-0xa))](_0xcf215f),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x437f98),'rawRenderState':Util[_0x2d254c(-0xc8,-0xe6)](_0x56497c),'framebuffer':this['framebuffers']['segments'],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':_0x24f455(-0x31,-0x8b),'attributeLocations':_0x293a0d,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'segmentsColorTexture':function(){function _0x12a7b0(_0x1a385f,_0x4036cb){return _0x24f455(_0x1a385f-0x4f,_0x4036cb);}return _0x4fa3e7['textures'][_0x12a7b0(-0x26,-0xa3)];},'segmentsDepthTexture':function(){return _0x4fa3e7['textures']['segmentsDepth'];},'currentTrailsColor':function(){function _0x2f65ed(_0x3302cd,_0x116cb3){return _0x24f455(_0x3302cd-0x282,_0x116cb3);}return _0x4fa3e7['framebuffers'][_0x2f65ed(0x2a0,0x22a)]['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x6a6cdb(_0x23bd46,_0x4c1803){return _0x2d254c(_0x23bd46,_0x4c1803- -0x1ba);}function _0x30e1c1(_0x49bafe,_0x857ac){return _0x2d254c(_0x857ac,_0x49bafe- -0x165);}return _0x4fa3e7[_0x30e1c1(-0x1ad,-0x19a)][_0x6a6cdb(-0x165,-0x1e4)][_0x6a6cdb(-0x21c,-0x290)];},'fadeOpacity':function(){function _0x125f65(_0x2350fc,_0x22c2d7){return _0x2d254c(_0x2350fc,_0x22c2d7-0x2ed);}return _0x1b02ed[_0x125f65(0x2b3,0x247)];}},'vertexShaderSource':new Cesium$4[(_0x2d254c(-0x92,-0x16))](_0x378176),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x217d8),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4[_0x2d254c(-0x7d,-0x44)]['ALWAYS']},'depthMask':!![]}),'framebuffer':this[_0x2d254c(0x42,-0x48)][_0x2d254c(-0x7,-0x23)],'autoClear':!![],'preExecute':function(){if(_0x1b02ed['dynamic']){const _0x1579a6=_0x4fa3e7[_0x196ae0(-0x1fa,-0x180)]['currentTrails'];_0x4fa3e7['framebuffers'][_0x196ae0(-0x171,-0x162)]=_0x4fa3e7['framebuffers'][_0x286f66(0x24,0x2a)],_0x4fa3e7[_0x286f66(0x78,0x5)][_0x286f66(-0x9,0x2a)]=_0x1579a6;}function _0x286f66(_0x237f6b,_0x5d5228){return _0x24f455(_0x5d5228-0x5,_0x237f6b);}function _0x196ae0(_0x242425,_0x3911a4){return _0x2d254c(_0x242425,_0x3911a4- -0x138);}_0x4fa3e7['primitives']['trails'][_0x196ae0(-0x218,-0x1b8)]['framebuffer']=_0x4fa3e7['framebuffers'][_0x286f66(0x75,0x2a)],_0x4fa3e7[_0x196ae0(-0x282,-0x227)]['trails'][_0x286f66(-0x93,-0x6f)]['framebuffer']=_0x4fa3e7['framebuffers']['nextTrails'];}}),'screen':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x191560,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){function _0x42e7ca(_0x117af1,_0x20e78d){return _0x2d254c(_0x117af1,_0x20e78d-0x1b4);}return _0x4fa3e7['framebuffers']['nextTrails'][_0x42e7ca(0x1bf,0x13d)](0x0);},'trailsDepthTexture':function(){function _0x490f0a(_0x16d12c,_0x39fa61){return _0x24f455(_0x16d12c- -0x2c,_0x39fa61);}return _0x4fa3e7['framebuffers']['nextTrails'][_0x490f0a(-0xba,-0x109)];}},'vertexShaderSource':new Cesium$4[(_0x24f455(0x32,-0x5e))](_0xa39e3b),'fragmentShaderSource':new Cesium$4[(_0x24f455(0x32,0x5a))](_0x179750),'rawRenderState':Util[_0x2d254c(-0xfd,-0xe6)]({'viewport':undefined,'depthTest':_0x595eb8,'depthMask':!![],'blending':_0x212489}),'framebuffer':undefined})};}}function _0x362994(_0x3187e3,_0x2cc17a){return _0x4d13(_0x2cc17a- -0x34b,_0x3187e3);}var CalculateSpeedShader=_0x362994(-0x270,-0x24c),PostProcessingPositionShader=_0x362994(-0x14e,-0x1c8),UpdatePositionShader=_0x362994(-0x1f9,-0x19c);const Cesium$3=mars3d__namespace['Cesium'];class ParticlesComputing{constructor(_0x20bbec,_0x396673,_0x3d63a5,_0x36071){this['data']=_0x396673,this[_0x58e6f9(-0x1c,0x61)](_0x20bbec,_0x396673);function _0x58e6f9(_0x93bf95,_0x559c0b){return _0x39b9f7(_0x93bf95,_0x559c0b- -0x376);}function _0x124eac(_0x1097a7,_0x5e6dc0){return _0x362994(_0x1097a7,_0x5e6dc0-0x46);}this['createParticlesTextures'](_0x20bbec,_0x3d63a5,_0x36071),this[_0x124eac(-0x24e,-0x1d4)](_0x396673,_0x3d63a5,_0x36071);}[_0x39b9f7(0x345,0x3d7)](_0x5bd1dd,_0x155b4d){function _0x59b993(_0x5ed7e7,_0x1121ed){return _0x39b9f7(_0x1121ed,_0x5ed7e7- -0xc2);}function _0x30d3d4(_0x40439c,_0x442c15){return _0x362994(_0x40439c,_0x442c15-0x3ae);}var _0x366bd0;const _0x492fa={'context':_0x5bd1dd,'width':_0x155b4d[_0x59b993(0x284,0x29f)]['lon'],'height':_0x155b4d[_0x30d3d4(0x1e6,0x178)][_0x59b993(0x38a,0x383)]*(_0x155b4d['dimensions']['lev']||0x1),'pixelFormat':Cesium$3['PixelFormat'][_0x30d3d4(0x2ad,0x22c)],'pixelDatatype':Cesium$3['PixelDatatype']['FLOAT'],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0x30d3d4(0x24e,0x277)]['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x30d3d4(0x29a,0x256)]})};this['windTextures']={'U':Util[_0x30d3d4(0x1d1,0x1ef)](_0x492fa,_0x155b4d['U']['array']),'V':Util['createTexture'](_0x492fa,_0x155b4d['V']['array']),'W':Util[_0x59b993(0x2fb,0x2e5)](_0x492fa,((_0x366bd0=_0x155b4d['W'])===null||_0x366bd0===void 0x0?void 0x0:_0x366bd0[_0x30d3d4(0x145,0x1d4)])??_0x155b4d['U']['array']),'H':Util['createTexture'](_0x492fa,_0x155b4d['H'][_0x59b993(0x2e0,0x289)])};}[_0x39b9f7(0x2f0,0x32d)](_0x32c951,_0x283f9a,_0x47c582){function _0x58311e(_0x5c40fd,_0xc61aa3){return _0x362994(_0x5c40fd,_0xc61aa3-0x655);}const _0x3e9e06={'context':_0x32c951,'width':_0x283f9a[_0x58311e(0x503,0x505)],'height':_0x283f9a['particlesTextureSize'],'pixelFormat':Cesium$3['PixelFormat'][_0x58311e(0x4e1,0x4ce)],'pixelDatatype':Cesium$3[_0x58311e(0x47d,0x4ea)][_0x58311e(0x4b9,0x490)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3['TextureMinificationFilter'][_0x58311e(0x506,0x4fd)],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x58311e(0x4fd,0x4fd)]})},_0xc5af88=this[_0x58311e(0x466,0x4df)](_0x283f9a['maxParticles'],_0x47c582),_0x20014a=new Float32Array(0x4*_0x283f9a[_0x1e3c84(0x1ea,0x16d)])['fill'](0x0);function _0x1e3c84(_0x5cc2ad,_0x10cc65){return _0x39b9f7(_0x10cc65,_0x5cc2ad- -0x19e);}this['particlesTextures']={'previousParticlesPosition':Util[_0x58311e(0x44f,0x496)](_0x3e9e06,_0xc5af88),'currentParticlesPosition':Util[_0x1e3c84(0x21f,0x237)](_0x3e9e06,_0xc5af88),'nextParticlesPosition':Util['createTexture'](_0x3e9e06,_0xc5af88),'postProcessingPosition':Util[_0x1e3c84(0x21f,0x21b)](_0x3e9e06,_0xc5af88),'particlesSpeed':Util['createTexture'](_0x3e9e06,_0x20014a)};}[_0x39b9f7(0x48a,0x406)](_0x4882a3,_0x5b6455){function _0x3e9703(_0x71ad1d,_0x5464cf){return _0x39b9f7(_0x71ad1d,_0x5464cf-0x179);}const _0x4f2ea1=new Float32Array(0x4*_0x4882a3);function _0x3b6ef1(_0x10e273,_0x5599bf){return _0x39b9f7(_0x5599bf,_0x10e273- -0x3a6);}for(let _0x49c4a1=0x0;_0x49c4a1<_0x4882a3;_0x49c4a1++){_0x4f2ea1[0x4*_0x49c4a1]=Cesium$3[_0x3e9703(0x538,0x4a7)]['randomBetween'](_0x5b6455[_0x3e9703(0x53b,0x568)]['x'],_0x5b6455[_0x3e9703(0x57c,0x568)]['y']),_0x4f2ea1[0x4*_0x49c4a1+0x1]=Cesium$3['Math']['randomBetween'](_0x5b6455['latRange']['x'],_0x5b6455[_0x3e9703(0x50e,0x5a3)]['y']),_0x4f2ea1[0x4*_0x49c4a1+0x2]=Cesium$3[_0x3e9703(0x50a,0x4a7)][_0x3b6ef1(-0x1,-0x73)](this['data']['lev']['min'],this['data']['lev'][_0x3e9703(0x4cc,0x505)]),_0x4f2ea1[0x4*_0x49c4a1+0x3]=0x0;}return _0x4f2ea1;}[_0x39b9f7(0x373,0x345)](_0x20bc88){const _0x41c3fb=[_0x20bc88['dimensions'][_0x77d85d(-0x2d,-0x9a)],_0x20bc88['dimensions']['lat'],_0x20bc88['dimensions']['lev']],_0x3f142b=[_0x20bc88['lon']['min'],_0x20bc88['lat']['min'],_0x20bc88[_0xcaaf26(-0x1a9,-0x21f)]['min']],_0x379c2a=[_0x20bc88['lon']['max'],_0x20bc88['lat']['max'],_0x20bc88['lev']['max']],_0x33ed2a=[(_0x379c2a[0x0]-_0x3f142b[0x0])/(_0x41c3fb[0x0]-0x1),(_0x379c2a[0x1]-_0x3f142b[0x1])/(_0x41c3fb[0x1]-0x1),_0x41c3fb[0x2]>0x1?(_0x379c2a[0x2]-_0x3f142b[0x2])/(_0x41c3fb[0x2]-0x1):0x1],_0x378f03=Math['floor'](Math['random']()*_0x20bc88['U']['array']['length']),_0x273ffb=_0x378f03%(_0x41c3fb[0x0]*_0x41c3fb[0x1]),_0x3b92ee=Math['floor'](_0x273ffb/_0x41c3fb[0x0]),_0x392a7a=_0x273ffb%_0x41c3fb[0x0],_0x47d137=Cesium$3[_0x77d85d(-0x117,-0x121)]['randomBetween'](_0x3f142b[0x0]+_0x392a7a*_0x33ed2a[0x0],_0x3f142b[0x0]+(_0x392a7a+0x1)*_0x33ed2a[0x0]);function _0x77d85d(_0x1c7b4f,_0x1a504c){return _0x39b9f7(_0x1a504c,_0x1c7b4f- -0x445);}const _0x3ca5df=Cesium$3[_0xcaaf26(-0x21c,-0x26e)][_0x77d85d(-0xa0,-0xd5)](_0x3f142b[0x1]+(_0x3b92ee-0x1)*_0x33ed2a[0x1],_0x3f142b[0x1]+_0x3b92ee*_0x33ed2a[0x1]),_0x40c24d=_0x20bc88['H'][_0x77d85d(-0xa3,-0x4e)][_0x378f03]||0x0;function _0xcaaf26(_0x5e508a,_0x3fc189){return _0x39b9f7(_0x5e508a,_0x3fc189- -0x59c);}return[_0x47d137,_0x3ca5df,_0x40c24d];}['destroyParticlesTextures'](){function _0x366757(_0x290bb0,_0x5aea20){return _0x39b9f7(_0x290bb0,_0x5aea20-0xad);}function _0x58ee6b(_0x34b3e4,_0x4266d9){return _0x39b9f7(_0x4266d9,_0x34b3e4- -0x5eb);}Object['keys'](this[_0x58ee6b(-0x293,-0x219)])[_0x58ee6b(-0x2b2,-0x32e)](_0x78b17c=>{function _0x511219(_0x418418,_0x241a4f){return _0x366757(_0x418418,_0x241a4f-0x56);}this['particlesTextures'][_0x78b17c][_0x511219(0x47c,0x44a)]();});}['createComputingPrimitives'](_0x2a85dc,_0x3338ad,_0x3fc4b9){const _0x1d04c9=new Cesium$3[(_0x5b563c(-0x18c,-0x209))](_0x2a85dc['dimensions']['lon'],_0x2a85dc[_0x5b563c(-0x242,-0x211)]['lat'],_0x2a85dc[_0x5b563c(-0x242,-0x1b3)][_0x5b563c(-0x20b,-0x230)]);function _0x5b563c(_0xafcb06,_0x2286db){return _0x362994(_0x2286db,_0xafcb06- -0xc);}const _0x482d91=new Cesium$3[(_0x23f451(0x349,0x3b2))](_0x2a85dc['lon']['min'],_0x2a85dc['lat']['min'],_0x2a85dc[_0x5b563c(-0x20b,-0x18e)][_0x5b563c(-0x154,-0x18b)]),_0x17556d=new Cesium$3['Cartesian3'](_0x2a85dc['lon'][_0x5b563c(-0x1fc,-0x207)],_0x2a85dc['lat'][_0x5b563c(-0x1fc,-0x1ec)],_0x2a85dc[_0x23f451(0x30b,0x333)]['max']),_0x3d7acf=new Cesium$3[(_0x5b563c(-0x18c,-0x106))]((_0x17556d['x']-_0x482d91['x'])/(_0x1d04c9['x']-0x1),(_0x17556d['y']-_0x482d91['y'])/(_0x1d04c9['y']-0x1),_0x1d04c9['z']>0x1?(_0x17556d['z']-_0x482d91['z'])/(_0x1d04c9['z']-0x1):0x1),_0x267548=new Cesium$3[(_0x23f451(0x402,0x37b))](_0x2a85dc['lon'][_0x5b563c(-0x154,-0x1c3)],_0x2a85dc['lon']['max']),_0x3b3125=new Cesium$3['Cartesian2'](_0x2a85dc[_0x23f451(0x3bc,0x402)][_0x5b563c(-0x154,-0x1e7)],_0x2a85dc['lat']['max']),_0x335e35=new Cesium$3['Cartesian2'](_0x2a85dc['U'][_0x5b563c(-0x154,-0x14b)],_0x2a85dc['U']['max']),_0x5c2f55=new Cesium$3[(_0x23f451(0x3b2,0x37b))](_0x2a85dc['V'][_0x5b563c(-0x154,-0x1c5)],_0x2a85dc['V']['max']),_0x2ed3e6=new Cesium$3[(_0x23f451(0x335,0x37b))](_0x2a85dc['W']['min'],_0x2a85dc['W']['max']),_0x21f0bd=this,_0x4b243f={};_0x4b243f['U']=function(){return _0x21f0bd['windTextures']['U'];},_0x4b243f['V']=function(){function _0x23381c(_0x500c22,_0x2200c5){return _0x5b563c(_0x2200c5- -0x71,_0x500c22);}return _0x21f0bd[_0x23381c(-0x290,-0x268)]['V'];},_0x4b243f['W']=function(){return _0x21f0bd['windTextures']['W'];};function _0x23f451(_0x4af69b,_0x1dafe4){return _0x362994(_0x4af69b,_0x1dafe4-0x532);}_0x4b243f['currentParticlesPosition']=function(){function _0x464903(_0x28facd,_0x2d8fb8){return _0x5b563c(_0x2d8fb8-0x48e,_0x28facd);}return _0x21f0bd[_0x464903(0x2b4,0x25e)]['currentParticlesPosition'];},_0x4b243f['dimension']=function(){return _0x1d04c9;},_0x4b243f['minimum']=function(){return _0x482d91;},_0x4b243f[_0x23f451(0x2fb,0x339)]=function(){return _0x17556d;},_0x4b243f['interval']=function(){return _0x3d7acf;},_0x4b243f[_0x5b563c(-0x22f,-0x261)]=function(){return _0x335e35;},_0x4b243f['vSpeedRange']=function(){return _0x5c2f55;},_0x4b243f[_0x5b563c(-0x1dc,-0x229)]=function(){return _0x2ed3e6;},_0x4b243f[_0x5b563c(-0x148,-0x149)]=function(){function _0x14126e(_0x5cf727,_0x2f1323){return _0x23f451(_0x5cf727,_0x2f1323- -0x2f2);}function _0x3ff001(_0x3014da,_0x10be9d){return _0x5b563c(_0x3014da-0x16d,_0x10be9d);}return _0x3fc4b9[_0x3ff001(0x15,-0x38)]*_0x3338ad[_0x3ff001(-0xd1,-0x3d)];};const _0x17942d={};_0x17942d[_0x23f451(0x369,0x3d5)]=[CalculateSpeedShader];const _0x3d49e0={};_0x3d49e0['sources']=[UpdatePositionShader];const _0x53962a={};_0x53962a[_0x5b563c(-0x169,-0x149)]=[PostProcessingPositionShader],this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x5b563c(-0x186,-0x18f),'uniformMap':_0x4b243f,'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x17942d),'outputTexture':this['particlesTextures'][_0x23f451(0x367,0x3f8)],'preExecute':function(){function _0x4f8317(_0x5ba6e2,_0x17c9fe){return _0x23f451(_0x17c9fe,_0x5ba6e2- -0x56a);}function _0x5b86b8(_0x187628,_0x172609){return _0x5b563c(_0x172609-0x649,_0x187628);}if(_0x3338ad!==undefined&&_0x3338ad['dynamic']){const _0x4aab68=_0x21f0bd['particlesTextures'][_0x4f8317(-0x25d,-0x2e5)];_0x21f0bd[_0x5b86b8(0x41f,0x419)]['previousParticlesPosition']=_0x21f0bd['particlesTextures']['currentParticlesPosition'],_0x21f0bd['particlesTextures'][_0x4f8317(-0x1ed,-0x164)]=_0x21f0bd['particlesTextures'][_0x5b86b8(0x4c4,0x468)],_0x21f0bd['particlesTextures'][_0x4f8317(-0x20d,-0x21e)]=_0x4aab68;}_0x21f0bd['primitives']['calculateSpeed'][_0x4f8317(-0x21a,-0x28a)]['outputTexture']=_0x21f0bd['particlesTextures']['particlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':function(){function _0x423e18(_0x3f413d,_0x3293a4){return _0x5b563c(_0x3293a4-0x7b,_0x3f413d);}return _0x21f0bd[_0x423e18(-0x207,-0x1b5)]['currentParticlesPosition'];},'particlesSpeed':function(){return _0x21f0bd['particlesTextures']['particlesSpeed'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x3d49e0),'outputTexture':this['particlesTextures'][_0x5b563c(-0x1cc,-0x158)],'preExecute':function(){function _0x483880(_0x40eb14,_0x3b42d4){return _0x5b563c(_0x40eb14-0x36d,_0x3b42d4);}_0x21f0bd[_0x483880(0x110,0xfd)]['updatePosition']['commandToExecute']['outputTexture']=_0x21f0bd['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x5b563c(-0x186,-0x20a),'uniformMap':{'nextParticlesPosition':function(){function _0x52fdfe(_0xbd3615,_0x207c0a){return _0x23f451(_0xbd3615,_0x207c0a-0x1ba);}return _0x21f0bd['particlesTextures'][_0x52fdfe(0x566,0x52c)];},'particlesSpeed':function(){function _0x484164(_0x56b8b5,_0x2471fe){return _0x5b563c(_0x56b8b5-0x522,_0x2471fe);}function _0x36278e(_0x505b1a,_0x448d40){return _0x5b563c(_0x448d40-0x3fd,_0x505b1a);}return _0x21f0bd[_0x36278e(0x13a,0x1cd)][_0x36278e(0x336,0x2b7)];},'viewerLonRange':function(){return _0x3fc4b9['lonRange'];},'viewerLatRange':function(){function _0x2b4613(_0x2cc4df,_0xab971c){return _0x23f451(_0xab971c,_0x2cc4df-0x36);}return _0x3fc4b9[_0x2b4613(0x416,0x48b)];},'lonRange':function(){return _0x267548;},'latRange':function(){return _0x3b3125;},'dimension':function(){return _0x1d04c9;},'minimum':function(){return _0x482d91;},'maximum':function(){return _0x17556d;},'interval':function(){return _0x3d7acf;},'H':function(){return _0x21f0bd['windTextures']['H'];},'randomCoefficient':function(){const _0x3f8c56=Math[_0xeea757(0xd,0x4)]();function _0xeea757(_0x111e8d,_0x4d6f94){return _0x23f451(_0x4d6f94,_0x111e8d- -0x2cd);}return _0x3f8c56;},'dropRate':function(){return _0x3338ad['dropRate'];},'dropRateBump':function(){return _0x3338ad['dropRateBump'];}},'fragmentShaderSource':new Cesium$3[(_0x5b563c(-0x184,-0x196))](_0x53962a),'outputTexture':this[_0x5b563c(-0x230,-0x281)][_0x5b563c(-0x1e1,-0x19c)],'preExecute':function(){function _0x4e622f(_0x1ed162,_0x51583c){return _0x23f451(_0x51583c,_0x1ed162-0x142);}function _0xdb0398(_0x1c65ba,_0x242a40){return _0x5b563c(_0x1c65ba-0x63f,_0x242a40);}_0x21f0bd[_0xdb0398(0x3e2,0x36b)][_0x4e622f(0x49f,0x469)]['commandToExecute']['outputTexture']=_0x21f0bd[_0xdb0398(0x40f,0x3cb)]['postProcessingPosition'];}})};}}const Cesium$2=mars3d__namespace['Cesium'];function _0x4702(){const _0x4674b0=['canvasContext','createRenderingPrimitives','framebuffers','particleSystem','ceil','BufferUsage','DepthFunction','createWindTextures','canvas','ymin','clientHeight','currentTrailsDepth','tlat','18635zbIePx','ymax','10NCqppQ','#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x20Unit\x20converted\x20to\x20degrees\x20of\x20longitude\x20and\x20latitude\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20speed;\x0a\x20\x20if(length(speed.rgb)\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a','windData','bind','TWO_PI','canvasResize','setGeometry','depthTest','beginPath','umin','getV','left','getRandomLatLng','segments','Cesium','length','lonRange','currentTrails','dynamic','_calcUV','_pointerEvents','none','RGBA','unbindEvent','nextTrails','value','CanvasWindLayer','RED','show','Cartesian3','destroyParticlesTextures','mouseUp','uniformMap','resize','PrimitiveCollection','Compute','_canrefresh','ShaderSource','height','randomizeParticles','GeometryAttributes','zIndex','ColorRamp','requestAnimationFrame','Framebuffer','visibility','_showHook','update','cancelAnimationFrame','5748TjDwEA','PixelDatatype','_tomap','blue','669JEvQzP','updatePosition','STATIC_DRAW','xmin','lon','mouseMove','_onMouseDownEvent','register','mode','globalCompositeOperation','__esModule','sources','_map','LINEAR','1758912axHEmn','PI_OVER_THREE','NEAREST','_addedHook','getUVByXY','_calc_speedRate','autoClear','maxAge','latRange','toDegrees','particlesTextureSize','mouse_move','arrayBufferView','outputTexture','pixelSize','_randomParticle','addPrimitives','layer','min','lng','reverse','willReadFrequently','SCENE3D','setData','_removedHook','_onMap_preRenderEvent','shaderProgram','age','DrawCommand','pointer-events','speedScaleFactor','fromCache','particlesSpeed','getOptions','VertexArray','TextureMinificationFilter','500346bqWfvS','fragmentShaderSource','createFramebuffer','push','dropRateBump','getU','lat','getUVByPoint','particlesNumber','random','camera','drawingBufferWidth','SceneMode','globeBoundingSphere','style','visible','primitives','geometry','createParticlesTextures','Math','_mountedHook','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20W;\x20//\x20upward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0auniform\x20float\x20speedScaleFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20//\x20map\x20the\x20z-axis\x20value\x20to\x20the\x20nearest\x20bit\x20plane\x20to\x20ensure\x20that\x20the\x20result\x20is\x20an\x20integer\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205,\x207,\x208,\x209],\x20width\x20=\x202,\x20height\x20=\x202,\x20level\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x206\x207\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x202\x203\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0afloat\x20interpolateTexture(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x201.0f\x20*\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x201.0f\x20*\x20interval.y;\x0a\x0a\x20\x20float\x20lon0_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon1_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon0_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat1,\x20lev));\x0a\x20\x20float\x20lon1_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat1,\x20lev));\x0a\x0a\x20\x20float\x20lon_lat0\x20=\x20mix(lon0_lat0,\x20lon1_lat0,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat1\x20=\x20mix(lon0_lat1,\x20lon1_lat1,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat\x20=\x20mix(lon_lat0,\x20lon_lat1,\x20lat\x20-\x20lat0);\x0a\x20\x20return\x20lon_lat;\x0a}\x0a\x0avec3\x20linearInterpolation(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bilinear_interpolation\x0a\x20\x20float\x20u\x20=\x20interpolateTexture(U,\x20lonLatLev);\x0a\x20\x20float\x20v\x20=\x20interpolateTexture(V,\x20lonLatLev);\x0a\x20\x20float\x20w\x20=\x20interpolateTexture(W,\x20lonLatLev);\x0a\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec3\x20convertSpeedUnitToLonLat(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20float\x20w\x20=\x20speed.z;\x0a\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20return\x20windVectorInLonLatLev;\x0a}\x0a\x0avec3\x20calculateSpeedByRungeKutta2(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec3\x20y_n\x20=\x20lonLatLev;\x0a\x20\x20vec3\x20f_n\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec3\x20speed\x20=\x20h\x20*\x20linearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20getRange(vec2\x20range)\x20{\x0a\x20\x20float\x20x1\x20=\x200.0f\x20-\x20range.x;\x0a\x20\x20float\x20x2\x20=\x20range.y\x20-\x200.0f;\x0a\x20\x20if(x1\x20<\x200.0f\x20||\x20x2\x20<\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(abs(x1),\x20abs(x2));\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x20abs(max(x1,\x20x2)));\x0a\x20\x20}\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20vec2\x20uRange\x20=\x20getRange(uSpeedRange);\x0a\x20\x20vec2\x20vRange\x20=\x20getRange(vSpeedRange);\x0a\x20\x20vec2\x20wRange\x20=\x20getRange(wSpeedRange);\x0a\x20\x20if(length(speed.xyz)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x200.0f;\x0a\x20\x20}\x0a\x0a\x20\x20percent.x\x20=\x20(abs(speed.x)\x20-\x20uRange.x)\x20/\x20(uRange.y\x20-\x20uRange.x);\x0a\x20\x20percent.y\x20=\x20(abs(speed.y)\x20-\x20vRange.x)\x20/\x20(vRange.y\x20-\x20vRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(abs(speed.z)\x20-\x20wRange.x)\x20/\x20(wRange.y\x20-\x20wRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speedOrigin\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLatLev);\x0a\x20\x20vec3\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLatLev,\x20speed);\x0a\x0a\x20\x20vec4\x20particleSpeed\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speed\x20/\x20speedScaleFactor));\x0a\x20\x20\x20\x20//\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','rawRenderState','postMessage','currentTrailsColor','createRawRenderState','absolute','particlesRendering','_onMouseMoveEvent','tlng','forEach','frameRate','Pass','defines','color','pixelDatatype','createRenderingTextures','Ellipsoid','blending','nextTrailsColor','drawingBufferHeight','depthTexture','getValidRange','dimensions','destroy','colors','textures','speedFactor','25355DdfnPx','screen','viewerParameters','lineWidth','bindEvent','auto','rows','udata','vertexArray','talt','DEPTH_COMPONENT','off','previousParticlesPosition','particlesTextures','uSpeedRange','computeViewRectangle','preRender','getParticles','segmentsColor','clearCommand','clampToLatitudeRange','RGB','PI_OVER_TWO','createComputingPrimitives','levmin','alt','_data','mod','applyViewerParameters','clear','dropRate','createSegmentsGeometry','_onMouseUpEvent','pointerEvents','_speedRate','setOptions','add','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','type','setDate','primitiveType','fadeOpacity','globe','speed','reverseY','viewRectangleToLonLatRange','getOwnPropertyDescriptor','east','_maxAge','keys','lev','removeChild','_animateFrame','clientWidth','context','grid','maximum','depthMask','fixedHeight','options','container','maxParticles','_setOptionsHook','particles','isDestroyed','max','vdata','0px','CanvasWindField','init','windTextures','vmax','defined','redraw','particlesComputing','refreshParticles','hidden','PointTrans','canvasWidth','commandToExecute','EventType','8808863IKjiwZ','fromGeometry','speedRate','data','xmax','Draw','array','getColorTexture','20LuMrFY','randomBetween','mouseDown','postProcessingPosition','createCommand','1190VtHuXt','moveTo','cols','wSpeedRange','GeometryAttribute','position','getSpeed','sqrt','ZERO','_onMapWhellEvent','removeAll','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x0a\x0auniform\x20sampler2D\x20H;\x20//\x20particles\x20height\x20textures\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0auniform\x20vec2\x20viewerLonRange;\x0auniform\x20vec2\x20viewerLatRange;\x0a\x0aconst\x20float\x20randomCoefficient\x20=\x200.1f;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0aconst\x20float\x20dropRate\x20=\x200.1f;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0aconst\x20float\x20dropRateBump\x20=\x200.1f;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0avec4\x20getTextureValue(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20vec4\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D);\x0a\x20\x20return\x20result;\x0a}\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0abool\x20particleNoSpeed(vec3\x20particle)\x20{\x0a\x20\x20vec4\x20speed\x20=\x20getTextureValue(particlesSpeed,\x20particle);\x0a\x20\x20return\x20speed.r\x20==\x200.0f\x20&&\x20speed.g\x20==\x200.0f;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0f);\x0a\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20float\x20height\x20=\x20getTextureValue(H,\x20vec3(randomLon,\x20randomLat,\x20lev)).r;\x0a\x0a\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20height);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20viewerLatRange.x\x20||\x20particle.y\x20>\x20viewerLatRange.y\x20||\x20particle.x\x20<\x20viewerLonRange.x\x20||\x20particle.x\x20>\x20viewerLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x0a}\x0a','8414580VOEiHk','refreshTimer','FLOAT','createRenderingFramebuffers','pow','128TGhrZH','_bilinearInterpolation','nextParticlesPosition','createTexture','windField','ComponentDatatype','default','frameTime','DomUtil','scene','attributeLocations','Cartesian2','worker','currentParticlesPosition','IDENTITY','#ffffff','canvasHeight','getPixelSize','_colorRamp','preExecute','addEventListener','width'];_0x4702=function(){return _0x4674b0;};return _0x4702();}class ParticleSystem{constructor(_0x330636,_0x1fd9c0,_0xa313a5,_0x58c41a){this[_0x32d3e7(0x85,0xca)]=_0x330636,_0x1fd9c0={..._0x1fd9c0};_0x1fd9c0['udata']&&_0x1fd9c0['vdata']&&(_0x1fd9c0['dimensions']={},_0x1fd9c0['dimensions']['lon']=_0x1fd9c0['cols'],_0x1fd9c0[_0x11f298(-0x158,-0x169)][_0x32d3e7(0x150,0x13b)]=_0x1fd9c0['rows'],_0x1fd9c0['dimensions'][_0x32d3e7(0x81,0x77)]=_0x1fd9c0['lev']||0x1,_0x1fd9c0['lon']={},_0x1fd9c0['lon']['min']=_0x1fd9c0['xmin'],_0x1fd9c0['lon']['max']=_0x1fd9c0[_0x11f298(-0xfe,-0x164)],_0x1fd9c0['lat']={},_0x1fd9c0[_0x32d3e7(0x150,0xd1)]['min']=_0x1fd9c0['ymin'],_0x1fd9c0[_0x11f298(-0x52,-0x42)]['max']=_0x1fd9c0[_0x32d3e7(0xe2,0xb1)],_0x1fd9c0[_0x32d3e7(0x81,0x3c)]={},_0x1fd9c0[_0x32d3e7(0x81,0xb)][_0x11f298(-0x6a,-0xda)]=_0x1fd9c0[_0x32d3e7(0x67,0x61)]??0x1,_0x1fd9c0['lev']['max']=_0x1fd9c0['levmax']??0x1,_0x1fd9c0['U']={},_0x1fd9c0['U']['array']=new Float32Array(_0x1fd9c0['udata']),_0x1fd9c0['U'][_0x11f298(-0x6a,-0x71)]=_0x1fd9c0[_0x32d3e7(0xec,0x14d)]??Math['min'](..._0x1fd9c0[_0x32d3e7(0x56,-0x33)]),_0x1fd9c0['U']['max']=_0x1fd9c0['umax']??Math[_0x11f298(-0x112,-0xe6)](..._0x1fd9c0[_0x32d3e7(0x56,0x48)]),_0x1fd9c0['V']={},_0x1fd9c0['V'][_0x32d3e7(0xa6,0xb5)]=new Float32Array(_0x1fd9c0['vdata']),_0x1fd9c0['V']['min']=_0x1fd9c0['vmin']??Math[_0x32d3e7(0x138,0x105)](..._0x1fd9c0[_0x32d3e7(0x91,0x84)]),_0x1fd9c0['V']['max']=_0x1fd9c0[_0x32d3e7(0x96,0xd9)]??Math['max'](..._0x1fd9c0['vdata']));function _0x11f298(_0x482d5e,_0x28ef6f){return _0x39b9f7(_0x28ef6f,_0x482d5e- -0x49e);}function _0x32d3e7(_0x512f24,_0x203e5){return _0x39b9f7(_0x203e5,_0x512f24- -0x2fc);}!_0x1fd9c0['W']&&(_0x1fd9c0['W']={'array':new Float32Array(_0x1fd9c0['U']['array']['length']),'min':0x0,'max':0x0});if(!_0x1fd9c0['H']){var _0xe6d730;_0x1fd9c0['H']={'array':new Float32Array(_0x1fd9c0['U']['array']['length']),'min':0x0,'max':0x0};if((_0xe6d730=_0x1fd9c0[_0x32d3e7(0x81,0xa8)])!==null&&_0xe6d730!==void 0x0&&_0xe6d730['array']){const {lon:_0x5366f0,lat:_0x4e1d87,lev:_0x2cd047}=_0x1fd9c0['dimensions'];for(let _0x5d5afb=0x0;_0x5d5afb<_0x2cd047;_0x5d5afb++){for(let _0x367fbb=0x0;_0x367fbb<_0x4e1d87;_0x367fbb++){for(let _0x1dce1d=0x0;_0x1dce1d<_0x5366f0;_0x1dce1d++){const _0x501a8f=_0x5d5afb*(_0x5366f0*_0x4e1d87)+_0x367fbb*_0x5366f0+_0x1dce1d;_0x1fd9c0['H'][_0x11f298(-0xfc,-0x149)][_0x501a8f]=_0x1fd9c0['lev'][_0x32d3e7(0xa6,0x38)][_0x5d5afb];}}}_0x1fd9c0['H'][_0x11f298(-0x6a,-0x3c)]=Math[_0x32d3e7(0x138,0x14c)](..._0x1fd9c0[_0x32d3e7(0x81,0xab)]['array']),_0x1fd9c0['H']['max']=Math[_0x32d3e7(0x90,0xc5)](..._0x1fd9c0[_0x32d3e7(0x81,0x14)]['array']);}}this[_0x32d3e7(0xa3,0x127)]=_0x1fd9c0,this['options']=_0xa313a5,this['viewerParameters']=_0x58c41a,this['particlesComputing']=new ParticlesComputing(this['context'],this[_0x11f298(-0xff,-0x104)],this['options'],this['viewerParameters']),this[_0x32d3e7(0x3a,-0x31)]=new ParticlesRendering(this['context'],this[_0x11f298(-0xff,-0x15e)],this['options'],this['viewerParameters'],this[_0x32d3e7(0x99,0x6a)]);}[_0x362994(-0x1a1,-0x198)](_0x2198bd){this['particlesComputing']['destroyParticlesTextures'](),Object['keys'](this['particlesComputing']['windTextures'])[_0x3ede31(-0x163,-0xfe)](_0x2cfd33=>{function _0x45a256(_0x314fca,_0x1d5518){return _0x3ede31(_0x1d5518-0x10,_0x314fca);}this[_0x45a256(-0x7b,-0xf7)]['windTextures'][_0x2cfd33]['destroy']();}),this['particlesRendering']['textures']['colorTable']['destroy']();function _0x3ede31(_0x2ffeff,_0x57d951){return _0x362994(_0x57d951,_0x2ffeff-0xe0);}Object['keys'](this['particlesRendering']['framebuffers'])['forEach'](_0x39b4d1=>{function _0x4bc844(_0x329ca8,_0x34614e){return _0x3ede31(_0x34614e-0x2dd,_0x329ca8);}this['particlesRendering'][_0x4bc844(0x29f,0x213)][_0x39b4d1]['destroy']();});function _0x3a0ec0(_0x3eb6d0,_0x132a52){return _0x362994(_0x3eb6d0,_0x132a52-0x3cc);}this['context']=_0x2198bd,this['particlesComputing']=new ParticlesComputing(this[_0x3a0ec0(0x224,0x1d1)],this['data'],this['options'],this['viewerParameters']),this['particlesRendering']=new ParticlesRendering(this['context'],this[_0x3ede31(-0xfd,-0x12d)],this[_0x3a0ec0(0x221,0x1d6)],this[_0x3ede31(-0x14f,-0x128)],this[_0x3a0ec0(0x224,0x1e5)]);}['clearFramebuffers'](){const _0x23448a=new Cesium$2['ClearCommand']({'color':new Cesium$2['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2['Pass']['OPAQUE']});function _0x4d5f8e(_0x47ce6c,_0x5996a4){return _0x39b9f7(_0x47ce6c,_0x5996a4-0x11);}Object['keys'](this['particlesRendering']['framebuffers'])[_0x4d5f8e(0x33c,0x34a)](_0x24fc4d=>{_0x23448a['framebuffer']=this['particlesRendering'][_0x8b605f(0x2a8,0x22a)][_0x24fc4d];function _0x8b605f(_0xfe149,_0x30754c){return _0x4d5f8e(_0x30754c,_0xfe149- -0x13b);}_0x23448a['execute'](this['context']);});}['refreshParticles'](_0xc5eb36,_0x203d5b=!![]){function _0x16fd34(_0x86d94b,_0x335359){return _0x362994(_0x86d94b,_0x335359-0x22e);}function _0x37f775(_0xed4556,_0x4e8580){return _0x362994(_0xed4556,_0x4e8580-0x6a2);}_0x203d5b&&(this['clearFramebuffers'](),this['particlesComputing'][_0x37f775(0x57a,0x523)](),this['particlesComputing']['createParticlesTextures'](this['context'],this['options'],this['viewerParameters']));if(_0xc5eb36){var _0xe7b7c5;const _0x4c9c7a=this['particlesRendering']['createSegmentsGeometry'](this['options']);this['particlesRendering']['primitives'][_0x16fd34(0xd2,0x9e)]['geometry']=_0x4c9c7a;const _0x20bee5=Cesium$2[_0x16fd34(0x126,0xf6)]['fromGeometry']({'context':this['context'],'geometry':_0x4c9c7a,'attributeLocations':this[_0x37f775(0x403,0x45c)]['primitives']['segments'][_0x37f775(0x4fd,0x4ea)],'bufferUsage':Cesium$2[_0x37f775(0x515,0x4fb)]['STATIC_DRAW']});(_0xe7b7c5=this[_0x37f775(0x400,0x45c)][_0x16fd34(0x47,-0x23)])!==null&&_0xe7b7c5!==void 0x0&&(_0xe7b7c5=_0xe7b7c5[_0x37f775(0x4e6,0x512)])!==null&&_0xe7b7c5!==void 0x0&&_0xe7b7c5['commandToExecute']&&(this[_0x16fd34(0x15,-0x18)]['primitives']['segments'][_0x16fd34(-0x38,0x4c)]['vertexArray']=_0x20bee5);}}[_0x39b9f7(0x3f4,0x36e)](_0x5dae21){function _0x488c1b(_0x1998af,_0x2b4ac0){return _0x362994(_0x1998af,_0x2b4ac0-0x317);}let _0x1c3b43=![];function _0x436b7b(_0xcb8849,_0x2dff2f){return _0x39b9f7(_0x2dff2f,_0xcb8849- -0x324);}this[_0x436b7b(0x62,0x28)][_0x488c1b(0x16a,0x123)]!==_0x5dae21['maxParticles']&&(_0x1c3b43=!![]),Object['keys'](_0x5dae21)['forEach'](_0x2e74b3=>{function _0x1c1ba1(_0x49a925,_0x495426){return _0x488c1b(_0x49a925,_0x495426-0x27b);}this[_0x1c1ba1(0x34f,0x39c)][_0x2e74b3]=_0x5dae21[_0x2e74b3];}),this['refreshParticles'](_0x1c3b43,_0x5dae21['dynamic']);}[_0x39b9f7(0x3d7,0x367)](_0x4f9f32){Object['keys'](_0x4f9f32)['forEach'](_0x36bf81=>{function _0x357056(_0x412ac5,_0x197d16){return _0x4d13(_0x197d16- -0xc9,_0x412ac5);}this[_0x357056(0x8f,0x53)][_0x36bf81]=_0x4f9f32[_0x36bf81];}),this[_0x31c953(0xb2,0xd6)](![]);function _0x31c953(_0x32878a,_0x131bcb){return _0x362994(_0x32878a,_0x131bcb-0x2bc);}function _0x173936(_0x5c3147,_0x4e7bf7){return _0x362994(_0x4e7bf7,_0x5c3147-0xe6);}!this['options'][_0x31c953(0xfe,0x131)]&&(this['options']['dynamic']=!![],this['setOptions'](this[_0x173936(-0x110,-0x1a4)]),setTimeout(()=>{this['options'][_0x5fccac(0x174,0x1af)]=![];function _0x5fccac(_0x104ced,_0x17c36d){return _0x173936(_0x17c36d-0x254,_0x104ced);}function _0x17c862(_0x43c1a6,_0xdadf40){return _0x173936(_0x43c1a6-0x44d,_0xdadf40);}this[_0x17c862(0x325,0x34d)](this[_0x5fccac(0x13d,0x144)]);},0x1f4));}[_0x39b9f7(0x3b2,0x347)](){clearTimeout(this['canrefresh']),this['particlesComputing']['destroyParticlesTextures'](),Object['keys'](this['particlesComputing']['windTextures'])['forEach'](_0x48a398=>{function _0x1b0040(_0x58ce56,_0x55acc5){return _0x4d13(_0x55acc5- -0x2b,_0x58ce56);}this['particlesComputing'][_0x1b0040(0xae,0x135)][_0x48a398]['destroy']();});function _0x29bf05(_0x1e3f39,_0x36f49e){return _0x362994(_0x1e3f39,_0x36f49e-0x700);}this[_0x2e159a(0x417,0x497)]['textures']['colorTable']['destroy']();function _0x2e159a(_0x75c832,_0x2609b4){return _0x362994(_0x2609b4,_0x75c832-0x65d);}Object[_0x29bf05(0x4d6,0x500)](this[_0x29bf05(0x518,0x4ba)]['framebuffers'])['forEach'](_0x4e64a3=>{this['particlesRendering']['framebuffers'][_0x4e64a3]['destroy']();});for(const _0x59e3a0 in this){delete this[_0x59e3a0];}}}const Cesium$1=mars3d__namespace[_0x39b9f7(0x39b,0x3ed)],BaseLayer$1=mars3d__namespace[_0x39b9f7(0x41e,0x433)]['BaseLayer'],_0x5f59a3={};_0x5f59a3[_0x362994(-0x1cb,-0x259)]=0x1000,_0x5f59a3['fixedHeight']=0x0,_0x5f59a3['fadeOpacity']=0.996,_0x5f59a3['dropRate']=0.003,_0x5f59a3[_0x39b9f7(0x46e,0x44a)]=0.01,_0x5f59a3['speedFactor']=0.5,_0x5f59a3['lineWidth']=0x2,_0x5f59a3['colors']=['rgb(206,255,255)'],_0x5f59a3[_0x362994(-0x14a,-0x18b)]=!![];const DEF_OPTIONS=_0x5f59a3;class WindLayer extends BaseLayer$1{constructor(_0x12feb1={}){_0x12feb1={...DEF_OPTIONS,..._0x12feb1},super(_0x12feb1);function _0x34c43a(_0x207f56,_0x8760aa){return _0x39b9f7(_0x207f56,_0x8760aa- -0x1ba);}this[_0x34c43a(0x1cc,0x1cf)](_0x12feb1);}get['layer'](){function _0x5f1074(_0x16b646,_0x46de22){return _0x362994(_0x46de22,_0x16b646-0x3f);}return this[_0x5f1074(-0x212,-0x243)];}get['data'](){return this['_data'];}set[_0x362994(-0x205,-0x1dd)](_0x35a868){function _0x8f8baf(_0x5f3ba6,_0x5f3c60){return _0x362994(_0x5f3c60,_0x5f3ba6-0x412);}this[_0x8f8baf(0x2cf,0x2c0)](_0x35a868);}get['colors'](){function _0x32b902(_0x4df621,_0x266d0c){return _0x39b9f7(_0x266d0c,_0x4df621-0x9d);}function _0x19bf55(_0x24f72a,_0x303637){return _0x39b9f7(_0x303637,_0x24f72a- -0xa8);}return this[_0x19bf55(0x2de,0x2d2)][_0x32b902(0x3e5,0x350)];}set['colors'](_0xfc0f78){function _0x52e5da(_0xe6a635,_0x2dfe70){return _0x39b9f7(_0x2dfe70,_0xe6a635- -0xc0);}this['options'][_0x52e5da(0x288,0x2e9)]=_0xfc0f78;if(this[_0x514908(-0x96,-0xc3)]){const _0x4946a6={};_0x4946a6['colors']=_0xfc0f78,this[_0x514908(-0x96,-0x5a)]['setOptions'](_0x4946a6);}function _0x514908(_0x2c1c96,_0x8a0630){return _0x39b9f7(_0x8a0630,_0x2c1c96- -0x469);}this[_0x52e5da(0x340,0x3bc)]();}['_mountedHook'](){}['_addedHook'](){function _0x2dae17(_0x1c9e38,_0x3be90b){return _0x39b9f7(_0x1c9e38,_0x3be90b-0x3d);}this['scene']=this['_map']['scene'],this['camera']=this[_0xac97c2(0x41e,0x3f7)]['camera'],this['primitives']=new Cesium$1[(_0x2dae17(0x47e,0x43e))](),this[_0xac97c2(0x41e,0x38a)][_0xac97c2(0x3c1,0x335)][_0x2dae17(0x353,0x368)]['add'](this['primitives']),this[_0x2dae17(0x3c2,0x38a)]={'lonRange':new Cesium$1[(_0x2dae17(0x3fb,0x402))](),'latRange':new Cesium$1['Cartesian2'](),'pixelSize':0x0,'lonDisplayRange':new Cesium$1[(_0xac97c2(0x3c3,0x3f7))](),'latDisplayRange':new Cesium$1[(_0x2dae17(0x47d,0x402))]()},this['globeBoundingSphere']=new Cesium$1['BoundingSphere'](Cesium$1[_0xac97c2(0x3fa,0x367)][_0x2dae17(0x3bc,0x3ee)],Cesium$1[_0xac97c2(0x33e,0x31a)]['WGS84']['minimumRadius']),this['updateViewerParameters'](),window[_0xac97c2(0x3cc,0x425)](_0xac97c2(0x3fe,0x414),this['resize']['bind'](this),![]),this['mouse_down']=![],this['mouse_move']=![];function _0xac97c2(_0x3fd34f,_0x1e32ef){return _0x39b9f7(_0x1e32ef,_0x3fd34f- -0x2);}this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0xac97c2(0x41e,0x3c8)]['on'](mars3d__namespace['EventType'][_0xac97c2(0x3a4,0x397)],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0xac97c2(0x3fc,0x477)],this[_0xac97c2(0x369,0x3a2)],this),this['_map']['on'](mars3d__namespace['EventType'][_0xac97c2(0x417,0x3e6)],this['_onMouseMoveEvent'],this),this['_data']&&this['setData'](this['_data']);}['_removedHook'](){window['removeEventListener']('resize',this['resize']),this[_0x4ee21a(-0xb9,-0x4b)][_0x4ee21a(-0x160,-0x115)](mars3d__namespace[_0x4ee21a(-0xd3,-0xd0)][_0x524edd(0x1d0,0x212)],this[_0x4ee21a(-0x20,-0x30)],this),this['_map']['off'](mars3d__namespace[_0x524edd(0x210,0x23c)]['wheel'],this[_0x524edd(0x227,0x1e6)],this),this[_0x4ee21a(-0xa1,-0x4b)]['off'](mars3d__namespace[_0x524edd(0x210,0x244)]['mouseDown'],this['_onMouseDownEvent'],this);function _0x4ee21a(_0x265d0d,_0x20bffe){return _0x39b9f7(_0x265d0d,_0x20bffe- -0x46b);}this['_map']['off'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this['_map'][_0x4ee21a(-0xdd,-0x115)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this['primitives'][_0x4ee21a(-0xfd,-0xb8)]();function _0x524edd(_0x3bcdc9,_0x259639){return _0x362994(_0x259639,_0x3bcdc9-0x3f1);}this[_0x524edd(0x295,0x238)]['scene']['primitives']['remove'](this['primitives']);}[_0x39b9f7(0x40e,0x400)](){if(!this[_0xc18a14(0x1af,0x192)]||!this[_0xc18a14(0x187,0x185)])return;function _0xc18a14(_0x2a18d0,_0x5572c5){return _0x39b9f7(_0x5572c5,_0x2a18d0- -0x24c);}this[_0xc18a14(0xdf,0x128)][_0xc18a14(0x1af,0x19d)]=![];function _0x33c194(_0x365951,_0x5bf751){return _0x362994(_0x5bf751,_0x365951-0x572);}this['primitives']['removeAll'](),this[_0xc18a14(0x1d4,0x163)]['once'](mars3d__namespace['EventType']['preRender'],this[_0x33c194(0x431,0x3d6)],this);}['_onMap_preRenderEvent'](_0x255a8f){function _0x171579(_0x536929,_0x519a8d){return _0x362994(_0x536929,_0x519a8d-0x2a0);}function _0x150210(_0x2ce7e5,_0x376a5d){return _0x39b9f7(_0x2ce7e5,_0x376a5d- -0x19d);}this['particleSystem'][_0x171579(0x12d,0x108)](this[_0x171579(0x122,0xe7)]['context']),this[_0x171579(0x123,0x156)](),this[_0x171579(0x49,0x4f)]['show']=!![];}[_0x362994(-0x1fc,-0x1ca)](_0x385e64){clearTimeout(this[_0x232f35(0x435,0x421)]);function _0x232f35(_0x3f84d9,_0x164d0b){return _0x39b9f7(_0x3f84d9,_0x164d0b-0x6b);}if(!this['show']||!this['particleSystem'])return;this['primitives']['show']=![],this['refreshTimer']=setTimeout(()=>{function _0x3e1258(_0x26a9f8,_0x5326f6){return _0x232f35(_0x26a9f8,_0x5326f6- -0x390);}if(!this['show'])return;this[_0x3e1258(0xaa,0x6f)]();},0xc8);}['_onMouseDownEvent'](_0x4ac00d){this['mouse_down']=!![];}[_0x39b9f7(0x2d8,0x337)](_0x41ea32){if(!this['show']||!this['particleSystem'])return;this['mouse_down']&&(this['primitives']['show']=![],this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x342539){if(!this[_0x214a9f(0xdd,0x125)]||!this['particleSystem'])return;this['mouse_down']&&this['mouse_move']&&this[_0x214a9f(0xf6,0xbe)]();function _0x214a9f(_0x399a5f,_0xc9f14d){return _0x362994(_0x399a5f,_0xc9f14d-0x2a6);}this['primitives']['show']=!![];function _0x5d7be0(_0x43a1ff,_0x2bc626){return _0x39b9f7(_0x43a1ff,_0x2bc626-0x12e);}this['mouse_down']=![],this[_0x214a9f(0x18c,0x157)]=![];}[_0x362994(-0x217,-0x1e8)](){if(!this[_0x1cd8a2(0x69,-0x15)]||!this['show'])return;this['updateViewerParameters'](),this['particleSystem']['applyViewerParameters'](this['viewerParameters']);function _0x1cd8a2(_0x20f0dd,_0x4d09d5){return _0x362994(_0x20f0dd,_0x4d09d5-0x147);}this['primitives']['show']=!![];}[_0x362994(-0x1c3,-0x143)](_0x28a473){function _0x35ab8a(_0x4cc6bb,_0x22ec9a){return _0x39b9f7(_0x4cc6bb,_0x22ec9a- -0x20c);}function _0x143f0d(_0x1ccf18,_0x1deb7f){return _0x39b9f7(_0x1deb7f,_0x1ccf18- -0xa8);}this['_data']=_0x28a473,this[_0x143f0d(0x32b,0x29b)]&&this['particleSystem']['destroy'](),this['particleSystem']=new ParticleSystem(this['scene']['context'],_0x28a473,this[_0x35ab8a(0x24e,0x237)](),this[_0x35ab8a(0xf9,0x141)]),this['addPrimitives']();}['_setOptionsHook'](_0x3f84f4,_0x76eed){function _0x1e8398(_0x1807b8,_0xd1bf86){return _0x39b9f7(_0x1807b8,_0xd1bf86- -0x1f);}if(_0x3f84f4)for(const _0x39a277 in _0x3f84f4){this[_0x39a277]=_0x3f84f4[_0x39a277];}this['particleSystem']&&this['particleSystem'][_0x1e8398(0x2ba,0x34f)](this['getOptions']());}[_0x362994(-0x188,-0x139)](){const _0x224faf=Math[_0x26fbea(-0x1a5,-0x179)](Math['sqrt'](this['particlesNumber']));this[_0x26fbea(-0x256,-0x2c2)]=_0x224faf*_0x224faf;const _0x13c283={};_0x13c283[_0x26fbea(-0x14d,-0x1e1)]=_0x224faf;function _0x4647d2(_0x5ded11,_0x3071a7){return _0x39b9f7(_0x3071a7,_0x5ded11- -0x383);}_0x13c283[_0x26fbea(-0x1f1,-0x1c1)]=this[_0x26fbea(-0x256,-0x1ce)],_0x13c283['colors']=this[_0x4647d2(-0x3b,0x24)],_0x13c283['particleHeight']=this['fixedHeight'],_0x13c283['fadeOpacity']=this[_0x4647d2(-0xf,-0x6b)],_0x13c283[_0x4647d2(-0x1a,-0xa4)]=this[_0x4647d2(-0x1a,-0x28)],_0x13c283[_0x26fbea(-0x12f,-0x108)]=this[_0x26fbea(-0x12f,-0x194)],_0x13c283['speedFactor']=this['speedFactor'];function _0x26fbea(_0x30c884,_0x1d2e00){return _0x362994(_0x1d2e00,_0x30c884-0x3);}return _0x13c283[_0x26fbea(-0x22b,-0x26d)]=this[_0x26fbea(-0x22b,-0x196)],_0x13c283['dynamic']=this[_0x4647d2(0x6e,0xc5)],_0x13c283;}['addPrimitives'](){function _0x854377(_0x4b1db5,_0x48bf3d){return _0x362994(_0x4b1db5,_0x48bf3d-0x272);}this['primitives'][_0x15b0ce(-0x6e,-0x8b)](this[_0x854377(0x8f,0xc9)]['particlesComputing']['primitives']['calculateSpeed']);function _0x15b0ce(_0x41abce,_0x555d36){return _0x39b9f7(_0x41abce,_0x555d36- -0x3fa);}this['primitives'][_0x854377(0xce,0x65)](this[_0x15b0ce(0x68,-0x27)]['particlesComputing']['primitives'][_0x15b0ce(0x56,0x1b)]),this['primitives'][_0x854377(0x80,0x65)](this['particleSystem'][_0x15b0ce(-0x6e,-0x65)]['primitives']['postProcessingPosition']),this['primitives']['add'](this[_0x15b0ce(0x19,-0x27)][_0x15b0ce(-0x10a,-0xc4)]['primitives']['segments']),this['primitives'][_0x854377(0xda,0x65)](this['particleSystem'][_0x854377(0x24,0x2c)]['primitives']['trails']),this[_0x854377(0x76,0x21)]['add'](this['particleSystem']['particlesRendering']['primitives'][_0x15b0ce(-0x92,-0xae)]);}['updateViewerParameters'](){function _0xc4785f(_0x35fe65,_0xfe92d2){return _0x362994(_0x35fe65,_0xfe92d2-0x1a4);}let _0x5dde3c=this[_0xc4785f(-0xa6,-0xb3)][_0x25d6a9(-0x4b,-0xa4)](this['scene'][_0x25d6a9(-0x30,-0x81)]['ellipsoid']);if(!_0x5dde3c){const _0x5729b4=this[_0x25d6a9(0x7b,0xae)]['getExtent']();_0x5dde3c=Cesium$1['Rectangle']['fromDegrees'](_0x5729b4['xmin'],_0x5729b4[_0xc4785f(-0x84,0x1)],_0x5729b4[_0xc4785f(0x19,-0x38)],_0x5729b4['ymax']);}const _0x4dd657=Util[_0xc4785f(-0x2e,-0x60)](_0x5dde3c);this['_data']?(this[_0xc4785f(-0xc9,-0x8b)]['lonRange']['x']=Math[_0x25d6a9(-0x19,-0x50)](_0x4dd657['lon']['min'],this['_data'][_0xc4785f(-0x14,0x3f)]),this[_0xc4785f(-0x4d,-0x8b)][_0x25d6a9(0x4a,0xd0)]['y']=Math['min'](_0x4dd657[_0x25d6a9(0x73,0xee)]['max'],this[_0xc4785f(-0xf4,-0x73)]['xmax']),this['viewerParameters']['latRange']['x']=Math[_0x25d6a9(-0x19,0x68)](_0x4dd657['lat'][_0x25d6a9(0x8f,0x87)],this['_data']['ymin']),this['viewerParameters']['latRange']['y']=Math['min'](_0x4dd657[_0xc4785f(0x4e,0x74)]['max'],this[_0x25d6a9(-0x40,-0xce)][_0xc4785f(0x1e,0x6)])):(this['viewerParameters'][_0xc4785f(0x42,0x17)]['x']=_0x4dd657['lon']['min'],this[_0xc4785f(-0xa4,-0x8b)][_0x25d6a9(0x4a,0x27)]['y']=_0x4dd657['lon'][_0x25d6a9(-0x19,-0x68)],this[_0x25d6a9(-0x58,0x22)]['latRange']['x']=_0x4dd657['lat']['min'],this['viewerParameters']['latRange']['y']=_0x4dd657['lat']['max']);function _0x25d6a9(_0x477b88,_0x2964d2){return _0x39b9f7(_0x2964d2,_0x477b88- -0x3a5);}let _0x476f5e=this[_0xc4785f(-0x42,-0xb3)][_0xc4785f(-0x9e,-0xd)](this[_0xc4785f(-0xf6,-0xb0)],this[_0x25d6a9(0x1e,-0x57)][_0x25d6a9(-0x7f,-0x1f)],this[_0xc4785f(-0xa3,-0x15)]['drawingBufferHeight']);const _0x2a1034=this['scene']['drawingBufferHeight']*0.3;_0x476f5e<_0x2a1034&&(_0x476f5e=_0x2a1034),this['viewerParameters']['pixelSize']=_0x476f5e;}}mars3d__namespace['LayerUtil'][_0x39b9f7(0x3ff,0x41b)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this[_0x5d3dc7(-0xf1,-0xb7)]=null;function _0x333947(_0xed4c7a,_0x260db7){return _0x362994(_0xed4c7a,_0x260db7-0x1b0);}function _0x5d3dc7(_0x113888,_0x4a6779){return _0x362994(_0x113888,_0x4a6779-0x79);}this[_0x5d3dc7(-0x247,-0x1cb)]=null,this['tlat']=null,this['age']=null,this[_0x5d3dc7(-0x1e0,-0x18d)]=null;}['destroy'](){for(const _0x1bc2a1 in this){delete this[_0x1bc2a1];}}}function _0x4d13(_0x2d263b,_0x2ce1ed){const _0x470237=_0x4702();return _0x4d13=function(_0x4d13cf,_0x1a7222){_0x4d13cf=_0x4d13cf-0xf1;let _0x41f4cb=_0x470237[_0x4d13cf];return _0x41f4cb;},_0x4d13(_0x2d263b,_0x2ce1ed);}class CanvasWindField{constructor(_0x2d99cc){this['setOptions'](_0x2d99cc);}get[_0x362994(-0x193,-0x1de)](){function _0x234267(_0x5de750,_0x4c9398){return _0x362994(_0x5de750,_0x4c9398-0x135);}return this[_0x234267(-0xd5,-0xda)];}set[_0x39b9f7(0x322,0x39e)](_0x191638){function _0x448603(_0x300126,_0x498976){return _0x362994(_0x498976,_0x300126- -0x8b);}this[_0x448603(-0x29a,-0x229)]=(0x64-(_0x191638>0x63?0x63:_0x191638))*0x64,this['_calc_speedRate']=[(this['xmax']-this['xmin'])/this['_speedRate'],(this['ymax']-this['ymin'])/this['_speedRate']];}get['maxAge'](){function _0x15ee12(_0x387d5b,_0x4bcfca){return _0x362994(_0x4bcfca,_0x387d5b-0x2ce);}return this[_0x15ee12(0xcd,0x6f)];}set['maxAge'](_0x243849){function _0x10e1d0(_0x4ee7e8,_0x3507e0){return _0x39b9f7(_0x4ee7e8,_0x3507e0- -0x5f6);}this[_0x10e1d0(-0x26a,-0x27b)]=_0x243849;}['setOptions'](_0x3c35c2){this['options']=_0x3c35c2,this[_0xffd348(0x24e,0x24d)]=_0x3c35c2['maxAge']||0x78,this[_0xffd348(0x224,0x1c2)]=_0x3c35c2[_0xffd348(0x1f7,0x1c2)]||0x32,this['particles']=[];function _0xffd348(_0x45c128,_0x3d7de9){return _0x39b9f7(_0x45c128,_0x3d7de9- -0x1dc);}const _0x117690=_0x3c35c2['particlesNumber']||0x1000;function _0x4574fa(_0x158491,_0x2522f9){return _0x362994(_0x158491,_0x2522f9- -0x8);}for(let _0x3f0860=0x0;_0x3f0860<_0x117690;_0x3f0860++){const _0x1eebc8=this['_randomParticle'](new CanvasParticle());this[_0x4574fa(-0x222,-0x1fa)]['push'](_0x1eebc8);}}['setDate'](_0xf68503){this['rows']=_0xf68503['rows'],this[_0x858668(-0x267,-0x27a)]=_0xf68503['cols'],this['xmin']=_0xf68503['xmin'],this['xmax']=_0xf68503['xmax'],this['ymin']=_0xf68503[_0x128bc1(0x104,0x13e)],this['ymax']=_0xf68503['ymax'],this[_0x858668(-0x290,-0x312)]=[];const _0x5d2e47=_0xf68503[_0x858668(-0x2c0,-0x2b9)],_0x3f7531=_0xf68503['vdata'];function _0x858668(_0x23c3b4,_0x5c29c9){return _0x362994(_0x5c29c9,_0x23c3b4- -0x96);}let _0x534a54=![];function _0x128bc1(_0x32f34e,_0xd5dfec){return _0x39b9f7(_0x32f34e,_0xd5dfec- -0x29b);}_0x5d2e47[_0x128bc1(0x16e,0x153)]===this['rows']&&_0x5d2e47[0x0]['length']===this[_0x858668(-0x267,-0x2f7)]&&(_0x534a54=!![]);let _0x43fabc=0x0,_0x176bf8=null,_0x169b8c=null;for(let _0x4a016e=0x0;_0x4a016e<this[_0x858668(-0x2c1,-0x267)];_0x4a016e++){_0x176bf8=[];for(let _0x5805b3=0x0;_0x5805b3<this['cols'];_0x5805b3++,_0x43fabc++){_0x534a54?_0x169b8c=this[_0x858668(-0x220,-0x25d)](_0x5d2e47[_0x4a016e][_0x5805b3],_0x3f7531[_0x4a016e][_0x5805b3]):_0x169b8c=this['_calcUV'](_0x5d2e47[_0x43fabc],_0x3f7531[_0x43fabc]),_0x176bf8['push'](_0x169b8c);}this[_0x858668(-0x290,-0x283)]['push'](_0x176bf8);}this[_0x128bc1(0xda,0xeb)][_0x858668(-0x29b,-0x32b)]&&this['grid'][_0x858668(-0x1dc,-0x14d)]();}['clear'](){delete this[_0x212bdc(0x3d1,0x3e4)],delete this['cols'],delete this['xmin'];function _0x212bdc(_0x4d4160,_0x4cd02b){return _0x362994(_0x4cd02b,_0x4d4160-0x5fc);}delete this['xmax'],delete this['ymin'],delete this[_0x5333c4(0xb3,0x54)];function _0x5333c4(_0x2139b5,_0x30d764){return _0x362994(_0x30d764,_0x2139b5-0x251);}delete this['grid'],delete this['particles'];}['toGridXY'](_0x43d015,_0x5dbe6b){const _0x5bdc27=(_0x43d015-this[_0x3d3465(0x236,0x268)])/(this['xmax']-this['xmin'])*(this['cols']-0x1),_0x4ac105=(this['ymax']-_0x5dbe6b)/(this[_0x1e3701(0x386,0x3c5)]-this['ymin'])*(this[_0x1e3701(0x33d,0x338)]-0x1);function _0x3d3465(_0x812503,_0x1db375){return _0x39b9f7(_0x812503,_0x1db375- -0x1af);}function _0x1e3701(_0x31f4dc,_0x2097af){return _0x39b9f7(_0x31f4dc,_0x2097af- -0x19);}return[_0x5bdc27,_0x4ac105];}['getUVByXY'](_0x12a463,_0x3c52ae){if(_0x12a463<0x0||_0x12a463>=this['cols']||_0x3c52ae>=this['rows'])return[0x0,0x0,0x0];const _0x30a234=Math['floor'](_0x12a463),_0x22879e=Math['floor'](_0x3c52ae);if(_0x30a234===_0x12a463&&_0x22879e===_0x3c52ae)return this['grid'][_0x3c52ae][_0x12a463];const _0x5dbfd3=_0x30a234+0x1;function _0x1be3d9(_0x5f0e66,_0x2a2173){return _0x362994(_0x2a2173,_0x5f0e66-0x4d8);}function _0x608ace(_0x2eea43,_0x4bb233){return _0x362994(_0x4bb233,_0x2eea43-0x640);}const _0x4a07a9=_0x22879e+0x1,_0x4276d3=this['getUVByXY'](_0x30a234,_0x22879e),_0x5273f3=this[_0x608ace(0x4ea,0x468)](_0x5dbfd3,_0x22879e),_0x33018a=this['getUVByXY'](_0x30a234,_0x4a07a9),_0x206e5c=this[_0x1be3d9(0x382,0x32e)](_0x5dbfd3,_0x4a07a9);let _0x893e5b=null;try{_0x893e5b=this[_0x608ace(0x47f,0x4a8)](_0x12a463-_0x30a234,_0x3c52ae-_0x22879e,_0x4276d3,_0x5273f3,_0x33018a,_0x206e5c);}catch(_0x4abb15){console['log'](_0x12a463,_0x3c52ae);}return _0x893e5b;}[_0x39b9f7(0x442,0x3bb)](_0x31c4b9,_0x82c29a,_0x55f7d4,_0x5f1597,_0x40bc1d,_0x2144ed){const _0x57b4b4=0x1-_0x31c4b9,_0x14cb02=0x1-_0x82c29a,_0x194afa=_0x57b4b4*_0x14cb02,_0x1a7595=_0x31c4b9*_0x14cb02,_0xbd2b4f=_0x57b4b4*_0x82c29a,_0x503fd1=_0x31c4b9*_0x82c29a,_0x5d6dd7=_0x55f7d4[0x0]*_0x194afa+_0x5f1597[0x0]*_0x1a7595+_0x40bc1d[0x0]*_0xbd2b4f+_0x2144ed[0x0]*_0x503fd1,_0x173c26=_0x55f7d4[0x1]*_0x194afa+_0x5f1597[0x1]*_0x1a7595+_0x40bc1d[0x1]*_0xbd2b4f+_0x2144ed[0x1]*_0x503fd1;return this['_calcUV'](_0x5d6dd7,_0x173c26);}['_calcUV'](_0x425c42,_0x24bab8){return[+_0x425c42,+_0x24bab8,Math['sqrt'](_0x425c42*_0x425c42+_0x24bab8*_0x24bab8)];}[_0x362994(-0x29b,-0x25a)](_0x5044d4,_0xff15bc){if(!this['isInExtent'](_0x5044d4,_0xff15bc))return null;const _0x1993a0=this['toGridXY'](_0x5044d4,_0xff15bc);function _0x5c22d8(_0x2608db,_0x19c91){return _0x39b9f7(_0x19c91,_0x2608db- -0x580);}const _0x36fb65=this[_0x5c22d8(-0x15a,-0xda)](_0x1993a0[0x0],_0x1993a0[0x1]);return _0x36fb65;}['isInExtent'](_0x5defd6,_0xb0e61d){function _0x48666c(_0x4ac8d6,_0x59ceeb){return _0x362994(_0x59ceeb,_0x4ac8d6-0x12d);}function _0x13188d(_0x34bb90,_0x3c4368){return _0x362994(_0x34bb90,_0x3c4368-0xe4);}return _0x5defd6>=this[_0x13188d(-0xb0,-0x81)]&&_0x5defd6<=this[_0x13188d(-0x96,-0xf8)]&&_0xb0e61d>=this[_0x13188d(-0x12d,-0xbf)]&&_0xb0e61d<=this['ymax']?!![]:![];}[_0x362994(-0x21a,-0x191)](){const _0x570667=fRandomByfloat(this['xmin'],this['xmax']);function _0x39200c(_0x4de537,_0x5d6a38){return _0x39b9f7(_0x4de537,_0x5d6a38- -0x5ce);}const _0x26ba89=fRandomByfloat(this['ymin'],this[_0x39200c(-0x1d0,-0x1f0)]),_0x5966b0={};return _0x5966b0['lat']=_0x26ba89,_0x5966b0['lng']=_0x570667,_0x5966b0;}[_0x362994(-0x24c,-0x220)](){function _0x3465b7(_0x1a51a8,_0xb7b0d2){return _0x39b9f7(_0xb7b0d2,_0x1a51a8- -0x26a);}let _0x58b467,_0x116a86,_0xfe6aa1;for(let _0x25ec26=0x0,_0xd7daf9=this[_0x392d1a(0x36e,0x3c8)]['length'];_0x25ec26<_0xd7daf9;_0x25ec26++){let _0x5b452a=this['particles'][_0x25ec26];_0x5b452a[_0x3465b7(0x1d3,0x1b3)]<=0x0&&(_0x5b452a=this[_0x3465b7(0x1c7,0x232)](_0x5b452a));if(_0x5b452a['age']>0x0){const _0x2715c4=_0x5b452a['tlng'],_0x489702=_0x5b452a['tlat'];_0xfe6aa1=this['getUVByPoint'](_0x2715c4,_0x489702),_0xfe6aa1?(_0x58b467=_0x2715c4+this[_0x3465b7(0x1bd,0x198)][0x0]*_0xfe6aa1[0x0],_0x116a86=_0x489702+this['_calc_speedRate'][0x1]*_0xfe6aa1[0x1],_0x5b452a['lng']=_0x2715c4,_0x5b452a['lat']=_0x489702,_0x5b452a[_0x392d1a(0x3a9,0x376)]=_0x58b467,_0x5b452a[_0x3465b7(0x172,0x102)]=_0x116a86,_0x5b452a['speed']=_0xfe6aa1[0x2],_0x5b452a[_0x392d1a(0x4f1,0x47b)]--):_0x5b452a[_0x3465b7(0x1d3,0x15f)]=0x0;}}function _0x392d1a(_0x1452df,_0x15f17c){return _0x39b9f7(_0x1452df,_0x15f17c-0x3e);}return this['particles'];}[_0x362994(-0x1d8,-0x14b)](_0xd9bcd8){let _0x51ce63,_0x39cf5b;for(let _0x58b4f6=0x0;_0x58b4f6<0x1e;_0x58b4f6++){_0x51ce63=this['getRandomLatLng'](),_0x39cf5b=this[_0x15f486(0x3ed,0x41c)](_0x51ce63['lng'],_0x51ce63[_0x15f486(0x517,0x4a5)]);if(_0x39cf5b&&_0x39cf5b[0x2]>0x0)break;}if(!_0x39cf5b)return _0xd9bcd8;const _0x50f9ca=_0x51ce63[_0xd1cab8(0x51d,0x516)]+this[_0x15f486(0x4f2,0x563)][0x0]*_0x39cf5b[0x0],_0x492c5d=_0x51ce63['lat']+this['_calc_speedRate'][0x1]*_0x39cf5b[0x1];_0xd9bcd8['lng']=_0x51ce63[_0xd1cab8(0x592,0x516)],_0xd9bcd8['lat']=_0x51ce63['lat'],_0xd9bcd8['tlng']=_0x50f9ca,_0xd9bcd8[_0x15f486(0x4a7,0x496)]=_0x492c5d;function _0x15f486(_0x49a38d,_0x375c3f){return _0x39b9f7(_0x375c3f,_0x49a38d-0xcb);}function _0xd1cab8(_0x12f1ef,_0x295ba9){return _0x362994(_0x12f1ef,_0x295ba9-0x65d);}return _0xd9bcd8['age']=Math['round'](Math[_0x15f486(0x3ef,0x3de)]()*this[_0x15f486(0x4f4,0x532)]),_0xd9bcd8['speed']=_0x39cf5b[0x2],_0xd9bcd8;}['destroy'](){for(const _0x596509 in this){delete this[_0x596509];}}}function fRandomByfloat(_0x49aa63,_0x46cb9f){return _0x49aa63+Math['random']()*(_0x46cb9f-_0x49aa63);}const Cesium=mars3d__namespace[_0x362994(-0x101,-0x18f)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x15d6e4={}){super(_0x15d6e4);function _0x592457(_0x1b4f94,_0x98f4d9){return _0x362994(_0x98f4d9,_0x1b4f94-0x30d);}this['_setOptionsHook'](_0x15d6e4),this['canvas']=null;function _0x79cd95(_0xeb20,_0x34bf4e){return _0x39b9f7(_0xeb20,_0x34bf4e- -0x3a9);}_0x15d6e4['colors']&&_0x15d6e4['steps']&&(this[_0x79cd95(0x81,0x23)]=new mars3d__namespace[(_0x592457(0x19a,0x11c))](_0x15d6e4));}['_setOptionsHook'](_0x54e4e2,_0x5d817d){this['frameTime']=0x3e8/(_0x54e4e2[_0x208874(0x115,0xee)]||0xa);function _0x208874(_0x518531,_0x1ec117){return _0x39b9f7(_0x1ec117,_0x518531- -0x225);}function _0x2a12a8(_0x2ee074,_0x428d9e){return _0x362994(_0x428d9e,_0x2ee074-0x1fd);}this['_pointerEvents']=this[_0x2a12a8(0x7,-0x9)][_0x208874(0x147,0x1b6)]??![],this[_0x208874(0x118,0x16f)]=_0x54e4e2['color']||_0x208874(0x1a4,0x1d1),this[_0x2a12a8(-0x31,0xb)]=_0x54e4e2[_0x208874(0x129,0x105)]||0x1,this[_0x2a12a8(0x6,0x41)]=_0x54e4e2['fixedHeight']??0x0,this[_0x2a12a8(-0x8,0x59)]=_0x54e4e2['reverseY']??![],this['windField']&&this[_0x2a12a8(0x3f,0xa9)]['setOptions'](_0x54e4e2);}get['layer'](){function _0x4dc29c(_0x3c2bac,_0x57ee0f){return _0x362994(_0x57ee0f,_0x3c2bac-0x18f);}return this[_0x4dc29c(-0x15,0x7b)];}get[_0x362994(-0x222,-0x1e3)](){function _0x2df63b(_0x9cf542,_0x29cd72){return _0x362994(_0x29cd72,_0x9cf542-0x474);}return this['_map']['scene']['canvas'][_0x2df63b(0x278,0x229)];}get[_0x39b9f7(0x3f9,0x3ca)](){return this['_map']['scene']['canvas']['clientHeight'];}get['pointerEvents'](){function _0x2516d6(_0x4408bf,_0x43e1d3){return _0x39b9f7(_0x4408bf,_0x43e1d3- -0x202);}return this[_0x2516d6(0x1ea,0x1f1)];}set['pointerEvents'](_0x131362){this['_pointerEvents']=_0x131362;function _0xfb1fb0(_0x1e4f3e,_0xf000fa){return _0x39b9f7(_0xf000fa,_0x1e4f3e- -0x290);}function _0x27eb5f(_0x5e07f6,_0x5aa46d){return _0x362994(_0x5e07f6,_0x5aa46d-0x6);}if(!this['canvas'])return;_0x131362?this[_0xfb1fb0(0x148,0x157)][_0x27eb5f(-0x29f,-0x24d)][_0x27eb5f(-0x1cd,-0x137)]='all':this['canvas']['style']['pointer-events']='none';}get['particlesNumber'](){function _0x5684b7(_0x501e13,_0x3a4935){return _0x362994(_0x3a4935,_0x501e13- -0x51);}function _0x4d2f97(_0x49168e,_0x4a3cc5){return _0x362994(_0x4a3cc5,_0x49168e-0x407);}return this[_0x5684b7(-0x247,-0x1c2)][_0x5684b7(-0x2aa,-0x21f)];}set['particlesNumber'](_0x2fce15){function _0x206113(_0x476382,_0x32d99d){return _0x39b9f7(_0x476382,_0x32d99d- -0x3a6);}function _0x484b97(_0x2b2b43,_0x5f4eb0){return _0x362994(_0x2b2b43,_0x5f4eb0-0x4c8);}this[_0x484b97(0x345,0x2d2)][_0x206113(-0x43,-0x83)]=_0x2fce15,clearTimeout(this['_canrefresh']),this[_0x484b97(0x320,0x34f)]=setTimeout(()=>{function _0x3cbae2(_0x499c0d,_0x4954d5){return _0x206113(_0x499c0d,_0x4954d5- -0x209);}this[_0x3cbae2(-0x222,-0x21b)]();},0x1f4);}get['speedRate'](){function _0x460aad(_0x2310d4,_0x28f45b){return _0x39b9f7(_0x2310d4,_0x28f45b- -0x5a7);}return this['options'][_0x460aad(-0x265,-0x209)];}set[_0x362994(-0x266,-0x1de)](_0x1afe89){function _0x230e4e(_0x2613d7,_0x10eb3f){return _0x39b9f7(_0x2613d7,_0x10eb3f- -0x31b);}this['options']['speedRate']=_0x1afe89;function _0x231984(_0x238bf7,_0x16590f){return _0x39b9f7(_0x16590f,_0x238bf7- -0x194);}this[_0x231984(0x22a,0x228)]&&(this[_0x231984(0x22a,0x28c)]['speedRate']=_0x1afe89);}get[_0x362994(-0x1be,-0x153)](){return this['options']['maxAge'];}set['maxAge'](_0x5e47f8){function _0x56b8f9(_0x302a52,_0x3abd17){return _0x39b9f7(_0x3abd17,_0x302a52- -0x5f2);}this[_0x3b4266(0x3cd,0x387)]['maxAge']=_0x5e47f8;function _0x3b4266(_0x3afc75,_0x30e7b8){return _0x39b9f7(_0x3afc75,_0x30e7b8-0x1);}this['windField']&&(this['windField'][_0x3b4266(0x432,0x42a)]=_0x5e47f8);}get[_0x39b9f7(0x33c,0x39f)](){function _0x562d12(_0x1740c6,_0x309e65){return _0x362994(_0x309e65,_0x1740c6-0x659);}return this[_0x562d12(0x4be,0x52f)];}set['data'](_0x1f8b81){this['setData'](_0x1f8b81);}get['rectangle'](){let _0x2d223f=this['windData'][_0x3bd07a(-0x1d,-0x5e)],_0x532836=this[_0x426a79(0x13,0x3b)][_0x426a79(-0x2e,-0x14)];function _0x426a79(_0x2a371a,_0x57e974){return _0x39b9f7(_0x57e974,_0x2a371a- -0x3ce);}function _0x3bd07a(_0x2860a0,_0xc0e510){return _0x362994(_0xc0e510,_0x2860a0-0x148);}let _0x141ad4=this[_0x426a79(0x13,-0x30)][_0x426a79(0xb,-0x6f)],_0x4b43ee=this['windData']['ymax'];return _0x532836>=0x167&&_0x2d223f===0x0&&(_0x2d223f=-0xb4,_0x532836=0xb4),_0x2d223f=Math[_0x426a79(-0x42,-0x9e)](_0x2d223f,-0xb4),_0x532836=Math[_0x426a79(0x66,0xb1)](_0x532836,0xb4),_0x141ad4=Math['max'](_0x141ad4,-0x5a),_0x4b43ee=Math['min'](_0x4b43ee,0x5a),Cesium['Rectangle']['fromDegrees'](_0x2d223f,_0x141ad4,_0x532836,_0x4b43ee);}[_0x362994(-0x188,-0x16f)](_0x4657ef){function _0x408b49(_0x18b6ae,_0x32b8c1){return _0x39b9f7(_0x32b8c1,_0x18b6ae- -0x193);}function _0x19fa5a(_0x5a73c2,_0x346269){return _0x362994(_0x346269,_0x5a73c2-0x42d);}_0x4657ef?this['_addedHook']():(this['windData']&&(this[_0x408b49(0x1f3,0x27d)][_0x19fa5a(0x250,0x2c0)]=this[_0x408b49(0x24e,0x2b2)]),this[_0x408b49(0x2a7,0x2da)]());}[_0x362994(-0x2a0,-0x24d)](){function _0x4d7a0a(_0x43110b,_0x1d1690){return _0x362994(_0x1d1690,_0x43110b-0x4fb);}function _0x5a0dba(_0x4bfdba,_0x126b4f){return _0x39b9f7(_0x4bfdba,_0x126b4f-0x74);}this['options'][_0x5a0dba(0x49a,0x43a)]?this['initWorker']():this[_0x5a0dba(0x452,0x432)]=new CanvasWindField(this[_0x4d7a0a(0x305,0x2c3)]);}[_0x39b9f7(0x39d,0x425)](){this[_0x3a3710(-0x4f,-0x9a)]=this['_createCanvas']();function _0x16a39b(_0x598fd8,_0x34e99e){return _0x362994(_0x34e99e,_0x598fd8-0x165);}const _0x460787={};function _0x3a3710(_0x5278d8,_0x492d61){return _0x362994(_0x5278d8,_0x492d61-0x10a);}_0x460787[_0x3a3710(-0xa,-0x3b)]=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0x460787),this[_0x3a3710(-0x18d,-0x123)](),this['options']['data']&&this[_0x16a39b(0x22,-0x21)](this['options'][_0x3a3710(-0x58,-0xd3)]);}['_removedHook'](){this[_0x39d3f6(-0x109,-0x121)]();function _0x455e97(_0x434fb2,_0x1730c4){return _0x39b9f7(_0x434fb2,_0x1730c4- -0x118);}function _0x39d3f6(_0x4e7b09,_0x262a6d){return _0x362994(_0x262a6d,_0x4e7b09-0x10b);}this['unbindEvent'](),this[_0x39d3f6(-0x99,-0x128)]&&(this[_0x39d3f6(-0x51,0x1a)][_0x39d3f6(-0xea,-0x140)][_0x39d3f6(-0xf3,-0x65)](this[_0x455e97(0x290,0x2c0)]),delete this['canvas']);}['_createCanvas'](){const _0x244d32=mars3d__namespace[_0x4c106e(0x3b,0x22)]['create']('canvas','mars3d-canvasWind',this[_0x5c0a84(-0x110,-0xf6)][_0x5c0a84(-0x1f2,-0x18f)]);_0x244d32[_0x5c0a84(-0x1b9,-0x1ed)]['position']=_0x4c106e(-0x52,-0x4e),_0x244d32['style']['top']=_0x5c0a84(-0x120,-0x188),_0x244d32[_0x4c106e(-0x5e,0x16)][_0x4c106e(0x63,0x8e)]='0px',_0x244d32[_0x4c106e(-0x5e,-0x99)][_0x5c0a84(-0x154,-0x147)]=this['_map'][_0x5c0a84(-0x14b,-0x153)][_0x4c106e(0x51,0xb2)][_0x5c0a84(-0x200,-0x196)]+'px';function _0x4c106e(_0x280ffb,_0x48ec19){return _0x39b9f7(_0x48ec19,_0x280ffb- -0x387);}function _0x5c0a84(_0x21fdb0,_0x632b2e){return _0x39b9f7(_0x21fdb0,_0x632b2e- -0x516);}return _0x244d32['style'][_0x5c0a84(-0x14f,-0x111)]=this[_0x4c106e(0x99,0x115)][_0x4c106e(0x3c,0x76)][_0x4c106e(0x51,0x64)][_0x4c106e(0x53,0xd8)]+'px',_0x244d32[_0x4c106e(-0x5e,-0x4b)]['pointerEvents']=this['_pointerEvents']?_0x4c106e(-0x37,-0x17):_0x5c0a84(-0x1a3,-0x122),_0x244d32['style']['zIndex']=this['options'][_0x5c0a84(-0x153,-0x10e)]??0x9,_0x244d32['width']=this['_map'][_0x5c0a84(-0x1c5,-0x153)][_0x4c106e(0x51,0x28)][_0x5c0a84(-0x1f1,-0x196)],_0x244d32[_0x5c0a84(-0x111,-0x111)]=this['_map'][_0x5c0a84(-0x193,-0x153)][_0x4c106e(0x51,0xab)]['clientHeight'],_0x244d32;}['resize'](){function _0x3d4254(_0x52116c,_0x9b678b){return _0x362994(_0x52116c,_0x9b678b-0x73);}function _0x454668(_0x379a51,_0x497f92){return _0x39b9f7(_0x497f92,_0x379a51- -0x537);}this[_0x3d4254(-0xbc,-0x131)]&&(this[_0x3d4254(-0x173,-0x131)]['style']['width']=this['_map']['scene'][_0x454668(-0x15f,-0x115)][_0x3d4254(-0x219,-0x189)]+'px',this['canvas'][_0x454668(-0x20e,-0x27e)][_0x3d4254(-0x87,-0x104)]=this['_map']['scene'][_0x3d4254(-0x17b,-0x131)][_0x3d4254(-0xd3,-0x12f)]+'px',this['canvas']['width']=this[_0x3d4254(-0x6c,-0xe9)]['scene'][_0x3d4254(-0x15b,-0x131)][_0x454668(-0x1b7,-0x158)],this[_0x454668(-0x15f,-0x197)]['height']=this['_map']['scene'][_0x454668(-0x15f,-0x1cf)][_0x3d4254(-0x149,-0x12f)]);}['bindEvent'](){function _0x2ab201(_0x498f4d,_0x1964ff){return _0x362994(_0x498f4d,_0x1964ff-0x1f8);}const _0x40caf1=this;let _0x596d07=Date['now']();function _0x510565(_0x525c56,_0x30fc39){return _0x39b9f7(_0x30fc39,_0x525c56- -0x5bf);}(function _0x417936(){if(_0x40caf1['isDestroy'])return;_0x40caf1[_0x49a4ae(0x164,0x17b)]=window[_0x49a4ae(0x1ef,0x19b)](_0x417936);function _0x49a4ae(_0x1e7227,_0x3b2a0f){return _0x4d13(_0x1e7227-0x16,_0x3b2a0f);}function _0x43cf79(_0xd98f94,_0x4fe1ff){return _0x4d13(_0xd98f94- -0x81,_0x4fe1ff);}if(_0x40caf1[_0x43cf79(0x149,0xce)]&&_0x40caf1['windField']){const _0x1c328e=Date['now'](),_0xdde9c2=_0x1c328e-_0x596d07;_0xdde9c2>_0x40caf1[_0x49a4ae(0x1a6,0x22e)]&&(_0x596d07=_0x1c328e-_0xdde9c2%_0x40caf1['frameTime'],_0x40caf1[_0x43cf79(0x15c,0x1af)]());}}(),window['addEventListener']('resize',this['resize'][_0x510565(-0x1dd,-0x228)](this),![]),this['mouse_down']=![],this['mouse_move']=![],this[_0x2ab201(-0x2b,0x2)]['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x2ab201(-0x35,0x17)]['wheel'],this[_0x2ab201(0x72,0x2e)],this),this[_0x510565(-0x19f,-0x120)]['on'](mars3d__namespace[_0x2ab201(0x95,0x17)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this)));}[_0x362994(-0x14c,-0x186)](){window[_0x1f68f0(-0x95,-0x113)](this['_animateFrame']),delete this[_0x1f68f0(-0x125,-0xe9)],window['removeEventListener']('resize',this[_0x1f68f0(-0xa4,-0x137)]);function _0x13f5ea(_0x1d315b,_0xbd08cb){return _0x362994(_0x1d315b,_0xbd08cb-0x28);}function _0x1f68f0(_0x3d723d,_0x257393){return _0x39b9f7(_0x257393,_0x3d723d- -0x4a4);}this['options']['mouseHidden']&&(this['_map'][_0x1f68f0(-0x14e,-0x1db)](mars3d__namespace[_0x13f5ea(-0x1ed,-0x1b9)]['wheel'],this[_0x1f68f0(-0xf2,-0x63)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this[_0x1f68f0(-0x8a,-0xed)],this),this[_0x1f68f0(-0x84,-0xb2)][_0x13f5ea(-0x1ca,-0x1fe)](mars3d__namespace['EventType'][_0x1f68f0(-0xa6,-0x38)],this[_0x13f5ea(-0x162,-0x1e9)],this),this['_map'][_0x13f5ea(-0x24d,-0x1fe)](mars3d__namespace[_0x1f68f0(-0x109,-0x179)][_0x1f68f0(-0x8b,-0x41)],this[_0x13f5ea(-0x23b,-0x21d)],this));}[_0x362994(-0x18d,-0x1ca)](_0x461c83){clearTimeout(this[_0x36449a(0x155,0x1c2)]);if(!this[_0x36449a(0x19a,0x168)]||!this[_0x36449a(0x177,0x203)])return;this[_0x2c0189(-0x186,-0x1d4)]['style']['visibility']=_0x36449a(0x136,0xdc);function _0x2c0189(_0x9a37c1,_0x47d986){return _0x39b9f7(_0x47d986,_0x9a37c1- -0x55e);}function _0x36449a(_0xca3f6a,_0x50e993){return _0x39b9f7(_0x50e993,_0xca3f6a- -0x261);}this[_0x2c0189(-0x1a8,-0x1d3)]=setTimeout(()=>{function _0x524932(_0x1a35d0,_0x249077){return _0x36449a(_0x1a35d0-0x330,_0x249077);}if(!this['show'])return;this['redraw'](),this['canvas']['style']['visibility']=_0x524932(0x3f9,0x455);},0xc8);}['_onMouseDownEvent'](_0x3f7b3a){function _0x355925(_0xb7ecbe,_0x4cb648){return _0x39b9f7(_0xb7ecbe,_0x4cb648-0x69);}function _0x5129f6(_0x534a04,_0xfc81ff){return _0x39b9f7(_0xfc81ff,_0x534a04- -0x509);}this['mouse_down']=!![],this[_0x355925(0x433,0x489)]['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace[_0x5129f6(-0x16e,-0x18a)]['mouseMove'],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x2579bf){function _0x997434(_0x652ec2,_0x110aba){return _0x362994(_0x652ec2,_0x110aba-0x203);}function _0x4943fb(_0x1de47e,_0x3aecf7){return _0x39b9f7(_0x3aecf7,_0x1de47e- -0xf8);}if(!this['show']||!this['canvas'])return;this['mouse_down']&&(this[_0x997434(0x9,0x5f)][_0x4943fb(0x231,0x1b2)]['visibility']='hidden',this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x109952){if(!this['show']||!this[_0x167943(0x45a,0x3f2)])return;this['_map'][_0x40cda5(-0x214,-0x1f2)](mars3d__namespace[_0x40cda5(-0x150,-0x1ad)]['mouseMove'],this[_0x167943(0x35a,0x351)],this);this['mouse_down']&&this['mouse_move']&&this[_0x167943(0x392,0x3ae)]();this['canvas']['style'][_0x40cda5(-0x10a,-0x13c)]=_0x167943(0x371,0x344);function _0x40cda5(_0x383c26,_0x8f221a){return _0x39b9f7(_0x383c26,_0x8f221a- -0x548);}this['mouse_down']=![];function _0x167943(_0xf3de12,_0x5f17ad){return _0x362994(_0xf3de12,_0x5f17ad-0x596);}this['mouse_move']=![];}[_0x39b9f7(0x3d0,0x439)](_0x50eac6){function _0x44aaa9(_0x3b4e4d,_0x1eae16){return _0x362994(_0x1eae16,_0x3b4e4d-0x14a);}this['clear'](),this['windData']=_0x50eac6,this[_0x44aaa9(-0x74,-0xcf)][_0x45836e(-0x12c,-0xbc)](_0x50eac6);function _0x45836e(_0x1fe428,_0x12ee56){return _0x39b9f7(_0x1fe428,_0x12ee56- -0x42e);}this[_0x44aaa9(-0x9e,-0x5e)]();}['redraw'](){if(!this[_0x2d2b6f(0x2ee,0x30e)])return;this['windField']['setOptions'](this['options']);function _0x2d2b6f(_0x25bb3a,_0x13eb58){return _0x362994(_0x25bb3a,_0x13eb58-0x48f);}this['update']();}[_0x39b9f7(0x3fd,0x40e)](){if(this['_updateIng'])return;function _0x4f104c(_0x1b8ea7,_0x263c5b){return _0x39b9f7(_0x263c5b,_0x1b8ea7-0xf9);}this['_updateIng']=!![];function _0x1da672(_0x49c452,_0x11330a){return _0x39b9f7(_0x11330a,_0x49c452- -0x58d);}if(this['worker'])this['windField'][_0x1da672(-0x17f,-0x1b1)]();else{const _0x1ad485=this[_0x1da672(-0x1cf,-0x181)]['getParticles']();this['_drawLines'](_0x1ad485);}this['_updateIng']=![];}['_drawLines'](_0x3e7db2){this['_canvasParticles']=_0x3e7db2,this[_0x25d5e1(-0x1f5,-0x1a1)][_0x25d5e1(-0xd3,-0x154)]='destination-in';function _0x25d5e1(_0x530d43,_0xe09f7e){return _0x362994(_0x530d43,_0xe09f7e-0xb);}this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext']['globalCompositeOperation']='lighter',this['canvasContext']['globalAlpha']=0.9;function _0x43698b(_0x64bb56,_0x139fcd){return _0x362994(_0x64bb56,_0x139fcd-0x4e2);}const _0x46ed49=this[_0x43698b(0x39d,0x386)][_0x43698b(0x3b8,0x329)][_0x25d5e1(-0x12c,-0x155)]!==Cesium['SceneMode'][_0x25d5e1(-0x108,-0x139)],_0x3af0b6=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x245e7f=0x0,_0x56a1e8=_0x3e7db2['length'];_0x245e7f<_0x56a1e8;_0x245e7f++){const _0x50f3b8=_0x3e7db2[_0x245e7f],_0x42be8a=this[_0x25d5e1(-0x11a,-0x15f)](_0x50f3b8,_0x50f3b8[_0x25d5e1(-0xfd,-0x13c)],_0x50f3b8['lat'],_0x50f3b8[_0x25d5e1(-0x178,-0x20d)]),_0x494f2f=this[_0x43698b(0x3d4,0x378)](_0x50f3b8,_0x50f3b8[_0x43698b(0x292,0x29e)],_0x50f3b8['tlat'],_0x50f3b8[_0x25d5e1(-0x285,-0x21d)]);if(!_0x42be8a||!_0x494f2f)continue;if(_0x46ed49&&Math['abs'](_0x42be8a[0x0]-_0x494f2f[0x0])>=_0x3af0b6)continue;this['canvasContext']['beginPath'](),this[_0x25d5e1(-0x1fd,-0x1a1)][_0x43698b(0x286,0x2b4)]=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x25d5e1(-0x1d4,-0x1a5)]['getColor'](_0x50f3b8[_0x25d5e1(-0x288,-0x1fb)]),this['canvasContext'][_0x25d5e1(-0x206,-0x1c7)](_0x42be8a[0x0],_0x42be8a[0x1]),this['canvasContext']['lineTo'](_0x494f2f[0x0],_0x494f2f[0x1]),this[_0x25d5e1(-0x140,-0x1a1)]['stroke']();}else{this['canvasContext'][_0x43698b(0x33a,0x34d)](),this[_0x25d5e1(-0x15b,-0x1a1)]['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this['color'];for(let _0xd8c5f7=0x0,_0x456401=_0x3e7db2['length'];_0xd8c5f7<_0x456401;_0xd8c5f7++){const _0x471ce8=_0x3e7db2[_0xd8c5f7],_0x47f506=this['_tomap'](_0x471ce8,_0x471ce8[_0x43698b(0x373,0x39b)],_0x471ce8['lat'],_0x471ce8['alt']),_0x25c140=this['_tomap'](_0x471ce8,_0x471ce8['tlng'],_0x471ce8[_0x25d5e1(-0x213,-0x195)],_0x471ce8[_0x25d5e1(-0x24d,-0x21d)]);if(!_0x47f506||!_0x25c140)continue;if(_0x46ed49&&Math['abs'](_0x47f506[0x0]-_0x25c140[0x0])>=_0x3af0b6)continue;this[_0x43698b(0x2bd,0x336)]['moveTo'](_0x47f506[0x0],_0x47f506[0x1]),this[_0x43698b(0x2bc,0x336)]['lineTo'](_0x25c140[0x0],_0x25c140[0x1]);}this['canvasContext']['stroke']();}}[_0x362994(-0x125,-0x16a)](_0x26912a,_0x49683e,_0x5467e7,_0x11da8a){const _0x3c594f=Cesium[_0x40689a(-0xc9,-0x3b)]['fromDegrees'](_0x49683e,_0x5467e7,_0x11da8a??this['fixedHeight']);function _0x40689a(_0x147b93,_0x1b1627){return _0x39b9f7(_0x1b1627,_0x147b93- -0x4c5);}const _0x7247ac=this['_map'][_0x556e0e(0x222,0x225)];if(_0x7247ac[_0x556e0e(0x27b,0x2c9)]===Cesium['SceneMode']['SCENE3D']){const _0x3764e5=new Cesium['EllipsoidalOccluder'](_0x7247ac['globe']['ellipsoid'],_0x7247ac['camera']['positionWC']),_0x565cb8=_0x3764e5['isPointVisible'](_0x3c594f);if(!_0x565cb8)return _0x26912a['age']=0x0,null;}function _0x556e0e(_0x25f6a4,_0x377bcd){return _0x362994(_0x377bcd,_0x25f6a4-0x3db);}const _0x464a07=mars3d__namespace[_0x40689a(-0x12d,-0xcd)]['toWindowCoordinates'](this['_map']['scene'],_0x3c594f);return _0x464a07?[_0x464a07['x'],_0x464a07['y']]:null;}[_0x362994(-0x204,-0x214)](){this[_0x2a475e(-0x183,-0x18c)][_0x2a475e(-0x1d9,-0x1b7)]();function _0x2a475e(_0x34caf0,_0x43fed3){return _0x362994(_0x43fed3,_0x34caf0-0x3b);}function _0x37ddcb(_0x182c33,_0x46dd4f){return _0x39b9f7(_0x46dd4f,_0x182c33- -0x581);}delete this[_0x37ddcb(-0x1a0,-0x235)];}['initWorker'](){function _0x5888ba(_0x1567d6,_0x37d60b){return _0x39b9f7(_0x37d60b,_0x1567d6- -0x19);}this['worker']=new Worker(this['options'][_0x5888ba(0x3ad,0x3ad)]),this[_0x5888ba(0x3ad,0x3da)]['onmessage']=_0x3bcce8=>{function _0x58a09a(_0x5e7e9e,_0x18f55f){return _0x2fc958(_0x18f55f,_0x5e7e9e- -0x3b);}this['_drawLines'](_0x3bcce8[_0x58a09a(-0x21b,-0x283)]['particles']),this['_updateIng2']=![];},this[_0x5888ba(0x3a5,0x33b)]={'init':_0x6dade5=>{const _0x2619a3={};_0x2619a3[_0x5a4dbe(0x5d,-0x2f)]='init';function _0x5a4dbe(_0x4dcef4,_0x4adb32){return _0x2fc958(_0x4adb32,_0x4dcef4-0x26b);}_0x2619a3['options']=_0x6dade5;function _0x1291bf(_0x501d32,_0x5446a4){return _0x5888ba(_0x5446a4- -0xa6,_0x501d32);}this['worker'][_0x1291bf(0x239,0x273)](_0x2619a3);},'setOptions':_0x5e865e=>{function _0x10ed7f(_0x4b9df6,_0x1a939a){return _0x5888ba(_0x4b9df6- -0x157,_0x1a939a);}const _0xd37eee={};_0xd37eee['type']=_0x10ed7f(0x1fe,0x264),_0xd37eee[_0x4147e6(-0x77,-0x2)]=_0x5e865e;function _0x4147e6(_0x1f2537,_0x36d5d6){return _0x5888ba(_0x1f2537- -0x3e4,_0x36d5d6);}this[_0x4147e6(-0x37,0x12)]['postMessage'](_0xd37eee);},'setDate':_0x3c3a38=>{function _0x3136ee(_0x8145eb,_0x1acc8f){return _0x2fc958(_0x1acc8f,_0x8145eb-0x57b);}const _0x432dc6={};_0x432dc6['type']=_0x3136ee(0x36e,0x32d),_0x432dc6['data']=_0x3c3a38,this['worker']['postMessage'](_0x432dc6);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];function _0x18b4fa(_0x4a165,_0x5676d0){return _0x2fc958(_0x5676d0,_0x4a165-0x10c);}const _0x559fe1={};function _0x2a2387(_0x4c76de,_0x106566){return _0x2fc958(_0x4c76de,_0x106566-0xdf);}_0x559fe1[_0x2a2387(-0xea,-0x12f)]=_0x18b4fa(-0x65,-0x47),this[_0x18b4fa(-0xad,-0x18)]['postMessage'](_0x559fe1);},'clear':()=>{function _0x1dbc7d(_0x22a27a,_0x6fbd0d){return _0x5888ba(_0x6fbd0d- -0x2d2,_0x22a27a);}const _0x4a17d2={};_0x4a17d2['type']=_0x1dbc7d(0xc3,0x7d);function _0x42283f(_0x3e3f10,_0x5b286d){return _0x5888ba(_0x3e3f10- -0x40f,_0x5b286d);}this[_0x42283f(-0x62,0x5)]['postMessage'](_0x4a17d2);}};function _0x2fc958(_0x53c36f,_0x4cc217){return _0x39b9f7(_0x53c36f,_0x4cc217- -0x57f);}this['windField'][_0x5888ba(0x377,0x357)](this['options']);}}mars3d__namespace['LayerUtil']['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer'][_0x39b9f7(0x42b,0x3f9)]=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports[_0x39b9f7(0x3de,0x38f)]=CanvasWindField,exports[_0x39b9f7(0x3b8,0x3f9)]=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x22ef2e={};_0x22ef2e[_0x362994(-0x158,-0x184)]=!![],Object['defineProperty'](exports,_0x362994(-0x14b,-0x15e),_0x22ef2e);
}));
