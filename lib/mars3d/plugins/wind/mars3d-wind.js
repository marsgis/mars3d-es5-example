/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.7.16
 * 编译日期：2024-05-28 08:55:37
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x49d3b8,_0x4b8a47){function _0x773c85(_0x3ee7d2,_0x4f2764){return _0xe776(_0x4f2764- -0x398,_0x3ee7d2);}const _0x24b0bf=_0x49d3b8();function _0x5bdb75(_0x254669,_0x13cffe){return _0xe776(_0x254669-0xc3,_0x13cffe);}while(!![]){try{const _0x552656=-parseInt(_0x773c85(-0x1c6,-0x21c))/0x1+parseInt(_0x5bdb75(0x2a5,0x25c))/0x2*(-parseInt(_0x5bdb75(0x2b7,0x272))/0x3)+-parseInt(_0x5bdb75(0x264,0x21f))/0x4+parseInt(_0x773c85(-0x215,-0x1d4))/0x5+parseInt(_0x5bdb75(0x2b0,0x30a))/0x6*(parseInt(_0x773c85(-0x1a2,-0x146))/0x7)+parseInt(_0x5bdb75(0x337,0x388))/0x8+-parseInt(_0x773c85(-0xfc,-0x15a))/0x9*(-parseInt(_0x5bdb75(0x29e,0x30f))/0xa);if(_0x552656===_0x4b8a47)break;else _0x24b0bf['push'](_0x24b0bf['shift']());}catch(_0x476dd1){_0x24b0bf['push'](_0x24b0bf['shift']());}}}(_0x36e1,0x99ffe));function _interopNamespace(_0x3ef4d6){if(_0x3ef4d6&&_0x3ef4d6['__esModule'])return _0x3ef4d6;var _0xa9ded8=Object['create'](null);_0x3ef4d6&&Object[_0x148e48(0x210,0x25d)](_0x3ef4d6)['forEach'](function(_0x4e97d7){if(_0x4e97d7!=='default'){var _0x539b87=Object['getOwnPropertyDescriptor'](_0x3ef4d6,_0x4e97d7);Object['defineProperty'](_0xa9ded8,_0x4e97d7,_0x539b87['get']?_0x539b87:{'enumerable':!![],'get':function(){return _0x3ef4d6[_0x4e97d7];}});}});_0xa9ded8['default']=_0x3ef4d6;function _0x148e48(_0x43c86e,_0x52a0c4){return _0xe776(_0x43c86e-0x5f,_0x52a0c4);}return _0xa9ded8;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0xa4a86f,_0x229e14){function _0x254919(_0x40edd7,_0x5213fb){return _0xe776(_0x40edd7- -0x23b,_0x5213fb);}const _0x1734c3=_0xa4a86f*Math['cos'](Cesium$7['Math'][_0x254919(-0x7d,-0x14)](_0x229e14));return _0x1734c3;}function getV(_0x53ea76,_0x39fe82){const _0x390495=_0x53ea76*Math['sin'](Cesium$7['Math']['toRadians'](_0x39fe82));return _0x390495;}function getSpeed(_0x501aea,_0x5f4429){function _0x31e1a2(_0x3dbca5,_0x427d97){return _0xe776(_0x427d97- -0x2ad,_0x3dbca5);}function _0x542d9b(_0x21f096,_0x118d95){return _0xe776(_0x118d95-0x6f,_0x21f096);}const _0xf08dfc=Math[_0x31e1a2(-0x31,-0xa2)](Math[_0x31e1a2(-0xd7,-0x90)](_0x501aea,0x2)+Math[_0x542d9b(0x27d,0x28c)](_0x5f4429,0x2));return _0xf08dfc;}function getDirection(_0x1e7695,_0x1eb787){let _0x1095e8=Cesium$7[_0x256fa6(0x263,0x29e)]['toDegrees'](Math['atan2'](_0x1eb787,_0x1e7695));_0x1095e8+=_0x1095e8<0x0?0x168:0x0;function _0x256fa6(_0x16f365,_0x236e1e){return _0xe776(_0x16f365-0x22,_0x236e1e);}return _0x1095e8;}const _0x416fa8={};_0x416fa8['__proto__']=null,_0x416fa8[_0x2b542d(0x2ae,0x251)]=getU,_0x416fa8['getV']=getV,_0x416fa8[_0x1f69cd(-0x13,-0x81)]=getSpeed,_0x416fa8['getDirection']=getDirection;var WindUtil=_0x416fa8;const Cesium$6=mars3d__namespace[_0x1f69cd(0x20,-0x1f)];class CustomPrimitive{constructor(_0x33fcb1){this[_0x194ed3(0xec,0x60)]=_0x33fcb1['commandType'],this[_0x53dcb8(0x122,0xfe)]=_0x33fcb1['geometry'],this[_0x194ed3(0x140,0xce)]=_0x33fcb1[_0x53dcb8(0x1d4,0x19f)];function _0x53dcb8(_0x4e31c5,_0x2421f7){return _0x2b542d(_0x4e31c5- -0x135,_0x2421f7);}this[_0x194ed3(0x88,0xa3)]=_0x33fcb1['primitiveType'],this[_0x194ed3(0x10d,0xc1)]=_0x33fcb1[_0x194ed3(0x10d,0x135)],this['vertexShaderSource']=_0x33fcb1[_0x53dcb8(0x150,0x1de)],this['fragmentShaderSource']=_0x33fcb1[_0x53dcb8(0x1cf,0x166)],this['rawRenderState']=_0x33fcb1['rawRenderState'],this['framebuffer']=_0x33fcb1[_0x53dcb8(0xfc,0x8c)];function _0x194ed3(_0x3ef413,_0x4bff25){return _0x1f69cd(_0x4bff25,_0x3ef413-0xe4);}this['outputTexture']=_0x33fcb1['outputTexture'],this['autoClear']=_0x33fcb1['autoClear']??![],this[_0x53dcb8(0x127,0xcf)]=_0x33fcb1['preExecute'],this['show']=!![],this[_0x194ed3(0x73,0xc5)]=undefined,this[_0x53dcb8(0x12e,0x188)]=undefined,this['autoClear']&&(this[_0x194ed3(0x9a,0x3a)]=new Cesium$6['ClearCommand']({'color':new Cesium$6[(_0x53dcb8(0x1e6,0x272))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x53dcb8(0xfc,0x185)],'pass':Cesium$6[_0x53dcb8(0xdd,0x7f)]['OPAQUE']}));}[_0x2b542d(0x24e,0x203)](_0x416741){function _0x5cf3e9(_0x524586,_0x4535cc){return _0x1f69cd(_0x524586,_0x4535cc-0x46e);}function _0x30d9e1(_0x1582a7,_0x1c0d88){return _0x2b542d(_0x1582a7- -0x375,_0x1c0d88);}switch(this[_0x5cf3e9(0x440,0x476)]){case _0x30d9e1(-0x10d,-0xbc):{const _0x5853a7=Cesium$6['VertexArray'][_0x30d9e1(-0xb5,-0x2e)]({'context':_0x416741,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6[_0x5cf3e9(0x45b,0x3dd)][_0x5cf3e9(0x4c2,0x45c)]}),_0x52772c={};_0x52772c[_0x5cf3e9(0x43c,0x44e)]=_0x416741,_0x52772c['attributeLocations']=this[_0x30d9e1(-0x6c,0xf)],_0x52772c[_0x30d9e1(-0xf0,-0x15c)]=this['vertexShaderSource'],_0x52772c[_0x30d9e1(-0x71,-0xbe)]=this[_0x5cf3e9(0x46e,0x4c5)];const _0x91d30e=Cesium$6[_0x30d9e1(-0x12f,-0x13d)]['fromCache'](_0x52772c),_0x20ac4a=Cesium$6[_0x30d9e1(-0x68,-0x3c)][_0x30d9e1(-0x14e,-0x183)](this[_0x5cf3e9(0x481,0x4d6)]);return new Cesium$6[(_0x5cf3e9(0x4b3,0x492))]({'primitiveType':this[_0x5cf3e9(0x456,0x412)],'shaderProgram':_0x91d30e,'vertexArray':_0x5853a7,'modelMatrix':Cesium$6['Matrix4']['IDENTITY'],'renderState':_0x20ac4a,'uniformMap':this[_0x5cf3e9(0x4f5,0x497)],'castShadows':![],'receiveShadows':![],'framebuffer':this['framebuffer'],'pass':Cesium$6['Pass']['OPAQUE'],'pickOnly':!![],'owner':this});}case _0x5cf3e9(0x438,0x41c):{const _0x25a48d={};return _0x25a48d['owner']=this,_0x25a48d['fragmentShaderSource']=this['fragmentShaderSource'],_0x25a48d['uniformMap']=this['uniformMap'],_0x25a48d['outputTexture']=this[_0x5cf3e9(0x3ee,0x461)],_0x25a48d[_0x5cf3e9(0x495,0x48c)]=!![],new Cesium$6['ComputeCommand'](_0x25a48d);}}}['setGeometry'](_0x2d2c5d,_0x2b1527){function _0x1dd228(_0x2e371a,_0x59a343){return _0x2b542d(_0x59a343-0x16d,_0x2e371a);}function _0x2819af(_0x5324bd,_0x22068b){return _0x1f69cd(_0x5324bd,_0x22068b-0x463);}this['geometry']=_0x2b1527;const _0x3d2c5c=Cesium$6['VertexArray']['fromGeometry']({'context':_0x2d2c5d,'geometry':this['geometry'],'attributeLocations':this[_0x1dd228(0x4c6,0x476)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']});this['commandToExecute'][_0x1dd228(0x399,0x40c)]=_0x3d2c5c;}['update'](_0x104170){function _0x41a40c(_0x3fb593,_0x6f49e8){return _0x2b542d(_0x6f49e8-0x1da,_0x3fb593);}if(!this['show'])return;if(_0x104170['mode']!==Cesium$6['SceneMode']['SCENE3D'])return;!Cesium$6['defined'](this['commandToExecute'])&&(this[_0x41a40c(0x3ef,0x416)]=this['createCommand'](_0x104170['context']));Cesium$6[_0x5d0358(0x3bf,0x392)](this['preExecute'])&&this['preExecute']();Cesium$6['defined'](this['clearCommand'])&&_0x104170['commandList']['push'](this['clearCommand']);function _0x5d0358(_0x478f1a,_0x5b9bff){return _0x1f69cd(_0x478f1a,_0x5b9bff-0x370);}_0x104170['commandList']['push'](this['commandToExecute']);}[_0x1f69cd(0x33,0x3)](){return![];}[_0x2b542d(0x21f,0x205)](){function _0x30f63e(_0x2e51a4,_0x2d6080){return _0x2b542d(_0x2e51a4-0x2b,_0x2d6080);}if(this['clearCommand']){var _0x3fa946,_0x55e831;(_0x3fa946=this[_0x2d9b4c(0x7,0x42)])!==null&&_0x3fa946!==void 0x0&&_0x3fa946[_0x30f63e(0x2ca,0x344)]&&this['clearCommand']['vertexArray'][_0x2d9b4c(0x7b,-0x2)](),(_0x55e831=this['clearCommand'])!==null&&_0x55e831!==void 0x0&&_0x55e831[_0x2d9b4c(0x9f,0x1f)]&&this['clearCommand'][_0x2d9b4c(0x55,0x1f)][_0x2d9b4c(0x65,-0x2)](),delete this['clearCommand'];}function _0x2d9b4c(_0x46ee0a,_0x3da07b){return _0x1f69cd(_0x46ee0a,_0x3da07b-0x8c);}return this[_0x2d9b4c(-0x3b,0x1b)]&&(this[_0x30f63e(0x267,0x270)]['vertexArray']&&this['commandToExecute'][_0x30f63e(0x2ca,0x251)]['destroy'](),this[_0x30f63e(0x267,0x1eb)]['shaderProgram']&&this['commandToExecute'][_0x30f63e(0x26b,0x24d)][_0x2d9b4c(0x76,-0x2)](),delete this[_0x2d9b4c(-0xe,0x1b)]),Cesium$6['destroyObject'](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0x533329=function(){const _0x567db5=new Cesium$5['Geometry']({'attributes':new Cesium$5['GeometryAttributes']({'position':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5[(_0x5a67ff(0x39e,0x37e))]({'componentDatatype':Cesium$5[_0x5a67ff(0x349,0x391)]['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});function _0x5a67ff(_0x2329cc,_0xf5db15){return _0xe776(_0xf5db15-0x138,_0x2329cc);}function _0x5619aa(_0x28de3e,_0x24ca73){return _0xe776(_0x28de3e-0x384,_0x24ca73);}return _0x567db5;},_0x1b68ee=function(_0xef0514,_0x4156db){function _0x24c07f(_0xc5d7ca,_0xe7581a){return _0xe776(_0xe7581a-0x198,_0xc5d7ca);}if(Cesium$5['defined'](_0x4156db)){const _0x4e7776={};_0x4e7776[_0x3a73e6(0x1db,0x1a3)]=_0x4156db,_0xef0514['source']=_0x4e7776;}function _0x3a73e6(_0xeb6da6,_0x76f3fb){return _0xe776(_0x76f3fb- -0x3d,_0xeb6da6);}const _0x4dada3=new Cesium$5[(_0x3a73e6(0x1c7,0x231))](_0xef0514);return _0x4dada3;};function _0x5edffd(_0x915a73,_0x4cedee){return _0x2b542d(_0x4cedee-0x1e1,_0x915a73);}const _0xf9a473=function(_0x4495fd,_0x1bcdd9,_0x5f64d0){const _0x30a820={};function _0x153ae2(_0x22845f,_0x860afa){return _0xe776(_0x22845f-0x207,_0x860afa);}_0x30a820['context']=_0x4495fd,_0x30a820['colorTextures']=[_0x1bcdd9],_0x30a820['depthTexture']=_0x5f64d0;const _0xbdb463=new Cesium$5[(_0x153ae2(0x40b,0x452))](_0x30a820);return _0xbdb463;},_0x5b0701=function(_0x550ed3){function _0x477a7d(_0x3575a8,_0x5028fd){return _0xe776(_0x5028fd-0x2ad,_0x3575a8);}const _0x1d6b7b=!![],_0x1de2af=![],_0x20dec0={};_0x20dec0[_0x44d7c2(0x249,0x1ba)]=_0x550ed3['viewport'],_0x20dec0[_0x44d7c2(0x2a9,0x226)]=_0x550ed3['depthTest'],_0x20dec0['depthMask']=_0x550ed3['depthMask'],_0x20dec0[_0x477a7d(0x458,0x420)]=_0x550ed3['blending'];const _0x162ac0=_0x20dec0,_0x444579=Cesium$5['Appearance'][_0x44d7c2(0x27e,0x2a8)](_0x1d6b7b,_0x1de2af,_0x162ac0);function _0x44d7c2(_0x5f22fc,_0x126759){return _0xe776(_0x126759-0x16,_0x5f22fc);}return _0x444579;},_0x40463b=function(_0x277154){const _0x41fcde={},_0x25ee72=Cesium$5['Math'][_0x1551f3(0x1e5,0x1e9)](_0x277154['west'],Cesium$5['Math'][_0x1551f3(0x213,0x1c0)]);function _0x1551f3(_0x4a340a,_0x1c0ebf){return _0xe776(_0x4a340a- -0x19,_0x1c0ebf);}const _0xe5a4bb=Cesium$5['Math']['mod'](_0x277154['east'],Cesium$5[_0x5c590e(0x278,0x1f2)][_0x5c590e(0x227,0x1dd)]),_0xf36f9a=_0x277154['width'];let _0x5463a0,_0x34f3c2;_0xf36f9a>Cesium$5[_0x1551f3(0x228,0x2ae)]['THREE_PI_OVER_TWO']?(_0x5463a0=0x0,_0x34f3c2=Cesium$5['Math']['TWO_PI']):_0xe5a4bb-_0x25ee72<_0xf36f9a?(_0x5463a0=_0x25ee72,_0x34f3c2=_0x25ee72+_0xf36f9a):(_0x5463a0=_0x25ee72,_0x34f3c2=_0xe5a4bb);_0x41fcde[_0x1551f3(0x21f,0x223)]={'min':Cesium$5['Math'][_0x5c590e(0xb8,0x133)](_0x5463a0),'max':Cesium$5['Math']['toDegrees'](_0x34f3c2)};const _0x217a68=_0x277154[_0x5c590e(0x15c,0x1d8)],_0x2ff1a8=_0x277154['north'],_0x48fd2b=_0x277154[_0x1551f3(0x1a3,0x182)],_0x2a5800=_0x48fd2b>Cesium$5['Math']['PI']/0xc?_0x48fd2b/0x2:0x0;let _0x5e45e6=Cesium$5['Math']['clampToLatitudeRange'](_0x217a68-_0x2a5800),_0x9a15b3=Cesium$5['Math']['clampToLatitudeRange'](_0x2ff1a8+_0x2a5800);_0x5e45e6<-Cesium$5['Math'][_0x5c590e(0x1ad,0x204)]&&(_0x5e45e6=-Cesium$5['Math']['PI_OVER_TWO']);function _0x5c590e(_0x4de2b5,_0x55d596){return _0xe776(_0x55d596- -0x4f,_0x4de2b5);}return _0x9a15b3>Cesium$5[_0x5c590e(0x193,0x1f2)][_0x1551f3(0x23a,0x29b)]&&(_0x9a15b3=Cesium$5[_0x1551f3(0x228,0x1d3)]['PI_OVER_TWO']),_0x41fcde['lat']={'min':Cesium$5['Math']['toDegrees'](_0x5e45e6),'max':Cesium$5[_0x1551f3(0x228,0x25e)][_0x5c590e(0xbb,0x133)](_0x9a15b3)},_0x41fcde;},_0x23fcfd={};_0x23fcfd[_0x5edffd(0x51b,0x4da)]=_0x533329,_0x23fcfd[_0x5edffd(0x48e,0x4af)]=_0x1b68ee;function _0x4fef0a(_0x103eab,_0x49b04f){return _0x2b542d(_0x49b04f- -0x319,_0x103eab);}return _0x23fcfd[_0x4fef0a(-0x115,-0x9d)]=_0xf9a473,_0x23fcfd['createRawRenderState']=_0x5b0701,_0x23fcfd['viewRectangleToLonLatRange']=_0x40463b,_0x23fcfd;}());var segmentDraw_vert=_0x2b542d(0x288,0x27f),segmentDraw_frag=_0x2b542d(0x2d3,0x2c3),fullscreen_vert=_0x1f69cd(0x0,-0x4d),trailDraw_frag='uniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x0a\x20\x20\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0\x20*\x20trailsColor)\x20/\x20255.0;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20pointsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20trailsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a',screenDraw_frag=_0x2b542d(0x2e7,0x305);const Cesium$4=mars3d__namespace['Cesium'];class ParticlesRendering{constructor(_0x22c757,_0x5b18a3,_0x4ecf58,_0x23f34c,_0x465784){this['createRenderingTextures'](_0x22c757,_0x5b18a3,_0x4ecf58['colors']),this['createRenderingFramebuffers'](_0x22c757);function _0x188536(_0x14307d,_0x40efa9){return _0x1f69cd(_0x40efa9,_0x14307d-0x136);}this[_0x188536(0x127,0x164)](_0x22c757,_0x4ecf58,_0x23f34c,_0x465784);}[_0x1f69cd(-0x124,-0xab)](_0xbb03a3,_0x511b14,_0x23e1f3){const _0x534bd1={};_0x534bd1['context']=_0xbb03a3,_0x534bd1['width']=_0xbb03a3[_0x4c18f3(0x586,0x542)];function _0x21e306(_0x32a9df,_0x2b8c3f){return _0x1f69cd(_0x32a9df,_0x2b8c3f-0xab);}_0x534bd1['height']=_0xbb03a3[_0x4c18f3(0x545,0x57b)],_0x534bd1[_0x21e306(-0x1d,0x16)]=Cesium$4['PixelFormat']['RGBA'],_0x534bd1['pixelDatatype']=Cesium$4['PixelDatatype']['UNSIGNED_BYTE'];const _0x295813=_0x534bd1,_0x5116a5={};_0x5116a5['context']=_0xbb03a3,_0x5116a5['width']=_0xbb03a3['drawingBufferWidth'],_0x5116a5[_0x4c18f3(0x4d9,0x554)]=_0xbb03a3['drawingBufferHeight'];function _0x4c18f3(_0x469ca1,_0x5a6b49){return _0x2b542d(_0x469ca1-0x291,_0x5a6b49);}_0x5116a5[_0x21e306(-0x5d,0x16)]=Cesium$4['PixelFormat']['DEPTH_COMPONENT'],_0x5116a5[_0x21e306(0xc6,0xbb)]=Cesium$4[_0x4c18f3(0x538,0x4bb)]['UNSIGNED_INT'];const _0x2be8a1=_0x5116a5,_0x3d5963=_0x23e1f3[_0x4c18f3(0x554,0x5bb)],_0x565c14=new Float32Array(_0x3d5963*0x3);for(let _0x12d011=0x0;_0x12d011<_0x3d5963;_0x12d011++){const _0xb6d460=Cesium$4[_0x4c18f3(0x5ac,0x59b)]['fromCssColorString'](_0x23e1f3[_0x12d011]);_0x565c14[0x3*_0x12d011]=_0xb6d460['red'],_0x565c14[0x3*_0x12d011+0x1]=_0xb6d460[_0x4c18f3(0x526,0x49b)],_0x565c14[0x3*_0x12d011+0x2]=_0xb6d460['blue'];}const _0x2d888f={'context':_0xbb03a3,'width':_0x3d5963,'height':0x1,'pixelFormat':Cesium$4[_0x21e306(0xe8,0xb4)][_0x4c18f3(0x522,0x545)],'pixelDatatype':Cesium$4['PixelDatatype']['FLOAT'],'sampler':new Cesium$4['Sampler']({'minificationFilter':Cesium$4['TextureMinificationFilter']['LINEAR'],'magnificationFilter':Cesium$4['TextureMagnificationFilter']['LINEAR']})};this['textures']={'segmentsColor':Util['createTexture'](_0x295813),'segmentsDepth':Util['createTexture'](_0x2be8a1),'currentTrailsColor':Util['createTexture'](_0x295813),'currentTrailsDepth':Util[_0x21e306(0xe7,0xcc)](_0x2be8a1),'nextTrailsColor':Util[_0x4c18f3(0x55f,0x5bb)](_0x295813),'nextTrailsDepth':Util[_0x21e306(0xd4,0xcc)](_0x2be8a1),'colorTable':Util[_0x21e306(0x10a,0xcc)](_0x2d888f,_0x565c14)};}['createRenderingFramebuffers'](_0x5ebce5){function _0x414771(_0x414408,_0x1d3c6f){return _0x2b542d(_0x1d3c6f- -0x414,_0x414408);}function _0x3570f7(_0x2c1a2b,_0x2cbbcd){return _0x2b542d(_0x2cbbcd-0x7,_0x2c1a2b);}this['framebuffers']={'segments':Util['createFramebuffer'](_0x5ebce5,this[_0x3570f7(0x28d,0x210)]['segmentsColor'],this[_0x414771(-0x1f3,-0x20b)][_0x414771(-0x176,-0x1da)]),'currentTrails':Util[_0x414771(-0x1c3,-0x198)](_0x5ebce5,this['textures'][_0x414771(-0x1e1,-0x1c1)],this[_0x414771(-0x25d,-0x20b)][_0x414771(-0x141,-0x11e)]),'nextTrails':Util['createFramebuffer'](_0x5ebce5,this['textures'][_0x414771(-0x26c,-0x208)],this['textures']['nextTrailsDepth'])};}[_0x1f69cd(-0x35,-0x99)](_0x2bdede){const _0x5cb7d8=0x4;let _0x3a9c48=[];for(let _0x40aca3=0x0;_0x40aca3<_0x2bdede[_0x50255c(0x11,-0x74)];_0x40aca3++){for(let _0x6a76fe=0x0;_0x6a76fe<_0x2bdede['particlesTextureSize'];_0x6a76fe++){for(let _0x3af32a=0x0;_0x3af32a<_0x5cb7d8;_0x3af32a++){_0x3a9c48[_0x32574e(0x13e,0x10a)](_0x40aca3/_0x2bdede[_0x50255c(0x11,-0x35)]),_0x3a9c48[_0x50255c(-0x1f,-0x2b)](_0x6a76fe/_0x2bdede['particlesTextureSize']);}}}_0x3a9c48=new Float32Array(_0x3a9c48);let _0x4cbaa4=[];const _0x56f93a=[-0x1,0x1],_0x4de4dc=[-0x1,0x1];for(let _0x1893a3=0x0;_0x1893a3<_0x2bdede[_0x32574e(0x142,0x1cc)];_0x1893a3++){for(let _0x4372dc=0x0;_0x4372dc<_0x5cb7d8/0x2;_0x4372dc++){for(let _0x633f7=0x0;_0x633f7<_0x5cb7d8/0x2;_0x633f7++){_0x4cbaa4['push'](_0x56f93a[_0x4372dc]),_0x4cbaa4[_0x50255c(-0x1f,0x5e)](_0x4de4dc[_0x633f7]),_0x4cbaa4['push'](0x0);}}}_0x4cbaa4=new Float32Array(_0x4cbaa4);const _0x190453=0x6*_0x2bdede['maxParticles'],_0x3bb4a2=new Uint32Array(_0x190453);for(let _0x4ce1d7=0x0,_0x231d07=0x0,_0x3c8135=0x0;_0x4ce1d7<_0x2bdede[_0x32574e(0x24a,0x1cc)];_0x4ce1d7++){_0x3bb4a2[_0x231d07++]=_0x3c8135+0x0,_0x3bb4a2[_0x231d07++]=_0x3c8135+0x1,_0x3bb4a2[_0x231d07++]=_0x3c8135+0x2,_0x3bb4a2[_0x231d07++]=_0x3c8135+0x2,_0x3bb4a2[_0x231d07++]=_0x3c8135+0x1,_0x3bb4a2[_0x231d07++]=_0x3c8135+0x3,_0x3c8135+=0x4;}function _0x50255c(_0x192b0f,_0x271ea0){return _0x2b542d(_0x192b0f- -0x236,_0x271ea0);}const _0x57c74c=new Cesium$4[(_0x50255c(0xc2,0xfd))]({'attributes':new Cesium$4[(_0x32574e(0x1a1,0x14d))]({'st':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4[_0x32574e(0x231,0x1d8)]['FLOAT'],'componentsPerAttribute':0x2,'values':_0x3a9c48}),'normal':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4[_0x32574e(0x17f,0x1d8)]['FLOAT'],'componentsPerAttribute':0x3,'values':_0x4cbaa4})}),'indices':_0x3bb4a2});function _0x32574e(_0x193ed6,_0x3f0e17){return _0x2b542d(_0x3f0e17- -0x10d,_0x193ed6);}return _0x57c74c;}[_0x1f69cd(-0x34,-0xf)](_0x55c4ea,_0x5e2ba5,_0x48c0e3,_0x43c48e){const _0x39032f=this,_0x3e5304={};function _0x2ea647(_0x5e1629,_0x5c19a3){return _0x1f69cd(_0x5e1629,_0x5c19a3-0x405);}_0x3e5304['st']=0x0,_0x3e5304['normal']=0x1;const _0x340e3e={};function _0x310ced(_0x1dd53e,_0x1d0b00){return _0x2b542d(_0x1d0b00- -0x11d,_0x1dd53e);}_0x340e3e['sources']=[segmentDraw_vert];const _0x14b309={};_0x14b309['sources']=[segmentDraw_frag];const _0x2c5d34={};_0x2c5d34['enabled']=!![];const _0x1fa69c={};_0x1fa69c[_0x310ced(0x146,0x113)]=undefined,_0x1fa69c[_0x2ea647(0x3d0,0x3f4)]=_0x2c5d34,_0x1fa69c['depthMask']=!![];const _0x1f9237={};_0x1f9237[_0x2ea647(0x3db,0x413)]=0x0,_0x1f9237['st']=0x1;const _0x4efcf3={};_0x4efcf3['defines']=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x4efcf3['sources']=[fullscreen_vert];const _0x4e178e={};_0x4e178e['defines']=[_0x310ced(0x136,0x190)],_0x4e178e[_0x310ced(0x1e4,0x1e5)]=[trailDraw_frag];const _0x4e2050={};_0x4e2050['position']=0x0,_0x4e2050['st']=0x1;const _0x14b9eb={};_0x14b9eb['defines']=[_0x2ea647(0x353,0x369)],_0x14b9eb[_0x310ced(0x25c,0x1e5)]=[fullscreen_vert];const _0xc5df6b={};_0xc5df6b['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0xc5df6b['sources']=[screenDraw_frag];const _0x13adb6={};_0x13adb6['enabled']=![];const _0x3f71e4={};_0x3f71e4['enabled']=!![],this['primitives']={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x3e5304,'geometry':this[_0x2ea647(0x350,0x36c)](_0x5e2ba5),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'currentParticlesPosition':function(){return _0x43c48e['particlesTextures']['currentParticlesPosition'];},'postProcessingPosition':function(){function _0x1e4876(_0x1b7052,_0x52dddc){return _0x2ea647(_0x1b7052,_0x52dddc-0x30);}function _0x209f5d(_0x5daebf,_0x563edd){return _0x2ea647(_0x563edd,_0x5daebf-0x12d);}return _0x43c48e[_0x1e4876(0x3cd,0x454)][_0x209f5d(0x59d,0x523)];},'postProcessingSpeed':function(){function _0x51d5bc(_0x5cd088,_0x52e19c){return _0x2ea647(_0x52e19c,_0x5cd088- -0x56d);}return _0x43c48e[_0x51d5bc(-0x149,-0x1d7)]['postProcessingSpeed'];},'colorTable':function(){return _0x39032f['textures']['colorTable'];},'aspect':function(){return _0x55c4ea['drawingBufferWidth']/_0x55c4ea['drawingBufferHeight'];},'pixelSize':function(){return _0x48c0e3['pixelSize'];},'lineWidth':function(){return _0x5e2ba5['lineWidth'];},'particleHeight':function(){function _0x8f8b8c(_0xc5b3fc,_0x44130e){return _0x310ced(_0x44130e,_0xc5b3fc- -0x1ab);}return _0x5e2ba5[_0x8f8b8c(-0x4a,-0x59)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x340e3e),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x14b309),'rawRenderState':Util['createRawRenderState'](_0x1fa69c),'framebuffer':this[_0x2ea647(0x3ca,0x3d7)]['segments'],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x1f9237,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'segmentsColorTexture':function(){return _0x39032f['textures']['segmentsColor'];},'segmentsDepthTexture':function(){function _0x413eef(_0x2562b8,_0x5ea43a){return _0x310ced(_0x5ea43a,_0x2562b8-0x443);}return _0x39032f[_0x413eef(0x52f,0x4cf)]['segmentsDepth'];},'currentTrailsColor':function(){function _0x4468c0(_0xd0fd05,_0x2e9c6d){return _0x310ced(_0xd0fd05,_0x2e9c6d- -0x7d);}function _0x30be54(_0x39bcc8,_0x5b5a5f){return _0x310ced(_0x39bcc8,_0x5b5a5f-0x111);}return _0x39032f[_0x30be54(0x26b,0x273)]['currentTrails'][_0x4468c0(0x1c9,0x16d)](0x0);},'trailsDepthTexture':function(){function _0x5443f5(_0x59dd50,_0x51810a){return _0x2ea647(_0x51810a,_0x59dd50- -0x344);}function _0x14e30b(_0x5802b2,_0x452e68){return _0x2ea647(_0x5802b2,_0x452e68- -0x96);}return _0x39032f['framebuffers'][_0x14e30b(0x290,0x2e7)][_0x14e30b(0x35d,0x348)];},'fadeOpacity':function(){return _0x5e2ba5['fadeOpacity'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x4efcf3),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x4e178e),'rawRenderState':Util[_0x310ced(0x259,0x1cd)]({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4[_0x310ced(0xee,0xfc)][_0x2ea647(0x45e,0x3f9)]},'depthMask':!![]}),'framebuffer':this[_0x2ea647(0x356,0x3d7)][_0x2ea647(0x45e,0x449)],'autoClear':!![],'preExecute':function(){const _0x4dbfdb=_0x39032f[_0x4a2596(0x1,-0x13)][_0x4619d9(0x1ef,0x200)];_0x39032f['framebuffers'][_0x4619d9(0x1d0,0x200)]=_0x39032f['framebuffers'][_0x4619d9(0x2ab,0x2cc)],_0x39032f['framebuffers'][_0x4619d9(0x2a0,0x2cc)]=_0x4dbfdb;function _0x4a2596(_0x36a364,_0xc5c633){return _0x310ced(_0x36a364,_0xc5c633- -0x175);}function _0x4619d9(_0x490fa8,_0x397dab){return _0x310ced(_0x490fa8,_0x397dab-0xf8);}_0x39032f['primitives']['trails'][_0x4a2596(-0xc3,-0x56)][_0x4619d9(0x297,0x20c)]=_0x39032f['framebuffers']['nextTrails'],_0x39032f['primitives'][_0x4a2596(-0x3,0x43)]['clearCommand']['framebuffer']=_0x39032f['framebuffers'][_0x4a2596(-0x23,0x5f)];}}),'screen':new CustomPrimitive({'commandType':_0x310ced(0x168,0x14b),'attributeLocations':_0x4e2050,'geometry':Util[_0x2ea647(0x41c,0x451)](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){function _0xd29025(_0x3eb70d,_0x45e8ac){return _0x310ced(_0x3eb70d,_0x45e8ac- -0x2c9);}return _0x39032f['framebuffers'][_0xd29025(-0x16e,-0xf5)]['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0xa85af6(_0x5efdc8,_0x3c6944){return _0x2ea647(_0x3c6944,_0x5efdc8- -0x1c);}function _0x2fb244(_0x316ef5,_0x252ca3){return _0x310ced(_0x316ef5,_0x252ca3- -0x2d0);}return _0x39032f[_0xa85af6(0x3bb,0x37c)][_0xa85af6(0x42d,0x433)]['depthTexture'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x14b9eb),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0xc5df6b),'rawRenderState':Util[_0x310ced(0x191,0x1cd)]({'viewport':undefined,'depthTest':_0x13adb6,'depthMask':!![],'blending':_0x3f71e4}),'framebuffer':undefined})};}}var getWind_frag=_0x2b542d(0x222,0x19e),updateSpeed_frag='uniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0auniform\x20sampler2D\x20particlesWind;\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20speedFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec3\x20percent\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20\x20\x20float\x20normalization\x20=\x20length(percent);\x0a\x0a\x20\x20\x20\x20return\x20normalization;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20//\x20vec3\x20currentSpeed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20texture(particlesWind,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20vec4(speedFactor\x20*\x20pixelSize\x20*\x20windVector,\x20calculateWindNorm(windVector));\x0a\x20\x20\x20\x20out_FragColor\x20=\x20nextSpeed;\x0a}\x0a',updatePosition_frag=_0x1f69cd(0xc4,0x45),postProcessingPosition_frag='uniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0auniform\x20float\x20dropRate;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0auniform\x20float\x20dropRateBump;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898,\x2078.233,\x204375.85453);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0,\x201.0);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0);\x0a\x20\x20\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20lev);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20\x20\x20return\x20particle.y\x20<\x20-90.0\x20||\x20particle.y\x20>\x2090.0;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20nextSpeed.a;\x0a\x0a\x20\x20\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20\x20\x20if\x20(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(randomParticle,\x201.0);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a\x20\x20\x20\x20}\x0a}\x0a',postProcessingSpeed_frag=_0x1f69cd(-0x29,-0x1e);const Cesium$3=mars3d__namespace[_0x2b542d(0x28e,0x202)];class ParticlesComputing{constructor(_0x3629c0,_0x5aef3a,_0x4f8bab,_0x20e1da){function _0x294547(_0x34fb08,_0x5c428c){return _0x2b542d(_0x5c428c- -0x84,_0x34fb08);}this['data']=_0x5aef3a,this['createWindTextures'](_0x3629c0,_0x5aef3a),this[_0x294547(0x255,0x1f4)](_0x3629c0,_0x4f8bab,_0x20e1da),this['createComputingPrimitives'](_0x5aef3a,_0x4f8bab,_0x20e1da);}['createWindTextures'](_0x531a6a,_0x5ed1b0){function _0x585da2(_0x3070f4,_0x1b3a6f){return _0x1f69cd(_0x3070f4,_0x1b3a6f- -0x2a);}const _0x5e9e0d={'context':_0x531a6a,'width':_0x5ed1b0[_0x406ea0(-0x109,-0xcf)][_0x406ea0(-0x88,-0x58)],'height':_0x5ed1b0['dimensions']['lat']*(_0x5ed1b0['dimensions'][_0x585da2(0xcc,0x40)]||0x1),'pixelFormat':Cesium$3['PixelFormat']['LUMINANCE'],'pixelDatatype':Cesium$3['PixelDatatype']['FLOAT'],'flipY':![],'sampler':new Cesium$3[(_0x585da2(-0x1c,-0xa0))]({'minificationFilter':Cesium$3[_0x406ea0(-0x10c,-0x7f)][_0x585da2(-0x3d,-0x5d)],'magnificationFilter':Cesium$3['TextureMagnificationFilter']['NEAREST']})};function _0x406ea0(_0x2f4dd4,_0x3e7af1){return _0x1f69cd(_0x2f4dd4,_0x3e7af1- -0x6f);}this['windTextures']={'U':Util['createTexture'](_0x5e9e0d,_0x5ed1b0['U']['array']),'V':Util['createTexture'](_0x5e9e0d,_0x5ed1b0['V']['array'])};}[_0x1f69cd(-0xc2,-0x35)](_0x1ce998,_0x34d2bb,_0xabc798){const _0xf3a690={'context':_0x1ce998,'width':_0x34d2bb['particlesTextureSize'],'height':_0x34d2bb['particlesTextureSize'],'pixelFormat':Cesium$3[_0x313cca(-0x193,-0x17e)]['RGBA'],'pixelDatatype':Cesium$3[_0x313cca(-0x1aa,-0x18d)]['FLOAT'],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3['TextureMinificationFilter'][_0x313cca(-0x220,-0x1ba)],'magnificationFilter':Cesium$3[_0x313cca(-0x200,-0x1e0)][_0x69fb04(-0x173,-0x1d7)]})},_0x2e60de=this[_0x69fb04(-0x10c,-0xa2)](_0x34d2bb['maxParticles'],_0xabc798);function _0x69fb04(_0x57a6c6,_0x23ea04){return _0x1f69cd(_0x23ea04,_0x57a6c6- -0x140);}const _0x36c5c3=new Float32Array(0x4*_0x34d2bb['maxParticles'])['fill'](0x0);function _0x313cca(_0x233491,_0x3815be){return _0x2b542d(_0x3815be- -0x434,_0x233491);}this['particlesTextures']={'particlesWind':Util['createTexture'](_0xf3a690),'currentParticlesPosition':Util[_0x313cca(-0x14b,-0x166)](_0xf3a690,_0x2e60de),'nextParticlesPosition':Util[_0x313cca(-0x11a,-0x166)](_0xf3a690,_0x2e60de),'currentParticlesSpeed':Util['createTexture'](_0xf3a690,_0x36c5c3),'nextParticlesSpeed':Util[_0x313cca(-0xea,-0x166)](_0xf3a690,_0x36c5c3),'postProcessingPosition':Util[_0x313cca(-0x1bf,-0x166)](_0xf3a690,_0x2e60de),'postProcessingSpeed':Util['createTexture'](_0xf3a690,_0x36c5c3)};}['randomizeParticles'](_0x2a5281,_0x409cef){const _0x14d9fa=new Float32Array(0x4*_0x2a5281);function _0x410cba(_0x789d8e,_0x50cd10){return _0x1f69cd(_0x50cd10,_0x789d8e- -0xa4);}function _0x46fb39(_0x54e38a,_0x5afd5d){return _0x2b542d(_0x54e38a-0x50,_0x5afd5d);}for(let _0x2e58ca=0x0;_0x2e58ca<_0x2a5281;_0x2e58ca++){_0x14d9fa[0x4*_0x2e58ca]=Cesium$3[_0x46fb39(0x31d,0x3a7)]['randomBetween'](_0x409cef['lonRange']['x'],_0x409cef['lonRange']['y']),_0x14d9fa[0x4*_0x2e58ca+0x1]=Cesium$3['Math'][_0x410cba(-0x97,-0x73)](_0x409cef['latRange']['x'],_0x409cef['latRange']['y']),_0x14d9fa[0x4*_0x2e58ca+0x2]=Cesium$3[_0x410cba(-0x84,-0x2f)][_0x46fb39(0x30a,0x2c7)](this['data'][_0x46fb39(0x367,0x317)]['min'],this[_0x410cba(-0x77,0x17)]['lev'][_0x46fb39(0x2d2,0x2a9)]),_0x14d9fa[0x4*_0x2e58ca+0x3]=0x0;}return _0x14d9fa;}[_0x1f69cd(0x7d,0x70)](){function _0x590d04(_0x222e45,_0x3519d8){return _0x2b542d(_0x222e45- -0x2b2,_0x3519d8);}function _0x4ee7ab(_0x126783,_0x9ea591){return _0x2b542d(_0x9ea591- -0x31e,_0x126783);}Object[_0x590d04(-0x75,-0x85)](this[_0x590d04(0x1a,0x3c)])['forEach'](_0x2b6e48=>{function _0x4007b3(_0x27277f,_0x546986){return _0x4ee7ab(_0x546986,_0x27277f-0x526);}this[_0x4007b3(0x4d4,0x519)][_0x2b6e48]['destroy']();});}['createComputingPrimitives'](_0x3677d7,_0x13633c,_0x10bb02){const _0x42e89e=new Cesium$3['Cartesian3'](_0x3677d7['dimensions'][_0x28830c(0x20e,0x207)],_0x3677d7[_0x1f055b(0x244,0x230)][_0x28830c(0x1b3,0x1d5)],_0x3677d7[_0x28830c(0x197,0x1a4)][_0x28830c(0x261,0x242)]),_0x3b4fd5=new Cesium$3[(_0x1f055b(0x301,0x356))](_0x3677d7['lon'][_0x1f055b(0x20a,0x246)],_0x3677d7['lat']['min'],_0x3677d7['lev'][_0x1f055b(0x20a,0x254)]),_0x511e70=new Cesium$3[(_0x28830c(0x254,0x228))](_0x3677d7['lon'][_0x1f055b(0x279,0x308)],_0x3677d7[_0x1f055b(0x260,0x240)][_0x28830c(0x1cc,0x17e)],_0x3677d7['lev']['max']),_0x128b30=new Cesium$3['Cartesian3']((_0x511e70['x']-_0x3b4fd5['x'])/(_0x42e89e['x']-0x1),(_0x511e70['y']-_0x3b4fd5['y'])/(_0x42e89e['y']-0x1),_0x42e89e['z']>0x1?(_0x511e70['z']-_0x3b4fd5['z'])/(_0x42e89e['z']-0x1):0x1),_0x515e51=new Cesium$3[(_0x1f055b(0x221,0x2aa))](_0x3677d7['U'][_0x28830c(0x15d,0x12d)],_0x3677d7['U']['max']),_0x112d98=new Cesium$3[(_0x28830c(0x174,0x1fa))](_0x3677d7['V']['min'],_0x3677d7['V']['max']),_0x545071=this,_0x150897={};function _0x1f055b(_0x1b67c1,_0x576f4f){return _0x1f69cd(_0x576f4f,_0x1b67c1-0x2a4);}_0x150897['U']=function(){return _0x545071['windTextures']['U'];},_0x150897['V']=function(){function _0x34a7e3(_0xa8effe,_0x5837ec){return _0x28830c(_0xa8effe- -0x339,_0x5837ec);}return _0x545071[_0x34a7e3(-0x1bb,-0x19f)]['V'];},_0x150897['currentParticlesPosition']=function(){function _0x416830(_0x4406cf,_0x427e65){return _0x28830c(_0x4406cf- -0x5b,_0x427e65);}return _0x545071[_0x416830(0x1bb,0x172)]['currentParticlesPosition'];},_0x150897['dimension']=function(){return _0x42e89e;},_0x150897[_0x28830c(0x256,0x1d1)]=function(){return _0x3b4fd5;},_0x150897['maximum']=function(){return _0x511e70;},_0x150897['interval']=function(){return _0x128b30;};const _0x5ccd0b={};_0x5ccd0b[_0x28830c(0x24c,0x2c7)]=[getWind_frag];const _0x147443={};_0x147443['sources']=[updateSpeed_frag];const _0x1184fc={};function _0x28830c(_0x448b86,_0x1286ac){return _0x1f69cd(_0x1286ac,_0x448b86-0x1f7);}_0x1184fc[_0x28830c(0x24c,0x21d)]=[updatePosition_frag];const _0x231cd5={};_0x231cd5['sources']=[postProcessingPosition_frag];const _0x32c9fc={};_0x32c9fc['sources']=[postProcessingSpeed_frag],this[_0x28830c(0x25a,0x267)]={'getWind':new CustomPrimitive({'commandType':_0x1f055b(0x252,0x1cc),'uniformMap':_0x150897,'fragmentShaderSource':new Cesium$3[(_0x1f055b(0x2f8,0x2f3))](_0x5ccd0b),'outputTexture':this[_0x28830c(0x216,0x205)][_0x28830c(0x1e2,0x175)],'preExecute':function(){function _0x1c42e1(_0x43479d,_0x1e569a){return _0x1f055b(_0x43479d- -0x25,_0x1e569a);}function _0x1d1999(_0x47927a,_0x2ab9c6){return _0x1f055b(_0x47927a- -0x15,_0x2ab9c6);}_0x545071[_0x1c42e1(0x2e2,0x2af)][_0x1c42e1(0x238,0x297)]['commandToExecute']['outputTexture']=_0x545071[_0x1d1999(0x2ae,0x33d)][_0x1c42e1(0x26a,0x2ae)];}}),'updateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesSpeed':function(){function _0x458874(_0x272203,_0x925c54){return _0x28830c(_0x925c54-0x308,_0x272203);}return _0x545071['particlesTextures'][_0x458874(0x52f,0x517)];},'particlesWind':function(){return _0x545071['particlesTextures']['particlesWind'];},'uSpeedRange':function(){return _0x515e51;},'vSpeedRange':function(){return _0x112d98;},'pixelSize':function(){return _0x10bb02['pixelSize'];},'speedFactor':function(){function _0x4748cc(_0x54a5e7,_0x490d47){return _0x1f055b(_0x490d47-0x242,_0x54a5e7);}return _0x13633c[_0x4748cc(0x4c3,0x440)];}},'fragmentShaderSource':new Cesium$3[(_0x28830c(0x24b,0x2a6))](_0x147443),'outputTexture':this[_0x28830c(0x216,0x1e8)]['nextParticlesSpeed'],'preExecute':function(){function _0x9b50b1(_0x4d9c08,_0x3c6b80){return _0x28830c(_0x3c6b80-0x60,_0x4d9c08);}function _0x1144fc(_0x5aea82,_0x73d115){return _0x28830c(_0x5aea82- -0x307,_0x73d115);}const _0x2b34e3=_0x545071['particlesTextures']['currentParticlesSpeed'];_0x545071['particlesTextures'][_0x9b50b1(0x1f4,0x26f)]=_0x545071['particlesTextures']['postProcessingSpeed'],_0x545071[_0x9b50b1(0x2e6,0x276)]['postProcessingSpeed']=_0x2b34e3,_0x545071[_0x1144fc(-0xad,-0x12f)]['updateSpeed'][_0x1144fc(-0x181,-0x1f2)]['outputTexture']=_0x545071['particlesTextures']['nextParticlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':_0x28830c(0x1a5,0x1f0),'uniformMap':{'currentParticlesPosition':function(){function _0x4bc5d9(_0x57480a,_0x57378a){return _0x28830c(_0x57378a- -0x24f,_0x57480a);}return _0x545071[_0x4bc5d9(0x4,-0x39)]['currentParticlesPosition'];},'currentParticlesSpeed':function(){return _0x545071['particlesTextures']['currentParticlesSpeed'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x1184fc),'outputTexture':this[_0x1f055b(0x2c3,0x296)]['nextParticlesPosition'],'preExecute':function(){const _0x14a1bb=_0x545071['particlesTextures'][_0x272301(0x204,0x259)];function _0x332702(_0x388977,_0x200636){return _0x1f055b(_0x200636-0x2e1,_0x388977);}function _0x272301(_0x2717ee,_0x53bfa8){return _0x28830c(_0x53bfa8-0x12,_0x2717ee);}_0x545071['particlesTextures']['currentParticlesPosition']=_0x545071['particlesTextures'][_0x272301(0x2a9,0x274)],_0x545071[_0x272301(0x1e5,0x228)]['postProcessingPosition']=_0x14a1bb,_0x545071['primitives'][_0x272301(0x1dd,0x19a)][_0x272301(0x1af,0x198)][_0x332702(0x4fb,0x578)]=_0x545071['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':function(){function _0x55a539(_0x3a3bee,_0x330ce8){return _0x1f055b(_0x330ce8-0x3e,_0x3a3bee);}return _0x545071[_0x55a539(0x343,0x301)]['nextParticlesPosition'];},'nextParticlesSpeed':function(){function _0x2a0675(_0x49a87d,_0x386bc7){return _0x1f055b(_0x49a87d- -0x1fe,_0x386bc7);}function _0x81d6da(_0x1cc854,_0x4cd888){return _0x1f055b(_0x4cd888-0x2a5,_0x1cc854);}return _0x545071[_0x2a0675(0xc5,0x145)][_0x81d6da(0x5d5,0x563)];},'lonRange':function(){return _0x10bb02['lonRange'];},'latRange':function(){return _0x10bb02['latRange'];},'randomCoefficient':function(){function _0xd1665f(_0x2507d5,_0x4f8d2a){return _0x28830c(_0x2507d5- -0x365,_0x4f8d2a);}const _0x3a28ac=Math[_0xd1665f(-0x217,-0x19d)]();return _0x3a28ac;},'dropRate':function(){function _0x1896a9(_0x285093,_0x3362f1){return _0x1f055b(_0x285093- -0x41e,_0x3362f1);}return _0x13633c[_0x1896a9(-0x211,-0x25d)];},'dropRateBump':function(){return _0x13633c['dropRateBump'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x231cd5),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':function(){function _0x50734e(_0x12b4cb,_0x60de29){return _0x1f055b(_0x60de29-0x301,_0x12b4cb);}function _0x3c190f(_0x1fbc6e,_0x2fe961){return _0x1f055b(_0x1fbc6e-0xf1,_0x2fe961);}_0x545071['primitives'][_0x3c190f(0x400,0x3f5)][_0x50734e(0x4f9,0x534)][_0x50734e(0x60e,0x598)]=_0x545071['particlesTextures'][_0x3c190f(0x400,0x3eb)];}}),'postProcessingSpeed':new CustomPrimitive({'commandType':_0x1f055b(0x252,0x2bf),'uniformMap':{'postProcessingPosition':function(){function _0x26b26b(_0x2d2e93,_0x47e27d){return _0x1f055b(_0x47e27d- -0x149,_0x2d2e93);}function _0x1f7ec6(_0x363f3d,_0xb48d55){return _0x28830c(_0xb48d55-0x23e,_0x363f3d);}return _0x545071[_0x1f7ec6(0x4ce,0x454)][_0x1f7ec6(0x514,0x4a0)];},'nextParticlesSpeed':function(){return _0x545071['particlesTextures']['nextParticlesSpeed'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x32c9fc),'outputTexture':this['particlesTextures']['postProcessingSpeed'],'preExecute':function(){function _0x42fb6b(_0x5a1365,_0xd641f4){return _0x28830c(_0x5a1365-0x25e,_0xd641f4);}function _0x439852(_0x4866cc,_0x2f4b34){return _0x28830c(_0x2f4b34-0x3e5,_0x4866cc);}_0x545071[_0x439852(0x681,0x63f)]['postProcessingSpeed'][_0x42fb6b(0x3e4,0x45f)]['outputTexture']=_0x545071['particlesTextures']['postProcessingSpeed'];}})};}}const Cesium$2=mars3d__namespace['Cesium'];class ParticleSystem{constructor(_0xa3013d,_0x547a9e,_0x322f32,_0x45e85b){function _0x1b2733(_0x6e965a,_0x4f662d){return _0x1f69cd(_0x4f662d,_0x6e965a-0x47d);}this['context']=_0xa3013d,_0x547a9e={..._0x547a9e};_0x547a9e[_0x13aa42(0x5da,0x5de)]&&_0x547a9e[_0x13aa42(0x57e,0x508)]&&(_0x547a9e['dimensions']={},_0x547a9e['dimensions']['lon']=_0x547a9e['cols'],_0x547a9e[_0x1b2733(0x41d,0x4a6)]['lat']=_0x547a9e[_0x13aa42(0x5a4,0x5b8)],_0x547a9e[_0x1b2733(0x41d,0x40a)]['lev']=_0x547a9e['lev']||0x1,_0x547a9e['lon']={},_0x547a9e['lon']['min']=_0x547a9e[_0x13aa42(0x5c5,0x571)],_0x547a9e['lon']['max']=_0x547a9e['xmax'],_0x547a9e['lat']={},_0x547a9e[_0x1b2733(0x439,0x3ac)]['min']=_0x547a9e['ymin'],_0x547a9e[_0x13aa42(0x597,0x538)][_0x13aa42(0x4c9,0x551)]=_0x547a9e[_0x13aa42(0x59b,0x513)],_0x547a9e[_0x13aa42(0x671,0x5e6)]={},_0x547a9e[_0x13aa42(0x5e4,0x5e6)]['min']=_0x547a9e['levmin']??0x1,_0x547a9e[_0x1b2733(0x4e7,0x568)]['max']=_0x547a9e['levmax']??0x1,_0x547a9e['U']={},_0x547a9e['U']['array']=new Float32Array(_0x547a9e[_0x1b2733(0x4df,0x55a)]),_0x547a9e['U']['min']=_0x547a9e['umin']??Math[_0x1b2733(0x3e3,0x3f5)](..._0x547a9e['udata']),_0x547a9e['U']['max']=_0x547a9e['umax']??Math['max'](..._0x547a9e['udata']),_0x547a9e['V']={},_0x547a9e['V'][_0x13aa42(0x587,0x51e)]=new Float32Array(_0x547a9e['vdata']),_0x547a9e['V'][_0x1b2733(0x3e3,0x3bc)]=_0x547a9e[_0x1b2733(0x4ac,0x494)]??Math[_0x13aa42(0x533,0x4e2)](..._0x547a9e['vdata']),_0x547a9e['V']['max']=_0x547a9e['vmax']??Math['max'](..._0x547a9e['vdata']));function _0x13aa42(_0x583c8c,_0x5d4cb3){return _0x1f69cd(_0x583c8c,_0x5d4cb3-0x57c);}this['data']=_0x547a9e,this[_0x13aa42(0x5c9,0x540)]=_0x322f32,this['viewerParameters']=_0x45e85b,this[_0x13aa42(0x55b,0x5bb)]=new ParticlesComputing(this['context'],this['data'],this['options'],this[_0x1b2733(0x453,0x45d)]),this[_0x1b2733(0x45b,0x3d4)]=new ParticlesRendering(this['context'],this['data'],this['options'],this['viewerParameters'],this['particlesComputing']);}['canvasResize'](_0xdb8173){this['particlesComputing']['destroyParticlesTextures']();function _0x288012(_0x259267,_0x418b28){return _0x1f69cd(_0x418b28,_0x259267-0x3cd);}function _0x2808e7(_0x23e0da,_0xa15d5f){return _0x1f69cd(_0x23e0da,_0xa15d5f-0x2b0);}Object['keys'](this['particlesComputing'][_0x2808e7(0x203,0x237)])['forEach'](_0x4e1af0=>{function _0x278b1b(_0x52b65c,_0x5da2d5){return _0x2808e7(_0x5da2d5,_0x52b65c- -0x7f);}function _0x36ac9(_0x3b4d39,_0x1d6067){return _0x2808e7(_0x3b4d39,_0x1d6067-0x14);}this['particlesComputing'][_0x278b1b(0x1b8,0x1c2)][_0x4e1af0][_0x278b1b(0x1a3,0x136)]();}),this['particlesRendering']['textures'][_0x2808e7(0x271,0x260)][_0x2808e7(0x1bb,0x222)](),Object['keys'](this['particlesRendering'][_0x288012(0x39f,0x3e4)])[_0x2808e7(0x2a6,0x315)](_0x36861c=>{function _0x3b685b(_0x293f7c,_0x43c677){return _0x288012(_0x293f7c- -0xb2,_0x43c677);}function _0x2e4cdb(_0x2a8052,_0x3a3dec){return _0x2808e7(_0x3a3dec,_0x2a8052-0x208);}this[_0x2e4cdb(0x496,0x506)]['framebuffers'][_0x36861c][_0x3b685b(0x28d,0x2ad)]();}),this['context']=_0xdb8173,this['particlesComputing']=new ParticlesComputing(this['context'],this['data'],this['options'],this[_0x288012(0x3a3,0x3e0)]),this['particlesRendering']=new ParticlesRendering(this[_0x2808e7(0x315,0x290)],this['data'],this['options'],this['viewerParameters'],this['particlesComputing']);}[_0x2b542d(0x245,0x1b7)](){const _0x1eda03=new Cesium$2['ClearCommand']({'color':new Cesium$2[(_0x621667(0x365,0x3c2))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x621667(0x31c,0x2b9)]['OPAQUE']});function _0x621667(_0x5b2d5e,_0xb93d36){return _0x1f69cd(_0x5b2d5e,_0xb93d36-0x354);}function _0x263ef3(_0x43100b,_0x5f204d){return _0x1f69cd(_0x5f204d,_0x43100b- -0x138);}Object[_0x263ef3(-0x1a8,-0x1fb)](this['particlesRendering'][_0x263ef3(-0x166,-0xfe)])['forEach'](_0x96b91=>{function _0x16118(_0x320161,_0x188b2b){return _0x263ef3(_0x320161-0x735,_0x188b2b);}_0x1eda03['framebuffer']=this['particlesRendering']['framebuffers'][_0x96b91],_0x1eda03[_0x16118(0x653,0x618)](this['context']);});}[_0x2b542d(0x229,0x218)](_0x4aef6d){function _0x37a9a7(_0x30001d,_0x511bfc){return _0x2b542d(_0x30001d- -0x2a3,_0x511bfc);}function _0x2ae819(_0x553527,_0x3c07d3){return _0x1f69cd(_0x553527,_0x3c07d3-0x108);}this[_0x2ae819(0x17,0xa0)](),this[_0x37a9a7(0x49,0x5a)]['destroyParticlesTextures'](),this['particlesComputing']['createParticlesTextures'](this['context'],this[_0x2ae819(0xc0,0xcc)],this[_0x37a9a7(-0x20,0x4f)]);if(_0x4aef6d){var _0x2d3ba4;const _0x4e77c3=this['particlesRendering']['createSegmentsGeometry'](this[_0x37a9a7(-0x32,-0x76)]);this['particlesRendering']['primitives'][_0x37a9a7(0x1e,-0x3b)]['geometry']=_0x4e77c3;const _0x343b8e=Cesium$2['VertexArray']['fromGeometry']({'context':this['context'],'geometry':_0x4e77c3,'attributeLocations':this['particlesRendering'][_0x2ae819(0x1e7,0x16b)]['segments']['attributeLocations'],'bufferUsage':Cesium$2['BufferUsage'][_0x2ae819(0x6d,0xf6)]});(_0x2d3ba4=this['particlesRendering'][_0x37a9a7(0x6d,0x3a)])!==null&&_0x2d3ba4!==void 0x0&&(_0x2d3ba4=_0x2d3ba4['segments'])!==null&&_0x2d3ba4!==void 0x0&&_0x2d3ba4['commandToExecute']&&(this[_0x37a9a7(-0x18,-0x10)]['primitives']['segments']['commandToExecute'][_0x37a9a7(-0x4,-0x55)]=_0x343b8e);}}['setOptions'](_0x51d362){let _0xf2564a=![];this['options'][_0x3ece97(0x5bc,0x608)]!==_0x51d362[_0x55bbf1(0x3e8,0x43f)]&&(_0xf2564a=!![]);function _0x55bbf1(_0x320a22,_0x2fbebd){return _0x2b542d(_0x2fbebd-0x166,_0x320a22);}Object[_0x55bbf1(0x375,0x3a3)](_0x51d362)[_0x55bbf1(0x447,0x478)](_0xd8bd29=>{this['options'][_0xd8bd29]=_0x51d362[_0xd8bd29];});function _0x3ece97(_0x4a997a,_0x6e7f26){return _0x2b542d(_0x6e7f26-0x32f,_0x4a997a);}this['refreshParticles'](_0xf2564a);}['applyViewerParameters'](_0x47bd38){function _0x461183(_0x46c3ee,_0x2bcb8a){return _0x2b542d(_0x46c3ee-0x15b,_0x2bcb8a);}Object['keys'](_0x47bd38)[_0x461183(0x46d,0x4c3)](_0x6997a9=>{function _0xf61be8(_0x336ccb,_0x1a97a9){return _0x461183(_0x336ccb- -0x3d6,_0x1a97a9);}this[_0xf61be8(0x8,0x3)][_0x6997a9]=_0x47bd38[_0x6997a9];}),this['refreshParticles'](![]);}[_0x2b542d(0x21f,0x20f)](){clearTimeout(this[_0x410199(-0xf0,-0xc6)]);function _0x410199(_0x355123,_0x30631c){return _0x2b542d(_0x355123- -0x3d4,_0x30631c);}function _0x306e0b(_0x4f9b02,_0x13b44d){return _0x2b542d(_0x4f9b02-0x34c,_0x13b44d);}this[_0x306e0b(0x638,0x5c1)][_0x306e0b(0x669,0x658)](),Object['keys'](this[_0x410199(-0xe8,-0xd1)][_0x410199(-0x1a0,-0x21a)])[_0x306e0b(0x65e,0x624)](_0x19f9c2=>{function _0x52414a(_0x170f64,_0x4c088e){return _0x410199(_0x170f64-0x134,_0x4c088e);}function _0xbbc7ae(_0x179558,_0x22cc54){return _0x410199(_0x179558-0x4ff,_0x22cc54);}this[_0xbbc7ae(0x417,0x497)][_0x52414a(-0x6c,-0x4b)][_0x19f9c2][_0xbbc7ae(0x34a,0x2fd)]();}),this[_0x306e0b(0x5d7,0x58a)]['textures']['colorTable'][_0x410199(-0x1b5,-0x212)](),Object[_0x306e0b(0x589,0x5f4)](this['particlesRendering']['framebuffers'])['forEach'](_0x444bc6=>{function _0x2c8503(_0x5831b1,_0x4de35d){return _0x410199(_0x5831b1- -0x1,_0x4de35d);}this[_0x2c8503(-0x14a,-0x1d8)]['framebuffers'][_0x444bc6]['destroy']();});for(const _0x5cc03f in this){delete this[_0x5cc03f];}}}const Cesium$1=mars3d__namespace[_0x2b542d(0x28e,0x226)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'];function _0x2b542d(_0x50ea75,_0x43ccd9){return _0xe776(_0x50ea75-0x8c,_0x43ccd9);}const _0x1f34f0={};_0x1f34f0[_0x1f69cd(-0x2f,-0x48)]=0x1000,_0x1f34f0['fixedHeight']=0x0,_0x1f34f0['fadeOpacity']=0.996,_0x1f34f0[_0x2b542d(0x216,0x1ff)]=0.003,_0x1f34f0['dropRateBump']=0.01,_0x1f34f0[_0x1f69cd(-0xaa,-0xa6)]=0.5,_0x1f34f0['lineWidth']=0x2,_0x1f34f0['colors']=[_0x1f69cd(0x48,-0x8)];const DEF_OPTIONS=_0x1f34f0;function _0xe776(_0x265cba,_0x134511){const _0x36e12b=_0x36e1();return _0xe776=function(_0xe77662,_0x369659){_0xe77662=_0xe77662-0x173;let _0x2be82b=_0x36e12b[_0xe77662];return _0x2be82b;},_0xe776(_0x265cba,_0x134511);}class WindLayer extends BaseLayer$1{constructor(_0xd511af={}){_0xd511af={...DEF_OPTIONS,..._0xd511af},super(_0xd511af),this['_setOptionsHook'](_0xd511af);}get['layer'](){return this['primitives'];}get[_0x1f69cd(-0xe,0x2d)](){function _0x1bca1e(_0x6548e2,_0x1c85f2){return _0x1f69cd(_0x1c85f2,_0x6548e2-0x49e);}return this[_0x1bca1e(0x44a,0x42e)];}set['data'](_0x210fc3){function _0x341fa4(_0x5b97f5,_0x1dcbf0){return _0x1f69cd(_0x5b97f5,_0x1dcbf0- -0x1b9);}this[_0x341fa4(-0x149,-0x1a0)](_0x210fc3);}get[_0x2b542d(0x292,0x253)](){function _0x1d6c30(_0x1ba12c,_0x171f23){return _0x2b542d(_0x171f23-0x3c,_0x1ba12c);}function _0x4c19b6(_0x10cc35,_0x2293a6){return _0x1f69cd(_0x10cc35,_0x2293a6-0x505);}return this[_0x1d6c30(0x26a,0x2ad)][_0x4c19b6(0x53c,0x4ea)];}set[_0x2b542d(0x292,0x2da)](_0x120db0){this[_0x4a6c32(0x54e,0x537)][_0x4a6c32(0x56f,0x55d)]=_0x120db0;function _0x214a92(_0x4ba8f1,_0x5a3ad2){return _0x2b542d(_0x4ba8f1- -0x3c7,_0x5a3ad2);}function _0x4a6c32(_0x23c751,_0x1181f5){return _0x1f69cd(_0x1181f5,_0x23c751-0x58a);}if(this['particleSystem']){const _0x36bcea={};_0x36bcea[_0x4a6c32(0x56f,0x550)]=_0x120db0,this['particleSystem'][_0x214a92(-0x186,-0x17a)](_0x36bcea);}this['resize']();}[_0x2b542d(0x281,0x1f1)](){}[_0x2b542d(0x2ff,0x37a)](){this['scene']=this['_map']['scene'],this['camera']=this['_map']['camera'],this[_0x256c76(0x37e,0x35e)]=new Cesium$1['PrimitiveCollection'](),this['_map']['scene'][_0x256c76(0x37e,0x350)]['add'](this[_0x256c76(0x37e,0x3fa)]),this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](),'latRange':new Cesium$1[(_0x2bd244(-0xf3,-0x134))](),'pixelSize':0x0},this[_0x2bd244(-0xe7,-0x11c)]=new Cesium$1['BoundingSphere'](Cesium$1['Cartesian3']['ZERO'],0.99*0x615299),this['updateViewerParameters'](),window['addEventListener']('resize',this['resize'][_0x256c76(0x35e,0x393)](this),![]);function _0x2bd244(_0x45b823,_0x5620a0){return _0x1f69cd(_0x45b823,_0x5620a0- -0xb1);}this['mouse_down']=![];function _0x256c76(_0x2802a5,_0x415040){return _0x2b542d(_0x2802a5-0x6e,_0x415040);}this[_0x2bd244(-0x1dc,-0x151)]=![],this[_0x256c76(0x2c3,0x2a1)]['on'](mars3d__namespace['EventType']['wheel'],this[_0x256c76(0x292,0x31b)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this[_0x256c76(0x2c3,0x2b4)]['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x2bd244(-0xef,-0xb8)],this),this[_0x256c76(0x2c3,0x2ea)]['on'](mars3d__namespace['EventType'][_0x256c76(0x34e,0x31f)],this[_0x256c76(0x283,0x218)],this),this['_data']&&this['setData'](this['_data']);}['_removedHook'](){window[_0x4787ea(0x4f6,0x4f7)](_0x4787ea(0x531,0x559),this['resize']),this[_0x3d102b(0x3c0,0x3e5)][_0x3d102b(0x388,0x3b9)](mars3d__namespace[_0x4787ea(0x580,0x58d)]['preRender'],this[_0x4787ea(0x5df,0x5cb)],this);function _0x3d102b(_0x3562f0,_0x55971f){return _0x1f69cd(_0x55971f,_0x3562f0-0x418);}this['_map']['off'](mars3d__namespace[_0x3d102b(0x401,0x47c)]['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace[_0x4787ea(0x568,0x58d)]['mouseDown'],this[_0x4787ea(0x4f0,0x4fd)],this),this['_map'][_0x3d102b(0x388,0x33b)](mars3d__namespace['EventType']['mouseUp'],this[_0x4787ea(0x5a7,0x59d)],this);function _0x4787ea(_0x1911ac,_0x3c8703){return _0x1f69cd(_0x1911ac,_0x3c8703-0x5a4);}this[_0x4787ea(0x528,0x54c)]['off'](mars3d__namespace[_0x4787ea(0x557,0x58d)][_0x4787ea(0x5d1,0x5d7)],this['_onMouseMoveEvent'],this),this['primitives']['removeAll'](),this['_map'][_0x3d102b(0x38c,0x3d2)]['primitives'][_0x4787ea(0x638,0x5ee)](this['primitives']);}['resize'](){if(!this[_0x518d5b(0x3a5,0x3fa)]||!this['particleSystem'])return;this['primitives']['show']=![];function _0x518d5b(_0x45ac02,_0x51f217){return _0x2b542d(_0x45ac02-0x130,_0x51f217);}function _0x5ad2f6(_0xa26fdf,_0x2fb825){return _0x1f69cd(_0x2fb825,_0xa26fdf-0x19c);}this['primitives'][_0x518d5b(0x34e,0x3d1)](),this[_0x5ad2f6(0x144,0x155)]['once'](mars3d__namespace['EventType']['preRender'],this[_0x518d5b(0x404,0x413)],this);}[_0x1f69cd(-0x4d,0x27)](_0x2a30fa){this['particleSystem']['canvasResize'](this[_0x50dd29(0x200,0x1e6)]['context']),this['addPrimitives']();function _0x50dd29(_0x20d050,_0x5945ca){return _0x2b542d(_0x20d050- -0x21,_0x5945ca);}function _0x54c454(_0x5e680b,_0x16afbd){return _0x2b542d(_0x16afbd-0x62,_0x5e680b);}this[_0x50dd29(0x2ef,0x2ed)][_0x54c454(0x261,0x2d7)]=!![];}[_0x1f69cd(-0x4d,-0x89)](_0x5eda50){function _0x3d1af0(_0x919ff7,_0x301505){return _0x1f69cd(_0x919ff7,_0x301505-0x2b4);}clearTimeout(this['refreshTimer']);if(!this['show']||!this[_0x22d9ad(-0x108,-0x92)])return;this['primitives']['show']=![];function _0x22d9ad(_0x33ec4b,_0xf4228d){return _0x2b542d(_0x33ec4b- -0x328,_0xf4228d);}this[_0x3d1af0(0x31c,0x30d)]=setTimeout(()=>{function _0x503172(_0x4c3349,_0x164f97){return _0x3d1af0(_0x164f97,_0x4c3349- -0x2c7);}if(!this[_0x503172(-0x4b,-0x58)])return;this['redraw']();},0xc8);}['_onMouseDownEvent'](_0x44c0be){function _0x4e1d83(_0xbbbc87,_0x570705){return _0x1f69cd(_0xbbbc87,_0x570705-0x3cd);}this[_0x4e1d83(0x3da,0x3b9)]=!![];}[_0x1f69cd(-0x57,-0x98)](_0x1d9419){if(!this['show']||!this['particleSystem'])return;this['mouse_down']&&(this['primitives']['show']=![],this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x3423ed){function _0x91f91f(_0x54c217,_0x4eca32){return _0x2b542d(_0x54c217- -0xd5,_0x4eca32);}function _0x289487(_0x289b83,_0x25eebc){return _0x1f69cd(_0x25eebc,_0x289b83- -0x1c4);}if(!this['show']||!this['particleSystem'])return;this['mouse_down']&&this[_0x91f91f(0x138,0x12f)]&&this[_0x289487(-0x246,-0x204)](),this['primitives']['show']=!![],this[_0x91f91f(0x1c4,0x184)]=![],this['mouse_move']=![];}['redraw'](){if(!this[_0x555921(0x625,0x597)]||!this[_0x5de6fe(0x3c2,0x40f)])return;function _0x5de6fe(_0x287c87,_0x3eae97){return _0x1f69cd(_0x3eae97,_0x287c87-0x3fa);}this['updateViewerParameters']();function _0x555921(_0x2bd476,_0x2aaf58){return _0x1f69cd(_0x2bd476,_0x2aaf58-0x5ef);}this['particleSystem'][_0x555921(0x5df,0x601)](this['viewerParameters']),this[_0x555921(0x67c,0x652)]['show']=!![];}[_0x2b542d(0x2c6,0x284)](_0x5b9fb0){this[_0x3b167e(0x282,0x215)]=_0x5b9fb0;function _0x3b167e(_0xf5c085,_0x4962eb){return _0x2b542d(_0x4962eb- -0x44,_0xf5c085);}this['particleSystem']&&this[_0x18053e(0x145,0x1af)][_0x3b167e(0x152,0x1db)]();function _0x18053e(_0x5b81f1,_0x51cf9a){return _0x1f69cd(_0x5b81f1,_0x51cf9a-0x23c);}this['particleSystem']=new ParticleSystem(this[_0x18053e(0x123,0x1b0)]['context'],_0x5b9fb0,this[_0x18053e(0x1b9,0x1d8)](),this['viewerParameters']),this['addPrimitives']();}[_0x1f69cd(0x59,0xc)](_0x37ceb2,_0x582cef){function _0x427477(_0x240ba5,_0x549503){return _0x1f69cd(_0x240ba5,_0x549503-0xe8);}function _0x1aef03(_0x5dd97f,_0x571c4a){return _0x1f69cd(_0x571c4a,_0x5dd97f-0x1bc);}if(_0x37ceb2)for(const _0x5522e6 in _0x37ceb2){this[_0x5522e6]=_0x37ceb2[_0x5522e6];}this[_0x1aef03(0x12f,0x107)]&&this[_0x427477(0x20,0x5b)]['setOptions'](this[_0x1aef03(0x158,0x1bc)]());}[_0x1f69cd(-0x8c,-0x64)](){const _0x39ca6b=Math['ceil'](Math[_0x13e353(0xc7,0x73)](this['particlesNumber']));this['particlesNumber']=_0x39ca6b*_0x39ca6b;const _0x2ff353={};_0x2ff353['particlesTextureSize']=_0x39ca6b,_0x2ff353[_0x9150b4(0x45a,0x44d)]=this['particlesNumber'];function _0x9150b4(_0x24302c,_0x3b225d){return _0x1f69cd(_0x24302c,_0x3b225d-0x421);}_0x2ff353['particleHeight']=this['fixedHeight'],_0x2ff353['fadeOpacity']=this[_0x9150b4(0x303,0x384)],_0x2ff353[_0x13e353(-0x9e,-0xe)]=this['dropRate'];function _0x13e353(_0x327b1f,_0x447ec1){return _0x1f69cd(_0x327b1f,_0x447ec1-0x89);}return _0x2ff353[_0x13e353(-0x69,-0xa)]=this['dropRateBump'],_0x2ff353['speedFactor']=this[_0x13e353(0x15,-0x1d)],_0x2ff353[_0x13e353(0x82,0xd7)]=this['lineWidth'],_0x2ff353[_0x13e353(0xfd,0x6e)]=this['colors'],_0x2ff353;}['addPrimitives'](){this['primitives'][_0x1d3c17(0x3c3,0x3ca)](this['particleSystem'][_0x1d3c17(0x3c1,0x443)]['primitives']['getWind']);function _0x120daa(_0x2caf3e,_0x28002a){return _0x1f69cd(_0x2caf3e,_0x28002a-0x59e);}this[_0x1d3c17(0x3e5,0x3c8)]['add'](this['particleSystem']['particlesComputing'][_0x1d3c17(0x3e5,0x360)][_0x120daa(0x5be,0x602)]),this['primitives'][_0x120daa(0x641,0x5df)](this['particleSystem']['particlesComputing']['primitives']['updatePosition']),this['primitives'][_0x120daa(0x5bd,0x5df)](this[_0x1d3c17(0x2f5,0x2fb)]['particlesComputing'][_0x120daa(0x586,0x601)][_0x120daa(0x5a6,0x609)]);function _0x1d3c17(_0x9b85f5,_0x16ed63){return _0x1f69cd(_0x16ed63,_0x9b85f5-0x382);}this['primitives'][_0x1d3c17(0x3c3,0x353)](this[_0x120daa(0x49d,0x511)]['particlesComputing']['primitives']['postProcessingSpeed']),this['primitives'][_0x120daa(0x65b,0x5df)](this[_0x120daa(0x4e0,0x511)][_0x120daa(0x52d,0x57c)][_0x120daa(0x61a,0x601)]['segments']),this[_0x120daa(0x5b4,0x601)][_0x120daa(0x5d5,0x5df)](this[_0x120daa(0x4fd,0x511)][_0x1d3c17(0x360,0x39f)]['primitives'][_0x120daa(0x565,0x5c6)]),this[_0x1d3c17(0x3e5,0x469)]['add'](this[_0x1d3c17(0x2f5,0x382)]['particlesRendering'][_0x120daa(0x63a,0x601)]['screen']);}['updateViewerParameters'](){let _0x21c6ec=this[_0x267ed7(0x7f,0xf4)][_0x2139db(0xbf,0x48)](this[_0x2139db(0x34,0x91)][_0x267ed7(0xf6,0x9c)]['ellipsoid']);if(!_0x21c6ec){const _0x1ee81e=this['_map'][_0x267ed7(0x1f,0x23)]();_0x21c6ec=Cesium$1[_0x2139db(0x4e,-0x14)]['fromDegrees'](_0x1ee81e['xmin'],_0x1ee81e[_0x267ed7(0xd0,0x5b)],_0x1ee81e[_0x267ed7(0x63,0x34)],_0x1ee81e['ymax']);}function _0x2139db(_0x57903d,_0xeb7636){return _0x1f69cd(_0xeb7636,_0x57903d-0xc0);}const _0x34da56=Util['viewRectangleToLonLatRange'](_0x21c6ec);function _0x267ed7(_0x440fba,_0x2425ae){return _0x2b542d(_0x440fba- -0x224,_0x2425ae);}this['viewerParameters'][_0x267ed7(-0x21,-0x12)]['x']=_0x34da56['lon']['min'],this[_0x267ed7(0x5f,0x4f)]['lonRange']['y']=_0x34da56[_0x2139db(0xd7,0xf4)][_0x2139db(0x95,0xdf)],this['viewerParameters']['latRange']['x']=_0x34da56[_0x267ed7(0x45,0x72)]['min'],this[_0x267ed7(0x5f,0xdd)][_0x2139db(0xee,0x9a)]['y']=_0x34da56['lat'][_0x267ed7(0x5e,0x7f)];const _0x3aa54e=this[_0x2139db(0xb6,0xad)]['getPixelSize'](this['globeBoundingSphere'],this[_0x2139db(0x34,0x6c)]['drawingBufferWidth'],this['scene'][_0x2139db(0xc7,0xa3)]);_0x3aa54e>0x0&&(this[_0x2139db(0x96,0x3b)][_0x2139db(0xdc,0x141)]=_0x3aa54e);}}function _0x36e1(){const _0x367a1d=['_calcUV','currentTrailsColor','TextureMagnificationFilter','_map','ColorRamp','geometry','postMessage','_data','GeometryAttributes','Compute','preExecute','colorTable','getRandomLatLng','SCENE3D','in\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(position,\x201.0);\x0a}\x0a','getContext','resize','clearCommand','fromDegrees','particlesNumber','getWind','10lbefss','Draw','lat','_bilinearInterpolation','style','arrayBufferView','globalAlpha','492aRQtjA','pointerEvents','mouseUp','options','strokeStyle','beginPath','canvasWidth','show','getUVByPoint','color','createParticlesTextures','36jcRImr','NEAREST','pointer-events','createFramebuffer','tlat','particleHeight','framebuffers','13887ocBDgq','_mountedHook','max','viewerParameters','bindEvent','vertexShaderSource','depthTexture','xmax','in\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20normal\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20postProcessingSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0aout\x20float\x20speedNormalization;\x0a\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20\x20\x20float\x20a\x20=\x206378137.0;\x20//\x20Semi-major\x20axis\x0a\x20\x20\x20\x20float\x20b\x20=\x206356752.3142;\x20//\x20Semi-minor\x20axis\x0a\x20\x20\x20\x20float\x20e2\x20=\x206.69437999014e-3;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x0a\x20\x20\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calcProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0,\x20360.0)\x20-\x20180.0;\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0);\x0a\x20\x20\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calcOffset(vec4\x20currentProjectedCoordinate,\x20vec4\x20nextProjectedCoordinate,\x20float\x20offsetSign)\x20{\x0a\x20\x20\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0);\x0a\x20\x20\x20\x20vec2\x20currentXY\x20=\x20(currentProjectedCoordinate.xy\x20/\x20currentProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x20\x20\x20\x20vec2\x20nextXY\x20=\x20(nextProjectedCoordinate.xy\x20/\x20nextProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0;\x0a\x20\x20\x20\x20vec2\x20direction\x20=\x20normalize(nextXY\x20-\x20currentXY);\x0a\x20\x20\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0,\x200.0);\x0a\x20\x20\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20\x20\x20vec4\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex);\x0a\x0a\x20\x20\x20\x20vec4\x20currentProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20vec4\x20nextProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(nextPosition.w\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(nextPosition.xyz);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20float\x20pointToUse\x20=\x20normal.x;\x20//\x20-1\x20is\x20currentProjectedCoordinate\x20and\x20+1\x20is\x20nextProjectedCoordinate\x0a\x20\x20\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20pixelSize\x20*\x20calcOffset(currentProjectedCoordinate,\x20nextProjectedCoordinate,\x20offsetSign);\x0a\x20\x20\x20\x20if\x20(pointToUse\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20currentProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20nextProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20speedNormalization\x20=\x20texture(postProcessingSpeed,\x20particleIndex).a;\x0a}\x0a','particles','mod','particlesRendering','CanvasWindLayer','context','Cesium','uniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20randomParticle\x20=\x20texture(postProcessingPosition,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20vec4\x20particleSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x0a\x20\x20\x20\x20if\x20(randomParticle.a\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20particleSpeed;\x0a\x20\x20\x20\x20}\x0a}\x0a','Framebuffer','RGB','colors','unbindEvent','update','green','EventType','sqrt','particlesWind','mouse_down','type','STATIC_DRAW','depthTest','TextureMinificationFilter','createRenderingPrimitives','vertexArray','outputTexture','ALWAYS','xmin','camera','clientHeight','rgb(206,255,255)','_onMouseUpEvent','PixelDatatype','SceneTransforms','pow','worker','age','computeViewRectangle','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','getU','clientWidth','isDestroyed','abs','layer','south','drawingBufferHeight','commandType','PixelFormat','_createCanvas','TWO_PI','_setOptionsHook','randomBetween','position','now','pixelDatatype','tlng','applyViewerParameters','fromGeometry','segments','WindUtil','length','lon','currentParticlesSpeed','setData','nextParticlesSpeed','lng','pixelSize','14539059cmkYwg','persists','particlesTextures','Math','createTexture','defined','visibility','DrawCommand','GeometryAttribute','uniform\x20sampler2D\x20colorTable;\x0a\x0ain\x20float\x20speedNormalization;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20out_FragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x200.0));\x0a}\x0a','_onMap_preRenderEvent','trails','uniformMap','init','reverseY','maxParticles','data','latRange','vmin','requestAnimationFrame','152313hoMaNN','PI_OVER_THREE','mouseMove','randomizeParticles','moveTo','canvas','canrefresh','ComponentDatatype','_updateIng','uniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20trailsColor;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x0a}\x0a','mode','rows','createRawRenderState','_canrefresh','particlesComputing','_speedRate','add','maxAge','bind','nextTrails','uniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20\x20\x20float\x20term1\x20=\x20111132.92;\x0a\x20\x20\x20\x20float\x20term2\x20=\x20559.82\x20*\x20cos(2.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term3\x20=\x201.175\x20*\x20cos(4.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term4\x20=\x200.0023\x20*\x20cos(6.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20\x20\x20float\x20term5\x20=\x20111412.84\x20*\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20term6\x20=\x2093.5\x20*\x20cos(3.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term7\x20=\x200.118\x20*\x20cos(5.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avoid\x20updatePosition(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20windVectorInLonLatLev;\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20speed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20updatePosition(lonLatLev,\x20speed);\x0a}\x0a','getParticles','ymin','drawingBufferWidth','currentTrailsDepth','remove','Geometry','getFullscreenQuad','Texture','lineWidth','CanvasWindField','currentParticlesPosition','clear','_addedHook','494952qfFDbu','ShaderSource','sources','execute','fragmentShaderSource','LayerUtil','refreshTimer','getColorTexture','hidden','attributeLocations','Cartesian3','canvasContext','minimum','RenderState','_maxAge','udata','primitives','updateSpeed','forEach','willReadFrequently','container','rawRenderState','all','lev','postProcessingPosition','EllipsoidalOccluder','globe','Color','_colorRamp','destroyParticlesTextures','getDefaultRenderState','blending','removeEventListener','speed','createRenderingTextures','lonRange','random','stroke','_onMouseDownEvent','speedFactor','784397OLAOCO','textures','lighter','mouseHidden','nextTrailsColor','mouse_move','toDegrees','lineTo','fadeOpacity','DISABLE_GL_POSITION_LOG_DEPTH','Pass','min','createSegmentsGeometry','_onMouseMoveEvent','dropRate','push','pixelFormat','DepthFunction','dropRateBump','windField','BufferUsage','off','removeAll','destroy','particleSystem','scene','//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x,\x20360.0);\x0a\x20\x20\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20-90.0,\x2090.0);\x0a\x0a\x20\x20\x20\x20vec3\x20index3D\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20index3D.z\x20=\x20(lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z;\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205],\x20width\x20=\x203,\x20height\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x203\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x202\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWind(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20\x20\x20float\x20result\x20=\x20texture(windTexture,\x20normalizedIndex2D).r;\x0a\x20\x20\x20\x20return\x20result;\x0a}\x0a\x0aconst\x20mat4\x20kernelMatrix\x20=\x20mat4(\x0a\x20\x20\x20\x200.0,\x20-1.0,\x202.0,\x20-1.0,\x20//\x20first\x20column\x0a\x20\x20\x20\x202.0,\x200.0,\x20-5.0,\x203.0,\x20//\x20second\x20column\x0a\x20\x20\x20\x200.0,\x201.0,\x204.0,\x20-3.0,\x20//\x20third\x20column\x0a\x20\x20\x20\x200.0,\x200.0,\x20-1.0,\x201.0\x20//\x20fourth\x20column\x0a);\x0afloat\x20oneDimensionInterpolation(float\x20t,\x20float\x20p0,\x20float\x20p1,\x20float\x20p2,\x20float\x20p3)\x20{\x0a\x20\x20\x20\x20vec4\x20tVec4\x20=\x20vec4(1.0,\x20t,\x20t\x20*\x20t,\x20t\x20*\x20t\x20*\x20t);\x0a\x20\x20\x20\x20tVec4\x20=\x20tVec4\x20/\x202.0;\x0a\x20\x20\x20\x20vec4\x20pVec4\x20=\x20vec4(p0,\x20p1,\x20p2,\x20p3);\x0a\x20\x20\x20\x20return\x20dot((tVec4\x20*\x20kernelMatrix),\x20pVec4);\x0a}\x0a\x0afloat\x20calculateB(sampler2D\x20windTexture,\x20float\x20t,\x20float\x20lon,\x20float\x20lat,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20float\x20lon0\x20=\x20floor(lon)\x20-\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon1\x20=\x20floor(lon);\x0a\x20\x20\x20\x20float\x20lon2\x20=\x20floor(lon)\x20+\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon3\x20=\x20floor(lon)\x20+\x202.0\x20*\x20interval.x;\x0a\x0a\x20\x20\x20\x20float\x20p0\x20=\x20getWind(windTexture,\x20vec3(lon0,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p1\x20=\x20getWind(windTexture,\x20vec3(lon1,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p2\x20=\x20getWind(windTexture,\x20vec3(lon2,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p3\x20=\x20getWind(windTexture,\x20vec3(lon3,\x20lat,\x20lev));\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(t,\x20p0,\x20p1,\x20p2,\x20p3);\x0a}\x0a\x0afloat\x20interpolateOneTexture(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20\x20\x20float\x20lat0\x20=\x20floor(lat)\x20-\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat1\x20=\x20floor(lat);\x0a\x20\x20\x20\x20float\x20lat2\x20=\x20floor(lat)\x20+\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat3\x20=\x20floor(lat)\x20+\x202.0\x20*\x20interval.y;\x0a\x0a\x20\x20\x20\x20vec2\x20coefficient\x20=\x20lonLatLev.xy\x20-\x20floor(lonLatLev.xy);\x0a\x20\x20\x20\x20float\x20b0\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat0,\x20lev);\x0a\x20\x20\x20\x20float\x20b1\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat1,\x20lev);\x0a\x20\x20\x20\x20float\x20b2\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat2,\x20lev);\x0a\x20\x20\x20\x20float\x20b3\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat3,\x20lev);\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(coefficient.y,\x20b0,\x20b1,\x20b2,\x20b3);\x0a}\x0a\x0avec3\x20bicubic(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\x0a\x20\x20\x20\x20float\x20u\x20=\x20interpolateOneTexture(U,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20v\x20=\x20interpolateOneTexture(V,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20bicubic(lonLatLev);\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(windVector,\x200.0);\x0a}\x0a','_updateIng2','_onMapWhellEvent','currentTrails','onmessage','fromCache','mouseDown','refreshParticles','Cartesian2','redraw','getSpeed','1519120mFldgm','defineProperty','toGridXY','viewport','framebuffer','width','none','windTextures','speedRate','cols','Sampler','SceneMode','vdata','segmentsDepth','Rectangle','commandToExecute','keys','updatePosition','grid','shaderProgram','setOptions','globeBoundingSphere','getExtent','ymax','clearFramebuffers','ShaderProgram','particlesTextureSize','height','getOptions','toRadians','windData','register','dimensions','createCommand','array','5629095YPYjVF','primitiveType'];_0x36e1=function(){return _0x367a1d;};return _0x36e1();}mars3d__namespace['LayerUtil'][_0x2b542d(0x24c,0x1e3)]('wind',WindLayer),mars3d__namespace[_0x1f69cd(0x23,0x5)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x2081ba(_0x58dc63,_0x191192){return _0x1f69cd(_0x191192,_0x58dc63-0x581);}function _0x266bb4(_0x2098f9,_0x768933){return _0x2b542d(_0x2098f9-0x317,_0x768933);}this[_0x2081ba(0x59c,0x5a9)]=null,this['lat']=null,this['tlng']=null,this['tlat']=null,this[_0x2081ba(0x57f,0x4fe)]=null,this['speed']=null;}['destroy'](){for(const _0x56d373 in this){delete this[_0x56d373];}}}class CanvasWindField{constructor(_0x49ded6){function _0x2bfae1(_0x3bfb49,_0x3b1b25){return _0x2b542d(_0x3b1b25- -0x3ae,_0x3bfb49);}this[_0x2bfae1(-0x115,-0x16d)](_0x49ded6);}get[_0x1f69cd(-0x23,-0x78)](){return this['_speedRate'];}set['speedRate'](_0x23f695){function _0x17d1bf(_0x298fa8,_0x1c4d1d){return _0x2b542d(_0x1c4d1d-0x267,_0x298fa8);}this['_speedRate']=(0x64-(_0x23f695>0x63?0x63:_0x23f695))*0x64;function _0x156422(_0x1c690e,_0x50da63){return _0x1f69cd(_0x1c690e,_0x50da63-0x5f);}this['_calc_speedRate']=[(this[_0x17d1bf(0x4c9,0x4ee)]-this['xmin'])/this['_speedRate'],(this['ymax']-this['ymin'])/this[_0x17d1bf(0x553,0x554)]];}get[_0x1f69cd(0x16,0x42)](){return this['_maxAge'];}set[_0x1f69cd(-0x29,0x42)](_0x496204){function _0x33a87e(_0x34047e,_0x5943d4){return _0x2b542d(_0x34047e- -0x2a8,_0x5943d4);}this[_0x33a87e(0x66,0xf5)]=_0x496204;}[_0x2b542d(0x241,0x2cb)](_0x4c3363){this['options']=_0x4c3363,this['maxAge']=_0x4c3363['maxAge']||0x78,this['speedRate']=_0x4c3363['speedRate']||0x32,this['particles']=[];const _0x24977d=_0x4c3363[_0x11860a(-0x169,-0x14f)]||0x1000;function _0x11860a(_0x4e9445,_0x4eb047){return _0x2b542d(_0x4eb047- -0x3b4,_0x4e9445);}for(let _0xd15a1c=0x0;_0xd15a1c<_0x24977d;_0xd15a1c++){const _0x3078a1=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x3078a1);}}['setDate'](_0x5e6d83){this['rows']=_0x5e6d83[_0x1fca9e(0x1a4,0x130)],this['cols']=_0x5e6d83['cols'],this[_0x1fca9e(0x144,0xe9)]=_0x5e6d83[_0x1fca9e(0x72,0xe9)];function _0x12a3e3(_0x41ff42,_0x2b7aed){return _0x2b542d(_0x41ff42- -0x1bd,_0x2b7aed);}this['xmax']=_0x5e6d83['xmax'];function _0x1fca9e(_0x6aef7f,_0x35ee47){return _0x1f69cd(_0x6aef7f,_0x35ee47-0xf4);}this[_0x1fca9e(0xae,0x13b)]=_0x5e6d83['ymin'],this[_0x1fca9e(0x82,0x8b)]=_0x5e6d83['ymax'],this[_0x1fca9e(0x5c,0x86)]=[];const _0x1a0d0e=_0x5e6d83[_0x12a3e3(0x152,0x1d6)],_0x44f08a=_0x5e6d83['vdata'];let _0x24f546=![];_0x1a0d0e['length']===this[_0x12a3e3(0x12c,0x160)]&&_0x1a0d0e[0x0]['length']===this[_0x12a3e3(0x79,0x3b)]&&(_0x24f546=!![]);let _0x35571f=0x0,_0x101004=null,_0x8794c4=null;for(let _0x919747=0x0;_0x919747<this[_0x1fca9e(0x183,0x130)];_0x919747++){_0x101004=[];for(let _0x4299d0=0x0;_0x4299d0<this['cols'];_0x4299d0++,_0x35571f++){_0x24f546?_0x8794c4=this['_calcUV'](_0x1a0d0e[_0x919747][_0x4299d0],_0x44f08a[_0x919747][_0x4299d0]):_0x8794c4=this['_calcUV'](_0x1a0d0e[_0x35571f],_0x44f08a[_0x35571f]),_0x101004['push'](_0x8794c4);}this[_0x1fca9e(0x7f,0x86)]['push'](_0x101004);}this[_0x12a3e3(0xb4,0x130)]['reverseY']&&this['grid']['reverse']();}[_0x1f69cd(0x15,0x51)](){delete this[_0x494aa9(-0x67,-0x53)],delete this['cols'],delete this[_0x494aa9(-0xae,-0x35)],delete this[_0x494aa9(-0xc9,-0xb8)];function _0x494aa9(_0x3b50b8,_0x2fc848){return _0x1f69cd(_0x2fc848,_0x3b50b8- -0xa3);}delete this['ymin'],delete this['ymax'];function _0x3a52ba(_0x224999,_0x36ce99){return _0x1f69cd(_0x36ce99,_0x224999- -0x13e);}delete this['grid'],delete this[_0x3a52ba(-0x162,-0x128)];}['toGridXY'](_0x3137a8,_0x4e03bc){const _0x2c84ad=(_0x3137a8-this['xmin'])/(this['xmax']-this['xmin'])*(this[_0x1f4e53(-0x13a,-0x141)]-0x1),_0x353e66=(this['ymax']-_0x4e03bc)/(this[_0x1f4e53(-0x12c,-0x169)]-this['ymin'])*(this[_0x17d758(0x53a,0x5ca)]-0x1);function _0x17d758(_0x71b293,_0x41eec1){return _0x1f69cd(_0x71b293,_0x41eec1-0x58e);}function _0x1f4e53(_0x40db97,_0x20da55){return _0x1f69cd(_0x20da55,_0x40db97- -0xc3);}return[_0x2c84ad,_0x353e66];}['getUVByXY'](_0x28bd34,_0x12b734){if(_0x28bd34<0x0||_0x28bd34>=this['cols']||_0x12b734>=this['rows'])return[0x0,0x0,0x0];const _0x27a1bd=Math['floor'](_0x28bd34),_0x3c2b88=Math['floor'](_0x12b734);if(_0x27a1bd===_0x28bd34&&_0x3c2b88===_0x12b734)return this[_0x5cc4f6(0x10,-0x14)][_0x12b734][_0x28bd34];function _0x321c24(_0x4cbed6,_0x167426){return _0x1f69cd(_0x4cbed6,_0x167426-0x2b6);}const _0x5d6125=_0x27a1bd+0x1,_0x65f236=_0x3c2b88+0x1,_0x19935e=this['getUVByXY'](_0x27a1bd,_0x3c2b88),_0x404c78=this['getUVByXY'](_0x5d6125,_0x3c2b88);function _0x5cc4f6(_0x3fa579,_0x56951c){return _0x2b542d(_0x56951c- -0x253,_0x3fa579);}const _0x401506=this['getUVByXY'](_0x27a1bd,_0x65f236),_0x1b5611=this['getUVByXY'](_0x5d6125,_0x65f236);let _0x4625e0=null;try{_0x4625e0=this[_0x321c24(0x1f4,0x273)](_0x28bd34-_0x27a1bd,_0x12b734-_0x3c2b88,_0x19935e,_0x404c78,_0x401506,_0x1b5611);}catch(_0x1620f6){console['log'](_0x28bd34,_0x12b734);}return _0x4625e0;}[_0x1f69cd(0x47,-0x43)](_0x7d8119,_0x441b62,_0x14d317,_0x31879c,_0xd638e3,_0xe8bf9f){const _0x4cbf3e=0x1-_0x7d8119,_0x30c420=0x1-_0x441b62,_0x189b0f=_0x4cbf3e*_0x30c420,_0x81b29c=_0x7d8119*_0x30c420,_0x5a082a=_0x4cbf3e*_0x441b62;function _0x2817f5(_0x3bc954,_0x34dfd8){return _0x1f69cd(_0x3bc954,_0x34dfd8-0x580);}const _0x2d8f15=_0x7d8119*_0x441b62,_0x10b170=_0x14d317[0x0]*_0x189b0f+_0x31879c[0x0]*_0x81b29c+_0xd638e3[0x0]*_0x5a082a+_0xe8bf9f[0x0]*_0x2d8f15,_0x8e8276=_0x14d317[0x1]*_0x189b0f+_0x31879c[0x1]*_0x81b29c+_0xd638e3[0x1]*_0x5a082a+_0xe8bf9f[0x1]*_0x2d8f15;return this[_0x2817f5(0x4e6,0x525)](_0x10b170,_0x8e8276);}['_calcUV'](_0x5e8773,_0x194e99){return[+_0x5e8773,+_0x194e99,Math['sqrt'](_0x5e8773*_0x5e8773+_0x194e99*_0x194e99)];}[_0x1f69cd(-0x9d,-0x37)](_0x3aabad,_0x2a6edf){if(!this['isInExtent'](_0x3aabad,_0x2a6edf))return null;function _0x2060bd(_0x45a166,_0x563e35){return _0x2b542d(_0x563e35-0x2a1,_0x45a166);}const _0x50b20c=this[_0x2060bd(0x4ef,0x4d0)](_0x3aabad,_0x2a6edf),_0xafde79=this['getUVByXY'](_0x50b20c[0x0],_0x50b20c[0x1]);return _0xafde79;}['isInExtent'](_0x205f6f,_0x151fbb){function _0x5f4757(_0x5bd383,_0x33bcb8){return _0x2b542d(_0x33bcb8- -0x3a6,_0x5bd383);}function _0xc54169(_0x1e7367,_0x53c968){return _0x2b542d(_0x1e7367-0x5a,_0x53c968);}return _0x205f6f>=this[_0xc54169(0x2fc,0x2cd)]&&_0x205f6f<=this[_0xc54169(0x2e1,0x2ca)]&&_0x151fbb>=this['ymin']&&_0x151fbb<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x33afd5=fRandomByfloat(this['xmin'],this[_0x57bc44(0x2ab,0x336)]),_0x35b10b=fRandomByfloat(this['ymin'],this['ymax']),_0x57b530={};function _0x2f1d68(_0x1b0a93,_0x540f80){return _0x2b542d(_0x540f80- -0x15a,_0x1b0a93);}_0x57b530[_0x57bc44(0x28d,0x21b)]=_0x35b10b,_0x57b530['lng']=_0x33afd5;function _0x57bc44(_0x3ae51,_0x19a6d7){return _0x2b542d(_0x3ae51-0x24,_0x19a6d7);}return _0x57b530;}[_0x1f69cd(-0x20,0x46)](){function _0x1976fb(_0x3f1ef8,_0x1e7065){return _0x2b542d(_0x1e7065- -0x1f6,_0x3f1ef8);}let _0x44140b,_0x1bfa70,_0x18aa69;function _0x3d252f(_0x136e2a,_0x2e678e){return _0x2b542d(_0x136e2a-0x1eb,_0x2e678e);}for(let _0xd8264e=0x0,_0x358106=this['particles']['length'];_0xd8264e<_0x358106;_0xd8264e++){let _0x58641f=this['particles'][_0xd8264e];_0x58641f[_0x1976fb(0x5b,0xb5)]<=0x0&&(_0x58641f=this['_randomParticle'](_0x58641f));if(_0x58641f['age']>0x0){const _0x3c5a02=_0x58641f['tlng'],_0x3b001b=_0x58641f[_0x1976fb(0x7f,0x87)];_0x18aa69=this['getUVByPoint'](_0x3c5a02,_0x3b001b),_0x18aa69?(_0x44140b=_0x3c5a02+this['_calc_speedRate'][0x0]*_0x18aa69[0x0],_0x1bfa70=_0x3b001b+this['_calc_speedRate'][0x1]*_0x18aa69[0x1],_0x58641f['lng']=_0x3c5a02,_0x58641f[_0x1976fb(0xe3,0x73)]=_0x3b001b,_0x58641f[_0x3d252f(0x4a9,0x4b5)]=_0x44140b,_0x58641f['tlat']=_0x1bfa70,_0x58641f['speed']=_0x18aa69[0x2],_0x58641f['age']--):_0x58641f['age']=0x0;}}return this[_0x3d252f(0x474,0x4ef)];}['_randomParticle'](_0x2c7abf){let _0x587c8a,_0x57184c;for(let _0x45430c=0x0;_0x45430c<0x1e;_0x45430c++){_0x587c8a=this[_0x3f2262(0x4ed,0x4cb)](),_0x57184c=this['getUVByPoint'](_0x587c8a['lng'],_0x587c8a['lat']);if(_0x57184c&&_0x57184c[0x2]>0x0)break;}function _0xfd72af(_0x1b40ec,_0x5cea54){return _0x2b542d(_0x5cea54-0xbe,_0x1b40ec);}function _0x3f2262(_0xe70b79,_0x2808de){return _0x2b542d(_0xe70b79-0x28f,_0x2808de);}if(!_0x57184c)return _0x2c7abf;const _0x1239e4=_0x587c8a['lng']+this['_calc_speedRate'][0x0]*_0x57184c[0x0],_0x51a23b=_0x587c8a['lat']+this['_calc_speedRate'][0x1]*_0x57184c[0x1];return _0x2c7abf['lng']=_0x587c8a['lng'],_0x2c7abf[_0x3f2262(0x4f8,0x515)]=_0x587c8a['lat'],_0x2c7abf['tlng']=_0x1239e4,_0x2c7abf['tlat']=_0x51a23b,_0x2c7abf['age']=Math['round'](Math[_0x3f2262(0x493,0x4cf)]()*this['maxAge']),_0x2c7abf[_0x3f2262(0x490,0x4ec)]=_0x57184c[0x2],_0x2c7abf;}['destroy'](){for(const _0x3a454f in this){delete this[_0x3a454f];}}}function fRandomByfloat(_0xb92e2c,_0x54061e){function _0x31509a(_0x139da9,_0x22409a){return _0x2b542d(_0x139da9-0x293,_0x22409a);}return _0xb92e2c+Math[_0x31509a(0x497,0x51a)]()*(_0x54061e-_0xb92e2c);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x15eb29={}){function _0x3564b0(_0x5bc466,_0x41bfcb){return _0x1f69cd(_0x5bc466,_0x41bfcb-0x3c);}super(_0x15eb29);function _0x169feb(_0x30ae85,_0x5796c3){return _0x2b542d(_0x5796c3- -0x3b4,_0x30ae85);}this['_setOptionsHook'](_0x15eb29),this[_0x169feb(-0x14c,-0xd1)]=null,_0x15eb29[_0x169feb(-0x9e,-0x122)]&&_0x15eb29['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x169feb(-0xda,-0x15e))](_0x15eb29));}['_setOptionsHook'](_0x1bd00d,_0x233d79){this['frameTime']=0x3e8/(_0x1bd00d['frameRate']||0xa),this['_pointerEvents']=this[_0x16708a(0x10c,0x15a)]['pointerEvents']??![];function _0x433b9f(_0x34f3a7,_0x1863c1){return _0x1f69cd(_0x34f3a7,_0x1863c1-0x1be);}this['color']=_0x1bd00d[_0x433b9f(0x11d,0x188)]||'#ffffff',this[_0x433b9f(0x1be,0x20c)]=_0x1bd00d['lineWidth']||0x1,this['fixedHeight']=_0x1bd00d['fixedHeight']??0x0;function _0x16708a(_0x4f2175,_0x2a5308){return _0x1f69cd(_0x2a5308,_0x4f2175-0x148);}this['reverseY']=_0x1bd00d[_0x16708a(0x173,0x1f5)]??![],this['windField']&&this[_0x16708a(0xb6,0x113)]['setOptions'](_0x1bd00d);}get['layer'](){function _0x4b99ae(_0x5ee107,_0x1194ba){return _0x2b542d(_0x1194ba- -0xc6,_0x5ee107);}return this[_0x4b99ae(0x25c,0x21d)];}get[_0x2b542d(0x274,0x28f)](){function _0x224f9e(_0x11f27d,_0x2a26db){return _0x2b542d(_0x11f27d-0x15b,_0x2a26db);}function _0x223ff0(_0x55889c,_0x3c2ad3){return _0x1f69cd(_0x3c2ad3,_0x55889c-0x433);}return this[_0x223ff0(0x3db,0x413)]['scene'][_0x224f9e(0x43e,0x3c0)][_0x224f9e(0x40a,0x461)];}get['canvasHeight'](){function _0x26a35b(_0x3d68f4,_0x269f46){return _0x1f69cd(_0x269f46,_0x3d68f4-0x4af);}function _0xd24793(_0x1dbbd7,_0x1ba595){return _0x2b542d(_0x1dbbd7- -0xa5,_0x1ba595);}return this[_0x26a35b(0x457,0x440)][_0x26a35b(0x423,0x41c)][_0xd24793(0x23e,0x27c)]['clientHeight'];}get[_0x1f69cd(-0x9f,-0x3e)](){return this['_pointerEvents'];}set[_0x1f69cd(0x11,-0x3e)](_0x14bc2e){this['_pointerEvents']=_0x14bc2e;function _0x267fee(_0x5866fc,_0xdfdeca){return _0x2b542d(_0xdfdeca- -0x335,_0x5866fc);}if(!this['canvas'])return;function _0x51d089(_0x56b8fb,_0x157038){return _0x2b542d(_0x157038-0x192,_0x56b8fb);}_0x14bc2e?this[_0x51d089(0x44a,0x475)]['style']['pointer-events']=_0x51d089(0x4e9,0x4a8):this['canvas']['style'][_0x267fee(-0x48,-0xba)]='none';}get['particlesNumber'](){return this['options']['particlesNumber'];}set[_0x2b542d(0x265,0x2a5)](_0x41004e){function _0xbae0ac(_0x548545,_0x4ea9df){return _0x1f69cd(_0x548545,_0x4ea9df-0x586);}this['options']['particlesNumber']=_0x41004e;function _0x6f8533(_0x4578d4,_0x5a1c0f){return _0x2b542d(_0x5a1c0f- -0x322,_0x4578d4);}clearTimeout(this[_0x6f8533(-0xaf,-0x37)]),this[_0x6f8533(-0x77,-0x37)]=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0xd5ac60(_0x3e89fb,_0x2ab940){return _0x2b542d(_0x3e89fb- -0x3fe,_0x2ab940);}function _0x145ec7(_0x3e369e,_0xc79f){return _0x1f69cd(_0x3e369e,_0xc79f-0x5a2);}return this[_0x145ec7(0x4fd,0x566)][_0x145ec7(0x4cb,0x52a)];}set['speedRate'](_0x40f962){function _0x5a8657(_0x33b80e,_0x3930d0){return _0x2b542d(_0x33b80e-0x2ee,_0x3930d0);}this['options']['speedRate']=_0x40f962,this[_0x5a8657(0x509,0x511)]&&(this['windField']['speedRate']=_0x40f962);}get['maxAge'](){return this['options']['maxAge'];}set['maxAge'](_0x42a988){function _0x384fa6(_0xbefe06,_0x356fcf){return _0x2b542d(_0xbefe06- -0x460,_0x356fcf);}this[_0x384fa6(-0x1ef,-0x1de)]['maxAge']=_0x42a988;function _0x2c0a7d(_0x1a0391,_0x31e4f2){return _0x2b542d(_0x31e4f2- -0xe0,_0x1a0391);}this['windField']&&(this['windField'][_0x2c0a7d(0x225,0x20f)]=_0x42a988);}get[_0x2b542d(0x2da,0x2b1)](){return this['windData'];}set[_0x1f69cd(0x32,0x2d)](_0x130e7f){function _0x170ae0(_0x5f227d,_0x54c339){return _0x1f69cd(_0x5f227d,_0x54c339-0x334);}this[_0x170ae0(0x36a,0x34d)](_0x130e7f);}['_showHook'](_0x246ada){function _0x535848(_0x382baf,_0xe348b5){return _0x1f69cd(_0x382baf,_0xe348b5-0x18a);}function _0x280aa2(_0x48d2d2,_0xfb2458){return _0x1f69cd(_0xfb2458,_0x48d2d2-0x25f);}_0x246ada?this['_addedHook']():(this[_0x280aa2(0x1fd,0x207)]&&(this[_0x280aa2(0x223,0x1bf)]['data']=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x1fbefb(_0x587771,_0xeba2b6){return _0x1f69cd(_0x587771,_0xeba2b6-0x1c3);}function _0x3d561f(_0x4f3c85,_0x37fe30){return _0x1f69cd(_0x4f3c85,_0x37fe30-0x36d);}this[_0x1fbefb(0x1bb,0x187)][_0x1fbefb(0x208,0x1c0)]?this['initWorker']():this[_0x1fbefb(0xe8,0x131)]=new CanvasWindField(this[_0x1fbefb(0x16f,0x187)]);}['_addedHook'](){this[_0x35e312(0x426,0x483)]=this['_createCanvas']();const _0xf53cb5={};_0xf53cb5[_0x97626b(0x4e2,0x476)]=!![],this['canvasContext']=this['canvas'][_0x35e312(0x3a4,0x33c)]('2d',_0xf53cb5);function _0x97626b(_0x1b2c95,_0x752aa7){return _0x1f69cd(_0x752aa7,_0x1b2c95-0x47c);}function _0x35e312(_0xd546f7,_0x562c2f){return _0x2b542d(_0xd546f7-0x143,_0x562c2f);}this['bindEvent'](),this[_0x97626b(0x440,0x42c)][_0x97626b(0x4a9,0x456)]&&this['setData'](this[_0x35e312(0x3b4,0x443)][_0x35e312(0x41d,0x39d)]);}['_removedHook'](){function _0x194626(_0x13e303,_0x5ab581){return _0x1f69cd(_0x13e303,_0x5ab581-0xc);}function _0xc95b96(_0x18bffb,_0x34094b){return _0x1f69cd(_0x18bffb,_0x34094b-0x5ff);}this[_0x194626(0xb0,0x5d)](),this[_0xc95b96(0x665,0x5e5)](),this['canvas']&&(this[_0x194626(0x3e,-0x4c)][_0x194626(0x69,0x73)]['removeChild'](this[_0xc95b96(0x5c0,0x635)]),delete this['canvas']);}[_0x2b542d(0x2b7,0x321)](){const _0x351a9d=mars3d__namespace['DomUtil']['create'](_0x527c6a(0xd7,0xd1),'mars3d-canvasWind',this['_map'][_0x527c6a(0x108,0x134)]);function _0x2b2578(_0x58e98b,_0x385327){return _0x1f69cd(_0x58e98b,_0x385327-0x1ea);}_0x351a9d['style']['position']='absolute',_0x351a9d[_0x2b2578(0x1e6,0x1a8)]['top']='0px',_0x351a9d[_0x527c6a(0x5f,-0x16)]['left']='0px',_0x351a9d['style'][_0x527c6a(0x26,0x40)]=this[_0x2b2578(0x16e,0x192)][_0x527c6a(0x15,0x13)][_0x2b2578(0x1b6,0x220)]['clientWidth']+'px';function _0x527c6a(_0x23245f,_0x2452fc){return _0x1f69cd(_0x2452fc,_0x23245f-0xa1);}return _0x351a9d['style']['height']=this['_map'][_0x527c6a(0x15,0x85)]['canvas'][_0x527c6a(0x98,0x24)]+'px',_0x351a9d['style']['pointerEvents']=this['_pointerEvents']?'auto':_0x2b2578(0x18f,0x170),_0x351a9d['style']['zIndex']=this['options']['zIndex']??0x9,_0x351a9d[_0x2b2578(0x11e,0x16f)]=this['_map']['scene'][_0x527c6a(0xd7,0x147)][_0x527c6a(0xa3,0x32)],_0x351a9d['height']=this['_map']['scene']['canvas'][_0x2b2578(0x23c,0x1e1)],_0x351a9d;}['resize'](){function _0x18867e(_0xd5717e,_0x5aed85){return _0x1f69cd(_0x5aed85,_0xd5717e-0xf0);}function _0x6e19f7(_0x3244d2,_0x12cd53){return _0x2b542d(_0x3244d2-0x233,_0x12cd53);}this['canvas']&&(this['canvas']['style'][_0x18867e(0x75,0xca)]=this['_map']['scene']['canvas']['clientWidth']+'px',this[_0x6e19f7(0x516,0x492)]['style']['height']=this['_map']['scene'][_0x6e19f7(0x516,0x4c0)]['clientHeight']+'px',this[_0x6e19f7(0x516,0x59d)]['width']=this['_map'][_0x18867e(0x64,-0x15)][_0x18867e(0x126,0x15e)]['clientWidth'],this['canvas']['height']=this[_0x6e19f7(0x488,0x495)]['scene'][_0x6e19f7(0x516,0x48a)]['clientHeight']);}[_0x1f69cd(-0x2,-0x29)](){const _0x31aa7b=this;let _0x4aa439=Date[_0x5465f3(-0x39,0x46)]();(function _0x4cbb0e(){function _0x3ba5a3(_0x16b09a,_0x35358d){return _0x5465f3(_0x35358d,_0x16b09a-0x561);}function _0x56d7a9(_0x1d9cff,_0xf209fb){return _0x5465f3(_0xf209fb,_0x1d9cff-0x1e8);}_0x31aa7b['animateFrame']=window[_0x3ba5a3(0x5c8,0x5d1)](_0x4cbb0e);if(_0x31aa7b[_0x3ba5a3(0x560,0x590)]&&_0x31aa7b['windField']){const _0xa577a=Date['now'](),_0x322f28=_0xa577a-_0x4aa439;_0x322f28>_0x31aa7b['frameTime']&&(_0x4aa439=_0xa577a-_0x322f28%_0x31aa7b['frameTime'],_0x31aa7b['update']());}}(),window['addEventListener'](_0x3c3bf5(0x5cb,0x568),this['resize'][_0x3c3bf5(0x5b6,0x5f6)](this),![]));function _0x5465f3(_0x1c95e9,_0x3f635d){return _0x2b542d(_0x3f635d- -0x276,_0x1c95e9);}this['mouse_down']=![];function _0x3c3bf5(_0x3de0d3,_0x106711){return _0x1f69cd(_0x3de0d3,_0x106711-0x5b3);}this[_0x3c3bf5(0x569,0x513)]=![],this['options']['mouseHidden']&&(this[_0x5465f3(0x19,-0x21)]['on'](mars3d__namespace[_0x5465f3(-0x19,0x20)]['wheel'],this['_onMapWhellEvent'],this),this[_0x5465f3(-0x71,-0x21)]['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x5465f3(-0x88,-0x70)],this),this['_map']['on'](mars3d__namespace[_0x5465f3(-0x6,0x20)]['mouseUp'],this['_onMouseUpEvent'],this));}['unbindEvent'](){window['cancelAnimationFrame'](this['animateFrame']),delete this['animateFrame'];function _0x2955d0(_0x833169,_0x36038b){return _0x1f69cd(_0x36038b,_0x833169-0x53);}window[_0x2955d0(-0x5a,-0x11)]('resize',this['resize']);function _0x3b3c06(_0x186027,_0x11ccdb){return _0x2b542d(_0x11ccdb-0x2a8,_0x186027);}this['options'][_0x3b3c06(0x506,0x4b3)]&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this[_0x2955d0(-0x36,-0x9b)],this),this[_0x3b3c06(0x4da,0x4fd)]['off'](mars3d__namespace[_0x2955d0(0x3c,0x6a)][_0x3b3c06(0x516,0x4d0)],this[_0x2955d0(-0x54,-0xae)],this),this['_map']['off'](mars3d__namespace['EventType'][_0x3b3c06(0x4fc,0x518)],this['_onMouseUpEvent'],this),this['_map'][_0x2955d0(-0x3d,0x1c)](mars3d__namespace[_0x2955d0(0x3c,0x54)][_0x3b3c06(0x57d,0x588)],this[_0x2955d0(-0x45,-0x30)],this));}['_onMapWhellEvent'](_0x104717){clearTimeout(this[_0x5a9798(0x206,0x186)]);function _0x5a9798(_0x4b9ba6,_0x393304){return _0x1f69cd(_0x4b9ba6,_0x393304-0x12d);}function _0x38d313(_0x512c26,_0x5528ec){return _0x1f69cd(_0x512c26,_0x5528ec-0x25f);}if(!this['show']||!this['canvas'])return;this['canvas'][_0x38d313(0x1f6,0x21d)][_0x5a9798(0x106,0x150)]='hidden',this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;function _0x1f52e6(_0x58d658,_0x153dff){return _0x38d313(_0x153dff,_0x58d658-0x2ec);}function _0x5b202f(_0x17ddc0,_0x2acb9c){return _0x5a9798(_0x2acb9c,_0x17ddc0-0x1fb);}this[_0x5b202f(0x2a6,0x27a)](),this[_0x1f52e6(0x581,0x52c)]['style'][_0x1f52e6(0x56e,0x5d2)]='visible';},0xc8);}['_onMouseDownEvent'](_0x57ab6b){this[_0x51b57c(0x3c3,0x435)]=!![];function _0x51b57c(_0x2ba0a0,_0x2bde5b){return _0x1f69cd(_0x2bde5b,_0x2ba0a0-0x3d7);}this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x43a240(_0x6cdcad,_0x38a4ea){return _0x2b542d(_0x38a4ea- -0xf8,_0x6cdcad);}this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x43a240(0x151,0x11d)],this);}['_onMouseMoveEvent'](_0x2f0a7b){function _0xa3d5c0(_0x24d794,_0x51be11){return _0x1f69cd(_0x51be11,_0x24d794-0x3cd);}function _0x366f2f(_0x3fa0d0,_0x5851d4){return _0x1f69cd(_0x5851d4,_0x3fa0d0-0x43a);}if(!this['show']||!this['canvas'])return;this[_0x366f2f(0x426,0x3f2)]&&(this[_0x366f2f(0x470,0x433)]['style']['visibility']=_0x366f2f(0x495,0x477),this[_0x366f2f(0x39a,0x3dd)]=!![]);}[_0x2b542d(0x2a6,0x2e7)](_0x485660){if(!this['show']||!this['canvas'])return;this['_map'][_0x2d902b(0x4e4,0x481)](mars3d__namespace[_0x2d902b(0x4fa,0x4fa)]['mouseMove'],this['_onMouseMoveEvent'],this);this[_0x2d902b(0x541,0x4fd)]&&this['mouse_move']&&this['redraw']();this[_0x5369d0(0x3ed,0x458)]['style'][_0x5369d0(0x419,0x445)]='visible';function _0x2d902b(_0x64e11f,_0x5168f0){return _0x2b542d(_0x5168f0-0x264,_0x64e11f);}this[_0x2d902b(0x4b6,0x4fd)]=![];function _0x5369d0(_0x54adb4,_0x5ae4d7){return _0x1f69cd(_0x54adb4,_0x5ae4d7-0x422);}this[_0x5369d0(0x373,0x382)]=![];}['setData'](_0x465591){this[_0x3549e0(0xee,0xa4)](),this['windData']=_0x465591;function _0x44cec1(_0x22a30d,_0x4eab6a){return _0x1f69cd(_0x4eab6a,_0x22a30d-0x5ab);}function _0x3549e0(_0x3cb1f1,_0x55fae6){return _0x2b542d(_0x3cb1f1- -0x210,_0x55fae6);}this['windField']['setDate'](_0x465591),this[_0x44cec1(0x529,0x553)]();}[_0x1f69cd(-0x5b,-0x82)](){function _0x18e89f(_0xa0a103,_0x3d5c36){return _0x2b542d(_0xa0a103- -0x3e,_0x3d5c36);}if(!this[_0x18e89f(0x237,0x1cf)])return;this['windField'][_0x5357e6(-0x1f2,-0x1ca)](this['options']);function _0x5357e6(_0x308825,_0x157da2){return _0x2b542d(_0x157da2- -0x40b,_0x308825);}this['update']();}['update'](){if(this['_updateIng'])return;this['_updateIng']=!![];function _0x59559e(_0xfd166e,_0x1aea80){return _0x2b542d(_0x1aea80- -0x1d2,_0xfd166e);}function _0x125a7d(_0x4d46e2,_0x4a08a2){return _0x1f69cd(_0x4a08a2,_0x4d46e2-0x34a);}if(this[_0x125a7d(0x347,0x3aa)])this[_0x59559e(0x57,0x49)]['update']();else{const _0x5d762b=this['windField'][_0x125a7d(0x390,0x36e)]();this['_drawLines'](_0x5d762b);}this[_0x125a7d(0x383,0x34b)]=![];}['_drawLines'](_0x14a6bf){this['canvasContext']['globalCompositeOperation']='destination-in',this[_0x47fa23(0xd7,0x5a)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']);function _0x47fa23(_0x38f8fb,_0x2d3b28){return _0x2b542d(_0x38f8fb- -0x234,_0x2d3b28);}this[_0xd8854c(-0x138,-0xcc)]['globalCompositeOperation']=_0x47fa23(-0x2a,0x3b),this['canvasContext'][_0x47fa23(0x39,0x21)]=0.9;function _0xd8854c(_0x2997a7,_0x56e1dd){return _0x1f69cd(_0x2997a7,_0x56e1dd- -0x12a);}const _0x301c29=this['_map'][_0x47fa23(-0x13,-0x22)]['mode']!==Cesium[_0x47fa23(0x4,-0x11)][_0xd8854c(-0x149,-0x178)],_0x430f83=this[_0xd8854c(-0x149,-0x163)]*0.25;if(this[_0x47fa23(0xe8,0xf5)])for(let _0x3ccbcf=0x0,_0x4c6043=_0x14a6bf[_0xd8854c(-0x1a0,-0x114)];_0x3ccbcf<_0x4c6043;_0x3ccbcf++){const _0x1e3910=_0x14a6bf[_0x3ccbcf],_0x16de72=this['_tomap'](_0x1e3910[_0xd8854c(-0x15b,-0x10f)],_0x1e3910[_0x47fa23(0x35,0x7e)],_0x1e3910),_0x56c8de=this['_tomap'](_0x1e3910['tlng'],_0x1e3910['tlat'],_0x1e3910);if(!_0x16de72||!_0x56c8de)continue;if(_0x301c29&&Math['abs'](_0x16de72[0x0]-_0x56c8de[0x0])>=_0x430f83)continue;this['canvasContext'][_0x47fa23(0x3f,0x13)](),this[_0x47fa23(0xd7,0xf7)]['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x47fa23(0xe8,0x92)]['getColor'](_0x1e3910['speed']),this['canvasContext']['moveTo'](_0x16de72[0x0],_0x16de72[0x1]),this[_0xd8854c(-0xc3,-0xcc)][_0xd8854c(-0x1bf,-0x1c8)](_0x56c8de[0x0],_0x56c8de[0x1]),this['canvasContext']['stroke']();}else{this['canvasContext']['beginPath'](),this['canvasContext'][_0xd8854c(-0xc5,-0xdc)]=this['lineWidth'],this[_0x47fa23(0xd7,0x10d)][_0xd8854c(-0x1a0,-0x165)]=this['color'];for(let _0x538c62=0x0,_0x21829a=_0x14a6bf['length'];_0x538c62<_0x21829a;_0x538c62++){const _0x2c9f28=_0x14a6bf[_0x538c62],_0x31aa9b=this['_tomap'](_0x2c9f28['lng'],_0x2c9f28[_0x47fa23(0x35,-0x27)],_0x2c9f28),_0xa65262=this['_tomap'](_0x2c9f28['tlng'],_0x2c9f28[_0xd8854c(-0xed,-0x15a)],_0x2c9f28);if(!_0x31aa9b||!_0xa65262)continue;if(_0x301c29&&Math[_0xd8854c(-0x130,-0x126)](_0x31aa9b[0x0]-_0xa65262[0x0])>=_0x430f83)continue;this['canvasContext'][_0x47fa23(0xae,0xb2)](_0x31aa9b[0x0],_0x31aa9b[0x1]),this['canvasContext']['lineTo'](_0xa65262[0x0],_0xa65262[0x1]);}this['canvasContext'][_0x47fa23(-0x2f,-0x27)]();}}['_tomap'](_0x4eecd5,_0x11a3f8,_0x4245aa){const _0x19131a=Cesium[_0x5efc10(0x36d,0x357)][_0x5efc10(0x2e3,0x2b1)](_0x4eecd5,_0x11a3f8,this['fixedHeight']),_0x431b32=this['_map']['scene'];if(_0x431b32[_0x5efc10(0x306,0x335)]===Cesium[_0x571ca6(0x260,0x26d)][_0x571ca6(0x287,0x229)]){const _0x16f77e=new Cesium[(_0x5efc10(0x3b3,0x366))](_0x431b32[_0x571ca6(0x342,0x3ba)]['ellipsoid'],_0x431b32[_0x571ca6(0x2cb,0x27b)]['positionWC']),_0x40dfbc=_0x16f77e['isPointVisible'](_0x19131a);if(!_0x40dfbc)return _0x4245aa['age']=0x0,null;}function _0x5efc10(_0x36005b,_0x30229c){return _0x1f69cd(_0x36005b,_0x30229c-0x2fa);}function _0x571ca6(_0x44b0ee,_0x1dc7c5){return _0x1f69cd(_0x1dc7c5,_0x44b0ee-0x2d5);}const _0x2e03bf=Cesium[_0x5efc10(0x2f3,0x2f5)]['wgs84ToWindowCoordinates'](this['_map']['scene'],_0x19131a);return _0x2e03bf?[_0x2e03bf['x'],_0x2e03bf['y']]:null;}['clear'](){this['windField']['clear'](),delete this['windData'];}['initWorker'](){this['worker']=new Worker(this['options'][_0x66820(0x247,0x1bb)]),this[_0x66820(0x17b,0x1bb)][_0x66820(0x112,0x137)]=_0x5ee014=>{function _0x5ed795(_0x4778f0,_0x43b069){return _0x66820(_0x4778f0,_0x43b069-0x2);}this['_drawLines'](_0x5ee014['data'][_0x5ed795(0x1af,0x19c)]),this['_updateIng2']=![];};function _0x14977f(_0x1cc2ea,_0x378e14){return _0x1f69cd(_0x378e14,_0x1cc2ea- -0xf2);}this['windField']={'init':_0x25f30b=>{function _0x576680(_0x17a327,_0x2f70ff){return _0x14977f(_0x17a327-0x171,_0x2f70ff);}const _0x306f52={};_0x306f52['type']=_0x576680(0xa9,0xdf),_0x306f52[_0x576680(0x43,0x7b)]=_0x25f30b;function _0x16bf13(_0x5d33b5,_0x2acb4f){return _0x14977f(_0x2acb4f-0x66a,_0x5d33b5);}this[_0x16bf13(0x562,0x575)]['postMessage'](_0x306f52);},'setOptions':_0x15257c=>{const _0x4bc59b={};function _0x14886e(_0x331650,_0x1633f9){return _0x14977f(_0x331650-0x16d,_0x1633f9);}function _0x552728(_0x39ec97,_0x1d87b8){return _0x14977f(_0x39ec97-0x1b3,_0x1d87b8);}_0x4bc59b[_0x552728(0xae,0xd5)]='setOptions',_0x4bc59b[_0x14886e(0x3f,-0x40)]=_0x15257c,this[_0x14886e(0x78,0x4f)]['postMessage'](_0x4bc59b);},'setDate':_0x189ef1=>{const _0x268700={};_0x268700['type']='setDate',_0x268700['data']=_0x189ef1;function _0x5ac062(_0x330a9f,_0x4d9dc7){return _0x66820(_0x4d9dc7,_0x330a9f- -0x68);}this['worker'][_0x5ac062(0x101,0x16c)](_0x268700);},'update':()=>{if(this['_updateIng2'])return;function _0x5c35fe(_0xb8a3eb,_0x8b3750){return _0x14977f(_0x8b3750-0x630,_0xb8a3eb);}this[_0x5c35fe(0x52c,0x4b4)]=!![];const _0x119873={};_0x119873['type']=_0x56cf57(0x34a,0x334);function _0x56cf57(_0x252b76,_0x36f9c8){return _0x14977f(_0x252b76-0x455,_0x36f9c8);}this[_0x56cf57(0x360,0x2e4)][_0x5c35fe(0x50b,0x4e9)](_0x119873);},'clear':()=>{const _0x206302={};_0x206302['type']='clear',this['worker']['postMessage'](_0x206302);}};function _0x66820(_0x588157,_0x4b5c0c){return _0x2b542d(_0x4b5c0c- -0xef,_0x588157);}this['windField']['init'](this[_0x14977f(-0x12e,-0x182)]);}}mars3d__namespace[_0x1f69cd(0x6b,0x58)][_0x2b542d(0x24c,0x269)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer'][_0x2b542d(0x28c,0x2aa)]=CanvasWindLayer,mars3d__namespace[_0x2b542d(0x2fc,0x380)]=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField;function _0x1f69cd(_0x222184,_0x4e4cc5){return _0xe776(_0x4e4cc5- -0x221,_0x222184);}exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports[_0x1f69cd(-0x3f,0x15)]=WindUtil;const _0x38f0ec={};_0x38f0ec['value']=!![],Object[_0x2b542d(0x22e,0x25c)](exports,'__esModule',_0x38f0ec);
}));
