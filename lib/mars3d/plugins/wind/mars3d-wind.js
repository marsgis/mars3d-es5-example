/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.5
 * 编译日期：2024-10-27 22:47
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x4f38ce,_0x4330ec){function _0x14f12d(_0x25bf53,_0x323dad){return _0x1fbb(_0x323dad-0x60,_0x25bf53);}function _0x475666(_0x34c9cb,_0x425d2e){return _0x1fbb(_0x34c9cb-0x2a1,_0x425d2e);}const _0x1b6c4c=_0x4f38ce();while(!![]){try{const _0xa68b2f=-parseInt(_0x14f12d(0x14f,0x18a))/0x1*(parseInt(_0x14f12d(0x29c,0x25d))/0x2)+-parseInt(_0x475666(0x4b5,0x501))/0x3*(-parseInt(_0x475666(0x426,0x38d))/0x4)+parseInt(_0x475666(0x3e7,0x392))/0x5+parseInt(_0x475666(0x459,0x40c))/0x6+parseInt(_0x14f12d(0x2a0,0x243))/0x7*(parseInt(_0x14f12d(0x16f,0x1bc))/0x8)+-parseInt(_0x475666(0x3f1,0x445))/0x9+parseInt(_0x475666(0x456,0x3e2))/0xa*(parseInt(_0x475666(0x3b3,0x37e))/0xb);if(_0xa68b2f===_0x4330ec)break;else _0x1b6c4c['push'](_0x1b6c4c['shift']());}catch(_0x8d41ac){_0x1b6c4c['push'](_0x1b6c4c['shift']());}}}(_0x22e4,0xc8b0b));function _interopNamespace(_0x2f1f76){if(_0x2f1f76&&_0x2f1f76['__esModule'])return _0x2f1f76;var _0x109e9b=Object['create'](null);return _0x2f1f76&&Object['keys'](_0x2f1f76)['forEach'](function(_0x26bf14){function _0x490648(_0xb1046c,_0x41e519){return _0x1fbb(_0x41e519-0x38e,_0xb1046c);}function _0x1118ae(_0x1f697a,_0x44a785){return _0x1fbb(_0x1f697a- -0x2a7,_0x44a785);}if(_0x26bf14!=='default'){var _0x5c5a9d=Object['getOwnPropertyDescriptor'](_0x2f1f76,_0x26bf14);Object[_0x1118ae(-0xcb,-0x7d)](_0x109e9b,_0x26bf14,_0x5c5a9d[_0x1118ae(-0xa1,-0x49)]?_0x5c5a9d:{'enumerable':!![],'get':function(){return _0x2f1f76[_0x26bf14];}});}}),_0x109e9b['default']=_0x2f1f76,_0x109e9b;}var mars3d__namespace=_interopNamespace(mars3d);function _0x22e4(){const _0x39e536=['randomBetween','getPixelSize','get','STATIC_DRAW','globe','_removedHook','particlesSpeed','scene','moveTo','toGridXY','left','update','random','FLOAT','fragmentShaderSource','OPAQUE','1494126VArBGv','commandToExecute','colour','lineWidth','Pass','color','mod','ShaderProgram','blue','createComputingPrimitives','_calcUV','keys','particlesTextures','mouse_move','options','_onMap_preRenderEvent','preRender','viewerParameters','createRenderingPrimitives','cols','_onMouseMoveEvent','PI_OVER_TWO','defines','ymax','getFullscreenQuad','east','add','particlesTextureSize','drawingBufferWidth','currentParticlesPosition','initWorker','particlesComputing','source','WindLayer','destroy','_animateFrame','depthMask','strokeStyle','uSpeedRange','segmentsDepth','canvasResize','vdata','Compute','clientWidth','speedRate','canvasWidth','off','_onMouseUpEvent','shaderProgram','height','431596jMKbSx','particlesRendering','nextTrailsDepth','postProcessingPosition','Cartesian2','_drawLines','removeAll','framebuffers','_showHook','dynamic','DomUtil','style','createParticlesTextures','pixelFormat','speedScaleFactor','tlng','getUVByXY','UNSIGNED_INT','push','ellipsoid','particlesNumber','sqrt','frameRate','array','2cZCeOu','GeometryAttribute','wSpeedRange','bindEvent','owner','Math','levmin','_data','wheel','_map','createSegmentsGeometry','#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20bool\x20colour;\x0a\x0ain\x20float\x20heightNormalization;\x0ain\x20float\x20speedNormalization;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speedNormalization\x20>\x20zero)\x20{\x0a\x20\x20\x20\x20if(colour)\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(heightNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','SCENE3D','type','alt','resize','execute','outputTexture','textures','vertexArray','__proto__','interval','geometry','Cartesian3','#version\x20300\x20es\x0a\x0ain\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20gl_Position\x20=\x20vec4(position,\x201.0f);\x0a}\x0a','Geometry','ShaderSource','#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x20Unit\x20converted\x20to\x20degrees\x20of\x20longitude\x20and\x20latitude\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20speed;\x0a\x20\x20if(length(speed.rgb)\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a','3276160WTRoYm','refreshParticles','_updateIng2','particleHeight','rows','zIndex','_addedHook','destroyObject','nextParticlesPosition','primitiveType','12859731ErNAMs','talt','south','_mountedHook','top','colors','SceneMode','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20lines\x20drawing\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0auniform\x20vec2\x20hRange;\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0aout\x20float\x20heightNormalization;\x0aout\x20float\x20speedNormalization;\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight\x20+\x20lonLatLev.z;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0f,\x20360.0f)\x20-\x20180.0f;\x0a\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0f;\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(speed.z\x20-\x20wSpeedRange.x)\x20/\x20(wSpeedRange.y\x20-\x20wSpeedRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20vec3\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rgb;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x20\x20\x20\x20//\x20render\x20lines\x20with\x20triangles\x20and\x20miter\x20joint\x0a\x20\x20\x20\x20//\x20read\x20https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html\x20for\x20detail\x0a\x20\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20projectedCoordinates.next,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.next\x20+\x20offset;\x0a\x20\x20}\x0a\x0a\x20\x20heightNormalization\x20=\x20(currentPosition.z\x20-\x20hRange.x)\x20/\x20(hRange.y\x20-\x20hRange.x);\x0a\x0a\x20\x20speedNormalization\x20=\x20texture(particlesSpeed,\x20particleIndex).a;\x0a}\x0a','_maxAge','sources','destination-in','persists','261144oTlljv','windTextures','grid','container','EllipsoidalOccluder','willReadFrequently','__esModule','CanvasWindField','attributeLocations','TWO_PI','particleSystem','vertexShaderSource','clientHeight','umax','abs','particles','stroke','DrawCommand','fadeOpacity','nextTrails','toWindowCoordinates','calculateSpeed','pixelSize','none','fixedHeight','createTexture','now','commandType','Ellipsoid','createFramebuffer','windData','getColor','dropRate','forEach','getValidRange','_setOptionsHook','createRawRenderState','xmax','dimensions','fromCssColorString','levmax','4BMaCSK','context','Color','TextureMagnificationFilter','width','mouseMove','clearCommand','applyViewerParameters','globeBoundingSphere','DISABLE_GL_POSITION_LOG_DEPTH','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20W;\x20//\x20upward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0auniform\x20float\x20speedScaleFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20//\x20map\x20the\x20z-axis\x20value\x20to\x20the\x20nearest\x20bit\x20plane\x20to\x20ensure\x20that\x20the\x20result\x20is\x20an\x20integer\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205,\x207,\x208,\x209],\x20width\x20=\x202,\x20height\x20=\x202,\x20level\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x206\x207\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x202\x203\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0afloat\x20interpolateTexture(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x201.0f\x20*\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x201.0f\x20*\x20interval.y;\x0a\x0a\x20\x20float\x20lon0_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon1_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon0_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat1,\x20lev));\x0a\x20\x20float\x20lon1_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat1,\x20lev));\x0a\x0a\x20\x20float\x20lon_lat0\x20=\x20mix(lon0_lat0,\x20lon1_lat0,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat1\x20=\x20mix(lon0_lat1,\x20lon1_lat1,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat\x20=\x20mix(lon_lat0,\x20lon_lat1,\x20lat\x20-\x20lat0);\x0a\x20\x20return\x20lon_lat;\x0a}\x0a\x0avec3\x20linearInterpolation(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bilinear_interpolation\x0a\x20\x20float\x20u\x20=\x20interpolateTexture(U,\x20lonLatLev);\x0a\x20\x20float\x20v\x20=\x20interpolateTexture(V,\x20lonLatLev);\x0a\x20\x20float\x20w\x20=\x20interpolateTexture(W,\x20lonLatLev);\x0a\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec3\x20convertSpeedUnitToLonLat(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20float\x20w\x20=\x20speed.z;\x0a\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20return\x20windVectorInLonLatLev;\x0a}\x0a\x0avec3\x20calculateSpeedByRungeKutta2(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec3\x20y_n\x20=\x20lonLatLev;\x0a\x20\x20vec3\x20f_n\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec3\x20speed\x20=\x20h\x20*\x20linearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20getRange(vec2\x20range)\x20{\x0a\x20\x20float\x20x1\x20=\x200.0f\x20-\x20range.x;\x0a\x20\x20float\x20x2\x20=\x20range.y\x20-\x200.0f;\x0a\x20\x20if(x1\x20<\x200.0f\x20||\x20x2\x20<\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(abs(x1),\x20abs(x2));\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x20abs(max(x1,\x20x2)));\x0a\x20\x20}\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20vec2\x20uRange\x20=\x20getRange(uSpeedRange);\x0a\x20\x20vec2\x20vRange\x20=\x20getRange(vSpeedRange);\x0a\x20\x20vec2\x20wRange\x20=\x20getRange(wSpeedRange);\x0a\x20\x20if(length(speed.xyz)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x200.0f;\x0a\x20\x20}\x0a\x0a\x20\x20percent.x\x20=\x20(abs(speed.x)\x20-\x20uRange.x)\x20/\x20(uRange.y\x20-\x20uRange.x);\x0a\x20\x20percent.y\x20=\x20(abs(speed.y)\x20-\x20vRange.x)\x20/\x20(vRange.y\x20-\x20vRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(abs(speed.z)\x20-\x20wRange.x)\x20/\x20(wRange.y\x20-\x20wRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speedOrigin\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLatLev);\x0a\x20\x20vec3\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLatLev,\x20speed);\x0a\x0a\x20\x20vec4\x20particleSpeed\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speed\x20/\x20speedScaleFactor));\x0a\x20\x20\x20\x20//\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','latRange','pow','computeViewRectangle','maximum','primitives','drawingBufferHeight','ZERO','WGS84','lev','currentTrailsColor','windField','worker','redraw','uniformMap','_calc_speedRate','removeEventListener','RGBA','ymin','floor','createRenderingTextures','addPrimitives','DepthFunction','canvasContext','layer','PrimitiveType','Cesium','getColorTexture','getOptions','init','lng','maxParticles','beginPath','north','LayerUtil','pointer-events','isInExtent','Sampler','50yfrhhl','mouseDown','data','3122214WpuDhA','ComponentDatatype','_speedRate','createRenderingFramebuffers','destroyParticlesTextures','globalCompositeOperation','Draw','_bilinearInterpolation','postMessage','register','segments','viewRectangleToLonLatRange','trails','getRandomLatLng','WindUtil','mouse_down','_onMouseDownEvent','xmin','colorTextures','canvas','setDate','reverse','sin','frameTime','depthTest','remove','THREE_PI_OVER_TWO','visibility','show','canvasHeight','preExecute','depthTexture','PixelDatatype','PointTrans','lat','colorTable','defineProperty','EventType','TRIANGLES','refreshTimer','clampToLatitudeRange','clear','previousParticlesPosition','273JZuLGj','length','age','toDegrees','mode','dropRateBump','lon','BufferUsage','getV','autoClear','reverseY','maxAge','fromGeometry','NEAREST','defined','blending','udata','_tomap','PixelFormat','mars3d-canvasWind','lonRange','round','ClearCommand','framebuffer','max','_onMapWhellEvent','892014IDJEpe','speedFactor','randomizeParticles','vSpeedRange','setOptions','min','createWindTextures'];_0x22e4=function(){return _0x39e536;};return _0x22e4();}const Cesium$7=mars3d__namespace['Cesium'];function getU(_0x9e8387,_0x1b17fa){const _0x12f0f7=_0x9e8387*Math['cos'](Cesium$7['Math']['toRadians'](_0x1b17fa));return _0x12f0f7;}function getV(_0x225077,_0x27692f){function _0x11b15e(_0x136442,_0x10c69a){return _0x1fbb(_0x136442- -0x4f,_0x10c69a);}function _0x265fb9(_0x1beb62,_0x2f57f8){return _0x1fbb(_0x2f57f8-0x225,_0x1beb62);}const _0x489538=_0x225077*Math[_0x11b15e(0x17f,0x12c)](Cesium$7[_0x11b15e(0xe0,0xfe)]['toRadians'](_0x27692f));return _0x489538;}function getSpeed(_0x3cccd6,_0x1467ed){const _0x3bedca=Math[_0x45533f(-0x102,-0x113)](Math[_0x45533f(-0x98,-0x2c)](_0x3cccd6,0x2)+Math['pow'](_0x1467ed,0x2));function _0x45533f(_0x289d67,_0x16fb95){return _0x1fbb(_0x289d67- -0x229,_0x16fb95);}function _0x111005(_0x58590e,_0x11e159){return _0x1fbb(_0x11e159- -0x24f,_0x58590e);}return _0x3bedca;}function getDirection(_0x52812e,_0x352989){function _0x5c5b97(_0x1e0fa9,_0x3bafa9){return _0x1fbb(_0x3bafa9- -0x38b,_0x1e0fa9);}let _0x5b2ff9=Cesium$7['Math'][_0x5c5b97(-0x190,-0x1a5)](Math['atan2'](_0x352989,_0x52812e));return _0x5b2ff9+=_0x5b2ff9<0x0?0x168:0x0,_0x5b2ff9;}const _0x3ae0c8={};_0x3ae0c8[_0x5ed0a7(-0xc9,-0x5f)]=null,_0x3ae0c8['getU']=getU,_0x3ae0c8[_0x5ed0a7(-0x1c,-0x61)]=getV,_0x3ae0c8['getSpeed']=getSpeed,_0x3ae0c8['getDirection']=getDirection;var WindUtil=_0x3ae0c8;const Cesium$6=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x494941){this['commandType']=_0x494941['commandType'],this['geometry']=_0x494941['geometry'];function _0x3dc2c7(_0x359b4b,_0x467e2a){return _0x5ed0a7(_0x359b4b- -0x81,_0x467e2a);}this['attributeLocations']=_0x494941['attributeLocations'],this['primitiveType']=_0x494941[_0x206e39(-0xa3,-0xf5)],this['uniformMap']=_0x494941[_0x3dc2c7(-0xeb,-0x14b)],this[_0x206e39(-0x177,-0xdd)]=_0x494941[_0x206e39(-0x6f,-0xdd)];function _0x206e39(_0x3695d,_0x3873d3){return _0x1ada75(_0x3695d,_0x3873d3- -0x58a);}this[_0x206e39(-0x11,-0x32)]=_0x494941['fragmentShaderSource'],this['rawRenderState']=_0x494941['rawRenderState'],this[_0x206e39(0x36,-0x4a)]=_0x494941[_0x3dc2c7(-0x8e,-0x50)],this['outputTexture']=_0x494941[_0x3dc2c7(-0x14d,-0x192)],this[_0x206e39(-0x55,-0x58)]=_0x494941[_0x206e39(-0x4b,-0x58)]??![],this['preExecute']=_0x494941[_0x206e39(-0x4b,-0x6e)],this['show']=!![],this['commandToExecute']=undefined,this[_0x3dc2c7(-0xfd,-0x11a)]=undefined,this['autoClear']&&(this[_0x206e39(-0x3c,-0xb9)]=new Cesium$6['ClearCommand']({'color':new Cesium$6['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6[_0x206e39(-0x1e1,-0x160)][_0x206e39(-0xb8,-0x31)]}));}['createCommand'](_0x14fd3c){function _0x3e96a3(_0x1eb193,_0x1c4e97){return _0x5ed0a7(_0x1eb193- -0x87,_0x1c4e97);}function _0x146b2d(_0x400cbe,_0x51d056){return _0x5ed0a7(_0x51d056- -0x102,_0x400cbe);}switch(this[_0x3e96a3(-0x117,-0x127)]){case'Draw':{const _0x129bde=Cesium$6['VertexArray'][_0x3e96a3(-0x9f,-0x138)]({'context':_0x14fd3c,'geometry':this[_0x146b2d(-0x203,-0x1c9)],'attributeLocations':this[_0x3e96a3(-0x12a,-0x14d)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']}),_0x63ec6f={};_0x63ec6f[_0x3e96a3(-0x108,-0x168)]=_0x14fd3c,_0x63ec6f['attributeLocations']=this['attributeLocations'],_0x63ec6f[_0x3e96a3(-0x127,-0x123)]=this['vertexShaderSource'],_0x63ec6f['fragmentShaderSource']=this['fragmentShaderSource'];const _0x33ac08=Cesium$6[_0x146b2d(-0x212,-0x222)]['fromCache'](_0x63ec6f),_0x28628a=Cesium$6['RenderState']['fromCache'](this['rawRenderState']);return new Cesium$6[(_0x3e96a3(-0x121,-0xb6))]({'owner':this,'vertexArray':_0x129bde,'primitiveType':this['primitiveType'],'uniformMap':this['uniformMap'],'modelMatrix':Cesium$6['Matrix4']['IDENTITY'],'shaderProgram':_0x33ac08,'framebuffer':this[_0x146b2d(-0x7e,-0x10f)],'renderState':_0x28628a,'pass':Cesium$6[_0x146b2d(-0x1cf,-0x225)]['OPAQUE']});}case'Compute':{const _0x3e8be6={};return _0x3e8be6[_0x146b2d(-0x1c0,-0x1db)]=this,_0x3e8be6['fragmentShaderSource']=this['fragmentShaderSource'],_0x3e8be6[_0x3e96a3(-0xf1,-0x124)]=this[_0x146b2d(-0x128,-0x16c)],_0x3e8be6['outputTexture']=this[_0x3e96a3(-0x153,-0x1c0)],_0x3e8be6[_0x3e96a3(-0x133,-0x99)]=!![],new Cesium$6['ComputeCommand'](_0x3e8be6);}}}['setGeometry'](_0x2d9a02,_0x1bb5a0){function _0x54ab2c(_0x3d7fdf,_0x3794fe){return _0x5ed0a7(_0x3794fe-0x142,_0x3d7fdf);}this['geometry']=_0x1bb5a0;function _0x36c616(_0x2c87b4,_0x5f16e5){return _0x1ada75(_0x2c87b4,_0x5f16e5- -0x4f7);}const _0x17d315=Cesium$6['VertexArray'][_0x54ab2c(0xfa,0x12a)]({'context':_0x2d9a02,'geometry':this[_0x54ab2c(0x29,0x7b)],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6['BufferUsage'][_0x54ab2c(0x134,0x142)]});this['commandToExecute'][_0x36c616(-0xbe,-0x74)]=_0x17d315;}['update'](_0x5afb75){if(!this['show'])return;function _0x52eadd(_0x18fa5a,_0x24c0e6){return _0x1ada75(_0x18fa5a,_0x24c0e6- -0x6eb);}if(_0x5afb75[_0x52eadd(-0x20f,-0x1be)]!==Cesium$6['SceneMode'][_0x294c57(0x465,0x47f)])return;!Cesium$6['defined'](this[_0x294c57(0x544,0x580)])&&(this['commandToExecute']=this['createCommand'](_0x5afb75[_0x52eadd(-0x1cd,-0x21f)]));Cesium$6[_0x294c57(0x520,0x4bf)](this[_0x52eadd(-0x23a,-0x1cf)])&&this['preExecute']();function _0x294c57(_0x31bee7,_0x55da9f){return _0x5ed0a7(_0x31bee7-0x536,_0x55da9f);}Cesium$6['defined'](this['clearCommand'])&&_0x5afb75['commandList']['push'](this['clearCommand']),_0x5afb75['commandList'][_0x52eadd(-0x293,-0x281)](this[_0x294c57(0x544,0x4e7)]);}['isDestroyed'](){return![];}['destroy'](){if(this['clearCommand']){var _0x38d1a9,_0x30a921;(_0x38d1a9=this['clearCommand'])!==null&&_0x38d1a9!==void 0x0&&_0x38d1a9['vertexArray']&&this['clearCommand'][_0x9074de(0x2f1,0x38a)][_0x9074de(0x2b6,0x2b0)](),(_0x30a921=this[_0x9074de(0x33f,0x303)])!==null&&_0x30a921!==void 0x0&&_0x30a921[_0x9074de(0x2c4,0x2fd)]&&this[_0x9074de(0x33f,0x365)]['shaderProgram']['destroy'](),delete this[_0x9074de(0x33f,0x30b)];}function _0x6440cf(_0x1e0636,_0x1e7af1){return _0x1ada75(_0x1e0636,_0x1e7af1- -0x396);}function _0x9074de(_0x3ad448,_0x260b7d){return _0x1ada75(_0x260b7d,_0x3ad448- -0x192);}return this['commandToExecute']&&(this['commandToExecute']['vertexArray']&&this['commandToExecute']['vertexArray']['destroy'](),this['commandToExecute']['shaderProgram']&&this['commandToExecute']['shaderProgram']['destroy'](),delete this['commandToExecute']),Cesium$6[_0x6440cf(0x116,0xfd)](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0x39d357=function(){const _0x27fbcb=new Cesium$5[(_0xb81271(-0xde,-0x10c))]({'attributes':new Cesium$5['GeometryAttributes']({'position':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0x29c169(0x1db,0x22f)]['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});function _0x29c169(_0x3eb476,_0x5ae9f5){return _0x1fbb(_0x5ae9f5-0x76,_0x3eb476);}function _0xb81271(_0xca8a95,_0x4af7d1){return _0x1fbb(_0x4af7d1- -0x24f,_0xca8a95);}return _0x27fbcb;},_0x4f74a0=function(_0x589de0,_0x1b148a){if(Cesium$5['defined'](_0x1b148a)){const _0xd58a18={};_0xd58a18['arrayBufferView']=_0x1b148a,_0x589de0[_0x11ed76(0x47c,0x406)]=_0xd58a18;}const _0x4d9e41=new Cesium$5['Texture'](_0x589de0);function _0x11ed76(_0x3f8d77,_0x41d357){return _0x1fbb(_0x41d357-0x306,_0x3f8d77);}return _0x4d9e41;},_0xc22849=function(_0x22cb04,_0x3c4996,_0x579859){const _0x1795ee={};_0x1795ee['context']=_0x22cb04,_0x1795ee[_0x294a21(-0xb8,-0x59)]=[_0x3c4996];function _0x294a21(_0x307c26,_0x12991d){return _0x1fbb(_0x307c26- -0x282,_0x12991d);}_0x1795ee[_0x294a21(-0xab,-0x100)]=_0x579859;function _0x455f12(_0x4896e6,_0x1e55e5){return _0x1fbb(_0x1e55e5-0x2df,_0x4896e6);}const _0x1f432f=new Cesium$5['Framebuffer'](_0x1795ee);return _0x1f432f;},_0x22aa0a=function(_0x35ba8e){const _0x89f09e=!![],_0x98b759=![],_0x5a6dd1={};_0x5a6dd1['viewport']=_0x35ba8e['viewport'],_0x5a6dd1[_0x5b7d23(0x59c,0x55c)]=_0x35ba8e['depthTest'],_0x5a6dd1['depthMask']=_0x35ba8e[_0x372a45(-0x2d3,-0x23c)],_0x5a6dd1[_0x5b7d23(0x5be,0x5b1)]=_0x35ba8e[_0x372a45(-0x1e5,-0x16e)];function _0x372a45(_0x43646c,_0x24b88d){return _0x1fbb(_0x43646c- -0x3d7,_0x24b88d);}function _0x5b7d23(_0x52e0e2,_0x43231c){return _0x1fbb(_0x52e0e2-0x3cc,_0x43231c);}const _0x2b672e=_0x5a6dd1,_0xa46689=Cesium$5['Appearance']['getDefaultRenderState'](_0x89f09e,_0x98b759,_0x2b672e);return _0xa46689;},_0xc3745=function(_0x2d4ba1){const _0x3baba9={},_0x254a17=Cesium$5['Math'][_0x1f56b8(0x36b,0x3f5)](_0x2d4ba1['west'],Cesium$5['Math']['TWO_PI']),_0x342696=Cesium$5['Math']['mod'](_0x2d4ba1[_0x1f56b8(0x480,0x408)],Cesium$5['Math'][_0x56c9d9(0x384,0x3cf)]),_0x5d5e45=_0x2d4ba1[_0x56c9d9(0x3a8,0x387)];let _0x54e0fa;function _0x1f56b8(_0x3bf565,_0xd425f8){return _0x1fbb(_0xd425f8-0x30f,_0x3bf565);}let _0x53fd3c;_0x5d5e45>Cesium$5['Math'][_0x1f56b8(0x47a,0x4e1)]?(_0x54e0fa=0x0,_0x53fd3c=Cesium$5['Math']['TWO_PI']):_0x342696-_0x254a17<_0x5d5e45?(_0x54e0fa=_0x254a17,_0x53fd3c=_0x254a17+_0x5d5e45):(_0x54e0fa=_0x254a17,_0x53fd3c=_0x342696);_0x3baba9[_0x56c9d9(0x408,0x3ee)]={'min':Cesium$5['Math'][_0x1f56b8(0x488,0x4f5)](_0x54e0fa),'max':Cesium$5[_0x1f56b8(0x3d0,0x43e)][_0x1f56b8(0x4c8,0x4f5)](_0x53fd3c)};const _0xaa0e53=_0x2d4ba1[_0x1f56b8(0x3e2,0x461)];function _0x56c9d9(_0x31fa5e,_0x2207e9){return _0x1fbb(_0x31fa5e-0x21f,_0x2207e9);}const _0x56e74d=_0x2d4ba1[_0x56c9d9(0x3cf,0x3f5)],_0x116adb=_0x2d4ba1['height'],_0x9956df=_0x116adb>Cesium$5[_0x1f56b8(0x415,0x43e)]['PI']/0xc?_0x116adb/0x2:0x0;let _0x42a96a=Cesium$5[_0x1f56b8(0x4ad,0x43e)][_0x56c9d9(0x3ff,0x3b2)](_0xaa0e53-_0x9956df),_0x5d0d1e=Cesium$5['Math']['clampToLatitudeRange'](_0x56e74d+_0x9956df);return _0x42a96a<-Cesium$5[_0x1f56b8(0x406,0x43e)]['PI_OVER_THREE']&&(_0x42a96a=-Cesium$5['Math'][_0x1f56b8(0x3be,0x404)]),_0x5d0d1e>Cesium$5[_0x56c9d9(0x34e,0x314)]['PI_OVER_THREE']&&(_0x5d0d1e=Cesium$5[_0x56c9d9(0x34e,0x3a3)]['PI_OVER_TWO']),_0x3baba9[_0x56c9d9(0x3f9,0x48d)]={'min':Cesium$5[_0x56c9d9(0x34e,0x392)]['toDegrees'](_0x42a96a),'max':Cesium$5['Math']['toDegrees'](_0x5d0d1e)},_0x3baba9;},_0x1136a4={};function _0x4f3cf3(_0x2d37e9,_0x230608){return _0x1ada75(_0x230608,_0x2d37e9- -0x5f2);}function _0x41f693(_0x11ff2d,_0x131799){return _0x1ada75(_0x131799,_0x11ff2d- -0x59a);}return _0x1136a4[_0x41f693(-0x15c,-0x195)]=_0x39d357,_0x1136a4[_0x41f693(-0xdf,-0x170)]=_0x4f74a0,_0x1136a4['createFramebuffer']=_0xc22849,_0x1136a4[_0x41f693(-0xd4,-0x48)]=_0x22aa0a,_0x1136a4[_0x41f693(-0x91,-0x67)]=_0xc3745,_0x1136a4;}());var fullscreenVert=_0x5ed0a7(-0xc5,-0x6c),screenDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20trailsColor;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a',segmentDrawFrag=_0x1ada75(0x474,0x47b),segmentDrawVert=_0x5ed0a7(-0xb0,-0xc9),trailDrawFrag='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0aout\x20vec4\x20fragColor;\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0f\x20*\x20trailsColor)\x20/\x20255.0f;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20if(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20pointsColor;\x0a\x20\x20}\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20trailsColor;\x0a\x20\x20}\x0a\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a';const Cesium$4=mars3d__namespace[_0x5ed0a7(-0x5e,0x0)];class ParticlesRendering{constructor(_0x3934b2,_0x3e0e6e,_0x57a3f9,_0x5715c0,_0x2c80d7){this[_0x244900(0x22e,0x251)]=_0x57a3f9['colors']===_0x54282b(0x1d8,0x1d0);function _0x54282b(_0x49ed82,_0x355da1){return _0x1ada75(_0x49ed82,_0x355da1- -0x287);}this['createRenderingTextures'](_0x3934b2,_0x3e0e6e,_0x57a3f9['colors']),this[_0x54282b(0x26e,0x27a)](_0x3934b2);function _0x244900(_0x173dd2,_0xdc675b){return _0x5ed0a7(_0xdc675b-0x376,_0x173dd2);}this['createRenderingPrimitives'](_0x3934b2,_0x3e0e6e,_0x57a3f9,_0x5715c0,_0x2c80d7);}[_0x5ed0a7(-0x64,0x1c)](_0x459736,_0x4f5ab9,_0x5276a8){const _0x31d26b={};_0x31d26b['context']=_0x459736,_0x31d26b[_0x40ef47(0x121,0x179)]=_0x459736['drawingBufferWidth'],_0x31d26b[_0x265662(-0x22,-0x7c)]=_0x459736['drawingBufferHeight'],_0x31d26b[_0x40ef47(0x106,0x10f)]=Cesium$4['PixelFormat'][_0x265662(0x9f,0x13)],_0x31d26b['pixelDatatype']=Cesium$4['PixelDatatype']['UNSIGNED_BYTE'];const _0xb672b0=_0x31d26b;function _0x40ef47(_0x3f566f,_0x33407a){return _0x1ada75(_0x3f566f,_0x33407a- -0x356);}const _0x112f81={};_0x112f81['context']=_0x459736,_0x112f81['width']=_0x459736[_0x265662(-0xbd,-0x91)],_0x112f81['height']=_0x459736['drawingBufferHeight'],_0x112f81['pixelFormat']=Cesium$4[_0x265662(0xcd,0x68)]['DEPTH_COMPONENT'],_0x112f81['pixelDatatype']=Cesium$4['PixelDatatype'][_0x265662(-0x79,-0x6a)];const _0x3f6561=_0x112f81;function _0x265662(_0x13f384,_0x53c4b5){return _0x1ada75(_0x13f384,_0x53c4b5- -0x4d3);}const _0x3e288a=_0x5276a8['length'],_0x3a5d9e=new Float32Array(_0x3e288a*0x3);for(let _0x108df5=0x0;_0x108df5<_0x3e288a;_0x108df5++){const _0x45a0cf=Cesium$4['Color'][_0x40ef47(0x1cc,0x173)](_0x5276a8[_0x108df5]);_0x3a5d9e[0x3*_0x108df5]=_0x45a0cf['red'],_0x3a5d9e[0x3*_0x108df5+0x1]=_0x45a0cf['green'],_0x3a5d9e[0x3*_0x108df5+0x2]=_0x45a0cf[_0x265662(-0x8c,-0xa5)];}const _0x150cd4={'context':_0x459736,'width':_0x3e288a,'height':0x1,'pixelFormat':Cesium$4['PixelFormat']['RGB'],'pixelDatatype':Cesium$4['PixelDatatype'][_0x40ef47(0x1c8,0x201)],'sampler':new Cesium$4[(_0x265662(0x16,0x27))]({'minificationFilter':Cesium$4['TextureMinificationFilter']['LINEAR'],'magnificationFilter':Cesium$4[_0x40ef47(0xe1,0x178)]['LINEAR']})};this['textures']={'segmentsColor':Util['createTexture'](_0xb672b0),'segmentsDepth':Util['createTexture'](_0x3f6561),'currentTrailsColor':Util['createTexture'](_0xb672b0),'currentTrailsDepth':Util[_0x40ef47(0x106,0x165)](_0x3f6561),'nextTrailsColor':Util['createTexture'](_0xb672b0),'nextTrailsDepth':Util[_0x265662(-0x90,-0x18)](_0x3f6561),'colorTable':Util[_0x265662(-0x12,-0x18)](_0x150cd4,_0x3a5d9e)};}['createRenderingFramebuffers'](_0x52e23a){function _0x44fa0d(_0x555f99,_0x4bb61c){return _0x1ada75(_0x4bb61c,_0x555f99- -0x4d3);}function _0x40910e(_0x4883f0,_0x288a26){return _0x1ada75(_0x288a26,_0x4883f0- -0x320);}this['framebuffers']={'segments':Util['createFramebuffer'](_0x52e23a,this[_0x44fa0d(-0x51,-0x97)]['segmentsColor'],this['textures'][_0x40910e(0x12d,0x113)]),'currentTrails':Util[_0x40910e(0x19f,0x1a2)](_0x52e23a,this['textures'][_0x40910e(0x1bf,0x1b8)],this['textures']['currentTrailsDepth']),'nextTrails':Util[_0x40910e(0x19f,0x1a8)](_0x52e23a,this[_0x40910e(0x162,0x130)]['nextTrailsColor'],this['textures'][_0x40910e(0x13a,0x1a2)])};}['createSegmentsGeometry'](_0x43b8a7){const _0x24a5ad=0x4;function _0xc1cdd(_0x2ca387,_0x4b2c7c){return _0x1ada75(_0x2ca387,_0x4b2c7c- -0x322);}let _0x294d78=[];for(let _0x3100f8=0x0;_0x3100f8<_0x43b8a7['particlesTextureSize'];_0x3100f8++){for(let _0xb74a33=0x0;_0xb74a33<_0x43b8a7['particlesTextureSize'];_0xb74a33++){for(let _0x44d2b6=0x0;_0x44d2b6<_0x24a5ad;_0x44d2b6++){_0x294d78[_0x14043f(-0xff,-0x124)](_0x3100f8/_0x43b8a7[_0x14043f(-0x128,-0x17e)]),_0x294d78[_0xc1cdd(0x17e,0x148)](_0xb74a33/_0x43b8a7[_0xc1cdd(0xdd,0x11f)]);}}}_0x294d78=new Float32Array(_0x294d78);let _0x2e9cfb=[];function _0x14043f(_0x1d1e62,_0x13d1c7){return _0x5ed0a7(_0x1d1e62- -0x1c,_0x13d1c7);}for(let _0x5063b4=0x0;_0x5063b4<_0x43b8a7[_0x14043f(-0x75,-0xd0)];_0x5063b4++){_0x2e9cfb['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x2e9cfb=new Float32Array(_0x2e9cfb);let _0x33fed4=[];for(let _0x5ec902=0x0,_0x318eb7=0x0;_0x5ec902<_0x43b8a7['maxParticles'];_0x5ec902++){_0x33fed4['push'](_0x318eb7+0x0,_0x318eb7+0x1,_0x318eb7+0x2,_0x318eb7+0x2,_0x318eb7+0x1,_0x318eb7+0x3),_0x318eb7+=_0x24a5ad;}_0x33fed4=new Uint32Array(_0x33fed4);const _0x5a1010=new Cesium$4[(_0xc1cdd(0xcf,0x167))]({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4[(_0x14043f(-0xf8,-0x8a))]({'componentDatatype':Cesium$4['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x2,'values':_0x294d78}),'normal':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4['ComponentDatatype'][_0xc1cdd(0x1e6,0x235)],'componentsPerAttribute':0x3,'values':_0x2e9cfb})}),'indices':_0x33fed4});return _0x5a1010;}[_0x1ada75(0x4a6,0x438)](_0x318a39,_0xc708e4,_0x303e94,_0x41095f,_0x394d6e){const _0xed04ba=this,_0x129b3e={};_0x129b3e['st']=0x0,_0x129b3e['normal']=0x1;const _0x44c0f8={};_0x44c0f8[_0x5573be(0x90,0x69)]=[segmentDrawVert];const _0x293331={};_0x293331[_0x5573be(-0x1e,0x69)]=[segmentDrawFrag];const _0x2715f9={};_0x2715f9['enabled']=!![];function _0x5c4da8(_0x3b6c5d,_0x270a01){return _0x5ed0a7(_0x270a01-0x141,_0x3b6c5d);}const _0x68d9f3={};_0x68d9f3['viewport']=undefined,_0x68d9f3[_0x5c4da8(0x141,0x10a)]=_0x2715f9,_0x68d9f3[_0x5c4da8(0x82,0x3e)]=!![];const _0x291c84={};_0x291c84['position']=0x0,_0x291c84['st']=0x1;const _0x402111={};_0x402111['defines']=[_0x5573be(0x102,0x9e)],_0x402111['sources']=[fullscreenVert];const _0x551c00={};function _0x5573be(_0xc5ad10,_0x2ee66c){return _0x5ed0a7(_0x2ee66c-0x117,_0xc5ad10);}_0x551c00['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x551c00[_0x5573be(0x8d,0x69)]=[trailDrawFrag];const _0x305010={};_0x305010['position']=0x0,_0x305010['st']=0x1;const _0x54586c={};_0x54586c[_0x5573be(-0x72,0x6)]=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x54586c[_0x5573be(0x7a,0x69)]=[fullscreenVert];const _0x567e52={};_0x567e52['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x567e52[_0x5573be(0xbf,0x69)]=[screenDrawFrag];const _0x58021a={};_0x58021a['enabled']=![];const _0x31c6fa={};_0x31c6fa['enabled']=!![],this[_0x5573be(0x126,0xa4)]={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x129b3e,'geometry':this['createSegmentsGeometry'](_0x303e94),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'previousParticlesPosition':function(){function _0x508fe4(_0x1f85e4,_0x59b5b3){return _0x5c4da8(_0x59b5b3,_0x1f85e4- -0x14f);}return _0x394d6e[_0x508fe4(-0x129,-0xd5)]['previousParticlesPosition'];},'currentParticlesPosition':function(){return _0x394d6e['particlesTextures']['currentParticlesPosition'];},'postProcessingPosition':function(){return _0x394d6e['particlesTextures']['postProcessingPosition'];},'particlesSpeed':function(){return _0x394d6e['particlesTextures']['particlesSpeed'];},'colorTable':function(){return _0xed04ba['textures']['colorTable'];},'aspect':function(){return _0x318a39['drawingBufferWidth']/_0x318a39['drawingBufferHeight'];},'H':function(){return _0xc708e4['H']['array'];},'hRange':function(){function _0x576072(_0x2a4797,_0x4737fa){return _0x5c4da8(_0x4737fa,_0x2a4797- -0x6f);}function _0x2455c0(_0x4b9107,_0x6bb1f){return _0x5c4da8(_0x6bb1f,_0x4b9107- -0x300);}return new Cesium$4[(_0x2455c0(-0x2b0,-0x2c2))](_0xc708e4['H']['min'],_0xc708e4['H'][_0x576072(0xc6,0x130)]);},'uSpeedRange':function(){function _0x24173d(_0x5e0369,_0x5d6d34){return _0x5573be(_0x5e0369,_0x5d6d34- -0x3d);}function _0x2872c6(_0x2a4557,_0x1b47a5){return _0x5c4da8(_0x1b47a5,_0x2a4557-0x459);}return new Cesium$4['Cartesian2'](_0xc708e4['U'][_0x24173d(0xc2,0xd5)],_0xc708e4['U'][_0x2872c6(0x58e,0x4f7)]);},'vSpeedRange':function(){function _0x1e79c0(_0x3cb9f9,_0x1b2315){return _0x5573be(_0x1b2315,_0x3cb9f9- -0x1fb);}return new Cesium$4[(_0x1e79c0(-0x1d5,-0x184))](_0xc708e4['V']['min'],_0xc708e4['V']['max']);},'wSpeedRange':function(){function _0x7a735c(_0x57843f,_0x94d32a){return _0x5573be(_0x94d32a,_0x57843f-0x2a);}function _0x4bf5a3(_0x3f69cf,_0x50ad68){return _0x5c4da8(_0x50ad68,_0x3f69cf- -0xeb);}return new Cesium$4[(_0x7a735c(0x50,0xc1))](_0xc708e4['W'][_0x7a735c(0x13c,0x137)],_0xc708e4['W']['max']);},'pixelSize':function(){return _0x41095f['pixelSize'];},'lineWidth':function(){function _0x3064d6(_0x5c3966,_0x511c65){return _0x5c4da8(_0x5c3966,_0x511c65-0x257);}return _0x303e94[_0x3064d6(0x235,0x274)];},'particleHeight':function(){function _0x2cd98e(_0x106eb1,_0x34c358){return _0x5c4da8(_0x34c358,_0x106eb1-0x1c7);}return _0x303e94[_0x2cd98e(0x24a,0x22b)];},'colour':function(){return _0xed04ba['colour'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x44c0f8),'fragmentShaderSource':new Cesium$4[(_0x5c4da8(0x67,0x7e))](_0x293331),'rawRenderState':Util['createRawRenderState'](_0x68d9f3),'framebuffer':this['framebuffers']['segments'],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':_0x5c4da8(0x13b,0xf8),'attributeLocations':_0x291c84,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4[_0x5c4da8(0xca,0xe2)][_0x5573be(0x7d,0xee)],'uniformMap':{'segmentsColorTexture':function(){return _0xed04ba['textures']['segmentsColor'];},'segmentsDepthTexture':function(){function _0x5f16c2(_0x50064c,_0x55828a){return _0x5573be(_0x50064c,_0x55828a-0x263);}return _0xed04ba['textures'][_0x5f16c2(0x2e5,0x27a)];},'currentTrailsColor':function(){return _0xed04ba['framebuffers']['currentTrails']['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0xe18e88(_0x41f294,_0x1d1505){return _0x5573be(_0x1d1505,_0x41f294-0x450);}function _0x84afdc(_0x10e9db,_0x22009f){return _0x5c4da8(_0x10e9db,_0x22009f-0x67);}return _0xed04ba[_0xe18e88(0x479,0x41c)]['currentTrails'][_0x84afdc(0x16a,0x178)];},'fadeOpacity':function(){return _0x303e94['fadeOpacity'];}},'vertexShaderSource':new Cesium$4[(_0x5c4da8(0xba,0x7e))](_0x402111),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x551c00),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4[_0x5c4da8(0x14c,0xdf)]['ALWAYS']},'depthMask':!![]}),'framebuffer':this['framebuffers'][_0x5573be(0x7e,0x7f)],'autoClear':!![],'preExecute':function(){function _0x2869ee(_0x386361,_0x3a72a8){return _0x5c4da8(_0x386361,_0x3a72a8-0x255);}function _0xa4de6(_0x17db93,_0x143426){return _0x5c4da8(_0x143426,_0x17db93-0x298);}if(_0x303e94[_0xa4de6(0x2ed,0x2fb)]){const _0x2365d8=_0xed04ba['framebuffers']['currentTrails'];_0xed04ba['framebuffers']['currentTrails']=_0xed04ba[_0x2869ee(0x297,0x2a8)][_0xa4de6(0x341,0x2fd)],_0xed04ba['framebuffers'][_0xa4de6(0x341,0x39d)]=_0x2365d8;}_0xed04ba['primitives'][_0xa4de6(0x396,0x34a)]['commandToExecute'][_0xa4de6(0x3cc,0x397)]=_0xed04ba[_0xa4de6(0x2eb,0x36a)][_0x2869ee(0x2fa,0x2fe)],_0xed04ba['primitives']['trails']['clearCommand']['framebuffer']=_0xed04ba['framebuffers']['nextTrails'];}}),'screen':new CustomPrimitive({'commandType':_0x5573be(0x8e,0xce),'attributeLocations':_0x305010,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){function _0xa4fdbc(_0x329304,_0x434dad){return _0x5c4da8(_0x329304,_0x434dad- -0x2e8);}function _0x25b208(_0x3f4f4e,_0x5bff9b){return _0x5c4da8(_0x5bff9b,_0x3f4f4e-0x371);}return _0xed04ba[_0xa4fdbc(-0x300,-0x295)]['nextTrails'][_0xa4fdbc(-0x246,-0x204)](0x0);},'trailsDepthTexture':function(){function _0x5e9523(_0x2b715f,_0x38d646){return _0x5c4da8(_0x38d646,_0x2b715f- -0xe2);}function _0x25d9e6(_0x83a95b,_0x275e6d){return _0x5c4da8(_0x83a95b,_0x275e6d-0xac);}return _0xed04ba[_0x25d9e6(0x93,0xff)]['nextTrails'][_0x5e9523(0x2f,0xc2)];}},'vertexShaderSource':new Cesium$4[(_0x5c4da8(0xde,0x7e))](_0x54586c),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x567e52),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0x58021a,'depthMask':!![],'blending':_0x31c6fa}),'framebuffer':undefined})};}}var CalculateSpeedShader=_0x1ada75(0x466,0x4d5),PostProcessingPositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x0a\x0auniform\x20sampler2D\x20H;\x20//\x20particles\x20height\x20textures\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0auniform\x20vec2\x20viewerLonRange;\x0auniform\x20vec2\x20viewerLatRange;\x0a\x0aconst\x20float\x20randomCoefficient\x20=\x200.1f;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0aconst\x20float\x20dropRate\x20=\x200.1f;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0aconst\x20float\x20dropRateBump\x20=\x200.1f;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0avec4\x20getTextureValue(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20vec4\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D);\x0a\x20\x20return\x20result;\x0a}\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0abool\x20particleNoSpeed(vec3\x20particle)\x20{\x0a\x20\x20vec4\x20speed\x20=\x20getTextureValue(particlesSpeed,\x20particle);\x0a\x20\x20return\x20speed.r\x20==\x200.0f\x20&&\x20speed.g\x20==\x200.0f;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0f);\x0a\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20float\x20height\x20=\x20getTextureValue(H,\x20vec3(randomLon,\x20randomLat,\x20lev)).r;\x0a\x0a\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20height);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20viewerLatRange.x\x20||\x20particle.y\x20>\x20viewerLatRange.y\x20||\x20particle.x\x20<\x20viewerLonRange.x\x20||\x20particle.x\x20>\x20viewerLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x0a}\x0a',UpdatePositionShader=_0x5ed0a7(-0xc2,-0x4d);const Cesium$3=mars3d__namespace[_0x5ed0a7(-0x5e,0x1a)];class ParticlesComputing{constructor(_0x2b0412,_0x518deb,_0x25e711,_0x4cab24){this['data']=_0x518deb;function _0x11c57a(_0x26dd44,_0xf8d55f){return _0x1ada75(_0x26dd44,_0xf8d55f- -0x8d);}function _0x376663(_0x5f4907,_0x57c61b){return _0x1ada75(_0x5f4907,_0x57c61b- -0x3ac);}this[_0x376663(0x221,0x19d)](_0x2b0412,_0x518deb),this['createParticlesTextures'](_0x2b0412,_0x25e711,_0x4cab24),this[_0x376663(0xa3,0x83)](_0x518deb,_0x25e711,_0x4cab24);}['createWindTextures'](_0xb3ee43,_0x1f5be1){var _0x4f7b98;const _0x2bea8f={'context':_0xb3ee43,'width':_0x1f5be1[_0x350875(0x14b,0x12d)][_0x350875(0x1e4,0x194)],'height':_0x1f5be1['dimensions'][_0x350875(0x15c,0x185)]*(_0x1f5be1['dimensions']['lev']||0x1),'pixelFormat':Cesium$3[_0x350875(0x188,0x1a0)]['RED'],'pixelDatatype':Cesium$3['PixelDatatype'][_0x350875(0x195,0x1bc)],'flipY':![],'sampler':new Cesium$3[(_0xf299a1(-0x8d,-0x2))]({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3[_0xf299a1(0xb,-0x2e)]['NEAREST']})};function _0x350875(_0x3f6dcd,_0x2cf577){return _0x1ada75(_0x3f6dcd,_0x2cf577- -0x39b);}function _0xf299a1(_0x3eeb6c,_0x5a95d6){return _0x5ed0a7(_0x5a95d6-0x51,_0x3eeb6c);}this[_0xf299a1(-0x56,-0x59)]={'U':Util['createTexture'](_0x2bea8f,_0x1f5be1['U']['array']),'V':Util[_0xf299a1(0x44,-0x41)](_0x2bea8f,_0x1f5be1['V']['array']),'W':Util[_0xf299a1(0x49,-0x41)](_0x2bea8f,((_0x4f7b98=_0x1f5be1['W'])===null||_0x4f7b98===void 0x0?void 0x0:_0x4f7b98['array'])??_0x1f5be1['U'][_0x350875(0x151,0xd4)]),'H':Util['createTexture'](_0x2bea8f,_0x1f5be1['H']['array'])};}[_0x1ada75(0x3d8,0x464)](_0x5a2d2e,_0x2d404a,_0x1bc95c){const _0x1c08e3={'context':_0x5a2d2e,'width':_0x2d404a[_0x8b0a9a(-0x128,-0x140)],'height':_0x2d404a[_0x8b0a9a(-0x1c6,-0x140)],'pixelFormat':Cesium$3[_0x2c715a(0x614,0x5d7)]['RGBA'],'pixelDatatype':Cesium$3[_0x8b0a9a(-0xc,-0x63)]['FLOAT'],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3['TextureMinificationFilter'][_0x8b0a9a(-0x61,-0x4b)],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x8b0a9a(-0x9a,-0x4b)]})},_0x40f482=this['randomizeParticles'](_0x2d404a['maxParticles'],_0x1bc95c);function _0x8b0a9a(_0x1256fa,_0x5e76cc){return _0x1ada75(_0x1256fa,_0x5e76cc- -0x581);}const _0x3d654d=new Float32Array(0x4*_0x2d404a['maxParticles'])['fill'](0x0);function _0x2c715a(_0x5babf3,_0x3e62d4){return _0x5ed0a7(_0x3e62d4-0x5e9,_0x5babf3);}this['particlesTextures']={'previousParticlesPosition':Util['createTexture'](_0x1c08e3,_0x40f482),'currentParticlesPosition':Util[_0x8b0a9a(-0x11d,-0xc6)](_0x1c08e3,_0x40f482),'nextParticlesPosition':Util['createTexture'](_0x1c08e3,_0x40f482),'postProcessingPosition':Util['createTexture'](_0x1c08e3,_0x40f482),'particlesSpeed':Util[_0x2c715a(0x50d,0x557)](_0x1c08e3,_0x3d654d)};}[_0x5ed0a7(-0x8,0x1d)](_0x218e3e,_0x4ba23e){function _0x3873a0(_0x546a59,_0x3cecb7){return _0x1ada75(_0x546a59,_0x3cecb7- -0x217);}const _0x68052=new Float32Array(0x4*_0x218e3e);function _0x244274(_0x34eb98,_0x4281f0){return _0x1ada75(_0x34eb98,_0x4281f0- -0x65);}for(let _0x472e3c=0x0;_0x472e3c<_0x218e3e;_0x472e3c++){_0x68052[0x4*_0x472e3c]=Cesium$3['Math']['randomBetween'](_0x4ba23e['lonRange']['x'],_0x4ba23e[_0x3873a0(0x35e,0x326)]['y']),_0x68052[0x4*_0x472e3c+0x1]=Cesium$3['Math'][_0x3873a0(0x2b0,0x333)](_0x4ba23e[_0x3873a0(0x27a,0x2bf)]['x'],_0x4ba23e['latRange']['y']),_0x68052[0x4*_0x472e3c+0x2]=Cesium$3[_0x3873a0(0x2aa,0x25e)]['randomBetween'](this[_0x3873a0(0x296,0x2e6)]['lev'][_0x3873a0(0x307,0x331)],this[_0x244274(0x495,0x498)]['lev']['max']),_0x68052[0x4*_0x472e3c+0x3]=0x0;}return _0x68052;}[_0x1ada75(0x4b9,0x4c4)](_0x1cad51){const _0xde4128=[_0x1cad51['dimensions']['lon'],_0x1cad51['dimensions']['lat'],_0x1cad51[_0x49c05e(-0x2a,-0x89)]['lev']],_0x2ef85c=[_0x1cad51['lon'][_0x49c05e(0x56,0x33)],_0x1cad51[_0x49c05e(0x2e,-0x44)][_0x49c05e(0x56,0xab)],_0x1cad51[_0x4ddc63(0x3cb,0x387)]['min']],_0x16da63=[_0x1cad51['lon'][_0x4ddc63(0x42e,0x3fa)],_0x1cad51['lat'][_0x49c05e(0x4f,0x99)],_0x1cad51[_0x49c05e(-0x14,-0x28)][_0x4ddc63(0x42e,0x413)]],_0x429bbc=[(_0x16da63[0x0]-_0x2ef85c[0x0])/(_0xde4128[0x0]-0x1),(_0x16da63[0x1]-_0x2ef85c[0x1])/(_0xde4128[0x1]-0x1),_0xde4128[0x2]>0x1?(_0x16da63[0x2]-_0x2ef85c[0x2])/(_0xde4128[0x2]-0x1):0x1];function _0x49c05e(_0x3baf60,_0xe011ee){return _0x1ada75(_0xe011ee,_0x3baf60- -0x4f2);}const _0xe0c321=Math[_0x4ddc63(0x3d5,0x467)](Math['random']()*_0x1cad51['U']['array'][_0x49c05e(0x38,-0x42)]),_0x112d2c=_0xe0c321%(_0xde4128[0x0]*_0xde4128[0x1]),_0x2ae8ca=Math['floor'](_0x112d2c/_0xde4128[0x0]);function _0x4ddc63(_0xfcd89a,_0xa8b0a6){return _0x1ada75(_0xa8b0a6,_0xfcd89a- -0x113);}const _0x583a1f=_0x112d2c%_0xde4128[0x0],_0x2ed7a0=Cesium$3['Math']['randomBetween'](_0x2ef85c[0x0]+_0x583a1f*_0x429bbc[0x0],_0x2ef85c[0x0]+(_0x583a1f+0x1)*_0x429bbc[0x0]),_0x7221e=Cesium$3['Math']['randomBetween'](_0x2ef85c[0x1]+(_0x2ae8ca-0x1)*_0x429bbc[0x1],_0x2ef85c[0x1]+_0x2ae8ca*_0x429bbc[0x1]),_0x25ab0c=_0x1cad51['H']['array'][_0xe0c321]||0x0;return[_0x2ed7a0,_0x7221e,_0x25ab0c];}[_0x5ed0a7(-0x4b,-0x7b)](){function _0x30bd4a(_0x56c8af,_0x342c5a){return _0x5ed0a7(_0x56c8af-0x4b4,_0x342c5a);}Object['keys'](this['particlesTextures'])[_0x30bd4a(0x42a,0x441)](_0x287aff=>{function _0x163e47(_0x2120e0,_0x24f8df){return _0x30bd4a(_0x24f8df- -0x28b,_0x2120e0);}function _0x38718e(_0x10699a,_0x4d4783){return _0x30bd4a(_0x10699a- -0x457,_0x4d4783);}this[_0x163e47(0x136,0x10e)][_0x287aff][_0x163e47(0x11c,0x124)]();});}['createComputingPrimitives'](_0x552580,_0x347c3e,_0xb7866f){const _0x2f92f3=new Cesium$3[(_0x16f858(-0xa6,-0x15))](_0x552580['dimensions']['lon'],_0x552580[_0x16f858(-0x65,-0x1c)]['lat'],_0x552580[_0x16f858(-0x65,-0xc)][_0x7b734f(0x4b,0xb2)]),_0x2b6b4e=new Cesium$3[(_0x7b734f(-0xc,0x77))](_0x552580['lon'][_0x7b734f(0xb5,0x2c)],_0x552580['lat']['min'],_0x552580[_0x16f858(-0x4f,-0xda)]['min']),_0x5bd490=new Cesium$3[(_0x16f858(-0xa6,-0x3d))](_0x552580['lon']['max'],_0x552580['lat']['max'],_0x552580[_0x16f858(-0x4f,-0x76)]['max']),_0x18d5d1=new Cesium$3['Cartesian3']((_0x5bd490['x']-_0x2b6b4e['x'])/(_0x2f92f3['x']-0x1),(_0x5bd490['y']-_0x2b6b4e['y'])/(_0x2f92f3['y']-0x1),_0x2f92f3['z']>0x1?(_0x5bd490['z']-_0x2b6b4e['z'])/(_0x2f92f3['z']-0x1):0x1),_0x563717=new Cesium$3['Cartesian2'](_0x552580[_0x16f858(0x2,0x17)]['min'],_0x552580[_0x16f858(0x2,-0x6e)]['max']),_0x14c5a5=new Cesium$3['Cartesian2'](_0x552580['lat']['min'],_0x552580['lat'][_0x7b734f(0xae,0x92)]),_0x337d79=new Cesium$3[(_0x16f858(-0xd1,-0x10a))](_0x552580['U']['min'],_0x552580['U'][_0x16f858(0x14,0x9b)]),_0x33632c=new Cesium$3[(_0x16f858(-0xd1,-0x88))](_0x552580['V']['min'],_0x552580['V'][_0x7b734f(0xae,0x7e)]),_0x5005d1=new Cesium$3['Cartesian2'](_0x552580['W']['min'],_0x552580['W'][_0x16f858(0x14,0x75)]),_0x2b07e2=this,_0x66c857={};_0x66c857['U']=function(){return _0x2b07e2['windTextures']['U'];},_0x66c857['V']=function(){function _0x3c7675(_0x5e83dd,_0x1a9fb1){return _0x16f858(_0x1a9fb1-0x547,_0x5e83dd);}return _0x2b07e2[_0x3c7675(0x463,0x4bd)]['V'];},_0x66c857['W']=function(){return _0x2b07e2['windTextures']['W'];},_0x66c857[_0x7b734f(-0x50,-0x69)]=function(){function _0xfec59c(_0x186a2b,_0x458481){return _0x16f858(_0x458481- -0x1,_0x186a2b);}return _0x2b07e2[_0xfec59c(-0x8c,-0xfc)]['currentParticlesPosition'];},_0x66c857['dimension']=function(){return _0x2f92f3;},_0x66c857['minimum']=function(){return _0x2b6b4e;},_0x66c857[_0x16f858(-0x54,0x32)]=function(){return _0x5bd490;};function _0x7b734f(_0x158b84,_0x21432e){return _0x5ed0a7(_0x158b84-0xba,_0x21432e);}_0x66c857[_0x7b734f(-0xe,-0x50)]=function(){return _0x18d5d1;},_0x66c857[_0x16f858(-0xe1,-0x161)]=function(){return _0x337d79;},_0x66c857[_0x7b734f(0xb3,0xf5)]=function(){return _0x33632c;},_0x66c857[_0x7b734f(-0x21,-0xac)]=function(){return _0x5005d1;};function _0x16f858(_0x2f319a,_0x39ea39){return _0x5ed0a7(_0x2f319a-0x20,_0x39ea39);}_0x66c857[_0x7b734f(-0x2d,0xf)]=function(){function _0x4baaf7(_0x186a8e,_0x374d43){return _0x16f858(_0x186a8e-0x3d3,_0x374d43);}return _0xb7866f[_0x4baaf7(0x35e,0x3e8)]*_0x347c3e['speedFactor'];};const _0x37840b={};_0x37840b['sources']=[CalculateSpeedShader];const _0x4eb6ac={};_0x4eb6ac[_0x16f858(-0x8e,-0x9b)]=[UpdatePositionShader];const _0x22eab={};_0x22eab['sources']=[PostProcessingPositionShader],this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':_0x66c857,'fragmentShaderSource':new Cesium$3[(_0x7b734f(-0x9,-0x85))](_0x37840b),'outputTexture':this[_0x7b734f(-0x61,-0x75)][_0x7b734f(0xbd,0x107)],'preExecute':function(){function _0x53554c(_0x3f48d6,_0x5a65f7){return _0x7b734f(_0x5a65f7- -0x16f,_0x3f48d6);}function _0x3b935e(_0x176fb7,_0x2471d1){return _0x16f858(_0x2471d1-0x4c9,_0x176fb7);}if(_0x347c3e!==undefined&&_0x347c3e['dynamic']){const _0x1023f1=_0x2b07e2['particlesTextures']['previousParticlesPosition'];_0x2b07e2[_0x3b935e(0x34c,0x3ce)][_0x53554c(-0x69,-0xda)]=_0x2b07e2['particlesTextures'][_0x3b935e(0x443,0x3df)],_0x2b07e2['particlesTextures']['currentParticlesPosition']=_0x2b07e2[_0x3b935e(0x45a,0x3ce)][_0x3b935e(0x411,0x3f7)],_0x2b07e2['particlesTextures']['postProcessingPosition']=_0x1023f1;}_0x2b07e2['primitives']['calculateSpeed']['commandToExecute']['outputTexture']=_0x2b07e2['particlesTextures']['particlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':_0x7b734f(-0x43,-0x73),'uniformMap':{'currentParticlesPosition':function(){function _0x9d6f9b(_0x5efbfb,_0x1d038e){return _0x7b734f(_0x1d038e-0x417,_0x5efbfb);}return _0x2b07e2[_0x9d6f9b(0x3b5,0x3b6)]['currentParticlesPosition'];},'particlesSpeed':function(){function _0x46b9a6(_0x330f51,_0x148ddd){return _0x7b734f(_0x148ddd- -0x46,_0x330f51);}return _0x2b07e2[_0x46b9a6(-0xf1,-0xa7)]['particlesSpeed'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x4eb6ac),'outputTexture':this['particlesTextures'][_0x16f858(-0x99,-0xd2)],'preExecute':function(){function _0x27724f(_0x20b1f1,_0x366316){return _0x16f858(_0x20b1f1-0x4d7,_0x366316);}function _0x2c1ea2(_0x5e8294,_0x28522d){return _0x7b734f(_0x5e8294- -0x60,_0x28522d);}_0x2b07e2[_0x2c1ea2(-0x19,-0x31)]['updatePosition'][_0x27724f(0x505,0x4ea)]['outputTexture']=_0x2b07e2['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':function(){return _0x2b07e2['particlesTextures']['nextParticlesPosition'];},'particlesSpeed':function(){function _0x58e07f(_0x33c8a8,_0x143fd9){return _0x16f858(_0x33c8a8-0x505,_0x143fd9);}function _0x38f0f2(_0x4de689,_0x55b781){return _0x7b734f(_0x4de689-0x146,_0x55b781);}return _0x2b07e2[_0x58e07f(0x40a,0x415)][_0x38f0f2(0x203,0x183)];},'viewerLonRange':function(){function _0x1d01b6(_0x18b180,_0x5eab66){return _0x16f858(_0x18b180-0x23a,_0x5eab66);}return _0xb7866f[_0x1d01b6(0x24a,0x25c)];},'viewerLatRange':function(){return _0xb7866f['latRange'];},'lonRange':function(){return _0x563717;},'latRange':function(){return _0x14c5a5;},'dimension':function(){return _0x2f92f3;},'minimum':function(){return _0x2b6b4e;},'maximum':function(){return _0x5bd490;},'interval':function(){return _0x18d5d1;},'H':function(){return _0x2b07e2['windTextures']['H'];},'randomCoefficient':function(){const _0x577152=Math['random']();return _0x577152;},'dropRate':function(){return _0x347c3e['dropRate'];},'dropRateBump':function(){function _0x2dee10(_0x316e37,_0x39ffd7){return _0x7b734f(_0x39ffd7-0x197,_0x316e37);}return _0x347c3e[_0x2dee10(0x262,0x232)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x22eab),'outputTexture':this[_0x16f858(-0xfb,-0x87)][_0x16f858(-0xd2,-0xcd)],'preExecute':function(){function _0xf1c2de(_0x4a86e8,_0x282183){return _0x7b734f(_0x282183-0x3e9,_0x4a86e8);}_0x2b07e2[_0xf1c2de(0x4b0,0x430)]['postProcessingPosition']['commandToExecute']['outputTexture']=_0x2b07e2['particlesTextures']['postProcessingPosition'];}})};}}const Cesium$2=mars3d__namespace['Cesium'];class ParticleSystem{constructor(_0x2fe774,_0x462cd8,_0x97df72,_0x5d117d){this['context']=_0x2fe774,_0x462cd8={..._0x462cd8};function _0x50cce7(_0x4dc7f8,_0x1ca8b0){return _0x5ed0a7(_0x4dc7f8-0x532,_0x1ca8b0);}_0x462cd8[_0x50cce7(0x51e,0x516)]&&_0x462cd8[_0x50cce7(0x434,0x3f7)]&&(_0x462cd8[_0x30c6f0(-0x63,0x30)]={},_0x462cd8[_0x50cce7(0x4ad,0x512)]['lon']=_0x462cd8[_0x50cce7(0x41e,0x40f)],_0x462cd8['dimensions'][_0x30c6f0(0xed,0x88)]=_0x462cd8['rows'],_0x462cd8[_0x30c6f0(0xb6,0x30)]['lev']=_0x462cd8['lev']||0x1,_0x462cd8['lon']={},_0x462cd8[_0x50cce7(0x514,0x4ca)]['min']=_0x462cd8['xmin'],_0x462cd8['lon']['max']=_0x462cd8[_0x30c6f0(-0x13,0x2f)],_0x462cd8['lat']={},_0x462cd8[_0x30c6f0(0x109,0x88)]['min']=_0x462cd8[_0x30c6f0(0x12,0x4f)],_0x462cd8['lat'][_0x30c6f0(0x94,0xa9)]=_0x462cd8['ymax'],_0x462cd8['lev']={},_0x462cd8[_0x30c6f0(-0x4a,0x46)][_0x50cce7(0x52d,0x58e)]=_0x462cd8[_0x30c6f0(-0x2a,-0x22)]??0x1,_0x462cd8['lev'][_0x30c6f0(0x66,0xa9)]=_0x462cd8[_0x30c6f0(-0x1d,0x32)]??0x1,_0x462cd8['U']={},_0x462cd8['U']['array']=new Float32Array(_0x462cd8[_0x50cce7(0x51e,0x4e7)]),_0x462cd8['U']['min']=_0x462cd8['umin']??Math['min'](..._0x462cd8[_0x50cce7(0x51e,0x594)]),_0x462cd8['U'][_0x50cce7(0x526,0x533)]=_0x462cd8[_0x50cce7(0x494,0x42e)]??Math[_0x30c6f0(0x75,0xa9)](..._0x462cd8['udata']),_0x462cd8['V']={},_0x462cd8['V'][_0x30c6f0(0x28,-0x29)]=new Float32Array(_0x462cd8[_0x50cce7(0x434,0x49b)]),_0x462cd8['V'][_0x30c6f0(0x105,0xb0)]=_0x462cd8['vmin']??Math['min'](..._0x462cd8['vdata']),_0x462cd8['V']['max']=_0x462cd8['vmax']??Math[_0x50cce7(0x526,0x4ae)](..._0x462cd8['vdata']));function _0x30c6f0(_0x53f8e6,_0x8ed0ec){return _0x1ada75(_0x53f8e6,_0x8ed0ec- -0x498);}!_0x462cd8['W']&&(_0x462cd8['W']={'array':new Float32Array(_0x462cd8['U']['array'][_0x30c6f0(0x10c,0x92)]),'min':0x0,'max':0x0});if(!_0x462cd8['H']){var _0x3eb58b;_0x462cd8['H']={'array':new Float32Array(_0x462cd8['U']['array']['length']),'min':0x0,'max':0x0};if((_0x3eb58b=_0x462cd8[_0x30c6f0(0x98,0x46)])!==null&&_0x3eb58b!==void 0x0&&_0x3eb58b['array']){const {lon:_0x469823,lat:_0x36d59d,lev:_0x88e611}=_0x462cd8[_0x50cce7(0x4ad,0x4f1)];for(let _0x58aca7=0x0;_0x58aca7<_0x88e611;_0x58aca7++){for(let _0x133a06=0x0;_0x133a06<_0x36d59d;_0x133a06++){for(let _0x34a762=0x0;_0x34a762<_0x469823;_0x34a762++){const _0x41081c=_0x58aca7*(_0x469823*_0x36d59d)+_0x133a06*_0x469823+_0x34a762;_0x462cd8['H']['array'][_0x41081c]=_0x462cd8['lev'][_0x30c6f0(0x3b,-0x29)][_0x58aca7];}}}_0x462cd8['H']['min']=Math[_0x50cce7(0x52d,0x5b8)](..._0x462cd8['lev'][_0x50cce7(0x454,0x412)]),_0x462cd8['H']['max']=Math[_0x30c6f0(0xa2,0xa9)](..._0x462cd8['lev']['array']);}}this[_0x30c6f0(0x7d,0x65)]=_0x462cd8,this[_0x30c6f0(-0x5a,-0x64)]=_0x97df72,this['viewerParameters']=_0x5d117d,this['particlesComputing']=new ParticlesComputing(this[_0x30c6f0(-0x4,0x34)],this['data'],this['options'],this[_0x30c6f0(-0x89,-0x61)]),this[_0x50cce7(0x43e,0x3d9)]=new ParticlesRendering(this['context'],this[_0x50cce7(0x4e2,0x53d)],this['options'],this[_0x50cce7(0x41c,0x446)],this[_0x30c6f0(-0x26,-0x53)]);}[_0x1ada75(0x449,0x44e)](_0x1901f5){function _0x2d5e67(_0x265f3b,_0x2e1a49){return _0x5ed0a7(_0x2e1a49-0x262,_0x265f3b);}this[_0x2d5e67(0x16b,0x15a)][_0x2d5e67(0x200,0x217)](),Object['keys'](this[_0x25bca2(-0xeb,-0x7d)]['windTextures'])['forEach'](_0x5bd3b5=>{function _0x20a15a(_0x27f1c6,_0xa3a2dd){return _0x25bca2(_0xa3a2dd,_0x27f1c6-0x385);}function _0x30994d(_0x377409,_0x12ea96){return _0x2d5e67(_0x12ea96,_0x377409- -0x3c7);}this['particlesComputing'][_0x30994d(-0x20f,-0x258)][_0x5bd3b5][_0x20a15a(0x30b,0x2c3)]();});function _0x25bca2(_0x725d2d,_0x1d3fa9){return _0x5ed0a7(_0x1d3fa9-0x8b,_0x725d2d);}this[_0x25bca2(-0xaf,-0x69)]['textures']['colorTable'][_0x2d5e67(0x1f7,0x15d)](),Object[_0x25bca2(-0x57,-0x91)](this[_0x2d5e67(0x10e,0x16e)]['framebuffers'])[_0x25bca2(0xc,0x1)](_0x291979=>{function _0x2c3a5f(_0x1d8355,_0x1454eb){return _0x2d5e67(_0x1454eb,_0x1d8355- -0x2a2);}this['particlesRendering']['framebuffers'][_0x291979][_0x2c3a5f(-0x145,-0x1b7)]();}),this['context']=_0x1901f5,this[_0x2d5e67(0x133,0x15a)]=new ParticlesComputing(this['context'],this['data'],this['options'],this['viewerParameters']),this['particlesRendering']=new ParticlesRendering(this['context'],this['data'],this['options'],this['viewerParameters'],this['particlesComputing']);}['clearFramebuffers'](){const _0x447da2=new Cesium$2[(_0x1eed0b(0x5d8,0x563))]({'color':new Cesium$2[(_0x52891c(0x3a8,0x3a1))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x52891c(0x267,0x2fe)]['OPAQUE']});function _0x52891c(_0x594ab3,_0x1744c3){return _0x5ed0a7(_0x1744c3-0x421,_0x594ab3);}function _0x1eed0b(_0x1498a0,_0x40df5a){return _0x1ada75(_0x40df5a,_0x1498a0-0x99);}Object[_0x1eed0b(0x4ca,0x436)](this['particlesRendering'][_0x1eed0b(0x4f8,0x4b4)])['forEach'](_0x336cbe=>{_0x447da2['framebuffer']=this['particlesRendering']['framebuffers'][_0x336cbe];function _0x139a84(_0x5e3915,_0x4aa377){return _0x52891c(_0x5e3915,_0x4aa377- -0x6);}_0x447da2[_0x139a84(0x3c3,0x34e)](this['context']);});}['refreshParticles'](_0x816cc1,_0x41d811=!![]){function _0x1b850d(_0xb53a70,_0x3d3f6a){return _0x5ed0a7(_0xb53a70-0x3cd,_0x3d3f6a);}_0x41d811&&(this['clearFramebuffers'](),this['particlesComputing']['destroyParticlesTextures'](),this['particlesComputing']['createParticlesTextures'](this[_0x30687a(0x465,0x446)],this['options'],this['viewerParameters']));function _0x30687a(_0x56fdce,_0x29e5b0){return _0x5ed0a7(_0x56fdce-0x4e6,_0x29e5b0);}if(_0x816cc1){var _0x170ef8;const _0x2585a3=this[_0x30687a(0x3f2,0x46e)][_0x1b850d(0x2fa,0x26d)](this[_0x1b850d(0x2b4,0x2af)]);this[_0x30687a(0x3f2,0x362)][_0x30687a(0x473,0x4b6)]['segments']['geometry']=_0x2585a3;const _0x52b750=Cesium$2['VertexArray']['fromGeometry']({'context':this['context'],'geometry':_0x2585a3,'attributeLocations':this['particlesRendering']['primitives']['segments']['attributeLocations'],'bufferUsage':Cesium$2[_0x1b850d(0x3b0,0x3d9)]['STATIC_DRAW']});(_0x170ef8=this['particlesRendering']['primitives'])!==null&&_0x170ef8!==void 0x0&&(_0x170ef8=_0x170ef8[_0x1b850d(0x388,0x35b)])!==null&&_0x170ef8!==void 0x0&&_0x170ef8['commandToExecute']&&(this[_0x30687a(0x3f2,0x37b)]['primitives']['segments'][_0x1b850d(0x3db,0x444)]['vertexArray']=_0x52b750);}}['setOptions'](_0x9edff2){let _0x35867d=![];function _0x90a8cc(_0x1a7854,_0x904e20){return _0x1ada75(_0x1a7854,_0x904e20- -0x4ee);}this[_0x90a8cc(-0x95,-0xba)][_0x90a8cc(-0xe,0x6)]!==_0x9edff2['maxParticles']&&(_0x35867d=!![]);Object[_0x90a8cc(-0x81,-0xbd)](_0x9edff2)['forEach'](_0x33ba44=>{function _0x6a1948(_0xd11e1f,_0x5cb5ae){return _0x90a8cc(_0xd11e1f,_0x5cb5ae- -0x22c);}this[_0x6a1948(-0x2d4,-0x2e6)][_0x33ba44]=_0x9edff2[_0x33ba44];});function _0x25246c(_0x1a25b0,_0x37babb){return _0x5ed0a7(_0x37babb- -0x9c,_0x1a25b0);}this['refreshParticles'](_0x35867d,_0x9edff2['dynamic']);}[_0x1ada75(0x4a0,0x4d2)](_0x377c80){function _0x4085ee(_0x10c3d9,_0x4af4b2){return _0x1ada75(_0x4af4b2,_0x10c3d9- -0x317);}function _0x391b37(_0x7dcf71,_0x5c04d2){return _0x5ed0a7(_0x5c04d2-0x4c0,_0x7dcf71);}Object['keys'](_0x377c80)[_0x391b37(0x3df,0x436)](_0x55b456=>{function _0x36ba54(_0x5a8e0e,_0x304169){return _0x391b37(_0x304169,_0x5a8e0e- -0x1bd);}this[_0x36ba54(0x1ed,0x25b)][_0x55b456]=_0x377c80[_0x55b456];}),this[_0x4085ee(0x176,0x11e)](![]),!this[_0x4085ee(0x11d,0x9a)]['dynamic']&&(this['options']['dynamic']=!![],this['setOptions'](this['options']),setTimeout(()=>{this['options']['dynamic']=![],this['setOptions'](this['options']);},0x1f4));}[_0x5ed0a7(-0x105,-0xae)](){function _0x1d6bc1(_0x10cdeb,_0x463f20){return _0x5ed0a7(_0x10cdeb-0x57c,_0x463f20);}clearTimeout(this['canrefresh']),this['particlesComputing']['destroyParticlesTextures'](),Object['keys'](this[_0x7dfa1f(-0x44,-0x4)]['windTextures'])[_0x1d6bc1(0x4f2,0x533)](_0x4fa653=>{this['particlesComputing']['windTextures'][_0x4fa653]['destroy']();});function _0x7dfa1f(_0x48e9ce,_0x118452){return _0x5ed0a7(_0x48e9ce-0xc4,_0x118452);}this['particlesRendering']['textures'][_0x7dfa1f(0x98,0x85)]['destroy'](),Object[_0x1d6bc1(0x460,0x474)](this[_0x1d6bc1(0x488,0x469)]['framebuffers'])['forEach'](_0x525d96=>{function _0x21c38b(_0x2350b1,_0x10ccfb){return _0x7dfa1f(_0x10ccfb- -0xe9,_0x2350b1);}function _0x51d072(_0x540aa4,_0x6a757f){return _0x1d6bc1(_0x540aa4- -0x120,_0x6a757f);}this[_0x21c38b(-0x191,-0x119)]['framebuffers'][_0x525d96][_0x51d072(0x357,0x2d7)]();});for(const _0x24562f in this){delete this[_0x24562f];}}}const Cesium$1=mars3d__namespace[_0x1ada75(0x48a,0x4ef)],BaseLayer$1=mars3d__namespace[_0x1ada75(0x51e,0x4ed)]['BaseLayer'];function _0x1ada75(_0x57080c,_0x5ebbd6){return _0x1fbb(_0x5ebbd6-0x346,_0x57080c);}const _0x48178a={};_0x48178a[_0x1ada75(0x487,0x46c)]=0x1000,_0x48178a[_0x1ada75(0x52d,0x4ba)]=0x0,_0x48178a[_0x1ada75(0x50b,0x4b4)]=0.996;function _0x5ed0a7(_0x2e8071,_0x317502){return _0x1fbb(_0x2e8071- -0x207,_0x317502);}_0x48178a['dropRate']=0.003,_0x48178a['dropRateBump']=0.01,_0x48178a['speedFactor']=0.5,_0x48178a['lineWidth']=0x2,_0x48178a[_0x5ed0a7(-0xb2,-0x103)]=['rgb(206,255,255)'],_0x48178a[_0x1ada75(0x4b3,0x461)]=!![];const DEF_OPTIONS=_0x48178a;class WindLayer extends BaseLayer$1{constructor(_0x550249={}){_0x550249={...DEF_OPTIONS,..._0x550249};function _0x33e7be(_0x1a49a1,_0x1326a7){return _0x5ed0a7(_0x1a49a1-0x8f,_0x1326a7);}super(_0x550249),this[_0x33e7be(0x7,0x6b)](_0x550249);}get[_0x5ed0a7(-0x60,-0x7d)](){return this['primitives'];}get[_0x1ada75(0x495,0x4fd)](){return this['_data'];}set['data'](_0x531be8){this['setData'](_0x531be8);}get[_0x1ada75(0x520,0x49b)](){function _0x59cbd5(_0x555254,_0x11be00){return _0x1ada75(_0x555254,_0x11be00-0x4a);}return this['options'][_0x59cbd5(0x4b8,0x4e5)];}set['colors'](_0x1eccbf){this['options']['colors']=_0x1eccbf;if(this[_0x58f7b9(-0x224,-0x1c3)]){const _0x41ce39={};_0x41ce39['colors']=_0x1eccbf,this['particleSystem']['setOptions'](_0x41ce39);}function _0x58f7b9(_0x48f144,_0x2278cb){return _0x1ada75(_0x48f144,_0x2278cb- -0x66f);}this['resize']();}['_mountedHook'](){}['_addedHook'](){this[_0x445138(0x400,0x422)]=this[_0x445138(0x350,0x34a)]['scene'],this['camera']=this[_0x31fbff(0x44d,0x42b)]['camera'],this['primitives']=new Cesium$1['PrimitiveCollection'](),this['_map'][_0x31fbff(0x554,0x503)]['primitives'][_0x445138(0x355,0x311)](this['primitives']),this['viewerParameters']={'lonRange':new Cesium$1[(_0x31fbff(0x47f,0x40e))](),'latRange':new Cesium$1['Cartesian2'](),'pixelSize':0x0,'lonDisplayRange':new Cesium$1[(_0x31fbff(0x42f,0x40e))](),'latDisplayRange':new Cesium$1['Cartesian2']()},this[_0x445138(0x3ae,0x3a4)]=new Cesium$1['BoundingSphere'](Cesium$1['Cartesian3'][_0x445138(0x410,0x3ad)],Cesium$1[_0x31fbff(0x49c,0x470)][_0x31fbff(0x44b,0x48f)]['minimumRadius']),this['updateViewerParameters'](),window['addEventListener'](_0x31fbff(0x470,0x431),this[_0x445138(0x2e7,0x350)]['bind'](this),![]);function _0x31fbff(_0x5acea0,_0x1b3ac5){return _0x5ed0a7(_0x1b3ac5-0x4ff,_0x5acea0);}this[_0x445138(0x44f,0x3de)]=![],this[_0x445138(0x30a,0x304)]=![],this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x31fbff(0x408,0x42b)]['on'](mars3d__namespace[_0x445138(0x3c2,0x3f4)][_0x445138(0x3fc,0x3cd)],this[_0x31fbff(0x4f1,0x4c0)],this),this[_0x445138(0x2cc,0x34a)]['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this);function _0x445138(_0x4f4802,_0x20255e){return _0x1ada75(_0x4f4802,_0x20255e- -0x12f);}this['_map']['on'](mars3d__namespace[_0x445138(0x3ca,0x3f4)][_0x445138(0x414,0x3a1)],this['_onMouseMoveEvent'],this),this['_data']&&this['setData'](this[_0x31fbff(0x3ff,0x429)]);}[_0x5ed0a7(0x2,-0x67)](){window[_0x1994a3(-0x25,-0xa3)]('resize',this['resize']),this[_0x1775fb(-0xd1,-0x137)][_0x1994a3(-0x15b,-0x134)](mars3d__namespace[_0x1994a3(-0x21,-0x65)][_0x1775fb(-0xe2,-0x17a)],this['_onMap_preRenderEvent'],this),this['_map'][_0x1775fb(-0x1d6,-0x15c)](mars3d__namespace[_0x1994a3(-0xce,-0x65)]['wheel'],this[_0x1994a3(-0xc1,-0x46)],this),this['_map']['off'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this);function _0x1775fb(_0xce2128,_0x46d703){return _0x5ed0a7(_0x46d703- -0x63,_0xce2128);}this['_map']['off'](mars3d__namespace[_0x1775fb(-0xb7,-0x8d)]['mouseUp'],this[_0x1994a3(-0x147,-0x133)],this);function _0x1994a3(_0x55f457,_0x27fe91){return _0x5ed0a7(_0x27fe91- -0x3b,_0x55f457);}this[_0x1994a3(-0x19d,-0x10f)][_0x1775fb(-0xd1,-0x15c)](mars3d__namespace[_0x1775fb(-0x11b,-0x8d)][_0x1775fb(-0xea,-0xe0)],this[_0x1994a3(-0x109,-0x14e)],this),this[_0x1994a3(-0x97,-0xae)][_0x1994a3(-0xbf,-0x12a)](),this['_map'][_0x1775fb(-0x5,-0x5f)][_0x1994a3(-0x141,-0xae)][_0x1775fb(-0x12c,-0x99)](this['primitives']);}['resize'](){if(!this['show']||!this['particleSystem'])return;this['primitives'][_0x35a46b(0x1b0,0x12d)]=![];function _0xa7cdf5(_0x39919d,_0x349d67){return _0x1ada75(_0x39919d,_0x349d67- -0x3a);}function _0x35a46b(_0x2ab056,_0x300b17){return _0x5ed0a7(_0x2ab056-0x1e3,_0x300b17);}this[_0xa7cdf5(0x4a7,0x4a0)][_0x35a46b(0xf4,0x13a)](),this[_0x35a46b(0x10f,0x97)]['once'](mars3d__namespace[_0x35a46b(0x1b9,0x1fa)]['preRender'],this['_onMap_preRenderEvent'],this);}[_0x1ada75(0x3ca,0x435)](_0x26ef0e){function _0x57a42d(_0x41177a,_0x40ac3e){return _0x1ada75(_0x40ac3e,_0x41177a- -0x50a);}this[_0x5ea102(-0x1ea,-0x259)][_0x5ea102(-0x2d6,-0x2b7)](this['scene']['context']);function _0x5ea102(_0x10d0a8,_0x3bddad){return _0x5ed0a7(_0x3bddad- -0x1b8,_0x10d0a8);}this['addPrimitives'](),this[_0x5ea102(-0x27e,-0x22b)]['show']=!![];}['_onMapWhellEvent'](_0x1f1d9f){function _0x53d673(_0x21113b,_0x1d7461){return _0x1ada75(_0x21113b,_0x1d7461- -0x6f6);}clearTimeout(this[_0x8ee511(0x2b9,0x2b1)]);if(!this[_0x53d673(-0x234,-0x1dc)]||!this['particleSystem'])return;this['primitives']['show']=![];function _0x8ee511(_0x4601fb,_0x5512da){return _0x1ada75(_0x5512da,_0x4601fb- -0x26c);}this['refreshTimer']=setTimeout(()=>{function _0xa13fb(_0x2ada97,_0x3c0a31){return _0x8ee511(_0x3c0a31- -0x47a,_0x2ada97);}if(!this['show'])return;this[_0xa13fb(-0x241,-0x204)]();},0xc8);}['_onMouseDownEvent'](_0x1bcf71){function _0x2be9f1(_0xd351a2,_0x36604e){return _0x5ed0a7(_0x36604e- -0x23,_0xd351a2);}this[_0x2be9f1(-0x4e,-0x63)]=!![];}['_onMouseMoveEvent'](_0x4fde0b){function _0x1b7e4c(_0x41447b,_0x4a54ef){return _0x1ada75(_0x4a54ef,_0x41447b- -0x67f);}if(!this['show']||!this['particleSystem'])return;function _0x4d0387(_0x3cce39,_0x188dd8){return _0x5ed0a7(_0x188dd8-0x29c,_0x3cce39);}this['mouse_down']&&(this[_0x4d0387(0x1bd,0x229)]['show']=![],this[_0x4d0387(0x118,0x182)]=!![]);}[_0x5ed0a7(-0xf8,-0xf6)](_0x286933){if(!this[_0x548180(0x120,0x189)]||!this[_0x548180(0xb2,0x7a)])return;function _0x241e57(_0x5637ff,_0x36dc89){return _0x5ed0a7(_0x5637ff-0x568,_0x36dc89);}this['mouse_down']&&this['mouse_move']&&this[_0x548180(0xe8,0x97)]();function _0x548180(_0xfd73c6,_0x2cb976){return _0x1ada75(_0x2cb976,_0xfd73c6- -0x3fa);}this['primitives']['show']=!![],this[_0x548180(0x113,0x179)]=![],this[_0x241e57(0x44e,0x455)]=![];}[_0x5ed0a7(-0x6b,0x16)](){if(!this['_map']||!this['show'])return;this['updateViewerParameters']();function _0x20453a(_0x1dd0b7,_0x21684d){return _0x5ed0a7(_0x1dd0b7- -0xfe,_0x21684d);}this[_0x20453a(-0x19f,-0x14a)]['applyViewerParameters'](this['viewerParameters']),this['primitives']['show']=!![];}['setData'](_0x52ceb3){function _0x2a12ab(_0x2e60b2,_0x140384){return _0x5ed0a7(_0x2e60b2-0x490,_0x140384);}this['_data']=_0x52ceb3;this['particleSystem']&&this['particleSystem']['destroy']();function _0x152391(_0x544c34,_0x3675fb){return _0x1ada75(_0x3675fb,_0x544c34- -0x500);}this[_0x2a12ab(0x3ef,0x3f1)]=new ParticleSystem(this['scene'][_0x2a12ab(0x40f,0x458)],_0x52ceb3,this['getOptions'](),this['viewerParameters']),this[_0x2a12ab(0x42d,0x3c4)]();}['_setOptionsHook'](_0x134a85,_0x37915f){function _0x55cc35(_0x18edbb,_0x47fbd9){return _0x1ada75(_0x18edbb,_0x47fbd9- -0x39e);}if(_0x134a85)for(const _0x22e1fc in _0x134a85){this[_0x22e1fc]=_0x134a85[_0x22e1fc];}function _0x53d75d(_0x351490,_0xd051a9){return _0x5ed0a7(_0x351490-0x64,_0xd051a9);}this[_0x53d75d(-0x3d,-0x1d)]&&this['particleSystem'][_0x53d75d(0x5e,0xbf)](this[_0x55cc35(0xf9,0x153)]());}['getOptions'](){function _0x221564(_0x1623f0,_0xabbd46){return _0x5ed0a7(_0x1623f0- -0x183,_0xabbd46);}const _0x37e41f=Math['ceil'](Math['sqrt'](this['particlesNumber']));this['particlesNumber']=_0x37e41f*_0x37e41f;const _0x2a8c60={};_0x2a8c60['particlesTextureSize']=_0x37e41f,_0x2a8c60['maxParticles']=this['particlesNumber'],_0x2a8c60['colors']=this[_0x1ae21b(-0xed,-0x165)],_0x2a8c60['particleHeight']=this[_0x221564(-0x216,-0x1d4)],_0x2a8c60['fadeOpacity']=this[_0x1ae21b(-0xd3,-0x14c)],_0x2a8c60[_0x1ae21b(-0x179,-0x13e)]=this[_0x1ae21b(-0xa6,-0x13e)],_0x2a8c60['dropRateBump']=this[_0x1ae21b(-0xc5,-0xd2)];function _0x1ae21b(_0x55dfbc,_0x2ea267){return _0x1ada75(_0x55dfbc,_0x2ea267- -0x600);}return _0x2a8c60['speedFactor']=this[_0x1ae21b(-0x71,-0xbc)],_0x2a8c60['lineWidth']=this['lineWidth'],_0x2a8c60[_0x1ae21b(-0x171,-0x19f)]=this[_0x1ae21b(-0x178,-0x19f)],_0x2a8c60;}['addPrimitives'](){this['primitives']['add'](this[_0x514a48(-0x1cc,-0x22c)][_0x514a48(-0x233,-0x234)]['primitives'][_0x514a48(-0x1c1,-0x213)]),this[_0x23fafa(0x41a,0x3e3)]['add'](this['particleSystem'][_0x23fafa(0x385,0x37d)]['primitives']['updatePosition']),this[_0x514a48(-0x19e,-0x227)]['add'](this['particleSystem']['particlesComputing']['primitives']['postProcessingPosition']);function _0x514a48(_0x3c90bb,_0x45b9f4){return _0x1ada75(_0x45b9f4,_0x3c90bb- -0x678);}function _0x23fafa(_0x5f10a2,_0x294f93){return _0x1ada75(_0x294f93,_0x5f10a2- -0xc0);}this['primitives'][_0x23fafa(0x380,0x319)](this[_0x514a48(-0x1cc,-0x150)]['particlesRendering']['primitives']['segments']),this['primitives']['add'](this[_0x23fafa(0x3ec,0x408)]['particlesRendering']['primitives']['trails']),this[_0x514a48(-0x19e,-0x186)]['add'](this['particleSystem'][_0x514a48(-0x21f,-0x27c)][_0x23fafa(0x41a,0x400)]['screen']);}['updateViewerParameters'](){let _0x1751e3=this['camera'][_0x179f3a(0x149,0x171)](this[_0x179f3a(0x1a4,0x1ea)][_0x5046cd(0x1fd,0x166)][_0x5046cd(0x58,0x83)]);function _0x179f3a(_0x122d4e,_0x3be886){return _0x5ed0a7(_0x3be886-0x1e6,_0x122d4e);}if(!_0x1751e3){const _0x430b0b=this[_0x179f3a(0xf5,0x112)]['getExtent']();_0x1751e3=Cesium$1['Rectangle']['fromDegrees'](_0x430b0b['xmin'],_0x430b0b['ymin'],_0x430b0b['xmax'],_0x430b0b[_0x5046cd(0x2b,0x55)]);}function _0x5046cd(_0x49eaf8,_0x3a702e){return _0x5ed0a7(_0x3a702e-0x165,_0x49eaf8);}const _0x24aa75=Util[_0x179f3a(0x233,0x1a2)](_0x1751e3);this[_0x179f3a(0x15e,0x110)]?(this['viewerParameters'][_0x179f3a(0x153,0x1d6)]['x']=Math['max'](_0x24aa75[_0x179f3a(0x21a,0x1c8)]['min'],this['_data'][_0x5046cd(0x19b,0x127)]),this['viewerParameters']['lonRange']['y']=Math['min'](_0x24aa75['lon']['max'],this[_0x5046cd(0x46,0x8f)]['xmax']),this['viewerParameters'][_0x179f3a(0x166,0x16f)]['x']=Math['max'](_0x24aa75['lat']['min'],this[_0x5046cd(0x5,0x8f)]['ymin']),this['viewerParameters']['latRange']['y']=Math[_0x179f3a(0x25f,0x1e1)](_0x24aa75[_0x179f3a(0x1a3,0x1b9)]['max'],this['_data']['ymax'])):(this['viewerParameters'][_0x179f3a(0x22d,0x1d6)]['x']=_0x24aa75[_0x179f3a(0x1bf,0x1c8)]['min'],this['viewerParameters'][_0x179f3a(0x210,0x1d6)]['y']=_0x24aa75[_0x5046cd(0xd4,0x147)]['max'],this[_0x5046cd(0x36,0x4f)][_0x179f3a(0x199,0x16f)]['x']=_0x24aa75[_0x5046cd(0x144,0x138)][_0x179f3a(0x1d7,0x1e1)],this['viewerParameters']['latRange']['y']=_0x24aa75['lat']['max']);let _0x11f1ea=this['camera'][_0x179f3a(0x164,0x1e4)](this[_0x5046cd(0x8e,0xeb)],this[_0x5046cd(0x1d2,0x169)]['drawingBufferWidth'],this['scene'][_0x179f3a(0x12d,0x174)]);const _0x3c0f16=this[_0x5046cd(0x13d,0x169)]['drawingBufferHeight']*0.3;_0x11f1ea<_0x3c0f16&&(_0x11f1ea=_0x3c0f16),this['viewerParameters'][_0x5046cd(0x94,0xd0)]=_0x11f1ea;}}mars3d__namespace[_0x5ed0a7(-0x56,-0x33)][_0x5ed0a7(-0x46,-0xaf)]('wind',WindLayer),mars3d__namespace['layer'][_0x5ed0a7(-0x106,-0x186)]=WindLayer;class CanvasParticle{constructor(){this['lng']=null;function _0x33a51b(_0x323a08,_0x153647){return _0x1ada75(_0x153647,_0x323a08- -0x728);}this['lat']=null,this['tlng']=null,this['tlat']=null,this[_0x33a51b(-0x1fd,-0x1ff)]=null,this['speed']=null;}[_0x1ada75(0x431,0x448)](){for(const _0x5dbed8 in this){delete this[_0x5dbed8];}}}class CanvasWindField{constructor(_0x4e2604){function _0x55ac48(_0x1cbfc3,_0x1f5d10){return _0x1ada75(_0x1cbfc3,_0x1f5d10-0x79);}this[_0x55ac48(0x55b,0x5c0)](_0x4e2604);}get[_0x5ed0a7(-0xfb,-0xb4)](){return this['_speedRate'];}set['speedRate'](_0x19c64c){this['_speedRate']=(0x64-(_0x19c64c>0x63?0x63:_0x19c64c))*0x64;function _0x16d4c4(_0x3f05c1,_0x267fae){return _0x5ed0a7(_0x267fae-0x297,_0x3f05c1);}function _0xe3840d(_0x454192,_0x51339c){return _0x1ada75(_0x454192,_0x51339c- -0x6e6);}this[_0x16d4c4(0x2a9,0x22e)]=[(this[_0xe3840d(-0x197,-0x21f)]-this['xmin'])/this[_0x16d4c4(0x274,0x24a)],(this['ymax']-this['ymin'])/this['_speedRate']];}get['maxAge'](){function _0x27c511(_0x42e3d9,_0x35af0e){return _0x1ada75(_0x35af0e,_0x42e3d9- -0x603);}return this[_0x27c511(-0x165,-0x1ed)];}set['maxAge'](_0x252eba){function _0x2820d6(_0x41512e,_0xf01598){return _0x1ada75(_0x41512e,_0xf01598- -0x422);}this[_0x2820d6(-0x19,0x7c)]=_0x252eba;}['setOptions'](_0x4631bc){this[_0xdf5957(0x494,0x419)]=_0x4631bc,this['maxAge']=_0x4631bc['maxAge']||0x78,this['speedRate']=_0x4631bc['speedRate']||0x32;function _0xdf5957(_0x22f3c5,_0x4e3774){return _0x5ed0a7(_0x22f3c5-0x5ad,_0x4e3774);}function _0x467a24(_0x4e2c60,_0x4953c7){return _0x1ada75(_0x4953c7,_0x4e2c60-0x8b);}this[_0x467a24(0x53c,0x5b0)]=[];const _0x3a5e16=_0x4631bc['particlesNumber']||0x1000;for(let _0x593514=0x0;_0x593514<_0x3a5e16;_0x593514++){const _0x40a686=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x40a686);}}[_0x1ada75(0x4ee,0x512)](_0x332a9d){this[_0x20fda9(-0x17c,-0x105)]=_0x332a9d['rows'],this[_0x217f47(0x255,0x2d2)]=_0x332a9d['cols'],this[_0x217f47(0x32b,0x2a5)]=_0x332a9d['xmin'],this['xmax']=_0x332a9d['xmax'],this[_0x20fda9(-0x125,-0xae)]=_0x332a9d['ymin'],this['ymax']=_0x332a9d['ymax'],this[_0x20fda9(-0x168,-0x1bb)]=[];const _0x29b393=_0x332a9d['udata'],_0x46c2db=_0x332a9d[_0x20fda9(-0x1bd,-0x160)];let _0x50a30f=![];function _0x217f47(_0x86acb4,_0x2c0c7e){return _0x1ada75(_0x2c0c7e,_0x86acb4- -0x1e4);}_0x29b393['length']===this['rows']&&_0x29b393[0x0][_0x20fda9(-0xe2,-0xa5)]===this['cols']&&(_0x50a30f=!![]);let _0x30e5db=0x0,_0x1561ae=null,_0x24f68b=null;function _0x20fda9(_0x328ca1,_0x41553a){return _0x1ada75(_0x41553a,_0x328ca1- -0x60c);}for(let _0x4abf41=0x0;_0x4abf41<this['rows'];_0x4abf41++){_0x1561ae=[];for(let _0x5443ec=0x0;_0x5443ec<this['cols'];_0x5443ec++,_0x30e5db++){_0x50a30f?_0x24f68b=this['_calcUV'](_0x29b393[_0x4abf41][_0x5443ec],_0x46c2db[_0x4abf41][_0x5443ec]):_0x24f68b=this['_calcUV'](_0x29b393[_0x30e5db],_0x46c2db[_0x30e5db]),_0x1561ae[_0x217f47(0x286,0x2ef)](_0x24f68b);}this['grid'][_0x217f47(0x286,0x240)](_0x1561ae);}this[_0x20fda9(-0x1d8,-0x21b)]['reverseY']&&this['grid'][_0x20fda9(-0xf9,-0xb4)]();}['clear'](){delete this[_0x5376ee(0x3b3,0x39d)],delete this['cols'],delete this['xmin'],delete this['xmax'],delete this[_0x5376ee(0x38c,0x3f4)],delete this['ymax'];function _0x4bcb7f(_0x2e9348,_0x5339b3){return _0x1ada75(_0x2e9348,_0x5339b3- -0x1e3);}delete this[_0x5376ee(0x36a,0x3b1)];function _0x5376ee(_0x128298,_0x5a29d5){return _0x1ada75(_0x128298,_0x5a29d5- -0xf3);}delete this[_0x4bcb7f(0x2cb,0x2ce)];}['toGridXY'](_0x494c9f,_0x546746){const _0x312998=(_0x494c9f-this['xmin'])/(this['xmax']-this['xmin'])*(this[_0x3dcea9(0x85,0x76)]-0x1);function _0x598273(_0x1a0cf7,_0x371855){return _0x5ed0a7(_0x1a0cf7- -0x114,_0x371855);}const _0x16b677=(this[_0x3dcea9(0xda,0x7a)]-_0x546746)/(this[_0x598273(-0x224,-0x1da)]-this[_0x598273(-0x17a,-0xe5)])*(this[_0x3dcea9(0xc5,0xcd)]-0x1);function _0x3dcea9(_0x18193e,_0x166701){return _0x5ed0a7(_0x166701-0x18a,_0x18193e);}return[_0x312998,_0x16b677];}[_0x5ed0a7(-0xe5,-0x126)](_0x2c123f,_0x1f4592){if(_0x2c123f<0x0||_0x2c123f>=this['cols']||_0x1f4592>=this['rows'])return[0x0,0x0,0x0];const _0x4e04b4=Math['floor'](_0x2c123f),_0x5ed270=Math[_0x188d14(0x72,-0xe)](_0x1f4592);if(_0x4e04b4===_0x2c123f&&_0x5ed270===_0x1f4592)return this['grid'][_0x1f4592][_0x2c123f];const _0x24c395=_0x4e04b4+0x1,_0x2d4d34=_0x5ed270+0x1,_0x536a8d=this[_0x1dc325(-0x2dc,-0x257)](_0x4e04b4,_0x5ed270),_0x39d9c1=this['getUVByXY'](_0x24c395,_0x5ed270),_0x16cd2b=this['getUVByXY'](_0x4e04b4,_0x2d4d34);function _0x188d14(_0x3b44a8,_0x3410a4){return _0x1ada75(_0x3b44a8,_0x3410a4- -0x4f6);}const _0x171398=this['getUVByXY'](_0x24c395,_0x2d4d34);let _0x258532=null;function _0x1dc325(_0xd939bd,_0x32c850){return _0x5ed0a7(_0x32c850- -0x172,_0xd939bd);}try{_0x258532=this[_0x188d14(-0x66,0xf)](_0x2c123f-_0x4e04b4,_0x1f4592-_0x5ed270,_0x536a8d,_0x39d9c1,_0x16cd2b,_0x171398);}catch(_0x454c0e){console['log'](_0x2c123f,_0x1f4592);}return _0x258532;}['_bilinearInterpolation'](_0x1d58a7,_0x494766,_0x1d58cd,_0x496bbb,_0x1924ff,_0x154a8c){const _0x51266d=0x1-_0x1d58a7,_0x54818d=0x1-_0x494766,_0x594382=_0x51266d*_0x54818d,_0x53fd2c=_0x1d58a7*_0x54818d,_0x673752=_0x51266d*_0x494766,_0x51d0b7=_0x1d58a7*_0x494766,_0x4c6f9b=_0x1d58cd[0x0]*_0x594382+_0x496bbb[0x0]*_0x53fd2c+_0x1924ff[0x0]*_0x673752+_0x154a8c[0x0]*_0x51d0b7,_0x216ce9=_0x1d58cd[0x1]*_0x594382+_0x496bbb[0x1]*_0x53fd2c+_0x1924ff[0x1]*_0x673752+_0x154a8c[0x1]*_0x51d0b7;function _0x2240d3(_0x1afe13,_0x322aa6){return _0x5ed0a7(_0x322aa6-0xe2,_0x1afe13);}return this[_0x2240d3(-0x8a,-0x3b)](_0x4c6f9b,_0x216ce9);}['_calcUV'](_0x1a4b68,_0x36b82a){function _0x27ab24(_0x153c62,_0x43e56b){return _0x1ada75(_0x153c62,_0x43e56b- -0x3ef);}return[+_0x1a4b68,+_0x36b82a,Math[_0x27ab24(0xdd,0x7e)](_0x1a4b68*_0x1a4b68+_0x36b82a*_0x36b82a)];}['getUVByPoint'](_0x3b9d84,_0x258668){if(!this['isInExtent'](_0x3b9d84,_0x258668))return null;const _0x429e4e=this[_0x44e047(-0xef,-0x9d)](_0x3b9d84,_0x258668),_0x3b4180=this['getUVByXY'](_0x429e4e[0x0],_0x429e4e[0x1]);function _0x44e047(_0x20a79c,_0x1c2099){return _0x5ed0a7(_0x1c2099- -0xa3,_0x20a79c);}return _0x3b4180;}[_0x5ed0a7(-0x54,-0x77)](_0x3d8507,_0x27fb4d){function _0x495e3d(_0x268aea,_0x901fc5){return _0x5ed0a7(_0x268aea-0x405,_0x901fc5);}return _0x3d8507>=this['xmin']&&_0x3d8507<=this['xmax']&&_0x27fb4d>=this['ymin']&&_0x27fb4d<=this[_0x495e3d(0x2f5,0x290)]?!![]:![];}[_0x1ada75(0x4aa,0x50b)](){const _0x1ee672=fRandomByfloat(this[_0x150a88(-0x14d,-0x1ce)],this['xmax']),_0x175d51=fRandomByfloat(this['ymin'],this['ymax']),_0x3429ee={};_0x3429ee['lat']=_0x175d51;function _0x150a88(_0x47d889,_0x4106a6){return _0x5ed0a7(_0x4106a6- -0x190,_0x47d889);}return _0x3429ee['lng']=_0x1ee672,_0x3429ee;}['getParticles'](){let _0x4e1d04,_0x26657a,_0x5540a0;function _0x1c4c8a(_0x22d208,_0x80e147){return _0x5ed0a7(_0x80e147- -0xb6,_0x22d208);}function _0x27efe0(_0x278596,_0x457d34){return _0x5ed0a7(_0x278596-0x471,_0x457d34);}for(let _0x3646cf=0x0,_0x3ade2d=this['particles'][_0x27efe0(0x44e,0x4ab)];_0x3646cf<_0x3ade2d;_0x3646cf++){let _0x7abf05=this[_0x1c4c8a(-0x192,-0x152)][_0x3646cf];_0x7abf05['age']<=0x0&&(_0x7abf05=this['_randomParticle'](_0x7abf05));if(_0x7abf05[_0x27efe0(0x44f,0x4e2)]>0x0){const _0x178b79=_0x7abf05['tlng'],_0x2f1c14=_0x7abf05['tlat'];_0x5540a0=this['getUVByPoint'](_0x178b79,_0x2f1c14),_0x5540a0?(_0x4e1d04=_0x178b79+this['_calc_speedRate'][0x0]*_0x5540a0[0x0],_0x26657a=_0x2f1c14+this[_0x27efe0(0x408,0x3dc)][0x1]*_0x5540a0[0x1],_0x7abf05[_0x27efe0(0x417,0x411)]=_0x178b79,_0x7abf05[_0x27efe0(0x444,0x488)]=_0x2f1c14,_0x7abf05['tlng']=_0x4e1d04,_0x7abf05['tlat']=_0x26657a,_0x7abf05['speed']=_0x5540a0[0x2],_0x7abf05[_0x1c4c8a(-0x105,-0xd8)]--):_0x7abf05[_0x1c4c8a(-0x13e,-0xd8)]=0x0;}}return this[_0x1c4c8a(-0x122,-0x152)];}['_randomParticle'](_0x370fd9){let _0x353ab8,_0xe21eba;function _0xece076(_0x1ce1f2,_0x2d2153){return _0x1ada75(_0x1ce1f2,_0x2d2153- -0x1c7);}for(let _0x130c8f=0x0;_0x130c8f<0x1e;_0x130c8f++){_0x353ab8=this[_0xece076(0x2f6,0x344)](),_0xe21eba=this['getUVByPoint'](_0x353ab8['lng'],_0x353ab8[_0x21b6b3(0x1a5,0x156)]);if(_0xe21eba&&_0xe21eba[0x2]>0x0)break;}if(!_0xe21eba)return _0x370fd9;const _0x32a502=_0x353ab8[_0x21b6b3(0x106,0x129)]+this['_calc_speedRate'][0x0]*_0xe21eba[0x0],_0x425126=_0x353ab8['lat']+this['_calc_speedRate'][0x1]*_0xe21eba[0x1];_0x370fd9['lng']=_0x353ab8['lng'],_0x370fd9[_0xece076(0x3ae,0x359)]=_0x353ab8[_0xece076(0x3eb,0x359)],_0x370fd9['tlng']=_0x32a502,_0x370fd9['tlat']=_0x425126,_0x370fd9[_0xece076(0x2f5,0x364)]=Math[_0xece076(0x2fb,0x377)](Math[_0x21b6b3(0x177,0x18c)]()*this[_0x21b6b3(0x123,0x16a)]),_0x370fd9['speed']=_0xe21eba[0x2];function _0x21b6b3(_0x19439a,_0x180246){return _0x1ada75(_0x19439a,_0x180246- -0x3ca);}return _0x370fd9;}['destroy'](){for(const _0x4c5b33 in this){delete this[_0x4c5b33];}}}function _0x1fbb(_0x3c03fd,_0x353579){const _0x22e4ef=_0x22e4();return _0x1fbb=function(_0x1fbb08,_0x4039f4){_0x1fbb08=_0x1fbb08-0xe2;let _0xcc1279=_0x22e4ef[_0x1fbb08];return _0xcc1279;},_0x1fbb(_0x3c03fd,_0x353579);}function fRandomByfloat(_0x1d68c9,_0x255e0a){function _0xcf54ac(_0x1be22d,_0x2b319a){return _0x5ed0a7(_0x2b319a-0x1b4,_0x1be22d);}return _0x1d68c9+Math[_0xcf54ac(0x1d5,0x1bd)]()*(_0x255e0a-_0x1d68c9);}const Cesium=mars3d__namespace[_0x1ada75(0x512,0x4ef)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x58834d={}){function _0x2acec3(_0x492ee8,_0x45e816){return _0x5ed0a7(_0x45e816-0x552,_0x492ee8);}super(_0x58834d),this[_0x2acec3(0x507,0x4ca)](_0x58834d),this[_0x436c31(0xe8,0x6f)]=null;function _0x436c31(_0x3ea8a6,_0x2b3cc7){return _0x5ed0a7(_0x3ea8a6-0x124,_0x2b3cc7);}_0x58834d[_0x436c31(0x72,0x2d)]&&_0x58834d['steps']&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x58834d));}['_setOptionsHook'](_0x27453e,_0x32a8e5){this[_0x28c61a(0x443,0x41d)]=0x3e8/(_0x27453e[_0x28c61a(0x3c1,0x376)]||0xa),this['_pointerEvents']=this[_0x15f782(0x24,0x71)]['pointerEvents']??![],this['color']=_0x27453e['color']||'#ffffff';function _0x15f782(_0x5dbec6,_0x5ed6c2){return _0x5ed0a7(_0x5dbec6-0x13d,_0x5ed6c2);}function _0x28c61a(_0x30409f,_0x31f898){return _0x5ed0a7(_0x31f898-0x455,_0x30409f);}this['lineWidth']=_0x27453e[_0x28c61a(0x2c1,0x331)]||0x1,this['fixedHeight']=_0x27453e[_0x28c61a(0x362,0x3c2)]??0x0,this[_0x15f782(0x123,0x123)]=_0x27453e['reverseY']??![],this[_0x15f782(0xd0,0x65)]&&this['windField']['setOptions'](_0x27453e);}get['layer'](){return this['canvas'];}get['canvasWidth'](){return this['_map']['scene']['canvas']['clientWidth'];}get[_0x5ed0a7(-0x32,-0x34)](){function _0x5725a3(_0x1e3be2,_0x291a7b){return _0x1ada75(_0x1e3be2,_0x291a7b- -0xa);}function _0xe091ed(_0x3cb40a,_0x121484){return _0x1ada75(_0x3cb40a,_0x121484- -0x6c6);}return this[_0xe091ed(-0x1f0,-0x24d)][_0xe091ed(-0x1bd,-0x175)][_0xe091ed(-0x18d,-0x1b5)]['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x421072){this['_pointerEvents']=_0x421072;if(!this[_0x3cfaf9(-0x21a,-0x26c)])return;function _0x3cfaf9(_0x24b376,_0x4b887e){return _0x5ed0a7(_0x24b376- -0x1de,_0x4b887e);}function _0x4bffbd(_0x1c3bc5,_0x10102c){return _0x5ed0a7(_0x10102c-0x409,_0x1c3bc5);}_0x421072?this['canvas'][_0x3cfaf9(-0x2c8,-0x318)]['pointer-events']='all':this['canvas'][_0x4bffbd(0x31f,0x31f)][_0x3cfaf9(-0x233,-0x242)]=_0x3cfaf9(-0x272,-0x2e8);}get['particlesNumber'](){function _0x310675(_0x470bea,_0x13521c){return _0x1ada75(_0x13521c,_0x470bea- -0x2ab);}function _0x20e28e(_0x5e01b7,_0x17ae7c){return _0x5ed0a7(_0x5e01b7- -0x1d5,_0x17ae7c);}return this[_0x310675(0x189,0x14a)][_0x310675(0x1c1,0x1b8)];}set[_0x1ada75(0x3fd,0x46c)](_0x54cce8){this['options'][_0x31af31(0x118,0xc5)]=_0x54cce8;function _0x31af31(_0x11291d,_0x2cdfa0){return _0x5ed0a7(_0x11291d-0x1f9,_0x2cdfa0);}clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{function _0x19cd03(_0x120122,_0x5c4dd8){return _0x31af31(_0x5c4dd8-0x211,_0x120122);}this[_0x19cd03(0x30c,0x39f)]();},0x1f4);}get['speedRate'](){function _0x5ac9aa(_0x42ab66,_0x407098){return _0x5ed0a7(_0x42ab66- -0x1d3,_0x407098);}function _0x5652fa(_0x4ffd1,_0xe896e2){return _0x5ed0a7(_0xe896e2-0x57c,_0x4ffd1);}return this[_0x5ac9aa(-0x2ec,-0x37e)][_0x5652fa(0x49a,0x481)];}set[_0x1ada75(0x3dd,0x452)](_0x30933b){function _0x334bd5(_0x1e2939,_0x4fc600){return _0x1ada75(_0x4fc600,_0x1e2939- -0x5c2);}this[_0x2f1840(0x324,0x31e)]['speedRate']=_0x30933b;function _0x2f1840(_0xe10abe,_0x588891){return _0x5ed0a7(_0xe10abe-0x43d,_0x588891);}this[_0x334bd5(-0xe2,-0xf9)]&&(this['windField']['speedRate']=_0x30933b);}get['maxAge'](){function _0x8b22ca(_0x3b44af,_0x34462c){return _0x5ed0a7(_0x3b44af-0x120,_0x34462c);}return this['options'][_0x8b22ca(0x107,0x18b)];}set['maxAge'](_0x20fffa){this['options'][_0x1585fa(0x3ae,0x390)]=_0x20fffa;function _0x1585fa(_0x589686,_0x5c726f){return _0x5ed0a7(_0x5c726f-0x3a9,_0x589686);}function _0x47dd0c(_0xe6d584,_0x27bee4){return _0x1ada75(_0x27bee4,_0xe6d584- -0x4c8);}this[_0x47dd0c(0x18,-0x58)]&&(this['windField']['maxAge']=_0x20fffa);}get['data'](){return this['windData'];}set['data'](_0x10e1e0){this['setData'](_0x10e1e0);}get['rectangle'](){let _0x4fc4f9=this['windData']['xmin'],_0x18e683=this['windData']['xmax'],_0xc8344d=this['windData']['ymin'],_0x79421d=this['windData'][_0x3d5c62(0x3c,0x3a)];_0x18e683>=0x167&&_0x4fc4f9===0x0&&(_0x4fc4f9=-0xb4,_0x18e683=0xb4);function _0x3366fb(_0x5ca921,_0x38d014){return _0x1ada75(_0x38d014,_0x5ca921-0x7);}_0x4fc4f9=Math['max'](_0x4fc4f9,-0xb4),_0x18e683=Math[_0x3366fb(0x54f,0x54d)](_0x18e683,0xb4),_0xc8344d=Math['max'](_0xc8344d,-0x5a);function _0x3d5c62(_0x3c7776,_0x1ca383){return _0x5ed0a7(_0x3c7776-0x14c,_0x1ca383);}return _0x79421d=Math[_0x3d5c62(0x147,0xc8)](_0x79421d,0x5a),Cesium['Rectangle']['fromDegrees'](_0x4fc4f9,_0xc8344d,_0x18e683,_0x79421d);}[_0x1ada75(0x43c,0x460)](_0x288992){function _0x32b0b9(_0x4a7cd2,_0x1375f2){return _0x1ada75(_0x4a7cd2,_0x1375f2- -0x47b);}function _0x5b55cf(_0x1e030f,_0x477fb5){return _0x5ed0a7(_0x477fb5-0x1d7,_0x1e030f);}_0x288992?this[_0x32b0b9(0x4,0x17)]():(this[_0x5b55cf(0xbb,0x14a)]&&(this['options']['data']=this[_0x32b0b9(-0xc,0x45)]),this[_0x32b0b9(0x78,0xd4)]());}[_0x1ada75(0x480,0x499)](){function _0x178dc6(_0x55b541,_0x191596){return _0x1ada75(_0x55b541,_0x191596- -0xb1);}this['options']['worker']?this[_0x178dc6(0x3e1,0x393)]():this['windField']=new CanvasWindField(this['options']);}[_0x5ed0a7(-0xbb,-0x5b)](){this[_0x2c5629(-0x20d,-0x1b1)]=this['_createCanvas']();const _0x3436bf={};function _0x2c5629(_0x2d5c4d,_0x435f7b){return _0x1ada75(_0x2d5c4d,_0x435f7b- -0x6c2);}_0x3436bf[_0x2c5629(-0x26a,-0x21b)]=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0x3436bf),this['bindEvent']();function _0x25b0c4(_0x1e83cd,_0x24c212){return _0x1ada75(_0x1e83cd,_0x24c212- -0x1ba);}this['options']['data']&&this['setData'](this[_0x25b0c4(0x23e,0x27a)]['data']);}['_removedHook'](){this[_0x23cbf5(0x4cc,0x466)]();function _0x23cbf5(_0xa0cf0c,_0x12d2c0){return _0x5ed0a7(_0xa0cf0c-0x4f2,_0x12d2c0);}function _0x4edd0f(_0x3b5b2c,_0x5d49ab){return _0x5ed0a7(_0x5d49ab-0x5bf,_0x3b5b2c);}this['unbindEvent'](),this['canvas']&&(this['_map'][_0x23cbf5(0x44a,0x4cf)]['removeChild'](this['canvas']),delete this['canvas']);}['_createCanvas'](){const _0x1fdd90=mars3d__namespace[_0x4a9b5e(-0x50,-0x43)]['create']('canvas',_0x353f44(-0x102,-0x77),this['_map']['container']);_0x1fdd90[_0x353f44(-0x1db,-0x1aa)]['position']='absolute',_0x1fdd90['style'][_0x4a9b5e(0x22,-0xb)]='0px',_0x1fdd90[_0x4a9b5e(-0x72,-0x42)][_0x4a9b5e(0x12b,0xaf)]='0px';function _0x4a9b5e(_0x26363d,_0x436de5){return _0x5ed0a7(_0x436de5-0xa8,_0x26363d);}function _0x353f44(_0x444ace,_0x2001b0){return _0x1ada75(_0x2001b0,_0x444ace- -0x63e);}return _0x1fdd90[_0x4a9b5e(-0x71,-0x42)][_0x353f44(-0x16f,-0x175)]=this['_map']['scene']['canvas']['clientWidth']+'px',_0x1fdd90['style'][_0x4a9b5e(-0xa3,-0x4e)]=this[_0x4a9b5e(0x5b,-0x2c)][_0x4a9b5e(0x22,0xac)][_0x4a9b5e(0xde,0x6c)]['clientHeight']+'px',_0x1fdd90['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x1fdd90[_0x353f44(-0x1db,-0x167)][_0x353f44(-0x1ad,-0x1e1)]=this['options'][_0x4a9b5e(-0xb,-0x14)]??0x9,_0x1fdd90['width']=this[_0x353f44(-0x1c5,-0x1be)][_0x4a9b5e(0xc7,0xac)]['canvas'][_0x4a9b5e(-0x33,-0x54)],_0x1fdd90[_0x4a9b5e(0x1f,-0x4e)]=this[_0x353f44(-0x1c5,-0x143)][_0x353f44(-0xed,-0x112)]['canvas'][_0x353f44(-0x190,-0x190)],_0x1fdd90;}[_0x1ada75(0x3eb,0x47f)](){function _0x2c0909(_0x2d8549,_0x1f25f7){return _0x5ed0a7(_0x1f25f7- -0x45,_0x2d8549);}function _0x39450b(_0x2a4901,_0x31e01c){return _0x5ed0a7(_0x31e01c-0x9f,_0x2a4901);}this[_0x39450b(0x75,0x63)]&&(this['canvas'][_0x39450b(-0x3a,-0x4b)][_0x2c0909(-0xbe,-0xc3)]=this[_0x2c0909(-0x83,-0x119)][_0x2c0909(0x2f,-0x41)]['canvas'][_0x2c0909(-0xfd,-0x141)]+'px',this['canvas']['style']['height']=this[_0x2c0909(-0x144,-0x119)][_0x39450b(0x113,0xa3)]['canvas']['clientHeight']+'px',this['canvas'][_0x2c0909(-0xda,-0xc3)]=this['_map']['scene']['canvas']['clientWidth'],this['canvas']['height']=this['_map']['scene']['canvas']['clientHeight']);}[_0x1ada75(0x3e2,0x473)](){function _0x345c4b(_0xed64e3,_0x8043f4){return _0x1ada75(_0xed64e3,_0x8043f4-0x4e);}const _0x22c4a9=this;let _0x76df6b=Date[_0x345c4b(0x4ee,0x50a)]();(function _0x14ff27(){if(_0x22c4a9['isDestroy'])return;function _0x439c00(_0x3a219e,_0x1608cd){return _0x345c4b(_0x3a219e,_0x1608cd-0x31);}_0x22c4a9[_0x439c00(0x545,0x4c8)]=window['requestAnimationFrame'](_0x14ff27);function _0x2982be(_0x5c3e69,_0x116906){return _0x345c4b(_0x116906,_0x5c3e69- -0x6b3);}if(_0x22c4a9['show']&&_0x22c4a9[_0x439c00(0x5d4,0x55f)]){const _0x5c490f=Date['now'](),_0xaeb4f5=_0x5c490f-_0x76df6b;_0xaeb4f5>_0x22c4a9['frameTime']&&(_0x76df6b=_0x5c490f-_0xaeb4f5%_0x22c4a9['frameTime'],_0x22c4a9[_0x439c00(0x57a,0x5d4)]());}}(),window['addEventListener'](_0x3b0023(0x87,0x52),this['resize']['bind'](this),![]),this['mouse_down']=![],this[_0x3b0023(0x3b,0xb8)]=![]);function _0x3b0023(_0x3670ef,_0xd22856){return _0x1ada75(_0xd22856,_0x3670ef- -0x3f8);}this[_0x345c4b(0x425,0x482)]['mouseHidden']&&(this[_0x3b0023(0x81,-0xf)]['on'](mars3d__namespace['EventType'][_0x3b0023(0x80,0x34)],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace[_0x345c4b(0x4e4,0x571)]['mouseUp'],this['_onMouseUpEvent'],this));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']);function _0x4dcf4b(_0x3f96e2,_0x39d1d0){return _0x1ada75(_0x39d1d0,_0x3f96e2-0x3b);}function _0x5530cf(_0x812ae5,_0x55536b){return _0x1ada75(_0x812ae5,_0x55536b-0x1);}delete this[_0x4dcf4b(0x484,0x477)],window[_0x4dcf4b(0x520,0x511)](_0x5530cf(0x48f,0x480),this['resize']),this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace[_0x4dcf4b(0x55e,0x5d5)][_0x4dcf4b(0x4b3,0x492)],this['_onMapWhellEvent'],this),this[_0x4dcf4b(0x4b4,0x424)][_0x5530cf(0x45f,0x455)](mars3d__namespace['EventType'][_0x5530cf(0x50e,0x4fd)],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0x5530cf(0x562,0x4d1)],this[_0x4dcf4b(0x475,0x471)],this));}['_onMapWhellEvent'](_0x50dd3e){clearTimeout(this[_0x537bad(-0x191,-0x16c)]);if(!this[_0x537bad(-0x19c,-0x164)]||!this['canvas'])return;function _0x537bad(_0x5d3bd2,_0x37e62f){return _0x5ed0a7(_0x5d3bd2- -0x169,_0x37e62f);}this[_0x4a0a52(0x489,0x4f8)][_0x4a0a52(0x3db,0x3bd)]['visibility']='hidden';function _0x4a0a52(_0x42387e,_0x11f017){return _0x5ed0a7(_0x42387e-0x4c5,_0x11f017);}this[_0x4a0a52(0x49d,0x4de)]=setTimeout(()=>{function _0x43b063(_0x144e8b,_0x3557b0){return _0x537bad(_0x144e8b-0x415,_0x3557b0);}if(!this[_0x1b24a8(0x400,0x416)])return;this['redraw']();function _0x1b24a8(_0x106469,_0x759afa){return _0x4a0a52(_0x106469- -0x92,_0x759afa);}this['canvas']['style'][_0x43b063(0x278,0x2c8)]='visible';},0xc8);}[_0x1ada75(0x48e,0x50e)](_0x50f795){function _0x29b11e(_0x1219b0,_0x42de69){return _0x1ada75(_0x42de69,_0x1219b0-0x1c);}this[_0x29b11e(0x529,0x5a5)]=!![];function _0x14d951(_0x5b2d20,_0x51335f){return _0x1ada75(_0x5b2d20,_0x51335f- -0x31f);}this['_map'][_0x29b11e(0x470,0x4df)](mars3d__namespace['EventType']['mouseMove'],this[_0x14d951(0x118,0x11b)],this),this['_map']['on'](mars3d__namespace[_0x14d951(0x1e0,0x204)][_0x14d951(0x173,0x1b1)],this['_onMouseMoveEvent'],this);}[_0x5ed0a7(-0x113,-0xbf)](_0x35b7aa){function _0x1fc8f3(_0x2bdc2e,_0x1065a1){return _0x1ada75(_0x1065a1,_0x2bdc2e- -0x6ad);}if(!this['show']||!this[_0x1fc8f3(-0x19c,-0x1bd)])return;function _0x449050(_0x71fb5c,_0x23b838){return _0x5ed0a7(_0x23b838-0x26c,_0x71fb5c);}this[_0x1fc8f3(-0x1a0,-0x1f9)]&&(this['canvas'][_0x1fc8f3(-0x24a,-0x2c7)][_0x449050(0x290,0x238)]='hidden',this['mouse_move']=!![]);}[_0x1ada75(0x4d0,0x455)](_0x311146){if(!this['show']||!this[_0x5c6a95(0x99,0xef)])return;this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x5c6a95(_0x20a879,_0x178813){return _0x1ada75(_0x178813,_0x20a879- -0x478);}this[_0x5c6a95(0x95,0x75)]&&this['mouse_move']&&this['redraw']();this['canvas']['style']['visibility']='visible';function _0x1e386e(_0x3be884,_0x2964bc){return _0x5ed0a7(_0x3be884-0xdc,_0x2964bc);}this['mouse_down']=![],this[_0x1e386e(-0x3e,0xa)]=![];}['setData'](_0x23d099){function _0x3d40dd(_0x854caa,_0x1c66b1){return _0x5ed0a7(_0x854caa-0x7f,_0x1c66b1);}this[_0x3d40dd(0x59,0xe9)](),this['windData']=_0x23d099;function _0x886b08(_0x11fada,_0x32b1a4){return _0x1ada75(_0x32b1a4,_0x11fada- -0x130);}this[_0x886b08(0x3b0,0x39f)]['setDate'](_0x23d099),this['redraw']();}['redraw'](){if(!this[_0x409812(0x24d,0x1ef)])return;this[_0x409812(0x1f4,0x1b5)]['setOptions'](this['options']);function _0x3d8a6c(_0x1c7525,_0x377a8d){return _0x5ed0a7(_0x1c7525- -0x120,_0x377a8d);}function _0x409812(_0x1175cc,_0x2251a0){return _0x5ed0a7(_0x2251a0-0x222,_0x1175cc);}this[_0x409812(0x1af,0x22a)]();}['update'](){if(this['_updateIng'])return;this['_updateIng']=!![];function _0x1093ea(_0x5b3e80,_0x26f0d3){return _0x5ed0a7(_0x26f0d3-0x2ec,_0x5b3e80);}if(this[_0x4952b2(0xf6,0xb6)])this['windField']['update']();else{const _0x7ccbe4=this[_0x4952b2(0x8f,0xb5)]['getParticles']();this[_0x4952b2(0xb5,0x32)](_0x7ccbe4);}function _0x4952b2(_0xc797fb,_0x42b696){return _0x5ed0a7(_0x42b696-0x122,_0xc797fb);}this['_updateIng']=![];}[_0x5ed0a7(-0xf0,-0x177)](_0x45b4c2){this['_canvasParticles']=_0x45b4c2,this['canvasContext']['globalCompositeOperation']=_0x1a14d0(0x3d8,0x3e0),this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this[_0x1a14d0(0x453,0x4b2)]);function _0x3d81c6(_0x2b4f7f,_0x29ab18){return _0x5ed0a7(_0x29ab18- -0x1c,_0x2b4f7f);}this['canvasContext'][_0x1a14d0(0x43b,0x474)]='lighter',this['canvasContext']['globalAlpha']=0.9;function _0x1a14d0(_0x4a588d,_0x441255){return _0x5ed0a7(_0x4a588d-0x485,_0x441255);}const _0x53ec25=this['_map'][_0x3d81c6(-0x74,-0x18)]['mode']!==Cesium['SceneMode']['SCENE3D'],_0x12e62f=this[_0x1a14d0(0x38b,0x3fa)]*0.25;if(this['_colorRamp'])for(let _0x1fba7d=0x0,_0x2bbf41=_0x45b4c2[_0x3d81c6(-0x55,-0x3f)];_0x1fba7d<_0x2bbf41;_0x1fba7d++){const _0x4a8734=_0x45b4c2[_0x1fba7d],_0x3acee5=this['_tomap'](_0x4a8734,_0x4a8734['lng'],_0x4a8734[_0x3d81c6(0xc,-0x49)],_0x4a8734[_0x3d81c6(-0x11f,-0xeb)]),_0x1bbdbb=this[_0x3d81c6(0x48,-0x2f)](_0x4a8734,_0x4a8734[_0x1a14d0(0x39f,0x426)],_0x4a8734['tlat'],_0x4a8734[_0x3d81c6(-0x7d,-0xd2)]);if(!_0x3acee5||!_0x1bbdbb)continue;if(_0x53ec25&&Math[_0x1a14d0(0x3e8,0x43b)](_0x3acee5[0x0]-_0x1bbdbb[0x0])>=_0x12e62f)continue;this[_0x1a14d0(0x424,0x49c)]['beginPath'](),this[_0x1a14d0(0x424,0x46a)][_0x3d81c6(-0x1b1,-0x140)]=this['lineWidth'],this['canvasContext'][_0x3d81c6(-0x111,-0x11e)]=this['_colorRamp'][_0x3d81c6(-0x27,-0xa8)](_0x4a8734['speed']),this['canvasContext'][_0x3d81c6(0x1,-0x17)](_0x3acee5[0x0],_0x3acee5[0x1]),this['canvasContext']['lineTo'](_0x1bbdbb[0x0],_0x1bbdbb[0x1]),this[_0x3d81c6(-0x85,-0x7d)]['stroke']();}else{this[_0x1a14d0(0x424,0x3d0)][_0x1a14d0(0x42d,0x48d)](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x1a14d0(0x363,0x327)];for(let _0x3ccc14=0x0,_0x7e4734=_0x45b4c2['length'];_0x3ccc14<_0x7e4734;_0x3ccc14++){const _0x587012=_0x45b4c2[_0x3ccc14],_0x7f43be=this['_tomap'](_0x587012,_0x587012['lng'],_0x587012[_0x1a14d0(0x458,0x40e)],_0x587012['alt']),_0x38170b=this['_tomap'](_0x587012,_0x587012['tlng'],_0x587012['tlat'],_0x587012[_0x1a14d0(0x3cf,0x359)]);if(!_0x7f43be||!_0x38170b)continue;if(_0x53ec25&&Math[_0x1a14d0(0x3e8,0x468)](_0x7f43be[0x0]-_0x38170b[0x0])>=_0x12e62f)continue;this['canvasContext']['moveTo'](_0x7f43be[0x0],_0x7f43be[0x1]),this['canvasContext']['lineTo'](_0x38170b[0x0],_0x38170b[0x1]);}this[_0x3d81c6(-0x2c,-0x7d)][_0x1a14d0(0x3ea,0x3f7)]();}}[_0x1ada75(0x5a1,0x53a)](_0xa098b3,_0x307cbe,_0x33e3c8,_0x6fafd5){const _0x2bd058=Cesium['Cartesian3']['fromDegrees'](_0x307cbe,_0x33e3c8,_0x6fafd5??this[_0x1cd821(-0x231,-0x2a4)]);function _0x4857a5(_0x43402f,_0x2c48ba){return _0x1ada75(_0x2c48ba,_0x43402f- -0x41);}const _0x36f184=this[_0x1cd821(-0x272,-0x30b)]['scene'];if(_0x36f184['mode']===Cesium[_0x4857a5(0x45b,0x4bf)][_0x4857a5(0x43b,0x480)]){const _0x5b9f42=new Cesium[(_0x1cd821(-0x245,-0x258))](_0x36f184['globe'][_0x1cd821(-0x280,-0x260)],_0x36f184['camera']['positionWC']),_0x3adc30=_0x5b9f42['isPointVisible'](_0x2bd058);if(!_0x3adc30)return _0xa098b3[_0x1cd821(-0x1c0,-0x219)]=0x0,null;}function _0x1cd821(_0xfc32b6,_0x55f059){return _0x1ada75(_0x55f059,_0xfc32b6- -0x6eb);}const _0x286141=mars3d__namespace[_0x1cd821(-0x1cc,-0x1f2)][_0x4857a5(0x475,0x405)](this[_0x1cd821(-0x272,-0x275)][_0x1cd821(-0x19a,-0x204)],_0x2bd058);return _0x286141?[_0x286141['x'],_0x286141['y']]:null;}[_0x1ada75(0x52a,0x527)](){function _0x17f65d(_0x216d87,_0x239ce6){return _0x5ed0a7(_0x216d87- -0xa0,_0x239ce6);}function _0x29d316(_0x102e4a,_0x49cc5f){return _0x5ed0a7(_0x102e4a-0x5e3,_0x49cc5f);}this[_0x17f65d(-0x10d,-0x77)][_0x17f65d(-0xc6,-0x151)](),delete this['windData'];}['initWorker'](){this['worker']=new Worker(this['options']['worker']),this[_0xcf82f0(0x1b4,0x1e2)]['onmessage']=_0xf28755=>{function _0x1542ab(_0x5974d8,_0x1bee02){return _0xcf82f0(_0x1bee02- -0x3b1,_0x5974d8);}this['_drawLines'](_0xf28755[_0x1542ab(-0x234,-0x1e1)]['particles']);function _0x38cc94(_0x4a0384,_0x102340){return _0xcf82f0(_0x102340- -0x3f6,_0x4a0384);}this[_0x38cc94(-0x2bf,-0x295)]=![];};function _0xcf82f0(_0x3f8eef,_0x3fc55e){return _0x5ed0a7(_0x3f8eef-0x220,_0x3fc55e);}this['windField']={'init':_0x3e298e=>{const _0x5cdd73={};function _0x3b8422(_0x23dc89,_0x4e248a){return _0xcf82f0(_0x4e248a-0x78,_0x23dc89);}_0x5cdd73['type']=_0x3b8422(0x21c,0x23d);function _0x3a584e(_0x289f3d,_0x1f622a){return _0xcf82f0(_0x1f622a- -0x5b,_0x289f3d);}_0x5cdd73['options']=_0x3e298e,this['worker'][_0x3b8422(0x1fb,0x251)](_0x5cdd73);},'setOptions':_0x593616=>{const _0x5af978={};_0x5af978['type']='setOptions';function _0x5704a1(_0xc2b9c3,_0x4248c8){return _0xcf82f0(_0xc2b9c3-0x16,_0x4248c8);}_0x5af978['options']=_0x593616,this['worker'][_0x5704a1(0x1ef,0x1ab)](_0x5af978);},'setDate':_0x2a6403=>{function _0x5109d8(_0x5ef507,_0x3d3b73){return _0xcf82f0(_0x5ef507-0x3a0,_0x3d3b73);}const _0x4afa31={};function _0x445e4b(_0x458c52,_0x258cca){return _0xcf82f0(_0x258cca- -0x1a0,_0x458c52);}_0x4afa31[_0x445e4b(-0xa6,-0x50)]=_0x445e4b(0x33,0x45),_0x4afa31[_0x445e4b(-0x68,0x30)]=_0x2a6403,this[_0x445e4b(0x4b,0x14)][_0x445e4b(0x56,0x39)](_0x4afa31);},'update':()=>{if(this['_updateIng2'])return;function _0x20a418(_0x1429d1,_0x46b9de){return _0xcf82f0(_0x1429d1- -0x34,_0x46b9de);}this[_0x20a418(0x12d,0x16f)]=!![];const _0x3dbc57={};function _0x29dacd(_0x5e4220,_0x44faa8){return _0xcf82f0(_0x44faa8- -0x3d7,_0x5e4220);}_0x3dbc57['type']=_0x20a418(0x1f4,0x20a),this['worker']['postMessage'](_0x3dbc57);},'clear':()=>{const _0x1edecb={};_0x1edecb['type']=_0x7c540a(0x21d,0x1fc);function _0x7c540a(_0x4865fa,_0x45e25a){return _0xcf82f0(_0x45e25a-0x2,_0x4865fa);}function _0x2acaf8(_0x273091,_0x30f7de){return _0xcf82f0(_0x30f7de- -0x3b,_0x273091);}this['worker'][_0x2acaf8(0x235,0x19e)](_0x1edecb);}},this['windField']['init'](this['options']);}}mars3d__namespace['LayerUtil']['register']('canvasWind',CanvasWindLayer),mars3d__namespace[_0x5ed0a7(-0x60,-0x90)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x5ed0a7(-0xa4,-0xe)]=CanvasWindField,mars3d__namespace[_0x5ed0a7(-0x41,-0x1b)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x1c3f17={};_0x1c3f17['value']=!![],Object['defineProperty'](exports,_0x5ed0a7(-0xa5,-0x111),_0x1c3f17);
}));
