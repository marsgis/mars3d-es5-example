/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.8
 * 编译日期：2024-11-24 22:50
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x511778,_0x453fc3){function _0x11f415(_0x302f3a,_0x542662){return _0x486b(_0x542662-0x182,_0x302f3a);}function _0x5b07c2(_0x47c1aa,_0x37b20a){return _0x486b(_0x37b20a- -0x16a,_0x47c1aa);}const _0x26d26f=_0x511778();while(!![]){try{const _0x317d8b=parseInt(_0x11f415(0x3d6,0x379))/0x1*(-parseInt(_0x11f415(0x397,0x36a))/0x2)+-parseInt(_0x5b07c2(0xaf,0x23))/0x3+-parseInt(_0x11f415(0x244,0x281))/0x4+parseInt(_0x5b07c2(0x2d,-0x5))/0x5+parseInt(_0x11f415(0x242,0x295))/0x6+parseInt(_0x5b07c2(0xb9,0x76))/0x7+-parseInt(_0x11f415(0x3c9,0x356))/0x8*(-parseInt(_0x11f415(0x295,0x31b))/0x9);if(_0x317d8b===_0x453fc3)break;else _0x26d26f['push'](_0x26d26f['shift']());}catch(_0x43a285){_0x26d26f['push'](_0x26d26f['shift']());}}}(_0x10dc,0x3362a));function _interopNamespace(_0x4de8a2){function _0x55a68c(_0x24e283,_0x269db5){return _0x486b(_0x24e283- -0x185,_0x269db5);}if(_0x4de8a2&&_0x4de8a2['__esModule'])return _0x4de8a2;function _0x49ae27(_0x4fcefe,_0x21bcc0){return _0x486b(_0x21bcc0-0x1db,_0x4fcefe);}var _0x4c8607=Object['create'](null);return _0x4de8a2&&Object['keys'](_0x4de8a2)[_0x55a68c(-0x5f,-0x79)](function(_0x3e5d7c){function _0x3a1fef(_0x303f83,_0x426896){return _0x55a68c(_0x303f83- -0x8,_0x426896);}if(_0x3e5d7c!==_0x3a1fef(0x3,-0x8d)){var _0x4089ee=Object['getOwnPropertyDescriptor'](_0x4de8a2,_0x3e5d7c);Object['defineProperty'](_0x4c8607,_0x3e5d7c,_0x4089ee['get']?_0x4089ee:{'enumerable':!![],'get':function(){return _0x4de8a2[_0x3e5d7c];}});}}),_0x4c8607[_0x49ae27(0x3c4,0x36b)]=_0x4de8a2,_0x4c8607;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0x28bba9,_0x260b88){function _0xaf0d04(_0x49e1ce,_0x7a52a9){return _0x486b(_0x7a52a9-0x13f,_0x49e1ce);}const _0x4c1b43=_0x28bba9*Math['cos'](Cesium$7[_0x4c4cd2(0x4e,0x36)][_0xaf0d04(0x39e,0x337)](_0x260b88));function _0x4c4cd2(_0x5b1741,_0x13bf06){return _0x486b(_0x5b1741- -0xf7,_0x13bf06);}return _0x4c1b43;}function _0x10dc(){const _0x4c7548=['colorTable','preRender','windData','uniformMap','createTexture','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20W;\x20//\x20upward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0auniform\x20float\x20speedScaleFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20//\x20map\x20the\x20z-axis\x20value\x20to\x20the\x20nearest\x20bit\x20plane\x20to\x20ensure\x20that\x20the\x20result\x20is\x20an\x20integer\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205,\x207,\x208,\x209],\x20width\x20=\x202,\x20height\x20=\x202,\x20level\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x206\x207\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x202\x203\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0afloat\x20interpolateTexture(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x201.0f\x20*\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x201.0f\x20*\x20interval.y;\x0a\x0a\x20\x20float\x20lon0_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon1_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon0_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat1,\x20lev));\x0a\x20\x20float\x20lon1_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat1,\x20lev));\x0a\x0a\x20\x20float\x20lon_lat0\x20=\x20mix(lon0_lat0,\x20lon1_lat0,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat1\x20=\x20mix(lon0_lat1,\x20lon1_lat1,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat\x20=\x20mix(lon_lat0,\x20lon_lat1,\x20lat\x20-\x20lat0);\x0a\x20\x20return\x20lon_lat;\x0a}\x0a\x0avec3\x20linearInterpolation(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bilinear_interpolation\x0a\x20\x20float\x20u\x20=\x20interpolateTexture(U,\x20lonLatLev);\x0a\x20\x20float\x20v\x20=\x20interpolateTexture(V,\x20lonLatLev);\x0a\x20\x20float\x20w\x20=\x20interpolateTexture(W,\x20lonLatLev);\x0a\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec3\x20convertSpeedUnitToLonLat(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20float\x20w\x20=\x20speed.z;\x0a\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20return\x20windVectorInLonLatLev;\x0a}\x0a\x0avec3\x20calculateSpeedByRungeKutta2(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec3\x20y_n\x20=\x20lonLatLev;\x0a\x20\x20vec3\x20f_n\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec3\x20speed\x20=\x20h\x20*\x20linearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20getRange(vec2\x20range)\x20{\x0a\x20\x20float\x20x1\x20=\x200.0f\x20-\x20range.x;\x0a\x20\x20float\x20x2\x20=\x20range.y\x20-\x200.0f;\x0a\x20\x20if(x1\x20<\x200.0f\x20||\x20x2\x20<\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(abs(x1),\x20abs(x2));\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x20abs(max(x1,\x20x2)));\x0a\x20\x20}\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20vec2\x20uRange\x20=\x20getRange(uSpeedRange);\x0a\x20\x20vec2\x20vRange\x20=\x20getRange(vSpeedRange);\x0a\x20\x20vec2\x20wRange\x20=\x20getRange(wSpeedRange);\x0a\x20\x20if(length(speed.xyz)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x200.0f;\x0a\x20\x20}\x0a\x0a\x20\x20percent.x\x20=\x20(abs(speed.x)\x20-\x20uRange.x)\x20/\x20(uRange.y\x20-\x20uRange.x);\x0a\x20\x20percent.y\x20=\x20(abs(speed.y)\x20-\x20vRange.x)\x20/\x20(vRange.y\x20-\x20vRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(abs(speed.z)\x20-\x20wRange.x)\x20/\x20(wRange.y\x20-\x20wRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speedOrigin\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLatLev);\x0a\x20\x20vec3\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLatLev,\x20speed);\x0a\x0a\x20\x20vec4\x20particleSpeed\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speed\x20/\x20speedScaleFactor));\x0a\x20\x20\x20\x20//\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','DISABLE_GL_POSITION_LOG_DEPTH','length','_data','sqrt','__proto__','ymin','left','getRandomLatLng','Ellipsoid','speedFactor','postMessage','off','worker','particlesComputing','age','commandToExecute','data','TRIANGLES','add','_onMap_preRenderEvent','reverse','randomBetween','depthTest','alt','globe','490568KhGIfY','_mountedHook','attributeLocations','textures','windTextures','floor','primitives','dropRate','Sampler','type','speed','umax','TWO_PI','canvasContext','_map','Geometry','resize','canvasWind','windField','isDestroyed','998724xlHttC','strokeStyle','colour','dimensions','update','SCENE3D','lonRange','IDENTITY','colors','ClearCommand','destroy','globalCompositeOperation','clearCommand','canvasWidth','xmin','_drawLines','clientHeight','rawRenderState','cols','forEach','Cesium','currentTrailsDepth','udata','particlesTextures','segmentsDepth','pow','destroyObject','refreshTimer','createRawRenderState','minimum','BaseLayer','camera','DEPTH_COMPONENT','NEAREST','getV','redraw','now','particlesRendering','createRenderingTextures','geometry','_canvasParticles','maxParticles','Color','defined','fromGeometry','_speedRate','latRange','setDate','ellipsoid','normal','Math','width','visibility','defineProperty','ColorRamp','RenderState','getValidRange','vertexArray','fromDegrees','BufferUsage','canvas','getUVByXY','createCommand','pixelDatatype','grid','setData','moveTo','show','speedScaleFactor','lineWidth','previousParticlesPosition','fromCache','once','sin','zIndex','isInExtent','getOptions','SceneMode','canrefresh','dynamic','currentTrails','EventType','513550uCnwQn','RGBA','all','random','getContext','lat','_updateIng2','levmax','nextTrails','context','lineTo','particlesNumber','enabled','nextParticlesPosition','createComputingPrimitives','segments','drawingBufferWidth','xmax','Cartesian2','lighter','mod','array','Draw','createSegmentsGeometry','lon','mouse_move','getParticles','clientWidth','PixelDatatype','vertexShaderSource','getU','arrayBufferView','STATIC_DRAW','pixelSize','push','GeometryAttribute','Compute','setOptions','autoClear','#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20trailsColor;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a','799290CeafEZ','height','destination-in','default','_onMapWhellEvent','umin','createWindTextures','TextureMinificationFilter','_removedHook','refreshParticles','getDefaultRenderState','layer','2234493cWkZTL','postProcessingPosition','tlat','wheel','ComponentDatatype','isDestroy','nextTrailsDepth','stroke','Rectangle','segmentsColor','vdata','FLOAT','speedRate','max','log','TextureMagnificationFilter','mouse_down','pointerEvents','Pass','setGeometry','min','keys','Cartesian3','create','mode','hidden','createFramebuffer','_calc_speedRate','particleHeight','color','LayerUtil','calculateSpeed','BoundingSphere','destroyParticlesTextures','updateViewerParameters','_onMouseMoveEvent','mouseDown','_calcUV','fixedHeight','_onMouseDownEvent','rows','auto','scene','OPAQUE','depthMask','framebuffers','sources','rgb(206,255,255)','clampToLatitudeRange','particlesTextureSize','particleSystem','ShaderSource','onmessage','init','visible','_randomParticle','#version\x20300\x20es\x0a\x0ain\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20gl_Position\x20=\x20vec4(position,\x201.0f);\x0a}\x0a','preExecute','createParticlesTextures','8GZOujj','lng','RED','toGridXY','viewerParameters','clearFramebuffers','pointer-events','DepthFunction','fill','_pointerEvents','viewRectangleToLonLatRange','particles','1404046sifmGW','VertexArray','fadeOpacity','depthTexture','0px','mouseHidden','_addedHook','vmin','4646QPlPFz','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','options','absolute','WindLayer','_tomap','maxAge','ZERO','style','vSpeedRange','_setOptionsHook','_onMouseUpEvent','removeAll','lev','_updateIng','51ticMuu','toRadians','createRenderingPrimitives','EllipsoidalOccluder','defines','UNSIGNED_BYTE','removeChild','container','ymax','tlng','dropRateBump','createRenderingFramebuffers','canvasResize','getUVByPoint','getDirection','framebuffer','ComputeCommand','outputTexture'];_0x10dc=function(){return _0x4c7548;};return _0x10dc();}function getV(_0x164230,_0x5ef21b){function _0x3fac13(_0x4928da,_0x2b38c6){return _0x486b(_0x2b38c6-0x232,_0x4928da);}function _0xe3788f(_0x476ba8,_0x1285d1){return _0x486b(_0x476ba8- -0xfd,_0x1285d1);}const _0x43f891=_0x164230*Math[_0xe3788f(0x5f,-0x19)](Cesium$7['Math'][_0xe3788f(0xfb,0x84)](_0x5ef21b));return _0x43f891;}function getSpeed(_0x59d84f,_0x2c1d20){const _0x370a71=Math['sqrt'](Math['pow'](_0x59d84f,0x2)+Math[_0x3de745(-0x3f,-0xa9)](_0x2c1d20,0x2));function _0x3de745(_0x3d8903,_0x5dbe5b){return _0x486b(_0x3d8903- -0x16b,_0x5dbe5b);}return _0x370a71;}function getDirection(_0x3ec6bb,_0x1f2f29){let _0x32d54b=Cesium$7[_0x2b58d2(-0x1e2,-0x22f)]['toDegrees'](Math['atan2'](_0x1f2f29,_0x3ec6bb));function _0x2b58d2(_0x1032f3,_0x18f2a2){return _0x486b(_0x18f2a2- -0x374,_0x1032f3);}return _0x32d54b+=_0x32d54b<0x0?0x168:0x0,_0x32d54b;}const _0x2b2d28={};_0x2b2d28[_0x7b6784(-0x78,-0xaf)]=null,_0x2b2d28[_0x4b1d00(0x442,0x3be)]=getU,_0x2b2d28[_0x7b6784(-0x2d,-0xa2)]=getV,_0x2b2d28['getSpeed']=getSpeed,_0x2b2d28[_0x4b1d00(0x39b,0x351)]=getDirection;var WindUtil=_0x2b2d28;const Cesium$6=mars3d__namespace[_0x4b1d00(0x3e6,0x429)];class CustomPrimitive{constructor(_0x4f1ba8){this['commandType']=_0x4f1ba8['commandType'],this[_0x3d7576(0x164,0x107)]=_0x4f1ba8[_0x3d7576(0x164,0x155)],this[_0x3d7576(0x12b,0x141)]=_0x4f1ba8[_0x3d7576(0x12b,0x11c)],this['primitiveType']=_0x4f1ba8['primitiveType'],this[_0x3d7576(0x10d,0x101)]=_0x4f1ba8[_0x371861(0x249,0x276)],this['vertexShaderSource']=_0x4f1ba8[_0x3d7576(0x1ac,0x128)],this['fragmentShaderSource']=_0x4f1ba8['fragmentShaderSource'],this['rawRenderState']=_0x4f1ba8['rawRenderState'];function _0x371861(_0x13014b,_0x13336b){return _0x7b6784(_0x13014b-0x2c8,_0x13336b);}function _0x3d7576(_0xe4bced,_0x26ef14){return _0x4b1d00(_0xe4bced- -0x295,_0x26ef14);}this[_0x3d7576(0x107,0x88)]=_0x4f1ba8['framebuffer'],this['outputTexture']=_0x4f1ba8[_0x3d7576(0x109,0x173)],this[_0x371861(0x2f1,0x297)]=_0x4f1ba8['autoClear']??![],this[_0x371861(0x338,0x3b5)]=_0x4f1ba8['preExecute'],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['autoClear']&&(this[_0x371861(0x285,0x281)]=new Cesium$6[(_0x3d7576(0x146,0x1cf))]({'color':new Cesium$6['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x3d7576(0x107,0xf2)],'pass':Cesium$6['Pass'][_0x371861(0x32a,0x35a)]}));}[_0x7b6784(-0x11,-0x20)](_0x33bfed){function _0xe9018e(_0x936e2c,_0x779f0b){return _0x4b1d00(_0x779f0b- -0x61f,_0x936e2c);}function _0x4b7497(_0x2e9e41,_0x196df7){return _0x7b6784(_0x2e9e41-0x169,_0x196df7);}switch(this['commandType']){case _0xe9018e(-0x278,-0x1e5):{const _0x2e26a5=Cesium$6['VertexArray']['fromGeometry']({'context':_0x33bfed,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']}),_0x424fc4={};_0x424fc4['context']=_0x33bfed,_0x424fc4['attributeLocations']=this[_0xe9018e(-0x255,-0x25f)],_0x424fc4['vertexShaderSource']=this[_0x4b7497(0x189,0x116)],_0x424fc4['fragmentShaderSource']=this['fragmentShaderSource'];const _0x381007=Cesium$6['ShaderProgram']['fromCache'](_0x424fc4),_0x21803e=Cesium$6[_0x4b7497(0x151,0x14c)][_0x4b7497(0x161,0x150)](this[_0x4b7497(0x12b,0xf0)]);return new Cesium$6['DrawCommand']({'owner':this,'vertexArray':_0x2e26a5,'primitiveType':this['primitiveType'],'uniformMap':this[_0xe9018e(-0x236,-0x27d)],'modelMatrix':Cesium$6['Matrix4'][_0x4b7497(0x121,0xbd)],'shaderProgram':_0x381007,'framebuffer':this[_0xe9018e(-0x2d1,-0x283)],'renderState':_0x21803e,'pass':Cesium$6[_0xe9018e(-0x1d7,-0x1b5)]['OPAQUE']});}case _0x4b7497(0x190,0x1f9):{const _0x1631ff={};return _0x1631ff['owner']=this,_0x1631ff['fragmentShaderSource']=this['fragmentShaderSource'],_0x1631ff['uniformMap']=this['uniformMap'],_0x1631ff['outputTexture']=this[_0x4b7497(0xe6,0x9c)],_0x1631ff['persists']=!![],new Cesium$6[(_0xe9018e(-0x1f5,-0x282))](_0x1631ff);}}}[_0x7b6784(0x4a,-0x33)](_0x328a42,_0x5d0cde){function _0x1f523b(_0x933f05,_0x163663){return _0x4b1d00(_0x933f05- -0x57,_0x163663);}this[_0x46653a(-0x3b,-0x1e)]=_0x5d0cde;const _0x21cbc6=Cesium$6['VertexArray'][_0x1f523b(0x3a7,0x337)]({'context':_0x328a42,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6[_0x1f523b(0x3b6,0x41d)]['STATIC_DRAW']});function _0x46653a(_0x5d38bd,_0x2bde25){return _0x4b1d00(_0x5d38bd- -0x434,_0x2bde25);}this[_0x1f523b(0x35d,0x375)]['vertexArray']=_0x21cbc6;}['update'](_0x5f0bb7){if(!this['show'])return;if(_0x5f0bb7[_0x229ef9(0x517,0x55c)]!==Cesium$6['SceneMode'][_0x486d37(0x254,0x284)])return;!Cesium$6['defined'](this['commandToExecute'])&&(this[_0x229ef9(0x45b,0x415)]=this['createCommand'](_0x5f0bb7[_0x229ef9(0x4d4,0x4bb)]));Cesium$6[_0x486d37(0x2ad,0x2aa)](this['preExecute'])&&this['preExecute']();function _0x486d37(_0x306825,_0x9dfa47){return _0x4b1d00(_0x9dfa47- -0x153,_0x306825);}Cesium$6[_0x229ef9(0x4a4,0x419)](this[_0x229ef9(0x485,0x455)])&&_0x5f0bb7['commandList'][_0x486d37(0x31f,0x2f3)](this[_0x486d37(0x2d8,0x28b)]);function _0x229ef9(_0x46ec62,_0x204ea0){return _0x4b1d00(_0x46ec62-0xa7,_0x204ea0);}_0x5f0bb7['commandList'][_0x486d37(0x353,0x2f3)](this['commandToExecute']);}[_0x7b6784(-0x50,-0xd6)](){return![];}['destroy'](){function _0x3ce470(_0x197e35,_0x1eea18){return _0x7b6784(_0x1eea18- -0x137,_0x197e35);}if(this['clearCommand']){var _0x3f3053,_0x1a583b;(_0x3f3053=this[_0x2dd5ef(0x5a,-0x15)])!==null&&_0x3f3053!==void 0x0&&_0x3f3053[_0x2dd5ef(0x87,-0x5)]&&this['clearCommand'][_0x2dd5ef(0x87,0x7a)][_0x2dd5ef(0x58,0x2f)](),(_0x1a583b=this[_0x3ce470(-0x138,-0x17a)])!==null&&_0x1a583b!==void 0x0&&_0x1a583b['shaderProgram']&&this['clearCommand']['shaderProgram']['destroy'](),delete this['clearCommand'];}this[_0x2dd5ef(0x30,0xb0)]&&(this['commandToExecute']['vertexArray']&&this['commandToExecute']['vertexArray']['destroy'](),this['commandToExecute']['shaderProgram']&&this['commandToExecute']['shaderProgram']['destroy'](),delete this['commandToExecute']);function _0x2dd5ef(_0x40919e,_0x2b4a55){return _0x4b1d00(_0x40919e- -0x384,_0x2b4a55);}return Cesium$6[_0x3ce470(-0x12c,-0x16c)](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0x232c5a=function(){const _0xe9b497=new Cesium$5[(_0x3637c6(-0x12e,-0x155))]({'attributes':new Cesium$5['GeometryAttributes']({'position':new Cesium$5[(_0x3637c6(-0xb4,-0x136))]({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0x3637c6(-0x9f,-0x46)]['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});function _0x3637c6(_0x380e0b,_0x471210){return _0x486b(_0x380e0b- -0x23c,_0x471210);}function _0x5aa113(_0x37c1a2,_0x35d963){return _0x486b(_0x37c1a2- -0x23d,_0x35d963);}return _0xe9b497;},_0x20bbe8=function(_0x1d11d6,_0x1f0861){function _0x314330(_0x34df45,_0x48df78){return _0x486b(_0x48df78- -0x2d3,_0x34df45);}if(Cesium$5[_0x314330(-0x1af,-0x195)](_0x1f0861)){const _0x251c46={};_0x251c46[_0x314330(-0x154,-0x14f)]=_0x1f0861,_0x1d11d6['source']=_0x251c46;}const _0x3c1dda=new Cesium$5['Texture'](_0x1d11d6);function _0xfdfe8b(_0x583263,_0x466b7a){return _0x486b(_0x466b7a-0xbf,_0x583263);}return _0x3c1dda;},_0x2a390b=function(_0x30b539,_0x2b4920,_0x5a500c){const _0x4e1c7f={};_0x4e1c7f['context']=_0x30b539,_0x4e1c7f['colorTextures']=[_0x2b4920],_0x4e1c7f['depthTexture']=_0x5a500c;const _0x171eeb=new Cesium$5['Framebuffer'](_0x4e1c7f);return _0x171eeb;},_0x249a3f=function(_0x545b1f){const _0x39c684=!![],_0x489aec=![],_0x4d57c8={};function _0x37244a(_0x2dddc4,_0x2e46cb){return _0x486b(_0x2e46cb- -0x11b,_0x2dddc4);}_0x4d57c8['viewport']=_0x545b1f['viewport'],_0x4d57c8[_0xcbabba(-0x12a,-0x17b)]=_0x545b1f['depthTest'],_0x4d57c8[_0x37244a(0xe1,0xaa)]=_0x545b1f[_0x37244a(0x40,0xaa)],_0x4d57c8['blending']=_0x545b1f['blending'];const _0x3ef64e=_0x4d57c8;function _0xcbabba(_0x15540f,_0x298d2d){return _0x486b(_0x15540f- -0x226,_0x298d2d);}const _0x5a7d20=Cesium$5['Appearance'][_0x37244a(-0x15,0x7c)](_0x39c684,_0x489aec,_0x3ef64e);return _0x5a7d20;};function _0xd1e7f0(_0x1ba500,_0x4ca434){return _0x4b1d00(_0x4ca434-0x129,_0x1ba500);}const _0x1fcf65=function(_0xf0aae5){const _0x387223={};function _0x3de410(_0x1693ec,_0x26568b){return _0x486b(_0x26568b- -0x284,_0x1693ec);}const _0x5a7c52=Cesium$5['Math']['mod'](_0xf0aae5['west'],Cesium$5['Math'][_0x3de410(-0x207,-0x179)]),_0x4af285=Cesium$5['Math'][_0x3de410(-0x175,-0x10b)](_0xf0aae5['east'],Cesium$5[_0x276652(-0x19f,-0x1ee)]['TWO_PI']);function _0x276652(_0x4b6821,_0x595eea){return _0x486b(_0x4b6821- -0x2e4,_0x595eea);}const _0x52fd98=_0xf0aae5['width'];let _0x494a85,_0x25b69c;_0x52fd98>Cesium$5['Math']['THREE_PI_OVER_TWO']?(_0x494a85=0x0,_0x25b69c=Cesium$5['Math'][_0x276652(-0x1d9,-0x1ab)]):_0x4af285-_0x5a7c52<_0x52fd98?(_0x494a85=_0x5a7c52,_0x25b69c=_0x5a7c52+_0x52fd98):(_0x494a85=_0x5a7c52,_0x25b69c=_0x4af285);_0x387223[_0x276652(-0x167,-0x137)]={'min':Cesium$5[_0x276652(-0x19f,-0x145)]['toDegrees'](_0x494a85),'max':Cesium$5[_0x3de410(-0x192,-0x13f)]['toDegrees'](_0x25b69c)};const _0x30acf4=_0xf0aae5['south'],_0xf66f85=_0xf0aae5['north'],_0x35af3f=_0xf0aae5['height'],_0x286c5b=_0x35af3f>Cesium$5['Math']['PI']/0xc?_0x35af3f/0x2:0x0;let _0x471440=Cesium$5['Math'][_0x276652(-0x11b,-0x115)](_0x30acf4-_0x286c5b),_0x55e969=Cesium$5[_0x3de410(-0x1a8,-0x13f)][_0x3de410(-0x7e,-0xbb)](_0xf66f85+_0x286c5b);return _0x471440<-Cesium$5['Math']['PI_OVER_THREE']&&(_0x471440=-Cesium$5[_0x276652(-0x19f,-0x202)]['PI_OVER_TWO']),_0x55e969>Cesium$5['Math']['PI_OVER_THREE']&&(_0x55e969=Cesium$5['Math']['PI_OVER_TWO']),_0x387223[_0x3de410(-0xfa,-0x11a)]={'min':Cesium$5[_0x276652(-0x19f,-0x1a8)]['toDegrees'](_0x471440),'max':Cesium$5['Math']['toDegrees'](_0x55e969)},_0x387223;},_0x57b682={};function _0x280368(_0x39a998,_0x5a2224){return _0x4b1d00(_0x39a998- -0x38c,_0x5a2224);}return _0x57b682['getFullscreenQuad']=_0x232c5a,_0x57b682[_0x280368(0x17,0x15)]=_0x20bbe8,_0x57b682[_0x280368(0xe6,0x64)]=_0x2a390b,_0x57b682[_0x280368(0x62,0x94)]=_0x249a3f,_0x57b682[_0x280368(0x111,0x17d)]=_0x1fcf65,_0x57b682;}());var fullscreenVert=_0x7b6784(0x6f,0x22),screenDrawFrag=_0x4b1d00(0x44b,0x3f2),segmentDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20bool\x20colour;\x0a\x0ain\x20float\x20heightNormalization;\x0ain\x20float\x20speedNormalization;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speedNormalization\x20>\x20zero)\x20{\x0a\x20\x20\x20\x20if(colour)\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(heightNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a';function _0x7b6784(_0x596983,_0x3b9670){return _0x486b(_0x596983- -0x162,_0x3b9670);}function _0x486b(_0x1e690d,_0x54d506){const _0x10dca0=_0x10dc();return _0x486b=function(_0x486bba,_0x217e7c){_0x486bba=_0x486bba-0xd7;let _0x162bf4=_0x10dca0[_0x486bba];return _0x162bf4;},_0x486b(_0x1e690d,_0x54d506);}var segmentDrawVert='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20lines\x20drawing\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0auniform\x20vec2\x20hRange;\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0aout\x20float\x20heightNormalization;\x0aout\x20float\x20speedNormalization;\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight\x20+\x20lonLatLev.z;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0f,\x20360.0f)\x20-\x20180.0f;\x0a\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0f;\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(speed.z\x20-\x20wSpeedRange.x)\x20/\x20(wSpeedRange.y\x20-\x20wSpeedRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20vec3\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rgb;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x20\x20\x20\x20//\x20render\x20lines\x20with\x20triangles\x20and\x20miter\x20joint\x0a\x20\x20\x20\x20//\x20read\x20https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html\x20for\x20detail\x0a\x20\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20projectedCoordinates.next,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.next\x20+\x20offset;\x0a\x20\x20}\x0a\x0a\x20\x20heightNormalization\x20=\x20(currentPosition.z\x20-\x20hRange.x)\x20/\x20(hRange.y\x20-\x20hRange.x);\x0a\x0a\x20\x20speedNormalization\x20=\x20texture(particlesSpeed,\x20particleIndex).a;\x0a}\x0a',trailDrawFrag='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0aout\x20vec4\x20fragColor;\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0f\x20*\x20trailsColor)\x20/\x20255.0f;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20if(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20pointsColor;\x0a\x20\x20}\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20trailsColor;\x0a\x20\x20}\x0a\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a';const Cesium$4=mars3d__namespace['Cesium'];class ParticlesRendering{constructor(_0x4a3c06,_0x2c602e,_0x21e75c,_0x1dca4e,_0x194529){this['colour']=_0x21e75c['colors']===_0x441061(-0x1cb,-0x1b5),this['createRenderingTextures'](_0x4a3c06,_0x2c602e,_0x21e75c['colors']),this['createRenderingFramebuffers'](_0x4a3c06);function _0x441061(_0x1c1bc3,_0x109b7c){return _0x7b6784(_0x109b7c- -0x1e1,_0x1c1bc3);}this['createRenderingPrimitives'](_0x4a3c06,_0x2c602e,_0x21e75c,_0x1dca4e,_0x194529);}[_0x4b1d00(0x3f8,0x437)](_0x277a05,_0x482c04,_0x49e95e){const _0x574c1b={};_0x574c1b[_0x1773d1(0x314,0x2b3)]=_0x277a05;function _0x1773d1(_0x38b3c4,_0x2deaf9){return _0x7b6784(_0x2deaf9-0x2a7,_0x38b3c4);}_0x574c1b['width']=_0x277a05[_0x1773d1(0x2fa,0x2ba)],_0x574c1b[_0x1773d1(0x27e,0x2d3)]=_0x277a05['drawingBufferHeight'];function _0x409bc4(_0x3a3b35,_0x5284e6){return _0x4b1d00(_0x5284e6- -0x2e4,_0x3a3b35);}_0x574c1b['pixelFormat']=Cesium$4['PixelFormat'][_0x409bc4(0x106,0x141)],_0x574c1b['pixelDatatype']=Cesium$4['PixelDatatype'][_0x1773d1(0x31b,0x341)];const _0x4692e9=_0x574c1b,_0x37fefa={};_0x37fefa['context']=_0x277a05,_0x37fefa[_0x409bc4(0x9d,0x121)]=_0x277a05['drawingBufferWidth'],_0x37fefa[_0x409bc4(0x13a,0x169)]=_0x277a05['drawingBufferHeight'],_0x37fefa['pixelFormat']=Cesium$4['PixelFormat'][_0x409bc4(0xf0,0x10e)],_0x37fefa[_0x409bc4(0x195,0x12d)]=Cesium$4[_0x1773d1(0x2ce,0x2c6)]['UNSIGNED_INT'];const _0x4af35b=_0x37fefa,_0x25cc53=_0x49e95e['length'],_0x148dda=new Float32Array(_0x25cc53*0x3);for(let _0x443da6=0x0;_0x443da6<_0x25cc53;_0x443da6++){const _0x590993=Cesium$4[_0x1773d1(0x23f,0x282)]['fromCssColorString'](_0x49e95e[_0x443da6]);_0x148dda[0x3*_0x443da6]=_0x590993['red'],_0x148dda[0x3*_0x443da6+0x1]=_0x590993['green'],_0x148dda[0x3*_0x443da6+0x2]=_0x590993['blue'];}const _0x2a99a0={'context':_0x277a05,'width':_0x25cc53,'height':0x1,'pixelFormat':Cesium$4['PixelFormat']['RGB'],'pixelDatatype':Cesium$4[_0x1773d1(0x2ec,0x2c6)]['FLOAT'],'sampler':new Cesium$4['Sampler']({'minificationFilter':Cesium$4['TextureMinificationFilter']['LINEAR'],'magnificationFilter':Cesium$4[_0x409bc4(0x1cf,0x183)]['LINEAR']})};this['textures']={'segmentsColor':Util[_0x1773d1(0x1d3,0x229)](_0x4692e9),'segmentsDepth':Util['createTexture'](_0x4af35b),'currentTrailsColor':Util['createTexture'](_0x4692e9),'currentTrailsDepth':Util[_0x1773d1(0x244,0x229)](_0x4af35b),'nextTrailsColor':Util[_0x409bc4(0x82,0xbf)](_0x4692e9),'nextTrailsDepth':Util['createTexture'](_0x4af35b),'colorTable':Util['createTexture'](_0x2a99a0,_0x148dda)};}[_0x4b1d00(0x398,0x381)](_0x257355){function _0x1be8f1(_0x4aa1eb,_0x555ca8){return _0x7b6784(_0x555ca8-0x207,_0x4aa1eb);}function _0x333507(_0x18e5ed,_0x549a13){return _0x4b1d00(_0x549a13- -0x63b,_0x18e5ed);}this[_0x1be8f1(0x289,0x26b)]={'segments':Util[_0x1be8f1(0x208,0x258)](_0x257355,this['textures'][_0x1be8f1(0x269,0x247)],this['textures'][_0x333507(-0x2b7,-0x251)]),'currentTrails':Util[_0x1be8f1(0x2d1,0x258)](_0x257355,this['textures']['currentTrailsColor'],this['textures'][_0x1be8f1(0x162,0x1cd)]),'nextTrails':Util['createFramebuffer'](_0x257355,this[_0x333507(-0x21c,-0x27a)]['nextTrailsColor'],this['textures'][_0x333507(-0x198,-0x1dd)])};}[_0x7b6784(0x1a,-0x28)](_0x1e2f19){const _0x17d8e8=0x4;let _0x5cce33=[];function _0x4554a9(_0x29f397,_0x296603){return _0x4b1d00(_0x296603- -0x23d,_0x29f397);}for(let _0x3f930b=0x0;_0x3f930b<_0x1e2f19[_0x14ef40(0x2cf,0x260)];_0x3f930b++){for(let _0x1d553d=0x0;_0x1d553d<_0x1e2f19[_0x14ef40(0x2cf,0x2bf)];_0x1d553d++){for(let _0x170a77=0x0;_0x170a77<_0x17d8e8;_0x170a77++){_0x5cce33['push'](_0x3f930b/_0x1e2f19[_0x4554a9(0x280,0x24c)]),_0x5cce33['push'](_0x1d553d/_0x1e2f19['particlesTextureSize']);}}}_0x5cce33=new Float32Array(_0x5cce33);function _0x14ef40(_0x10b107,_0x24b2fb){return _0x7b6784(_0x10b107-0x267,_0x24b2fb);}let _0x67b0b9=[];for(let _0x2b438e=0x0;_0x2b438e<_0x1e2f19[_0x4554a9(0x211,0x1be)];_0x2b438e++){_0x67b0b9['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x67b0b9=new Float32Array(_0x67b0b9);let _0x246ce4=[];for(let _0x224ec6=0x0,_0x51b797=0x0;_0x224ec6<_0x1e2f19[_0x14ef40(0x241,0x2bf)];_0x224ec6++){_0x246ce4['push'](_0x51b797+0x0,_0x51b797+0x1,_0x51b797+0x2,_0x51b797+0x2,_0x51b797+0x1,_0x51b797+0x3),_0x51b797+=_0x17d8e8;}_0x246ce4=new Uint32Array(_0x246ce4);const _0x4af545=new Cesium$4['Geometry']({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4['ComponentDatatype'][_0x14ef40(0x2a9,0x24f)],'componentsPerAttribute':0x2,'values':_0x5cce33}),'normal':new Cesium$4[(_0x14ef40(0x28d,0x2ee))]({'componentDatatype':Cesium$4['ComponentDatatype'][_0x4554a9(0x23b,0x226)],'componentsPerAttribute':0x3,'values':_0x67b0b9})}),'indices':_0x246ce4});return _0x4af545;}[_0x4b1d00(0x4b8,0x519)](_0x1ff3f5,_0xb01cb,_0x4a879c,_0x1ced13,_0x7ff75){const _0x33bdee=this,_0x12e2db={};_0x12e2db['st']=0x0,_0x12e2db[_0x438082(0x281,0x2c5)]=0x1;const _0x1054f8={};_0x1054f8['sources']=[segmentDrawVert];const _0x45c0b3={};function _0x2274cf(_0x51db83,_0x26e130){return _0x7b6784(_0x26e130-0x520,_0x51db83);}_0x45c0b3['sources']=[segmentDrawFrag];const _0x5845ea={};_0x5845ea['enabled']=!![];const _0x162202={};_0x162202['viewport']=undefined,_0x162202['depthTest']=_0x5845ea,_0x162202[_0x438082(0x302,0x2a0)]=!![];const _0xc62321={};_0xc62321['position']=0x0,_0xc62321['st']=0x1;const _0x11aa71={};_0x11aa71[_0x2274cf(0x628,0x5b9)]=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x11aa71[_0x438082(0x304,0x340)]=[fullscreenVert];const _0x5d6969={};_0x5d6969[_0x2274cf(0x52c,0x5b9)]=[_0x438082(0x326,0x3ba)],_0x5d6969[_0x438082(0x304,0x35d)]=[trailDrawFrag];const _0x75d81a={};_0x75d81a['position']=0x0,_0x75d81a['st']=0x1;const _0x1e46aa={};_0x1e46aa[_0x2274cf(0x629,0x5b9)]=[_0x438082(0x223,0x1f9)],_0x1e46aa['sources']=[fullscreenVert];function _0x438082(_0x449a67,_0x3bda42){return _0x4b1d00(_0x449a67- -0x182,_0x3bda42);}const _0x33f774={};_0x33f774['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x33f774[_0x438082(0x304,0x325)]=[screenDrawFrag];const _0x5cf658={};_0x5cf658[_0x2274cf(0x4b3,0x52f)]=![];const _0x5105ad={};_0x5105ad['enabled']=!![],this['primitives']={'segments':new CustomPrimitive({'commandType':_0x438082(0x2b8,0x2aa),'attributeLocations':_0x12e2db,'geometry':this[_0x438082(0x2b9,0x2db)](_0x4a879c),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'previousParticlesPosition':function(){function _0x6e2733(_0x3441f6,_0x565ea5){return _0x2274cf(_0x565ea5,_0x3441f6- -0x3f7);}return _0x7ff75[_0x6e2733(0xf1,0xdb)]['previousParticlesPosition'];},'currentParticlesPosition':function(){return _0x7ff75['particlesTextures']['currentParticlesPosition'];},'postProcessingPosition':function(){function _0x49e500(_0x51d7dc,_0x5250ea){return _0x438082(_0x5250ea-0x216,_0x51d7dc);}return _0x7ff75['particlesTextures'][_0x49e500(0x57a,0x4ed)];},'particlesSpeed':function(){return _0x7ff75['particlesTextures']['particlesSpeed'];},'colorTable':function(){function _0x598437(_0x3214a4,_0x561b51){return _0x438082(_0x561b51- -0x2ed,_0x3214a4);}return _0x33bdee[_0x598437(-0x88,-0xae)]['colorTable'];},'aspect':function(){return _0x1ff3f5['drawingBufferWidth']/_0x1ff3f5['drawingBufferHeight'];},'H':function(){function _0x565c91(_0x45fc0e,_0x444e24){return _0x2274cf(_0x45fc0e,_0x444e24- -0x6f3);}return _0xb01cb['H'][_0x565c91(-0x222,-0x1bb)];},'hRange':function(){function _0x27c0fe(_0x117e2e,_0x182ca6){return _0x2274cf(_0x182ca6,_0x117e2e- -0x583);}function _0x11cf7a(_0x29136d,_0x412318){return _0x2274cf(_0x412318,_0x29136d- -0x684);}return new Cesium$4[(_0x27c0fe(-0x4e,-0x98))](_0xb01cb['H']['min'],_0xb01cb['H'][_0x11cf7a(-0x120,-0x14a)]);},'uSpeedRange':function(){function _0x4ad89a(_0x1b4684,_0x20c1b9){return _0x438082(_0x20c1b9- -0x464,_0x1b4684);}function _0x16319e(_0x52c197,_0x4b9899){return _0x438082(_0x4b9899- -0xad,_0x52c197);}return new Cesium$4[(_0x16319e(0x19d,0x207))](_0xb01cb['U'][_0x16319e(0x225,0x23d)],_0xb01cb['U'][_0x4ad89a(-0x120,-0x181)]);},'vSpeedRange':function(){function _0x42b822(_0xe8e1e7,_0x103a95){return _0x438082(_0xe8e1e7- -0x2d3,_0x103a95);}function _0x2a827b(_0x1f610b,_0x1f17cf){return _0x438082(_0x1f17cf- -0x393,_0x1f610b);}return new Cesium$4[(_0x42b822(-0x1f,-0x6d))](_0xb01cb['V'][_0x42b822(0x17,0x78)],_0xb01cb['V'][_0x2a827b(-0x71,-0xb0)]);},'wSpeedRange':function(){function _0x53542d(_0x3e1f57,_0x47b2a1){return _0x2274cf(_0x3e1f57,_0x47b2a1- -0x5ef);}return new Cesium$4[(_0x53542d(-0x41,-0xba))](_0xb01cb['W']['min'],_0xb01cb['W']['max']);},'pixelSize':function(){function _0x583a52(_0x4f3c82,_0x2a9880){return _0x438082(_0x4f3c82- -0x35a,_0x2a9880);}return _0x1ced13[_0x583a52(-0x97,-0x7b)];},'lineWidth':function(){return _0x4a879c['lineWidth'];},'particleHeight':function(){function _0x37cfd9(_0x5394b4,_0x491e8f){return _0x2274cf(_0x491e8f,_0x5394b4- -0x11);}return _0x4a879c[_0x37cfd9(0x562,0x4d3)];},'colour':function(){function _0x4d761c(_0x29b08a,_0x314460){return _0x438082(_0x314460- -0x4e9,_0x29b08a);}return _0x33bdee[_0x4d761c(-0x254,-0x297)];}},'vertexShaderSource':new Cesium$4[(_0x438082(0x309,0x2d9))](_0x1054f8),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x45c0b3),'rawRenderState':Util['createRawRenderState'](_0x162202),'framebuffer':this['framebuffers'][_0x2274cf(0x4f7,0x532)],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0xc62321,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType'][_0x438082(0x234,0x1fd)],'uniformMap':{'segmentsColorTexture':function(){function _0x4716a7(_0x32e096,_0x1fcad1){return _0x438082(_0x32e096- -0x17e,_0x1fcad1);}function _0x415047(_0x359525,_0x4d01d6){return _0x438082(_0x359525- -0x4de,_0x4d01d6);}return _0x33bdee[_0x415047(-0x29f,-0x2bb)][_0x415047(-0x1ff,-0x232)];},'segmentsDepthTexture':function(){function _0x218806(_0x501d66,_0x30338f){return _0x2274cf(_0x501d66,_0x30338f- -0x5c0);}return _0x33bdee[_0x218806(-0x81,-0x100)]['segmentsDepth'];},'currentTrailsColor':function(){function _0x577877(_0x48223c,_0x321770){return _0x2274cf(_0x321770,_0x48223c- -0x4e4);}return _0x33bdee['framebuffers'][_0x577877(0x3d,-0x45)]['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x2b44a1(_0x186806,_0x21b9fb){return _0x2274cf(_0x21b9fb,_0x186806- -0x35d);}function _0x520310(_0x1f7f2a,_0x4d64f4){return _0x438082(_0x4d64f4- -0x27f,_0x1f7f2a);}return _0x33bdee[_0x2b44a1(0x227,0x254)][_0x520310(-0x8,0x21)][_0x520310(0x5d,0xa1)];},'fadeOpacity':function(){function _0x4c8f10(_0x40a3f7,_0x54ccc7){return _0x438082(_0x40a3f7- -0x28e,_0x54ccc7);}return _0x4a879c[_0x4c8f10(0x91,0x9)];}},'vertexShaderSource':new Cesium$4[(_0x438082(0x309,0x39c))](_0x11aa71),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x5d6969),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4[_0x2274cf(0x5a1,0x599)]['ALWAYS']},'depthMask':!![]}),'framebuffer':this[_0x438082(0x303,0x28c)]['nextTrails'],'autoClear':!![],'preExecute':function(){if(_0x4a879c[_0x1cd388(0x385,0x30a)]){const _0x437186=_0x33bdee['framebuffers']['currentTrails'];_0x33bdee[_0xb38983(0x368,0x35d)]['currentTrails']=_0x33bdee['framebuffers']['nextTrails'],_0x33bdee[_0xb38983(0x368,0x2ea)][_0x1cd388(0x2de,0x315)]=_0x437186;}_0x33bdee['primitives']['trails']['commandToExecute']['framebuffer']=_0x33bdee['framebuffers'][_0x1cd388(0x340,0x315)];function _0x1cd388(_0x4f0ce0,_0x79abe8){return _0x438082(_0x79abe8-0x6b,_0x4f0ce0);}function _0xb38983(_0x3e918f,_0x207569){return _0x2274cf(_0x207569,_0x3e918f- -0x21c);}_0x33bdee[_0xb38983(0x2a7,0x214)]['trails']['clearCommand']['framebuffer']=_0x33bdee['framebuffers']['nextTrails'];}}),'screen':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x75d81a,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType'][_0x438082(0x234,0x299)],'uniformMap':{'trailsColorTexture':function(){function _0x2e2f13(_0x94ed3f,_0x5da8d5){return _0x2274cf(_0x94ed3f,_0x5da8d5- -0x78e);}return _0x33bdee['framebuffers'][_0x2e2f13(-0x2c1,-0x263)]['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x550f5b(_0x1e6dc7,_0x288ddb){return _0x438082(_0x288ddb-0x21,_0x1e6dc7);}return _0x33bdee['framebuffers']['nextTrails'][_0x550f5b(0x391,0x341)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x1e46aa),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x33f774),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0x5cf658,'depthMask':!![],'blending':_0x5105ad}),'framebuffer':undefined})};}}var CalculateSpeedShader=_0x7b6784(-0x7d,-0x66),PostProcessingPositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x0a\x0auniform\x20sampler2D\x20H;\x20//\x20particles\x20height\x20textures\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0auniform\x20vec2\x20viewerLonRange;\x0auniform\x20vec2\x20viewerLatRange;\x0a\x0aconst\x20float\x20randomCoefficient\x20=\x200.1f;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0aconst\x20float\x20dropRate\x20=\x200.1f;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0aconst\x20float\x20dropRateBump\x20=\x200.1f;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0avec4\x20getTextureValue(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20vec4\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D);\x0a\x20\x20return\x20result;\x0a}\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0abool\x20particleNoSpeed(vec3\x20particle)\x20{\x0a\x20\x20vec4\x20speed\x20=\x20getTextureValue(particlesSpeed,\x20particle);\x0a\x20\x20return\x20speed.r\x20==\x200.0f\x20&&\x20speed.g\x20==\x200.0f;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0f);\x0a\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20float\x20height\x20=\x20getTextureValue(H,\x20vec3(randomLon,\x20randomLat,\x20lev)).r;\x0a\x0a\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20height);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20viewerLatRange.x\x20||\x20particle.y\x20>\x20viewerLatRange.y\x20||\x20particle.x\x20<\x20viewerLonRange.x\x20||\x20particle.x\x20>\x20viewerLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x0a}\x0a',UpdatePositionShader='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x20Unit\x20converted\x20to\x20degrees\x20of\x20longitude\x20and\x20latitude\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20speed;\x0a\x20\x20if(length(speed.rgb)\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a';const Cesium$3=mars3d__namespace['Cesium'];class ParticlesComputing{constructor(_0x1f4c69,_0x2dfd47,_0x402aa9,_0x583da5){this[_0x4f3943(-0xc0,-0xc2)]=_0x2dfd47,this[_0x4f3943(0x6b,-0x25)](_0x1f4c69,_0x2dfd47);function _0xbfd12(_0x45e305,_0x4f2386){return _0x4b1d00(_0x45e305- -0x6a4,_0x4f2386);}this[_0x4f3943(-0x6d,0x1b)](_0x1f4c69,_0x402aa9,_0x583da5);function _0x4f3943(_0x42efe8,_0x119c13){return _0x4b1d00(_0x119c13- -0x477,_0x42efe8);}this['createComputingPrimitives'](_0x2dfd47,_0x402aa9,_0x583da5);}['createWindTextures'](_0x3f35c2,_0x28d95f){var _0x3d5849;const _0x3688ae={'context':_0x3f35c2,'width':_0x28d95f[_0x5c2f98(-0x185,-0x159)]['lon'],'height':_0x28d95f[_0x5c2f98(-0x1ba,-0x159)][_0x5c2f98(-0xd4,-0x105)]*(_0x28d95f['dimensions'][_0x5c2f98(-0x6e,-0x7a)]||0x1),'pixelFormat':Cesium$3['PixelFormat'][_0x5c2f98(-0x3a,-0x99)],'pixelDatatype':Cesium$3['PixelDatatype']['FLOAT'],'flipY':![],'sampler':new Cesium$3[(_0x5c2f98(-0x1f0,-0x168))]({'minificationFilter':Cesium$3[_0x5c2f98(-0x14d,-0xdb)][_0x250bc3(0x2ca,0x280)],'magnificationFilter':Cesium$3['TextureMagnificationFilter']['NEAREST']})};function _0x250bc3(_0x3eac53,_0xc178f0){return _0x4b1d00(_0x3eac53- -0x129,_0xc178f0);}function _0x5c2f98(_0x18ad79,_0x558b8f){return _0x4b1d00(_0x558b8f- -0x52e,_0x18ad79);}this['windTextures']={'U':Util[_0x5c2f98(-0x125,-0x18b)](_0x3688ae,_0x28d95f['U']['array']),'V':Util[_0x5c2f98(-0x1dc,-0x18b)](_0x3688ae,_0x28d95f['V']['array']),'W':Util['createTexture'](_0x3688ae,((_0x3d5849=_0x28d95f['W'])===null||_0x3d5849===void 0x0?void 0x0:_0x3d5849['array'])??_0x28d95f['U']['array']),'H':Util[_0x5c2f98(-0x139,-0x18b)](_0x3688ae,_0x28d95f['H']['array'])};}['createParticlesTextures'](_0x2c31d2,_0x3b8bef,_0x5b787c){function _0x5793f2(_0x5e50f9,_0x24d875){return _0x4b1d00(_0x5e50f9- -0x3fa,_0x24d875);}function _0x527b7a(_0x53ef60,_0x430773){return _0x7b6784(_0x53ef60-0x507,_0x430773);}const _0x17e08f={'context':_0x2c31d2,'width':_0x3b8bef[_0x527b7a(0x56f,0x5cf)],'height':_0x3b8bef[_0x527b7a(0x56f,0x4e5)],'pixelFormat':Cesium$3['PixelFormat']['RGBA'],'pixelDatatype':Cesium$3['PixelDatatype']['FLOAT'],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3['TextureMinificationFilter'][_0x527b7a(0x4d9,0x56a)],'magnificationFilter':Cesium$3['TextureMagnificationFilter']['NEAREST']})},_0x2f3a91=this['randomizeParticles'](_0x3b8bef['maxParticles'],_0x5b787c),_0x35b18c=new Float32Array(0x4*_0x3b8bef['maxParticles'])[_0x5793f2(0xa1,0x12b)](0x0);this['particlesTextures']={'previousParticlesPosition':Util[_0x5793f2(-0x57,0x21)](_0x17e08f,_0x2f3a91),'currentParticlesPosition':Util['createTexture'](_0x17e08f,_0x2f3a91),'nextParticlesPosition':Util[_0x527b7a(0x489,0x505)](_0x17e08f,_0x2f3a91),'postProcessingPosition':Util[_0x5793f2(-0x57,-0xb4)](_0x17e08f,_0x2f3a91),'particlesSpeed':Util[_0x527b7a(0x489,0x49e)](_0x17e08f,_0x35b18c)};}['randomizeParticles'](_0x144600,_0x49b340){function _0x49d6d5(_0x315c80,_0xcf39b3){return _0x4b1d00(_0x315c80-0xa8,_0xcf39b3);}function _0x2df70a(_0x1b9911,_0x5d29d4){return _0x7b6784(_0x5d29d4-0x1a8,_0x1b9911);}const _0xc7edd=new Float32Array(0x4*_0x144600);for(let _0x323727=0x0;_0x323727<_0x144600;_0x323727++){_0xc7edd[0x4*_0x323727]=Cesium$3[_0x2df70a(0x132,0x18b)]['randomBetween'](_0x49b340[_0x2df70a(0x123,0x15f)]['x'],_0x49b340['lonRange']['y']),_0xc7edd[0x4*_0x323727+0x1]=Cesium$3[_0x49d6d5(0x4ac,0x49e)]['randomBetween'](_0x49b340['latRange']['x'],_0x49b340[_0x49d6d5(0x4a8,0x434)]['y']),_0xc7edd[0x4*_0x323727+0x2]=Cesium$3[_0x2df70a(0x153,0x18b)][_0x49d6d5(0x462,0x4a1)](this['data']['lev']['min'],this['data']['lev']['max']),_0xc7edd[0x4*_0x323727+0x3]=0x0;}return _0xc7edd;}[_0x7b6784(-0x17,-0x4f)](_0x3f7f6a){const _0x22b0b2=[_0x3f7f6a['dimensions'][_0x577619(-0x20d,-0x22e)],_0x3f7f6a['dimensions']['lat'],_0x3f7f6a['dimensions'][_0x229751(0x4a6,0x4a6)]],_0x50d506=[_0x3f7f6a['lon']['min'],_0x3f7f6a['lat'][_0x229751(0x45e,0x4d6)],_0x3f7f6a[_0x577619(-0x195,-0x145)]['min']];function _0x577619(_0x1e1a5e,_0x991dcd){return _0x7b6784(_0x1e1a5e- -0x228,_0x991dcd);}const _0x40a8ff=[_0x3f7f6a[_0x229751(0x42e,0x489)][_0x229751(0x457,0x454)],_0x3f7f6a[_0x229751(0x41b,0x3d0)][_0x229751(0x457,0x416)],_0x3f7f6a[_0x577619(-0x195,-0x1f6)]['max']],_0x41625f=[(_0x40a8ff[0x0]-_0x50d506[0x0])/(_0x22b0b2[0x0]-0x1),(_0x40a8ff[0x1]-_0x50d506[0x1])/(_0x22b0b2[0x1]-0x1),_0x22b0b2[0x2]>0x1?(_0x40a8ff[0x2]-_0x50d506[0x2])/(_0x22b0b2[0x2]-0x1):0x1],_0x55196e=Math[_0x577619(-0x286,-0x283)](Math['random']()*_0x3f7f6a['U']['array']['length']);function _0x229751(_0x1a4d04,_0x13ce84){return _0x7b6784(_0x1a4d04-0x413,_0x13ce84);}const _0x28b7dc=_0x55196e%(_0x22b0b2[0x0]*_0x22b0b2[0x1]),_0xf3f868=Math['floor'](_0x28b7dc/_0x22b0b2[0x0]),_0xa0642c=_0x28b7dc%_0x22b0b2[0x0],_0x3b04c7=Cesium$3['Math'][_0x577619(-0x28f,-0x26e)](_0x50d506[0x0]+_0xa0642c*_0x41625f[0x0],_0x50d506[0x0]+(_0xa0642c+0x1)*_0x41625f[0x0]),_0x368e39=Cesium$3[_0x577619(-0x245,-0x1d4)][_0x229751(0x3ac,0x3d5)](_0x50d506[0x1]+(_0xf3f868-0x1)*_0x41625f[0x1],_0x50d506[0x1]+_0xf3f868*_0x41625f[0x1]),_0x121c51=_0x3f7f6a['H'][_0x229751(0x42b,0x46d)][_0x55196e]||0x0;return[_0x3b04c7,_0x368e39,_0x121c51];}[_0x4b1d00(0x479,0x465)](){function _0x42987f(_0x219f53,_0x496738){return _0x7b6784(_0x496738- -0x176,_0x219f53);}function _0xbc39c4(_0x4a912f,_0x3a824f){return _0x7b6784(_0x3a824f-0x1f0,_0x4a912f);}Object[_0xbc39c4(0x25d,0x23c)](this['particlesTextures'])[_0xbc39c4(0x1c6,0x1b4)](_0x35c91d=>{function _0x18c79b(_0x558b77,_0x1770b0){return _0x42987f(_0x1770b0,_0x558b77-0x68b);}this['particlesTextures'][_0x35c91d][_0x18c79b(0x4d0,0x4d6)]();});}[_0x7b6784(0x11,-0x14)](_0x32c413,_0x26b2dc,_0x2e151c){const _0x1814e3=new Cesium$3[(_0x2641d1(0x210,0x262))](_0x32c413['dimensions'][_0x131486(0x4fb,0x4f0)],_0x32c413['dimensions'][_0x131486(0x4e8,0x490)],_0x32c413['dimensions']['lev']),_0x93b40a=new Cesium$3['Cartesian3'](_0x32c413['lon']['min'],_0x32c413[_0x2641d1(0x1cb,0x196)][_0x131486(0x52b,0x5b5)],_0x32c413['lev']['min']),_0xbcc708=new Cesium$3['Cartesian3'](_0x32c413['lon'][_0x2641d1(0x207,0x23a)],_0x32c413['lat']['max'],_0x32c413['lev']['max']),_0x5211b7=new Cesium$3[(_0x2641d1(0x210,0x21b))]((_0xbcc708['x']-_0x93b40a['x'])/(_0x1814e3['x']-0x1),(_0xbcc708['y']-_0x93b40a['y'])/(_0x1814e3['y']-0x1),_0x1814e3['z']>0x1?(_0xbcc708['z']-_0x93b40a['z'])/(_0x1814e3['z']-0x1):0x1),_0x365833=new Cesium$3['Cartesian2'](_0x32c413['lon']['min'],_0x32c413[_0x2641d1(0x1de,0x26c)]['max']),_0x25320a=new Cesium$3['Cartesian2'](_0x32c413['lat']['min'],_0x32c413['lat'][_0x2641d1(0x207,0x1d4)]),_0x7f1c90=new Cesium$3['Cartesian2'](_0x32c413['U'][_0x131486(0x52b,0x4da)],_0x32c413['U']['max']),_0x1b0783=new Cesium$3['Cartesian2'](_0x32c413['V']['min'],_0x32c413['V']['max']),_0x50a3bb=new Cesium$3[(_0x131486(0x4f5,0x581))](_0x32c413['W']['min'],_0x32c413['W']['max']),_0x48adcc=this,_0x5f022c={};_0x5f022c['U']=function(){function _0x3b49cc(_0x3efe79,_0x50ebce){return _0x131486(_0x50ebce- -0x54f,_0x3efe79);}return _0x48adcc[_0x3b49cc(-0x148,-0xce)]['U'];},_0x5f022c['V']=function(){return _0x48adcc['windTextures']['V'];},_0x5f022c['W']=function(){function _0x564f5a(_0x4c147f,_0xcaf220){return _0x2641d1(_0xcaf220- -0x3ee,_0x4c147f);}return _0x48adcc[_0x564f5a(-0x278,-0x28a)]['W'];},_0x5f022c['currentParticlesPosition']=function(){return _0x48adcc['particlesTextures']['currentParticlesPosition'];},_0x5f022c['dimension']=function(){return _0x1814e3;},_0x5f022c[_0x2641d1(0x191,0x10e)]=function(){return _0x93b40a;},_0x5f022c['maximum']=function(){return _0xbcc708;},_0x5f022c['interval']=function(){return _0x5211b7;},_0x5f022c['uSpeedRange']=function(){return _0x7f1c90;},_0x5f022c[_0x2641d1(0x252,0x2ba)]=function(){return _0x1b0783;},_0x5f022c['wSpeedRange']=function(){return _0x50a3bb;};function _0x131486(_0x2a334a,_0x5591a7){return _0x4b1d00(_0x2a334a-0xbf,_0x5591a7);}_0x5f022c[_0x2641d1(0x1b8,0x16d)]=function(){function _0x5aeaf3(_0x1a7885,_0x3cfa7b){return _0x2641d1(_0x1a7885- -0x1ec,_0x3cfa7b);}return _0x2e151c[_0x5aeaf3(-0x5,-0x44)]*_0x26b2dc['speedFactor'];};function _0x2641d1(_0x14f7de,_0x34ff41){return _0x7b6784(_0x14f7de-0x1c3,_0x34ff41);}const _0x38953f={};_0x38953f['sources']=[CalculateSpeedShader];const _0x3f38a8={};_0x3f38a8[_0x131486(0x545,0x5d5)]=[UpdatePositionShader];const _0x41b601={};_0x41b601['sources']=[PostProcessingPositionShader],this[_0x131486(0x483,0x49f)]={'calculateSpeed':new CustomPrimitive({'commandType':_0x2641d1(0x1ea,0x201),'uniformMap':_0x5f022c,'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x38953f),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':function(){function _0x4533c0(_0x187bd8,_0x505832){return _0x131486(_0x187bd8- -0x303,_0x505832);}if(_0x26b2dc!==undefined&&_0x26b2dc['dynamic']){const _0x46d979=_0x48adcc['particlesTextures']['previousParticlesPosition'];_0x48adcc[_0x6e96a3(0x4d1,0x446)][_0x6e96a3(0x500,0x4bf)]=_0x48adcc[_0x4533c0(0x1a5,0x1bd)]['currentParticlesPosition'],_0x48adcc[_0x4533c0(0x1a5,0x17a)]['currentParticlesPosition']=_0x48adcc['particlesTextures']['postProcessingPosition'],_0x48adcc['particlesTextures'][_0x6e96a3(0x541,0x4c5)]=_0x46d979;}function _0x6e96a3(_0x2ba7b0,_0x515d7b){return _0x131486(_0x2ba7b0-0x29,_0x515d7b);}_0x48adcc['primitives'][_0x6e96a3(0x55f,0x4cb)][_0x6e96a3(0x49c,0x4e4)][_0x6e96a3(0x486,0x4dd)]=_0x48adcc['particlesTextures']['particlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':_0x131486(0x507,0x54f),'uniformMap':{'currentParticlesPosition':function(){function _0x3ea10a(_0x92d72b,_0x4f2e5b){return _0x2641d1(_0x92d72b- -0x1be,_0x4f2e5b);}return _0x48adcc[_0x3ea10a(-0x33,-0x3)]['currentParticlesPosition'];},'particlesSpeed':function(){function _0x6f53dd(_0x98ebf0,_0x2a7883){return _0x2641d1(_0x2a7883- -0x22e,_0x98ebf0);}return _0x48adcc[_0x6f53dd(-0x122,-0xa3)]['particlesSpeed'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x3f38a8),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':function(){function _0x961a6c(_0x99efc8,_0x3cbcd3){return _0x131486(_0x99efc8- -0x62,_0x3cbcd3);}function _0x5e1e97(_0x4704cb,_0x3d7ee3){return _0x2641d1(_0x3d7ee3- -0x16a,_0x4704cb);}_0x48adcc[_0x5e1e97(0x33,-0x4)]['updatePosition'][_0x5e1e97(0x1e,-0x14)][_0x5e1e97(0x49,-0x2a)]=_0x48adcc['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':function(){function _0x5dbed7(_0x494f09,_0xef357c){return _0x2641d1(_0x494f09- -0x166,_0xef357c);}return _0x48adcc['particlesTextures'][_0x5dbed7(0x6d,0x6)];},'particlesSpeed':function(){function _0x411ea8(_0xadf5b4,_0x18def0){return _0x2641d1(_0xadf5b4-0x1f3,_0x18def0);}return _0x48adcc[_0x411ea8(0x37e,0x3c4)]['particlesSpeed'];},'viewerLonRange':function(){return _0x2e151c['lonRange'];},'viewerLatRange':function(){return _0x2e151c['latRange'];},'lonRange':function(){return _0x365833;},'latRange':function(){return _0x25320a;},'dimension':function(){return _0x1814e3;},'minimum':function(){return _0x93b40a;},'maximum':function(){return _0xbcc708;},'interval':function(){return _0x5211b7;},'H':function(){return _0x48adcc['windTextures']['H'];},'randomCoefficient':function(){function _0x516316(_0xd5a551,_0x162dc8){return _0x2641d1(_0xd5a551- -0x2fc,_0x162dc8);}const _0x1ce7ae=Math[_0x516316(-0x133,-0x15c)]();return _0x1ce7ae;},'dropRate':function(){return _0x26b2dc['dropRate'];},'dropRateBump':function(){function _0x5b4dd6(_0x23e83e,_0x1ce452){return _0x2641d1(_0x1ce452-0x44,_0x23e83e);}return _0x26b2dc[_0x5b4dd6(0x117,0x17d)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x41b601),'outputTexture':this['particlesTextures'][_0x2641d1(0x1fb,0x1a1)],'preExecute':function(){function _0xe3234d(_0x1b78c7,_0x4000c3){return _0x2641d1(_0x4000c3-0x238,_0x1b78c7);}_0x48adcc[_0xe3234d(0x35d,0x39e)]['postProcessingPosition']['commandToExecute']['outputTexture']=_0x48adcc['particlesTextures']['postProcessingPosition'];}})};}}const Cesium$2=mars3d__namespace['Cesium'];class ParticleSystem{constructor(_0x2e5260,_0x118e3c,_0x1e4c07,_0x11119d){this['context']=_0x2e5260,_0x118e3c={..._0x118e3c};_0x118e3c['udata']&&_0x118e3c[_0x4806a1(0x38e,0x30b)]&&(_0x118e3c[_0x4f5508(0x3a4,0x36a)]={},_0x118e3c['dimensions']['lon']=_0x118e3c[_0x4806a1(0x292,0x28d)],_0x118e3c[_0x4f5508(0x2e6,0x36a)]['lat']=_0x118e3c[_0x4f5508(0x483,0x415)],_0x118e3c[_0x4806a1(0x2b2,0x27e)]['lev']=_0x118e3c[_0x4806a1(0x3e2,0x35d)]||0x1,_0x118e3c[_0x4f5508(0x414,0x3d1)]={},_0x118e3c['lon']['min']=_0x118e3c[_0x4f5508(0x337,0x375)],_0x118e3c[_0x4f5508(0x350,0x3d1)]['max']=_0x118e3c['xmax'],_0x118e3c['lat']={},_0x118e3c[_0x4806a1(0x350,0x2d2)][_0x4806a1(0x2d7,0x315)]=_0x118e3c[_0x4f5508(0x2cc,0x33f)],_0x118e3c['lat'][_0x4f5508(0x3f9,0x3fa)]=_0x118e3c['ymax'],_0x118e3c['lev']={},_0x118e3c[_0x4f5508(0x4c6,0x449)]['min']=_0x118e3c['levmin']??0x1,_0x118e3c['lev']['max']=_0x118e3c[_0x4f5508(0x3be,0x3c0)]??0x1,_0x118e3c['U']={},_0x118e3c['U']['array']=new Float32Array(_0x118e3c['udata']),_0x118e3c['U'][_0x4f5508(0x3fb,0x401)]=_0x118e3c[_0x4f5508(0x3ca,0x3e6)]??Math['min'](..._0x118e3c['udata']),_0x118e3c['U']['max']=_0x118e3c[_0x4f5508(0x395,0x35e)]??Math['max'](..._0x118e3c['udata']),_0x118e3c['V']={},_0x118e3c['V']['array']=new Float32Array(_0x118e3c[_0x4806a1(0x283,0x30b)]),_0x118e3c['V']['min']=_0x118e3c[_0x4f5508(0x410,0x43b)]??Math[_0x4806a1(0x313,0x315)](..._0x118e3c[_0x4806a1(0x392,0x30b)]),_0x118e3c['V'][_0x4806a1(0x2f0,0x30e)]=_0x118e3c['vmax']??Math[_0x4806a1(0x29d,0x30e)](..._0x118e3c['vdata']));function _0x4f5508(_0x3b6379,_0x4c4f41){return _0x7b6784(_0x4c4f41-0x3b6,_0x3b6379);}!_0x118e3c['W']&&(_0x118e3c['W']={'array':new Float32Array(_0x118e3c['U']['array']['length']),'min':0x0,'max':0x0});if(!_0x118e3c['H']){var _0x1c588f;_0x118e3c['H']={'array':new Float32Array(_0x118e3c['U']['array'][_0x4f5508(0x2c5,0x33b)]),'min':0x0,'max':0x0};if((_0x1c588f=_0x118e3c['lev'])!==null&&_0x1c588f!==void 0x0&&_0x1c588f[_0x4f5508(0x408,0x3ce)]){const {lon:_0x2bf3c4,lat:_0x3887c2,lev:_0x210610}=_0x118e3c[_0x4806a1(0x2c5,0x27e)];for(let _0x33bf93=0x0;_0x33bf93<_0x210610;_0x33bf93++){for(let _0x5ba5e5=0x0;_0x5ba5e5<_0x3887c2;_0x5ba5e5++){for(let _0x2e74d0=0x0;_0x2e74d0<_0x2bf3c4;_0x2e74d0++){const _0x4267b2=_0x33bf93*(_0x2bf3c4*_0x3887c2)+_0x5ba5e5*_0x2bf3c4+_0x2e74d0;_0x118e3c['H']['array'][_0x4267b2]=_0x118e3c['lev'][_0x4806a1(0x269,0x2e2)][_0x33bf93];}}}_0x118e3c['H']['min']=Math['min'](..._0x118e3c['lev']['array']),_0x118e3c['H']['max']=Math[_0x4f5508(0x3bc,0x3fa)](..._0x118e3c[_0x4f5508(0x4cd,0x449)]['array']);}}function _0x4806a1(_0xe17dfa,_0x150ef8){return _0x4b1d00(_0x150ef8- -0x157,_0xe17dfa);}this['data']=_0x118e3c,this['options']=_0x1e4c07,this[_0x4f5508(0x40a,0x42c)]=_0x11119d,this[_0x4806a1(0x1d5,0x25b)]=new ParticlesComputing(this[_0x4f5508(0x3a6,0x3c2)],this['data'],this['options'],this['viewerParameters']),this['particlesRendering']=new ParticlesRendering(this[_0x4806a1(0x2da,0x2d6)],this[_0x4f5508(0x2dd,0x34a)],this['options'],this['viewerParameters'],this['particlesComputing']);}['canvasResize'](_0x58e163){this['particlesComputing']['destroyParticlesTextures'](),Object[_0x2de36b(0x129,0x99)](this['particlesComputing']['windTextures'])['forEach'](_0xa45948=>{function _0x37492d(_0x4cbfca,_0x27dbf3){return _0x2de36b(_0x27dbf3-0x6e,_0x4cbfca);}function _0x87703d(_0x59c456,_0x5670db){return _0x2de36b(_0x59c456- -0x206,_0x5670db);}this[_0x87703d(-0x198,-0x1e9)]['windTextures'][_0xa45948][_0x87703d(-0x16e,-0x135)]();});function _0xf2391f(_0x4014b5,_0x4361c6){return _0x7b6784(_0x4361c6- -0x171,_0x4014b5);}function _0x2de36b(_0x57547a,_0x58f904){return _0x7b6784(_0x57547a-0xdd,_0x58f904);}this['particlesRendering']['textures'][_0x2de36b(0x5b,0x51)]['destroy'](),Object[_0xf2391f(-0x94,-0x125)](this[_0xf2391f(-0x13a,-0x19b)][_0x2de36b(0x141,0x178)])['forEach'](_0x1a0e77=>{this['particlesRendering']['framebuffers'][_0x1a0e77]['destroy']();}),this['context']=_0x58e163,this['particlesComputing']=new ParticlesComputing(this[_0xf2391f(-0x110,-0x165)],this['data'],this['options'],this[_0xf2391f(-0xfe,-0xfb)]),this['particlesRendering']=new ParticlesRendering(this['context'],this['data'],this['options'],this[_0xf2391f(-0x12f,-0xfb)],this['particlesComputing']);}[_0x4b1d00(0x498,0x4d8)](){function _0x56d279(_0x49263b,_0x53e159){return _0x4b1d00(_0x49263b- -0xd5,_0x53e159);}function _0x1969ee(_0x1d4ac4,_0x1492c0){return _0x4b1d00(_0x1d4ac4- -0x228,_0x1492c0);}const _0x2c71a0=new Cesium$2['ClearCommand']({'color':new Cesium$2['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2['Pass']['OPAQUE']});Object['keys'](this['particlesRendering'][_0x1969ee(0x25d,0x28c)])[_0x56d279(0x310,0x339)](_0x49a8fc=>{function _0x153a36(_0xc5a822,_0x3bf190){return _0x1969ee(_0x3bf190-0x2af,_0xc5a822);}_0x2c71a0['framebuffer']=this['particlesRendering'][_0x153a36(0x593,0x50c)][_0x49a8fc],_0x2c71a0['execute'](this['context']);});}[_0x4b1d00(0x455,0x47e)](_0x38f71f,_0x287fe5=!![]){function _0x1a0ae2(_0x24b008,_0x2aba4c){return _0x4b1d00(_0x24b008- -0x403,_0x2aba4c);}_0x287fe5&&(this['clearFramebuffers'](),this[_0x476260(0x21b,0x292)]['destroyParticlesTextures'](),this[_0x476260(0x2bf,0x292)][_0x1a0ae2(0x8f,0x113)](this['context'],this[_0x476260(0x2ff,0x389)],this['viewerParameters']));function _0x476260(_0x420ecc,_0x19b0d0){return _0x4b1d00(_0x19b0d0- -0x120,_0x420ecc);}if(_0x38f71f){var _0x5bdbe7;const _0xa10425=this[_0x1a0ae2(-0xc,0x68)][_0x476260(0x31f,0x31b)](this['options']);this['particlesRendering']['primitives']['segments']['geometry']=_0xa10425;const _0x4a8dd3=Cesium$2[_0x1a0ae2(0x9d,0xb6)][_0x476260(0x2d5,0x2de)]({'context':this['context'],'geometry':_0xa10425,'attributeLocations':this[_0x1a0ae2(-0xc,-0x14)]['primitives'][_0x1a0ae2(0x30,0xbd)][_0x476260(0x22a,0x2a0)],'bufferUsage':Cesium$2['BufferUsage'][_0x476260(0x358,0x324)]});(_0x5bdbe7=this[_0x476260(0x25c,0x2d7)][_0x476260(0x216,0x2a4)])!==null&&_0x5bdbe7!==void 0x0&&(_0x5bdbe7=_0x5bdbe7['segments'])!==null&&_0x5bdbe7!==void 0x0&&_0x5bdbe7['commandToExecute']&&(this[_0x1a0ae2(-0xc,-0xc)]['primitives'][_0x1a0ae2(0x30,0x85)][_0x476260(0x245,0x294)]['vertexArray']=_0x4a8dd3);}}['setOptions'](_0x525bed){function _0x276598(_0x23cd1a,_0x15022d){return _0x7b6784(_0x15022d-0x2c3,_0x23cd1a);}function _0x27968b(_0x441fbf,_0x5a4d71){return _0x7b6784(_0x441fbf-0x64,_0x5a4d71);}let _0x92e974=![];this[_0x276598(0x2c4,0x34b)]['maxParticles']!==_0x525bed[_0x276598(0x309,0x29d)]&&(_0x92e974=!![]),Object[_0x276598(0x360,0x30f)](_0x525bed)[_0x27968b(0x28,0x7a)](_0x54f17f=>{this['options'][_0x54f17f]=_0x525bed[_0x54f17f];}),this['refreshParticles'](_0x92e974,_0x525bed['dynamic']);}['applyViewerParameters'](_0xade393){function _0x1ca8fe(_0x1952d0,_0x87b951){return _0x7b6784(_0x1952d0-0x21f,_0x87b951);}Object[_0x2ea4fa(-0x113,-0x109)](_0xade393)['forEach'](_0xb79c=>{this['viewerParameters'][_0xb79c]=_0xade393[_0xb79c];}),this[_0x1ca8fe(0x253,0x1c6)](![]);function _0x2ea4fa(_0x183755,_0x5a5578){return _0x4b1d00(_0x5a5578- -0x576,_0x183755);}!this[_0x2ea4fa(-0x14f,-0xcd)]['dynamic']&&(this[_0x2ea4fa(-0xbf,-0xcd)][_0x1ca8fe(0x21f,0x1f6)]=!![],this[_0x2ea4fa(-0x1b5,-0x12d)](this['options']),setTimeout(()=>{this['options'][_0x281a05(0x246,0x232)]=![];function _0x42955f(_0x6bbd97,_0x158340){return _0x2ea4fa(_0x158340,_0x6bbd97-0x91);}function _0x281a05(_0xce750a,_0x472656){return _0x2ea4fa(_0x472656,_0xce750a-0x39b);}this[_0x281a05(0x26e,0x27d)](this['options']);},0x1f4));}['destroy'](){function _0x55319e(_0x403d7b,_0xdb6169){return _0x4b1d00(_0xdb6169- -0x53b,_0x403d7b);}clearTimeout(this[_0x129555(-0x271,-0x2da)]),this['particlesComputing'][_0x129555(-0x218,-0x1b5)](),Object['keys'](this['particlesComputing'][_0x55319e(-0x169,-0x179)])['forEach'](_0x27762b=>{function _0x38e654(_0x3fce85,_0x1b44ba){return _0x55319e(_0x1b44ba,_0x3fce85-0x4db);}function _0x4abe17(_0x5d4a76,_0x24926a){return _0x55319e(_0x5d4a76,_0x24926a-0x4af);}this[_0x4abe17(0x2e1,0x326)][_0x4abe17(0x386,0x336)][_0x27762b][_0x38e654(0x37c,0x2ef)]();}),this['particlesRendering']['textures']['colorTable']['destroy'](),Object['keys'](this[_0x55319e(-0xf7,-0x144)]['framebuffers'])['forEach'](_0x91f9a0=>{function _0x4e633e(_0x4f59df,_0x26f177){return _0x129555(_0x26f177-0x5a1,_0x4f59df);}function _0xf52228(_0x4b2489,_0x573590){return _0x55319e(_0x573590,_0x4b2489-0x63b);}this[_0x4e633e(0x2ca,0x307)]['framebuffers'][_0x91f9a0][_0x4e633e(0x2a7,0x2ec)]();});function _0x129555(_0x45bde8,_0x1bec59){return _0x7b6784(_0x45bde8- -0x270,_0x1bec59);}for(const _0x176450 in this){delete this[_0x176450];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x7b6784(-0x31,-0x37)],_0x4a50c9={};_0x4a50c9['particlesNumber']=0x1000,_0x4a50c9[_0x4b1d00(0x47e,0x3f7)]=0x0,_0x4a50c9['fadeOpacity']=0.996,_0x4a50c9[_0x7b6784(-0x5c,-0xc6)]=0.003,_0x4a50c9['dropRateBump']=0.01,_0x4a50c9['speedFactor']=0.5,_0x4a50c9[_0x7b6784(-0xa,-0x51)]=0x2,_0x4a50c9[_0x4b1d00(0x3da,0x433)]=[_0x4b1d00(0x487,0x450)],_0x4a50c9[_0x7b6784(0x0,0x17)]=!![];const DEF_OPTIONS=_0x4a50c9;class WindLayer extends BaseLayer$1{constructor(_0x4a9bb5={}){_0x4a9bb5={...DEF_OPTIONS,..._0x4a9bb5},super(_0x4a9bb5),this['_setOptionsHook'](_0x4a9bb5);}get[_0x7b6784(0x36,0x9b)](){function _0x135f8e(_0x1b39c4,_0x1f0ba9){return _0x4b1d00(_0x1f0ba9- -0x2eb,_0x1b39c4);}return this[_0x135f8e(0x110,0xd9)];}get['data'](){return this['_data'];}set['data'](_0x4e853b){this['setData'](_0x4e853b);}get[_0x7b6784(-0x47,-0x2b)](){function _0x1e032b(_0x1bf310,_0x4f5828){return _0x4b1d00(_0x4f5828- -0x28a,_0x1bf310);}return this[_0x1e032b(0x1b6,0x21f)]['colors'];}set['colors'](_0x37bdc6){function _0x20cc64(_0x26db08,_0x143df4){return _0x7b6784(_0x143df4-0x161,_0x26db08);}function _0x449da2(_0x501811,_0x3661d5){return _0x7b6784(_0x3661d5-0x1ca,_0x501811);}this['options'][_0x449da2(0xf2,0x183)]=_0x37bdc6;if(this[_0x20cc64(0x24c,0x1ca)]){const _0x5822ab={};_0x5822ab['colors']=_0x37bdc6,this[_0x449da2(0x25d,0x233)][_0x449da2(0x1b5,0x1f2)](_0x5822ab);}this[_0x20cc64(0x105,0x10e)]();}['_mountedHook'](){}['_addedHook'](){this[_0x261c98(-0x82,-0xd1)]=this['_map']['scene'],this['camera']=this['_map'][_0x550935(0x504,0x4e0)];function _0x550935(_0x1a36fb,_0x32af93){return _0x4b1d00(_0x1a36fb-0x113,_0x32af93);}function _0x261c98(_0x4fad72,_0x1e51af){return _0x7b6784(_0x4fad72- -0xe3,_0x1e51af);}this['primitives']=new Cesium$1['PrimitiveCollection'](),this['_map']['scene'][_0x261c98(-0x140,-0x1a1)]['add'](this['primitives']),this[_0x550935(0x5aa,0x63b)]={'lonRange':new Cesium$1['Cartesian2'](),'latRange':new Cesium$1['Cartesian2'](),'pixelSize':0x0,'lonDisplayRange':new Cesium$1[(_0x261c98(-0xce,-0x5c))](),'latDisplayRange':new Cesium$1['Cartesian2']()},this['globeBoundingSphere']=new Cesium$1[(_0x550935(0x58b,0x5b0))](Cesium$1['Cartesian3'][_0x261c98(-0x56,0x13)],Cesium$1[_0x261c98(-0x157,-0x173)]['WGS84']['minimumRadius']),this['updateViewerParameters'](),window['addEventListener'](_0x550935(0x4e1,0x4f9),this['resize']['bind'](this),![]),this['mouse_down']=![],this['mouse_move']=![],this['_map']['on'](mars3d__namespace[_0x550935(0x536,0x554)][_0x261c98(-0xa9,-0x31)],this['_onMapWhellEvent'],this),this[_0x261c98(-0x138,-0x15f)]['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x550935(0x592,0x5bd)],this),this[_0x550935(0x4df,0x4e9)]['on'](mars3d__namespace[_0x261c98(-0xe1,-0x50)]['mouseUp'],this[_0x261c98(-0x52,-0x57)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this['_data']&&this[_0x550935(0x526,0x4f8)](this['_data']);}[_0x4b1d00(0x454,0x485)](){window['removeEventListener']('resize',this['resize']);function _0x54b5f8(_0x175631,_0x4435ba){return _0x7b6784(_0x4435ba-0x1eb,_0x175631);}this['_map'][_0x54b5f8(0x1d6,0x17a)](mars3d__namespace[_0x25a8cc(0xb,0x30)][_0x54b5f8(0x1ae,0x16a)],this[_0x25a8cc(-0xca,-0x3b)],this);function _0x25a8cc(_0x3653ea,_0x69e6bb){return _0x7b6784(_0x69e6bb-0x2e,_0x3653ea);}this[_0x25a8cc(-0x34,-0x27)][_0x54b5f8(0x12a,0x17a)](mars3d__namespace['EventType']['wheel'],this[_0x25a8cc(0x63,0x5d)],this),this['_map']['off'](mars3d__namespace[_0x25a8cc(0x57,0x30)]['mouseDown'],this[_0x25a8cc(0x66,0x8c)],this),this['_map'][_0x25a8cc(-0x1a,-0x43)](mars3d__namespace[_0x25a8cc(-0x5a,0x30)]['mouseUp'],this[_0x54b5f8(0x21f,0x27c)],this),this[_0x25a8cc(0x56,-0x27)][_0x54b5f8(0x172,0x17a)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this[_0x54b5f8(0x120,0x18e)][_0x25a8cc(0xc5,0xc0)](),this['_map']['scene'][_0x54b5f8(0xfd,0x18e)]['remove'](this['primitives']);}[_0x7b6784(-0x53,-0xc8)](){function _0x470e8a(_0xb10f3e,_0x540304){return _0x7b6784(_0x540304-0x4ee,_0xb10f3e);}function _0x5da212(_0x2e400c,_0x1786b6){return _0x4b1d00(_0x2e400c-0x86,_0x1786b6);}if(!this[_0x470e8a(0x4ef,0x4e2)]||!this['particleSystem'])return;this['primitives'][_0x5da212(0x49b,0x4af)]=![],this['primitives']['removeAll'](),this[_0x5da212(0x452,0x3ea)][_0x5da212(0x4a0,0x42d)](mars3d__namespace['EventType']['preRender'],this['_onMap_preRenderEvent'],this);}['_onMap_preRenderEvent'](_0x291680){function _0xc5fd6(_0x4a7d44,_0x20ffea){return _0x4b1d00(_0x20ffea- -0x259,_0x4a7d44);}function _0x125cf7(_0x173104,_0x4b7f92){return _0x7b6784(_0x173104-0x3f3,_0x4b7f92);}this[_0x125cf7(0x45c,0x3dd)][_0xc5fd6(0x156,0x140)](this[_0xc5fd6(0x19e,0x229)][_0xc5fd6(0x181,0x1d4)]),this['addPrimitives'](),this[_0xc5fd6(0x110,0x16b)]['show']=!![];}['_onMapWhellEvent'](_0x248c98){clearTimeout(this['refreshTimer']);if(!this[_0x2119ff(0x35c,0x2dc)]||!this[_0xc71283(-0x1b1,-0x1e1)])return;this['primitives']['show']=![];function _0xc71283(_0x5a4470,_0x1ec359){return _0x7b6784(_0x5a4470- -0x21a,_0x1ec359);}function _0x2119ff(_0x5c198d,_0x3c848f){return _0x4b1d00(_0x3c848f- -0x139,_0x5c198d);}this[_0x2119ff(0x28c,0x2b4)]=setTimeout(()=>{function _0x4b7014(_0x3de45f,_0x29b331){return _0x2119ff(_0x29b331,_0x3de45f-0x186);}if(!this[_0x4b7014(0x462,0x41c)])return;this['redraw']();},0xc8);}[_0x4b1d00(0x47f,0x497)](_0x373fd5){function _0x440b85(_0x45d0f6,_0x1008fd){return _0x7b6784(_0x45d0f6-0xd5,_0x1008fd);}this[_0x440b85(0x11c,0x95)]=!![];}['_onMouseMoveEvent'](_0x22d457){function _0x483508(_0x17ebc1,_0x2bfa24){return _0x7b6784(_0x17ebc1-0xf0,_0x2bfa24);}if(!this[_0x483508(0xe4,0xd8)]||!this['particleSystem'])return;this['mouse_down']&&(this['primitives']['show']=![],this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x392c27){if(!this['show']||!this['particleSystem'])return;this[_0x3badb4(0x20c,0x261)]&&this['mouse_move']&&this['redraw']();function _0x37a6d1(_0x2ddb0b,_0x4f30b5){return _0x7b6784(_0x2ddb0b- -0x243,_0x4f30b5);}this['primitives'][_0x3badb4(0x26e,0x20e)]=!![];function _0x3badb4(_0x35f23f,_0x4b2b9e){return _0x4b1d00(_0x4b2b9e- -0x207,_0x35f23f);}this[_0x3badb4(0x2a0,0x261)]=![],this['mouse_move']=![];}['redraw'](){function _0x57c684(_0x3a0d4d,_0x32ae9c){return _0x4b1d00(_0x32ae9c- -0x182,_0x3a0d4d);}function _0x5a8907(_0x2a642e,_0x409cd8){return _0x7b6784(_0x2a642e- -0xca,_0x409cd8);}if(!this[_0x5a8907(-0x11f,-0x19e)]||!this['show'])return;this[_0x5a8907(-0x71,-0x5)](),this['particleSystem']['applyViewerParameters'](this[_0x57c684(0x2b7,0x315)]),this['primitives']['show']=!![];}['setData'](_0x43b6c0){function _0x4d24f7(_0x742ee7,_0x4182e7){return _0x4b1d00(_0x742ee7- -0x2fe,_0x4182e7);}this[_0x4d24f7(0xa9,0x129)]=_0x43b6c0;this['particleSystem']&&this['particleSystem']['destroy']();function _0x279c76(_0x846ee5,_0x345e30){return _0x4b1d00(_0x345e30-0xda,_0x846ee5);}this[_0x279c76(0x5e1,0x564)]=new ParticleSystem(this['scene']['context'],_0x43b6c0,this['getOptions'](),this['viewerParameters']),this['addPrimitives']();}[_0x7b6784(0x90,0x7d)](_0x41deca,_0x42d3a8){function _0x1d3d62(_0x165b61,_0x2a039d){return _0x4b1d00(_0x165b61- -0x3a4,_0x2a039d);}if(_0x41deca)for(const _0x5a0ba9 in _0x41deca){this[_0x5a0ba9]=_0x41deca[_0x5a0ba9];}function _0x14ebbd(_0x3041fa,_0x29afad){return _0x7b6784(_0x3041fa-0x5f,_0x29afad);}this[_0x14ebbd(0xc8,0xd3)]&&this[_0x1d3d62(0xe6,0xd3)]['setOptions'](this[_0x1d3d62(0x7a,0x104)]());}['getOptions'](){const _0x383580=Math['ceil'](Math[_0x306487(0x99,0xb6)](this[_0x306487(0x120,0x156)]));this[_0x2bf3f5(0x174,0x1c3)]=_0x383580*_0x383580;function _0x2bf3f5(_0x5d6b94,_0x36b401){return _0x4b1d00(_0x5d6b94- -0x2bb,_0x36b401);}const _0x13bf47={};function _0x306487(_0x11d924,_0x201235){return _0x7b6784(_0x11d924-0x112,_0x201235);}return _0x13bf47[_0x2bf3f5(0x1ce,0x1f4)]=_0x383580,_0x13bf47[_0x2bf3f5(0x140,0x1ac)]=this[_0x306487(0x120,0xf3)],_0x13bf47[_0x2bf3f5(0x11f,0x173)]=this['colors'],_0x13bf47['particleHeight']=this['fixedHeight'],_0x13bf47['fadeOpacity']=this['fadeOpacity'],_0x13bf47['dropRate']=this['dropRate'],_0x13bf47['dropRateBump']=this[_0x2bf3f5(0xdc,0x52)],_0x13bf47[_0x306487(0x9f,0xbe)]=this[_0x2bf3f5(0xf3,0xce)],_0x13bf47['lineWidth']=this['lineWidth'],_0x13bf47['dynamic']=this['dynamic'],_0x13bf47;}['addPrimitives'](){this[_0x3d0b86(-0x1b8,-0x146)]['add'](this['particleSystem']['particlesComputing']['primitives'][_0x3d0b86(-0x105,-0xf2)]);function _0x3d0b86(_0x572403,_0x23826){return _0x7b6784(_0x572403- -0x15b,_0x23826);}this['primitives'][_0x3d0b86(-0x1c5,-0x191)](this['particleSystem'][_0x3d0b86(-0x1ca,-0x156)]['primitives']['updatePosition']),this['primitives'][_0x3d0b86(-0x1c5,-0x222)](this[_0x3d0b86(-0xf2,-0xb0)]['particlesComputing'][_0x278295(-0x1a3,-0x169)]['postProcessingPosition']),this['primitives'][_0x3d0b86(-0x1c5,-0x14e)](this['particleSystem']['particlesRendering']['primitives']['segments']),this['primitives'][_0x3d0b86(-0x1c5,-0x159)](this[_0x278295(-0xdd,-0xa0)]['particlesRendering']['primitives']['trails']);function _0x278295(_0x1e2f5b,_0xe58399){return _0x4b1d00(_0x1e2f5b- -0x567,_0xe58399);}this[_0x278295(-0x1a3,-0x12c)]['add'](this[_0x278295(-0xdd,-0x172)]['particlesRendering']['primitives']['screen']);}['updateViewerParameters'](){let _0x5d8f7f=this['camera']['computeViewRectangle'](this[_0x2c3fb9(0x2c3,0x278)][_0x2c3fb9(0x20d,0x1b3)]['ellipsoid']);if(!_0x5d8f7f){const _0x14f4a0=this['_map']['getExtent']();_0x5d8f7f=Cesium$1[_0x52bd21(0x199,0x11f)]['fromDegrees'](_0x14f4a0['xmin'],_0x14f4a0['ymin'],_0x14f4a0['xmax'],_0x14f4a0['ymax']);}function _0x52bd21(_0x36d4a6,_0x114676){return _0x4b1d00(_0x36d4a6- -0x2c7,_0x114676);}const _0x5356fc=Util['viewRectangleToLonLatRange'](_0x5d8f7f);this['_data']?(this[_0x52bd21(0x1d0,0x212)][_0x52bd21(0x111,0xf7)]['x']=Math['max'](_0x5356fc[_0x52bd21(0x175,0x150)]['min'],this['_data'][_0x52bd21(0x119,0x96)]),this['viewerParameters']['lonRange']['y']=Math[_0x2c3fb9(0x2cd,0x262)](_0x5356fc['lon']['max'],this['_data'][_0x2c3fb9(0x197,0x22b)]),this['viewerParameters']['latRange']['x']=Math['max'](_0x5356fc[_0x52bd21(0x162,0x1ef)]['min'],this['_data'][_0x2c3fb9(0x219,0x1a0)]),this[_0x52bd21(0x1d0,0x16a)]['latRange']['y']=Math['min'](_0x5356fc[_0x2c3fb9(0x283,0x21f)]['max'],this[_0x2c3fb9(0x12b,0x19d)]['ymax'])):(this['viewerParameters']['lonRange']['x']=_0x5356fc[_0x2c3fb9(0x276,0x232)]['min'],this['viewerParameters'][_0x52bd21(0x111,0x89)]['y']=_0x5356fc[_0x2c3fb9(0x2a4,0x232)]['max'],this[_0x2c3fb9(0x295,0x28d)]['latRange']['x']=_0x5356fc['lat'][_0x2c3fb9(0x2ca,0x262)],this[_0x52bd21(0x1d0,0x217)][_0x52bd21(0x139,0x14c)]['y']=_0x5356fc['lat']['max']);let _0x42625d=this['camera']['getPixelSize'](this['globeBoundingSphere'],this['scene'][_0x52bd21(0x16d,0x1e3)],this['scene']['drawingBufferHeight']);function _0x2c3fb9(_0x3c4c1d,_0x1c295c){return _0x7b6784(_0x1c295c-0x217,_0x3c4c1d);}const _0xa7d813=this[_0x2c3fb9(0x215,0x278)]['drawingBufferHeight']*0.3;_0x42625d<_0xa7d813&&(_0x42625d=_0xa7d813),this['viewerParameters']['pixelSize']=_0x42625d;}}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace['layer'][_0x4b1d00(0x4ab,0x416)]=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this[_0x5943f4(-0x184,-0x209)]=null;function _0x5943f4(_0x2c6f8b,_0xed7e0f){return _0x4b1d00(_0xed7e0f- -0x632,_0x2c6f8b);}this['tlng']=null,this[_0x3ba978(0xe9,0xd0)]=null,this[_0x3ba978(0x25,0x29)]=null;function _0x3ba978(_0x599f7c,_0xf53a41){return _0x7b6784(_0xf53a41-0x97,_0x599f7c);}this[_0x5943f4(-0x2e1,-0x26a)]=null;}['destroy'](){for(const _0xcf8a46 in this){delete this[_0xcf8a46];}}}function _0x4b1d00(_0x4085c8,_0x3e68ec){return _0x486b(_0x4085c8-0x2bf,_0x3e68ec);}class CanvasWindField{constructor(_0xc7f665){function _0x5f1203(_0x118e59,_0x375175){return _0x7b6784(_0x375175- -0x1f9,_0x118e59);}this[_0x5f1203(-0x17e,-0x1d1)](_0xc7f665);}get[_0x4b1d00(0x464,0x429)](){function _0x1396f8(_0x1c3726,_0x56f55d){return _0x4b1d00(_0x1c3726- -0x5dd,_0x56f55d);}return this[_0x1396f8(-0x1de,-0x1e1)];}set['speedRate'](_0x49d972){function _0x416d37(_0x15827a,_0xba99f0){return _0x4b1d00(_0xba99f0- -0x512,_0x15827a);}function _0x5257f3(_0x69209d,_0x472455){return _0x4b1d00(_0x69209d- -0x28e,_0x472455);}this['_speedRate']=(0x64-(_0x49d972>0x63?0x63:_0x49d972))*0x64,this[_0x416d37(-0xb7,-0x9f)]=[(this['xmax']-this['xmin'])/this[_0x5257f3(0x171,0x111)],(this['ymax']-this[_0x416d37(-0x1d7,-0x168)])/this[_0x416d37(-0x194,-0x113)]];}get[_0x4b1d00(0x4ad,0x4d2)](){return this['_maxAge'];}set['maxAge'](_0x76fbaa){this['_maxAge']=_0x76fbaa;}['setOptions'](_0x31fa15){this['options']=_0x31fa15;function _0x110097(_0x35daf2,_0x592000){return _0x4b1d00(_0x35daf2- -0x2b6,_0x592000);}this['maxAge']=_0x31fa15[_0x89e2ae(0x431,0x495)]||0x78,this['speedRate']=_0x31fa15['speedRate']||0x32;function _0x89e2ae(_0x39b408,_0x732745){return _0x7b6784(_0x39b408-0x3a5,_0x732745);}this['particles']=[];const _0x4facb9=_0x31fa15[_0x110097(0x179,0x1b8)]||0x1000;for(let _0x5a39e6=0x0;_0x5a39e6<_0x4facb9;_0x5a39e6++){const _0x53e8df=this[_0x89e2ae(0x413,0x498)](new CanvasParticle());this['particles'][_0x89e2ae(0x3ca,0x3f6)](_0x53e8df);}}[_0x7b6784(-0x20,0x36)](_0x1a6aaf){this['rows']=_0x1a6aaf['rows'],this[_0x31dccb(0x319,0x334)]=_0x1a6aaf['cols'],this[_0x44f49c(0x4c9,0x538)]=_0x1a6aaf[_0x44f49c(0x4c9,0x47b)],this[_0x31dccb(0x304,0x385)]=_0x1a6aaf['xmax'];function _0x44f49c(_0x380792,_0x18d674){return _0x7b6784(_0x380792-0x50a,_0x18d674);}this[_0x31dccb(0x313,0x2fa)]=_0x1a6aaf[_0x31dccb(0x27a,0x2fa)],this[_0x44f49c(0x5a7,0x544)]=_0x1a6aaf['ymax'],this[_0x31dccb(0x3e5,0x362)]=[];const _0x411c84=_0x1a6aaf[_0x44f49c(0x4d1,0x4fa)],_0x43b73f=_0x1a6aaf['vdata'];let _0x347f0b=![];_0x411c84[_0x44f49c(0x48f,0x401)]===this[_0x31dccb(0x3f6,0x3d0)]&&_0x411c84[0x0][_0x44f49c(0x48f,0x505)]===this[_0x44f49c(0x4cd,0x4ef)]&&(_0x347f0b=!![]);let _0x3439b5=0x0,_0x24aa94=null,_0x55cdaf=null;for(let _0x1e464b=0x0;_0x1e464b<this['rows'];_0x1e464b++){_0x24aa94=[];for(let _0x422003=0x0;_0x422003<this['cols'];_0x422003++,_0x3439b5++){_0x347f0b?_0x55cdaf=this['_calcUV'](_0x411c84[_0x1e464b][_0x422003],_0x43b73f[_0x1e464b][_0x422003]):_0x55cdaf=this[_0x44f49c(0x566,0x5ef)](_0x411c84[_0x3439b5],_0x43b73f[_0x3439b5]),_0x24aa94[_0x44f49c(0x52f,0x574)](_0x55cdaf);}this[_0x44f49c(0x4fb,0x50b)][_0x44f49c(0x52f,0x51a)](_0x24aa94);}function _0x31dccb(_0x234bd8,_0x1612ca){return _0x4b1d00(_0x1612ca- -0xb0,_0x234bd8);}this[_0x31dccb(0x406,0x3f9)]['reverseY']&&this['grid'][_0x44f49c(0x4a2,0x478)]();}['clear'](){delete this['rows'];function _0x30da9d(_0x26f2b4,_0x1fc170){return _0x4b1d00(_0x26f2b4-0x97,_0x1fc170);}delete this['cols'],delete this['xmin'],delete this['xmax'],delete this[_0x30da9d(0x441,0x463)];function _0x35af1f(_0x4bf6cb,_0x521039){return _0x4b1d00(_0x521039- -0x590,_0x4bf6cb);}delete this['ymax'],delete this[_0x30da9d(0x4a9,0x421)],delete this['particles'];}['toGridXY'](_0x200ea1,_0x1be0dd){function _0x1b46c6(_0x59f624,_0x4706f4){return _0x7b6784(_0x4706f4-0x23b,_0x59f624);}function _0x1e16c8(_0x2ea504,_0x2d4be4){return _0x4b1d00(_0x2d4be4- -0x375,_0x2ea504);}const _0x46e3ba=(_0x200ea1-this[_0x1b46c6(0x233,0x1fa)])/(this['xmax']-this['xmin'])*(this['cols']-0x1),_0xface71=(this['ymax']-_0x1be0dd)/(this['ymax']-this[_0x1e16c8(0x2b,0x35)])*(this['rows']-0x1);return[_0x46e3ba,_0xface71];}['getUVByXY'](_0x1b1cf2,_0x680d1f){if(_0x1b1cf2<0x0||_0x1b1cf2>=this['cols']||_0x680d1f>=this['rows'])return[0x0,0x0,0x0];function _0x2fdff7(_0x4ec4a6,_0x2cdbe5){return _0x7b6784(_0x4ec4a6-0xf2,_0x2cdbe5);}const _0x506650=Math[_0x2fdff7(0x94,0xc0)](_0x1b1cf2),_0x5d1a5d=Math['floor'](_0x680d1f);if(_0x506650===_0x1b1cf2&&_0x5d1a5d===_0x680d1f)return this[_0x37dec3(0x1fe,0x221)][_0x680d1f][_0x1b1cf2];const _0x168130=_0x506650+0x1,_0x249aab=_0x5d1a5d+0x1,_0x37ecac=this[_0x37dec3(0x297,0x21e)](_0x506650,_0x5d1a5d),_0x3ff5a4=this[_0x37dec3(0x194,0x21e)](_0x168130,_0x5d1a5d),_0x41e328=this['getUVByXY'](_0x506650,_0x249aab);function _0x37dec3(_0x28ac74,_0x551b0f){return _0x7b6784(_0x551b0f-0x230,_0x28ac74);}const _0x49ea14=this['getUVByXY'](_0x168130,_0x249aab);let _0x557c2c=null;try{_0x557c2c=this['_bilinearInterpolation'](_0x1b1cf2-_0x506650,_0x680d1f-_0x5d1a5d,_0x37ecac,_0x3ff5a4,_0x41e328,_0x49ea14);}catch(_0x2f2209){console[_0x37dec3(0x260,0x275)](_0x1b1cf2,_0x680d1f);}return _0x557c2c;}['_bilinearInterpolation'](_0x111f8b,_0x451e47,_0x53fdb5,_0x2f9676,_0x11a502,_0x32e691){const _0x445325=0x1-_0x111f8b,_0x57380c=0x1-_0x451e47,_0x24c367=_0x445325*_0x57380c,_0x19d0ec=_0x111f8b*_0x57380c,_0x18c8f4=_0x445325*_0x451e47,_0x5c6837=_0x111f8b*_0x451e47,_0x4605bc=_0x53fdb5[0x0]*_0x24c367+_0x2f9676[0x0]*_0x19d0ec+_0x11a502[0x0]*_0x18c8f4+_0x32e691[0x0]*_0x5c6837,_0xda0ca3=_0x53fdb5[0x1]*_0x24c367+_0x2f9676[0x1]*_0x19d0ec+_0x11a502[0x1]*_0x18c8f4+_0x32e691[0x1]*_0x5c6837;return this['_calcUV'](_0x4605bc,_0xda0ca3);}['_calcUV'](_0x44f399,_0x20d10c){return[+_0x44f399,+_0x20d10c,Math['sqrt'](_0x44f399*_0x44f399+_0x20d10c*_0x20d10c)];}[_0x4b1d00(0x39a,0x425)](_0x31fe67,_0x41241f){function _0x17d6d0(_0x1d8afd,_0x3ff94a){return _0x7b6784(_0x3ff94a-0x184,_0x1d8afd);}if(!this['isInExtent'](_0x31fe67,_0x41241f))return null;const _0x4541ca=this[_0x17d6d0(0x1d1,0x1f9)](_0x31fe67,_0x41241f),_0x3d91aa=this['getUVByXY'](_0x4541ca[0x0],_0x4541ca[0x1]);return _0x3d91aa;}[_0x7b6784(-0x4,0x57)](_0x3abbce,_0x223bb0){function _0x5e46c9(_0x3963bc,_0x3f4c79){return _0x4b1d00(_0x3963bc- -0x275,_0x3f4c79);}function _0x49b5d4(_0x167824,_0x17aa5b){return _0x7b6784(_0x17aa5b- -0x20d,_0x167824);}return _0x3abbce>=this['xmin']&&_0x3abbce<=this['xmax']&&_0x223bb0>=this[_0x5e46c9(0x135,0x14f)]&&_0x223bb0<=this[_0x49b5d4(-0xde,-0x170)]?!![]:![];}[_0x7b6784(-0x75,0x4)](){const _0x4beca8=fRandomByfloat(this[_0x1331c8(-0xd,0x22)],this['xmax']),_0x39966b=fRandomByfloat(this['ymin'],this['ymax']);function _0x1331c8(_0x42cd67,_0x54dd1b){return _0x4b1d00(_0x54dd1b- -0x3be,_0x42cd67);}const _0x4fa497={};return _0x4fa497['lat']=_0x39966b,_0x4fa497['lng']=_0x4beca8,_0x4fa497;}[_0x4b1d00(0x43e,0x495)](){function _0x4b46be(_0x386fdf,_0x11fc34){return _0x7b6784(_0x386fdf-0x31b,_0x11fc34);}let _0xc5f9ad,_0x236af0,_0x205f5f;function _0x9d3825(_0x1b0f1e,_0xf52701){return _0x4b1d00(_0xf52701- -0x475,_0x1b0f1e);}for(let _0x1f6383=0x0,_0x507527=this['particles']['length'];_0x1f6383<_0x507527;_0x1f6383++){let _0x446a38=this['particles'][_0x1f6383];_0x446a38['age']<=0x0&&(_0x446a38=this[_0x9d3825(0x65,0x1a)](_0x446a38));if(_0x446a38['age']>0x0){const _0x1ca374=_0x446a38[_0x4b46be(0x290,0x257)],_0x3dab25=_0x446a38['tlat'];_0x205f5f=this[_0x9d3825(-0x82,-0xdb)](_0x1ca374,_0x3dab25),_0x205f5f?(_0xc5f9ad=_0x1ca374+this['_calc_speedRate'][0x0]*_0x205f5f[0x0],_0x236af0=_0x3dab25+this[_0x9d3825(-0x16,-0x2)][0x1]*_0x205f5f[0x1],_0x446a38['lng']=_0x1ca374,_0x446a38[_0x9d3825(0x41,-0x4c)]=_0x3dab25,_0x446a38[_0x9d3825(-0x63,-0xdf)]=_0xc5f9ad,_0x446a38['tlat']=_0x236af0,_0x446a38['speed']=_0x205f5f[0x2],_0x446a38[_0x4b46be(0x2ad,0x33d)]--):_0x446a38['age']=0x0;}}return this[_0x9d3825(0xad,0x29)];}['_randomParticle'](_0x2258ff){function _0x47f9f3(_0x20b4d5,_0x18628e){return _0x4b1d00(_0x20b4d5- -0x16d,_0x18628e);}let _0x3d7450,_0x322e8c;function _0x2057b8(_0x59b45b,_0x4da046){return _0x7b6784(_0x4da046-0x6f,_0x59b45b);}for(let _0x1056f7=0x0;_0x1056f7<0x1e;_0x1056f7++){_0x3d7450=this['getRandomLatLng'](),_0x322e8c=this['getUVByPoint'](_0x3d7450[_0x2057b8(0x13c,0xe2)],_0x3d7450[_0x47f9f3(0x2bc,0x351)]);if(_0x322e8c&&_0x322e8c[0x2]>0x0)break;}if(!_0x322e8c)return _0x2258ff;const _0x460d0c=_0x3d7450['lng']+this[_0x2057b8(0xf0,0xc1)][0x0]*_0x322e8c[0x0],_0x16b2d8=_0x3d7450[_0x2057b8(-0x15,0x77)]+this[_0x2057b8(0x9c,0xc1)][0x1]*_0x322e8c[0x1];return _0x2258ff[_0x47f9f3(0x327,0x366)]=_0x3d7450['lng'],_0x2258ff[_0x47f9f3(0x2bc,0x25c)]=_0x3d7450['lat'],_0x2258ff['tlng']=_0x460d0c,_0x2258ff['tlat']=_0x16b2d8,_0x2258ff['age']=Math['round'](Math['random']()*this['maxAge']),_0x2258ff[_0x2057b8(0x53,0x16)]=_0x322e8c[0x2],_0x2258ff;}[_0x7b6784(-0x45,-0x76)](){for(const _0x2592fe in this){delete this[_0x2592fe];}}}function fRandomByfloat(_0x9425f2,_0x21e983){function _0x68c67c(_0x5471ca,_0x3b663a){return _0x7b6784(_0x5471ca-0x249,_0x3b663a);}return _0x9425f2+Math[_0x68c67c(0x24f,0x272)]()*(_0x21e983-_0x9425f2);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x7b6784(-0x31,0x25)];class CanvasWindLayer extends BaseLayer{constructor(_0xfee4c0={}){function _0x2934f9(_0x324ffa,_0x17580a){return _0x7b6784(_0x17580a-0x283,_0x324ffa);}super(_0xfee4c0),this['_setOptionsHook'](_0xfee4c0),this['canvas']=null,_0xfee4c0['colors']&&_0xfee4c0['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x2934f9(0x2e6,0x26a))](_0xfee4c0));}['_setOptionsHook'](_0x4fbf10,_0xf14b61){this['frameTime']=0x3e8/(_0x4fbf10['frameRate']||0xa),this['_pointerEvents']=this['options']['pointerEvents']??![];function _0x268884(_0x3c7bbb,_0x457a03){return _0x4b1d00(_0x3c7bbb- -0x304,_0x457a03);}this['color']=_0x4fbf10[_0x499a3b(0x3b4,0x376)]||'#ffffff',this[_0x499a3b(0x356,0x322)]=_0x4fbf10['lineWidth']||0x1,this['fixedHeight']=_0x4fbf10[_0x499a3b(0x3bd,0x437)]??0x0;function _0x499a3b(_0x571f79,_0x12210a){return _0x4b1d00(_0x571f79- -0xc1,_0x12210a);}this['reverseY']=_0x4fbf10['reverseY']??![],this[_0x268884(0xcc,0x9a)]&&this['windField'][_0x268884(0x145,0x182)](_0x4fbf10);}get['layer'](){return this['canvas'];}get[_0x7b6784(-0x42,-0xaa)](){function _0x1a285f(_0x33bcc4,_0x4a13c8){return _0x4b1d00(_0x4a13c8- -0x1a7,_0x33bcc4);}function _0x293f43(_0x4cd6b2,_0x4f6e6d){return _0x4b1d00(_0x4cd6b2-0x10e,_0x4f6e6d);}return this['_map']['scene'][_0x293f43(0x51c,0x501)][_0x1a285f(0x2cd,0x298)];}get['canvasHeight'](){function _0x42ad9e(_0x22b6fb,_0x4c11eb){return _0x7b6784(_0x22b6fb-0x462,_0x4c11eb);}function _0x90006f(_0x5621cf,_0x52fbd7){return _0x7b6784(_0x52fbd7-0xa3,_0x5621cf);}return this['_map'][_0x90006f(0x134,0x104)]['canvas'][_0x42ad9e(0x423,0x3d9)];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x262fe7){function _0x298ab1(_0x25e1a8,_0x559d01){return _0x4b1d00(_0x559d01- -0x422,_0x25e1a8);}function _0x3128fe(_0x27dec3,_0x58e819){return _0x7b6784(_0x58e819- -0x15e,_0x27dec3);}this[_0x298ab1(0x21,0x7a)]=_0x262fe7;if(!this[_0x298ab1(0x2d,-0x14)])return;_0x262fe7?this['canvas'][_0x3128fe(-0x117,-0xd0)][_0x298ab1(0x0,0x77)]=_0x3128fe(-0x1ce,-0x159):this['canvas'][_0x3128fe(-0x102,-0xd0)][_0x3128fe(-0x134,-0xe6)]='none';}get['particlesNumber'](){function _0x51a023(_0x44ba57,_0x54bf4e){return _0x4b1d00(_0x44ba57- -0x5d4,_0x54bf4e);}function _0x426ad1(_0x246147,_0x3addf3){return _0x4b1d00(_0x3addf3- -0x2d5,_0x246147);}return this[_0x51a023(-0x12b,-0x157)][_0x51a023(-0x1a5,-0x134)];}set['particlesNumber'](_0xbc30c7){this['options']['particlesNumber']=_0xbc30c7,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x1c84c2(_0x2f2237,_0x27767b){return _0x4b1d00(_0x27767b- -0x600,_0x2f2237);}function _0x29bfac(_0x296807,_0x337a9a){return _0x4b1d00(_0x337a9a- -0x62f,_0x296807);}return this[_0x1c84c2(-0xf3,-0x157)][_0x1c84c2(-0x220,-0x19c)];}set['speedRate'](_0x1eafe1){this[_0x5473c0(0x13b,0xb5)]['speedRate']=_0x1eafe1;function _0x3ca5a0(_0x4016fc,_0x16da02){return _0x4b1d00(_0x16da02- -0x592,_0x4016fc);}function _0x5473c0(_0xa26962,_0x5ed2a6){return _0x4b1d00(_0xa26962- -0x36e,_0x5ed2a6);}this['windField']&&(this['windField'][_0x5473c0(0xf6,0x148)]=_0x1eafe1);}get[_0x4b1d00(0x4ad,0x431)](){return this['options']['maxAge'];}set['maxAge'](_0x2bfcef){this['options'][_0x52160d(-0x1cf,-0x1f0)]=_0x2bfcef;function _0x52160d(_0x2bb533,_0x3a2030){return _0x7b6784(_0x2bb533- -0x25b,_0x3a2030);}function _0x3bdb76(_0x42d16c,_0x55e3bf){return _0x4b1d00(_0x42d16c- -0x3b9,_0x55e3bf);}this['windField']&&(this['windField'][_0x3bdb76(0xf4,0xf8)]=_0x2bfcef);}get['data'](){function _0x310ded(_0x435966,_0x134a9e){return _0x7b6784(_0x134a9e-0x3a7,_0x435966);}return this[_0x310ded(0x303,0x327)];}set[_0x4b1d00(0x3b5,0x3e8)](_0x300292){function _0x1fc3c9(_0x567820,_0x48e14a){return _0x7b6784(_0x567820-0x418,_0x48e14a);}this[_0x1fc3c9(0x40a,0x424)](_0x300292);}get['rectangle'](){let _0x1c540b=this['windData'][_0x4864f2(0xcc,0x48)],_0x2822e7=this['windData']['xmax'],_0x1d9977=this['windData']['ymin'],_0x1b7f5e=this['windData'][_0x4864f2(0x103,0x126)];_0x2822e7>=0x167&&_0x1c540b===0x0&&(_0x1c540b=-0xb4,_0x2822e7=0xb4);function _0x58a53e(_0x4edabd,_0x454474){return _0x7b6784(_0x454474- -0x20e,_0x4edabd);}_0x1c540b=Math['max'](_0x1c540b,-0xb4),_0x2822e7=Math['min'](_0x2822e7,0xb4),_0x1d9977=Math[_0x58a53e(-0x157,-0x1ca)](_0x1d9977,-0x5a);function _0x4864f2(_0x822066,_0x55de2e){return _0x7b6784(_0x55de2e-0x89,_0x822066);}return _0x1b7f5e=Math[_0x58a53e(-0x12f,-0x1c3)](_0x1b7f5e,0x5a),Cesium['Rectangle'][_0x4864f2(0x3d,0x74)](_0x1c540b,_0x1d9977,_0x2822e7,_0x1b7f5e);}['_showHook'](_0x462e52){function _0x50421c(_0x4d142e,_0x5c72f2){return _0x7b6784(_0x5c72f2- -0xc9,_0x4d142e);}function _0x49918f(_0x50151d,_0x4f78eb){return _0x4b1d00(_0x4f78eb- -0x4a6,_0x50151d);}_0x462e52?this[_0x50421c(0xc,-0x45)]():(this['windData']&&(this['options'][_0x50421c(-0x16a,-0x135)]=this['windData']),this['_removedHook']());}[_0x7b6784(-0x62,-0xe6)](){function _0x13067b(_0x424dda,_0x38f434){return _0x7b6784(_0x38f434-0x439,_0x424dda);}function _0x21aec2(_0x2981cc,_0x4fbde6){return _0x4b1d00(_0x2981cc- -0xcf,_0x4fbde6);}this['options'][_0x13067b(0x37c,0x3c9)]?this['initWorker']():this[_0x13067b(0x47d,0x3e8)]=new CanvasWindField(this['options']);}['_addedHook'](){this['canvas']=this['_createCanvas']();const _0x5deda7={};_0x5deda7['willReadFrequently']=!![];function _0x58bb07(_0xd50415,_0x18a29e){return _0x7b6784(_0x18a29e-0x13a,_0xd50415);}this['canvasContext']=this[_0xf5e6f(0x201,0x194)][_0xf5e6f(0x21b,0x29b)]('2d',_0x5deda7),this['bindEvent']();function _0xf5e6f(_0x786343,_0x5067ed){return _0x7b6784(_0x786343-0x214,_0x5067ed);}this[_0xf5e6f(0x29c,0x330)]['data']&&this['setData'](this[_0xf5e6f(0x29c,0x264)]['data']);}['_removedHook'](){this['clear']();function _0x457ce8(_0x1e0b6f,_0x451e6e){return _0x7b6784(_0x451e6e-0x2d6,_0x1e0b6f);}this['unbindEvent']();function _0x3995b2(_0x243c3c,_0x1b7668){return _0x4b1d00(_0x243c3c- -0x125,_0x1b7668);}this['canvas']&&(this['_map'][_0x457ce8(0x339,0x372)][_0x457ce8(0x35b,0x371)](this['canvas']),delete this[_0x3995b2(0x2e9,0x269)]);}['_createCanvas'](){const _0x152b67=mars3d__namespace['DomUtil'][_0x51077b(-0xce,-0xbc)](_0x51077b(-0xb4,-0x11d),'mars3d-canvasWind',this[_0x51077b(-0x10e,-0x15f)][_0x51077b(-0x74,-0x6e)]);_0x152b67['style']['position']=_0x132305(0x276,0x1ed),_0x152b67[_0x132305(0x27b,0x295)]['top']=_0x132305(0x26f,0x25c),_0x152b67['style'][_0x132305(0x177,0xf0)]=_0x132305(0x26f,0x28e),_0x152b67['style']['width']=this[_0x51077b(-0x166,-0x15f)][_0x51077b(-0x13c,-0xa9)]['canvas'][_0x51077b(-0xa0,-0xec)]+'px',_0x152b67['style'][_0x51077b(-0x83,-0xde)]=this[_0x132305(0x198,0x1e6)][_0x51077b(-0xde,-0xa9)]['canvas'][_0x51077b(-0x1be,-0x149)]+'px';function _0x51077b(_0x58bf0a,_0x1ba428){return _0x4b1d00(_0x1ba428- -0x52b,_0x58bf0a);}_0x152b67['style'][_0x132305(0x235,0x215)]=this['_pointerEvents']?_0x51077b(-0x4b,-0xaa):'none',_0x152b67['style']['zIndex']=this[_0x51077b(-0xbd,-0x82)][_0x132305(0x1e8,0x1dc)]??0x9;function _0x132305(_0x32516f,_0x396760){return _0x7b6784(_0x32516f-0x1ed,_0x396760);}return _0x152b67['width']=this['_map']['scene']['canvas']['clientWidth'],_0x152b67['height']=this[_0x51077b(-0x197,-0x15f)][_0x132305(0x24e,0x29c)]['canvas']['clientHeight'],_0x152b67;}[_0x7b6784(-0x53,0x8)](){function _0x5aeef8(_0x1db528,_0x41fee5){return _0x4b1d00(_0x41fee5- -0x567,_0x1db528);}function _0x375c63(_0x6d5d5d,_0x4a9119){return _0x4b1d00(_0x4a9119- -0x4ba,_0x6d5d5d);}this['canvas']&&(this[_0x5aeef8(-0x172,-0x159)][_0x5aeef8(-0x6f,-0xb8)]['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this['canvas']['style']['height']=this['_map'][_0x5aeef8(-0x13c,-0xe5)]['canvas']['clientHeight']+'px',this[_0x5aeef8(-0x18e,-0x159)][_0x375c63(-0xf5,-0xb5)]=this[_0x5aeef8(-0x1fb,-0x19b)][_0x375c63(-0x32,-0x38)]['canvas'][_0x5aeef8(-0xd5,-0x128)],this['canvas']['height']=this['_map']['scene']['canvas']['clientHeight']);}['bindEvent'](){const _0x27f40c=this;let _0x7ce3b1=Date['now']();(function _0x252923(){function _0x3a18b7(_0x2f137a,_0x41a171){return _0x486b(_0x2f137a-0x2c2,_0x41a171);}if(_0x27f40c[_0x7971b3(0x1e6,0x158)])return;function _0x7971b3(_0x31e54e,_0x262054){return _0x486b(_0x31e54e-0x48,_0x262054);}_0x27f40c['_animateFrame']=window['requestAnimationFrame'](_0x252923);if(_0x27f40c['show']&&_0x27f40c['windField']){const _0x16dec9=Date[_0x7971b3(0x17f,0xf8)](),_0x451f9e=_0x16dec9-_0x7ce3b1;_0x451f9e>_0x27f40c['frameTime']&&(_0x7ce3b1=_0x16dec9-_0x451f9e%_0x27f40c['frameTime'],_0x27f40c[_0x3a18b7(0x3d9,0x382)]());}}(),window['addEventListener']('resize',this[_0x111bd8(-0x1ab,-0x144)]['bind'](this),![]),this['mouse_down']=![],this['mouse_move']=![]);function _0xa998d3(_0x328a97,_0x5595f3){return _0x7b6784(_0x5595f3-0xdc,_0x328a97);}function _0x111bd8(_0x179ccc,_0xd37509){return _0x7b6784(_0x179ccc- -0x158,_0xd37509);}this['options'][_0xa998d3(0xef,0x15f)]&&(this['_map']['on'](mars3d__namespace['EventType'][_0xa998d3(0x95,0x116)],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace[_0x111bd8(-0x156,-0xf1)][_0x111bd8(-0xfd,-0x70)],this[_0xa998d3(0x161,0x13a)],this),this['_map']['on'](mars3d__namespace[_0xa998d3(0xe1,0xde)]['mouseUp'],this['_onMouseUpEvent'],this));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']),delete this['_animateFrame'];function _0x3cc473(_0x2f6e4c,_0x522809){return _0x7b6784(_0x522809- -0x6b,_0x2f6e4c);}function _0x5d3e5f(_0x2ccaba,_0x2d6fe0){return _0x4b1d00(_0x2ccaba- -0x3eb,_0x2d6fe0);}window['removeEventListener'](_0x5d3e5f(-0x1d,0x70),this['resize']),this['options']['mouseHidden']&&(this['_map'][_0x5d3e5f(-0x3b,-0xa4)](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map'][_0x5d3e5f(-0x3b,-0xc1)](mars3d__namespace['EventType'][_0x3cc473(0x6a,-0x10)],this['_onMouseDownEvent'],this),this[_0x5d3e5f(-0x1f,0x43)][_0x3cc473(-0x165,-0xdc)](mars3d__namespace[_0x5d3e5f(0x38,0x7)]['mouseUp'],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x175f8c){clearTimeout(this[_0x16562e(0x190,0x153)]);if(!this['show']||!this['canvas'])return;function _0x38f0ec(_0x3f2f4d,_0x515398){return _0x4b1d00(_0x3f2f4d- -0x3e3,_0x515398);}this['canvas'][_0x16562e(0x252,0x2c0)][_0x38f0ec(0x23,0x9b)]=_0x38f0ec(0x8e,0x110);function _0x16562e(_0x22adb2,_0x4da566){return _0x4b1d00(_0x22adb2- -0x25d,_0x4da566);}this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;function _0x5d81d4(_0x4b7b0d,_0x49c8eb){return _0x16562e(_0x4b7b0d-0x1f1,_0x49c8eb);}function _0x588c87(_0x23ac2d,_0x308fa3){return _0x38f0ec(_0x23ac2d- -0x222,_0x308fa3);}this[_0x5d81d4(0x389,0x3a3)](),this['canvas']['style'][_0x588c87(-0x1ff,-0x267)]=_0x5d81d4(0x422,0x3e1);},0xc8);}[_0x7b6784(0x5e,0x75)](_0x34ae10){this['mouse_down']=!![],this['_map'][_0x44a3ee(0x3a9,0x426)](mars3d__namespace[_0x44a3ee(0x41c,0x46e)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0x491910(_0x5dc59c,_0x2273d2){return _0x4b1d00(_0x2273d2- -0x445,_0x5dc59c);}function _0x44a3ee(_0x47ae24,_0x222d5e){return _0x4b1d00(_0x47ae24- -0x7,_0x222d5e);}this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x491910(0x82,0x36)],this);}[_0x7b6784(0x5a,0x4)](_0xad9c){function _0x4895d8(_0x2ecf60,_0x1a8228){return _0x7b6784(_0x2ecf60- -0xbc,_0x1a8228);}function _0x228b9e(_0xd9633d,_0x3b0fa0){return _0x7b6784(_0x3b0fa0-0x203,_0xd9633d);}if(!this['show']||!this['canvas'])return;this['mouse_down']&&(this[_0x4895d8(-0xcf,-0x133)]['style']['visibility']=_0x228b9e(0x27e,0x253),this[_0x4895d8(-0xa0,-0xfb)]=!![]);}['_onMouseUpEvent'](_0x5444ce){if(!this['show']||!this[_0xd445be(0x166,0x11b)])return;function _0x15fdb1(_0x2455f7,_0x604cbb){return _0x7b6784(_0x2455f7-0x390,_0x604cbb);}this[_0xd445be(0x45,0xd9)]['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0xd445be(_0x45a574,_0x5a30a1){return _0x7b6784(_0x5a30a1-0x12e,_0x45a574);}this[_0x15fdb1(0x3d7,0x3c1)]&&this['mouse_move']&&this['redraw'](),this['canvas']['style']['visibility']='visible',this['mouse_down']=![],this[_0x15fdb1(0x3ac,0x429)]=![];}['setData'](_0x51be34){function _0x597804(_0x597cc1,_0x364a9c){return _0x4b1d00(_0x597cc1- -0x369,_0x364a9c);}this['clear'](),this['windData']=_0x51be34,this['windField'][_0x597804(0x98,0xa5)](_0x51be34),this['redraw']();}['redraw'](){if(!this[_0x4793cc(0x39f,0x320)])return;function _0x4793cc(_0x1178b,_0x53f942){return _0x7b6784(_0x1178b-0x3ab,_0x53f942);}this[_0x392652(-0x21d,-0x1dd)][_0x4793cc(0x3d3,0x3ea)](this[_0x4793cc(0x433,0x3a0)]);function _0x392652(_0x3e22cf,_0x37c5b7){return _0x4b1d00(_0x37c5b7- -0x5ad,_0x3e22cf);}this['update']();}['update'](){if(this['_updateIng'])return;this['_updateIng']=!![];if(this['worker'])this[_0x53ac84(-0x134,-0x194)][_0x53ac84(-0x12e,-0x167)]();else{const _0x21be8b=this['windField'][_0x4dbc0b(0x3c1,0x33d)]();this['_drawLines'](_0x21be8b);}function _0x4dbc0b(_0x558e68,_0x18cdc5){return _0x7b6784(_0x558e68-0x3a4,_0x18cdc5);}function _0x53ac84(_0x1bb900,_0x234fb1){return _0x7b6784(_0x1bb900- -0xe3,_0x234fb1);}this[_0x4dbc0b(0x438,0x48c)]=![];}[_0x4b1d00(0x3e1,0x3c9)](_0x3f7e9b){this[_0x4a13f7(0x2f5,0x2c8)]=_0x3f7e9b,this['canvasContext'][_0xdffb0c(-0x2ad,-0x26b)]=_0x4a13f7(0x2ad,0x31c),this[_0xdffb0c(-0x2e4,-0x27d)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext']['globalCompositeOperation']=_0x4a13f7(0x360,0x305),this[_0x4a13f7(0x313,0x299)]['globalAlpha']=0.9;function _0x4a13f7(_0x4295a9,_0x25fe38){return _0x7b6784(_0x25fe38-0x2ef,_0x4295a9);}const _0x460773=this['_map'][_0x4a13f7(0x320,0x350)][_0x4a13f7(0x365,0x33e)]!==Cesium['SceneMode']['SCENE3D'];function _0xdffb0c(_0x292b9c,_0x4207f3){return _0x4b1d00(_0x4207f3- -0x648,_0x292b9c);}const _0x2577e1=this[_0xdffb0c(-0x2a3,-0x269)]*0.25;if(this['_colorRamp'])for(let _0x490cec=0x0,_0x3f5eb0=_0x3f7e9b['length'];_0x490cec<_0x3f5eb0;_0x490cec++){const _0x4a033c=_0x3f7e9b[_0x490cec],_0x2fdf99=this[_0x4a13f7(0x3ce,0x37a)](_0x4a033c,_0x4a033c['lng'],_0x4a033c[_0xdffb0c(-0x29a,-0x21f)],_0x4a033c['alt']),_0x27d8f7=this['_tomap'](_0x4a033c,_0x4a033c[_0xdffb0c(-0x2bd,-0x2b2)],_0x4a033c[_0xdffb0c(-0x262,-0x1ee)],_0x4a033c['talt']);if(!_0x2fdf99||!_0x27d8f7)continue;if(_0x460773&&Math['abs'](_0x2fdf99[0x0]-_0x27d8f7[0x0])>=_0x2577e1)continue;this[_0xdffb0c(-0x219,-0x27d)]['beginPath'](),this['canvasContext'][_0x4a13f7(0x283,0x2e5)]=this[_0x4a13f7(0x366,0x2e5)],this['canvasContext']['strokeStyle']=this['_colorRamp']['getColor'](_0x4a033c[_0xdffb0c(-0x290,-0x280)]),this['canvasContext']['moveTo'](_0x2fdf99[0x0],_0x2fdf99[0x1]),this['canvasContext']['lineTo'](_0x27d8f7[0x0],_0x27d8f7[0x1]),this[_0x4a13f7(0x284,0x299)]['stroke']();}else{this['canvasContext']['beginPath'](),this[_0xdffb0c(-0x26c,-0x27d)]['lineWidth']=this['lineWidth'],this[_0x4a13f7(0x274,0x299)][_0x4a13f7(0x2eb,0x2a1)]=this['color'];for(let _0x262b62=0x0,_0x4ca03f=_0x3f7e9b['length'];_0x262b62<_0x4ca03f;_0x262b62++){const _0x511ea0=_0x3f7e9b[_0x262b62],_0x1bc965=this['_tomap'](_0x511ea0,_0x511ea0['lng'],_0x511ea0['lat'],_0x511ea0[_0x4a13f7(0x298,0x28a)]),_0x9f2532=this[_0xdffb0c(-0x123,-0x19c)](_0x511ea0,_0x511ea0['tlng'],_0x511ea0['tlat'],_0x511ea0['talt']);if(!_0x1bc965||!_0x9f2532)continue;if(_0x460773&&Math['abs'](_0x1bc965[0x0]-_0x9f2532[0x0])>=_0x2577e1)continue;this[_0x4a13f7(0x2a0,0x299)][_0x4a13f7(0x298,0x2e2)](_0x1bc965[0x0],_0x1bc965[0x1]),this['canvasContext'][_0xdffb0c(-0x241,-0x21a)](_0x9f2532[0x0],_0x9f2532[0x1]);}this['canvasContext'][_0x4a13f7(0x2d6,0x32d)]();}}['_tomap'](_0x1ad260,_0x59a630,_0x4fb08c,_0x20d777){const _0x41502c=Cesium[_0x4f28c3(0x12c,0x17a)]['fromDegrees'](_0x59a630,_0x4fb08c,_0x20d777??this['fixedHeight']);function _0x4f28c3(_0x24c3c8,_0x24393e){return _0x7b6784(_0x24393e-0x12d,_0x24c3c8);}const _0x2ec8bf=this[_0x4f28c3(0x120,0xd8)]['scene'];function _0x594e91(_0x43cf60,_0x594e73){return _0x7b6784(_0x594e73-0x315,_0x43cf60);}if(_0x2ec8bf['mode']===Cesium[_0x4f28c3(0x15b,0x12b)]['SCENE3D']){const _0x23a8e5=new Cesium[(_0x4f28c3(0x1f7,0x1c5))](_0x2ec8bf['globe'][_0x4f28c3(0xf1,0x10e)],_0x2ec8bf['camera']['positionWC']),_0x293861=_0x23a8e5['isPointVisible'](_0x41502c);if(!_0x293861)return _0x1ad260['age']=0x0,null;}const _0xafbf8=mars3d__namespace['PointTrans']['toWindowCoordinates'](this[_0x594e91(0x277,0x2c0)]['scene'],_0x41502c);return _0xafbf8?[_0xafbf8['x'],_0xafbf8['y']]:null;}['clear'](){this['windField']['clear'](),delete this['windData'];}['initWorker'](){this['worker']=new Worker(this['options'][_0xacd8ba(-0x25d,-0x2e4)]);function _0xacd8ba(_0x2f5fe6,_0x2865a8){return _0x7b6784(_0x2865a8- -0x274,_0x2f5fe6);}this['worker'][_0xacd8ba(-0x1ef,-0x209)]=_0x252586=>{this['_drawLines'](_0x252586['data']['particles']);function _0x4f8afb(_0x5dae51,_0x3c78fd){return _0xacd8ba(_0x5dae51,_0x3c78fd-0x6bf);}this[_0x4f8afb(0x4c9,0x454)]=![];},this[_0x156ae0(-0x1c8,-0x1c9)]={'init':_0x4b02ca=>{function _0x4fadc1(_0x478e8f,_0xd69daf){return _0xacd8ba(_0xd69daf,_0x478e8f-0x2d5);}const _0x245443={};_0x245443['type']='init';function _0x2ff824(_0x416d1f,_0x316b0f){return _0xacd8ba(_0x416d1f,_0x316b0f-0x714);}_0x245443[_0x2ff824(0x5b2,0x528)]=_0x4b02ca,this[_0x2ff824(0x400,0x430)]['postMessage'](_0x245443);},'setOptions':_0x54647e=>{const _0x311b84={};_0x311b84['type']='setOptions';function _0x5ed7f2(_0x31bab9,_0x45a89d){return _0xacd8ba(_0x31bab9,_0x45a89d-0x4dd);}_0x311b84['options']=_0x54647e,this[_0x5ed7f2(0x1c6,0x1f9)]['postMessage'](_0x311b84);},'setDate':_0x70beb=>{const _0x5214c2={};function _0x244363(_0x252776,_0x34ae8b){return _0x156ae0(_0x34ae8b,_0x252776-0x2df);}_0x5214c2['type']=_0x244363(0x147,0x14b),_0x5214c2['data']=_0x70beb,this['worker']['postMessage'](_0x5214c2);},'update':()=>{function _0x2230f8(_0x36e318,_0x21c7ca){return _0x156ae0(_0x36e318,_0x21c7ca-0x622);}if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0x4827c6={};_0x4827c6['type']='update';function _0x4ec1ba(_0x3e1553,_0x58c4cf){return _0x156ae0(_0x3e1553,_0x58c4cf-0x52b);}this[_0x2230f8(0x3df,0x43a)][_0x2230f8(0x48d,0x438)](_0x4827c6);},'clear':()=>{const _0x1db632={};function _0x44de34(_0x176492,_0x31d095){return _0xacd8ba(_0x31d095,_0x176492-0x539);}function _0x5dd6e4(_0xc10723,_0x28abee){return _0xacd8ba(_0xc10723,_0x28abee-0xd9);}_0x1db632[_0x5dd6e4(-0x1e7,-0x1f5)]='clear',this[_0x44de34(0x255,0x1e0)]['postMessage'](_0x1db632);}};function _0x156ae0(_0x5d4865,_0x2a8ade){return _0x7b6784(_0x2a8ade- -0x178,_0x5d4865);}this['windField'][_0xacd8ba(-0x283,-0x208)](this['options']);}}mars3d__namespace[_0x4b1d00(0x476,0x4a2)]['register'](_0x7b6784(-0x52,-0x5e),CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x37c97e={};_0x37c97e['value']=!![],Object[_0x4b1d00(0x407,0x375)](exports,'__esModule',_0x37c97e);
}));
