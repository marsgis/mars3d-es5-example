/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.7.15
 * 编译日期：2024-05-20 10:35:34
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x4354f9,_0xc01fa5){function _0x5db2f3(_0xd76bf,_0x49e9cc){return _0x2479(_0x49e9cc- -0x16b,_0xd76bf);}const _0x10fa69=_0x4354f9();function _0x3573b8(_0x22bf46,_0x93ec48){return _0x2479(_0x93ec48-0xd1,_0x22bf46);}while(!![]){try{const _0x2c9bdc=parseInt(_0x3573b8(0x2ed,0x273))/0x1*(parseInt(_0x3573b8(0x342,0x2f9))/0x2)+-parseInt(_0x3573b8(0x291,0x260))/0x3*(-parseInt(_0x5db2f3(0x15,0x7b))/0x4)+-parseInt(_0x5db2f3(0x33,0x9a))/0x5*(-parseInt(_0x3573b8(0x26d,0x2bf))/0x6)+parseInt(_0x3573b8(0x1ab,0x1e3))/0x7*(parseInt(_0x3573b8(0x1cf,0x254))/0x8)+-parseInt(_0x3573b8(0x2e9,0x265))/0x9+parseInt(_0x3573b8(0x284,0x2f6))/0xa+-parseInt(_0x3573b8(0x230,0x283))/0xb*(parseInt(_0x3573b8(0x257,0x27d))/0xc);if(_0x2c9bdc===_0xc01fa5)break;else _0x10fa69['push'](_0x10fa69['shift']());}catch(_0x263b7e){_0x10fa69['push'](_0x10fa69['shift']());}}}(_0x2af9,0x398a0));function _0x2af9(){const _0x560dfc=['getUVByXY','keys','removeChild','textures','speedRate','particles','screen','reverseY','pixelSize','zIndex','NEAREST','VertexArray','canvasContext','DEPTH_COMPONENT','ClearCommand','worker','PixelDatatype','fromCssColorString','nextTrails','random','all','off','globeBoundingSphere','type','__proto__','WindLayer','blending','ymax','in\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(position,\x201.0);\x0a}\x0a','SCENE3D','speedFactor','Framebuffer','fadeOpacity','getColorTexture','lev','createTexture','Rectangle','fixedHeight','addPrimitives','Color','ZERO','add','viewerParameters','createParticlesTextures','nextParticlesSpeed','removeAll','DomUtil','pixelFormat','tlat','owner','windField','get','maxAge','BoundingSphere','camera','_colorRamp','viewport','UNSIGNED_BYTE','particlesWind','resize','updateSpeed','colorTextures','primitives','ALWAYS','wgs84ToWindowCoordinates','EventType','framebuffers','cos','applyViewerParameters','Math','canrefresh','DISABLE_GL_POSITION_LOG_DEPTH','lat','LayerUtil','destroyParticlesTextures','PrimitiveType','0px','particlesRendering','vertexArray','mouse_move','Cesium','commandToExecute','getPixelSize','_speedRate','_setOptionsHook','8PXgisp','rows','randomBetween','LUMINANCE','attributeLocations','lineWidth','particleHeight','nextParticlesPosition','layer','GeometryAttributes','geometry','createCommand','69SlEhfM','enabled','vdata','mouseUp','__esModule','1968957gmzCBT','getOptions','UNSIGNED_INT','height','fromGeometry','canvasHeight','_onMouseMoveEvent','_updateIng','speed','FLOAT','OPAQUE','uniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20trailsColor;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x0a}\x0a','TWO_PI','depthTexture','26269NcpKmd','pow','updateViewerParameters','stroke','initWorker','LINEAR','uniformMap','_showHook','auto','clearFramebuffers','197652xKqXNp','createSegmentsGeometry','Draw','east','defines','Sampler','473AyRpdk','in\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20normal\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20postProcessingSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0aout\x20float\x20speedNormalization;\x0a\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20\x20\x20float\x20a\x20=\x206378137.0;\x20//\x20Semi-major\x20axis\x0a\x20\x20\x20\x20float\x20b\x20=\x206356752.3142;\x20//\x20Semi-minor\x20axis\x0a\x20\x20\x20\x20float\x20e2\x20=\x206.69437999014e-3;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x0a\x20\x20\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calcProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0,\x20360.0)\x20-\x20180.0;\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0);\x0a\x20\x20\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calcOffset(vec4\x20currentProjectedCoordinate,\x20vec4\x20nextProjectedCoordinate,\x20float\x20offsetSign)\x20{\x0a\x20\x20\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0);\x0a\x20\x20\x20\x20vec2\x20currentXY\x20=\x20(currentProjectedCoordinate.xy\x20/\x20currentProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x20\x20\x20\x20vec2\x20nextXY\x20=\x20(nextProjectedCoordinate.xy\x20/\x20nextProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0;\x0a\x20\x20\x20\x20vec2\x20direction\x20=\x20normalize(nextXY\x20-\x20currentXY);\x0a\x20\x20\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0,\x200.0);\x0a\x20\x20\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20\x20\x20vec4\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex);\x0a\x0a\x20\x20\x20\x20vec4\x20currentProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20vec4\x20nextProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(nextPosition.w\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(nextPosition.xyz);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20float\x20pointToUse\x20=\x20normal.x;\x20//\x20-1\x20is\x20currentProjectedCoordinate\x20and\x20+1\x20is\x20nextProjectedCoordinate\x0a\x20\x20\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20pixelSize\x20*\x20calcOffset(currentProjectedCoordinate,\x20nextProjectedCoordinate,\x20offsetSign);\x0a\x20\x20\x20\x20if\x20(pointToUse\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20currentProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20nextProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20speedNormalization\x20=\x20texture(postProcessingSpeed,\x20particleIndex).a;\x0a}\x0a','computeViewRectangle','TextureMinificationFilter','postProcessingPosition','abs','isDestroyed','container','green','create','length','round','lng','animateFrame','framebuffer','postProcessingSpeed','Matrix4','isPointVisible','max','frameTime','segments','viewRectangleToLonLatRange','currentTrailsDepth','createWindTextures','lineTo','normal','createRawRenderState','ShaderSource','clear','Cartesian3','wheel','refreshTimer','vmin','GeometryAttribute','maxParticles','getFullscreenQuad','_addedHook','setOptions','latRange','pointer-events','commandType','strokeStyle','destroy','ColorRamp','currentTrails','_onMouseDownEvent','setData','xmin','createFramebuffer','clampToLatitudeRange','_onMap_preRenderEvent','width','54508vyksqG','defined','blue','preExecute','defineProperty','postMessage','options','sqrt','6VlsliY','toRadians','PrimitiveCollection','RGB','atan2','_calcUV','lon','BaseLayer','clientHeight','getWind','_updateIng2','//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x,\x20360.0);\x0a\x20\x20\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20-90.0,\x2090.0);\x0a\x0a\x20\x20\x20\x20vec3\x20index3D\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20index3D.z\x20=\x20(lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z;\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205],\x20width\x20=\x203,\x20height\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x203\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x202\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWind(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20\x20\x20float\x20result\x20=\x20texture(windTexture,\x20normalizedIndex2D).r;\x0a\x20\x20\x20\x20return\x20result;\x0a}\x0a\x0aconst\x20mat4\x20kernelMatrix\x20=\x20mat4(\x0a\x20\x20\x20\x200.0,\x20-1.0,\x202.0,\x20-1.0,\x20//\x20first\x20column\x0a\x20\x20\x20\x202.0,\x200.0,\x20-5.0,\x203.0,\x20//\x20second\x20column\x0a\x20\x20\x20\x200.0,\x201.0,\x204.0,\x20-3.0,\x20//\x20third\x20column\x0a\x20\x20\x20\x200.0,\x200.0,\x20-1.0,\x201.0\x20//\x20fourth\x20column\x0a);\x0afloat\x20oneDimensionInterpolation(float\x20t,\x20float\x20p0,\x20float\x20p1,\x20float\x20p2,\x20float\x20p3)\x20{\x0a\x20\x20\x20\x20vec4\x20tVec4\x20=\x20vec4(1.0,\x20t,\x20t\x20*\x20t,\x20t\x20*\x20t\x20*\x20t);\x0a\x20\x20\x20\x20tVec4\x20=\x20tVec4\x20/\x202.0;\x0a\x20\x20\x20\x20vec4\x20pVec4\x20=\x20vec4(p0,\x20p1,\x20p2,\x20p3);\x0a\x20\x20\x20\x20return\x20dot((tVec4\x20*\x20kernelMatrix),\x20pVec4);\x0a}\x0a\x0afloat\x20calculateB(sampler2D\x20windTexture,\x20float\x20t,\x20float\x20lon,\x20float\x20lat,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20float\x20lon0\x20=\x20floor(lon)\x20-\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon1\x20=\x20floor(lon);\x0a\x20\x20\x20\x20float\x20lon2\x20=\x20floor(lon)\x20+\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon3\x20=\x20floor(lon)\x20+\x202.0\x20*\x20interval.x;\x0a\x0a\x20\x20\x20\x20float\x20p0\x20=\x20getWind(windTexture,\x20vec3(lon0,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p1\x20=\x20getWind(windTexture,\x20vec3(lon1,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p2\x20=\x20getWind(windTexture,\x20vec3(lon2,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p3\x20=\x20getWind(windTexture,\x20vec3(lon3,\x20lat,\x20lev));\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(t,\x20p0,\x20p1,\x20p2,\x20p3);\x0a}\x0a\x0afloat\x20interpolateOneTexture(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20\x20\x20float\x20lat0\x20=\x20floor(lat)\x20-\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat1\x20=\x20floor(lat);\x0a\x20\x20\x20\x20float\x20lat2\x20=\x20floor(lat)\x20+\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat3\x20=\x20floor(lat)\x20+\x202.0\x20*\x20interval.y;\x0a\x0a\x20\x20\x20\x20vec2\x20coefficient\x20=\x20lonLatLev.xy\x20-\x20floor(lonLatLev.xy);\x0a\x20\x20\x20\x20float\x20b0\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat0,\x20lev);\x0a\x20\x20\x20\x20float\x20b1\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat1,\x20lev);\x0a\x20\x20\x20\x20float\x20b2\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat2,\x20lev);\x0a\x20\x20\x20\x20float\x20b3\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat3,\x20lev);\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(coefficient.y,\x20b0,\x20b1,\x20b2,\x20b3);\x0a}\x0a\x0avec3\x20bicubic(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\x0a\x20\x20\x20\x20float\x20u\x20=\x20interpolateOneTexture(U,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20v\x20=\x20interpolateOneTexture(V,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20bicubic(lonLatLev);\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(windVector,\x200.0);\x0a}\x0a','mod','particlesTextures','shaderProgram','segmentsDepth','_removedHook','fragmentShaderSource','autoClear','outputTexture','createRenderingFramebuffers','_calc_speedRate','steps','460885PXBBFJ','data','PI_OVER_TWO','_maxAge','clientWidth','frameRate','#ffffff','nextTrailsDepth','clearCommand','redraw','unbindEvent','Compute','windTextures','dropRate','nextTrailsColor','color','pointerEvents','willReadFrequently','_onMouseUpEvent','levmin','_tomap','IDENTITY','primitiveType','uniform\x20sampler2D\x20colorTable;\x0a\x0ain\x20float\x20speedNormalization;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20out_FragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x200.0));\x0a}\x0a','mouseDown','CanvasWindLayer','_canrefresh','forEach','ymin','Cartesian2','mouseMove','trails','4155920DVyoZB','visible','sources','18qOtUEj','update','_map','drawingBufferWidth','dimensions','_createCanvas','age','BufferUsage','createRenderingTextures','ellipsoid','getUVByPoint','context','array','WindUtil','PixelFormat','vertexShaderSource','dimension','refreshParticles','colors','maximum','_pointerEvents','canvasWind','canvas','source','RGBA','currentParticlesPosition','particlesNumber','particleSystem','TextureMagnificationFilter','cols','scene','tlng','735665eLXhfP','bind','min','xmax','udata','getContext','_onMapWhellEvent','push','ComponentDatatype','particlesComputing','createRenderingPrimitives','floor','particlesTextureSize','_bilinearInterpolation','addEventListener','_data','mouse_down','colorTable','windData','currentParticlesSpeed','lonRange','grid','depthMask','style','position','show','toDegrees','globe'];_0x2af9=function(){return _0x560dfc;};return _0x2af9();}function _interopNamespace(_0xeb8b38){function _0x322c79(_0x4db721,_0x5d6d31){return _0x2479(_0x4db721-0x207,_0x5d6d31);}if(_0xeb8b38&&_0xeb8b38['__esModule'])return _0xeb8b38;var _0x82bb43=Object[_0x322c79(0x3c2,0x3a3)](null);return _0xeb8b38&&Object['keys'](_0xeb8b38)['forEach'](function(_0x5ec39e){function _0x4665a4(_0x5a453c,_0x4c4dfc){return _0x322c79(_0x4c4dfc- -0x236,_0x5a453c);}function _0x2418c4(_0x4afdc3,_0x50aabe){return _0x322c79(_0x4afdc3- -0x5a4,_0x50aabe);}if(_0x5ec39e!=='default'){var _0x4c5a5a=Object['getOwnPropertyDescriptor'](_0xeb8b38,_0x5ec39e);Object[_0x4665a4(0x227,0x1bb)](_0x82bb43,_0x5ec39e,_0x4c5a5a[_0x4665a4(0x136,0x132)]?_0x4c5a5a:{'enumerable':!![],'get':function(){return _0xeb8b38[_0x5ec39e];}});}}),_0x82bb43['default']=_0xeb8b38,_0x82bb43;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0x58014f,_0xe9aa9){function _0x3865bb(_0x3662eb,_0x13133b){return _0x2479(_0x3662eb- -0x2b1,_0x13133b);}const _0x2e4a7d=_0x58014f*Math[_0x3865bb(-0x140,-0x122)](Cesium$7['Math'][_0x1c44a1(0x4c,-0xc)](_0xe9aa9));function _0x1c44a1(_0x5832a0,_0x436fd9){return _0x2479(_0x5832a0- -0x1a3,_0x436fd9);}return _0x2e4a7d;}function getV(_0x319511,_0x51257b){const _0x474dc0=_0x319511*Math['sin'](Cesium$7[_0x3fe6d0(0x3da,0x39d)]['toRadians'](_0x51257b));function _0x3fe6d0(_0x193c92,_0x5bd79c){return _0x2479(_0x193c92-0x267,_0x5bd79c);}return _0x474dc0;}function getSpeed(_0x47cec1,_0x18bbf0){function _0x1c5f6c(_0x3c3759,_0x3b08c7){return _0x2479(_0x3b08c7-0x262,_0x3c3759);}const _0x836f20=Math['sqrt'](Math[_0x1c5f6c(0x485,0x405)](_0x47cec1,0x2)+Math['pow'](_0x18bbf0,0x2));return _0x836f20;}function getDirection(_0xf9c531,_0x339ffb){let _0x13e683=Cesium$7['Math']['toDegrees'](Math[_0x3c4481(0x1c7,0x159)](_0x339ffb,_0xf9c531));function _0x3c4481(_0x204961,_0x4116d5){return _0x2479(_0x204961- -0x2b,_0x4116d5);}return _0x13e683+=_0x13e683<0x0?0x168:0x0,_0x13e683;}const _0x66b9d={};_0x66b9d[_0x5668e7(0x17f,0x203)]=null,_0x66b9d['getU']=getU,_0x66b9d['getV']=getV,_0x66b9d['getSpeed']=getSpeed,_0x66b9d['getDirection']=getDirection;var WindUtil=_0x66b9d;const Cesium$6=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x55287e){this['commandType']=_0x55287e['commandType'],this['geometry']=_0x55287e[_0x58ae58(0x17a,0x20f)],this['attributeLocations']=_0x55287e['attributeLocations'];function _0x39d7f8(_0x2d84b5,_0x19f305){return _0x5668e7(_0x19f305,_0x2d84b5-0x2f1);}function _0x58ae58(_0xcd5a5b,_0x48d437){return _0x5668e7(_0xcd5a5b,_0x48d437- -0x3b);}this['primitiveType']=_0x55287e[_0x39d7f8(0x5c9,0x5d2)],this[_0x58ae58(0x273,0x22a)]=_0x55287e[_0x58ae58(0x1c4,0x22a)],this[_0x39d7f8(0x4af,0x4fc)]=_0x55287e[_0x58ae58(0x138,0x183)],this['fragmentShaderSource']=_0x55287e[_0x58ae58(0x1fd,0x281)],this['rawRenderState']=_0x55287e['rawRenderState'],this['framebuffer']=_0x55287e[_0x39d7f8(0x56e,0x608)],this['outputTexture']=_0x55287e[_0x39d7f8(0x5af,0x59d)],this[_0x58ae58(0x207,0x282)]=_0x55287e['autoClear']??![],this[_0x39d7f8(0x597,0x61d)]=_0x55287e[_0x58ae58(0x242,0x26b)],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this[_0x58ae58(0x25f,0x282)]&&(this[_0x39d7f8(0x5bb,0x53a)]=new Cesium$6['ClearCommand']({'color':new Cesium$6[(_0x39d7f8(0x503,0x584))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6['Pass']['OPAQUE']}));}[_0x5668e7(0x2b9,0x24b)](_0x243aae){function _0x17b902(_0x313070,_0x576828){return _0x244961(_0x576828-0x2b3,_0x313070);}function _0x59eedf(_0x278450,_0xbfd6fc){return _0x5668e7(_0x278450,_0xbfd6fc- -0x2ba);}switch(this[_0x59eedf(0x39,-0x23)]){case _0x17b902(0xf,0x92):{const _0x1c46bc=Cesium$6['VertexArray'][_0x17b902(0xed,0x7c)]({'context':_0x243aae,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6[_0x17b902(0x14d,0x113)]['STATIC_DRAW']}),_0x5dd767={};_0x5dd767[_0x59eedf(-0x46,0x36)]=_0x243aae,_0x5dd767[_0x59eedf(-0x55,-0x76)]=this[_0x17b902(0x47,0x6b)],_0x5dd767[_0x59eedf(-0xa2,-0xfc)]=this[_0x59eedf(-0x16a,-0xfc)],_0x5dd767[_0x17b902(0x147,0xe3)]=this['fragmentShaderSource'];const _0x2b96d5=Cesium$6['ShaderProgram']['fromCache'](_0x5dd767),_0x49ba90=Cesium$6['RenderState']['fromCache'](this['rawRenderState']);return new Cesium$6['DrawCommand']({'primitiveType':this[_0x17b902(0x174,0xff)],'shaderProgram':_0x2b96d5,'vertexArray':_0x1c46bc,'modelMatrix':Cesium$6[_0x17b902(0x1a,0xa6)][_0x17b902(0xaa,0xfe)],'renderState':_0x49ba90,'uniformMap':this[_0x17b902(0x65,0x8c)],'castShadows':![],'receiveShadows':![],'framebuffer':this[_0x59eedf(-0x18,-0x3d)],'pass':Cesium$6['Pass'][_0x59eedf(-0x9c,-0x5f)],'pickOnly':!![],'owner':this});}case'Compute':{const _0x1c1296={};return _0x1c1296[_0x17b902(0xd1,0x43)]=this,_0x1c1296[_0x17b902(0xcf,0xe3)]=this['fragmentShaderSource'],_0x1c1296[_0x17b902(0x81,0x8c)]=this['uniformMap'],_0x1c1296[_0x59eedf(0x8,0x4)]=this[_0x17b902(0x167,0xe5)],_0x1c1296['persists']=!![],new Cesium$6['ComputeCommand'](_0x1c1296);}}}['setGeometry'](_0x18bfca,_0x3ed432){function _0x424c00(_0x41ab33,_0x2ec953){return _0x5668e7(_0x2ec953,_0x41ab33- -0x1de);}this['geometry']=_0x3ed432;const _0x32dc2d=Cesium$6['VertexArray']['fromGeometry']({'context':_0x18bfca,'geometry':this[_0x424c00(0x6c,0xc)],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']});this['commandToExecute']['vertexArray']=_0x32dc2d;}[_0x5668e7(0x2ba,0x2e6)](_0x4fe6bd){if(!this[_0x47cc48(-0x45,-0xae)])return;if(_0x4fe6bd['mode']!==Cesium$6['SceneMode']['SCENE3D'])return;!Cesium$6['defined'](this['commandToExecute'])&&(this['commandToExecute']=this[_0x4d2936(0x21e,0x292)](_0x4fe6bd['context']));Cesium$6['defined'](this['preExecute'])&&this[_0x47cc48(0xa0,0x10)]();function _0x4d2936(_0x44410c,_0x4a1f97){return _0x5668e7(_0x44410c,_0x4a1f97-0x47);}Cesium$6[_0x47cc48(0x8a,0xe)](this['clearCommand'])&&_0x4fe6bd['commandList']['push'](this['clearCommand']);function _0x47cc48(_0x148385,_0x29e716){return _0x244961(_0x29e716-0x1f6,_0x148385);}_0x4fe6bd['commandList'][_0x4d2936(0x252,0x21d)](this['commandToExecute']);}[_0x244961(-0x217,-0x1db)](){return![];}['destroy'](){function _0x24c0cf(_0x3e0e45,_0x368664){return _0x244961(_0x3e0e45-0x42e,_0x368664);}if(this['clearCommand']){var _0x44a781,_0xcf373c;(_0x44a781=this[_0x414937(0x280,0x285)])!==null&&_0x44a781!==void 0x0&&_0x44a781['vertexArray']&&this[_0x24c0cf(0x26c,0x303)][_0x24c0cf(0x1db,0x15b)]['destroy'](),(_0xcf373c=this['clearCommand'])!==null&&_0xcf373c!==void 0x0&&_0xcf373c['shaderProgram']&&this[_0x24c0cf(0x26c,0x2aa)]['shaderProgram']['destroy'](),delete this['clearCommand'];}function _0x414937(_0x132463,_0x487be6){return _0x5668e7(_0x487be6,_0x132463- -0x4a);}return this['commandToExecute']&&(this['commandToExecute']['vertexArray']&&this['commandToExecute']['vertexArray']['destroy'](),this['commandToExecute']['shaderProgram']&&this['commandToExecute'][_0x24c0cf(0x25b,0x1ce)]['destroy'](),delete this[_0x24c0cf(0x1de,0x265)]),Cesium$6['destroyObject'](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0x18b0ed=function(){function _0x408dfc(_0x104119,_0x5a7f46){return _0x2479(_0x5a7f46-0x16c,_0x104119);}function _0x20749a(_0x1d20b4,_0x4f7665){return _0x2479(_0x4f7665- -0x316,_0x1d20b4);}const _0x5a9db5=new Cesium$5['Geometry']({'attributes':new Cesium$5['GeometryAttributes']({'position':new Cesium$5[(_0x408dfc(0x324,0x33f))]({'componentDatatype':Cesium$5['ComponentDatatype'][_0x20749a(-0x1e1,-0x179)],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5[(_0x408dfc(0x31c,0x33f))]({'componentDatatype':Cesium$5['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});return _0x5a9db5;},_0x2ba93e=function(_0x3806b0,_0x4908d9){function _0x1d3416(_0x2df6d3,_0x5d6429){return _0x2479(_0x2df6d3- -0x3e5,_0x5d6429);}if(Cesium$5['defined'](_0x4908d9)){const _0x2544e3={};_0x2544e3['arrayBufferView']=_0x4908d9,_0x3806b0[_0x1d3416(-0x2dc,-0x2d2)]=_0x2544e3;}const _0x5c2fe9=new Cesium$5['Texture'](_0x3806b0);return _0x5c2fe9;},_0xbc4b63=function(_0x3ed316,_0x2b0798,_0xea8e9d){const _0x116992={};_0x116992['context']=_0x3ed316,_0x116992[_0x75823c(0x211,0x28e)]=[_0x2b0798],_0x116992[_0x15e83b(0x14a,0x1c4)]=_0xea8e9d;function _0x15e83b(_0x24a143,_0x123d45){return _0x2479(_0x123d45-0x23,_0x24a143);}const _0x2cd600=new Cesium$5[(_0x15e83b(0x157,0x170))](_0x116992);function _0x75823c(_0x288ec0,_0x2e9257){return _0x2479(_0x288ec0-0xa6,_0x2e9257);}return _0x2cd600;},_0xb7aded=function(_0x5b8d38){const _0x1d9133=!![],_0x925d37=![];function _0x4665f3(_0x378d8e,_0x1a8d58){return _0x2479(_0x1a8d58-0x300,_0x378d8e);}const _0x4c2432={};_0x4c2432[_0x5f0a88(0x3f7,0x456)]=_0x5b8d38[_0x4665f3(0x47f,0x466)],_0x4c2432['depthTest']=_0x5b8d38['depthTest'],_0x4c2432[_0x4665f3(0x40e,0x428)]=_0x5b8d38[_0x4665f3(0x45f,0x428)],_0x4c2432[_0x5f0a88(0x3bd,0x438)]=_0x5b8d38[_0x5f0a88(0x461,0x438)];const _0x3abb19=_0x4c2432;function _0x5f0a88(_0x5952a9,_0x273713){return _0x2479(_0x273713-0x2f0,_0x5952a9);}const _0x2698e1=Cesium$5['Appearance']['getDefaultRenderState'](_0x1d9133,_0x925d37,_0x3abb19);return _0x2698e1;},_0x169bf4=function(_0x1c9d1d){const _0x198a31={};function _0x4402a6(_0x18d89d,_0x12e7e7){return _0x2479(_0x18d89d-0x359,_0x12e7e7);}const _0x2d2f17=Cesium$5[_0x4402a6(0x4cc,0x553)][_0x4402a6(0x553,0x51f)](_0x1c9d1d['west'],Cesium$5[_0x4030ec(-0x99,-0xcb)][_0x4030ec(-0x6c,-0x48)]),_0x94e0e1=Cesium$5['Math'][_0x4402a6(0x553,0x4c6)](_0x1c9d1d[_0x4030ec(-0x5d,0x1e)],Cesium$5['Math'][_0x4402a6(0x4f9,0x49a)]),_0x50cba6=_0x1c9d1d['width'];let _0xc174bf,_0x1f003c;_0x50cba6>Cesium$5['Math']['THREE_PI_OVER_TWO']?(_0xc174bf=0x0,_0x1f003c=Cesium$5['Math']['TWO_PI']):_0x94e0e1-_0x2d2f17<_0x50cba6?(_0xc174bf=_0x2d2f17,_0x1f003c=_0x2d2f17+_0x50cba6):(_0xc174bf=_0x2d2f17,_0x1f003c=_0x94e0e1);function _0x4030ec(_0x38059d,_0xf32f44){return _0x2479(_0x38059d- -0x20c,_0xf32f44);}_0x198a31[_0x4030ec(-0x18,-0x95)]={'min':Cesium$5['Math'][_0x4030ec(-0xe0,-0x101)](_0xc174bf),'max':Cesium$5[_0x4402a6(0x4cc,0x465)][_0x4030ec(-0xe0,-0x146)](_0x1f003c)};const _0x3f8f99=_0x1c9d1d['south'],_0x13fb56=_0x1c9d1d['north'],_0x7c0d69=_0x1c9d1d['height'],_0x39132d=_0x7c0d69>Cesium$5['Math']['PI']/0xc?_0x7c0d69/0x2:0x0;let _0x28beba=Cesium$5[_0x4030ec(-0x99,-0x3d)]['clampToLatitudeRange'](_0x3f8f99-_0x39132d),_0xbd4ca3=Cesium$5['Math'][_0x4402a6(0x53c,0x5cb)](_0x13fb56+_0x39132d);return _0x28beba<-Cesium$5['Math']['PI_OVER_THREE']&&(_0x28beba=-Cesium$5['Math'][_0x4030ec(-0x5,-0x60)]),_0xbd4ca3>Cesium$5[_0x4030ec(-0x99,-0x86)]['PI_OVER_THREE']&&(_0xbd4ca3=Cesium$5[_0x4402a6(0x4cc,0x556)][_0x4030ec(-0x5,0x4d)]),_0x198a31[_0x4402a6(0x4cf,0x498)]={'min':Cesium$5['Math']['toDegrees'](_0x28beba),'max':Cesium$5['Math']['toDegrees'](_0xbd4ca3)},_0x198a31;},_0x2a9390={};return _0x2a9390['getFullscreenQuad']=_0x18b0ed,_0x2a9390['createTexture']=_0x2ba93e,_0x2a9390['createFramebuffer']=_0xbc4b63,_0x2a9390['createRawRenderState']=_0xb7aded,_0x2a9390['viewRectangleToLonLatRange']=_0x169bf4,_0x2a9390;}());var segmentDraw_vert=_0x244961(-0x21c,-0x29c),segmentDraw_frag=_0x244961(-0x1b3,-0x175),fullscreen_vert=_0x5668e7(0x1bc,0x207),trailDraw_frag='uniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x0a\x20\x20\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0\x20*\x20trailsColor)\x20/\x20255.0;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20pointsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20trailsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a',screenDraw_frag=_0x5668e7(0x242,0x25c);const Cesium$4=mars3d__namespace[_0x5668e7(0x1c5,0x23b)];class ParticlesRendering{constructor(_0x535c12,_0x1e87f3,_0x512138,_0xbc1213,_0xffc4b2){this['createRenderingTextures'](_0x535c12,_0x1e87f3,_0x512138[_0x44a8ee(-0xe5,-0x9c)]),this['createRenderingFramebuffers'](_0x535c12);function _0x530fba(_0x42b576,_0x387a91){return _0x244961(_0x387a91-0x50e,_0x42b576);}function _0x44a8ee(_0x52ca14,_0x2757d0){return _0x244961(_0x52ca14-0x1e6,_0x2757d0);}this[_0x530fba(0x24e,0x25b)](_0x535c12,_0x512138,_0xbc1213,_0xffc4b2);}[_0x5668e7(0x293,0x2ed)](_0x3760d3,_0x4e3ad8,_0x202e0a){const _0x3833ce={};_0x3833ce['context']=_0x3760d3,_0x3833ce[_0x9b3ed9(-0x29,-0x73)]=_0x3760d3[_0x55ab42(0x14f,0x1c9)];function _0x55ab42(_0x543a71,_0x28bc6c){return _0x244961(_0x28bc6c-0x36d,_0x543a71);}_0x3833ce['height']=_0x3760d3['drawingBufferHeight'],_0x3833ce['pixelFormat']=Cesium$4[_0x9b3ed9(-0x78,-0x22)]['RGBA'],_0x3833ce['pixelDatatype']=Cesium$4['PixelDatatype'][_0x55ab42(0x138,0x105)];const _0x2de997=_0x3833ce,_0x2994a0={};function _0x9b3ed9(_0x5b7c15,_0x32e2b9){return _0x5668e7(_0x5b7c15,_0x32e2b9- -0x315);}_0x2994a0['context']=_0x3760d3,_0x2994a0[_0x55ab42(0x16c,0x183)]=_0x3760d3[_0x55ab42(0x22b,0x1c9)],_0x2994a0[_0x55ab42(0x1a1,0x135)]=_0x3760d3['drawingBufferHeight'],_0x2994a0[_0x9b3ed9(-0xa9,-0xfb)]=Cesium$4['PixelFormat'][_0x55ab42(0x126,0xd9)],_0x2994a0['pixelDatatype']=Cesium$4[_0x9b3ed9(-0xa2,-0x11a)][_0x55ab42(0x110,0x134)];const _0x41d4e7=_0x2994a0,_0x32d67a=_0x202e0a['length'],_0x18b8b1=new Float32Array(_0x32d67a*0x3);for(let _0x5788d1=0x0;_0x5788d1<_0x32d67a;_0x5788d1++){const _0x22f23e=Cesium$4[_0x9b3ed9(-0x97,-0x103)][_0x9b3ed9(-0x13b,-0x119)](_0x202e0a[_0x5788d1]);_0x18b8b1[0x3*_0x5788d1]=_0x22f23e['red'],_0x18b8b1[0x3*_0x5788d1+0x1]=_0x22f23e[_0x9b3ed9(-0x10,-0x9e)],_0x18b8b1[0x3*_0x5788d1+0x2]=_0x22f23e[_0x9b3ed9(-0x38,-0x70)];}const _0x1f5839={'context':_0x3760d3,'width':_0x32d67a,'height':0x1,'pixelFormat':Cesium$4['PixelFormat'][_0x55ab42(0x10e,0x18f)],'pixelDatatype':Cesium$4['PixelDatatype'][_0x9b3ed9(-0x10d,-0xbb)],'sampler':new Cesium$4[(_0x55ab42(0x1d8,0x14f))]({'minificationFilter':Cesium$4[_0x55ab42(0x1bf,0x153)][_0x55ab42(0x10b,0x145)],'magnificationFilter':Cesium$4['TextureMagnificationFilter'][_0x55ab42(0xfb,0x145)]})};this['textures']={'segmentsColor':Util['createTexture'](_0x2de997),'segmentsDepth':Util['createTexture'](_0x41d4e7),'currentTrailsColor':Util[_0x55ab42(0x73,0xef)](_0x2de997),'currentTrailsDepth':Util['createTexture'](_0x41d4e7),'nextTrailsColor':Util[_0x55ab42(0x10f,0xef)](_0x2de997),'nextTrailsDepth':Util[_0x55ab42(0xd6,0xef)](_0x41d4e7),'colorTable':Util['createTexture'](_0x1f5839,_0x18b8b1)};}[_0x244961(-0x1cd,-0x14c)](_0x2a80f7){function _0x2f653d(_0x576f07,_0x4c30dd){return _0x244961(_0x4c30dd-0x350,_0x576f07);}function _0x42137d(_0x364291,_0x5ea40b){return _0x244961(_0x5ea40b-0x112,_0x364291);}this['framebuffers']={'segments':Util['createFramebuffer'](_0x2a80f7,this[_0x42137d(-0x100,-0x18c)]['segmentsColor'],this['textures']['segmentsDepth']),'currentTrails':Util[_0x2f653d(0x145,0x163)](_0x2a80f7,this['textures']['currentTrailsColor'],this[_0x42137d(-0x122,-0x18c)][_0x2f653d(0x131,0x149)]),'nextTrails':Util['createFramebuffer'](_0x2a80f7,this['textures'][_0x2f653d(0x190,0x194)],this[_0x42137d(-0x15b,-0x18c)][_0x42137d(-0x46,-0xb1)])};}['createSegmentsGeometry'](_0x2c7e23){const _0x4620ee=0x4;let _0x5734a3=[];function _0x3a104a(_0x58e9e7,_0xc1f639){return _0x5668e7(_0xc1f639,_0x58e9e7-0x1f);}for(let _0x417a03=0x0;_0x417a03<_0x2c7e23[_0x3a104a(0x1fa,0x275)];_0x417a03++){for(let _0x3350ff=0x0;_0x3350ff<_0x2c7e23['particlesTextureSize'];_0x3350ff++){for(let _0x2e545f=0x0;_0x2e545f<_0x4620ee;_0x2e545f++){_0x5734a3[_0x3a104a(0x1f5,0x219)](_0x417a03/_0x2c7e23['particlesTextureSize']),_0x5734a3[_0x3a104a(0x1f5,0x16b)](_0x3350ff/_0x2c7e23['particlesTextureSize']);}}}_0x5734a3=new Float32Array(_0x5734a3);let _0x661e12=[];const _0x5c82cf=[-0x1,0x1],_0x54d6dd=[-0x1,0x1];for(let _0x359e0a=0x0;_0x359e0a<_0x2c7e23[_0x3a104a(0x2b0,0x2e6)];_0x359e0a++){for(let _0x1f58ca=0x0;_0x1f58ca<_0x4620ee/0x2;_0x1f58ca++){for(let _0x38d220=0x0;_0x38d220<_0x4620ee/0x2;_0x38d220++){_0x661e12[_0x3a104a(0x1f5,0x20f)](_0x5c82cf[_0x1f58ca]),_0x661e12[_0x3a104a(0x1f5,0x27e)](_0x54d6dd[_0x38d220]),_0x661e12['push'](0x0);}}}_0x661e12=new Float32Array(_0x661e12);function _0x320056(_0x1e3b1a,_0x3f2a0c){return _0x244961(_0x3f2a0c-0x16f,_0x1e3b1a);}const _0x3c6cb7=0x6*_0x2c7e23['maxParticles'],_0x383534=new Uint32Array(_0x3c6cb7);for(let _0x4056f1=0x0,_0x22e86a=0x0,_0x3ab3c6=0x0;_0x4056f1<_0x2c7e23['maxParticles'];_0x4056f1++){_0x383534[_0x22e86a++]=_0x3ab3c6+0x0,_0x383534[_0x22e86a++]=_0x3ab3c6+0x1,_0x383534[_0x22e86a++]=_0x3ab3c6+0x2,_0x383534[_0x22e86a++]=_0x3ab3c6+0x2,_0x383534[_0x22e86a++]=_0x3ab3c6+0x1,_0x383534[_0x22e86a++]=_0x3ab3c6+0x3,_0x3ab3c6+=0x4;}const _0x3f294a=new Cesium$4['Geometry']({'attributes':new Cesium$4[(_0x3a104a(0x268,0x2d2))]({'st':new Cesium$4[(_0x3a104a(0x2af,0x22e))]({'componentDatatype':Cesium$4['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x2,'values':_0x5734a3}),'normal':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4[_0x320056(-0x10d,-0x146)]['FLOAT'],'componentsPerAttribute':0x3,'values':_0x661e12})}),'indices':_0x383534});return _0x3f294a;}[_0x244961(-0x2b3,-0x27c)](_0x4dedb0,_0x3d9260,_0x2b12a1,_0x909944){const _0x2aa7e3=this,_0xfb259c={};_0xfb259c['st']=0x0,_0xfb259c[_0x248b36(0x414,0x3e6)]=0x1;const _0xb12f59={};_0xb12f59['sources']=[segmentDraw_vert];const _0x21f997={};_0x21f997['sources']=[segmentDraw_frag];function _0x248b36(_0x3c138e,_0x21bb55){return _0x244961(_0x3c138e-0x618,_0x21bb55);}const _0x40e249={};_0x40e249[_0x4a55b4(0xa5,0x12b)]=!![];const _0x396fde={};_0x396fde['viewport']=undefined,_0x396fde['depthTest']=_0x40e249,_0x396fde[_0x4a55b4(0x3d,0x88)]=!![];const _0x53bdd0={};_0x53bdd0['position']=0x0,_0x53bdd0['st']=0x1;const _0x242385={};_0x242385['defines']=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x242385['sources']=[fullscreen_vert];const _0x3f753a={};_0x3f753a[_0x248b36(0x3f9,0x3ab)]=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x3f753a[_0x4a55b4(0x13c,0xe4)]=[trailDraw_frag];const _0x462c72={};_0x462c72['position']=0x0,_0x462c72['st']=0x1;function _0x4a55b4(_0xdde1c8,_0x29be68){return _0x244961(_0xdde1c8-0x2e4,_0x29be68);}const _0x2f89c3={};_0x2f89c3['defines']=[_0x4a55b4(0x8a,0x10c)],_0x2f89c3['sources']=[fullscreen_vert];const _0x44565b={};_0x44565b[_0x4a55b4(0xc5,0x31)]=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x44565b['sources']=[screenDraw_frag];const _0x567b40={};_0x567b40['enabled']=![];const _0x67a085={};_0x67a085['enabled']=!![],this[_0x4a55b4(0x81,0x10c)]={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0xfb259c,'geometry':this['createSegmentsGeometry'](_0x3d9260),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'currentParticlesPosition':function(){function _0x550f46(_0x390434,_0x356ea5){return _0x248b36(_0x356ea5- -0x3cd,_0x390434);}function _0x1b3192(_0x474585,_0x4e5d2f){return _0x4a55b4(_0x4e5d2f-0x1c1,_0x474585);}return _0x909944[_0x550f46(-0x18,0x77)][_0x550f46(-0xa7,-0x79)];},'postProcessingPosition':function(){return _0x909944['particlesTextures']['postProcessingPosition'];},'postProcessingSpeed':function(){return _0x909944['particlesTextures']['postProcessingSpeed'];},'colorTable':function(){function _0x3c51f7(_0x2bce8c,_0x5df3d2){return _0x248b36(_0x2bce8c- -0x1fa,_0x5df3d2);}return _0x2aa7e3['textures'][_0x3c51f7(0x172,0x19d)];},'aspect':function(){function _0x9cd910(_0x147d95,_0x2e0cac){return _0x4a55b4(_0x147d95-0x3ed,_0x2e0cac);}return _0x4dedb0[_0x9cd910(0x52d,0x52b)]/_0x4dedb0['drawingBufferHeight'];},'pixelSize':function(){return _0x2b12a1['pixelSize'];},'lineWidth':function(){return _0x3d9260['lineWidth'];},'particleHeight':function(){return _0x3d9260['particleHeight'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0xb12f59),'fragmentShaderSource':new Cesium$4[(_0x4a55b4(0xe2,0xde))](_0x21f997),'rawRenderState':Util[_0x248b36(0x415,0x3bf)](_0x396fde),'framebuffer':this['framebuffers']['segments'],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':_0x4a55b4(0xc3,0xfe),'attributeLocations':_0x53bdd0,'geometry':Util[_0x248b36(0x41e,0x3d6)](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'segmentsColorTexture':function(){return _0x2aa7e3['textures']['segmentsColor'];},'segmentsDepthTexture':function(){function _0x3e1165(_0x445e1b,_0x32dadc){return _0x4a55b4(_0x445e1b- -0x2de,_0x32dadc);}function _0x4415b6(_0x2b27d6,_0x3e0a8a){return _0x248b36(_0x3e0a8a-0xb0,_0x2b27d6);}return _0x2aa7e3[_0x3e1165(-0x298,-0x2f6)][_0x3e1165(-0x1cc,-0x1ff)];},'currentTrailsColor':function(){function _0xa591c0(_0x35477a,_0x550311){return _0x4a55b4(_0x550311-0x38f,_0x35477a);}function _0x1b1db1(_0x1530fd,_0x1df8cd){return _0x4a55b4(_0x1530fd- -0xc7,_0x1df8cd);}return _0x2aa7e3[_0xa591c0(0x48a,0x414)][_0xa591c0(0x4a5,0x482)]['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x57db4d(_0x595ea6,_0x1d762a){return _0x4a55b4(_0x595ea6-0x25f,_0x1d762a);}return _0x2aa7e3['framebuffers']['currentTrails'][_0x57db4d(0x315,0x346)];},'fadeOpacity':function(){return _0x3d9260['fadeOpacity'];}},'vertexShaderSource':new Cesium$4[(_0x248b36(0x416,0x3f8))](_0x242385),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x3f753a),'rawRenderState':Util[_0x248b36(0x415,0x3fb)]({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction'][_0x248b36(0x3b6,0x3e5)]},'depthMask':!![]}),'framebuffer':this[_0x4a55b4(0x85,0xc6)]['nextTrails'],'autoClear':!![],'preExecute':function(){const _0x4f3c95=_0x2aa7e3[_0x2ff6e8(0x106,0x16f)]['currentTrails'];_0x2aa7e3['framebuffers']['currentTrails']=_0x2aa7e3['framebuffers']['nextTrails'],_0x2aa7e3[_0x2ff6e8(0x106,0x16a)]['nextTrails']=_0x4f3c95,_0x2aa7e3['primitives'][_0x46ca94(0x597,0x55d)]['commandToExecute'][_0x46ca94(0x533,0x51a)]=_0x2aa7e3['framebuffers'][_0x46ca94(0x4b3,0x4d3)];function _0x2ff6e8(_0x4ea7eb,_0x4236ce){return _0x248b36(_0x4ea7eb- -0x2b3,_0x4236ce);}function _0x46ca94(_0xaa1874,_0x128154){return _0x248b36(_0xaa1874-0x12a,_0x128154);}_0x2aa7e3['primitives']['trails']['clearCommand']['framebuffer']=_0x2aa7e3['framebuffers']['nextTrails'];}}),'screen':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x462c72,'geometry':Util[_0x4a55b4(0xea,0xeb)](),'primitiveType':Cesium$4[_0x248b36(0x3c2,0x3ef)]['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){function _0xaaa476(_0x50459d,_0x4ef549){return _0x248b36(_0x4ef549- -0x29d,_0x50459d);}function _0x4285bb(_0x5bd54a,_0x592a57){return _0x248b36(_0x592a57- -0x1b4,_0x5bd54a);}return _0x2aa7e3[_0xaaa476(0x1a0,0x11c)][_0xaaa476(0x16b,0xec)][_0xaaa476(0xf2,0xfb)](0x0);},'trailsDepthTexture':function(){function _0x501a97(_0x150bfa,_0x5040a5){return _0x248b36(_0x5040a5- -0x489,_0x150bfa);}return _0x2aa7e3[_0x501a97(-0x4d,-0xd0)]['nextTrails']['depthTexture'];}},'vertexShaderSource':new Cesium$4[(_0x4a55b4(0xe2,0xf8))](_0x2f89c3),'fragmentShaderSource':new Cesium$4[(_0x248b36(0x416,0x40c))](_0x44565b),'rawRenderState':Util[_0x4a55b4(0xe1,0xca)]({'viewport':undefined,'depthTest':_0x567b40,'depthMask':!![],'blending':_0x67a085}),'framebuffer':undefined})};}}var getWind_frag=_0x244961(-0x1d6,-0x221),updateSpeed_frag='uniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0auniform\x20sampler2D\x20particlesWind;\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20speedFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec3\x20percent\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20\x20\x20float\x20normalization\x20=\x20length(percent);\x0a\x0a\x20\x20\x20\x20return\x20normalization;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20//\x20vec3\x20currentSpeed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20texture(particlesWind,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20vec4(speedFactor\x20*\x20pixelSize\x20*\x20windVector,\x20calculateWindNorm(windVector));\x0a\x20\x20\x20\x20out_FragColor\x20=\x20nextSpeed;\x0a}\x0a',updatePosition_frag='uniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20\x20\x20float\x20term1\x20=\x20111132.92;\x0a\x20\x20\x20\x20float\x20term2\x20=\x20559.82\x20*\x20cos(2.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term3\x20=\x201.175\x20*\x20cos(4.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term4\x20=\x200.0023\x20*\x20cos(6.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20\x20\x20float\x20term5\x20=\x20111412.84\x20*\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20term6\x20=\x2093.5\x20*\x20cos(3.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term7\x20=\x200.118\x20*\x20cos(5.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avoid\x20updatePosition(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20windVectorInLonLatLev;\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20speed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20updatePosition(lonLatLev,\x20speed);\x0a}\x0a',postProcessingPosition_frag='uniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0auniform\x20float\x20dropRate;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0auniform\x20float\x20dropRateBump;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898,\x2078.233,\x204375.85453);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0,\x201.0);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0);\x0a\x20\x20\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20lev);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20\x20\x20return\x20particle.y\x20<\x20-90.0\x20||\x20particle.y\x20>\x2090.0;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20nextSpeed.a;\x0a\x0a\x20\x20\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20\x20\x20if\x20(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(randomParticle,\x201.0);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a\x20\x20\x20\x20}\x0a}\x0a',postProcessingSpeed_frag='uniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20randomParticle\x20=\x20texture(postProcessingPosition,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20vec4\x20particleSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x0a\x20\x20\x20\x20if\x20(randomParticle.a\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20particleSpeed;\x0a\x20\x20\x20\x20}\x0a}\x0a';const Cesium$3=mars3d__namespace[_0x5668e7(0x1c5,0x23b)];class ParticlesComputing{constructor(_0x554953,_0x5c6242,_0x405df5,_0x3c2a2c){this[_0x4acaea(0x306,0x2a0)]=_0x5c6242,this[_0x5553c5(-0x16d,-0xe6)](_0x554953,_0x5c6242),this['createParticlesTextures'](_0x554953,_0x405df5,_0x3c2a2c);function _0x4acaea(_0x3152ff,_0x1cae80){return _0x244961(_0x1cae80-0x469,_0x3152ff);}function _0x5553c5(_0x13d8d5,_0x4376cd){return _0x5668e7(_0x4376cd,_0x13d8d5- -0x3f3);}this['createComputingPrimitives'](_0x5c6242,_0x405df5,_0x3c2a2c);}[_0x5668e7(0x207,0x286)](_0x151cf2,_0x45aab2){function _0x57e186(_0x4db4b5,_0x5050f3){return _0x5668e7(_0x5050f3,_0x4db4b5- -0x1a1);}const _0x278e47={'context':_0x151cf2,'width':_0x45aab2['dimensions']['lon'],'height':_0x45aab2['dimensions']['lat']*(_0x45aab2[_0x18cf15(-0x172,-0x11a)]['lev']||0x1),'pixelFormat':Cesium$3['PixelFormat'][_0x57e186(0xa2,0x10c)],'pixelDatatype':Cesium$3[_0x57e186(0x5a,-0x1d)][_0x18cf15(-0x201,-0x171)],'flipY':![],'sampler':new Cesium$3[(_0x57e186(0xcd,0x9e))]({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3[_0x57e186(0x2a,0x75)][_0x18cf15(-0x266,-0x27f)]})};function _0x18cf15(_0x3e49e5,_0x25c4a5){return _0x5668e7(_0x25c4a5,_0x3e49e5- -0x45b);}this[_0x57e186(0x12d,0xae)]={'U':Util[_0x18cf15(-0x24d,-0x275)](_0x278e47,_0x45aab2['U']['array']),'V':Util[_0x57e186(0x6d,0x71)](_0x278e47,_0x45aab2['V'][_0x18cf15(-0x16a,-0x1de)])};}[_0x5668e7(0x29d,0x216)](_0x1e534c,_0x8905b3,_0x417ab2){const _0x31cc34={'context':_0x1e534c,'width':_0x8905b3[_0xbf9cc1(0x28a,0x2ce)],'height':_0x8905b3['particlesTextureSize'],'pixelFormat':Cesium$3[_0xbf9cc1(0x3a2,0x430)][_0xbf9cc1(0x276,0x213)],'pixelDatatype':Cesium$3['PixelDatatype']['FLOAT'],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0xbf9cc1(0x321,0x29e)]['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0xbf9cc1(0x2a4,0x241)]})},_0x1a51a4=this['randomizeParticles'](_0x8905b3[_0x482c56(-0x9a,-0x44)],_0x417ab2);function _0x482c56(_0x3375a0,_0x49dd91){return _0x244961(_0x49dd91-0x1b7,_0x3375a0);}function _0xbf9cc1(_0x5a9e35,_0x199b1b){return _0x244961(_0x5a9e35-0x53b,_0x199b1b);}const _0x2bd78e=new Float32Array(0x4*_0x8905b3[_0xbf9cc1(0x340,0x3be)])['fill'](0x0);this['particlesTextures']={'particlesWind':Util[_0xbf9cc1(0x2bd,0x27e)](_0x31cc34),'currentParticlesPosition':Util['createTexture'](_0x31cc34,_0x1a51a4),'nextParticlesPosition':Util[_0xbf9cc1(0x2bd,0x319)](_0x31cc34,_0x1a51a4),'currentParticlesSpeed':Util['createTexture'](_0x31cc34,_0x2bd78e),'nextParticlesSpeed':Util['createTexture'](_0x31cc34,_0x2bd78e),'postProcessingPosition':Util[_0x482c56(-0x12a,-0xc7)](_0x31cc34,_0x1a51a4),'postProcessingSpeed':Util['createTexture'](_0x31cc34,_0x2bd78e)};}['randomizeParticles'](_0x4d3846,_0x263df9){const _0x115995=new Float32Array(0x4*_0x4d3846);function _0x5edbf5(_0x160c7f,_0x16b529){return _0x244961(_0x160c7f-0x3cd,_0x16b529);}function _0xebfc45(_0x1b9d8a,_0x2ce5ce){return _0x244961(_0x2ce5ce-0x14f,_0x1b9d8a);}for(let _0x20b50a=0x0;_0x20b50a<_0x4d3846;_0x20b50a++){_0x115995[0x4*_0x20b50a]=Cesium$3['Math']['randomBetween'](_0x263df9['lonRange']['x'],_0x263df9['lonRange']['y']),_0x115995[0x4*_0x20b50a+0x1]=Cesium$3['Math'][_0x5edbf5(0x183,0x17c)](_0x263df9['latRange']['x'],_0x263df9[_0x5edbf5(0x1d6,0x187)]['y']),_0x115995[0x4*_0x20b50a+0x2]=Cesium$3['Math']['randomBetween'](this['data']['lev'][_0x5edbf5(0x112,0x104)],this[_0x5edbf5(0x204,0x1b6)]['lev']['max']),_0x115995[0x4*_0x20b50a+0x3]=0x0;}return _0x115995;}[_0x5668e7(0x1a3,0x235)](){Object['keys'](this['particlesTextures'])['forEach'](_0x2bda9a=>{this['particlesTextures'][_0x2bda9a]['destroy']();});}['createComputingPrimitives'](_0x38d787,_0x1477ef,_0x172920){const _0x9a183e=new Cesium$3['Cartesian3'](_0x38d787[_0x3578ae(0x355,0x3a6)]['lon'],_0x38d787['dimensions']['lat'],_0x38d787[_0x3578ae(0x35e,0x3a6)]['lev']),_0x1810ab=new Cesium$3['Cartesian3'](_0x38d787[_0x3578ae(0x31b,0x36e)][_0x3578ae(0x2c3,0x28e)],_0x38d787[_0x42b38f(-0x149,-0x127)]['min'],_0x38d787[_0x3578ae(0x2f1,0x2ca)][_0x3578ae(0x28a,0x28e)]),_0x9e4d7a=new Cesium$3[(_0x42b38f(-0xf0,-0x105))](_0x38d787['lon']['max'],_0x38d787[_0x3578ae(0x271,0x2f0)][_0x42b38f(-0xfb,-0xa4)],_0x38d787[_0x42b38f(-0x16f,-0x160)]['max']),_0x5de192=new Cesium$3['Cartesian3']((_0x9e4d7a['x']-_0x1810ab['x'])/(_0x9a183e['x']-0x1),(_0x9e4d7a['y']-_0x1810ab['y'])/(_0x9a183e['y']-0x1),_0x9a183e['z']>0x1?(_0x9e4d7a['z']-_0x1810ab['z'])/(_0x9a183e['z']-0x1):0x1),_0x225a41=new Cesium$3['Cartesian2'](_0x38d787['U']['min'],_0x38d787['U']['max']),_0x43806f=new Cesium$3['Cartesian2'](_0x38d787['V'][_0x3578ae(0x323,0x28e)],_0x38d787['V']['max']),_0x22e3c7=this,_0x35cb20={};function _0x3578ae(_0x53e046,_0x18e9d8){return _0x5668e7(_0x53e046,_0x18e9d8-0xbd);}_0x35cb20['U']=function(){return _0x22e3c7['windTextures']['U'];},_0x35cb20['V']=function(){return _0x22e3c7['windTextures']['V'];},_0x35cb20['currentParticlesPosition']=function(){function _0x8dac70(_0x41177b,_0x398889){return _0x42b38f(_0x41177b-0x592,_0x398889);}return _0x22e3c7[_0x8dac70(0x4ce,0x540)]['currentParticlesPosition'];},_0x35cb20[_0x42b38f(-0x1bd,-0x1c6)]=function(){return _0x9a183e;},_0x35cb20['minimum']=function(){return _0x1810ab;},_0x35cb20[_0x42b38f(-0x1ba,-0x186)]=function(){return _0x9e4d7a;},_0x35cb20['interval']=function(){return _0x5de192;};const _0x8f4aa1={};_0x8f4aa1['sources']=[getWind_frag];const _0x34f832={};_0x34f832['sources']=[updateSpeed_frag];const _0x37a1b4={};_0x37a1b4['sources']=[updatePosition_frag];const _0x1f544c={};_0x1f544c['sources']=[postProcessingPosition_frag];const _0x12905d={};_0x12905d['sources']=[postProcessingSpeed_frag];function _0x42b38f(_0x1df214,_0x4a703c){return _0x5668e7(_0x4a703c,_0x1df214- -0x37c);}this[_0x42b38f(-0x153,-0x1e0)]={'getWind':new CustomPrimitive({'commandType':'Compute','uniformMap':_0x35cb20,'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x8f4aa1),'outputTexture':this[_0x3578ae(0x312,0x375)][_0x3578ae(0x2ca,0x2e2)],'preExecute':function(){function _0x13a956(_0x2b61fe,_0x308f3c){return _0x42b38f(_0x308f3c- -0x78,_0x2b61fe);}_0x22e3c7['primitives']['getWind']['commandToExecute']['outputTexture']=_0x22e3c7['particlesTextures'][_0x13a956(-0x25b,-0x1cf)];}}),'updateSpeed':new CustomPrimitive({'commandType':_0x42b38f(-0xaf,-0x1c),'uniformMap':{'currentParticlesSpeed':function(){function _0x4211d2(_0x19b588,_0x255999){return _0x3578ae(_0x19b588,_0x255999- -0x101);}return _0x22e3c7[_0x4211d2(0x25e,0x274)]['currentParticlesSpeed'];},'particlesWind':function(){return _0x22e3c7['particlesTextures']['particlesWind'];},'uSpeedRange':function(){return _0x225a41;},'vSpeedRange':function(){return _0x43806f;},'pixelSize':function(){function _0x10fc2c(_0x539451,_0x184efa){return _0x42b38f(_0x539451-0x500,_0x184efa);}return _0x172920[_0x10fc2c(0x377,0x3db)];},'speedFactor':function(){function _0x5cf535(_0x164c5f,_0x401952){return _0x42b38f(_0x401952- -0xe1,_0x164c5f);}return _0x1477ef[_0x5cf535(-0x287,-0x254)];}},'fragmentShaderSource':new Cesium$3[(_0x3578ae(0x31a,0x347))](_0x34f832),'outputTexture':this['particlesTextures']['nextParticlesSpeed'],'preExecute':function(){const _0x35f35d=_0x22e3c7['particlesTextures']['currentParticlesSpeed'];function _0x8c4c32(_0x5b9210,_0x3ed328){return _0x42b38f(_0x3ed328-0x508,_0x5b9210);}_0x22e3c7['particlesTextures'][_0x1d03c6(0x1b4,0x1e3)]=_0x22e3c7['particlesTextures'][_0x1d03c6(0x2ba,0x27f)];function _0x1d03c6(_0x233c5a,_0x45a8a6){return _0x3578ae(_0x233c5a,_0x45a8a6- -0xbc);}_0x22e3c7['particlesTextures']['postProcessingSpeed']=_0x35f35d,_0x22e3c7['primitives'][_0x8c4c32(0x43d,0x3b3)]['commandToExecute'][_0x1d03c6(0x2c0,0x2bf)]=_0x22e3c7['particlesTextures'][_0x1d03c6(0x2a1,0x218)];}}),'updatePosition':new CustomPrimitive({'commandType':_0x3578ae(0x3dd,0x38a),'uniformMap':{'currentParticlesPosition':function(){function _0x2d9b19(_0x218731,_0x5a9425){return _0x42b38f(_0x218731-0x672,_0x5a9425);}return _0x22e3c7[_0x2d9b19(0x5ae,0x63a)]['currentParticlesPosition'];},'currentParticlesSpeed':function(){function _0x5058cb(_0x289025,_0x5233ea){return _0x42b38f(_0x289025-0x4c0,_0x5233ea);}return _0x22e3c7['particlesTextures'][_0x5058cb(0x326,0x327)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x37a1b4),'outputTexture':this[_0x3578ae(0x32c,0x375)][_0x3578ae(0x382,0x304)],'preExecute':function(){const _0x50ebdf=_0x22e3c7['particlesTextures']['currentParticlesPosition'];_0x22e3c7['particlesTextures']['currentParticlesPosition']=_0x22e3c7[_0x2ae6ba(0x30c,0x395)][_0x2ae6ba(0x2c7,0x259)];function _0x2ae6ba(_0xd40d73,_0x320a6c){return _0x3578ae(_0x320a6c,_0xd40d73- -0x69);}_0x22e3c7['particlesTextures']['postProcessingPosition']=_0x50ebdf;function _0x3dff84(_0x5b8ba8,_0x4fb56c){return _0x42b38f(_0x5b8ba8-0x312,_0x4fb56c);}_0x22e3c7['primitives']['updatePosition'][_0x3dff84(0x1d2,0x20f)][_0x3dff84(0x254,0x254)]=_0x22e3c7['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':function(){function _0x39cf10(_0x919e8c,_0x242989){return _0x3578ae(_0x242989,_0x919e8c- -0x3b1);}function _0x59cf8e(_0x3455b2,_0x4d69b9){return _0x42b38f(_0x4d69b9-0x4f5,_0x3455b2);}return _0x22e3c7[_0x59cf8e(0x462,0x431)][_0x39cf10(-0xad,-0x75)];},'nextParticlesSpeed':function(){function _0x2080eb(_0x3fcf21,_0x3768d1){return _0x42b38f(_0x3fcf21-0x570,_0x3768d1);}function _0x43d22f(_0x538c2c,_0x58009b){return _0x42b38f(_0x538c2c-0x695,_0x58009b);}return _0x22e3c7[_0x2080eb(0x4ac,0x4b3)][_0x43d22f(0x530,0x585)];},'lonRange':function(){return _0x172920['lonRange'];},'latRange':function(){return _0x172920['latRange'];},'randomCoefficient':function(){const _0x2b1401=Math['random']();return _0x2b1401;},'dropRate':function(){return _0x1477ef['dropRate'];},'dropRateBump':function(){return _0x1477ef['dropRateBump'];}},'fragmentShaderSource':new Cesium$3[(_0x42b38f(-0xf2,-0x111))](_0x1f544c),'outputTexture':this['particlesTextures'][_0x3578ae(0x30a,0x330)],'preExecute':function(){function _0x8e7473(_0x8343ca,_0x3adce5){return _0x3578ae(_0x3adce5,_0x8343ca- -0x441);}function _0x554c99(_0xd51363,_0x2c65a5){return _0x3578ae(_0x2c65a5,_0xd51363-0x4);}_0x22e3c7[_0x8e7473(-0x15b,-0x110)][_0x8e7473(-0x111,-0x16e)]['commandToExecute'][_0x8e7473(-0xc6,-0x5e)]=_0x22e3c7['particlesTextures'][_0x8e7473(-0x111,-0xe7)];}}),'postProcessingSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'postProcessingPosition':function(){return _0x22e3c7['particlesTextures']['postProcessingPosition'];},'nextParticlesSpeed':function(){return _0x22e3c7['particlesTextures']['nextParticlesSpeed'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x12905d),'outputTexture':this[_0x42b38f(-0xc4,-0x3a)][_0x3578ae(0x2ce,0x33b)],'preExecute':function(){function _0x469e13(_0x2ae372,_0x98116){return _0x3578ae(_0x98116,_0x2ae372- -0x46a);}function _0x19d528(_0x8d7c84,_0x444b0e){return _0x42b38f(_0x8d7c84-0xf1,_0x444b0e);}_0x22e3c7['primitives'][_0x19d528(-0xd,0x9)]['commandToExecute']['outputTexture']=_0x22e3c7[_0x19d528(0x2d,0x4e)]['postProcessingSpeed'];}})};}}const Cesium$2=mars3d__namespace['Cesium'];class ParticleSystem{constructor(_0x2e4566,_0x664874,_0x2752bd,_0x52db2a){this['context']=_0x2e4566,_0x664874={..._0x664874};_0x664874['udata']&&_0x664874['vdata']&&(_0x664874[_0x1e6524(0x3ea,0x43c)]={},_0x664874[_0x1e6524(0x3ea,0x43f)]['lon']=_0x664874[_0x4b4b9d(0x1d4,0x211)],_0x664874['dimensions']['lat']=_0x664874['rows'],_0x664874[_0x1e6524(0x3ea,0x391)]['lev']=_0x664874[_0x1e6524(0x30e,0x2c5)]||0x1,_0x664874[_0x1e6524(0x3b2,0x3ed)]={},_0x664874['lon']['min']=_0x664874['xmin'],_0x664874[_0x4b4b9d(0x333,0x2f6)]['max']=_0x664874['xmax'],_0x664874['lat']={},_0x664874['lat'][_0x4b4b9d(0x295,0x216)]=_0x664874['ymin'],_0x664874[_0x4b4b9d(0x1f0,0x278)]['max']=_0x664874[_0x4b4b9d(0x229,0x24b)],_0x664874['lev']={},_0x664874[_0x4b4b9d(0x1d2,0x252)]['min']=_0x664874[_0x1e6524(0x3d6,0x36f)]??0x1,_0x664874[_0x4b4b9d(0x2a6,0x252)]['max']=_0x664874['levmax']??0x1,_0x664874['U']={},_0x664874['U']['array']=new Float32Array(_0x664874[_0x1e6524(0x2d4,0x25c)]),_0x664874['U']['min']=_0x664874['umin']??Math['min'](..._0x664874[_0x4b4b9d(0x2ab,0x218)]),_0x664874['U']['max']=_0x664874['umax']??Math['max'](..._0x664874['udata']),_0x664874['V']={},_0x664874['V']['array']=new Float32Array(_0x664874[_0x4b4b9d(0x305,0x293)]),_0x664874['V']['min']=_0x664874[_0x1e6524(0x390,0x3d3)]??Math['min'](..._0x664874['vdata']),_0x664874['V']['max']=_0x664874['vmax']??Math['max'](..._0x664874[_0x1e6524(0x34f,0x2c7)]));function _0x4b4b9d(_0xf3c56a,_0x3a8886){return _0x5668e7(_0xf3c56a,_0x3a8886-0x45);}this['data']=_0x664874;function _0x1e6524(_0x5c1dc3,_0x89dd17){return _0x244961(_0x5c1dc3-0x58d,_0x89dd17);}this['options']=_0x2752bd,this['viewerParameters']=_0x52db2a,this['particlesComputing']=new ParticlesComputing(this['context'],this[_0x4b4b9d(0x356,0x308)],this['options'],this['viewerParameters']),this[_0x1e6524(0x339,0x3b3)]=new ParticlesRendering(this[_0x4b4b9d(0x3b9,0x335)],this['data'],this[_0x4b4b9d(0x35d,0x2ee)],this[_0x4b4b9d(0x284,0x25a)],this['particlesComputing']);}['canvasResize'](_0x5669bc){this['particlesComputing']['destroyParticlesTextures'](),Object['keys'](this['particlesComputing'][_0xc796c3(0x407,0x3d7)])[_0x5270f1(0x227,0x24d)](_0x2e4673=>{function _0x18d9da(_0x3d0a08,_0x8f5e4a){return _0x5270f1(_0x3d0a08,_0x8f5e4a-0x98);}this['particlesComputing'][_0x18d9da(0x309,0x2d6)][_0x2e4673]['destroy']();}),this['particlesRendering']['textures']['colorTable']['destroy'](),Object[_0xc796c3(0x35b,0x2f5)](this[_0x5270f1(0x223,0x1a8)]['framebuffers'])['forEach'](_0x8920ff=>{function _0x1460f6(_0x1c4ddf,_0x1764d5){return _0xc796c3(_0x1c4ddf,_0x1764d5- -0x1cc);}function _0x254af9(_0x481454,_0x452be0){return _0xc796c3(_0x481454,_0x452be0- -0x541);}this[_0x254af9(-0x24d,-0x200)][_0x1460f6(0x19d,0x16a)][_0x8920ff]['destroy']();}),this[_0xc796c3(0x478,0x3f9)]=_0x5669bc;function _0x5270f1(_0x37c117,_0x433a3e){return _0x244961(_0x433a3e-0x3fc,_0x37c117);}function _0xc796c3(_0x48d8ae,_0x5ec7c1){return _0x5668e7(_0x48d8ae,_0x5ec7c1-0x109);}this[_0x5270f1(0x11c,0x148)]=new ParticlesComputing(this[_0x5270f1(0x1fe,0x260)],this[_0x5270f1(0x2bb,0x233)],this['options'],this['viewerParameters']),this[_0xc796c3(0x2e7,0x341)]=new ParticlesRendering(this[_0xc796c3(0x40b,0x3f9)],this['data'],this[_0x5270f1(0x196,0x219)],this[_0x5270f1(0x124,0x185)],this['particlesComputing']);}[_0x244961(-0x224,-0x252)](){function _0x5db418(_0x18910d,_0x44579a){return _0x5668e7(_0x44579a,_0x18910d- -0x241);}function _0x202e90(_0x286ff1,_0x5e2f9a){return _0x5668e7(_0x5e2f9a,_0x286ff1-0x30e);}const _0x809bd8=new Cesium$2[(_0x5db418(-0x48,0x52))]({'color':new Cesium$2['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2['Pass']['OPAQUE']});Object[_0x5db418(-0x55,-0xb4)](this[_0x202e90(0x546,0x575)]['framebuffers'])['forEach'](_0x8d02c5=>{_0x809bd8['framebuffer']=this[_0x1df507(0x1fa,0x212)][_0x1df507(0x294,0x207)][_0x8d02c5];function _0x1df507(_0x4c8d31,_0x2a1dc6){return _0x202e90(_0x2a1dc6- -0x334,_0x4c8d31);}function _0x174641(_0x377388,_0x454e36){return _0x202e90(_0x454e36- -0x4c2,_0x377388);}_0x809bd8['execute'](this['context']);});}[_0x5668e7(0x253,0x1c0)](_0x86d06a){this['clearFramebuffers']();function _0x4cfecf(_0x4c2bd6,_0x458d03){return _0x5668e7(_0x4c2bd6,_0x458d03- -0x379);}this[_0x3f3f53(0x326,0x2b7)]['destroyParticlesTextures'](),this['particlesComputing'][_0x3f3f53(0x364,0x305)](this['context'],this['options'],this[_0x3f3f53(0x363,0x2d6)]);function _0x3f3f53(_0x19b5f9,_0x57cfb9){return _0x244961(_0x19b5f9-0x5da,_0x57cfb9);}if(_0x86d06a){var _0x328542;const _0x23c856=this['particlesRendering'][_0x3f3f53(0x3b8,0x384)](this['options']);this[_0x3f3f53(0x386,0x380)][_0x3f3f53(0x377,0x33a)]['segments'][_0x3f3f53(0x398,0x383)]=_0x23c856;const _0x5bb65b=Cesium$2[_0x4cfecf(-0x1a7,-0x183)]['fromGeometry']({'context':this['context'],'geometry':_0x23c856,'attributeLocations':this['particlesRendering'][_0x3f3f53(0x377,0x32f)]['segments'][_0x3f3f53(0x392,0x37f)],'bufferUsage':Cesium$2['BufferUsage']['STATIC_DRAW']});(_0x328542=this['particlesRendering']['primitives'])!==null&&_0x328542!==void 0x0&&(_0x328542=_0x328542['segments'])!==null&&_0x328542!==void 0x0&&_0x328542['commandToExecute']&&(this['particlesRendering']['primitives'][_0x3f3f53(0x3d1,0x356)][_0x3f3f53(0x38a,0x39f)][_0x4cfecf(-0x13a,-0x140)]=_0x5bb65b);}}['setOptions'](_0x3b985b){function _0x2b3f78(_0x367d46,_0x235f66){return _0x244961(_0x235f66-0x308,_0x367d46);}let _0x13d416=![];this['options'][_0x2b3f78(0x1a4,0x10d)]!==_0x3b985b[_0x2b3f78(0x18c,0x10d)]&&(_0x13d416=!![]);function _0x49df9b(_0xaa4b7b,_0x458b3a){return _0x244961(_0xaa4b7b-0x1c6,_0x458b3a);}Object[_0x49df9b(-0xda,-0x8a)](_0x3b985b)[_0x49df9b(0x17,0x15)](_0x53c394=>{function _0x4984e2(_0x30c390,_0x4b09a6){return _0x49df9b(_0x30c390-0x2ab,_0x4b09a6);}this[_0x4984e2(0x28e,0x2d2)][_0x53c394]=_0x3b985b[_0x53c394];}),this[_0x2b3f78(0xa5,0x3c)](_0x13d416);}[_0x244961(-0x25d,-0x1d5)](_0x48ea63){Object['keys'](_0x48ea63)['forEach'](_0x593dca=>{function _0x5caf7d(_0x3caa3,_0x43be09){return _0x2479(_0x43be09-0x196,_0x3caa3);}this[_0x5caf7d(0x37f,0x2ee)][_0x593dca]=_0x48ea63[_0x593dca];}),this['refreshParticles'](![]);}[_0x244961(-0x1f3,-0x28a)](){clearTimeout(this[_0x4b31b3(-0x10b,-0x175)]),this[_0x50c373(0x419,0x491)][_0x4b31b3(-0x14f,-0x171)](),Object['keys'](this[_0x4b31b3(-0x198,-0x1ce)][_0x4b31b3(-0x9d,-0xd8)])['forEach'](_0x2ac26e=>{this['particlesComputing']['windTextures'][_0x2ac26e]['destroy']();}),this['particlesRendering']['textures'][_0x50c373(0x480,0x499)]['destroy']();function _0x50c373(_0x1e499c,_0x200276){return _0x5668e7(_0x1e499c,_0x200276-0x2b9);}Object['keys'](this['particlesRendering']['framebuffers'])[_0x4b31b3(-0x79,-0xc9)](_0x40ad9c=>{this['particlesRendering']['framebuffers'][_0x40ad9c]['destroy']();});function _0x4b31b3(_0x17d16e,_0x240d43){return _0x5668e7(_0x17d16e,_0x240d43- -0x3a6);}for(const _0x493333 in this){delete this[_0x493333];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x5668e7(0x2c7,0x2b2)],_0xb7ed88={};_0xb7ed88['particlesNumber']=0x1000,_0xb7ed88['fixedHeight']=0x0,_0xb7ed88['fadeOpacity']=0.996,_0xb7ed88[_0x5668e7(0x2fe,0x2cf)]=0.003,_0xb7ed88['dropRateBump']=0.01,_0xb7ed88[_0x244961(-0x283,-0x260)]=0.5,_0xb7ed88['lineWidth']=0x2,_0xb7ed88['colors']=['rgb(206,255,255)'];const DEF_OPTIONS=_0xb7ed88;function _0x2479(_0x35db58,_0x17c76f){const _0x2af965=_0x2af9();return _0x2479=function(_0x247977,_0x145b28){_0x247977=_0x247977-0x101;let _0x515cc5=_0x2af965[_0x247977];return _0x515cc5;},_0x2479(_0x35db58,_0x17c76f);}class WindLayer extends BaseLayer$1{constructor(_0x9ee087={}){_0x9ee087={...DEF_OPTIONS,..._0x9ee087},super(_0x9ee087),this['_setOptionsHook'](_0x9ee087);}get[_0x244961(-0x244,-0x1aa)](){function _0x23a348(_0x2de2aa,_0x2f2591){return _0x5668e7(_0x2f2591,_0x2de2aa-0x15a);}return this[_0x23a348(0x383,0x3e9)];}get['data'](){function _0x3d640e(_0x3dcdee,_0x1c6591){return _0x5668e7(_0x1c6591,_0x3dcdee- -0xb9);}return this[_0x3d640e(0x125,0x14a)];}set['data'](_0x2c3bca){function _0x5765be(_0x1d42db,_0x3546b8){return _0x244961(_0x1d42db-0x4fd,_0x3546b8);}this[_0x5765be(0x30e,0x391)](_0x2c3bca);}get[_0x244961(-0x2cb,-0x2c0)](){return this['options']['colors'];}set['colors'](_0x288cd0){this['options']['colors']=_0x288cd0;function _0x596140(_0x5a6ee9,_0x1c478d){return _0x5668e7(_0x5a6ee9,_0x1c478d- -0x238);}function _0x30093f(_0x4ddd4,_0x1d57cc){return _0x5668e7(_0x1d57cc,_0x4ddd4-0x72);}if(this['particleSystem']){const _0x3b5348={};_0x3b5348['colors']=_0x288cd0,this[_0x30093f(0x23c,0x1fb)][_0x30093f(0x306,0x2d5)](_0x3b5348);}this['resize']();}['_mountedHook'](){}['_addedHook'](){this['scene']=this['_map']['scene'],this['camera']=this[_0x13cf2f(0x25a,0x1fd)][_0x42cab2(0x3fb,0x409)],this[_0x13cf2f(0x19c,0x163)]=new Cesium$1[(_0x13cf2f(0x220,0x1ca))]();function _0x42cab2(_0x438b56,_0x2a4eec){return _0x5668e7(_0x438b56,_0x2a4eec-0x1e8);}this['_map'][_0x13cf2f(0x140,0x1da)][_0x42cab2(0x3da,0x411)]['add'](this['primitives']),this[_0x42cab2(0x37b,0x3fd)]={'lonRange':new Cesium$1['Cartesian2'](),'latRange':new Cesium$1[(_0x42cab2(0x4ca,0x4c7))](),'pixelSize':0x0},this[_0x42cab2(0x3e2,0x3e9)]=new Cesium$1[(_0x13cf2f(0x193,0x16e))](Cesium$1[_0x13cf2f(0x1ff,0x22e)][_0x13cf2f(0x186,0xf5)],0.99*0x615299);function _0x13cf2f(_0x2c7a36,_0x1c491a){return _0x5668e7(_0x1c491a,_0x2c7a36- -0x8d);}this['updateViewerParameters'](),window[_0x13cf2f(0x150,0x152)]('resize',this['resize'][_0x42cab2(0x35c,0x3b8)](this),![]),this[_0x13cf2f(0x152,0x11f)]=![],this['mouse_move']=![],this['_map']['on'](mars3d__namespace['EventType'][_0x13cf2f(0x200,0x290)],this['_onMapWhellEvent'],this),this[_0x42cab2(0x52f,0x4cf)]['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this[_0x13cf2f(0x25a,0x2e5)]['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x13cf2f(0x253,0x243)],this['_onMouseMoveEvent'],this),this['_data']&&this['setData'](this[_0x42cab2(0x411,0x3c6)]);}[_0x244961(-0x1d1,-0x1d2)](){function _0x597288(_0x1ed25f,_0x4f585c){return _0x5668e7(_0x1ed25f,_0x4f585c- -0xf0);}window['removeEventListener']('resize',this[_0x4498aa(0x232,0x1b2)]),this['_map']['off'](mars3d__namespace[_0x597288(0xfb,0x13c)]['preRender'],this[_0x597288(0x23f,0x1b1)],this),this[_0x4498aa(0x2ed,0x273)]['off'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x4498aa(0x289,0x273)][_0x597288(0x198,0x110)](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map'][_0x597288(0xac,0x110)](mars3d__namespace[_0x4498aa(0x181,0x1b8)][_0x597288(0xe7,0x15f)],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x4498aa(_0x3536ca,_0x46a248){return _0x5668e7(_0x3536ca,_0x46a248- -0x74);}this[_0x4498aa(0x24f,0x1b5)][_0x597288(0x197,0x128)](),this[_0x597288(0x1c3,0x1f7)]['scene']['primitives']['remove'](this[_0x4498aa(0x1b4,0x1b5)]);}[_0x5668e7(0x196,0x226)](){if(!this['show']||!this['particleSystem'])return;function _0x5a75ff(_0x5757c0,_0x13db0d){return _0x244961(_0x5757c0-0x500,_0x13db0d);}function _0x2141b6(_0x1c33da,_0x592f55){return _0x5668e7(_0x1c33da,_0x592f55-0x118);}this[_0x5a75ff(0x29d,0x208)]['show']=![],this[_0x2141b6(0x37e,0x341)][_0x2141b6(0x2e3,0x330)](),this['_map']['once'](mars3d__namespace[_0x2141b6(0x386,0x344)]['preRender'],this['_onMap_preRenderEvent'],this);}['_onMap_preRenderEvent'](_0x40241f){function _0x2f86cb(_0x4b4b0d,_0x55837b){return _0x244961(_0x55837b-0x1c3,_0x4b4b0d);}this[_0x9d37bc(-0x271,-0x248)]['canvasResize'](this['scene']['context']);function _0x9d37bc(_0x46edd2,_0x2d622e){return _0x244961(_0x2d622e-0x7a,_0x46edd2);}this['addPrimitives'](),this[_0x2f86cb(-0x8a,-0xa0)][_0x2f86cb(-0xf0,-0xe1)]=!![];}[_0x5668e7(0x1c6,0x1d5)](_0x46b63e){clearTimeout(this[_0x3b18a9(0x9c,0x6f)]);function _0x3b18a9(_0x517b57,_0x273df5){return _0x244961(_0x273df5-0x26d,_0x517b57);}function _0x1a7b1c(_0x399737,_0x43df20){return _0x244961(_0x43df20-0x2dd,_0x399737);}if(!this['show']||!this[_0x1a7b1c(-0x36,0x1b)])return;this['primitives']['show']=![],this[_0x1a7b1c(0x6e,0xdf)]=setTimeout(()=>{function _0x1fb197(_0x4c481c,_0x57dc1d){return _0x3b18a9(_0x57dc1d,_0x4c481c- -0x20e);}if(!this['show'])return;this[_0x1fb197(-0x162,-0x1d0)]();},0xc8);}[_0x5668e7(0x300,0x29c)](_0x35a035){this['mouse_down']=!![];}['_onMouseMoveEvent'](_0x43d447){function _0x38af06(_0x2d7484,_0x4b1eb7){return _0x244961(_0x4b1eb7-0x34b,_0x2d7484);}if(!this[_0x38af06(0xf8,0xa7)]||!this['particleSystem'])return;function _0x5a7673(_0x4cbd4d,_0x502656){return _0x5668e7(_0x4cbd4d,_0x502656-0x70);}this[_0x38af06(0x86,0x9e)]&&(this[_0x38af06(0x10d,0xe8)][_0x38af06(0x12a,0xa7)]=![],this[_0x38af06(0x18c,0xf9)]=!![]);}[_0x5668e7(0x367,0x2d4)](_0x50685b){if(!this['show']||!this['particleSystem'])return;function _0x3f353b(_0x1c8f44,_0x5ca683){return _0x5668e7(_0x1c8f44,_0x5ca683- -0x3c9);}this[_0x2f30fc(0xf0,0x17c)]&&this[_0x3f353b(-0x152,-0x18f)]&&this[_0x3f353b(-0x100,-0xfe)]();this['primitives']['show']=!![];function _0x2f30fc(_0xc4e546,_0x5c3a0a){return _0x5668e7(_0x5c3a0a,_0xc4e546- -0xef);}this[_0x2f30fc(0xf0,0x9f)]=![],this[_0x2f30fc(0x14b,0xee)]=![];}[_0x244961(-0x1c1,-0x161)](){if(!this['_map']||!this['show'])return;function _0x2705e5(_0x58218c,_0x55362d){return _0x244961(_0x55362d-0x568,_0x58218c);}function _0x398b4f(_0x5d86d9,_0x1b1ae3){return _0x5668e7(_0x5d86d9,_0x1b1ae3- -0x2e4);}this[_0x2705e5(0x2aa,0x33d)](),this[_0x2705e5(0x245,0x2a6)]['applyViewerParameters'](this['viewerParameters']),this['primitives']['show']=!![];}['setData'](_0x435e42){this[_0x216fc1(0x273,0x2d3)]=_0x435e42;function _0x216fc1(_0xa7f25d,_0x396f3b){return _0x5668e7(_0xa7f25d,_0x396f3b-0xf5);}function _0x1e8377(_0x4507d2,_0x322844){return _0x244961(_0x322844-0x3a4,_0x4507d2);}this[_0x1e8377(0x14d,0xe2)]&&this['particleSystem']['destroy'](),this[_0x216fc1(0x248,0x2bf)]=new ParticleSystem(this['scene'][_0x216fc1(0x45a,0x3e5)],_0x435e42,this['getOptions'](),this['viewerParameters']),this[_0x216fc1(0x2b9,0x306)]();}[_0x5668e7(0x1b2,0x23f)](_0x1cc6b1,_0x69e247){function _0x5ae271(_0xb43f6e,_0x472c13){return _0x5668e7(_0x472c13,_0xb43f6e-0x106);}if(_0x1cc6b1)for(const _0x269488 in _0x1cc6b1){this[_0x269488]=_0x1cc6b1[_0x269488];}this['particleSystem']&&this[_0x5ae271(0x2d0,0x2a8)]['setOptions'](this['getOptions']());}[_0x5668e7(0x265,0x252)](){const _0x58ce3a=Math['ceil'](Math['sqrt'](this[_0x5ebfdb(0x39f,0x3a6)]));this[_0x3e031c(0x2de,0x302)]=_0x58ce3a*_0x58ce3a;const _0x307ae8={};_0x307ae8[_0x3e031c(0x397,0x314)]=_0x58ce3a,_0x307ae8[_0x5ebfdb(0x4c8,0x46e)]=this[_0x5ebfdb(0x35b,0x3a6)],_0x307ae8[_0x3e031c(0x30d,0x37f)]=this['fixedHeight'];function _0x3e031c(_0x7a59fa,_0x2c3d02){return _0x244961(_0x2c3d02-0x5c5,_0x7a59fa);}_0x307ae8[_0x3e031c(0x2e9,0x344)]=this['fadeOpacity'],_0x307ae8[_0x3e031c(0x373,0x408)]=this['dropRate'];function _0x5ebfdb(_0x262f08,_0xdec339){return _0x5668e7(_0x262f08,_0xdec339-0x1dd);}return _0x307ae8['dropRateBump']=this['dropRateBump'],_0x307ae8['speedFactor']=this[_0x5ebfdb(0x3ce,0x3e6)],_0x307ae8['lineWidth']=this[_0x3e031c(0x340,0x37e)],_0x307ae8['colors']=this['colors'],_0x307ae8;}['addPrimitives'](){this[_0x2b8e07(0x12c,0x1b7)][_0x2b8e07(0x117,0x193)](this['particleSystem']['particlesComputing'][_0x53cc20(0x202,0x235)][_0x2b8e07(0x1b7,0x232)]),this[_0x53cc20(0x2b8,0x235)]['add'](this['particleSystem'][_0x2b8e07(0xdb,0x7f)]['primitives']['updateSpeed']);function _0x2b8e07(_0x2296bb,_0x10fe60){return _0x5668e7(_0x10fe60,_0x2296bb- -0xfd);}this['primitives'][_0x2b8e07(0x117,0x17f)](this[_0x2b8e07(0xcd,0x11d)]['particlesComputing']['primitives']['updatePosition']),this[_0x2b8e07(0x12c,0x165)]['add'](this[_0x2b8e07(0xcd,0x8c)]['particlesComputing']['primitives']['postProcessingPosition']),this[_0x2b8e07(0x12c,0x1ba)]['add'](this[_0x2b8e07(0xcd,0x77)]['particlesComputing'][_0x53cc20(0x259,0x235)][_0x53cc20(0x25a,0x28a)]),this['primitives'][_0x2b8e07(0x117,0x188)](this['particleSystem']['particlesRendering']['primitives']['segments']),this['primitives']['add'](this[_0x2b8e07(0xcd,0x15c)][_0x2b8e07(0x13b,0x10a)]['primitives'][_0x2b8e07(0x1e4,0x240)]);function _0x53cc20(_0x297a26,_0x579d67){return _0x244961(_0x579d67-0x498,_0x297a26);}this[_0x2b8e07(0x12c,0xa0)]['add'](this[_0x53cc20(0x16a,0x1d6)][_0x2b8e07(0x13b,0x106)]['primitives'][_0x2b8e07(0xf4,0x110)]);}['updateViewerParameters'](){let _0x2ccadb=this[_0x296830(0x169,0x127)][_0x2636a6(-0xad,-0xf0)](this[_0x296830(0x3b,0xd3)][_0x296830(0xd3,0xf0)][_0x296830(0x271,0x1f4)]);function _0x2636a6(_0x546eec,_0x2ed9c6){return _0x244961(_0x546eec-0x16e,_0x2ed9c6);}if(!_0x2ccadb){const _0x1bd07c=this[_0x296830(0x265,0x1ed)]['getExtent']();_0x2ccadb=Cesium$1[_0x296830(0x159,0x115)]['fromDegrees'](_0x1bd07c[_0x2636a6(-0x80,-0x2c)],_0x1bd07c['ymin'],_0x1bd07c['xmax'],_0x1bd07c['ymax']);}const _0x473530=Util[_0x296830(0x1a2,0x18a)](_0x2ccadb);this[_0x2636a6(-0x109,-0x19c)]['lonRange']['x']=_0x473530['lon']['min'],this['viewerParameters'][_0x296830(0x120,0xe9)]['y']=_0x473530['lon']['max'],this[_0x296830(0x121,0x11b)][_0x2636a6(-0x89,-0x3b)]['x']=_0x473530['lat'][_0x2636a6(-0x14d,-0x152)];function _0x296830(_0x31ba58,_0x1ea2ca){return _0x5668e7(_0x31ba58,_0x1ea2ca- -0xfa);}this[_0x296830(0x83,0x11b)][_0x2636a6(-0x89,-0xe7)]['y']=_0x473530['lat'][_0x296830(0x168,0x187)];const _0x2e4397=this[_0x296830(0xdb,0x127)][_0x296830(0x14a,0x143)](this[_0x2636a6(-0x11d,-0x11e)],this[_0x2636a6(-0x151,-0x1e7)]['drawingBufferWidth'],this[_0x2636a6(-0x151,-0x110)]['drawingBufferHeight']);_0x2e4397>0x0&&(this['viewerParameters'][_0x2636a6(-0x12b,-0xe6)]=_0x2e4397);}}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace[_0x244961(-0x244,-0x2a7)][_0x5668e7(0x1b4,0x204)]=WindLayer;function _0x244961(_0x1e7eec,_0x97c3db){return _0x2479(_0x1e7eec- -0x3cf,_0x97c3db);}class CanvasParticle{constructor(){function _0x5ccc27(_0x5ad6be,_0x6011fa){return _0x244961(_0x6011fa-0x74e,_0x5ad6be);}function _0x26c6f1(_0x3b11b7,_0x5f34dd){return _0x244961(_0x5f34dd-0x4d6,_0x3b11b7);}this['lng']=null,this[_0x26c6f1(0x290,0x27d)]=null,this[_0x26c6f1(0x2a3,0x218)]=null,this['tlat']=null,this['age']=null,this['speed']=null;}[_0x244961(-0x1f3,-0x244)](){for(const _0x4d8cef in this){delete this[_0x4d8cef];}}}class CanvasWindField{constructor(_0x239c7c){function _0x538fc5(_0x8527e4,_0x356bd2){return _0x244961(_0x356bd2-0x2ab,_0x8527e4);}this[_0x538fc5(0x13f,0xb3)](_0x239c7c);}get['speedRate'](){function _0x102527(_0x408de7,_0xf52177){return _0x244961(_0xf52177-0x725,_0x408de7);}return this[_0x102527(0x56c,0x4d7)];}set['speedRate'](_0x30ecb8){this['_speedRate']=(0x64-(_0x30ecb8>0x63?0x63:_0x30ecb8))*0x64;function _0x248ead(_0x4bd4cf,_0x1e1ccd){return _0x5668e7(_0x4bd4cf,_0x1e1ccd- -0x2bd);}function _0x185b15(_0x2548c6,_0x24ca6a){return _0x5668e7(_0x24ca6a,_0x2548c6-0x2a7);}this[_0x248ead(-0x2c,0x3)]=[(this['xmax']-this['xmin'])/this['_speedRate'],(this['ymax']-this['ymin'])/this[_0x185b15(0x4e5,0x549)]];}get['maxAge'](){function _0x3ab1b5(_0x45aed2,_0x39a51f){return _0x5668e7(_0x39a51f,_0x45aed2-0x4b);}return this[_0x3ab1b5(0x310,0x34b)];}set[_0x5668e7(0x2b7,0x21f)](_0x440bef){function _0x3c6113(_0x149f17,_0xe32b00){return _0x244961(_0xe32b00-0x5ec,_0x149f17);}this[_0x3c6113(0x38b,0x425)]=_0x440bef;}[_0x244961(-0x1f8,-0x197)](_0x98ae7){function _0x847f3e(_0x4aa41d,_0x40a4ec){return _0x5668e7(_0x4aa41d,_0x40a4ec- -0x492);}function _0x490b63(_0x22513f,_0x79e488){return _0x244961(_0x79e488-0x7ae,_0x22513f);}this['options']=_0x98ae7,this[_0x847f3e(-0x20f,-0x273)]=_0x98ae7['maxAge']||0x78,this['speedRate']=_0x98ae7[_0x847f3e(-0x2b4,-0x2a3)]||0x32,this['particles']=[];const _0x20d9d4=_0x98ae7['particlesNumber']||0x1000;for(let _0xa993f9=0x0;_0xa993f9<_0x20d9d4;_0xa993f9++){const _0x26b311=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x26b311);}}['setDate'](_0xd29b8b){function _0x10c003(_0xd00052,_0x2454f3){return _0x244961(_0xd00052- -0x13,_0x2454f3);}this['rows']=_0xd29b8b['rows'],this['cols']=_0xd29b8b['cols'],this[_0x27d39b(-0x213,-0x1a3)]=_0xd29b8b[_0x27d39b(-0x216,-0x1a3)],this['xmax']=_0xd29b8b[_0x10c003(-0x2cd,-0x26f)],this['ymin']=_0xd29b8b['ymin'],this['ymax']=_0xd29b8b[_0x27d39b(-0x1a7,-0x23b)],this[_0x10c003(-0x2bb,-0x270)]=[];const _0x398f5a=_0xd29b8b['udata'],_0xcd8b86=_0xd29b8b['vdata'];let _0x290a91=![];_0x398f5a['length']===this['rows']&&_0x398f5a[0x0]['length']===this[_0x27d39b(-0x301,-0x275)]&&(_0x290a91=!![]);let _0x38cdd0=0x0;function _0x27d39b(_0x12a368,_0x214a23){return _0x244961(_0x214a23-0x4b,_0x12a368);}let _0xe3f234=null,_0x3587c7=null;for(let _0x38d394=0x0;_0x38d394<this['rows'];_0x38d394++){_0xe3f234=[];for(let _0x2f891e=0x0;_0x2f891e<this['cols'];_0x2f891e++,_0x38cdd0++){_0x290a91?_0x3587c7=this['_calcUV'](_0x398f5a[_0x38d394][_0x2f891e],_0xcd8b86[_0x38d394][_0x2f891e]):_0x3587c7=this['_calcUV'](_0x398f5a[_0x38cdd0],_0xcd8b86[_0x38cdd0]),_0xe3f234[_0x10c003(-0x2c9,-0x2f0)](_0x3587c7);}this['grid'][_0x27d39b(-0x2df,-0x26b)](_0xe3f234);}this[_0x27d39b(-0x109,-0x198)][_0x10c003(-0x2ad,-0x25f)]&&this['grid']['reverse']();}[_0x5668e7(0x202,0x28b)](){delete this[_0x5b920c(0x31,0xa5)];function _0x186404(_0x36f333,_0x5ddfd7){return _0x5668e7(_0x36f333,_0x5ddfd7- -0x7);}delete this['cols'],delete this['xmin'],delete this[_0x5b920c(0x29,0x36)];function _0x5b920c(_0x1cc729,_0x302de6){return _0x244961(_0x302de6-0x2f0,_0x1cc729);}delete this[_0x186404(0x2de,0x2d7)],delete this['ymax'],delete this['grid'],delete this['particles'];}['toGridXY'](_0x51b350,_0x3a7743){function _0x4d4974(_0x3ac462,_0x2fe069){return _0x5668e7(_0x3ac462,_0x2fe069-0x144);}const _0x5971c6=(_0x51b350-this['xmin'])/(this[_0x4d4974(0x329,0x316)]-this['xmin'])*(this[_0x4a2397(-0x39,-0xa3)]-0x1);function _0x4a2397(_0x2be4b5,_0x2ad136){return _0x244961(_0x2be4b5-0x287,_0x2ad136);}const _0x79d8f3=(this[_0x4a2397(0x1,0x2e)]-_0x3a7743)/(this[_0x4a2397(0x1,-0x2e)]-this[_0x4d4974(0x4a1,0x422)])*(this[_0x4d4974(0x416,0x385)]-0x1);return[_0x5971c6,_0x79d8f3];}[_0x244961(-0x2a1,-0x317)](_0x91e4d8,_0x2e4790){if(_0x91e4d8<0x0||_0x91e4d8>=this['cols']||_0x2e4790>=this[_0x3a6f87(0x77,0xdb)])return[0x0,0x0,0x0];const _0x951404=Math[_0x3a6f87(0x39,0x74)](_0x91e4d8);function _0x3a6f87(_0x19cdd0,_0x3026ff){return _0x244961(_0x3026ff-0x326,_0x19cdd0);}const _0x2f126f=Math[_0x3a6f87(0xfa,0x74)](_0x2e4790);if(_0x951404===_0x91e4d8&&_0x2f126f===_0x2e4790)return this['grid'][_0x2e4790][_0x91e4d8];const _0x531ca9=_0x951404+0x1;function _0x386cae(_0x9e81f7,_0x4c2611){return _0x244961(_0x9e81f7-0x386,_0x4c2611);}const _0x42856b=_0x2f126f+0x1,_0x14b3a9=this['getUVByXY'](_0x951404,_0x2f126f),_0x25b2c8=this['getUVByXY'](_0x531ca9,_0x2f126f),_0x263f91=this['getUVByXY'](_0x951404,_0x42856b),_0x383e4a=this['getUVByXY'](_0x531ca9,_0x42856b);let _0xd38c1e=null;try{_0xd38c1e=this['_bilinearInterpolation'](_0x91e4d8-_0x951404,_0x2e4790-_0x2f126f,_0x14b3a9,_0x25b2c8,_0x263f91,_0x383e4a);}catch(_0x26aaa8){console['log'](_0x91e4d8,_0x2e4790);}return _0xd38c1e;}[_0x5668e7(0x1db,0x1dc)](_0x27cf6e,_0x35a105,_0x4b46ec,_0xb59662,_0xef010a,_0xd8685d){const _0x3b4c82=0x1-_0x27cf6e,_0x5ec324=0x1-_0x35a105,_0xf8671e=_0x3b4c82*_0x5ec324,_0x4e9cee=_0x27cf6e*_0x5ec324,_0x4b02d9=_0x3b4c82*_0x35a105,_0x2ba292=_0x27cf6e*_0x35a105,_0xb7c95d=_0x4b46ec[0x0]*_0xf8671e+_0xb59662[0x0]*_0x4e9cee+_0xef010a[0x0]*_0x4b02d9+_0xd8685d[0x0]*_0x2ba292,_0x25da4d=_0x4b46ec[0x1]*_0xf8671e+_0xb59662[0x1]*_0x4e9cee+_0xef010a[0x1]*_0x4b02d9+_0xd8685d[0x1]*_0x2ba292;return this['_calcUV'](_0xb7c95d,_0x25da4d);}[_0x244961(-0x1dc,-0x19a)](_0x1d2d4c,_0x4ad5d6){function _0x16cc75(_0x27b3b3,_0x4e288a){return _0x5668e7(_0x27b3b3,_0x4e288a-0x117);}return[+_0x1d2d4c,+_0x4ad5d6,Math[_0x16cc75(0x3a0,0x3c1)](_0x1d2d4c*_0x1d2d4c+_0x4ad5d6*_0x4ad5d6)];}['getUVByPoint'](_0xaf94e1,_0x1355b7){if(!this['isInExtent'](_0xaf94e1,_0x1355b7))return null;const _0x405c82=this['toGridXY'](_0xaf94e1,_0x1355b7),_0x167598=this['getUVByXY'](_0x405c82[0x0],_0x405c82[0x1]);return _0x167598;}['isInExtent'](_0x5aeb6e,_0x36441d){function _0x253d63(_0x105f4a,_0x3041d6){return _0x5668e7(_0x105f4a,_0x3041d6- -0x367);}return _0x5aeb6e>=this[_0x253d63(-0xa2,-0xc9)]&&_0x5aeb6e<=this['xmax']&&_0x36441d>=this['ymin']&&_0x36441d<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x1c5e9c=fRandomByfloat(this['xmin'],this['xmax']),_0x4d477d=fRandomByfloat(this['ymin'],this['ymax']);function _0x241021(_0x278ccc,_0x3eed56){return _0x5668e7(_0x3eed56,_0x278ccc-0x64);}const _0x22fc65={};return _0x22fc65[_0x241021(0x297,0x2c7)]=_0x4d477d,_0x22fc65['lng']=_0x1c5e9c,_0x22fc65;}['getParticles'](){let _0x23387e,_0x31ffe9,_0x1989fb;for(let _0xd84dad=0x0,_0x11cad2=this['particles'][_0x2fd7bc(0x3a,0x3a)];_0xd84dad<_0x11cad2;_0xd84dad++){let _0x2cdf5d=this['particles'][_0xd84dad];_0x2cdf5d['age']<=0x0&&(_0x2cdf5d=this['_randomParticle'](_0x2cdf5d));if(_0x2cdf5d['age']>0x0){const _0x60321a=_0x2cdf5d['tlng'],_0x583a89=_0x2cdf5d['tlat'];_0x1989fb=this[_0x2fd7bc(0xb0,0xbf)](_0x60321a,_0x583a89),_0x1989fb?(_0x23387e=_0x60321a+this[_0x2fd7bc(0x81,0x57)][0x0]*_0x1989fb[0x0],_0x31ffe9=_0x583a89+this['_calc_speedRate'][0x1]*_0x1989fb[0x1],_0x2cdf5d['lng']=_0x60321a,_0x2cdf5d[_0x3c0051(0x236,0x287)]=_0x583a89,_0x2cdf5d['tlng']=_0x23387e,_0x2cdf5d[_0x2fd7bc(-0x24,-0x56)]=_0x31ffe9,_0x2cdf5d[_0x3c0051(0x234,0x2ad)]=_0x1989fb[0x2],_0x2cdf5d['age']--):_0x2cdf5d['age']=0x0;}}function _0x2fd7bc(_0x16347e,_0x201216){return _0x5668e7(_0x201216,_0x16347e- -0x23f);}function _0x3c0051(_0x51bc3d,_0x29aeb7){return _0x5668e7(_0x51bc3d,_0x29aeb7-0x54);}return this[_0x3c0051(0x1cd,0x244)];}['_randomParticle'](_0x38a979){let _0x29d8ea,_0x5905e1;for(let _0x10eb23=0x0;_0x10eb23<0x1e;_0x10eb23++){_0x29d8ea=this['getRandomLatLng'](),_0x5905e1=this[_0x12152f(-0x60,-0x7)](_0x29d8ea['lng'],_0x29d8ea['lat']);if(_0x5905e1&&_0x5905e1[0x2]>0x0)break;}if(!_0x5905e1)return _0x38a979;function _0x12152f(_0x4d536c,_0x1cce22){return _0x5668e7(_0x4d536c,_0x1cce22- -0x2f6);}const _0x24bc4c=_0x29d8ea['lng']+this[_0x12152f(-0xa4,-0x36)][0x0]*_0x5905e1[0x0],_0x13a084=_0x29d8ea[_0x2c26fa(0x2d0,0x2e1)]+this['_calc_speedRate'][0x1]*_0x5905e1[0x1];_0x38a979[_0x12152f(-0xb4,-0x7b)]=_0x29d8ea[_0x12152f(-0x16,-0x7b)],_0x38a979[_0x12152f(-0x4d,-0xc3)]=_0x29d8ea['lat'],_0x38a979['tlng']=_0x24bc4c,_0x38a979[_0x2c26fa(0x27a,0x2c9)]=_0x13a084;function _0x2c26fa(_0x175d23,_0xfce057){return _0x5668e7(_0x175d23,_0xfce057-0xae);}return _0x38a979[_0x12152f(-0x2e,-0xb)]=Math[_0x2c26fa(0x3ae,0x328)](Math['random']()*this['maxAge']),_0x38a979['speed']=_0x5905e1[0x2],_0x38a979;}['destroy'](){for(const _0x35aa7e in this){delete this[_0x35aa7e];}}}function fRandomByfloat(_0x1c483a,_0x130d7d){function _0xe1f356(_0x437d23,_0x54d84c){return _0x5668e7(_0x437d23,_0x54d84c-0x3b);}return _0x1c483a+Math[_0xe1f356(0x1df,0x239)]()*(_0x130d7d-_0x1c483a);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x5668e7(0x312,0x2b2)];class CanvasWindLayer extends BaseLayer{constructor(_0x101c2d={}){function _0x3a150c(_0x4d2c4b,_0x250f40){return _0x5668e7(_0x4d2c4b,_0x250f40- -0x414);}super(_0x101c2d),this['_setOptionsHook'](_0x101c2d);function _0x253f91(_0x1588d4,_0x34048d){return _0x244961(_0x1588d4-0x2a4,_0x34048d);}this['canvas']=null,_0x101c2d['colors']&&_0x101c2d[_0x253f91(0xd9,0x11c)]&&(this[_0x253f91(0x3a,0xcf)]=new mars3d__namespace[(_0x253f91(0xb2,0x3d))](_0x101c2d));}[_0x5668e7(0x224,0x23f)](_0x7c7581,_0x51295f){function _0x4d4e7f(_0x36fea4,_0xb615b2){return _0x244961(_0xb615b2-0x196,_0x36fea4);}this['frameTime']=0x3e8/(_0x7c7581[_0x92e5a1(0x47e,0x444)]||0xa);function _0x92e5a1(_0x19d56c,_0x382f18){return _0x244961(_0x382f18-0x609,_0x19d56c);}this['_pointerEvents']=this['options']['pointerEvents']??![],this[_0x4d4e7f(-0x65,-0x25)]=_0x7c7581[_0x92e5a1(0x3c7,0x44e)]||_0x92e5a1(0x458,0x445),this[_0x4d4e7f(-0x83,-0xb1)]=_0x7c7581['lineWidth']||0x1,this[_0x4d4e7f(-0x8d,-0xe6)]=_0x7c7581[_0x4d4e7f(-0x12c,-0xe6)]??0x0,this[_0x92e5a1(0x308,0x36f)]=_0x7c7581[_0x92e5a1(0x3aa,0x36f)]??![],this['windField']&&this[_0x92e5a1(0x378,0x39a)][_0x92e5a1(0x49f,0x411)](_0x7c7581);}get['layer'](){function _0x1a9fad(_0x24157d,_0x20fe6b){return _0x244961(_0x20fe6b-0x686,_0x24157d);}return this[_0x1a9fad(0x36c,0x3bf)];}get['canvasWidth'](){function _0x48de1d(_0x492270,_0x4184b7){return _0x5668e7(_0x4184b7,_0x492270-0x21);}return this['_map']['scene']['canvas'][_0x48de1d(0x2e7,0x29b)];}get['canvasHeight'](){function _0x40f37f(_0x303870,_0xfdd323){return _0x5668e7(_0xfdd323,_0x303870- -0x14f);}function _0x1ccc5b(_0x478a03,_0x1b48ad){return _0x244961(_0x1b48ad-0x5a4,_0x478a03);}return this[_0x1ccc5b(0x417,0x3ff)]['scene'][_0x40f37f(0x76,0xf)][_0x1ccc5b(0x350,0x3cb)];}get[_0x5668e7(0x338,0x2d2)](){function _0x4031f6(_0x5f1a27,_0x5a6a04){return _0x5668e7(_0x5a6a04,_0x5f1a27- -0x2af);}return this[_0x4031f6(-0xec,-0x14b)];}set[_0x5668e7(0x349,0x2d2)](_0x360b33){function _0x40ba6b(_0x20a0bd,_0x440da2){return _0x5668e7(_0x440da2,_0x20a0bd-0x1b8);}this[_0x40ba6b(0x37b,0x353)]=_0x360b33;if(!this[_0x210470(0x47,0x58)])return;function _0x210470(_0x36284f,_0xad1cbe){return _0x5668e7(_0x36284f,_0xad1cbe- -0x16d);}_0x360b33?this['canvas']['style'][_0x40ba6b(0x44e,0x45f)]=_0x210470(0x20,0x92):this[_0x40ba6b(0x37d,0x375)][_0x40ba6b(0x39e,0x3bf)]['pointer-events']='none';}get[_0x5668e7(0x16b,0x1c9)](){function _0x1c446f(_0x4f3ff1,_0x3602e7){return _0x244961(_0x4f3ff1-0x324,_0x3602e7);}return this['options'][_0x1c446f(0x61,0xc9)];}set['particlesNumber'](_0x3a2c48){this['options'][_0x57f5d1(-0x18d,-0x151)]=_0x3a2c48;function _0x2de5ce(_0xb950e4,_0x58d4e3){return _0x5668e7(_0xb950e4,_0x58d4e3- -0x9b);}clearTimeout(this[_0x57f5d1(-0x7a,-0xf4)]);function _0x57f5d1(_0x3d5287,_0x10420b){return _0x5668e7(_0x10420b,_0x3d5287- -0x356);}this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x21b9bb(_0x1b5b11,_0x16656f){return _0x5668e7(_0x16656f,_0x1b5b11- -0xa6);}return this[_0x21b9bb(0x203,0x271)]['speedRate'];}set[_0x244961(-0x29d,-0x31d)](_0x3a198b){this['options']['speedRate']=_0x3a198b;function _0x1e7a3e(_0x7398eb,_0x358915){return _0x244961(_0x7398eb-0x5f,_0x358915);}this['windField']&&(this[_0x1e7a3e(-0x210,-0x176)]['speedRate']=_0x3a198b);}get[_0x244961(-0x26d,-0x2ba)](){return this['options']['maxAge'];}set['maxAge'](_0x473866){this['options']['maxAge']=_0x473866;function _0x35c45a(_0x129fa6,_0x479517){return _0x5668e7(_0x479517,_0x129fa6-0x1a8);}function _0x4c728f(_0x24b389,_0x2a6caf){return _0x244961(_0x2a6caf-0x78d,_0x24b389);}this[_0x35c45a(0x3c5,0x453)]&&(this['windField'][_0x35c45a(0x3c7,0x456)]=_0x473866);}get['data'](){function _0x1efbae(_0x5332a5,_0x26dcff){return _0x5668e7(_0x5332a5,_0x26dcff- -0x423);}return this[_0x1efbae(-0x1c9,-0x242)];}set[_0x244961(-0x1c9,-0x247)](_0x2a8f5f){function _0x422e3c(_0x229796,_0x2b61c6){return _0x244961(_0x2b61c6-0x5cd,_0x229796);}this[_0x422e3c(0x38f,0x3de)](_0x2a8f5f);}[_0x5668e7(0x290,0x266)](_0x18c84d){function _0x2d18a9(_0x59cfde,_0xf9a21a){return _0x244961(_0xf9a21a-0x352,_0x59cfde);}function _0x30d884(_0x5aefc0,_0xd13666){return _0x244961(_0x5aefc0-0x45c,_0xd13666);}_0x18c84d?this[_0x30d884(0x263,0x27c)]():(this['windData']&&(this[_0x30d884(0x279,0x1fc)]['data']=this[_0x30d884(0x1b1,0x130)]),this['_removedHook']());}['_mountedHook'](){function _0x3f17c4(_0x449976,_0x1973ae){return _0x5668e7(_0x449976,_0x1973ae-0x88);}function _0x434559(_0x12e28d,_0x4c40a4){return _0x5668e7(_0x4c40a4,_0x12e28d- -0x2c5);}this['options']['worker']?this[_0x434559(-0x62,-0x11)]():this['windField']=new CanvasWindField(this[_0x3f17c4(0x39c,0x331)]);}['_addedHook'](){this['canvas']=this[_0x422880(0x236,0x1a2)]();const _0x191403={};_0x191403[_0x422880(0xf9,0x18b)]=!![];function _0x57bba9(_0x134c21,_0x3a06a0){return _0x5668e7(_0x3a06a0,_0x134c21-0x45);}this[_0x422880(0x13a,0xaf)]=this['canvas'][_0x422880(0x17,0x8c)]('2d',_0x191403);function _0x422880(_0x2181e4,_0x47555a){return _0x244961(_0x47555a-0x344,_0x2181e4);}this['bindEvent'](),this['options']['data']&&this['setData'](this['options']['data']);}['_removedHook'](){this['clear'](),this[_0x1ccb21(0x427,0x3ae)]();function _0x1ccb21(_0xda294e,_0x4576dc){return _0x5668e7(_0xda294e,_0x4576dc-0xe2);}function _0x10f7c9(_0x297292,_0x4d9059){return _0x244961(_0x4d9059-0x5a0,_0x297292);}this['canvas']&&(this[_0x10f7c9(0x467,0x3fb)][_0x10f7c9(0x32b,0x38a)][_0x10f7c9(0x26c,0x301)](this[_0x1ccb21(0x290,0x2a7)]),delete this['canvas']);}[_0x5668e7(0x276,0x2ea)](){const _0x56d774=mars3d__namespace[_0x47a09c(0x40c,0x439)]['create'](_0x5cdf5d(0x328,0x2d2),'mars3d-canvasWind',this[_0x5cdf5d(0x412,0x3f4)][_0x47a09c(0x469,0x474)]);function _0x5cdf5d(_0x1658f1,_0x594da8){return _0x244961(_0x594da8-0x599,_0x1658f1);}function _0x47a09c(_0x2dd256,_0x348fff){return _0x5668e7(_0x348fff,_0x2dd256-0x1f3);}return _0x56d774[_0x5cdf5d(0x2dc,0x2f3)][_0x5cdf5d(0x2d9,0x2f4)]='absolute',_0x56d774['style']['top']=_0x47a09c(0x42a,0x412),_0x56d774[_0x5cdf5d(0x319,0x2f3)]['left']='0px',_0x56d774['style']['width']=this['_map']['scene'][_0x47a09c(0x3b8,0x44c)][_0x5cdf5d(0x41c,0x3d3)]+'px',_0x56d774[_0x5cdf5d(0x346,0x2f3)]['height']=this['_map'][_0x47a09c(0x3c0,0x35b)][_0x5cdf5d(0x2a8,0x2d2)]['clientHeight']+'px',_0x56d774['style'][_0x47a09c(0x4c5,0x526)]=this['_pointerEvents']?_0x5cdf5d(0x31c,0x374):'none',_0x56d774[_0x5cdf5d(0x29e,0x2f3)][_0x47a09c(0x3e7,0x35f)]=this['options']['zIndex']??0x9,_0x56d774[_0x5cdf5d(0x31c,0x3af)]=this[_0x5cdf5d(0x39e,0x3f4)]['scene']['canvas']['clientWidth'],_0x56d774['height']=this[_0x5cdf5d(0x3ea,0x3f4)]['scene']['canvas'][_0x5cdf5d(0x3dd,0x3c0)],_0x56d774;}['resize'](){function _0x592313(_0x8431e,_0x3c817b){return _0x244961(_0x3c817b-0x6d1,_0x8431e);}function _0x5a570e(_0x9a2dc1,_0x4f39c6){return _0x244961(_0x4f39c6-0x46a,_0x9a2dc1);}this[_0x592313(0x447,0x40a)]&&(this['canvas']['style'][_0x5a570e(0x243,0x280)]=this[_0x5a570e(0x237,0x2c5)]['scene'][_0x592313(0x3b1,0x40a)][_0x5a570e(0x277,0x2a4)]+'px',this['canvas']['style'][_0x592313(0x4d5,0x499)]=this[_0x592313(0x5a2,0x52c)]['scene']['canvas']['clientHeight']+'px',this['canvas'][_0x5a570e(0x2c5,0x280)]=this['_map']['scene']['canvas'][_0x5a570e(0x2e9,0x2a4)],this['canvas'][_0x592313(0x467,0x499)]=this[_0x592313(0x55c,0x52c)]['scene']['canvas']['clientHeight']);}['bindEvent'](){const _0x430602=this;let _0x36996a=Date['now']();function _0xe483f6(_0x481124,_0x5a2723){return _0x5668e7(_0x5a2723,_0x481124-0x190);}(function _0x5d0cf7(){function _0x41e552(_0x5d5d6b,_0x2b676){return _0x2479(_0x5d5d6b- -0xcc,_0x2b676);}_0x430602[_0x41e552(0xf3,0x9b)]=window['requestAnimationFrame'](_0x5d0cf7);function _0xb5c2be(_0x319d39,_0x335757){return _0x2479(_0x335757- -0x16,_0x319d39);}if(_0x430602['show']&&_0x430602['windField']){const _0x243ff6=Date['now'](),_0x59b2db=_0x243ff6-_0x36996a;_0x59b2db>_0x430602[_0x41e552(0xf9,0x119)]&&(_0x36996a=_0x243ff6-_0x59b2db%_0x430602[_0x41e552(0xf9,0x155)],_0x430602['update']());}}(),window[_0xe483f6(0x36d,0x2de)](_0x2a058b(0x2bb,0x24e),this[_0x2a058b(0x264,0x24e)]['bind'](this),![]));function _0x2a058b(_0x31c80d,_0x5744bf){return _0x5668e7(_0x31c80d,_0x5744bf-0x28);}this['mouse_down']=![],this['mouse_move']=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this[_0xe483f6(0x365,0x3db)],this),this[_0x2a058b(0x2fc,0x30f)]['on'](mars3d__namespace['EventType'][_0xe483f6(0x46a,0x4b7)],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0xe483f6(0x3df,0x3fc)],this[_0x2a058b(0x37e,0x2fc)],this));}['unbindEvent'](){function _0x2e184b(_0x30b01e,_0x3f7362){return _0x5668e7(_0x3f7362,_0x30b01e-0x239);}function _0x42d5de(_0x27f302,_0x4e2e1b){return _0x5668e7(_0x27f302,_0x4e2e1b-0x133);}window['cancelAnimationFrame'](this['animateFrame']),delete this[_0x2e184b(0x4b5,0x4dd)],window['removeEventListener']('resize',this['resize']),this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this[_0x2e184b(0x40e,0x3c9)],this),this['_map']['off'](mars3d__namespace[_0x42d5de(0x30f,0x35f)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace[_0x2e184b(0x465,0x432)]['mouseUp'],this['_onMouseUpEvent'],this),this['_map'][_0x2e184b(0x439,0x424)](mars3d__namespace[_0x42d5de(0x3ac,0x35f)]['mouseMove'],this['_onMouseMoveEvent'],this));}[_0x5668e7(0x195,0x1d5)](_0x30a2a1){function _0x4688cb(_0xaddcbe,_0x471469){return _0x244961(_0xaddcbe-0x9,_0x471469);}clearTimeout(this['refreshTimer']);function _0x3c8e92(_0x5546ad,_0x15bc67){return _0x244961(_0x5546ad-0x54,_0x15bc67);}if(!this[_0x3c8e92(-0x250,-0x1c7)]||!this[_0x4688cb(-0x2be,-0x2b3)])return;this[_0x3c8e92(-0x273,-0x285)]['style']['visibility']='hidden',this[_0x4688cb(-0x1f5,-0x27c)]=setTimeout(()=>{if(!this['show'])return;function _0xdaa755(_0x5058a2,_0xee3a27){return _0x3c8e92(_0xee3a27-0x6fe,_0x5058a2);}this[_0xdaa755(0x5b3,0x591)]();function _0x5e682c(_0x39ab1d,_0x2b968c){return _0x4688cb(_0x39ab1d-0x141,_0x2b968c);}this['canvas'][_0xdaa755(0x44a,0x4ac)]['visibility']='visible';},0xc8);}['_onMouseDownEvent'](_0x40c4b4){function _0x5d1684(_0x2ea684,_0x1328cd){return _0x5668e7(_0x2ea684,_0x1328cd- -0x339);}function _0x526c0b(_0x198d60,_0x186cf6){return _0x244961(_0x186cf6-0xbf,_0x198d60);}this['mouse_down']=!![],this[_0x5d1684(0x2a,-0x52)][_0x5d1684(-0xf2,-0x139)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}[_0x5668e7(0x25c,0x257)](_0x25f0b0){function _0x5d7b76(_0x5dc0cb,_0x19eb35){return _0x244961(_0x5dc0cb-0x44e,_0x19eb35);}function _0x56e7b3(_0x433004,_0x58dc20){return _0x5668e7(_0x433004,_0x58dc20- -0xa6);}if(!this['show']||!this[_0x56e7b3(0x1b8,0x11f)])return;this[_0x5d7b76(0x1a1,0x139)]&&(this['canvas']['style']['visibility']='hidden',this[_0x56e7b3(0x13e,0x194)]=!![]);}['_onMouseUpEvent'](_0x1d985a){if(!this[_0xce07ab(-0x3b,-0xc8)]||!this[_0xc13038(-0x17a,-0x1a4)])return;function _0xc13038(_0x2e28a8,_0x103e49){return _0x244961(_0x103e49-0x123,_0x2e28a8);}this['_map']['off'](mars3d__namespace['EventType'][_0xc13038(-0x93,-0x89)],this['_onMouseMoveEvent'],this);function _0xce07ab(_0x55f0ea,_0x30fc41){return _0x244961(_0x30fc41-0x1dc,_0x55f0ea);}this['mouse_down']&&this['mouse_move']&&this['redraw'](),this['canvas']['style']['visibility']=_0xc13038(-0x71,-0x86),this[_0xc13038(-0x158,-0x18a)]=![],this[_0xc13038(-0x176,-0x12f)]=![];}['setData'](_0xa74d97){this['clear'](),this['windData']=_0xa74d97;function _0xb19896(_0x1d6dde,_0x415202){return _0x244961(_0x1d6dde-0x781,_0x415202);}this['windField']['setDate'](_0xa74d97),this[_0xb19896(0x5c0,0x612)]();}[_0x5668e7(0x2ae,0x2cb)](){if(!this[_0x329d90(0x255,0x1e0)])return;this['windField']['setOptions'](this['options']);function _0x329d90(_0x1817fe,_0xc8a333){return _0x5668e7(_0xc8a333,_0x1817fe-0x6d);}function _0x1df88d(_0x365055,_0x49120d){return _0x244961(_0x365055-0x763,_0x49120d);}this[_0x1df88d(0x5bd,0x5c7)]();}['update'](){if(this['_updateIng'])return;function _0xc9b512(_0x131153,_0x202e87){return _0x5668e7(_0x202e87,_0x131153- -0x476);}this[_0xc9b512(-0x21e,-0x288)]=!![];function _0x22b724(_0xae41b5,_0x2ae4dc){return _0x5668e7(_0xae41b5,_0x2ae4dc-0x1ef);}if(this['worker'])this['windField'][_0xc9b512(-0x190,-0xf9)]();else{const _0x10e52e=this['windField']['getParticles']();this['_drawLines'](_0x10e52e);}this['_updateIng']=![];}['_drawLines'](_0x549430){this['canvasContext']['globalCompositeOperation']='destination-in',this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this[_0x401ced(0x446,0x464)]);function _0x401ced(_0x1e9403,_0x357609){return _0x5668e7(_0x357609,_0x1e9403-0x1f0);}function _0x1f0a6d(_0x5cc0c3,_0x500bd9){return _0x5668e7(_0x500bd9,_0x5cc0c3-0x19b);}this['canvasContext']['globalCompositeOperation']='lighter',this['canvasContext']['globalAlpha']=0.9;const _0x4ed1b7=this['_map'][_0x1f0a6d(0x368,0x2ce)]['mode']!==Cesium['SceneMode']['SCENE3D'],_0x1f6727=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x3c8178=0x0,_0xb150d3=_0x549430['length'];_0x3c8178<_0xb150d3;_0x3c8178++){const _0x23d0f3=_0x549430[_0x3c8178],_0x194bc6=this[_0x1f0a6d(0x471,0x4a6)](_0x23d0f3['lng'],_0x23d0f3['lat'],_0x23d0f3),_0x5ebdbb=this['_tomap'](_0x23d0f3['tlng'],_0x23d0f3['tlat'],_0x23d0f3);if(!_0x194bc6||!_0x5ebdbb)continue;if(_0x4ed1b7&&Math[_0x401ced(0x464,0x4b3)](_0x194bc6[0x0]-_0x5ebdbb[0x0])>=_0x1f6727)continue;this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this[_0x401ced(0x435,0x4a3)],this['canvasContext']['strokeStyle']=this['_colorRamp']['getColor'](_0x23d0f3['speed']),this[_0x401ced(0x3e7,0x472)]['moveTo'](_0x194bc6[0x0],_0x194bc6[0x1]),this['canvasContext'][_0x401ced(0x477,0x46f)](_0x5ebdbb[0x0],_0x5ebdbb[0x1]),this['canvasContext']['stroke']();}else{this['canvasContext']['beginPath'](),this[_0x1f0a6d(0x392,0x3b8)][_0x401ced(0x435,0x3ec)]=this['lineWidth'],this['canvasContext'][_0x401ced(0x488,0x4e6)]=this['color'];for(let _0x1d931b=0x0,_0x25e2ab=_0x549430[_0x1f0a6d(0x414,0x3ef)];_0x1d931b<_0x25e2ab;_0x1d931b++){const _0x5d44a6=_0x549430[_0x1d931b],_0x307b2b=this[_0x401ced(0x4c6,0x479)](_0x5d44a6[_0x1f0a6d(0x416,0x3f8)],_0x5d44a6['lat'],_0x5d44a6),_0x485f0d=this['_tomap'](_0x5d44a6['tlng'],_0x5d44a6[_0x1f0a6d(0x3b6,0x35e)],_0x5d44a6);if(!_0x307b2b||!_0x485f0d)continue;if(_0x4ed1b7&&Math['abs'](_0x307b2b[0x0]-_0x485f0d[0x0])>=_0x1f6727)continue;this['canvasContext']['moveTo'](_0x307b2b[0x0],_0x307b2b[0x1]),this['canvasContext']['lineTo'](_0x485f0d[0x0],_0x485f0d[0x1]);}this['canvasContext'][_0x1f0a6d(0x3fd,0x38b)]();}}['_tomap'](_0x332e6f,_0x4c6667,_0xf9aae1){function _0x92c680(_0x311b5c,_0x52186e){return _0x5668e7(_0x52186e,_0x311b5c-0x2da);}const _0x2ed075=Cesium[_0x16431e(0x1a5,0x1e5)]['fromDegrees'](_0x332e6f,_0x4c6667,this['fixedHeight']),_0x148d83=this[_0x16431e(0x200,0x288)]['scene'];if(_0x148d83['mode']===Cesium['SceneMode'][_0x92c680(0x4e2,0x4f2)]){const _0x3707c0=new Cesium['EllipsoidalOccluder'](_0x148d83['globe'][_0x92c680(0x5c8,0x5de)],_0x148d83['camera']['positionWC']),_0x3a5999=_0x3707c0[_0x92c680(0x55a,0x4d1)](_0x2ed075);if(!_0x3a5999)return _0xf9aae1['age']=0x0,null;}const _0x275579=Cesium['SceneTransforms'][_0x16431e(0x144,0x198)](this[_0x92c680(0x5c1,0x530)]['scene'],_0x2ed075);function _0x16431e(_0x3f80ed,_0x440d98){return _0x244961(_0x3f80ed-0x3a5,_0x440d98);}return _0x275579?[_0x275579['x'],_0x275579['y']]:null;}['clear'](){this['windField']['clear'](),delete this['windData'];}['initWorker'](){function _0x3f1820(_0x3d7368,_0x3f5ab7){return _0x244961(_0x3f5ab7-0x589,_0x3d7368);}this[_0x3f1820(0x272,0x2f7)]=new Worker(this[_0x520cc5(0x85,0xff)]['worker']);function _0x520cc5(_0x317fbd,_0x87c750){return _0x244961(_0x87c750-0x2e2,_0x317fbd);}this[_0x3f1820(0x36a,0x2f7)]['onmessage']=_0x3ebabb=>{this['_drawLines'](_0x3ebabb['data'][_0xd4b925(-0x93,-0xa1)]);function _0xd4b925(_0x913c6c,_0x414141){return _0x520cc5(_0x414141,_0x913c6c- -0xd9);}this['_updateIng2']=![];},this['windField']={'init':_0x482974=>{function _0x3626d8(_0x26836d,_0x195a04){return _0x520cc5(_0x195a04,_0x26836d- -0x1c4);}const _0x41f98c={};_0x41f98c['type']='init',_0x41f98c['options']=_0x482974,this['worker'][_0x3626d8(-0xc6,-0x14b)](_0x41f98c);},'setOptions':_0x507934=>{const _0x3ab6cb={};_0x3ab6cb[_0x122a88(-0xc8,-0x90)]='setOptions',_0x3ab6cb['options']=_0x507934;function _0x122a88(_0x2c846c,_0x5941d9){return _0x520cc5(_0x2c846c,_0x5941d9- -0xe8);}this['worker']['postMessage'](_0x3ab6cb);},'setDate':_0x2fe402=>{const _0x169f63={};function _0x496cf4(_0x47498c,_0x5e80b5){return _0x3f1820(_0x5e80b5,_0x47498c- -0xfb);}_0x169f63['type']='setDate',_0x169f63[_0x496cf4(0x2c5,0x35b)]=_0x2fe402;function _0x2f0250(_0x10eb36,_0x42996d){return _0x3f1820(_0x10eb36,_0x42996d-0x229);}this[_0x496cf4(0x1fc,0x200)]['postMessage'](_0x169f63);},'update':()=>{if(this['_updateIng2'])return;this[_0x2a0ad5(0x21f,0x1d9)]=!![];const _0x1a95b3={};function _0x517c4d(_0x28d036,_0x3222eb){return _0x520cc5(_0x28d036,_0x3222eb-0x2a4);}_0x1a95b3['type']=_0x2a0ad5(0x250,0x252);function _0x2a0ad5(_0x2b9d2c,_0x52e842){return _0x520cc5(_0x52e842,_0x2b9d2c-0x114);}this[_0x2a0ad5(0x164,0xef)]['postMessage'](_0x1a95b3);},'clear':()=>{const _0x942cb7={};function _0x401dd4(_0x517520,_0x4eaee6){return _0x520cc5(_0x4eaee6,_0x517520-0x2a);}_0x942cb7['type']='clear',this[_0x401dd4(0x7a,0x3a)]['postMessage'](_0x942cb7);}},this[_0x3f1820(0x389,0x31a)]['init'](this['options']);}}mars3d__namespace[_0x244961(-0x258,-0x279)]['register'](_0x5668e7(0x257,0x1c4),CanvasWindLayer),mars3d__namespace['layer'][_0x244961(-0x1b1,-0x11b)]=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x244961(-0x19a,-0x193)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x244961(-0x288,-0x281)]=WindLayer;function _0x5668e7(_0x2ebfc8,_0x11906e){return _0x2479(_0x11906e-0xbd,_0x2ebfc8);}exports[_0x244961(-0x19a,-0x22a)]=WindUtil;const _0x38f000={};_0x38f000['value']=!![],Object[_0x5668e7(0x31b,0x2a7)](exports,_0x5668e7(0x23a,0x250),_0x38f000);
}));
