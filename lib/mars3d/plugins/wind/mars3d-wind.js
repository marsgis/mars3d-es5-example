/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.0
 * 编译日期：2025-02-15 12:31
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x51c9fc,_0x54c279){const _0x5e5614=_0x51c9fc();function _0x3fe2d1(_0x593c30,_0x5cff62){return _0x3f03(_0x5cff62-0x1c0,_0x593c30);}function _0x37db9d(_0x53961f,_0xcb548a){return _0x3f03(_0x53961f- -0x1ba,_0xcb548a);}while(!![]){try{const _0x1a2360=parseInt(_0x3fe2d1(0x318,0x31a))/0x1*(-parseInt(_0x37db9d(-0x1d,-0x25))/0x2)+parseInt(_0x3fe2d1(0x3fb,0x380))/0x3+-parseInt(_0x37db9d(0x8f,0xd))/0x4+parseInt(_0x3fe2d1(0x343,0x366))/0x5*(parseInt(_0x3fe2d1(0x3d4,0x383))/0x6)+-parseInt(_0x37db9d(-0x70,-0x31))/0x7*(-parseInt(_0x37db9d(-0x2b,-0xe))/0x8)+-parseInt(_0x37db9d(0x11,0x51))/0x9+parseInt(_0x3fe2d1(0x352,0x38c))/0xa*(parseInt(_0x3fe2d1(0x3b1,0x37b))/0xb);if(_0x1a2360===_0x54c279)break;else _0x5e5614['push'](_0x5e5614['shift']());}catch(_0x14367d){_0x5e5614['push'](_0x5e5614['shift']());}}}(_0x59ff,0x5e267));function _interopNamespace(_0x17f318){if(_0x17f318&&_0x17f318[_0x26061e(0x374,0x3e4)])return _0x17f318;function _0x26061e(_0x25d938,_0x532320){return _0x3f03(_0x532320-0x1b2,_0x25d938);}var _0x46e682=Object['create'](null);_0x17f318&&Object[_0x535a57(0x344,0x321)](_0x17f318)[_0x535a57(0x2b8,0x2ea)](function(_0xfb9580){function _0x430910(_0x58a0cb,_0x177707){return _0x535a57(_0x177707,_0x58a0cb-0x1ae);}function _0x33a2c5(_0x4cf05d,_0x24e52d){return _0x26061e(_0x24e52d,_0x4cf05d- -0x463);}if(_0xfb9580!=='default'){var _0x4ccd56=Object[_0x33a2c5(-0x8c,-0x90)](_0x17f318,_0xfb9580);Object[_0x430910(0x4ae,0x522)](_0x46e682,_0xfb9580,_0x4ccd56['get']?_0x4ccd56:{'enumerable':!![],'get':function(){return _0x17f318[_0xfb9580];}});}});_0x46e682[_0x535a57(0x2ad,0x2f5)]=_0x17f318;function _0x535a57(_0x48be88,_0x2ee0ba){return _0x3f03(_0x2ee0ba-0x18e,_0x48be88);}return _0x46e682;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x3d13d6(0x6c,-0x17)];function _0x19c23c(_0x2125ff,_0x5c4650){return _0x3f03(_0x2125ff- -0x389,_0x5c4650);}function getU(_0x308ede,_0x26dfb1){const _0x36efc7=_0x308ede*Math['cos'](Cesium$2['Math'][_0xa3c4fa(0x122,0x108)](_0x26dfb1));function _0xa3c4fa(_0x3ea949,_0x40c5e2){return _0x3d13d6(_0x40c5e2-0x23,_0x3ea949);}return _0x36efc7;}function getV(_0x540b03,_0x5b73f3){const _0x29ca72=_0x540b03*Math['sin'](Cesium$2['Math']['toRadians'](_0x5b73f3));return _0x29ca72;}function getSpeed(_0x13f658,_0x326f18){const _0x443158=Math['sqrt'](Math[_0x5f17aa(0x1db,0x1b9)](_0x13f658,0x2)+Math['pow'](_0x326f18,0x2));function _0x5f17aa(_0x3bf449,_0x90bc00){return _0x3d13d6(_0x90bc00-0x8c,_0x3bf449);}return _0x443158;}function getDirection(_0x1efe7a,_0x46338a){let _0x12f648=Cesium$2[_0x5a9765(0x263,0x21a)]['toDegrees'](Math[_0x5a9765(0x1e3,0x1d1)](_0x46338a,_0x1efe7a));_0x12f648+=_0x12f648<0x0?0x168:0x0;function _0x5a9765(_0x49ec44,_0x45b916){return _0x3d13d6(_0x45b916-0xdc,_0x49ec44);}function _0x587667(_0xe43c0e,_0x27cd9a){return _0x3d13d6(_0xe43c0e-0x58,_0x27cd9a);}return _0x12f648;}const _0x4974b5={};_0x4974b5['__proto__']=null,_0x4974b5['getU']=getU,_0x4974b5['getV']=getV,_0x4974b5[_0x19c23c(-0x180,-0x1bd)]=getSpeed,_0x4974b5['getDirection']=getDirection;var WindUtil=_0x4974b5,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x19c23c(-0x1c1,-0x1b3),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader=_0x19c23c(-0x17b,-0x175);const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x3d13d6(0x96,0x10f)](){const _0x10cea5={};return _0x10cea5['sources']=[calculateSpeedShader],new ShaderSource$1(_0x10cea5);}static[_0x3d13d6(0x8c,0x6a)](){const _0x4b602b={};function _0x590cf3(_0x38586a,_0x4b9953){return _0x19c23c(_0x38586a-0x4d6,_0x4b9953);}return _0x4b602b[_0x590cf3(0x293,0x2f4)]=[updatePositionShader],new ShaderSource$1(_0x4b602b);}static[_0x19c23c(-0x1bb,-0x195)](){const _0x3d9353={};return _0x3d9353['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x3d9353);}static['getSegmentDrawFragmentShader'](){function _0x2bd956(_0x24da11,_0x367f5a){return _0x3d13d6(_0x24da11-0x3f7,_0x367f5a);}const _0x18e8dd={};return _0x18e8dd[_0x2bd956(0x441,0x411)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x18e8dd);}static[_0x19c23c(-0x170,-0x1d9)](){const _0x19784f={};return _0x19784f['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x19784f);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defaultValue,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x281f96){this[_0x5bf589(0x27b,0x2f2)]=_0x281f96[_0x5bf589(0x27b,0x2f2)],this['geometry']=_0x281f96['geometry'];function _0x5bf589(_0x2629d1,_0x50d16e){return _0x3d13d6(_0x50d16e-0x1f8,_0x2629d1);}this['attributeLocations']=_0x281f96[_0x2aac80(0x2c5,0x327)],this['primitiveType']=_0x281f96[_0x5bf589(0x3c4,0x342)],this[_0x5bf589(0x357,0x2ea)]=_0x281f96[_0x2aac80(0x33f,0x35f)]||{},this['vertexShaderSource']=_0x281f96[_0x2aac80(0x26b,0x2c8)],this['fragmentShaderSource']=_0x281f96[_0x2aac80(0x330,0x393)],this['rawRenderState']=_0x281f96[_0x5bf589(0x21f,0x267)],this[_0x2aac80(0x35c,0x309)]=_0x281f96['framebuffer'],this[_0x2aac80(0x404,0x3b5)]=_0x281f96['outputTexture'],this[_0x2aac80(0x379,0x2ff)]=defaultValue(_0x281f96[_0x2aac80(0x32c,0x2ff)],![]);function _0x2aac80(_0x583845,_0x4b977b){return _0x3d13d6(_0x4b977b-0x26d,_0x583845);}this['preExecute']=_0x281f96[_0x2aac80(0x29f,0x2ab)],this[_0x2aac80(0x348,0x315)]=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this[_0x2aac80(0x38b,0x313)]=_0x281f96['isDynamic']??(()=>!![]),this[_0x2aac80(0x375,0x2ff)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}[_0x19c23c(-0x166,-0xdd)](_0x36d319){function _0x17d4af(_0x552024,_0x53926c){return _0x3d13d6(_0x552024-0x425,_0x53926c);}function _0x1fea37(_0x276ad,_0x20e4c8){return _0x3d13d6(_0x20e4c8- -0x204,_0x276ad);}if(this['commandType']==='Draw'){const _0x5be9d5={};_0x5be9d5['context']=_0x36d319,_0x5be9d5['geometry']=this['geometry'],_0x5be9d5[_0x17d4af(0x4df,0x49e)]=this['attributeLocations'],_0x5be9d5['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x1780ff=VertexArray$1['fromGeometry'](_0x5be9d5),_0x508888={};_0x508888[_0x1fea37(-0x17d,-0xf3)]=_0x36d319,_0x508888['vertexShaderSource']=this['vertexShaderSource'],_0x508888['fragmentShaderSource']=this['fragmentShaderSource'],_0x508888['attributeLocations']=this['attributeLocations'];const _0x211625=ShaderProgram['fromCache'](_0x508888),_0x60efe8=RenderState['fromCache'](this[_0x1fea37(-0x119,-0x195)]),_0xfeb0cf={};return _0xfeb0cf[_0x17d4af(0x4e2,0x4a4)]=this,_0xfeb0cf[_0x1fea37(-0x1c8,-0x158)]=_0x1780ff,_0xfeb0cf[_0x1fea37(-0x7f,-0xba)]=this[_0x17d4af(0x56f,0x530)],_0xfeb0cf['modelMatrix']=Matrix4[_0x1fea37(-0xef,-0x136)],_0xfeb0cf['renderState']=_0x60efe8,_0xfeb0cf['shaderProgram']=_0x211625,_0xfeb0cf[_0x17d4af(0x4c1,0x460)]=this[_0x17d4af(0x4c1,0x45c)],_0xfeb0cf[_0x1fea37(-0x94,-0x112)]=this['uniformMap'],_0xfeb0cf['pass']=Pass$1['OPAQUE'],new DrawCommand(_0xfeb0cf);}else{if(this['commandType']==='Compute'){const _0x1a7899={};return _0x1a7899['owner']=this,_0x1a7899['fragmentShaderSource']=this['fragmentShaderSource'],_0x1a7899['uniformMap']=this['uniformMap'],_0x1a7899['outputTexture']=this['outputTexture'],_0x1a7899['persists']=!![],new ComputeCommand(_0x1a7899);}else throw new Error('Unknown\x20command\x20type');}}['setGeometry'](_0x593d67,_0x463974){this['geometry']=_0x463974;function _0x2a2f12(_0x150462,_0x5bff14){return _0x19c23c(_0x5bff14-0xa0,_0x150462);}defined(this['commandToExecute'])&&(this['commandToExecute']['vertexArray']=VertexArray$1['fromGeometry']({'context':_0x593d67,'geometry':this['geometry'],'attributeLocations':this[_0x2a2f12(-0xae,-0x133)],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}[_0x19c23c(-0x146,-0x15f)](_0x1c5355){if(!this['isDynamic']())return;if(!this['show']||!defined(_0x1c5355))return;!defined(this[_0x2b3721(0x342,0x3cc)])&&(this['commandToExecute']=this[_0x1de649(0x579,0x533)](_0x1c5355['context']));function _0x2b3721(_0x41149e,_0x43f2a3){return _0x3d13d6(_0x43f2a3-0x2dd,_0x41149e);}defined(this[_0x1de649(0x3e0,0x44a)])&&this[_0x2b3721(0x2d9,0x31b)]();function _0x1de649(_0x5e6339,_0x3f5a42){return _0x19c23c(_0x3f5a42-0x699,_0x5e6339);}if(!_0x1c5355[_0x2b3721(0x439,0x3c4)]){console[_0x2b3721(0x44c,0x405)]('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x1c5355['commandList']['push'](this['clearCommand']),defined(this['commandToExecute'])&&_0x1c5355['commandList'][_0x2b3721(0x314,0x392)](this['commandToExecute']);}['isDestroyed'](){return![];}['destroy'](){function _0x4efb63(_0x37f906,_0x4b9481){return _0x3d13d6(_0x4b9481- -0x17c,_0x37f906);}if(defined(this['commandToExecute'])){var _0x21c966;(_0x21c966=this['commandToExecute'][_0x4efb63(-0x119,-0xa5)])===null||_0x21c966===void 0x0||_0x21c966['destroy'](),this['commandToExecute']['shaderProgram']=undefined;}return destroyObject(this);}}function deepMerge(_0x1a95eb,_0xdef78a){if(!_0x1a95eb)return _0xdef78a;if(!_0xdef78a)return _0x1a95eb;const _0x416263={..._0xdef78a},_0x5b4283=_0x416263;for(const _0x1dd93e in _0x1a95eb){if(Object['prototype']['hasOwnProperty']['call'](_0x1a95eb,_0x1dd93e)){const _0x4b06e4=_0x1a95eb[_0x1dd93e],_0x4cbb48=_0xdef78a[_0x1dd93e];if(Array['isArray'](_0x4b06e4)){_0x5b4283[_0x1dd93e]=_0x4b06e4['slice']();continue;}if(_0x4b06e4&&typeof _0x4b06e4==='object'){_0x5b4283[_0x1dd93e]=deepMerge(_0x4b06e4,_0x4cbb48||{});continue;}_0x4b06e4!==undefined&&(_0x5b4283[_0x1dd93e]=_0x4b06e4);}}return _0x5b4283;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x3597bc,_0x1a24d5,_0x569e24,_0x4566a7,_0x36e8b8){this['context']=_0x3597bc,this[_0x4b861d(0x168,0x1f3)]=_0x569e24,this[_0x4cdeb1(0x1d3,0x197)]=_0x4566a7,this[_0x4b861d(0x146,0x1c6)]=_0x1a24d5,this[_0x4b861d(0x196,0x1c7)]=0x3c,this['frameRateAdjustment']=0x1;const _0x20a37e={};_0x20a37e['scene']=_0x36e8b8;function _0x4b861d(_0x48fe05,_0x21af12){return _0x3d13d6(_0x21af12-0xed,_0x48fe05);}_0x20a37e[_0x4b861d(0x190,0x136)]=0x1,_0x20a37e[_0x4cdeb1(0x26f,0x2f4)]=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x20a37e);function _0x4cdeb1(_0x1e8fd2,_0x5c3de6){return _0x19c23c(_0x1e8fd2-0x3b9,_0x5c3de6);}this[_0x4b861d(0x243,0x233)](),this[_0x4b861d(0x25f,0x1d6)](),this[_0x4b861d(0x1a5,0x1f0)](),this['createComputingPrimitives']();}['initFrameRate'](){const _0x1f12cf=()=>{function _0x4b5888(_0x2fd90d,_0x32deb1){return _0x3f03(_0x32deb1-0x1c6,_0x2fd90d);}function _0x1ae046(_0x5d745d,_0x34f6d1){return _0x3f03(_0x5d745d- -0x105,_0x34f6d1);}this['frameRateMonitor']['lastFramesPerSecond']>0x14&&(this['frameRate']=this[_0x4b5888(0x382,0x387)]['lastFramesPerSecond'],this[_0x1ae046(0x72,-0x8)]=0x3c/Math['max'](this[_0x1ae046(0xd1,0xa8)],0x1));};function _0x5ac684(_0x3ba93b,_0x2ededb){return _0x3d13d6(_0x3ba93b-0x278,_0x2ededb);}function _0x1c8fc1(_0xbf8332,_0x5484e0){return _0x3d13d6(_0xbf8332-0x2d2,_0x5484e0);}_0x1f12cf();const _0x1be23f=setInterval(_0x1f12cf,0x3e8),_0x19b12c=this['destroy'][_0x5ac684(0x380,0x34f)](this);this[_0x1c8fc1(0x3ec,0x383)]=()=>{clearInterval(_0x1be23f),_0x19b12c();};}[_0x19c23c(-0x1a4,-0x1c4)](){const _0x3d8deb={};function _0x5b823f(_0x531c56,_0x4fe8ea){return _0x19c23c(_0x4fe8ea-0x6de,_0x531c56);}_0x3d8deb['minificationFilter']=TextureMinificationFilter$1[_0x5b823f(0x553,0x4e9)];function _0x5800a4(_0x46bca6,_0x5f004a){return _0x3d13d6(_0x5f004a-0x35a,_0x46bca6);}_0x3d8deb[_0x5b823f(0x544,0x4dc)]=TextureMagnificationFilter$1['LINEAR'];const _0x4046e5={'context':this['context'],'width':this['windData']['width'],'height':this['windData']['height'],'pixelFormat':PixelFormat$1[_0x5b823f(0x579,0x591)],'pixelDatatype':PixelDatatype$1[_0x5b823f(0x49c,0x517)],'flipY':this[_0x5b823f(0x503,0x557)][_0x5800a4(0x4eb,0x469)]??![],'sampler':new Sampler$1(_0x3d8deb)};this[_0x5800a4(0x3d5,0x3de)]={'U':new Texture$1({..._0x4046e5,'source':{'arrayBufferView':new Float32Array(this[_0x5800a4(0x3ff,0x433)]['u'][_0x5800a4(0x392,0x3e9)])}}),'V':new Texture$1({..._0x4046e5,'source':{'arrayBufferView':new Float32Array(this[_0x5b823f(0x551,0x52a)]['v'][_0x5b823f(0x4d9,0x4e0)])}})};}[_0x3d13d6(0x103,0x161)](){function _0x409c15(_0x18e9bf,_0x453216){return _0x19c23c(_0x18e9bf-0x56f,_0x453216);}const _0xc9b77c={};_0xc9b77c[_0x409c15(0x34c,0x2c3)]=TextureMinificationFilter$1[_0x1e70b4(0x1e3,0x245)];function _0x1e70b4(_0xf4e965,_0x34df0c){return _0x3d13d6(_0x34df0c-0x14f,_0xf4e965);}_0xc9b77c['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0x1b3f45={'context':this[_0x409c15(0x3f3,0x470)],'width':this[_0x1e70b4(0x253,0x255)]['particlesTextureSize'],'height':this[_0x409c15(0x3e8,0x389)]['particlesTextureSize'],'pixelFormat':PixelFormat$1[_0x409c15(0x3ce,0x38e)],'pixelDatatype':PixelDatatype$1[_0x1e70b4(0x218,0x215)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x409c15(0x3e8,0x473)]['particlesTextureSize']*this['options'][_0x409c15(0x3c8,0x38f)]*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0xc9b77c)};this[_0x1e70b4(0x296,0x28c)]={'previousParticlesPosition':new Texture$1(_0x1b3f45),'currentParticlesPosition':new Texture$1(_0x1b3f45),'nextParticlesPosition':new Texture$1(_0x1b3f45),'postProcessingPosition':new Texture$1(_0x1b3f45),'particlesSpeed':new Texture$1(_0x1b3f45)};}['destroyParticlesTextures'](){function _0x634113(_0x2d634c,_0x1f089c){return _0x3d13d6(_0x2d634c- -0x1b3,_0x1f089c);}function _0x4c5384(_0x55d5df,_0x2ab119){return _0x19c23c(_0x2ab119-0x501,_0x55d5df);}Object[_0x634113(-0x12e,-0xef)](this['particlesTextures'])['forEach'](_0x2a0953=>_0x2a0953[_0x4c5384(0x327,0x38e)]());}['createComputingPrimitives'](){function _0x1cc269(_0x302be2,_0x15002f){return _0x19c23c(_0x15002f-0x135,_0x302be2);}function _0x5189a1(_0x343326,_0x4fdb61){return _0x3d13d6(_0x343326-0x2cf,_0x4fdb61);}this[_0x1cc269(-0xe2,-0x75)]={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this[_0x5189a1(0x353,0x2f7)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x1cc269(-0x53,-0x4f)],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this[_0x5189a1(0x3a8,0x41c)]['v']['min'],this[_0x1cc269(-0x46,-0x7f)]['v'][_0x1cc269(-0xde,-0x116)]),'speedRange':()=>new Cartesian2$1(this[_0x1cc269(-0xa,-0x7f)][_0x1cc269(-0xa3,-0xd1)]['min'],this['windData']['speed']['max']),'currentParticlesPosition':()=>this['particlesTextures'][_0x1cc269(-0xe6,-0x118)],'speedScaleFactor':()=>{function _0x5e1174(_0x20713a,_0x56d80e){return _0x5189a1(_0x20713a- -0x52d,_0x56d80e);}return(this['viewerParameters']['pixelSize']+0x32)*this[_0x5e1174(-0x158,-0xd1)]['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData']['height']),'minimum':()=>new Cartesian2$1(this['windData']['bounds'][_0x5189a1(0x3cb,0x370)],this[_0x1cc269(-0x2f,-0x7f)]['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds'][_0x1cc269(0x37,-0x26)],this[_0x1cc269(-0x30,-0x7f)][_0x5189a1(0x399,0x3b8)]['north'])},'fragmentShaderSource':ShaderManager[_0x1cc269(-0x13c,-0xc2)](),'outputTexture':this[_0x5189a1(0x40c,0x3e9)][_0x1cc269(-0xc9,-0xf2)],'preExecute':()=>{const _0x51c0f0=this[_0x25ec44(0x588,0x52f)][_0x48f4ee(-0x148,-0x1a1)];this[_0x25ec44(0x4af,0x52f)]['previousParticlesPosition']=this['particlesTextures'][_0x48f4ee(-0x20d,-0x277)];function _0x25ec44(_0x5e22d7,_0x248c96){return _0x5189a1(_0x248c96-0x123,_0x5e22d7);}this[_0x25ec44(0x4c3,0x52f)]['currentParticlesPosition']=this['particlesTextures'][_0x25ec44(0x4ac,0x439)];function _0x48f4ee(_0x553278,_0x3c26af){return _0x5189a1(_0x553278- -0x51c,_0x3c26af);}this['particlesTextures'][_0x25ec44(0x471,0x439)]=_0x51c0f0,this['primitives']['calculateSpeed'][_0x25ec44(0x4a7,0x4e1)]&&(this['primitives'][_0x25ec44(0x513,0x4a6)][_0x25ec44(0x4ca,0x4e1)]['outputTexture']=this['particlesTextures'][_0x25ec44(0x43c,0x458)]);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':_0x1cc269(-0x65,-0xc),'uniformMap':{'currentParticlesPosition':()=>this[_0x1cc269(0x17,-0x1b)][_0x5189a1(0x30f,0x309)],'particlesSpeed':()=>this['particlesTextures'][_0x5189a1(0x335,0x2b9)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x11070d(_0x111f1a,_0x5e722a){return _0x1cc269(_0x111f1a,_0x5e722a-0x190);}function _0x4af8da(_0x9c697a,_0x491ae7){return _0x5189a1(_0x9c697a- -0x3e1,_0x491ae7);}this[_0x4af8da(-0x2f,-0x6d)]['updatePosition'][_0x11070d(0x127,0x127)]&&(this[_0x4af8da(-0x2f,-0x6)]['updatePosition']['commandToExecute']['outputTexture']=this['particlesTextures'][_0x4af8da(-0x51,-0x95)]);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures']['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x5189a1(0x335,0x30c)],'lonRange':()=>this[_0x5189a1(0x376,0x3e9)]['lonRange'],'latRange':()=>this[_0x1cc269(-0xf0,-0xb1)]['latRange'],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds'][_0x1cc269(0x32,-0x26)]),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds']['south'],this[_0x5189a1(0x3a8,0x366)][_0x5189a1(0x399,0x32d)]['north']),'randomCoefficient':function(){function _0x282506(_0xdb4673,_0x54aaed){return _0x1cc269(_0x54aaed,_0xdb4673-0x62b);}return Math[_0x282506(0x52f,0x529)]();},'dropRate':()=>this['options'][_0x5189a1(0x352,0x2f7)],'dropRateBump':()=>this[_0x1cc269(-0xd,-0x52)]['dropRateBump'],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this[_0x1cc269(-0x82,-0x1b)]['postProcessingPosition'],'preExecute':()=>{function _0x8a8167(_0x498d54,_0x2d4cb9){return _0x1cc269(_0x498d54,_0x2d4cb9-0x230);}this[_0x8a8167(0x1cc,0x1bb)]['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition']['commandToExecute']['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this[_0x5189a1(0x3d5,0x3dd)]['dynamic']})};}['reCreateWindTextures'](){this[_0x3c1761(0x346,0x303)]['U']['destroy']();function _0x3c1761(_0x2d4bb7,_0xf33272){return _0x19c23c(_0xf33272-0x50c,_0x2d4bb7);}this['windTextures']['V']['destroy'](),this['createWindTextures']();}['updateWindData'](_0xab32ce){this[_0x43c8c1(0x4df,0x4d9)]=_0xab32ce;function _0x43c8c1(_0x47f9a3,_0x3f7787){return _0x19c23c(_0x47f9a3-0x693,_0x3f7787);}this['reCreateWindTextures']();}[_0x19c23c(-0x1de,-0x1c2)](_0x4c2c7b){function _0x58005a(_0x4d2899,_0x41553e){return _0x3d13d6(_0x4d2899-0x42f,_0x41553e);}const _0x376030=_0x4c2c7b[_0x58005a(0x53e,0x4cc)]!==undefined&&_0x4c2c7b[_0x58005a(0x53e,0x55e)]!==this['options']['flipY'];function _0x511075(_0x206186,_0x3e2e36){return _0x19c23c(_0x206186-0x70c,_0x3e2e36);}this['options']=deepMerge(_0x4c2c7b,this['options']),_0x376030&&this['reCreateWindTextures']();}['processWindData'](_0x33c342){const {array:_0x5e59fb}=_0x33c342;let {min:_0x3bd190,max:_0x19cb02}=_0x33c342;function _0x2aed6c(_0x2af77d,_0x213723){return _0x3d13d6(_0x2af77d-0x200,_0x213723);}const _0x4e6907=new Float32Array(_0x5e59fb[_0x2aed6c(0x23f,0x2bd)]);_0x3bd190===undefined&&(console[_0x2f33d2(0x576,0x566)]('min\x20is\x20undefined,\x20calculate\x20min'),_0x3bd190=Math[_0x2aed6c(0x309,0x329)](..._0x5e59fb));_0x19cb02===undefined&&(console[_0x2aed6c(0x328,0x2cb)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x19cb02=Math['max'](..._0x5e59fb));const _0x51aa6c=Math[_0x2aed6c(0x242,0x1f1)](Math[_0x2aed6c(0x32e,0x381)](_0x3bd190),Math[_0x2aed6c(0x32e,0x345)](_0x19cb02));function _0x2f33d2(_0x5b659d,_0x38dc66){return _0x19c23c(_0x5b659d-0x6db,_0x38dc66);}for(let _0x45ec7c=0x0;_0x45ec7c<_0x5e59fb[_0x2f33d2(0x48d,0x48a)];_0x45ec7c++){const _0x3246b9=_0x5e59fb[_0x45ec7c]/_0x51aa6c;_0x4e6907[_0x45ec7c]=_0x3246b9;}return _0x4e6907;}['destroy'](){function _0x4b8cf8(_0x3bfdd8,_0x213588){return _0x3d13d6(_0x3bfdd8-0x75,_0x213588);}Object['values'](this['windTextures'])['forEach'](_0x25feab=>_0x25feab[_0x3356c5(-0x147,-0x13a)]()),Object[_0x3356c5(-0x1cd,-0x1cf)](this[_0x4b8cf8(0x1b2,0x136)])[_0x3356c5(-0x1ef,-0x1f4)](_0x13460a=>_0x13460a['destroy']()),Object[_0x4b8cf8(0xfa,0xf5)](this['primitives'])['forEach'](_0x584eec=>_0x584eec['destroy']());function _0x3356c5(_0x1a95b8,_0x4e2b94){return _0x3d13d6(_0x4e2b94- -0x254,_0x1a95b8);}this['frameRateMonitor'][_0x3356c5(-0x122,-0x13a)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x94a275,_0x3ed2b0,_0xf24cea,_0x591cb5){this['context']=_0x94a275;function _0xa41bb2(_0x5e35e5,_0x11d3fc){return _0x3d13d6(_0x5e35e5- -0x29c,_0x11d3fc);}this['options']=_0x3ed2b0,this['viewerParameters']=_0xf24cea;function _0x389e84(_0x42c48d,_0x55ea6a){return _0x19c23c(_0x55ea6a-0x8,_0x42c48d);}this['computing']=_0x591cb5,(typeof this['options']['particlesTextureSize']!=='number'||this[_0x389e84(-0x159,-0x17f)][_0xa41bb2(-0x1b6,-0x20d)]<=0x0)&&(console[_0x389e84(-0x259,-0x212)]('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0xa41bb2(-0x196,-0x20b)]['particlesTextureSize']=0x100),this[_0x389e84(-0x21f,-0x236)]=this['createColorTableTexture'](),this['textures']=this['createRenderingTextures'](),this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}[_0x19c23c(-0x24c,-0x259)](){const _0x4e2928={};_0x4e2928['context']=this['context'],_0x4e2928['width']=this[_0x52ab5f(0x576,0x59a)]['drawingBufferWidth'],_0x4e2928['height']=this['context'][_0x2613fb(0x421,0x49a)],_0x4e2928[_0x52ab5f(0x51b,0x593)]=PixelFormat['RGBA'],_0x4e2928[_0x2613fb(0x470,0x4d1)]=PixelDatatype[_0x2613fb(0x46b,0x448)];const _0x1770eb=_0x4e2928,_0x1164b0={};_0x1164b0[_0x2613fb(0x479,0x4a0)]=this[_0x52ab5f(0x56d,0x59a)],_0x1164b0[_0x52ab5f(0x5fc,0x5ad)]=this[_0x2613fb(0x4f8,0x4a0)][_0x52ab5f(0x4cf,0x506)],_0x1164b0[_0x2613fb(0x474,0x452)]=this[_0x52ab5f(0x53f,0x59a)]['drawingBufferHeight'];function _0x2613fb(_0x59ae3d,_0x38f27c){return _0x3d13d6(_0x38f27c-0x38f,_0x59ae3d);}function _0x52ab5f(_0x354784,_0x1f67e4){return _0x3d13d6(_0x1f67e4-0x489,_0x354784);}_0x1164b0[_0x2613fb(0x4c9,0x499)]=PixelFormat['DEPTH_COMPONENT'],_0x1164b0['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x24ae30=_0x1164b0;return{'segmentsColor':new Texture(_0x1770eb),'segmentsDepth':new Texture(_0x24ae30)};}['createRenderingFramebuffers'](){function _0x309558(_0x2ed0b2,_0x36f2b2){return _0x19c23c(_0x36f2b2-0x1e,_0x2ed0b2);}const _0xc1f409={};_0xc1f409['context']=this['context'];function _0x96f4a0(_0x4b890f,_0x34939a){return _0x19c23c(_0x34939a-0x91,_0x4b890f);}return _0xc1f409['colorTextures']=[this[_0x96f4a0(-0xc5,-0xff)][_0x96f4a0(-0x1db,-0x1b9)]],_0xc1f409['depthTexture']=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0xc1f409)};}['destoryRenderingFramebuffers'](){Object['values'](this['framebuffers'])['forEach'](_0x33ffec=>{function _0x3eadc5(_0x54d052,_0xc8df81){return _0x3f03(_0x54d052-0x144,_0xc8df81);}_0x33ffec[_0x3eadc5(0x35a,0x3e4)]();});}[_0x3d13d6(0x46,0xa0)](){const _0x419bb8=new Float32Array(this[_0x1bfeb2(0x1d1,0x1e8)]['colors'][_0x1bfeb2(0x1c4,0x1c4)](_0x3f446b=>{function _0x5b987c(_0x280d44,_0x15d856){return _0x17c66f(_0x15d856,_0x280d44- -0x17a);}const _0x24527d=Color$1['fromCssColorString'](_0x3f446b);function _0x260a85(_0x416d83,_0xad5f54){return _0x17c66f(_0x416d83,_0xad5f54-0x34b);}return[_0x24527d[_0x5b987c(-0x1e2,-0x1f6)],_0x24527d['green'],_0x24527d['blue'],_0x24527d[_0x260a85(0x3a5,0x3be)]];})),_0x4bb99a={};function _0x1bfeb2(_0x59d476,_0x2adb4a){return _0x3d13d6(_0x59d476-0xcb,_0x2adb4a);}function _0x17c66f(_0x3d54af,_0xff62a8){return _0x19c23c(_0xff62a8-0x1cf,_0x3d54af);}return _0x4bb99a['minificationFilter']=TextureMinificationFilter[_0x1bfeb2(0x163,0x148)],_0x4bb99a[_0x17c66f(-0x6d,-0x33)]=TextureMagnificationFilter[_0x1bfeb2(0x163,0x176)],_0x4bb99a['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x4bb99a[_0x1bfeb2(0x1f7,0x1d6)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this[_0x17c66f(-0x4,0x53)],'width':this[_0x1bfeb2(0x1d1,0x1d8)][_0x1bfeb2(0x1e3,0x1a4)]['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype[_0x1bfeb2(0x191,0x19f)],'sampler':new Sampler(_0x4bb99a),'source':{'width':this[_0x1bfeb2(0x1d1,0x237)]['colors'][_0x17c66f(-0x53,-0x7f)],'height':0x1,'arrayBufferView':_0x419bb8}});}[_0x19c23c(-0x1d6,-0x1a9)](){const _0x2b3c6b=0x4,_0x32f223=this['options']['particlesTextureSize'];let _0x3bed76=[];function _0x5a024d(_0x475115,_0xa74d7){return _0x3d13d6(_0xa74d7-0x112,_0x475115);}for(let _0xaeeb92=0x0;_0xaeeb92<_0x32f223;_0xaeeb92++){for(let _0x102c2b=0x0;_0x102c2b<_0x32f223;_0x102c2b++){for(let _0x43d305=0x0;_0x43d305<_0x2b3c6b;_0x43d305++){_0x3bed76[_0x5a4ea4(0x41b,0x402)](_0xaeeb92/_0x32f223),_0x3bed76[_0x5a4ea4(0x47e,0x402)](_0x102c2b/_0x32f223);}}}_0x3bed76=new Float32Array(_0x3bed76);const _0x16f63f=this[_0x5a024d(0x20b,0x218)]['particlesTextureSize']**0x2;let _0x4dad88=[];for(let _0x313e20=0x0;_0x313e20<_0x16f63f;_0x313e20++){_0x4dad88['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x4dad88=new Float32Array(_0x4dad88);let _0x7b24be=[];for(let _0x2e5f56=0x0,_0x2c2fa6=0x0;_0x2e5f56<_0x16f63f;_0x2e5f56++){_0x7b24be[_0x5a4ea4(0x3eb,0x402)](_0x2c2fa6+0x0,_0x2c2fa6+0x1,_0x2c2fa6+0x2,_0x2c2fa6+0x2,_0x2c2fa6+0x1,_0x2c2fa6+0x3),_0x2c2fa6+=_0x2b3c6b;}_0x7b24be=new Uint32Array(_0x7b24be);const _0x4a6d05={};_0x4a6d05[_0x5a4ea4(0x344,0x3bb)]=ComponentDatatype[_0x5a4ea4(0x3a6,0x413)],_0x4a6d05['componentsPerAttribute']=0x2;function _0x5a4ea4(_0x3faa44,_0x2ee229){return _0x19c23c(_0x2ee229-0x5da,_0x3faa44);}_0x4a6d05['values']=_0x3bed76;const _0x33e411={};_0x33e411['componentDatatype']=ComponentDatatype[_0x5a024d(0x24c,0x1d8)],_0x33e411['componentsPerAttribute']=0x3,_0x33e411[_0x5a024d(0x10b,0x197)]=_0x4dad88;const _0x16fe26=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x4a6d05),'normal':new GeometryAttribute(_0x33e411)}),'indices':_0x7b24be});return _0x16fe26;}[_0x3d13d6(0xa4,0x91)](_0x1b31c8){const _0x4c6a54={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x1b31c8};return Appearance['getDefaultRenderState'](!![],![],_0x4c6a54);}['createPrimitives'](){const _0x459617={};_0x459617['st']=0x0,_0x459617['normal']=0x1;const _0x2beb83={};function _0xcc8eb(_0x2c05c3,_0x5acb44){return _0x3d13d6(_0x5acb44-0x349,_0x2c05c3);}_0x2beb83['enabled']=!![];const _0x541979={};_0x541979[_0xad2c7a(-0x117,-0x100)]=!![],_0x541979[_0xad2c7a(-0x145,-0x114)]=WebGLRenderingContext['FUNC_ADD'],_0x541979[_0xad2c7a(-0x13d,-0xf9)]=WebGLRenderingContext['SRC_ALPHA'],_0x541979['blendFuncDestination']=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x35ef13={};_0x35ef13[_0xad2c7a(-0x1f6,-0x227)]=undefined,_0x35ef13['depthTest']=_0x2beb83,_0x35ef13['depthMask']=!![],_0x35ef13[_0xad2c7a(-0x1c9,-0x1bd)]=_0x541979;const _0x23c648=new CustomPrimitive({'commandType':_0xcc8eb(0x427,0x3ac),'attributeLocations':_0x459617,'geometry':this['createSegmentsGeometry'](),'primitiveType':PrimitiveType[_0xad2c7a(-0x1dc,-0x16d)],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0xad2c7a(-0x123,-0xf2)][_0xad2c7a(-0x116,-0x119)]['currentParticlesPosition'],'postProcessingPosition':()=>this['computing'][_0xad2c7a(-0x116,-0xaa)][_0xad2c7a(-0x20c,-0x28a)],'particlesSpeed':()=>this['computing']['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this[_0xcc8eb(0x4fc,0x479)][_0xcc8eb(0x3a4,0x3c4)],'colorTable':()=>this[_0xcc8eb(0x37f,0x398)],'domain':()=>{var _0x17f353,_0x588fa7;function _0x20a9d5(_0x29a5d4,_0x3a5f2d){return _0xad2c7a(_0x3a5f2d-0x72a,_0x29a5d4);}const _0x1bdfb1=new Cartesian2(((_0x17f353=this[_0x20a9d5(0x59d,0x5dd)]['domain'])===null||_0x17f353===void 0x0?void 0x0:_0x17f353[_0x241c6c(0x3e9,0x46d)])??this['computing']['windData'][_0x20a9d5(0x5c5,0x55e)]['min'],((_0x588fa7=this[_0x241c6c(0x3e6,0x447)]['domain'])===null||_0x588fa7===void 0x0?void 0x0:_0x588fa7[_0x241c6c(0x322,0x35d)])??this['computing']['windData']['speed']['max']);function _0x241c6c(_0x3a0a8b,_0x45d9ba){return _0xad2c7a(_0x3a0a8b-0x533,_0x45d9ba);}return _0x1bdfb1;},'displayRange':()=>{var _0x3523f4,_0x321a7a;function _0x3951ca(_0x49005f,_0xd0df46){return _0xcc8eb(_0xd0df46,_0x49005f- -0x1c8);}const _0x25d8de=new Cartesian2(((_0x3523f4=this[_0x5aef24(-0xd8,-0x15e)]['displayRange'])===null||_0x3523f4===void 0x0?void 0x0:_0x3523f4[_0x5aef24(-0x168,-0x15b)])??this[_0x5aef24(-0xbe,-0x134)]['windData']['speed'][_0x3951ca(0x28a,0x2ce)],((_0x321a7a=this['options']['displayRange'])===null||_0x321a7a===void 0x0?void 0x0:_0x321a7a['max'])??this['computing']['windData']['speed']['max']);function _0x5aef24(_0x4c99cc,_0x561b07){return _0xcc8eb(_0x4c99cc,_0x561b07- -0x5ad);}return _0x25d8de;},'particleHeight':()=>this[_0xcc8eb(0x40d,0x44f)]['fixedHeight']||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters'][_0xad2c7a(-0x182,-0x20d)],'lineWidth':()=>{const _0x2296b2={};_0x2296b2['min']=0x1;function _0xae5e32(_0xe12e3c,_0x524b3d){return _0xad2c7a(_0xe12e3c-0x63e,_0x524b3d);}function _0x9925c9(_0x502d96,_0x53ac37){return _0xcc8eb(_0x502d96,_0x53ac37- -0x193);}_0x2296b2[_0xae5e32(0x42d,0x3dc)]=0x2;const _0x3892ae=this[_0xae5e32(0x4f1,0x579)]['lineWidth']||_0x2296b2;return new Cartesian2(_0x3892ae['min'],_0x3892ae[_0xae5e32(0x42d,0x3d0)]);},'lineLength':()=>{function _0x5cbb43(_0x480484,_0x2e3305){return _0xcc8eb(_0x2e3305,_0x480484- -0x152);}function _0x443b3e(_0xa0cec5,_0x3b83ad){return _0xad2c7a(_0x3b83ad-0x712,_0xa0cec5);}const _0x145087={};_0x145087['min']=0x14,_0x145087[_0x5cbb43(0x239,0x22c)]=0x64;const _0x3b5778=this['options']['lineLength']||_0x145087;return new Cartesian2(_0x3b5778['min'],_0x3b5778[_0x5cbb43(0x239,0x1ee)]);},'is3D':()=>this[_0xcc8eb(0x3bd,0x3f0)][_0xcc8eb(0x3ae,0x3de)]===SceneMode[_0xcc8eb(0x47b,0x3f6)],'segmentsDepthTexture':()=>this[_0xad2c7a(-0x156,-0x130)][_0xcc8eb(0x422,0x480)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x35ef13)}),_0x98c15a={};_0x98c15a[_0xcc8eb(0x3dd,0x43c)]=_0x23c648;function _0xad2c7a(_0x528f5f,_0x1ee933){return _0x19c23c(_0x528f5f-0x3a,_0x1ee933);}return _0x98c15a;}['onParticlesTextureSizeChange'](){function _0x5f596c(_0x192e86,_0x396665){return _0x3d13d6(_0x396665-0x2c3,_0x192e86);}const _0x2aaf13=this[_0xee971(0x294,0x216)]();this[_0xee971(0x2b3,0x242)][_0xee971(0x209,0x252)][_0x5f596c(0x3b9,0x399)]=_0x2aaf13;function _0xee971(_0xce6966,_0x5db0b0){return _0x19c23c(_0x5db0b0-0x3ec,_0xce6966);}const _0x50e95c={};_0x50e95c[_0x5f596c(0x414,0x3d4)]=this[_0x5f596c(0x400,0x3d4)],_0x50e95c['geometry']=_0x2aaf13,_0x50e95c['attributeLocations']=this[_0x5f596c(0x425,0x3a6)][_0x5f596c(0x43b,0x3b6)]['attributeLocations'],_0x50e95c['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0xd895bc=VertexArray[_0xee971(0x240,0x202)](_0x50e95c);this['primitives']['segments'][_0x5f596c(0x3b0,0x3b2)]&&(this[_0x5f596c(0x39e,0x3a6)][_0xee971(0x1d4,0x252)][_0x5f596c(0x3d9,0x3b2)]['vertexArray']=_0xd895bc);}[_0x3d13d6(0x51,0x75)](){function _0x40fe5e(_0x218c90,_0x32f4f2){return _0x3d13d6(_0x218c90- -0x174,_0x32f4f2);}this[_0x40fe5e(-0x125,-0xe7)]['destroy'](),this['colorTable']=this['createColorTableTexture']();}[_0x3d13d6(0xaf,0x6a)](_0x1c025f){function _0x23d4dc(_0x367799,_0xeeb230){return _0x3d13d6(_0xeeb230-0x73,_0x367799);}function _0x24131c(_0xe75931,_0x50aafd){return _0x3d13d6(_0xe75931-0x332,_0x50aafd);}const _0x536ef5=_0x1c025f['colors']&&JSON['stringify'](_0x1c025f['colors'])!==JSON[_0x23d4dc(0x13a,0x1bc)](this['options'][_0x23d4dc(0x143,0x18b)]);this['options']=deepMerge(_0x1c025f,this[_0x23d4dc(0x101,0x179)]),_0x536ef5&&this[_0x24131c(0x383,0x3ef)]();}['destroy'](){function _0x13cf72(_0x3b3ba2,_0x5201d5){return _0x3d13d6(_0x5201d5-0x3c1,_0x3b3ba2);}function _0x36e5f5(_0x1ce5fa,_0x370a17){return _0x19c23c(_0x370a17-0x613,_0x1ce5fa);}Object[_0x13cf72(0x468,0x446)](this['framebuffers'])['forEach'](_0x482994=>{function _0x3848d2(_0x1ad948,_0x5b0e56){return _0x13cf72(_0x1ad948,_0x5b0e56-0x10b);}_0x482994[_0x3848d2(0x659,0x5e6)]();}),Object[_0x13cf72(0x43a,0x446)](this[_0x36e5f5(0x441,0x469)])['forEach'](_0x5bab43=>{_0x5bab43['destroy']();}),this['colorTable'][_0x36e5f5(0x418,0x4a0)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x3d13d6(0x6c,0x28)];class WindParticleSystem{constructor(_0x171846,_0x1149d0,_0x27f342,_0x604a87,_0x13571e){this['context']=_0x171846,this[_0x2a75c2(-0x183,-0x134)]=_0x27f342,this['viewerParameters']=_0x604a87;function _0x2a75c2(_0x519fd8,_0x204e3e){return _0x19c23c(_0x204e3e-0x53,_0x519fd8);}this['computing']=new WindParticlesComputing(_0x171846,_0x1149d0,_0x27f342,_0x604a87,_0x13571e),this['rendering']=new WindParticlesRendering(_0x171846,_0x27f342,_0x604a87,this[_0x2a75c2(-0x181,-0x10a)]);function _0xc1083a(_0xe58067,_0x5b0a4a){return _0x19c23c(_0x5b0a4a-0x22d,_0xe58067);}this['clearFramebuffers']();}['getPrimitives'](){function _0x608456(_0x3280f5,_0x22c889){return _0x19c23c(_0x3280f5-0x72c,_0x22c889);}function _0x58e65e(_0x2fab81,_0x65dc8a){return _0x3d13d6(_0x2fab81-0x3e7,_0x65dc8a);}const _0x103c53=[this['computing']['primitives']['calculateSpeed'],this['computing']['primitives'][_0x608456(0x53d,0x5a5)],this[_0x58e65e(0x517,0x4b5)]['primitives'][_0x608456(0x4e6,0x50e)],this[_0x58e65e(0x526,0x55c)][_0x58e65e(0x4ca,0x540)][_0x608456(0x592,0x59a)]];return _0x103c53;}['clearFramebuffers'](){function _0x5351ea(_0x3a497d,_0x5abead){return _0x19c23c(_0x3a497d-0x603,_0x5abead);}const _0x1fe54d=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x2c6eb2(-0x1bc,-0x1a6)]});function _0x2c6eb2(_0x2964ea,_0x43c357){return _0x19c23c(_0x2964ea-0x68,_0x43c357);}Object[_0x2c6eb2(-0x18e,-0x143)](this[_0x2c6eb2(-0xe6,-0x5f)]['framebuffers'])['forEach'](_0x30bf6d=>{_0x1fe54d['framebuffer']=this[_0x21ce94(0x4aa,0x4b5)]['framebuffers'][_0x30bf6d];function _0x1d47aa(_0x241b1a,_0x3b498c){return _0x5351ea(_0x3b498c- -0x2c1,_0x241b1a);}function _0x21ce94(_0x1d00e7,_0x1f47ce){return _0x2c6eb2(_0x1f47ce-0x59b,_0x1d00e7);}_0x1fe54d[_0x1d47aa(0x1cf,0x1a5)](this[_0x21ce94(0x509,0x487)]);});}['changeOptions'](_0x55ec72){let _0x168ba=![];function _0x17e676(_0x44623a,_0x1558c6){return _0x3d13d6(_0x44623a-0x487,_0x1558c6);}_0x55ec72[_0x2adffe(0x4f7,0x46d)]&&this['options']['particlesTextureSize']!==_0x55ec72[_0x2adffe(0x4f7,0x4c4)]&&(_0x168ba=!![]);function _0x2adffe(_0x5b03ef,_0x142be8){return _0x3d13d6(_0x5b03ef-0x411,_0x142be8);}const _0x2482bc=deepMerge(_0x55ec72,this['options']);if(_0x2482bc['particlesTextureSize']<0x1)throw new Error(_0x2adffe(0x4c3,0x498));this['options']=_0x2482bc,this[_0x2adffe(0x550,0x5d4)]['updateOptions'](_0x55ec72),this['computing'][_0x17e676(0x536,0x56a)](_0x55ec72),_0x168ba&&(this['computing'][_0x17e676(0x57b,0x586)](),this['computing']['createParticlesTextures'](),this[_0x2adffe(0x550,0x559)][_0x2adffe(0x463,0x4e0)]());}['applyViewerParameters'](_0x111bf8){this['viewerParameters']=_0x111bf8,this['computing']['viewerParameters']=_0x111bf8,this['rendering']['viewerParameters']=_0x111bf8;}['destroy'](){function _0x36b809(_0x310e15,_0x351987){return _0x3d13d6(_0x310e15- -0xdb,_0x351987);}this['computing']['destroy'](),this['rendering'][_0x36b809(0x3f,0x55)]();}}const Cesium$1=mars3d__namespace[_0x19c23c(-0x221,-0x294)],BaseLayer$1=mars3d__namespace[_0x3d13d6(0x144,0x15d)][_0x3d13d6(0x139,0x151)],_0x572ded={};_0x572ded['min']=0x1,_0x572ded[_0x19c23c(-0x24b,-0x1e3)]=0x2;function _0x3f03(_0x57b12e,_0x3c3d1c){const _0x59ff78=_0x59ff();return _0x3f03=function(_0x3f03ba,_0x343617){_0x3f03ba=_0x3f03ba-0x134;let _0x5ddd68=_0x59ff78[_0x3f03ba];return _0x5ddd68;},_0x3f03(_0x57b12e,_0x3c3d1c);}const _0x2e9a51={};_0x2e9a51[_0x3d13d6(0x109,0x12f)]=0x14,_0x2e9a51[_0x3d13d6(0x42,0x1c)]=0x64;const _0x3b58a4={};_0x3b58a4['particlesTextureSize']=0x64,_0x3b58a4['fixedHeight']=0x0,_0x3b58a4[_0x19c23c(-0x16a,-0x124)]=_0x572ded,_0x3b58a4[_0x19c23c(-0x16c,-0x1de)]=_0x2e9a51,_0x3b58a4['speedFactor']=0x1,_0x3b58a4['dropRate']=0.003,_0x3b58a4['dropRateBump']=0.001,_0x3b58a4['colors']=[_0x3d13d6(0x74,0x2e)],_0x3b58a4['flipY']=![],_0x3b58a4['dynamic']=!![];const DEF_OPTIONS=_0x3b58a4;class WindLayer extends BaseLayer$1{constructor(_0xcec9f5={}){_0xcec9f5={...DEF_OPTIONS,..._0xcec9f5},super(_0xcec9f5);function _0x6edc65(_0x44c29f,_0x23ffaa){return _0x3d13d6(_0x44c29f-0x3ac,_0x23ffaa);}this[_0x6edc65(0x3f4,0x45f)](_0xcec9f5,_0xcec9f5);}get['layer'](){return this['primitives'];}get['data'](){function _0x3a9565(_0x363e3b,_0x3815b9){return _0x19c23c(_0x3815b9-0x87,_0x363e3b);}return this['options'][_0x3a9565(-0xc8,-0x148)];}set['data'](_0x5d1ef6){function _0x54108a(_0x676759,_0x2875ca){return _0x3d13d6(_0x2875ca-0x3e,_0x676759);}this[_0x54108a(0x1a9,0x144)]['data']=_0x5d1ef6;function _0x2807f8(_0x13fb78,_0x185c1f){return _0x3d13d6(_0x185c1f-0xdb,_0x13fb78);}this[_0x54108a(0x19d,0x13c)](_0x5d1ef6);}get[_0x19c23c(-0x175,-0x14a)](){return this['options']['colors'];}set['colors'](_0x421ba1){this['options']['colors']=_0x421ba1;const _0x3917f0={};_0x3917f0['colors']=_0x421ba1;function _0x59f0da(_0x4e0607,_0x37c74e){return _0x19c23c(_0x37c74e-0x14e,_0x4e0607);}this[_0x59f0da(-0x91,-0xf7)](this['options'],_0x3917f0);}[_0x3d13d6(0x120,0xd3)](){}[_0x3d13d6(0xb6,0x97)](){this[_0x59c5dd(0x573,0x5c4)]=this['_map'][_0x59c5dd(0x623,0x5c4)],this[_0x18f212(0x11a,0x19c)]=this['_map']['camera'];this[_0x59c5dd(0x559,0x5b6)][_0x18f212(0x11c,0xb8)]&&this['setData'](this['options']['data']);if(!this['windData'])return;this[_0x59c5dd(0x4cd,0x557)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1[(_0x59c5dd(0x4fb,0x54d))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x59c5dd(0x54b,0x5c4)][_0x18f212(0x97,0x102)]};function _0x18f212(_0xd5c968,_0x189d22){return _0x19c23c(_0xd5c968-0x2eb,_0x189d22);}this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene']['context'],this[_0x18f212(0x137,0x11b)],this['options'],this['viewerParameters'],this[_0x18f212(0x172,0x18d)]),this[_0x59c5dd(0x518,0x593)]=this['particleSystem'][_0x59c5dd(0x594,0x512)](),this[_0x18f212(0x141,0x17d)]['forEach'](_0x3d1905=>{function _0x4a3ecc(_0x45a6ed,_0x42200c){return _0x59c5dd(_0x42200c,_0x45a6ed- -0x3a6);}function _0x290c58(_0x10f789,_0x386242){return _0x18f212(_0x10f789-0x1e0,_0x386242);}this[_0x290c58(0x352,0x2d3)]['primitives'][_0x290c58(0x36d,0x348)](_0x3d1905);});function _0x59c5dd(_0x200bc9,_0x3b9605){return _0x3d13d6(_0x3b9605-0x4b0,_0x200bc9);}this['camera']['percentageChanged']=0.01,this['camera']['changed'][_0x59c5dd(0x5fc,0x584)](this['updateViewerParameters']['bind'](this)),this['scene'][_0x59c5dd(0x520,0x52e)][_0x59c5dd(0x560,0x584)](this[_0x59c5dd(0x592,0x508)]['bind'](this)),window['addEventListener'](_0x59c5dd(0x520,0x4e8),this['updateViewerParameters']['bind'](this));}['_removedHook'](){function _0x3769cc(_0x45c7af,_0x5a381a){return _0x19c23c(_0x45c7af-0x70a,_0x5a381a);}function _0x450402(_0x4d3e20,_0x72a67a){return _0x19c23c(_0x4d3e20-0x74c,_0x72a67a);}this['camera'][_0x450402(0x59a,0x552)]['removeEventListener'](this['updateViewerParameters']['bind'](this)),this[_0x3769cc(0x591,0x57c)]['morphComplete'][_0x450402(0x59d,0x600)](this['updateViewerParameters']['bind'](this)),window['removeEventListener']('resize',this['updateViewerParameters']['bind'](this)),this[_0x450402(0x5a2,0x602)]&&(this['primitives'][_0x3769cc(0x4dd,0x4a4)](_0x5527c8=>{function _0x4ad6f1(_0x2b32f5,_0x18ddf2){return _0x450402(_0x2b32f5- -0x66e,_0x18ddf2);}function _0x35c2d0(_0x3b40ea,_0x28622c){return _0x3769cc(_0x3b40ea- -0x4c2,_0x28622c);}this[_0x4ad6f1(-0x9b,-0x4a)][_0x35c2d0(0x9e,0xee)]['remove'](_0x5527c8);}),delete this[_0x450402(0x5a2,0x5dc)]),this[_0x450402(0x5e1,0x578)]&&(this['particleSystem']['destroy'](),delete this['particleSystem']);}[_0x3d13d6(0xfe,0xfe)](_0x13570a,_0x528c66){function _0x32138e(_0x118d54,_0x207acb){return _0x3d13d6(_0x118d54-0x26b,_0x207acb);}this[_0x467e30(0x26a,0x226)]=this[_0x467e30(0x186,0x1cc)](_0x13570a);if(_0x528c66){this[_0x32138e(0x2eb,0x338)](),this[_0x467e30(0x28d,0x203)]();return;}function _0x467e30(_0x212601,_0x2dcc9d){return _0x3d13d6(_0x2dcc9d-0x14d,_0x212601);}this[_0x467e30(0x23a,0x26f)]?(this[_0x32138e(0x38d,0x308)]['computing'][_0x467e30(0x14e,0x1cf)](this['windData']),this['scene']['requestRender']()):this['_addedHook']();}[_0x19c23c(-0x245,-0x268)](_0x2ee7eb,_0xda7ec5){function _0x2e24f2(_0x226568,_0x4c43fd){return _0x19c23c(_0x226568-0x60c,_0x4c43fd);}function _0x5f43c9(_0x39f7e1,_0x2c5732){return _0x19c23c(_0x39f7e1-0x172,_0x2c5732);}this['particleSystem']&&(this['particleSystem'][_0x5f43c9(-0x4,-0x87)](_0xda7ec5),this[_0x5f43c9(-0x7,-0x37)][_0x2e24f2(0x481,0x470)]());}['processWindData'](_0x183f09){var _0x35757d,_0x483aae;const _0xf4525d={..._0x183f09},_0x41dc81=_0xf4525d;!_0x41dc81['height']&&_0x41dc81[_0x248d90(-0x176,-0x1a3)]&&(_0x41dc81['height']=_0x41dc81[_0x248d90(-0x176,-0x18f)]);!_0x41dc81['width']&&_0x41dc81[_0x248d90(-0x189,-0x1ce)]&&(_0x41dc81[_0x248d90(-0xda,-0x91)]=_0x41dc81['cols']);function _0x232c2b(_0x18a2f4,_0x9c5f1f){return _0x3d13d6(_0x9c5f1f-0x3ed,_0x18a2f4);}!_0x41dc81[_0x232c2b(0x4bc,0x4b7)]&&(_0x41dc81['bounds']={'west':_0x41dc81['xmin'],'south':_0x41dc81['ymin'],'east':_0x41dc81['xmax'],'north':_0x41dc81['ymax']});function _0x248d90(_0x13a83b,_0xe6edb1){return _0x19c23c(_0x13a83b-0x8f,_0xe6edb1);}if(!_0x41dc81['u']){const _0x5c95b6={};_0x5c95b6['array']=_0x183f09['udata'],_0x5c95b6[_0x248d90(-0xf5,-0x9e)]=_0x183f09[_0x248d90(-0x1c4,-0x210)],_0x5c95b6['max']=_0x183f09['umax'],_0x41dc81['u']=_0x5c95b6;}if(!_0x41dc81['v']){const _0x2cdb53={};_0x2cdb53['array']=_0x183f09[_0x232c2b(0x4b7,0x4cf)],_0x2cdb53['min']=_0x183f09['vmin'],_0x2cdb53['max']=_0x183f09[_0x248d90(-0x186,-0x108)],_0x41dc81['v']=_0x2cdb53;}if(((_0x35757d=_0x41dc81[_0x248d90(-0x177,-0x176)])===null||_0x35757d===void 0x0?void 0x0:_0x35757d['min'])===undefined||((_0x483aae=_0x41dc81['speed'])===null||_0x483aae===void 0x0?void 0x0:_0x483aae['max'])===undefined||_0x41dc81[_0x232c2b(0x401,0x474)][_0x248d90(-0x16f,-0x1b6)]===undefined){const _0x4dffbe={'array':new Float32Array(_0x41dc81['u']['array'][_0x248d90(-0x1bf,-0x232)]),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0x246e45=0x0;_0x246e45<_0x41dc81['u']['array']['length'];_0x246e45++){_0x4dffbe[_0x232c2b(0x4f8,0x47c)][_0x246e45]=Math['sqrt'](_0x41dc81['u']['array'][_0x246e45]*_0x41dc81['u']['array'][_0x246e45]+_0x41dc81['v']['array'][_0x246e45]*_0x41dc81['v'][_0x232c2b(0x4df,0x47c)][_0x246e45]),_0x4dffbe['array'][_0x246e45]!==0x0&&(_0x4dffbe['min']=Math['min'](_0x4dffbe['min'],_0x4dffbe['array'][_0x246e45]),_0x4dffbe['max']=Math[_0x232c2b(0x3bb,0x42f)](_0x4dffbe['max'],_0x4dffbe[_0x248d90(-0x16f,-0x1dd)][_0x246e45]));}_0x41dc81['speed']=_0x4dffbe;}return _0x41dc81;}[_0x3d13d6(0x58,0xbb)](){var _0x20ffe3;const _0x1e74a2=this['scene'],_0x4a8deb=_0x1e74a2[_0x4bcffa(0x451,0x49a)];function _0x4bcffa(_0x41c02a,_0x2df8ae){return _0x3d13d6(_0x2df8ae-0x37f,_0x41c02a);}const _0x3a2843={};_0x3a2843['x']=0x0,_0x3a2843['y']=0x0;const _0x446ccb={};function _0x3e4349(_0x5af951,_0x197c1c){return _0x19c23c(_0x197c1c-0x5e6,_0x5af951);}_0x446ccb['x']=0x0,_0x446ccb['y']=_0x4a8deb['clientHeight'];const _0x1c65e1={};_0x1c65e1['x']=_0x4a8deb['clientWidth'],_0x1c65e1['y']=0x0;const _0x2108b4={};_0x2108b4['x']=_0x4a8deb['clientWidth'],_0x2108b4['y']=_0x4a8deb['clientHeight'];const _0x1df02b=[_0x3a2843,_0x446ccb,_0x1c65e1,_0x2108b4];let _0x5946ea=0xb4,_0x37e517=-0xb4,_0x564147=0x5a,_0xe2345d=-0x5a,_0x159fc7=![];for(const _0x5ac2b5 of _0x1df02b){const _0x226f32=_0x1e74a2[_0x4bcffa(0x3df,0x43b)]['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x5ac2b5['x'],_0x5ac2b5['y']),_0x1e74a2[_0x3e4349(0x494,0x45d)]['ellipsoid']);if(!_0x226f32){_0x159fc7=!![];break;}const _0x590330=_0x1e74a2['globe']['ellipsoid']['cartesianToCartographic'](_0x226f32),_0x5decfc=Cesium$1['Math']['toDegrees'](_0x590330['longitude']),_0x17330f=Cesium$1[_0x4bcffa(0x49b,0x4bd)][_0x3e4349(0x4a0,0x41b)](_0x590330['latitude']);_0x5946ea=Math['min'](_0x5946ea,_0x5decfc),_0x37e517=Math['max'](_0x37e517,_0x5decfc),_0x564147=Math[_0x3e4349(0x42d,0x462)](_0x564147,_0x17330f),_0xe2345d=Math['max'](_0xe2345d,_0x17330f);}if(!_0x159fc7){const _0x48fb28=new Cesium$1['Cartesian2'](Math['max'](this['windData'][_0x4bcffa(0x3e4,0x449)][_0x3e4349(0x4c4,0x455)],_0x5946ea),Math[_0x3e4349(0x487,0x462)](this['windData'][_0x4bcffa(0x3ef,0x449)]['east'],_0x37e517)),_0xaee226=new Cesium$1['Cartesian2'](Math[_0x3e4349(0x35f,0x39b)](this['windData'][_0x3e4349(0x42f,0x423)][_0x4bcffa(0x47c,0x3f8)],_0x564147),Math['min'](this[_0x4bcffa(0x3fc,0x458)]['bounds'][_0x4bcffa(0x4b6,0x447)],_0xe2345d)),_0x7036a7=(_0x48fb28['y']-_0x48fb28['x'])*0.05,_0x4dd990=(_0xaee226['y']-_0xaee226['x'])*0.05;_0x48fb28['x']=Math[_0x4bcffa(0x3c3,0x3c1)](this['windData']['bounds']['west'],_0x48fb28['x']-_0x7036a7),_0x48fb28['y']=Math['min'](this['windData']['bounds']['east'],_0x48fb28['y']+_0x7036a7),_0xaee226['x']=Math['max'](this[_0x3e4349(0x44b,0x432)]['bounds'][_0x3e4349(0x397,0x3d2)],_0xaee226['x']-_0x4dd990),_0xaee226['y']=Math['min'](this[_0x4bcffa(0x49e,0x458)]['bounds']['north'],_0xaee226['y']+_0x4dd990),this['viewerParameters'][_0x4bcffa(0x477,0x49e)]=_0x48fb28,this['viewerParameters']['latRange']=_0xaee226;const _0x8b9186=this['windData']['bounds']['east']-this['windData'][_0x3e4349(0x47e,0x423)][_0x3e4349(0x3e6,0x455)],_0x5a85b6=this[_0x4bcffa(0x470,0x458)]['bounds']['north']-this['windData']['bounds']['south'],_0x1e839c=(_0x48fb28['y']-_0x48fb28['x'])/_0x8b9186,_0x29c8c8=(_0xaee226['y']-_0xaee226['x'])/_0x5a85b6,_0x172ab5=Math['min'](_0x1e839c,_0x29c8c8),_0x52aa59=0x3e8*_0x172ab5;_0x52aa59>0x0&&(this['viewerParameters'][_0x3e4349(0x412,0x42a)]=Math['max'](0x0,Math['min'](0x3e8,_0x52aa59)));}this[_0x4bcffa(0x3bd,0x426)][_0x3e4349(0x36b,0x3ee)]=this['scene'][_0x3e4349(0x3e9,0x392)],(_0x20ffe3=this['particleSystem'])===null||_0x20ffe3===void 0x0||_0x20ffe3['applyViewerParameters'](this[_0x3e4349(0x384,0x400)]);}['getDataAtLonLat'](_0x233e8c,_0x1bf7e1){const {bounds:_0x5eb8f0,width:_0x552541,height:_0x326cb6,u:_0x5537e9,v:_0x137d1d,speed:_0x273a9e}=this['windData'];function _0x43b38d(_0x1153ba,_0x541a09){return _0x3d13d6(_0x541a09-0x33,_0x1153ba);}const {flipY:_0x15ac26}=this['options'];if(_0x233e8c<_0x5eb8f0[_0x43b38d(0x1a5,0x12f)]||_0x233e8c>_0x5eb8f0['east']||_0x1bf7e1<_0x5eb8f0['south']||_0x1bf7e1>_0x5eb8f0[_0x2f1d22(0xc5,0x14c)])return null;const _0x16fe48=(_0x233e8c-_0x5eb8f0['west'])/(_0x5eb8f0['east']-_0x5eb8f0['west'])*(_0x552541-0x1);let _0x177547=(_0x1bf7e1-_0x5eb8f0['south'])/(_0x5eb8f0['north']-_0x5eb8f0['south'])*(_0x326cb6-0x1);_0x15ac26&&(_0x177547=_0x326cb6-0x1-_0x177547);const _0xbe8c17=Math[_0x2f1d22(0xde,0x10c)](_0x16fe48),_0x4c0fb9=Math[_0x43b38d(0xe9,0x114)](_0x177547),_0xdfcddd=Math[_0x43b38d(0xc5,0x114)](_0x16fe48),_0x1e21e3=Math['min'](_0xdfcddd+0x1,_0x552541-0x1),_0x31a29a=Math['floor'](_0x177547),_0x21b0c2=Math[_0x43b38d(0x11e,0x13c)](_0x31a29a+0x1,_0x326cb6-0x1),_0x16a363=_0x16fe48-_0xdfcddd,_0x17cb5e=_0x177547-_0x31a29a,_0x2951dd=_0x4c0fb9*_0x552541+_0xbe8c17,_0x3be205=_0x31a29a*_0x552541+_0xdfcddd,_0x4f20a3=_0x31a29a*_0x552541+_0x1e21e3,_0x435685=_0x21b0c2*_0x552541+_0xdfcddd,_0x165647=_0x21b0c2*_0x552541+_0x1e21e3,_0x2991f9=_0x5537e9['array'][_0x3be205],_0x54b899=_0x5537e9[_0x43b38d(0xc9,0xc2)][_0x4f20a3],_0x369cc8=_0x5537e9[_0x2f1d22(0x8c,0xec)][_0x435685],_0x27df18=_0x5537e9['array'][_0x165647],_0x37a54d=(0x1-_0x16a363)*(0x1-_0x17cb5e)*_0x2991f9+_0x16a363*(0x1-_0x17cb5e)*_0x54b899+(0x1-_0x16a363)*_0x17cb5e*_0x369cc8+_0x16a363*_0x17cb5e*_0x27df18,_0x159e36=_0x137d1d['array'][_0x3be205],_0x3b728f=_0x137d1d[_0x43b38d(0xe1,0xc2)][_0x4f20a3],_0x59912e=_0x137d1d[_0x2f1d22(0x8c,0xcb)][_0x435685],_0x53f669=_0x137d1d[_0x2f1d22(0x8c,0x68)][_0x165647],_0x5f386f=(0x1-_0x16a363)*(0x1-_0x17cb5e)*_0x159e36+_0x16a363*(0x1-_0x17cb5e)*_0x3b728f+(0x1-_0x16a363)*_0x17cb5e*_0x59912e+_0x16a363*_0x17cb5e*_0x53f669,_0x58bbcc=Math['sqrt'](_0x37a54d*_0x37a54d+_0x5f386f*_0x5f386f),_0x13f4a1={};_0x13f4a1['u']=_0x5537e9[_0x43b38d(0x13e,0xc2)][_0x2951dd],_0x13f4a1['v']=_0x137d1d['array'][_0x2951dd],_0x13f4a1['speed']=_0x273a9e[_0x43b38d(0x66,0xc2)][_0x2951dd];const _0x36ea12={};function _0x2f1d22(_0x32f298,_0x1c2319){return _0x19c23c(_0x32f298-0x28a,_0x1c2319);}_0x36ea12['u']=_0x37a54d,_0x36ea12['v']=_0x5f386f,_0x36ea12['speed']=_0x58bbcc;const _0x3b1478={};return _0x3b1478['original']=_0x13f4a1,_0x3b1478['interpolated']=_0x36ea12,_0x3b1478;}}mars3d__namespace['LayerUtil'][_0x3d13d6(0xa9,0xb8)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x13c9b2(_0x87fd71,_0x2cf6f1){return _0x3d13d6(_0x2cf6f1- -0xda,_0x87fd71);}this['lng']=null;function _0x228026(_0x14f530,_0xf05bf8){return _0x3d13d6(_0x14f530-0x4ce,_0xf05bf8);}this[_0x228026(0x602,0x602)]=null,this[_0x228026(0x5aa,0x51f)]=null,this[_0x13c9b2(0x43,-0x2f)]=null,this[_0x13c9b2(-0x6,-0x2)]=null,this['speed']=null;}['destroy'](){for(const _0x196cd2 in this){delete this[_0x196cd2];}}}class CanvasWindField{constructor(_0x149a14){this['setOptions'](_0x149a14);}get[_0x3d13d6(0x71,0x81)](){function _0x252f45(_0x3914aa,_0x30baa4){return _0x19c23c(_0x3914aa-0x50d,_0x30baa4);}return this[_0x252f45(0x2e5,0x343)];}set['speedRate'](_0x2b0adb){function _0x12eedb(_0x304f45,_0x23c3db){return _0x19c23c(_0x23c3db-0x68a,_0x304f45);}function _0x37413a(_0x1409a8,_0x5e9876){return _0x3d13d6(_0x5e9876-0x2d1,_0x1409a8);}this['_speedRate']=(0x64-(_0x2b0adb>0x63?0x63:_0x2b0adb))*0x64,this['_calc_speedRate']=[(this['xmax']-this['xmin'])/this['_speedRate'],(this[_0x37413a(0x3b9,0x39a)]-this[_0x37413a(0x384,0x36b)])/this[_0x37413a(0x3a8,0x336)]];}get[_0x3d13d6(0xf7,0x12a)](){function _0x304c20(_0x305b42,_0x13b279){return _0x19c23c(_0x13b279-0xf8,_0x305b42);}return this[_0x304c20(-0x94,-0x50)];}set[_0x3d13d6(0xf7,0x14e)](_0x543234){function _0x2398b0(_0x18ca90,_0x3d288c){return _0x19c23c(_0x18ca90-0x364,_0x3d288c);}this[_0x2398b0(0x21c,0x25a)]=_0x543234;}[_0x19c23c(-0x18e,-0x12a)](_0x22f76d){this['options']=_0x22f76d;function _0x55a238(_0x5c001e,_0x25600f){return _0x19c23c(_0x5c001e-0x1c,_0x25600f);}this[_0x55a238(-0x17a,-0x18d)]=_0x22f76d['maxAge']||0x78,this['speedRate']=_0x22f76d['speedRate']||0x32,this[_0x55a238(-0x236,-0x1c7)]=[];function _0x3ef913(_0x2d7902,_0x552d9d){return _0x19c23c(_0x552d9d-0x3e5,_0x2d7902);}const _0x11fb47=_0x22f76d['particlesNumber']||0x1000;for(let _0x3a1eea=0x0;_0x3a1eea<_0x11fb47;_0x3a1eea++){const _0x377fb8=this[_0x55a238(-0x15c,-0xfd)](new CanvasParticle());this[_0x3ef913(0x1a1,0x193)]['push'](_0x377fb8);}}[_0x3d13d6(0x13b,0x14e)](_0x1ab8f0){this[_0x5a49f8(0x46c,0x456)]=_0x1ab8f0[_0x5a49f8(0x46c,0x494)],this[_0x492e5d(0x449,0x41b)]=_0x1ab8f0['cols'],this[_0x492e5d(0x474,0x4fd)]=_0x1ab8f0['xmin'],this['xmax']=_0x1ab8f0[_0x5a49f8(0x451,0x3ce)];function _0x492e5d(_0x3cdfcc,_0x1e3de4){return _0x19c23c(_0x3cdfcc-0x661,_0x1e3de4);}this['ymin']=_0x1ab8f0[_0x5a49f8(0x47e,0x448)];function _0x5a49f8(_0x25d11e,_0x1e9d88){return _0x3d13d6(_0x25d11e-0x3e4,_0x1e9d88);}this['ymax']=_0x1ab8f0['ymax'],this[_0x492e5d(0x4b1,0x4b6)]=[];const _0x4b19e5=_0x1ab8f0['udata'],_0x48ffb6=_0x1ab8f0[_0x5a49f8(0x4c6,0x531)];let _0x54bdf3=![];_0x4b19e5[_0x5a49f8(0x423,0x3d9)]===this['rows']&&_0x4b19e5[0x0]['length']===this[_0x492e5d(0x449,0x433)]&&(_0x54bdf3=!![]);let _0x22ec65=0x0,_0x308558=null,_0x7a97=null;for(let _0x3a5fba=0x0;_0x3a5fba<this['rows'];_0x3a5fba++){_0x308558=[];for(let _0x7fa74a=0x0;_0x7fa74a<this[_0x5a49f8(0x459,0x3dc)];_0x7fa74a++,_0x22ec65++){_0x54bdf3?_0x7a97=this['_calcUV'](_0x4b19e5[_0x3a5fba][_0x7fa74a],_0x48ffb6[_0x3a5fba][_0x7fa74a]):_0x7a97=this['_calcUV'](_0x4b19e5[_0x22ec65],_0x48ffb6[_0x22ec65]),_0x308558['push'](_0x7a97);}this['grid']['push'](_0x308558);}!this['options']['flipY']&&this[_0x492e5d(0x4b1,0x514)]['reverse']();}[_0x3d13d6(0x107,0x18e)](){delete this[_0x4524d5(0x49f,0x41c)],delete this['cols'],delete this['xmin'];function _0x4524d5(_0x5f4eb2,_0x2ce3f5){return _0x19c23c(_0x5f4eb2-0x6a4,_0x2ce3f5);}delete this[_0x4524d5(0x484,0x449)],delete this[_0xbff1c5(0x65,-0x2)],delete this[_0xbff1c5(-0x13,0x2d)];function _0xbff1c5(_0x5d94eb,_0x14862d){return _0x19c23c(_0x14862d-0x1f1,_0x5d94eb);}delete this['grid'],delete this['particles'];}[_0x3d13d6(0x64,0xdc)](_0x48e2a1,_0x208287){function _0x202f1a(_0x52ec12,_0x270b7c){return _0x19c23c(_0x52ec12-0x537,_0x270b7c);}const _0x156362=(_0x48e2a1-this[_0x53d2c5(-0xce,-0x4f)])/(this[_0x202f1a(0x317,0x38c)]-this[_0x53d2c5(-0x3a,-0x4f)])*(this['cols']-0x1);function _0x53d2c5(_0x4690e5,_0x48455d){return _0x3d13d6(_0x48455d- -0xef,_0x4690e5);}const _0x37de64=(this['ymax']-_0x208287)/(this[_0x53d2c5(0x59,-0x26)]-this[_0x53d2c5(0xd,-0x55)])*(this['rows']-0x1);return[_0x156362,_0x37de64];}[_0x3d13d6(0x5a,-0x16)](_0x595894,_0xdcc63f){if(_0x595894<0x0||_0x595894>=this['cols']||_0xdcc63f>=this['rows'])return[0x0,0x0,0x0];const _0x254d77=Math[_0x8182e8(0x38b,0x402)](_0x595894),_0x5149e6=Math[_0x8182e8(0x38b,0x3f2)](_0xdcc63f);function _0x1e0443(_0x26dda7,_0x146c47){return _0x19c23c(_0x146c47-0x1b4,_0x26dda7);}if(_0x254d77===_0x595894&&_0x5149e6===_0xdcc63f)return this['grid'][_0xdcc63f][_0x595894];const _0x43c0df=_0x254d77+0x1,_0x2ad70b=_0x5149e6+0x1,_0x5a6946=this['getUVByXY'](_0x254d77,_0x5149e6),_0x2f37d0=this['getUVByXY'](_0x43c0df,_0x5149e6),_0x50c8d0=this[_0x8182e8(0x304,0x2e1)](_0x254d77,_0x2ad70b);function _0x8182e8(_0x2e7ce1,_0x3c05cf){return _0x3d13d6(_0x2e7ce1-0x2aa,_0x3c05cf);}const _0x52c4f6=this['getUVByXY'](_0x43c0df,_0x2ad70b);let _0x2e8527=null;try{_0x2e8527=this[_0x8182e8(0x311,0x2ca)](_0x595894-_0x254d77,_0xdcc63f-_0x5149e6,_0x5a6946,_0x2f37d0,_0x50c8d0,_0x52c4f6);}catch(_0x4d697d){console[_0x1e0443(-0x6a,-0x37)](_0x595894,_0xdcc63f);}return _0x2e8527;}[_0x3d13d6(0x67,0xc1)](_0x776355,_0x33fdb7,_0x28b2d9,_0x136f3e,_0xa17963,_0xba370){const _0x59d970=0x1-_0x776355,_0x4b8f42=0x1-_0x33fdb7,_0x1fd966=_0x59d970*_0x4b8f42,_0x4cdec6=_0x776355*_0x4b8f42,_0x37b78b=_0x59d970*_0x33fdb7,_0x5e5fb5=_0x776355*_0x33fdb7,_0x398b73=_0x28b2d9[0x0]*_0x1fd966+_0x136f3e[0x0]*_0x4cdec6+_0xa17963[0x0]*_0x37b78b+_0xba370[0x0]*_0x5e5fb5,_0x3172b4=_0x28b2d9[0x1]*_0x1fd966+_0x136f3e[0x1]*_0x4cdec6+_0xa17963[0x1]*_0x37b78b+_0xba370[0x1]*_0x5e5fb5;return this['_calcUV'](_0x398b73,_0x3172b4);}['_calcUV'](_0x15e31f,_0x37e9e4){return[+_0x15e31f,+_0x37e9e4,Math['sqrt'](_0x15e31f*_0x15e31f+_0x37e9e4*_0x37e9e4)];}[_0x3d13d6(0x8d,0x76)](_0x1a1cd3,_0x180cf7){if(!this['isInExtent'](_0x1a1cd3,_0x180cf7))return null;const _0x40cc93=this['toGridXY'](_0x1a1cd3,_0x180cf7),_0x153c83=this[_0x33ab0e(0x4d6,0x489)](_0x40cc93[0x0],_0x40cc93[0x1]);function _0x33ab0e(_0x371165,_0x4256f7){return _0x3d13d6(_0x371165-0x47c,_0x4256f7);}return _0x153c83;}[_0x19c23c(-0x19f,-0x1ec)](_0xda82b6,_0x2ce74d){function _0x1ded93(_0x7a87da,_0x58f04){return _0x3d13d6(_0x7a87da-0x106,_0x58f04);}function _0xd31440(_0x11a191,_0x5e2a57){return _0x3d13d6(_0x5e2a57-0x34,_0x11a191);}return _0xda82b6>=this['xmin']&&_0xda82b6<=this[_0xd31440(0xad,0xa1)]&&_0x2ce74d>=this[_0xd31440(0xb6,0xce)]&&_0x2ce74d<=this[_0x1ded93(0x1cf,0x14d)]?!![]:![];}['getRandomLatLng'](){const _0x5734a7=fRandomByfloat(this['xmin'],this['xmax']),_0x5a9fec=fRandomByfloat(this['ymin'],this['ymax']),_0x31a7={};function _0xe154d3(_0x282248,_0x5cc6c1){return _0x19c23c(_0x5cc6c1-0x2c4,_0x282248);}return _0x31a7[_0xe154d3(0x18f,0x16b)]=_0x5a9fec,_0x31a7['lng']=_0x5734a7,_0x31a7;}[_0x19c23c(-0x211,-0x21c)](){function _0x17c7a6(_0x23aa8a,_0x1b430c){return _0x19c23c(_0x23aa8a-0x299,_0x1b430c);}function _0x5ccff9(_0x25f6c9,_0x196f61){return _0x19c23c(_0x25f6c9-0x3fd,_0x196f61);}let _0x23b147,_0x4c7b06,_0x34383a;for(let _0x36dcaa=0x0,_0x124731=this['particles'][_0x17c7a6(0x4b,0x21)];_0x36dcaa<_0x124731;_0x36dcaa++){let _0x3ff096=this['particles'][_0x36dcaa];_0x3ff096['age']<=0x0&&(_0x3ff096=this['_randomParticle'](_0x3ff096));if(_0x3ff096['age']>0x0){const _0x27ffff=_0x3ff096[_0x17c7a6(0xe8,0x171)],_0x37ffa6=_0x3ff096[_0x5ccff9(0x21b,0x203)];_0x34383a=this['getUVByPoint'](_0x27ffff,_0x37ffa6),_0x34383a?(_0x23b147=_0x27ffff+this['_calc_speedRate'][0x0]*_0x34383a[0x0],_0x4c7b06=_0x37ffa6+this['_calc_speedRate'][0x1]*_0x34383a[0x1],_0x3ff096['lng']=_0x27ffff,_0x3ff096['lat']=_0x37ffa6,_0x3ff096[_0x17c7a6(0xe8,0xa5)]=_0x23b147,_0x3ff096[_0x5ccff9(0x21b,0x190)]=_0x4c7b06,_0x3ff096['speed']=_0x34383a[0x2],_0x3ff096['age']--):_0x3ff096[_0x17c7a6(0xe4,0x148)]=0x0;}}return this[_0x17c7a6(0x47,0xa3)];}[_0x19c23c(-0x178,-0xfd)](_0x5c09d8){let _0x335ef4,_0x5b550f;for(let _0x3d5081=0x0;_0x3d5081<0x1e;_0x3d5081++){_0x335ef4=this[_0x166b19(-0xf2,-0x13e)](),_0x5b550f=this['getUVByPoint'](_0x335ef4[_0x46698b(0x3c,-0x19)],_0x335ef4['lat']);if(_0x5b550f&&_0x5b550f[0x2]>0x0)break;}if(!_0x5b550f)return _0x5c09d8;const _0x3f62fd=_0x335ef4['lng']+this[_0x46698b(0x81,0x70)][0x0]*_0x5b550f[0x0],_0x1dc525=_0x335ef4['lat']+this['_calc_speedRate'][0x1]*_0x5b550f[0x1];_0x5c09d8['lng']=_0x335ef4['lng'],_0x5c09d8[_0x166b19(-0xec,-0x72)]=_0x335ef4[_0x166b19(-0x1a,-0x72)],_0x5c09d8[_0x166b19(-0x4f,-0xca)]=_0x3f62fd,_0x5c09d8[_0x46698b(0x4,0x3b)]=_0x1dc525,_0x5c09d8['age']=Math[_0x46698b(-0x1a,0x48)](0xa+Math[_0x46698b(-0x7e,-0x14)]()*this['maxAge']);function _0x46698b(_0x5a2c8a,_0x1bf217){return _0x3d13d6(_0x1bf217- -0x70,_0x5a2c8a);}function _0x166b19(_0xf5b498,_0x4db99e){return _0x19c23c(_0x4db99e-0xe7,_0xf5b498);}return _0x5c09d8['speed']=_0x5b550f[0x2],_0x5c09d8;}[_0x19c23c(-0x173,-0x174)](){for(const _0x51cb34 in this){delete this[_0x51cb34];}}}function fRandomByfloat(_0x39fb8b,_0x1f9b4f){return _0x39fb8b+Math['random']()*(_0x1f9b4f-_0x39fb8b);}const Cesium=mars3d__namespace['Cesium'];function _0x3d13d6(_0x4a5c9a,_0x43b934){return _0x3f03(_0x4a5c9a- -0xfc,_0x43b934);}const BaseLayer=mars3d__namespace['layer'][_0x3d13d6(0x139,0xdf)];function _0x59ff(){const _0x5d02df=['owner','data','11mZVVri','alt','nextParticlesPosition','toDegrees','height','660255uxucoK','frameRateMonitor','FLOAT','160692uCZPBr','north','ymax','bounds','clientWidth','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','worker','IDENTITY','6534909LnwsGK','9577130nGyAyo','pixelSize','getSegmentDrawVertexShader','stroke','addEventListener','beginPath','geometry','shaderProgram','age','windData','frameRate','changed','tlng','grid','removeEventListener','getColor','_calc_speedRate','floor','vdata','primitives','pointer-events','toRadians','particlesTextureSize','commandList','globalCompositeOperation','createWindTextures','canvasContext','mars3d-canvasWind','RGBA','all','isInExtent','commandToExecute','execute','wheel','uniformMap','segments','destroyParticlesTextures','atan2','NEAREST','maxAge','fromDegrees','flatMap','commandType','bindEvent','west','textures','setData','setOptions','_canvasParticles','mouseMove','requestRender','createParticlesTextures','globe','previousParticlesPosition','options','clear','bind','min','pixelFormat','drawingBufferHeight','style','getSpeed','blendEquation','flipY','EventType','context','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','#ffffff','scene','_randomParticle','blendFuncSource','changeOptions','colors','visibility','destroy','canvas','windField','getPostProcessingPositionShader','canvasWind','lonRange','_mountedHook','lineLength','particleSystem','lineWidth','width','init','fragmentShaderSource','createCommand','warn','getOwnPropertyDescriptor','canvasHeight','cancelAnimationFrame','wrapT','pow','abs','add','computing','alpha','east','_updateIng2','lat','postMessage','__esModule','segmentsDepth','type','BaseLayer','container','setDate','enabled','particlesTextures','Math','rendering','RED','WindUtil','pixelDatatype','quietPeriod','layer','_maxAge','initFrameRate','update','outputTexture','stringify','primitiveType','_canrefresh','Compute','1259464sNhMff','mouse_move','resize','mode','umin','particles','positionWC','_animateFrame','preExecute','length','currentParticlesPosition','createRenderingTextures','max','segmentsColor','_onMouseDownEvent','_tomap','createColorTableTexture','postProcessingPosition','_setOptionsHook','samplingWindow','sources','WindLayer','absolute','_map','1463TrqYJd','colorTable','zIndex','onColorTableChange','onParticlesTextureSizeChange','mouseHidden','now','_showHook','red','lng','updateViewerParameters','mouseUp','getUVByXY','vertexShaderSource','random','viewport','383587TZWzdr','frameTime','forEach','_updateIng','getPrimitives','Draw','toGridXY','_speedRate','particlesSpeed','_bilinearInterpolation','getRandomLatLng','OPAQUE','minificationFilter','default','Cesium','xmax','componentDatatype','rawRenderState','_colorRamp','speedRate','particlesNumber','error','rgb(206,255,255)','cols','defineProperty','TRIANGLES','vmax','south','_onMapWhellEvent','frameRateAdjustment','getParticles','drawingBufferWidth','morphComplete','processWindData','_removedHook','mouseDown','updateWindData','dropRate','windTextures','values','canvasWidth','speed','rows','fixedHeight','blending','magnificationFilter','getUpdatePositionShader','getUVByPoint','willReadFrequently','array','0px','SceneMode','autoClear','16336whaUEv','refreshTimer','sceneMode','getCalculateSpeedShader','keys','LINEAR','color','ymin','moveTo','framebuffer','Cartesian2','updatePosition','isPointVisible','xmin','4HbBocj','log','fromGeometry','createRawRenderState','mouse_down','isDynamic','viewerParameters','show','register','110EXfWFN','tlat','vertexArray','SCENE3D','Cartesian3','updateOptions','talt','PointTrans','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','pointerEvents','calculateSpeed','push','_addedHook','createSegmentsGeometry','round','UNSIGNED_BYTE','attributeLocations','_drawLines','camera'];_0x59ff=function(){return _0x5d02df;};return _0x59ff();}class CanvasWindLayer extends BaseLayer{constructor(_0x5a6b7d={}){super(_0x5a6b7d),this['_setOptionsHook'](_0x5a6b7d),this['canvas']=null;function _0x58e3b3(_0x8094b,_0x2bf3bd){return _0x19c23c(_0x8094b-0x50e,_0x2bf3bd);}_0x5a6b7d['colors']&&_0x5a6b7d['steps']&&(this[_0x58e3b3(0x2f1,0x268)]=new mars3d__namespace['ColorRamp'](_0x5a6b7d));}['_setOptionsHook'](_0x2c6b0a,_0xe8ed82){function _0x554813(_0x8a5724,_0x193143){return _0x3d13d6(_0x8a5724-0x27b,_0x193143);}this[_0x554813(0x2da,0x25b)]=0x3e8/(_0x2c6b0a['frameRate']||0xa),this['_pointerEvents']=this[_0x234b8c(0x250,0x20f)]['pointerEvents']??![];function _0x234b8c(_0x3d8b0f,_0x23cede){return _0x3d13d6(_0x3d8b0f-0x14a,_0x23cede);}this[_0x234b8c(0x1e3,0x1ef)]=_0x2c6b0a['color']||_0x234b8c(0x25d,0x202),this[_0x234b8c(0x26d,0x248)]=_0x2c6b0a['lineWidth']||0x1,this['fixedHeight']=_0x2c6b0a['fixedHeight']??0x0,this['flipY']=_0x2c6b0a['flipY']??![],this['windField']&&this[_0x234b8c(0x266,0x270)][_0x234b8c(0x249,0x1d3)](_0x2c6b0a);}get['layer'](){function _0x2dcf25(_0x57c7f6,_0xd2f2eb){return _0x3d13d6(_0x57c7f6- -0x1f,_0xd2f2eb);}return this[_0x2dcf25(0xfc,0x155)];}get['canvasWidth'](){function _0x51cbeb(_0x3ae07f,_0x2e81a6){return _0x3d13d6(_0x2e81a6-0xda,_0x3ae07f);}function _0x2d672d(_0x2c3609,_0x78d318){return _0x3d13d6(_0x78d318- -0x16,_0x2c3609);}return this[_0x2d672d(0xbd,0x37)]['scene']['canvas'][_0x2d672d(0x63,0xb5)];}get[_0x3d13d6(0x12a,0xab)](){function _0x12c16d(_0x169670,_0x2ae130){return _0x19c23c(_0x169670-0xcb,_0x2ae130);}return this['_map'][_0x12c16d(-0xae,-0x80)]['canvas']['clientHeight'];}get[_0x3d13d6(0xb3,0x12c)](){return this['_pointerEvents'];}set[_0x3d13d6(0xb3,0x2d)](_0x5b8acb){this['_pointerEvents']=_0x5b8acb;function _0x570267(_0x38a1af,_0x5983c1){return _0x3d13d6(_0x5983c1-0x13b,_0x38a1af);}function _0x17cafd(_0x4255b7,_0x3727c8){return _0x3d13d6(_0x4255b7- -0x178,_0x3727c8);}if(!this[_0x17cafd(-0x5d,-0x9f)])return;_0x5b8acb?this[_0x17cafd(-0x5d,-0xa6)]['style']['pointer-events']=_0x17cafd(-0x8b,-0x21):this['canvas'][_0x570267(0x1db,0x247)][_0x17cafd(-0x94,-0x98)]='none';}get['particlesNumber'](){function _0x19d880(_0x510030,_0x5076de){return _0x3d13d6(_0x510030- -0x208,_0x5076de);}return this[_0x19d880(-0x102,-0x88)]['particlesNumber'];}set[_0x3d13d6(0x72,0xa0)](_0xd1e139){this['options'][_0x48af12(-0x23d,-0x224)]=_0xd1e139;function _0xffadb4(_0x255cec,_0x1d5a64){return _0x3d13d6(_0x255cec- -0x2ab,_0x1d5a64);}function _0x48af12(_0x1debf6,_0x5476fc){return _0x3d13d6(_0x5476fc- -0x296,_0x1debf6);}clearTimeout(this['_canrefresh']),this[_0x48af12(-0x163,-0x14b)]=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){return this['options']['speedRate'];}set['speedRate'](_0x20e587){function _0x561412(_0x4581e4,_0xb2b190){return _0x19c23c(_0x4581e4-0x491,_0xb2b190);}function _0xff86f0(_0x38970e,_0x3d7c6d){return _0x19c23c(_0x3d7c6d-0x48,_0x38970e);}this[_0x561412(0x30a,0x308)]['speedRate']=_0x20e587,this['windField']&&(this[_0x561412(0x320,0x357)]['speedRate']=_0x20e587);}get['maxAge'](){return this['options']['maxAge'];}set['maxAge'](_0x4efea5){function _0x1339b3(_0x59af5e,_0x4fb3f6){return _0x3d13d6(_0x59af5e-0x15f,_0x4fb3f6);}function _0x4f1cd2(_0x29854a,_0x5a90bc){return _0x3d13d6(_0x29854a-0x148,_0x5a90bc);}this['options']['maxAge']=_0x4efea5,this['windField']&&(this[_0x4f1cd2(0x264,0x2cd)][_0x1339b3(0x256,0x28a)]=_0x4efea5);}get['data'](){return this['windData'];}set['data'](_0x4600bf){this['setData'](_0x4600bf);}get['rectangle'](){function _0x31f13b(_0x558525,_0x170665){return _0x19c23c(_0x170665-0x742,_0x558525);}let _0x1bb702=this['windData']['xmin'],_0x22d30b=this['windData']['xmax'],_0x4b6008=this['windData'][_0x31f13b(0x568,0x54f)],_0x31d54a=this[_0x31f13b(0x5fd,0x58e)][_0x377b00(-0xcc,-0xd2)];_0x22d30b>=0x167&&_0x1bb702===0x0&&(_0x1bb702=-0xb4,_0x22d30b=0xb4);_0x1bb702=Math[_0x31f13b(0x4dc,0x4f7)](_0x1bb702,-0xb4),_0x22d30b=Math['min'](_0x22d30b,0xb4),_0x4b6008=Math['max'](_0x4b6008,-0x5a),_0x31d54a=Math['min'](_0x31d54a,0x5a);function _0x377b00(_0x4ab3ec,_0x4f29ad){return _0x3d13d6(_0x4ab3ec- -0x195,_0x4f29ad);}return Cesium['Rectangle']['fromDegrees'](_0x1bb702,_0x4b6008,_0x22d30b,_0x31d54a);}[_0x3d13d6(0x55,-0x2b)](_0x4df672){function _0x5d0ee6(_0x2d5d43,_0x3248aa){return _0x19c23c(_0x2d5d43-0x511,_0x3248aa);}function _0x3677a4(_0x380ee6,_0x382e9c){return _0x19c23c(_0x382e9c-0x1c,_0x380ee6);}_0x4df672?this['_addedHook']():(this[_0x5d0ee6(0x35d,0x2f6)]&&(this['options']['data']=this['windData']),this[_0x5d0ee6(0x304,0x2ba)]());}['_mountedHook'](){function _0x6c897b(_0x41dfb5,_0x42841d){return _0x19c23c(_0x41dfb5-0x37e,_0x42841d);}function _0x4073a6(_0x5a5d0b,_0x239480){return _0x19c23c(_0x5a5d0b-0x5d8,_0x239480);}this['options'][_0x4073a6(0x418,0x460)]?this['initWorker']():this['windField']=new CanvasWindField(this[_0x6c897b(0x1f7,0x1f8)]);}['_addedHook'](){this['canvas']=this['_createCanvas']();function _0x562f00(_0x25d65d,_0xcbc2c0){return _0x19c23c(_0xcbc2c0-0x8b,_0x25d65d);}const _0x48de38={};_0x48de38[_0x2a4094(0x48e,0x4b6)]=!![];function _0x2a4094(_0x3f2a32,_0x2afead){return _0x19c23c(_0x2afead-0x6b5,_0x3f2a32);}this['canvasContext']=this['canvas']['getContext']('2d',_0x48de38),this[_0x2a4094(0x56b,0x523)](),this[_0x2a4094(0x4b4,0x52e)]['data']&&this['setData'](this[_0x562f00(-0xe0,-0xfc)][_0x562f00(-0x1ba,-0x144)]);}[_0x3d13d6(0x80,0x51)](){function _0x498790(_0x35c77a,_0x326953){return _0x19c23c(_0x35c77a-0x5ad,_0x326953);}this['clear']();function _0x41960a(_0x1f727d,_0x5ba808){return _0x19c23c(_0x1f727d-0x3f9,_0x5ba808);}this['unbindEvent'](),this[_0x498790(0x43b,0x495)]&&(this[_0x498790(0x36d,0x2e7)][_0x41960a(0x2a6,0x309)]['removeChild'](this[_0x498790(0x43b,0x47f)]),delete this[_0x498790(0x43b,0x418)]);}['_createCanvas'](){const _0x4f5df1=mars3d__namespace['DomUtil']['create'](_0x2e6d1a(0x264,0x249),_0x3e06bb(0x416,0x485),this['_map'][_0x2e6d1a(0x283,0x211)]);function _0x3e06bb(_0x3ca177,_0x2100a0){return _0x3d13d6(_0x3ca177-0x32b,_0x2100a0);}_0x4f5df1['style']['position']=_0x3e06bb(0x377,0x30b),_0x4f5df1[_0x3e06bb(0x437,0x3f1)]['top']=_0x3e06bb(0x3bb,0x349),_0x4f5df1[_0x3e06bb(0x437,0x3c2)]['left']='0px';function _0x2e6d1a(_0x12ab1a,_0x53ef94){return _0x3d13d6(_0x12ab1a-0x149,_0x53ef94);}return _0x4f5df1['style']['width']=this[_0x3e06bb(0x378,0x338)]['scene'][_0x3e06bb(0x446,0x4ce)]['clientWidth']+'px',_0x4f5df1['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x4f5df1['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x4f5df1[_0x3e06bb(0x437,0x449)][_0x3e06bb(0x37b,0x38e)]=this['options'][_0x2e6d1a(0x199,0x1ed)]??0x9,_0x4f5df1['width']=this['_map']['scene'][_0x2e6d1a(0x264,0x2a1)]['clientWidth'],_0x4f5df1[_0x2e6d1a(0x20c,0x1b6)]=this['_map'][_0x2e6d1a(0x25d,0x228)]['canvas']['clientHeight'],_0x4f5df1;}[_0x19c23c(-0x255,-0x1ea)](){function _0x551b68(_0x49bceb,_0x394837){return _0x3d13d6(_0x394837-0x2da,_0x49bceb);}function _0x513bf3(_0x475040,_0x12fbc2){return _0x19c23c(_0x475040-0x76,_0x12fbc2);}this['canvas']&&(this['canvas'][_0x551b68(0x45d,0x3e6)][_0x551b68(0x38a,0x3fe)]=this['_map']['scene'][_0x513bf3(-0xfc,-0x132)][_0x551b68(0x334,0x3a5)]+'px',this['canvas']['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this[_0x551b68(0x432,0x3f5)][_0x551b68(0x376,0x3fe)]=this['_map'][_0x513bf3(-0x103,-0x167)]['canvas']['clientWidth'],this['canvas']['height']=this['_map']['scene']['canvas']['clientHeight']);}[_0x19c23c(-0x192,-0x1b9)](){const _0x3f97f8=this;let _0x4e6ae8=Date[_0xdf6031(0x4a9,0x4dc)]();(function _0x4eb28e(){if(_0x3f97f8['isDestroy'])return;function _0x59075b(_0x4366e5,_0x563755){return _0xdf6031(_0x4366e5,_0x563755- -0x362);}_0x3f97f8[_0x5a466a(0x33f,0x355)]=window['requestAnimationFrame'](_0x4eb28e);function _0x5a466a(_0x35d48e,_0x5236b5){return _0xdf6031(_0x35d48e,_0x5236b5- -0x170);}if(_0x3f97f8[_0x59075b(0x20a,0x1ce)]&&_0x3f97f8['windField']){const _0x34cdaf=Date['now'](),_0x1b4209=_0x34cdaf-_0x4e6ae8;_0x1b4209>_0x3f97f8[_0x59075b(0x192,0x185)]&&(_0x4e6ae8=_0x34cdaf-_0x1b4209%_0x3f97f8['frameTime'],_0x3f97f8['update']());}}());function _0xdf6031(_0x8ebc82,_0x3c600a){return _0x3d13d6(_0x3c600a-0x488,_0x8ebc82);}function _0x48a294(_0x1cfd89,_0x2a72ae){return _0x3d13d6(_0x1cfd89-0x419,_0x2a72ae);}window['addEventListener'](_0x48a294(0x451,0x452),this[_0xdf6031(0x529,0x4c0)]['bind'](this),![]),this[_0x48a294(0x4be,0x51a)]=![],this[_0x48a294(0x567,0x592)]=![],this['options'][_0xdf6031(0x46d,0x4db)]&&(this[_0x48a294(0x466,0x46f)]['on'](mars3d__namespace['EventType']['wheel'],this[_0x48a294(0x493,0x433)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace[_0xdf6031(0x585,0x598)][_0x48a294(0x472,0x41a)],this['_onMouseUpEvent'],this));}['unbindEvent'](){window[_0x17a501(0x2eb,0x26d)](this['_animateFrame']);function _0x3dc197(_0xcb0db5,_0xa5396b){return _0x19c23c(_0xa5396b-0x4de,_0xcb0db5);}function _0x17a501(_0x512599,_0x15b901){return _0x19c23c(_0x15b901-0x3cf,_0x512599);}delete this[_0x3dc197(0x2d8,0x28e)],window[_0x17a501(0x195,0x220)](_0x17a501(0x18b,0x17a),this['resize']),this[_0x17a501(0x263,0x248)]['mouseHidden']&&(this['_map']['off'](mars3d__namespace['EventType'][_0x17a501(0x2ab,0x233)],this['_onMapWhellEvent'],this),this[_0x3dc197(0x322,0x29e)]['off'](mars3d__namespace[_0x3dc197(0x3bc,0x361)][_0x17a501(0x1a3,0x1c3)],this[_0x3dc197(0x2b5,0x295)],this),this[_0x3dc197(0x276,0x29e)]['off'](mars3d__namespace['EventType'][_0x3dc197(0x22f,0x2aa)],this['_onMouseUpEvent'],this),this['_map']['off'](mars3d__namespace[_0x17a501(0x21d,0x252)][_0x3dc197(0x382,0x352)],this['_onMouseMoveEvent'],this));}[_0x3d13d6(0x7a,0xc)](_0x11146c){function _0xa8f96d(_0x46ac94,_0x38b484){return _0x19c23c(_0x46ac94-0x113,_0x38b484);}clearTimeout(this[_0x2468c6(0x45e,0x404)]);function _0x2468c6(_0x1a4871,_0x2b614d){return _0x19c23c(_0x2b614d-0x5fd,_0x1a4871);}if(!this[_0x2468c6(0x436,0x418)]||!this['canvas'])return;this[_0xa8f96d(-0x5f,0x21)][_0xa8f96d(-0x6e,-0xce)]['visibility']='hidden',this['refreshTimer']=setTimeout(()=>{function _0x3ac0b3(_0x14b55a,_0x1c6889){return _0x2468c6(_0x14b55a,_0x1c6889-0x47);}if(!this['show'])return;this['redraw']();function _0x4daa74(_0x2e1e22,_0x179f50){return _0x2468c6(_0x2e1e22,_0x179f50-0x63);}this[_0x4daa74(0x4b9,0x4ee)][_0x4daa74(0x46a,0x4df)][_0x3ac0b3(0x533,0x4d0)]='visible';},0xc8);}[_0x3d13d6(0x44,0x8)](_0x57e142){this[_0xe75382(0x4a6,0x4e6)]=!![];function _0x5cb9ac(_0x3c56da,_0x52f9f4){return _0x3d13d6(_0x3c56da-0x42a,_0x52f9f4);}this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0xe75382(_0xd783df,_0x292c63){return _0x3d13d6(_0x292c63-0x441,_0xd783df);}this['_map']['on'](mars3d__namespace['EventType'][_0xe75382(0x4d2,0x542)],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x35d9ed){function _0x4b1787(_0x5798a5,_0x55955d){return _0x3d13d6(_0x55955d- -0x227,_0x5798a5);}if(!this['show']||!this[_0x4b1787(-0x17f,-0x10c)])return;this['mouse_down']&&(this['canvas']['style']['visibility']='hidden',this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x5c19b4){function _0x523e8d(_0x55d71c,_0x471f49){return _0x3d13d6(_0x55d71c- -0xbc,_0x471f49);}if(!this['show']||!this['canvas'])return;this[_0x523e8d(-0x6f,-0xd8)]['off'](mars3d__namespace[_0x49c0aa(0x353,0x351)][_0x49c0aa(0x305,0x342)],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this['redraw']();this['canvas']['style']['visibility']='visible',this['mouse_down']=![];function _0x49c0aa(_0x576769,_0xc32a4c){return _0x3d13d6(_0xc32a4c-0x241,_0x576769);}this[_0x523e8d(0x92,0x35)]=![];}[_0x19c23c(-0x18f,-0x116)](_0x1bae5c){this['clear'](),this['windData']=_0x1bae5c,this['windField']['setDate'](_0x1bae5c),this['redraw']();}['redraw'](){if(!this['show'])return;this[_0x2865e1(-0x1c9,-0x162)][_0x2865e1(-0x1e6,-0x233)](this[_0x478e4d(0x5bf,0x5ea)]);function _0x478e4d(_0x58ca53,_0xfc3a2){return _0x3d13d6(_0xfc3a2-0x4e4,_0x58ca53);}function _0x2865e1(_0xa6da6f,_0x13d974){return _0x19c23c(_0xa6da6f- -0x58,_0x13d974);}this[_0x478e4d(0x664,0x62b)]();}['update'](){if(this['_updateIng'])return;function _0x3482b3(_0x5bc22f,_0x208374){return _0x19c23c(_0x208374-0x491,_0x5bc22f);}this['_updateIng']=!![];function _0x537b18(_0x586593,_0x588870){return _0x3d13d6(_0x586593-0x373,_0x588870);}if(this['worker'])this['windField'][_0x3482b3(0x339,0x34b)]();else{const _0x4f039c=this['windField'][_0x3482b3(0x2bd,0x280)]();this['_drawLines'](_0x4f039c);}this[_0x3482b3(0x25a,0x265)]=![];}['_drawLines'](_0x43a40d){function _0x2b2aca(_0x2cd1f8,_0x11a439){return _0x19c23c(_0x2cd1f8-0x2f1,_0x11a439);}this[_0x2e8ff7(0x356,0x3cc)]=_0x43a40d,this[_0x2e8ff7(0x340,0x342)]['globalCompositeOperation']='destination-in',this[_0x2e8ff7(0x340,0x2ff)]['fillRect'](0x0,0x0,this['canvasWidth'],this['canvasHeight']),this['canvasContext'][_0x2e8ff7(0x33e,0x3b8)]='lighter',this[_0x2b2aca(0x14e,0x182)]['globalAlpha']=0.9;const _0x4a1677=this[_0x2e8ff7(0x2a3,0x2e9)]['scene']['mode']!==Cesium['SceneMode'][_0x2e8ff7(0x303,0x31a)],_0x5f36fb=this[_0x2b2aca(0xea,0xce)]*0.25;function _0x2e8ff7(_0x427df9,_0x478dee){return _0x19c23c(_0x427df9-0x4e3,_0x478dee);}if(this['_colorRamp'])for(let _0x522ac2=0x0,_0x44603e=_0x43a40d['length'];_0x522ac2<_0x44603e;_0x522ac2++){const _0x4de917=_0x43a40d[_0x522ac2],_0x2569cb=this['_tomap'](_0x4de917,_0x4de917[_0x2b2aca(0xbb,0x9a)],_0x4de917[_0x2e8ff7(0x38a,0x357)],_0x4de917['alt']),_0x259e5c=this['_tomap'](_0x4de917,_0x4de917[_0x2e8ff7(0x332,0x346)],_0x4de917['tlat'],_0x4de917[_0x2e8ff7(0x306,0x2a9)]);if(!_0x2569cb||!_0x259e5c)continue;if(_0x4a1677&&Math[_0x2e8ff7(0x384,0x3c4)](_0x2569cb[0x0]-_0x259e5c[0x0])>=_0x5f36fb)continue;this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this[_0x2b2aca(0x187,0x156)],this['canvasContext']['strokeStyle']=this['_colorRamp'][_0x2b2aca(0x143,0x1b0)](_0x4de917[_0x2e8ff7(0x2dd,0x273)]),this['canvasContext']['moveTo'](_0x2569cb[0x0],_0x2569cb[0x1]),this['canvasContext']['lineTo'](_0x259e5c[0x0],_0x259e5c[0x1]),this[_0x2e8ff7(0x340,0x365)][_0x2e8ff7(0x329,0x2e6)]();}else{this[_0x2b2aca(0x14e,0x112)][_0x2e8ff7(0x32b,0x2df)](),this['canvasContext'][_0x2b2aca(0x187,0x11c)]=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x2e8ff7(0x2ef,0x275)];for(let _0x53c11f=0x0,_0x3fbec3=_0x43a40d['length'];_0x53c11f<_0x3fbec3;_0x53c11f++){const _0x591e47=_0x43a40d[_0x53c11f],_0x3e4102=this['_tomap'](_0x591e47,_0x591e47['lng'],_0x591e47['lat'],_0x591e47[_0x2b2aca(0x124,0xe4)]),_0x53cc56=this[_0x2b2aca(0xa9,0x12f)](_0x591e47,_0x591e47[_0x2e8ff7(0x332,0x38d)],_0x591e47[_0x2b2aca(0x10f,0xd1)],_0x591e47[_0x2e8ff7(0x306,0x2dd)]);if(!_0x3e4102||!_0x53cc56)continue;if(_0x4a1677&&Math[_0x2e8ff7(0x384,0x3f3)](_0x3e4102[0x0]-_0x53cc56[0x0])>=_0x5f36fb)continue;this['canvasContext'][_0x2b2aca(0xff,0x94)](_0x3e4102[0x0],_0x3e4102[0x1]),this['canvasContext']['lineTo'](_0x53cc56[0x0],_0x53cc56[0x1]);}this[_0x2e8ff7(0x340,0x364)]['stroke']();}}[_0x3d13d6(0x45,0x30)](_0x2c94dd,_0x4a9650,_0x2b4bbd,_0x13a5e6){const _0x16abf9=Cesium[_0xcc00d5(0x55d,0x5c9)][_0xcc00d5(0x5a7,0x5a3)](_0x4a9650,_0x2b4bbd,_0x13a5e6??this[_0xcc00d5(0x538,0x513)]);function _0x17d6e8(_0x245cfb,_0x55fcd6){return _0x19c23c(_0x245cfb-0x3bc,_0x55fcd6);}function _0xcc00d5(_0x2a9c5d,_0x43f777){return _0x19c23c(_0x2a9c5d-0x73c,_0x43f777);}const _0x3f5260=this['_map'][_0x17d6e8(0x243,0x298)];if(_0x3f5260['mode']===Cesium[_0xcc00d5(0x540,0x4e1)][_0xcc00d5(0x55c,0x56e)]){const _0x5c1ef6=new Cesium['EllipsoidalOccluder'](_0x3f5260[_0xcc00d5(0x5b3,0x538)]['ellipsoid'],_0x3f5260[_0x17d6e8(0x1eb,0x246)][_0xcc00d5(0x4eb,0x569)]),_0x57836d=_0x5c1ef6[_0x17d6e8(0x1ce,0x18c)](_0x16abf9);if(!_0x57836d)return _0x2c94dd[_0x17d6e8(0x207,0x287)]=0x0,null;}const _0x1f5746=mars3d__namespace[_0xcc00d5(0x560,0x52d)]['toWindowCoordinates'](this[_0xcc00d5(0x4fc,0x4c8)]['scene'],_0x16abf9);return _0x1f5746?[_0x1f5746['x'],_0x1f5746['y']]:null;}['clear'](){this['windField'][_0x6b1a1e(0x159,0x1d2)]();function _0x6b1a1e(_0x556ea5,_0x42a767){return _0x19c23c(_0x556ea5-0x2df,_0x42a767);}delete this['windData'];}['initWorker'](){this['worker']=new Worker(this[_0x1f92e5(0xf4,0x120)][_0x3fb273(0x102,0x174)]),this['worker']['onmessage']=_0x2506da=>{this[_0x4a3f67(-0x102,-0x83)](_0x2506da['data']['particles']);function _0x4a3f67(_0x5d2207,_0x777456){return _0x3fb273(_0x5d2207- -0x1f2,_0x777456);}function _0x138b81(_0x36a7a0,_0x5a788a){return _0x3fb273(_0x36a7a0- -0xd6,_0x5a788a);}this[_0x4a3f67(-0x8a,-0xa4)]=![];};function _0x3fb273(_0x450547,_0x5a81f8){return _0x19c23c(_0x450547-0x2c2,_0x5a81f8);}this['windField']={'init':_0x2be604=>{const _0x1c70a0={};_0x1c70a0['type']=_0x24b7c8(0x524,0x5ad);function _0x28ce70(_0x242885,_0x20a23e){return _0x1f92e5(_0x242885-0x1c0,_0x20a23e);}function _0x24b7c8(_0x211d8a,_0x547601){return _0x3fb273(_0x547601-0x453,_0x211d8a);}_0x1c70a0[_0x28ce70(0x2b4,0x2b0)]=_0x2be604,this['worker'][_0x28ce70(0x2e3,0x35a)](_0x1c70a0);},'setOptions':_0x1b3238=>{const _0x10a254={};_0x10a254['type']='setOptions',_0x10a254['options']=_0x1b3238,this['worker']['postMessage'](_0x10a254);},'setDate':_0xc839f5=>{const _0x5d92f8={};_0x5d92f8['type']=_0x379d47(0x15a,0x19d),_0x5d92f8[_0x379d47(0xdd,0xe7)]=_0xc839f5;function _0x1a5488(_0x137cfb,_0x9345a7){return _0x1f92e5(_0x137cfb-0x49f,_0x9345a7);}function _0x379d47(_0x386e4e,_0x33c76b){return _0x3fb273(_0x386e4e- -0x16,_0x33c76b);}this['worker'][_0x1a5488(0x5c2,0x5a9)](_0x5d92f8);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];function _0x49929b(_0x2c99ed,_0x30e1ba){return _0x3fb273(_0x30e1ba- -0xe6,_0x2c99ed);}function _0x528c73(_0x4641f4,_0x2637e5){return _0x3fb273(_0x4641f4-0x460,_0x2637e5);}const _0x8a104={};_0x8a104[_0x49929b(0x2d,0x87)]='update',this['worker'][_0x528c73(0x5ca,0x549)](_0x8a104);},'clear':()=>{const _0x218eb9={};function _0x188bc4(_0x313c89,_0x43c826){return _0x1f92e5(_0x313c89- -0x13a,_0x43c826);}function _0xaed50(_0x1595f3,_0x44e07a){return _0x1f92e5(_0x1595f3-0x4af,_0x44e07a);}_0x218eb9['type']='clear',this[_0x188bc4(-0x7f,-0xab)][_0x188bc4(-0x17,-0x1d)](_0x218eb9);}};function _0x1f92e5(_0x18a88d,_0x2cdbfe){return _0x19c23c(_0x18a88d-0x27b,_0x2cdbfe);}this['windField'][_0x3fb273(0x15a,0xd9)](this['options']);}}mars3d__namespace['LayerUtil']['register'](_0x3d13d6(0x11e,0xa7),CanvasWindLayer),mars3d__namespace[_0x3d13d6(0x144,0x138)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace[_0x3d13d6(0x141,0x148)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x19c23c(-0x242,-0x2be)]=WindLayer,exports['WindUtil']=WindUtil;const _0xa5cb41={};_0xa5cb41['value']=!![],Object['defineProperty'](exports,'__esModule',_0xa5cb41);
}));
