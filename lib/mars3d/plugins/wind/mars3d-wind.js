/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.0
 * 编译日期：2024-08-21 14:04:10
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x4fa4a7,_0x2c8a2b){const _0x2d6e46=_0x4fa4a7();function _0x6eb2aa(_0x2a1e96,_0x1802ac){return _0x5c9e(_0x2a1e96- -0x2a7,_0x1802ac);}function _0x3a9775(_0xeb87ed,_0x35cce2){return _0x5c9e(_0xeb87ed-0x19c,_0x35cce2);}while(!![]){try{const _0x1a0d14=-parseInt(_0x6eb2aa(-0x8f,-0x81))/0x1+-parseInt(_0x3a9775(0x329,0x2d4))/0x2*(parseInt(_0x3a9775(0x31e,0x2bf))/0x3)+parseInt(_0x3a9775(0x2a4,0x338))/0x4+parseInt(_0x6eb2aa(-0x104,-0x157))/0x5+-parseInt(_0x3a9775(0x372,0x384))/0x6*(parseInt(_0x6eb2aa(-0xfc,-0xe8))/0x7)+-parseInt(_0x3a9775(0x32b,0x395))/0x8*(-parseInt(_0x6eb2aa(-0x12f,-0x1bb))/0x9)+-parseInt(_0x6eb2aa(-0x10c,-0x158))/0xa*(parseInt(_0x6eb2aa(-0x14c,-0xd7))/0xb);if(_0x1a0d14===_0x2c8a2b)break;else _0x2d6e46['push'](_0x2d6e46['shift']());}catch(_0x50f1de){_0x2d6e46['push'](_0x2d6e46['shift']());}}}(_0x5be9,0x5bf1c));function _interopNamespace(_0x5cfd92){if(_0x5cfd92&&_0x5cfd92['__esModule'])return _0x5cfd92;function _0x1a8345(_0x36e601,_0x3d1a2d){return _0x5c9e(_0x3d1a2d- -0x50,_0x36e601);}var _0x6bb565=Object[_0x1a8345(0xd9,0x134)](null);function _0x4cc8ab(_0x4325f9,_0x1d3bde){return _0x5c9e(_0x4325f9- -0xc5,_0x1d3bde);}return _0x5cfd92&&Object[_0x4cc8ab(0x61,0x2)](_0x5cfd92)[_0x4cc8ab(0x48,0xc5)](function(_0x17bf9b){function _0x543ceb(_0x1c3234,_0x27e094){return _0x1a8345(_0x1c3234,_0x27e094- -0x216);}function _0x272202(_0x3fb0af,_0x5a919b){return _0x1a8345(_0x3fb0af,_0x5a919b-0x136);}if(_0x17bf9b!==_0x272202(0x17f,0x216)){var _0x2bb902=Object[_0x543ceb(-0xdb,-0x93)](_0x5cfd92,_0x17bf9b);Object[_0x543ceb(-0xd6,-0x60)](_0x6bb565,_0x17bf9b,_0x2bb902['get']?_0x2bb902:{'enumerable':!![],'get':function(){return _0x5cfd92[_0x17bf9b];}});}}),_0x6bb565[_0x1a8345(0x94,0xe0)]=_0x5cfd92,_0x6bb565;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace['Cesium'];function getU(_0x1f044c,_0x25f020){const _0x24f481=_0x1f044c*Math['cos'](Cesium$7['Math']['toRadians'](_0x25f020));return _0x24f481;}function getV(_0x17410a,_0x563ce5){function _0x2954ee(_0x3d1615,_0x205fa9){return _0x5c9e(_0x205fa9-0xb6,_0x3d1615);}const _0x469c9a=_0x17410a*Math['sin'](Cesium$7[_0x2954ee(0x163,0x1e4)]['toRadians'](_0x563ce5));return _0x469c9a;}function getSpeed(_0x1bfded,_0x4cfb78){function _0x478824(_0x2662d0,_0x3f9987){return _0x5c9e(_0x3f9987- -0xc3,_0x2662d0);}const _0x5a95aa=Math[_0x478824(0x183,0x137)](Math['pow'](_0x1bfded,0x2)+Math['pow'](_0x4cfb78,0x2));return _0x5a95aa;}function getDirection(_0x5a52f6,_0x4e05aa){function _0x1fe511(_0x2165e3,_0x17c302){return _0x5c9e(_0x2165e3-0x37d,_0x17c302);}let _0x81a458=Cesium$7['Math'][_0x1fe511(0x5a9,0x5f7)](Math['atan2'](_0x4e05aa,_0x5a52f6));return _0x81a458+=_0x81a458<0x0?0x168:0x0,_0x81a458;}const _0x35b6ef={};_0x35b6ef['__proto__']=null,_0x35b6ef[_0x4bcd34(-0x37,-0xa9)]=getU,_0x35b6ef['getV']=getV,_0x35b6ef['getSpeed']=getSpeed,_0x35b6ef[_0x4bcd34(-0x7b,-0x71)]=getDirection;var WindUtil=_0x35b6ef;const Cesium$6=mars3d__namespace['Cesium'];function _0x5c9e(_0x2ba271,_0x42141f){const _0x5be9b2=_0x5be9();return _0x5c9e=function(_0x5c9e67,_0x832dea){_0x5c9e67=_0x5c9e67-0x103;let _0x316b71=_0x5be9b2[_0x5c9e67];return _0x316b71;},_0x5c9e(_0x2ba271,_0x42141f);}class CustomPrimitive{constructor(_0x3877bd){this[_0x4a6ee8(-0x15a,-0x1b3)]=_0x3877bd['commandType'];function _0x4a6ee8(_0x2f3c60,_0x22ca2e){return _0xd0dfaa(_0x2f3c60,_0x22ca2e-0xa);}this['geometry']=_0x3877bd['geometry'],this['attributeLocations']=_0x3877bd['attributeLocations'],this['primitiveType']=_0x3877bd[_0x4a6ee8(-0x304,-0x2a1)],this['uniformMap']=_0x3877bd[_0x4a6ee8(-0x24c,-0x203)];function _0x395b50(_0x175c2d,_0x128fc8){return _0x4bcd34(_0x128fc8,_0x175c2d-0x5a2);}this['vertexShaderSource']=_0x3877bd['vertexShaderSource'],this[_0x395b50(0x53c,0x50d)]=_0x3877bd[_0x395b50(0x53c,0x59d)],this['rawRenderState']=_0x3877bd['rawRenderState'],this[_0x4a6ee8(-0x227,-0x216)]=_0x3877bd[_0x4a6ee8(-0x1e1,-0x216)],this['outputTexture']=_0x3877bd['outputTexture'],this[_0x4a6ee8(-0x198,-0x22a)]=_0x3877bd['autoClear']??![],this[_0x395b50(0x5cf,0x5b1)]=_0x3877bd[_0x395b50(0x5cf,0x5c7)],this['show']=!![],this[_0x4a6ee8(-0x205,-0x1a9)]=undefined,this['clearCommand']=undefined,this['autoClear']&&(this[_0x395b50(0x4e3,0x540)]=new Cesium$6[(_0x395b50(0x50c,0x4a4))]({'color':new Cesium$6[(_0x4a6ee8(-0x2d7,-0x2a2))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Cesium$6[_0x4a6ee8(-0x303,-0x293)]['OPAQUE']}));}['createCommand'](_0x41e12d){function _0x20a870(_0x54622a,_0x5242c2){return _0xd0dfaa(_0x54622a,_0x5242c2-0x552);}function _0x2e4d0f(_0x2a2eb4,_0x4771f4){return _0x4bcd34(_0x2a2eb4,_0x4771f4-0x38a);}switch(this[_0x2e4d0f(0x3f2,0x3c9)]){case _0x20a870(0x24f,0x2cb):{const _0x3abdf9=Cesium$6[_0x2e4d0f(0x36c,0x368)]['fromGeometry']({'context':_0x41e12d,'geometry':this['geometry'],'attributeLocations':this[_0x20a870(0x27e,0x2a8)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']}),_0x2a5880={};_0x2a5880['context']=_0x41e12d,_0x2a5880[_0x2e4d0f(0x31f,0x2dc)]=this['attributeLocations'],_0x2a5880[_0x2e4d0f(0x3a6,0x354)]=this['vertexShaderSource'],_0x2a5880['fragmentShaderSource']=this['fragmentShaderSource'];const _0x1cd0a2=Cesium$6[_0x20a870(0x303,0x288)]['fromCache'](_0x2a5880),_0x392884=Cesium$6['RenderState']['fromCache'](this['rawRenderState']);return new Cesium$6[(_0x20a870(0x3bc,0x394))]({'owner':this,'vertexArray':_0x3abdf9,'primitiveType':this[_0x20a870(0x25d,0x2a7)],'uniformMap':this['uniformMap'],'modelMatrix':Cesium$6[_0x2e4d0f(0x35e,0x2d5)][_0x2e4d0f(0x391,0x3c5)],'shaderProgram':_0x1cd0a2,'framebuffer':this['framebuffer'],'renderState':_0x392884,'pass':Cesium$6['Pass']['OPAQUE']});}case'Compute':{const _0x4335c7={};return _0x4335c7[_0x20a870(0x2e0,0x34f)]=this,_0x4335c7[_0x2e4d0f(0x298,0x324)]=this[_0x20a870(0x2b1,0x2f0)],_0x4335c7[_0x20a870(0x30e,0x345)]=this['uniformMap'],_0x4335c7['outputTexture']=this[_0x2e4d0f(0x2b1,0x2e2)],_0x4335c7['persists']=!![],new Cesium$6['ComputeCommand'](_0x4335c7);}}}[_0xd0dfaa(-0x2c2,-0x276)](_0x1542a2,_0x3ac064){this[_0x7957fd(0x13c,0xc6)]=_0x3ac064;const _0x29c064=Cesium$6['VertexArray'][_0x7957fd(0x9d,0xa8)]({'context':_0x1542a2,'geometry':this[_0x7957fd(0x7d,0xc6)],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6[_0x448447(0x4f7,0x4a3)]['STATIC_DRAW']});function _0x7957fd(_0x2803d3,_0x2772b8){return _0xd0dfaa(_0x2803d3,_0x2772b8-0x297);}function _0x448447(_0x28d16e,_0x80c6c4){return _0x4bcd34(_0x28d16e,_0x80c6c4-0x4a5);}this[_0x7957fd(0x15b,0xe4)][_0x7957fd(0x72,0xa9)]=_0x29c064;}[_0x4bcd34(-0x84,-0x9c)](_0x53edd4){function _0xb556f6(_0x549471,_0x376860){return _0x4bcd34(_0x376860,_0x549471-0x3a7);}if(!this['show'])return;if(_0x53edd4['mode']!==Cesium$6[_0xb556f6(0x352,0x3d1)]['SCENE3D'])return;function _0x25bb90(_0x13a869,_0x4080d3){return _0x4bcd34(_0x13a869,_0x4080d3-0x4e);}!Cesium$6['defined'](this[_0x25bb90(0x82,0x97)])&&(this['commandToExecute']=this['createCommand'](_0x53edd4['context'])),Cesium$6[_0xb556f6(0x33c,0x3c0)](this[_0xb556f6(0x3d4,0x445)])&&this[_0xb556f6(0x3d4,0x36a)](),Cesium$6['defined'](this['clearCommand'])&&_0x53edd4['commandList'][_0x25bb90(-0x1c,-0x7b)](this[_0xb556f6(0x2e8,0x2de)]),_0x53edd4[_0xb556f6(0x372,0x38e)][_0xb556f6(0x2de,0x2fb)](this[_0xb556f6(0x3f0,0x3db)]);}[_0xd0dfaa(-0x1d1,-0x1db)](){return![];}['destroy'](){if(this['clearCommand']){var _0x6259f9,_0x409faa;(_0x6259f9=this['clearCommand'])!==null&&_0x6259f9!==void 0x0&&_0x6259f9[_0x31b891(0x518,0x4db)]&&this['clearCommand']['vertexArray'][_0x31b891(0x497,0x429)](),(_0x409faa=this[_0x31b891(0x44b,0x3b5)])!==null&&_0x409faa!==void 0x0&&_0x409faa[_0x473d9a(0x519,0x4e7)]&&this[_0x473d9a(0x4a6,0x472)][_0x473d9a(0x484,0x4e7)]['destroy'](),delete this[_0x31b891(0x44b,0x4e1)];}function _0x473d9a(_0x541aff,_0x3024e0){return _0xd0dfaa(_0x541aff,_0x3024e0-0x72d);}function _0x31b891(_0x213af4,_0x485163){return _0xd0dfaa(_0x485163,_0x213af4-0x706);}return this['commandToExecute']&&(this['commandToExecute'][_0x31b891(0x518,0x511)]&&this['commandToExecute'][_0x31b891(0x518,0x48e)][_0x31b891(0x497,0x45d)](),this[_0x31b891(0x553,0x5d5)]['shaderProgram']&&this[_0x473d9a(0x5b3,0x57a)][_0x31b891(0x4c0,0x4a4)]['destroy'](),delete this[_0x31b891(0x553,0x50b)]),Cesium$6['destroyObject'](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){const _0x2b0539=function(){function _0x5091a7(_0x52bffb,_0x15cf67){return _0x5c9e(_0x52bffb- -0x27d,_0x15cf67);}function _0x1ae12f(_0x2ac44c,_0x3e827a){return _0x5c9e(_0x3e827a-0x1b3,_0x2ac44c);}const _0x3a0d60=new Cesium$5[(_0x5091a7(-0xce,-0x6f))]({'attributes':new Cesium$5['GeometryAttributes']({'position':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0x5091a7(-0xd6,-0xae)][_0x5091a7(-0x9f,-0xec)],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0x5091a7(-0xd6,-0xa6)]['FLOAT'],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});return _0x3a0d60;},_0x333aba=function(_0x3ed588,_0x169782){if(Cesium$5['defined'](_0x169782)){const _0x46d8b3={};_0x46d8b3['arrayBufferView']=_0x169782,_0x3ed588['source']=_0x46d8b3;}const _0x50dc0c=new Cesium$5['Texture'](_0x3ed588);return _0x50dc0c;},_0xb3f9df=function(_0x3a0f06,_0x468ec5,_0x386a32){function _0x2a0372(_0xdac5d6,_0x15f75f){return _0x5c9e(_0x15f75f-0x223,_0xdac5d6);}const _0x483672={};_0x483672[_0xfe9ae4(0x126,0x156)]=_0x3a0f06,_0x483672['colorTextures']=[_0x468ec5];function _0xfe9ae4(_0x53a543,_0x1fffd9){return _0x5c9e(_0x1fffd9- -0x49,_0x53a543);}_0x483672[_0x2a0372(0x4d5,0x446)]=_0x386a32;const _0x4c21f1=new Cesium$5['Framebuffer'](_0x483672);return _0x4c21f1;},_0x4eabb8=function(_0x552a58){const _0x195028=!![];function _0x4b07f(_0x420616,_0x5c0144){return _0x5c9e(_0x420616- -0x3cf,_0x5c0144);}const _0x10a47d=![],_0x4ca0d8={};_0x4ca0d8['viewport']=_0x552a58[_0x83d1c5(0xf0,0x63)],_0x4ca0d8['depthTest']=_0x552a58['depthTest'],_0x4ca0d8[_0x4b07f(-0x276,-0x22d)]=_0x552a58[_0x4b07f(-0x276,-0x2ed)],_0x4ca0d8[_0x4b07f(-0x1e8,-0x265)]=_0x552a58[_0x4b07f(-0x1e8,-0x27d)];const _0x1eb1c0=_0x4ca0d8;function _0x83d1c5(_0x4a90af,_0x4b02cc){return _0x5c9e(_0x4a90af- -0x101,_0x4b02cc);}const _0x138cf0=Cesium$5[_0x83d1c5(0x4c,0x6d)][_0x4b07f(-0x1c4,-0x1ed)](_0x195028,_0x10a47d,_0x1eb1c0);return _0x138cf0;},_0x28be6a=function(_0x21cc40){const _0x41f4b6={},_0xb69d74=Cesium$5['Math'][_0x3c4459(0x310,0x361)](_0x21cc40[_0x162d47(-0x21a,-0x237)],Cesium$5['Math']['TWO_PI']),_0x3b60fd=Cesium$5['Math']['mod'](_0x21cc40['east'],Cesium$5['Math']['TWO_PI']);function _0x3c4459(_0x101aea,_0x1924b5){return _0x5c9e(_0x101aea-0x20d,_0x1924b5);}const _0x145dc3=_0x21cc40[_0x3c4459(0x37c,0x32f)];let _0xdb2ef,_0x1208b7;_0x145dc3>Cesium$5['Math'][_0x3c4459(0x433,0x4c4)]?(_0xdb2ef=0x0,_0x1208b7=Cesium$5[_0x162d47(-0x272,-0x2e6)][_0x162d47(-0x1d7,-0x1cf)]):_0x3b60fd-_0xb69d74<_0x145dc3?(_0xdb2ef=_0xb69d74,_0x1208b7=_0xb69d74+_0x145dc3):(_0xdb2ef=_0xb69d74,_0x1208b7=_0x3b60fd);_0x41f4b6['lon']={'min':Cesium$5['Math'][_0x3c4459(0x439,0x48b)](_0xdb2ef),'max':Cesium$5['Math'][_0x3c4459(0x439,0x443)](_0x1208b7)};const _0x3f8d98=_0x21cc40[_0x162d47(-0x1f3,-0x227)],_0x5ce4fc=_0x21cc40['north'],_0x4248d7=_0x21cc40[_0x162d47(-0x25e,-0x2cb)],_0x1b033e=_0x4248d7>Cesium$5[_0x3c4459(0x33b,0x383)]['PI']/0xc?_0x4248d7/0x2:0x0;let _0x26a4d1=Cesium$5['Math']['clampToLatitudeRange'](_0x3f8d98-_0x1b033e),_0x1d3437=Cesium$5[_0x3c4459(0x33b,0x357)]['clampToLatitudeRange'](_0x5ce4fc+_0x1b033e);_0x26a4d1<-Cesium$5['Math'][_0x162d47(-0x274,-0x292)]&&(_0x26a4d1=-Cesium$5['Math'][_0x3c4459(0x419,0x3e6)]);_0x1d3437>Cesium$5['Math']['PI_OVER_THREE']&&(_0x1d3437=Cesium$5[_0x3c4459(0x33b,0x3b3)][_0x162d47(-0x194,-0x206)]);_0x41f4b6['lat']={'min':Cesium$5[_0x162d47(-0x272,-0x26c)]['toDegrees'](_0x26a4d1),'max':Cesium$5['Math']['toDegrees'](_0x1d3437)};function _0x162d47(_0x5f54a6,_0x55310c){return _0x5c9e(_0x5f54a6- -0x3a0,_0x55310c);}return _0x41f4b6;},_0x23cccd={};_0x23cccd['getFullscreenQuad']=_0x2b0539,_0x23cccd['createTexture']=_0x333aba,_0x23cccd['createFramebuffer']=_0xb3f9df,_0x23cccd['createRawRenderState']=_0x4eabb8,_0x23cccd[_0x514616(-0x1f4,-0x242)]=_0x28be6a;function _0x514616(_0x3979d6,_0xc43edc){return _0xd0dfaa(_0x3979d6,_0xc43edc-0x53);}return _0x23cccd;}());var fullscreenVert='#version\x20300\x20es\x0a\x0ain\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20gl_Position\x20=\x20vec4(position,\x201.0f);\x0a}\x0a',screenDrawFrag='#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20trailsColor;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a',segmentDrawFrag=_0xd0dfaa(-0x285,-0x264),segmentDrawVert='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20lines\x20drawing\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0auniform\x20vec2\x20hRange;\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0aout\x20float\x20heightNormalization;\x0aout\x20float\x20speedNormalization;\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight\x20+\x20lonLatLev.z;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0f,\x20360.0f)\x20-\x20180.0f;\x0a\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0f;\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(speed.z\x20-\x20wSpeedRange.x)\x20/\x20(wSpeedRange.y\x20-\x20wSpeedRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20vec3\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20vec3\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rgb;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x20\x20\x20\x20//\x20render\x20lines\x20with\x20triangles\x20and\x20miter\x20joint\x0a\x20\x20\x20\x20//\x20read\x20https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html\x20for\x20detail\x0a\x20\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20projectedCoordinates.next,\x20offsetSign);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.next\x20+\x20offset;\x0a\x20\x20}\x0a\x0a\x20\x20heightNormalization\x20=\x20(currentPosition.z\x20-\x20hRange.x)\x20/\x20(hRange.y\x20-\x20hRange.x);\x0a\x0a\x20\x20speedNormalization\x20=\x20texture(particlesSpeed,\x20particleIndex).a;\x0a}\x0a',trailDrawFrag='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0aout\x20vec4\x20fragColor;\x0avoid\x20main()\x20{\x0a\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0f\x20*\x20trailsColor)\x20/\x20255.0f;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20if(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20pointsColor;\x0a\x20\x20}\x0a\x20\x20if(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20fragColor\x20+\x20trailsColor;\x0a\x20\x20}\x0a\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a';const Cesium$4=mars3d__namespace['Cesium'];class ParticlesRendering{constructor(_0x1e3d28,_0x2a9d23,_0x4e722f,_0x8c3b98,_0x2c0581){this[_0x550546(0x509,0x490)]=_0x4e722f['colors']===_0x5a3a8f(-0x186,-0x18e);function _0x5a3a8f(_0x3bebcb,_0xf4c5cc){return _0xd0dfaa(_0x3bebcb,_0xf4c5cc-0xfe);}this['createRenderingTextures'](_0x1e3d28,_0x2a9d23,_0x4e722f['colors']),this[_0x550546(0x48c,0x455)](_0x1e3d28);function _0x550546(_0x598662,_0x4b26d1){return _0xd0dfaa(_0x4b26d1,_0x598662-0x74c);}this['createRenderingPrimitives'](_0x1e3d28,_0x2a9d23,_0x4e722f,_0x8c3b98,_0x2c0581);}['createRenderingTextures'](_0x42bb07,_0x6d573a,_0x56d5ef){const _0x3f00c8={};_0x3f00c8['context']=_0x42bb07,_0x3f00c8[_0x104e19(0x35c,0x319)]=_0x42bb07['drawingBufferWidth'],_0x3f00c8['height']=_0x42bb07['drawingBufferHeight'],_0x3f00c8['pixelFormat']=Cesium$4[_0x424260(-0x98,-0x15)][_0x424260(0xa0,0x88)],_0x3f00c8[_0x104e19(0x3da,0x370)]=Cesium$4['PixelDatatype']['UNSIGNED_BYTE'];const _0x43b129=_0x3f00c8,_0x48a27b={};function _0x424260(_0x47076f,_0x5ca218){return _0x4bcd34(_0x47076f,_0x5ca218-0xb8);}function _0x104e19(_0x487285,_0x43ff47){return _0xd0dfaa(_0x43ff47,_0x487285-0x5bb);}_0x48a27b['context']=_0x42bb07,_0x48a27b[_0x424260(0x86,0x55)]=_0x42bb07[_0x104e19(0x33b,0x2f0)],_0x48a27b['height']=_0x42bb07['drawingBufferHeight'],_0x48a27b[_0x424260(0x41,0xab)]=Cesium$4[_0x104e19(0x2f2,0x352)]['DEPTH_COMPONENT'],_0x48a27b['pixelDatatype']=Cesium$4['PixelDatatype']['UNSIGNED_INT'];const _0xd5b56f=_0x48a27b,_0x533535=_0x56d5ef['length'],_0x319348=new Float32Array(_0x533535*0x3);for(let _0x4413d6=0x0;_0x4413d6<_0x533535;_0x4413d6++){const _0x2b0fef=Cesium$4['Color'][_0x424260(0x80,0x87)](_0x56d5ef[_0x4413d6]);_0x319348[0x3*_0x4413d6]=_0x2b0fef[_0x424260(-0x8c,-0x3)],_0x319348[0x3*_0x4413d6+0x1]=_0x2b0fef[_0x424260(0x62,0xdc)],_0x319348[0x3*_0x4413d6+0x2]=_0x2b0fef['blue'];}const _0x543736={'context':_0x42bb07,'width':_0x533535,'height':0x1,'pixelFormat':Cesium$4[_0x424260(-0x2,-0x15)][_0x104e19(0x3bf,0x39e)],'pixelDatatype':Cesium$4['PixelDatatype'][_0x424260(0x9c,0xc4)],'sampler':new Cesium$4['Sampler']({'minificationFilter':Cesium$4['TextureMinificationFilter'][_0x104e19(0x3a0,0x408)],'magnificationFilter':Cesium$4['TextureMagnificationFilter']['LINEAR']})};this['textures']={'segmentsColor':Util[_0x424260(0x11c,0x9e)](_0x43b129),'segmentsDepth':Util['createTexture'](_0xd5b56f),'currentTrailsColor':Util['createTexture'](_0x43b129),'currentTrailsDepth':Util[_0x424260(0xd0,0x9e)](_0xd5b56f),'nextTrailsColor':Util['createTexture'](_0x43b129),'nextTrailsDepth':Util[_0x424260(0x71,0x9e)](_0xd5b56f),'colorTable':Util[_0x424260(0x32,0x9e)](_0x543736,_0x319348)};}['createRenderingFramebuffers'](_0x243f87){function _0x566ce2(_0x14dd9c,_0x288f23){return _0xd0dfaa(_0x14dd9c,_0x288f23-0x714);}function _0x1df232(_0x1bb90e,_0x5f1916){return _0xd0dfaa(_0x5f1916,_0x1bb90e-0x257);}this['framebuffers']={'segments':Util['createFramebuffer'](_0x243f87,this['textures']['segmentsColor'],this['textures']['segmentsDepth']),'currentTrails':Util[_0x1df232(0xb6,0x63)](_0x243f87,this['textures'][_0x566ce2(0x533,0x512)],this[_0x1df232(-0x5c,-0xb9)][_0x566ce2(0x4f9,0x4f7)]),'nextTrails':Util[_0x566ce2(0x589,0x573)](_0x243f87,this[_0x1df232(-0x5c,-0x5b)]['nextTrailsColor'],this['textures']['nextTrailsDepth'])};}['createSegmentsGeometry'](_0x3e453d){const _0x52b307=0x4;function _0x396270(_0x4468a4,_0x1b3ae9){return _0xd0dfaa(_0x1b3ae9,_0x4468a4-0x1a4);}let _0x36f8b6=[];for(let _0x15e388=0x0;_0x15e388<_0x3e453d[_0x20a3dc(0x16e,0x13b)];_0x15e388++){for(let _0x59feb1=0x0;_0x59feb1<_0x3e453d['particlesTextureSize'];_0x59feb1++){for(let _0x4e41eb=0x0;_0x4e41eb<_0x52b307;_0x4e41eb++){_0x36f8b6[_0x396270(-0x121,-0x15a)](_0x15e388/_0x3e453d['particlesTextureSize']),_0x36f8b6[_0x396270(-0x121,-0xbe)](_0x59feb1/_0x3e453d['particlesTextureSize']);}}}_0x36f8b6=new Float32Array(_0x36f8b6);let _0x23d6cf=[];for(let _0x3410da=0x0;_0x3410da<_0x3e453d['maxParticles'];_0x3410da++){_0x23d6cf[_0x20a3dc(0xd2,0xfa)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x23d6cf=new Float32Array(_0x23d6cf);function _0x20a3dc(_0x1d2f5c,_0x8ffd9d){return _0x4bcd34(_0x1d2f5c,_0x8ffd9d-0x1c3);}let _0x23cdc3=[];for(let _0x41e4db=0x0,_0x1acc00=0x0;_0x41e4db<_0x3e453d[_0x396270(-0x41,0x15)];_0x41e4db++){_0x23cdc3['push'](_0x1acc00+0x0,_0x1acc00+0x1,_0x1acc00+0x2,_0x1acc00+0x2,_0x1acc00+0x1,_0x1acc00+0x3),_0x1acc00+=_0x52b307;}_0x23cdc3=new Uint32Array(_0x23cdc3);const _0x439978=new Cesium$4['Geometry']({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4[_0x396270(-0x83,-0xd4)]['FLOAT'],'componentsPerAttribute':0x2,'values':_0x36f8b6}),'normal':new Cesium$4[(_0x396270(-0x97,-0x88))]({'componentDatatype':Cesium$4['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x3,'values':_0x23d6cf})}),'indices':_0x23cdc3});return _0x439978;}[_0x4bcd34(-0xeb,-0x5f)](_0x40ddbb,_0x5e7a7b,_0x4ae635,_0x20d28b,_0x33700f){const _0x2e31bd=this,_0x378f6d={};_0x378f6d['st']=0x0,_0x378f6d[_0x32ee99(0x101,0x179)]=0x1;const _0x8ab364={};_0x8ab364[_0x5abacf(0x270,0x207)]=[segmentDrawVert];const _0x1d927d={};_0x1d927d[_0x32ee99(0x187,0x17d)]=[segmentDrawFrag];const _0x37a21e={};_0x37a21e['enabled']=!![];const _0xcbcc8e={};_0xcbcc8e['viewport']=undefined,_0xcbcc8e[_0x32ee99(0x148,0x14f)]=_0x37a21e,_0xcbcc8e[_0x32ee99(0x14b,0x194)]=!![];const _0x18d038={};_0x18d038['position']=0x0,_0x18d038['st']=0x1;function _0x5abacf(_0x5cf75b,_0x128179){return _0x4bcd34(_0x5cf75b,_0x128179-0x244);}const _0x22bc80={};_0x22bc80[_0x32ee99(0x182,0x17a)]=[_0x5abacf(0x28b,0x293)],_0x22bc80[_0x5abacf(0x1b0,0x207)]=[fullscreenVert];const _0x36cbbb={};_0x36cbbb[_0x5abacf(0x19e,0x202)]=[_0x5abacf(0x25f,0x28f)],_0x36cbbb['sources']=[trailDrawFrag];const _0x5031b4={};_0x5031b4[_0x32ee99(0x208,0x1a5)]=0x0,_0x5031b4['st']=0x1;const _0x26db85={};_0x26db85['defines']=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x26db85['sources']=[fullscreenVert];const _0x34e5d5={};_0x34e5d5[_0x5abacf(0x1da,0x202)]=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x34e5d5['sources']=[screenDrawFrag];const _0x2c6e00={};_0x2c6e00['enabled']=![];const _0x5d539b={};_0x5d539b[_0x5abacf(0x157,0x199)]=!![];function _0x32ee99(_0x162bee,_0x33fec2){return _0xd0dfaa(_0x33fec2,_0x162bee-0x3c0);}this['primitives']={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x378f6d,'geometry':this[_0x5abacf(0x2eb,0x25e)](_0x4ae635),'primitiveType':Cesium$4['PrimitiveType'][_0x5abacf(0x223,0x19f)],'uniformMap':{'previousParticlesPosition':function(){function _0x5e357c(_0x2e4603,_0x2e1e4f){return _0x5abacf(_0x2e1e4f,_0x2e4603-0x53);}return _0x33700f['particlesTextures'][_0x5e357c(0x2ec,0x2f2)];},'currentParticlesPosition':function(){return _0x33700f['particlesTextures']['currentParticlesPosition'];},'postProcessingPosition':function(){function _0x146b45(_0x54353e,_0x4aeb94){return _0x5abacf(_0x4aeb94,_0x54353e- -0x276);}return _0x33700f['particlesTextures'][_0x146b45(-0xa2,-0xd9)];},'particlesSpeed':function(){function _0x49b794(_0x9cd7ad,_0x114717){return _0x5abacf(_0x114717,_0x9cd7ad- -0x3fd);}return _0x33700f['particlesTextures'][_0x49b794(-0x254,-0x254)];},'colorTable':function(){function _0x3faf05(_0x3f27a2,_0x267fb9){return _0x5abacf(_0x3f27a2,_0x267fb9- -0x209);}return _0x2e31bd['textures'][_0x3faf05(0x1b,-0x5c)];},'aspect':function(){function _0x40f482(_0x2469ee,_0x3e85ef){return _0x5abacf(_0x2469ee,_0x3e85ef- -0x315);}return _0x40ddbb['drawingBufferWidth']/_0x40ddbb[_0x40f482(-0x15e,-0x13a)];},'H':function(){return _0x5e7a7b['H']['array'];},'hRange':function(){function _0x3d1405(_0x5b7bf0,_0x31aef2){return _0x5abacf(_0x5b7bf0,_0x31aef2- -0x2b7);}return new Cesium$4[(_0x3d1405(-0xef,-0x6c))](_0x5e7a7b['H']['min'],_0x5e7a7b['H']['max']);},'uSpeedRange':function(){return new Cesium$4['Cartesian2'](_0x5e7a7b['U']['min'],_0x5e7a7b['U']['max']);},'vSpeedRange':function(){function _0x55ccb5(_0x1d4d7d,_0x8791e2){return _0x32ee99(_0x1d4d7d-0xf,_0x8791e2);}function _0xa18ead(_0x1a8080,_0x510ae8){return _0x32ee99(_0x1a8080- -0x1d3,_0x510ae8);}return new Cesium$4[(_0xa18ead(-0x8,0x5c))](_0x5e7a7b['V'][_0xa18ead(-0x6d,-0xf8)],_0x5e7a7b['V']['max']);},'wSpeedRange':function(){function _0x2f787b(_0x13ef1b,_0x316e0c){return _0x5abacf(_0x316e0c,_0x13ef1b- -0x184);}return new Cesium$4['Cartesian2'](_0x5e7a7b['W']['min'],_0x5e7a7b['W'][_0x2f787b(0xf2,0xba)]);},'pixelSize':function(){function _0xef44e7(_0x526af1,_0x515852){return _0x32ee99(_0x526af1-0x1c2,_0x515852);}return _0x20d28b[_0xef44e7(0x2ba,0x25e)];},'lineWidth':function(){function _0xd92b49(_0x2662e5,_0x648557){return _0x32ee99(_0x648557- -0x20c,_0x2662e5);}return _0x4ae635[_0xd92b49(0x5f,-0x5)];},'particleHeight':function(){function _0x4f25ab(_0x30cf51,_0x5626b8){return _0x5abacf(_0x5626b8,_0x30cf51-0x352);}return _0x4ae635[_0x4f25ab(0x54e,0x521)];},'colour':function(){function _0x441c35(_0x3d762c,_0x48b346){return _0x32ee99(_0x3d762c-0x2de,_0x48b346);}return _0x2e31bd[_0x441c35(0x45b,0x42e)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x8ab364),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x1d927d),'rawRenderState':Util[_0x32ee99(0x1c7,0x257)](_0xcbcc8e),'framebuffer':this['framebuffers'][_0x5abacf(0x223,0x296)],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x18d038,'geometry':Util[_0x32ee99(0x11d,0xc6)](),'primitiveType':Cesium$4['PrimitiveType'][_0x5abacf(0x19f,0x19f)],'uniformMap':{'segmentsColorTexture':function(){return _0x2e31bd['textures']['segmentsColor'];},'segmentsDepthTexture':function(){function _0x44d888(_0x3f8caa,_0x257f16){return _0x32ee99(_0x257f16- -0x41,_0x3f8caa);}return _0x2e31bd[_0x44d888(0x13c,0xcc)]['segmentsDepth'];},'currentTrailsColor':function(){function _0x1962c3(_0x3df2ba,_0xcaa510){return _0x32ee99(_0xcaa510-0x10b,_0x3df2ba);}function _0x45b008(_0x49a282,_0x2095ae){return _0x5abacf(_0x49a282,_0x2095ae- -0x346);}return _0x2e31bd[_0x1962c3(0x1f0,0x27c)][_0x45b008(-0x17c,-0x1a0)][_0x45b008(-0xd1,-0xf0)](0x0);},'trailsDepthTexture':function(){return _0x2e31bd['framebuffers']['currentTrails']['depthTexture'];},'fadeOpacity':function(){return _0x4ae635['fadeOpacity'];}},'vertexShaderSource':new Cesium$4[(_0x32ee99(0x198,0x13b))](_0x22bc80),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x36cbbb),'rawRenderState':Util[_0x32ee99(0x1c7,0x1b8)]({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction']['ALWAYS']},'depthMask':!![]}),'framebuffer':this[_0x5abacf(0x212,0x1f1)][_0x5abacf(0x215,0x1f0)],'autoClear':!![],'preExecute':function(){function _0xa1d3ab(_0x5d130,_0x3d3660){return _0x5abacf(_0x5d130,_0x3d3660-0x30a);}if(_0x4ae635[_0x1b4e43(0x2e9,0x367)]){const _0x267ea1=_0x2e31bd['framebuffers']['currentTrails'];_0x2e31bd['framebuffers']['currentTrails']=_0x2e31bd[_0xa1d3ab(0x4d6,0x4fb)]['nextTrails'],_0x2e31bd[_0xa1d3ab(0x53f,0x4fb)]['nextTrails']=_0x267ea1;}function _0x1b4e43(_0x4513b2,_0x22f82a){return _0x32ee99(_0x22f82a-0x194,_0x4513b2);}_0x2e31bd[_0x1b4e43(0x2bb,0x31d)]['trails'][_0x1b4e43(0x3df,0x3a1)]['framebuffer']=_0x2e31bd['framebuffers'][_0x1b4e43(0x35a,0x304)],_0x2e31bd[_0x1b4e43(0x345,0x31d)][_0xa1d3ab(0x433,0x4c8)][_0xa1d3ab(0x51c,0x48f)]['framebuffer']=_0x2e31bd[_0xa1d3ab(0x530,0x4fb)]['nextTrails'];}}),'screen':new CustomPrimitive({'commandType':_0x5abacf(0x21e,0x1b9),'attributeLocations':_0x5031b4,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){function _0x1b2dd9(_0x491b72,_0x445652){return _0x32ee99(_0x491b72-0x4b,_0x445652);}function _0x195332(_0x55b88b,_0x9f3386){return _0x5abacf(_0x9f3386,_0x55b88b-0x259);}return _0x2e31bd[_0x195332(0x44a,0x43f)][_0x1b2dd9(0x1bb,0x1dd)][_0x195332(0x4af,0x4ff)](0x0);},'trailsDepthTexture':function(){function _0x5acfdc(_0x522ca7,_0x4efe6d){return _0x5abacf(_0x522ca7,_0x4efe6d- -0x42e);}function _0xa48f77(_0x796ab8,_0x436132){return _0x32ee99(_0x436132-0x15,_0x796ab8);}return _0x2e31bd[_0xa48f77(0x119,0x186)]['nextTrails'][_0x5acfdc(-0x10d,-0x199)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x26db85),'fragmentShaderSource':new Cesium$4[(_0x32ee99(0x198,0x11f))](_0x34e5d5),'rawRenderState':Util[_0x5abacf(0x1dd,0x247)]({'viewport':undefined,'depthTest':_0x2c6e00,'depthMask':!![],'blending':_0x5d539b}),'framebuffer':undefined})};}}var CalculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20W;\x20//\x20upward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20vec2\x20wSpeedRange;\x0auniform\x20float\x20speedScaleFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20//\x20map\x20the\x20z-axis\x20value\x20to\x20the\x20nearest\x20bit\x20plane\x20to\x20ensure\x20that\x20the\x20result\x20is\x20an\x20integer\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205,\x207,\x208,\x209],\x20width\x20=\x202,\x20height\x20=\x202,\x20level\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x206\x207\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x202\x203\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0afloat\x20interpolateTexture(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x201.0f\x20*\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x201.0f\x20*\x20interval.y;\x0a\x0a\x20\x20float\x20lon0_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon1_lat0\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat0,\x20lev));\x0a\x20\x20float\x20lon0_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon0,\x20lat1,\x20lev));\x0a\x20\x20float\x20lon1_lat1\x20=\x20getWindComponent(componentTexture,\x20vec3(lon1,\x20lat1,\x20lev));\x0a\x0a\x20\x20float\x20lon_lat0\x20=\x20mix(lon0_lat0,\x20lon1_lat0,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat1\x20=\x20mix(lon0_lat1,\x20lon1_lat1,\x20lon\x20-\x20lon0);\x0a\x20\x20float\x20lon_lat\x20=\x20mix(lon_lat0,\x20lon_lat1,\x20lat\x20-\x20lat0);\x0a\x20\x20return\x20lon_lat;\x0a}\x0a\x0avec3\x20linearInterpolation(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bilinear_interpolation\x0a\x20\x20float\x20u\x20=\x20interpolateTexture(U,\x20lonLatLev);\x0a\x20\x20float\x20v\x20=\x20interpolateTexture(V,\x20lonLatLev);\x0a\x20\x20float\x20w\x20=\x20interpolateTexture(W,\x20lonLatLev);\x0a\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec3\x20convertSpeedUnitToLonLat(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20float\x20w\x20=\x20speed.z;\x0a\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20return\x20windVectorInLonLatLev;\x0a}\x0a\x0avec3\x20calculateSpeedByRungeKutta2(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec3\x20y_n\x20=\x20lonLatLev;\x0a\x20\x20vec3\x20f_n\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec3\x20speed\x20=\x20h\x20*\x20linearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20getRange(vec2\x20range)\x20{\x0a\x20\x20float\x20x1\x20=\x200.0f\x20-\x20range.x;\x0a\x20\x20float\x20x2\x20=\x20range.y\x20-\x200.0f;\x0a\x20\x20if(x1\x20<\x200.0f\x20||\x20x2\x20<\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(abs(x1),\x20abs(x2));\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x20abs(max(x1,\x20x2)));\x0a\x20\x20}\x0a}\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20vec3\x20percent\x20=\x20vec3(0.0f);\x0a\x20\x20vec2\x20uRange\x20=\x20getRange(uSpeedRange);\x0a\x20\x20vec2\x20vRange\x20=\x20getRange(vSpeedRange);\x0a\x20\x20vec2\x20wRange\x20=\x20getRange(wSpeedRange);\x0a\x20\x20if(length(speed.xyz)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x200.0f;\x0a\x20\x20}\x0a\x0a\x20\x20percent.x\x20=\x20(abs(speed.x)\x20-\x20uRange.x)\x20/\x20(uRange.y\x20-\x20uRange.x);\x0a\x20\x20percent.y\x20=\x20(abs(speed.y)\x20-\x20vRange.x)\x20/\x20(vRange.y\x20-\x20vRange.x);\x0a\x20\x20if(wSpeedRange.y\x20==\x20wSpeedRange.x)\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x200.0f;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20percent.z\x20=\x20(abs(speed.z)\x20-\x20wRange.x)\x20/\x20(wRange.y\x20-\x20wRange.x);\x0a\x20\x20}\x0a\x20\x20float\x20norm\x20=\x20length(percent);\x0a\x0a\x20\x20return\x20norm;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speedOrigin\x20=\x20linearInterpolation(lonLatLev);\x0a\x20\x20vec3\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLatLev);\x0a\x20\x20vec3\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLatLev,\x20speed);\x0a\x0a\x20\x20vec4\x20particleSpeed\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speed\x20/\x20speedScaleFactor));\x0a\x20\x20\x20\x20//\x20gl_FragColor\x20=\x20particleSpeed;\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',PostProcessingPositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x0a\x0auniform\x20sampler2D\x20H;\x20//\x20particles\x20height\x20textures\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0auniform\x20vec2\x20viewerLonRange;\x0auniform\x20vec2\x20viewerLatRange;\x0a\x0aconst\x20float\x20randomCoefficient\x20=\x200.1f;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0aconst\x20float\x20dropRate\x20=\x200.1f;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0aconst\x20float\x20dropRateBump\x20=\x200.1f;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLatLev.x\x20=\x20clamp(lonLatLev.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20minimum.y,\x20maximum.y);\x0a\x20\x20lonLatLev.z\x20=\x20clamp(lonLatLev.z,\x20minimum.z,\x20maximum.z);\x0a\x0a\x20\x20vec3\x20index3D\x20=\x20vec3(0.0f);\x0a\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20index3D.z\x20=\x20ceil((lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0avec4\x20getTextureValue(sampler2D\x20componentTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20vec4\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D);\x0a\x20\x20return\x20result;\x0a}\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0abool\x20particleNoSpeed(vec3\x20particle)\x20{\x0a\x20\x20vec4\x20speed\x20=\x20getTextureValue(particlesSpeed,\x20particle);\x0a\x20\x20return\x20speed.r\x20==\x200.0f\x20&&\x20speed.g\x20==\x200.0f;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0f);\x0a\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20float\x20height\x20=\x20getTextureValue(H,\x20vec3(randomLon,\x20randomLat,\x20lev)).r;\x0a\x0a\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20height);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20viewerLatRange.x\x20||\x20particle.y\x20>\x20viewerLatRange.y\x20||\x20particle.x\x20<\x20viewerLonRange.x\x20||\x20particle.x\x20>\x20viewerLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x0a}\x0a',UpdatePositionShader='#version\x20300\x20es\x0a\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20norm)\x20Unit\x20converted\x20to\x20degrees\x20of\x20longitude\x20and\x20latitude\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20speed;\x0a\x20\x20if(length(speed.rgb)\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(0.0f);\x0a\x20\x20}\x0a}\x0a';const Cesium$3=mars3d__namespace['Cesium'];class ParticlesComputing{constructor(_0xa08d91,_0x26eb5e,_0x4f88a4,_0xf4cd03){function _0x516c6f(_0x3b24c2,_0x1b30a6){return _0xd0dfaa(_0x1b30a6,_0x3b24c2-0x74e);}this[_0x516c6f(0x54f,0x59f)]=_0x26eb5e,this['createWindTextures'](_0xa08d91,_0x26eb5e),this['createParticlesTextures'](_0xa08d91,_0x4f88a4,_0xf4cd03),this['createComputingPrimitives'](_0x26eb5e,_0x4f88a4,_0xf4cd03);}['createWindTextures'](_0x3e2c71,_0x3770a2){function _0x23939b(_0x248d4d,_0x3adbff){return _0xd0dfaa(_0x3adbff,_0x248d4d-0x2fa);}var _0xba573e;const _0x301c51={'context':_0x3e2c71,'width':_0x3770a2['dimensions'][_0x28b736(0x4a5,0x448)],'height':_0x3770a2['dimensions']['lat']*(_0x3770a2['dimensions']['lev']||0x1),'pixelFormat':Cesium$3[_0x28b736(0x2d2,0x352)][_0x28b736(0x3ce,0x3b0)],'pixelDatatype':Cesium$3['PixelDatatype'][_0x28b736(0x42e,0x42b)],'flipY':![],'sampler':new Cesium$3[(_0x28b736(0x308,0x38b))]({'minificationFilter':Cesium$3[_0x28b736(0x36a,0x3b1)]['NEAREST'],'magnificationFilter':Cesium$3[_0x28b736(0x3b2,0x380)]['NEAREST']})};function _0x28b736(_0x4d29a0,_0x3f6ca8){return _0x4bcd34(_0x4d29a0,_0x3f6ca8-0x41f);}this[_0x23939b(0xee,0x67)]={'U':Util[_0x28b736(0x39f,0x405)](_0x301c51,_0x3770a2['U'][_0x28b736(0x3d7,0x41b)]),'V':Util['createTexture'](_0x301c51,_0x3770a2['V'][_0x28b736(0x41c,0x41b)]),'W':Util[_0x28b736(0x3a9,0x405)](_0x301c51,((_0xba573e=_0x3770a2['W'])===null||_0xba573e===void 0x0?void 0x0:_0xba573e[_0x28b736(0x422,0x41b)])??_0x3770a2['U']['array']),'H':Util['createTexture'](_0x301c51,_0x3770a2['H'][_0x28b736(0x407,0x41b)])};}['createParticlesTextures'](_0x4c7e5b,_0x2eacfe,_0xd5c6a6){function _0x47d060(_0x34ef4f,_0x4b3d8e){return _0xd0dfaa(_0x34ef4f,_0x4b3d8e-0x93);}const _0x1bb478={'context':_0x4c7e5b,'width':_0x2eacfe['particlesTextureSize'],'height':_0x2eacfe[_0x51cdb8(0x4f4,0x4e4)],'pixelFormat':Cesium$3[_0x47d060(-0x249,-0x236)][_0x47d060(-0x190,-0x199)],'pixelDatatype':Cesium$3[_0x47d060(-0x296,-0x223)]['FLOAT'],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x47d060(-0x1db,-0x156)]})},_0x373073=this['randomizeParticles'](_0x2eacfe[_0x51cdb8(0x593,0x5fc)],_0xd5c6a6);function _0x51cdb8(_0x5c83ce,_0x3c56b1){return _0x4bcd34(_0x3c56b1,_0x5c83ce-0x57c);}const _0x2f3c07=new Float32Array(0x4*_0x2eacfe[_0x47d060(-0xcf,-0x152)])[_0x51cdb8(0x507,0x4f9)](0x0);this['particlesTextures']={'previousParticlesPosition':Util['createTexture'](_0x1bb478,_0x373073),'currentParticlesPosition':Util[_0x51cdb8(0x562,0x551)](_0x1bb478,_0x373073),'nextParticlesPosition':Util['createTexture'](_0x1bb478,_0x373073),'postProcessingPosition':Util['createTexture'](_0x1bb478,_0x373073),'particlesSpeed':Util['createTexture'](_0x1bb478,_0x2f3c07)};}['randomizeParticles'](_0xdd488f,_0xe8baa0){const _0x1d2a25=new Float32Array(0x4*_0xdd488f);function _0x471e0f(_0x582e84,_0x540f56){return _0xd0dfaa(_0x540f56,_0x582e84-0xc);}function _0x5b9f7f(_0x5a7723,_0x4bd70d){return _0x4bcd34(_0x4bd70d,_0x5a7723-0x56f);}for(let _0x5374e6=0x0;_0x5374e6<_0xdd488f;_0x5374e6++){_0x1d2a25[0x4*_0x5374e6]=Cesium$3['Math']['randomBetween'](_0xe8baa0[_0x471e0f(-0x2b2,-0x24b)]['x'],_0xe8baa0[_0x471e0f(-0x2b2,-0x332)]['y']),_0x1d2a25[0x4*_0x5374e6+0x1]=Cesium$3[_0x471e0f(-0x294,-0x22c)][_0x471e0f(-0x251,-0x2de)](_0xe8baa0[_0x5b9f7f(0x4e2,0x55f)]['x'],_0xe8baa0['latRange']['y']),_0x1d2a25[0x4*_0x5374e6+0x2]=Cesium$3['Math']['randomBetween'](this['data']['lev']['min'],this[_0x471e0f(-0x1f3,-0x18f)]['lev']['max']),_0x1d2a25[0x4*_0x5374e6+0x3]=0x0;}return _0x1d2a25;}[_0x4bcd34(-0x71,-0x1d)](_0xbd18ba){function _0x4869d7(_0x5aa596,_0x1947f6){return _0x4bcd34(_0x1947f6,_0x5aa596-0x105);}const _0x46d290=[_0xbd18ba[_0x4869d7(0x49,-0x36)][_0x4869d7(0x12e,0xed)],_0xbd18ba[_0x19893a(0x3ec,0x396)][_0x19893a(0x452,0x3bc)],_0xbd18ba['dimensions'][_0x4869d7(0xf1,0xa6)]],_0x29ba82=[_0xbd18ba['lon']['min'],_0xbd18ba[_0x4869d7(0xaf,0xf9)][_0x19893a(0x44a,0x426)],_0xbd18ba[_0x4869d7(0xf1,0x114)]['min']],_0x3cbed8=[_0xbd18ba['lon'][_0x4869d7(0x137,0x18c)],_0xbd18ba['lat']['max'],_0xbd18ba['lev']['max']];function _0x19893a(_0x5c8703,_0x597957){return _0xd0dfaa(_0x597957,_0x5c8703-0x6a4);}const _0x4c80ec=[(_0x3cbed8[0x0]-_0x29ba82[0x0])/(_0x46d290[0x0]-0x1),(_0x3cbed8[0x1]-_0x29ba82[0x1])/(_0x46d290[0x1]-0x1),_0x46d290[0x2]>0x1?(_0x3cbed8[0x2]-_0x29ba82[0x2])/(_0x46d290[0x2]-0x1):0x1],_0x89fa2c=Math['floor'](Math['random']()*_0xbd18ba['U'][_0x19893a(0x4a4,0x516)][_0x4869d7(0x163,0xf3)]),_0x6cd5df=_0x89fa2c%(_0x46d290[0x0]*_0x46d290[0x1]),_0x15c8fc=Math['floor'](_0x6cd5df/_0x46d290[0x0]),_0x4055c3=_0x6cd5df%_0x46d290[0x0],_0x2ce04c=Cesium$3['Math']['randomBetween'](_0x29ba82[0x0]+_0x4055c3*_0x4c80ec[0x0],_0x29ba82[0x0]+(_0x4055c3+0x1)*_0x4c80ec[0x0]),_0x3dca76=Cesium$3[_0x4869d7(0x61,-0x28)]['randomBetween'](_0x29ba82[0x1]+(_0x15c8fc-0x1)*_0x4c80ec[0x1],_0x29ba82[0x1]+_0x15c8fc*_0x4c80ec[0x1]),_0x3fa25e=_0xbd18ba['H']['array'][_0x89fa2c]||0x0;return[_0x2ce04c,_0x3dca76,_0x3fa25e];}[_0x4bcd34(0x69,0x30)](){function _0x20b1eb(_0x59ba5b,_0x36f0e5){return _0xd0dfaa(_0x59ba5b,_0x36f0e5-0x595);}function _0xaa0750(_0xcf79f,_0x10b386){return _0xd0dfaa(_0xcf79f,_0x10b386-0x1d5);}Object[_0x20b1eb(0x276,0x2ed)](this[_0x20b1eb(0x35f,0x310)])[_0xaa0750(-0xe4,-0xec)](_0x18e846=>{function _0x205d9e(_0x4216f3,_0x12e82c){return _0x20b1eb(_0x4216f3,_0x12e82c- -0x4b8);}this[_0x205d9e(-0x118,-0x1a8)][_0x18e846]['destroy']();});}['createComputingPrimitives'](_0x31d299,_0x2b372d,_0x5e5cd1){const _0x510ff8=new Cesium$3[(_0x52ab54(0x2fb,0x306))](_0x31d299[_0x52ab54(0x29e,0x283)][_0x7e1bb8(0x610,0x5cf)],_0x31d299[_0x52ab54(0x2ff,0x283)][_0x7e1bb8(0x4e4,0x550)],_0x31d299['dimensions']['lev']),_0x5467e7=new Cesium$3[(_0x7e1bb8(0x5b6,0x56d))](_0x31d299['lon']['min'],_0x31d299['lat']['min'],_0x31d299['lev'][_0x52ab54(0x372,0x2e1)]),_0x3ebf34=new Cesium$3['Cartesian3'](_0x31d299[_0x52ab54(0x3f4,0x368)][_0x52ab54(0x3b2,0x371)],_0x31d299[_0x52ab54(0x305,0x2e9)]['max'],_0x31d299['lev'][_0x7e1bb8(0x5a8,0x5d8)]),_0x3e151d=new Cesium$3['Cartesian3']((_0x3ebf34['x']-_0x5467e7['x'])/(_0x510ff8['x']-0x1),(_0x3ebf34['y']-_0x5467e7['y'])/(_0x510ff8['y']-0x1),_0x510ff8['z']>0x1?(_0x3ebf34['z']-_0x5467e7['z'])/(_0x510ff8['z']-0x1):0x1),_0x5c303e=new Cesium$3['Cartesian2'](_0x31d299[_0x7e1bb8(0x613,0x5cf)]['min'],_0x31d299['lon']['max']),_0x5513b0=new Cesium$3['Cartesian2'](_0x31d299['lat'][_0x7e1bb8(0x531,0x548)],_0x31d299['lat']['max']),_0x553009=new Cesium$3[(_0x7e1bb8(0x5ce,0x5ad))](_0x31d299['U'][_0x7e1bb8(0x50a,0x548)],_0x31d299['U']['max']),_0x2105b4=new Cesium$3[(_0x52ab54(0x39f,0x346))](_0x31d299['V']['min'],_0x31d299['V']['max']),_0x59cdee=new Cesium$3[(_0x7e1bb8(0x54b,0x5ad))](_0x31d299['W'][_0x52ab54(0x303,0x2e1)],_0x31d299['W'][_0x7e1bb8(0x5d8,0x5d8)]),_0x51b08c=this,_0x4107e6={};function _0x7e1bb8(_0x500730,_0x5dc5d5){return _0xd0dfaa(_0x500730,_0x5dc5d5-0x7a2);}_0x4107e6['U']=function(){return _0x51b08c['windTextures']['U'];},_0x4107e6['V']=function(){return _0x51b08c['windTextures']['V'];},_0x4107e6['W']=function(){function _0x3f8116(_0x3191cf,_0x2e1b4b){return _0x52ab54(_0x3191cf,_0x2e1b4b- -0xce);}return _0x51b08c[_0x3f8116(0x2f5,0x261)]['W'];},_0x4107e6['currentParticlesPosition']=function(){return _0x51b08c['particlesTextures']['currentParticlesPosition'];},_0x4107e6[_0x7e1bb8(0x5bb,0x5ab)]=function(){return _0x510ff8;},_0x4107e6[_0x7e1bb8(0x554,0x580)]=function(){return _0x5467e7;},_0x4107e6[_0x52ab54(0x339,0x2f9)]=function(){return _0x3ebf34;},_0x4107e6['interval']=function(){return _0x3e151d;},_0x4107e6['uSpeedRange']=function(){return _0x553009;},_0x4107e6[_0x7e1bb8(0x55e,0x5de)]=function(){return _0x2105b4;};function _0x52ab54(_0x1c1ce9,_0x1cb3fe){return _0x4bcd34(_0x1c1ce9,_0x1cb3fe-0x33f);}_0x4107e6['wSpeedRange']=function(){return _0x59cdee;},_0x4107e6[_0x7e1bb8(0x57e,0x5d2)]=function(){return _0x5e5cd1['pixelSize']*_0x2b372d['speedFactor'];};const _0x2bdb2c={};_0x2bdb2c['sources']=[CalculateSpeedShader];const _0x2faa3c={};_0x2faa3c['sources']=[UpdatePositionShader];const _0x2a6b9e={};_0x2a6b9e['sources']=[PostProcessingPositionShader],this[_0x52ab54(0x34d,0x304)]={'calculateSpeed':new CustomPrimitive({'commandType':_0x52ab54(0x31d,0x2db),'uniformMap':_0x4107e6,'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x2bdb2c),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':function(){function _0x5223fe(_0x2e5d64,_0x2d4d8d){return _0x52ab54(_0x2d4d8d,_0x2e5d64- -0x316);}function _0x499054(_0x50056b,_0x3b3ab6){return _0x7e1bb8(_0x50056b,_0x3b3ab6- -0x335);}if(_0x2b372d!==undefined&&_0x2b372d['dynamic']){const _0x295943=_0x51b08c['particlesTextures']['previousParticlesPosition'];_0x51b08c['particlesTextures']['previousParticlesPosition']=_0x51b08c[_0x5223fe(-0x60,-0x28)]['currentParticlesPosition'],_0x51b08c[_0x499054(0x1db,0x1e8)]['currentParticlesPosition']=_0x51b08c['particlesTextures']['postProcessingPosition'],_0x51b08c['particlesTextures']['postProcessingPosition']=_0x295943;}_0x51b08c['primitives'][_0x5223fe(-0x5a,-0x58)]['commandToExecute'][_0x499054(0x25a,0x1c9)]=_0x51b08c[_0x499054(0x19e,0x1e8)][_0x499054(0x1aa,0x1d6)];}}),'updatePosition':new CustomPrimitive({'commandType':_0x7e1bb8(0x558,0x542),'uniformMap':{'currentParticlesPosition':function(){function _0x17188f(_0x2c56a0,_0x101297){return _0x52ab54(_0x101297,_0x2c56a0- -0x46a);}return _0x51b08c['particlesTextures'][_0x17188f(-0x195,-0x1cd)];},'particlesSpeed':function(){function _0x7fc2ae(_0x31b201,_0x545bef){return _0x52ab54(_0x545bef,_0x31b201- -0xc8);}return _0x51b08c['particlesTextures'][_0x7fc2ae(0x1dc,0x1e7)];}},'fragmentShaderSource':new Cesium$3[(_0x7e1bb8(0x548,0x57a))](_0x2faa3c),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':function(){function _0x42560b(_0x2accbc,_0x425aa0){return _0x7e1bb8(_0x2accbc,_0x425aa0- -0x316);}function _0x2643ba(_0x38f88b,_0x37afc3){return _0x7e1bb8(_0x38f88b,_0x37afc3- -0x5b3);}_0x51b08c['primitives'][_0x42560b(0x1c0,0x245)][_0x2643ba(-0x2e,0x3c)]['outputTexture']=_0x51b08c[_0x42560b(0x193,0x207)]['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x52ab54(0x289,0x2db),'uniformMap':{'nextParticlesPosition':function(){function _0xca7434(_0x213e37,_0xc82bf8){return _0x52ab54(_0xc82bf8,_0x213e37- -0x8d);}return _0x51b08c[_0xca7434(0x229,0x28e)]['nextParticlesPosition'];},'particlesSpeed':function(){function _0x323b00(_0x5e92b4,_0x209a6f){return _0x52ab54(_0x209a6f,_0x5e92b4- -0x42c);}return _0x51b08c['particlesTextures'][_0x323b00(-0x188,-0xfc)];},'viewerLonRange':function(){return _0x5e5cd1['lonRange'];},'viewerLatRange':function(){return _0x5e5cd1['latRange'];},'lonRange':function(){return _0x5c303e;},'latRange':function(){return _0x5513b0;},'dimension':function(){return _0x510ff8;},'minimum':function(){return _0x5467e7;},'maximum':function(){return _0x3ebf34;},'interval':function(){return _0x3e151d;},'H':function(){return _0x51b08c['windTextures']['H'];},'randomCoefficient':function(){const _0x414ec8=Math[_0xdfac17(0x4fa,0x47a)]();function _0xdfac17(_0x2801e5,_0x281089){return _0x52ab54(_0x2801e5,_0x281089-0xf9);}return _0x414ec8;},'dropRate':function(){function _0x339a66(_0xd659e8,_0x5e0223){return _0x7e1bb8(_0xd659e8,_0x5e0223- -0x609);}return _0x2b372d[_0x339a66(-0x5c,-0xc)];},'dropRateBump':function(){function _0x4fb3a9(_0x3fd563,_0x5ad617){return _0x7e1bb8(_0x3fd563,_0x5ad617- -0x24f);}return _0x2b372d[_0x4fb3a9(0x364,0x388)];}},'fragmentShaderSource':new Cesium$3[(_0x52ab54(0x365,0x313))](_0x2a6b9e),'outputTexture':this[_0x7e1bb8(0x53e,0x51d)]['postProcessingPosition'],'preExecute':function(){function _0x210369(_0x467bb0,_0x2c38f9){return _0x52ab54(_0x2c38f9,_0x467bb0- -0x2a1);}function _0x25ae8f(_0x5c7397,_0x137b73){return _0x7e1bb8(_0x137b73,_0x5c7397- -0x740);}_0x51b08c['primitives'][_0x210369(0x2e,-0xa)][_0x210369(0xe7,0x14c)]['outputTexture']=_0x51b08c['particlesTextures']['postProcessingPosition'];}})};}}const Cesium$2=mars3d__namespace['Cesium'];class ParticleSystem{constructor(_0x3af392,_0x5e1a04,_0xdffc4e,_0x394390){this[_0x3d91be(0x30f,0x351)]=_0x3af392,_0x5e1a04={..._0x5e1a04};_0x5e1a04[_0x4bab0f(0x4bf,0x4ca)]&&_0x5e1a04['vdata']&&(_0x5e1a04[_0x4bab0f(0x443,0x3ba)]={},_0x5e1a04[_0x3d91be(0x2a0,0x2c8)][_0x4bab0f(0x528,0x555)]=_0x5e1a04[_0x3d91be(0x316,0x38e)],_0x5e1a04['dimensions'][_0x3d91be(0x359,0x32e)]=_0x5e1a04['rows'],_0x5e1a04[_0x4bab0f(0x443,0x494)][_0x4bab0f(0x4eb,0x56c)]=_0x5e1a04['lev']||0x1,_0x5e1a04['lon']={},_0x5e1a04['lon'][_0x4bab0f(0x4a1,0x418)]=_0x5e1a04['xmin'],_0x5e1a04['lon'][_0x4bab0f(0x531,0x4c4)]=_0x5e1a04[_0x3d91be(0x332,0x2d7)],_0x5e1a04['lat']={},_0x5e1a04[_0x3d91be(0x337,0x32e)]['min']=_0x5e1a04[_0x3d91be(0x2a3,0x2f8)],_0x5e1a04['lat']['max']=_0x5e1a04['ymax'],_0x5e1a04[_0x4bab0f(0x4eb,0x57f)]={},_0x5e1a04[_0x4bab0f(0x4eb,0x4ea)][_0x3d91be(0x2f6,0x326)]=_0x5e1a04[_0x3d91be(0x311,0x36c)]??0x1,_0x5e1a04['lev']['max']=_0x5e1a04[_0x4bab0f(0x455,0x3c2)]??0x1,_0x5e1a04['U']={},_0x5e1a04['U'][_0x3d91be(0x382,0x380)]=new Float32Array(_0x5e1a04['udata']),_0x5e1a04['U']['min']=_0x5e1a04[_0x3d91be(0x3b1,0x3b9)]??Math[_0x4bab0f(0x4a1,0x4a9)](..._0x5e1a04['udata']),_0x5e1a04['U']['max']=_0x5e1a04['umax']??Math['max'](..._0x5e1a04[_0x3d91be(0x2cc,0x344)]),_0x5e1a04['V']={},_0x5e1a04['V'][_0x4bab0f(0x4fb,0x4fe)]=new Float32Array(_0x5e1a04['vdata']),_0x5e1a04['V']['min']=_0x5e1a04['vmin']??Math[_0x3d91be(0x350,0x326)](..._0x5e1a04['vdata']),_0x5e1a04['V']['max']=_0x5e1a04[_0x4bab0f(0x434,0x494)]??Math['max'](..._0x5e1a04['vdata']));function _0x3d91be(_0xdb92c1,_0x526658){return _0xd0dfaa(_0xdb92c1,_0x526658-0x580);}!_0x5e1a04['W']&&(_0x5e1a04['W']={'array':new Float32Array(_0x5e1a04['U']['array']['length']),'min':0x0,'max':0x0});if(!_0x5e1a04['H']){var _0x458195;_0x5e1a04['H']={'array':new Float32Array(_0x5e1a04['U']['array'][_0x4bab0f(0x55d,0x56f)]),'min':0x0,'max':0x0};if((_0x458195=_0x5e1a04['lev'])!==null&&_0x458195!==void 0x0&&_0x458195[_0x4bab0f(0x4fb,0x4c7)]){const {lon:_0x32d1a1,lat:_0x235d3b,lev:_0x29dff3}=_0x5e1a04[_0x3d91be(0x331,0x2c8)];for(let _0x2f14be=0x0;_0x2f14be<_0x29dff3;_0x2f14be++){for(let _0x88fe29=0x0;_0x88fe29<_0x235d3b;_0x88fe29++){for(let _0x4ae611=0x0;_0x4ae611<_0x32d1a1;_0x4ae611++){const _0x5a2b72=_0x2f14be*(_0x32d1a1*_0x235d3b)+_0x88fe29*_0x32d1a1+_0x4ae611;_0x5e1a04['H']['array'][_0x5a2b72]=_0x5e1a04[_0x3d91be(0x303,0x370)]['array'][_0x2f14be];}}}_0x5e1a04['H'][_0x4bab0f(0x4a1,0x460)]=Math['min'](..._0x5e1a04[_0x3d91be(0x407,0x370)]['array']),_0x5e1a04['H']['max']=Math['max'](..._0x5e1a04[_0x4bab0f(0x4eb,0x4a2)]['array']);}}this['data']=_0x5e1a04,this['options']=_0xdffc4e,this['viewerParameters']=_0x394390;function _0x4bab0f(_0x38ca9d,_0x24670f){return _0x4bcd34(_0x24670f,_0x38ca9d-0x4ff);}this['particlesComputing']=new ParticlesComputing(this[_0x3d91be(0x307,0x351)],this['data'],this[_0x4bab0f(0x4e4,0x4a3)],this['viewerParameters']),this['particlesRendering']=new ParticlesRendering(this['context'],this['data'],this['options'],this['viewerParameters'],this[_0x3d91be(0x352,0x2ec)]);}[_0xd0dfaa(-0x16c,-0x1e3)](_0x230caa){this['particlesComputing']['destroyParticlesTextures']();function _0x3ce9d2(_0x161bc5,_0x170f2e){return _0x4bcd34(_0x161bc5,_0x170f2e-0x14e);}Object[_0x3ce9d2(0xfb,0xa2)](this['particlesComputing'][_0x3ce9d2(0x116,0x13e)])['forEach'](_0x47af22=>{function _0x48e1f0(_0x533012,_0x1db411){return _0x38d793(_0x1db411-0x418,_0x533012);}function _0x3530ed(_0x5c1c83,_0x2d08ef){return _0x38d793(_0x5c1c83-0x3db,_0x2d08ef);}this[_0x48e1f0(0x2a5,0x2b3)][_0x3530ed(0x2fe,0x27e)][_0x47af22][_0x48e1f0(0x346,0x2d8)]();}),this['particlesRendering']['textures']['colorTable']['destroy'](),Object['keys'](this[_0x38d793(-0x15e,-0x15a)]['framebuffers'])['forEach'](_0x151c1a=>{function _0x578835(_0x140d82,_0x42fa96){return _0x3ce9d2(_0x140d82,_0x42fa96-0x156);}function _0x1c6989(_0x2dcd6e,_0xcfbbc4){return _0x3ce9d2(_0xcfbbc4,_0x2dcd6e- -0x334);}this[_0x1c6989(-0x277,-0x205)][_0x1c6989(-0x239,-0x1ca)][_0x151c1a]['destroy']();}),this[_0x3ce9d2(0xca,0x11b)]=_0x230caa;function _0x38d793(_0x21088b,_0x1fc2a8){return _0xd0dfaa(_0x1fc2a8,_0x21088b-0x12f);}this['particlesComputing']=new ParticlesComputing(this[_0x3ce9d2(0x16f,0x11b)],this[_0x38d793(-0xd0,-0x14b)],this[_0x3ce9d2(0xf7,0x133)],this[_0x38d793(-0x8c,-0x11e)]),this['particlesRendering']=new ParticlesRendering(this['context'],this[_0x3ce9d2(0x173,0x14b)],this['options'],this[_0x38d793(-0x8c,-0xd2)],this['particlesComputing']);}[_0x4bcd34(-0x1d,0x23)](){function _0x133bec(_0x3a8e77,_0x1616e8){return _0x4bcd34(_0x3a8e77,_0x1616e8-0x64);}const _0x144a53=new Cesium$2['ClearCommand']({'color':new Cesium$2['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2[_0x67a7cc(0x2a,0x7b)][_0x67a7cc(0x39,0xc6)]});function _0x67a7cc(_0x4d57d2,_0x329e58){return _0xd0dfaa(_0x329e58,_0x4d57d2-0x2c7);}Object[_0x133bec(-0xdd,-0x48)](this['particlesRendering']['framebuffers'])[_0x67a7cc(0x6,-0x62)](_0x463ae9=>{_0x144a53['framebuffer']=this[_0x279523(-0x1a6,-0x1df)]['framebuffers'][_0x463ae9];function _0x279523(_0x43418d,_0x3b37ea){return _0x67a7cc(_0x43418d- -0x1e0,_0x3b37ea);}_0x144a53['execute'](this['context']);});}['refreshParticles'](_0x5d8145,_0x4710f3=!![]){function _0x51010b(_0x17f2f0,_0x490c2e){return _0x4bcd34(_0x17f2f0,_0x490c2e-0x1a4);}function _0x578739(_0x52a802,_0x4ac4d3){return _0xd0dfaa(_0x4ac4d3,_0x52a802-0x41c);}_0x4710f3&&(this['clearFramebuffers'](),this[_0x51010b(0x14d,0x10c)]['destroyParticlesTextures'](),this[_0x51010b(0x80,0x10c)]['createParticlesTextures'](this['context'],this[_0x51010b(0x1ba,0x189)],this['viewerParameters']));if(_0x5d8145){var _0x1aaf43;const _0x206e11=this[_0x578739(0x18f,0x138)][_0x51010b(0x244,0x1be)](this[_0x578739(0x205,0x1ec)]);this[_0x578739(0x18f,0x1a1)]['primitives'][_0x578739(0x272,0x2f4)]['geometry']=_0x206e11;const _0x31b9df=Cesium$2['VertexArray'][_0x578739(0x22d,0x2bf)]({'context':this['context'],'geometry':_0x206e11,'attributeLocations':this[_0x51010b(0x101,0x113)][_0x578739(0x1e5,0x22f)]['segments']['attributeLocations'],'bufferUsage':Cesium$2['BufferUsage']['STATIC_DRAW']});(_0x1aaf43=this[_0x578739(0x18f,0x1ab)][_0x51010b(0x1f3,0x169)])!==null&&_0x1aaf43!==void 0x0&&(_0x1aaf43=_0x1aaf43[_0x578739(0x272,0x24a)])!==null&&_0x1aaf43!==void 0x0&&_0x1aaf43[_0x51010b(0x281,0x1ed)]&&(this['particlesRendering']['primitives'][_0x578739(0x272,0x228)]['commandToExecute']['vertexArray']=_0x31b9df);}}[_0x4bcd34(-0x12,-0x87)](_0x19388f){function _0x1b1aa9(_0x56dedd,_0x3dc83c){return _0xd0dfaa(_0x3dc83c,_0x56dedd-0xac);}let _0x23e4ad=![];this['options'][_0x144631(0x4b,-0x4c)]!==_0x19388f[_0x144631(0x4b,0x56)]&&(_0x23e4ad=!![]);function _0x144631(_0x153e76,_0x3026c1){return _0xd0dfaa(_0x3026c1,_0x153e76-0x230);}Object['keys'](_0x19388f)[_0x144631(-0x91,-0xfe)](_0x3f4644=>{function _0x2c7819(_0x6a19cd,_0x5881df){return _0x1b1aa9(_0x5881df- -0x42,_0x6a19cd);}this[_0x2c7819(-0x18b,-0x1ad)][_0x3f4644]=_0x19388f[_0x3f4644];}),this[_0x144631(0x22,0x48)](_0x23e4ad,_0x19388f[_0x1b1aa9(-0x141,-0x15c)]);}['applyViewerParameters'](_0x57c0c7){Object[_0x24961d(0x4ba,0x463)](_0x57c0c7)[_0x2a8224(0x213,0x188)](_0xde8b9=>{function _0x3a7a55(_0x6a5d76,_0x8c3fb5){return _0x2a8224(_0x6a5d76,_0x8c3fb5-0x262);}this[_0x3a7a55(0x45d,0x4f0)][_0xde8b9]=_0x57c0c7[_0xde8b9];}),this[_0x2a8224(0x1bc,0x23b)](![]);function _0x2a8224(_0x459c0b,_0x2b6493){return _0x4bcd34(_0x459c0b,_0x2b6493-0x24d);}function _0x24961d(_0x1f837b,_0x1835fc){return _0x4bcd34(_0x1f837b,_0x1835fc-0x50f);}!this['options']['dynamic']&&(this['options']['dynamic']=!![],this['setOptions'](this['options']),setTimeout(()=>{function _0x364347(_0x4767c4,_0x366d7d){return _0x24961d(_0x366d7d,_0x4767c4- -0x3b7);}function _0x292493(_0x3219e7,_0x261f71){return _0x24961d(_0x3219e7,_0x261f71- -0x28f);}this[_0x292493(0x235,0x265)]['dynamic']=![],this['setOptions'](this[_0x292493(0x290,0x265)]);},0x1f4));}[_0xd0dfaa(-0x26a,-0x26f)](){clearTimeout(this[_0x1ee5c4(-0x165,-0x16d)]),this[_0x1ee5c4(-0x20d,-0x1f9)][_0x33cc37(0x5a5,0x600)](),Object['keys'](this['particlesComputing']['windTextures'])[_0x33cc37(0x4b0,0x4c4)](_0x552ab1=>{function _0x2b04f9(_0x4f693f,_0x45c6ad){return _0x33cc37(_0x45c6ad- -0x3cb,_0x4f693f);}function _0x428fec(_0x4269bc,_0xa29ec6){return _0x1ee5c4(_0xa29ec6-0x70d,_0x4269bc);}this[_0x428fec(0x553,0x500)]['windTextures'][_0x552ab1][_0x2b04f9(0xa4,0x137)]();});function _0x33cc37(_0x4f909c,_0x151418){return _0x4bcd34(_0x151418,_0x4f909c-0x575);}this[_0x1ee5c4(-0x206,-0x1ee)]['textures']['colorTable']['destroy'](),Object[_0x33cc37(0x4c9,0x539)](this[_0x1ee5c4(-0x206,-0x17d)]['framebuffers'])['forEach'](_0x28cf31=>{this['particlesRendering']['framebuffers'][_0x28cf31]['destroy']();});function _0x1ee5c4(_0x1d7357,_0x48d2bc){return _0x4bcd34(_0x48d2bc,_0x1d7357- -0x175);}for(const _0x1f27b3 in this){delete this[_0x1f27b3];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x230d8e={};_0x230d8e['particlesNumber']=0x1000,_0x230d8e[_0x4bcd34(-0xb0,-0xc1)]=0x0,_0x230d8e['fadeOpacity']=0.996,_0x230d8e['dropRate']=0.003,_0x230d8e['dropRateBump']=0.01,_0x230d8e['speedFactor']=0.5,_0x230d8e['lineWidth']=0x2,_0x230d8e[_0x4bcd34(-0x1b,0x4a)]=['rgb(206,255,255)'],_0x230d8e['dynamic']=!![];const DEF_OPTIONS=_0x230d8e;class WindLayer extends BaseLayer$1{constructor(_0x400b79={}){_0x400b79={...DEF_OPTIONS,..._0x400b79},super(_0x400b79),this['_setOptionsHook'](_0x400b79);}get['layer'](){return this['primitives'];}get['data'](){return this['_data'];}set['data'](_0x241494){function _0x1e7fd5(_0x5d2b55,_0x519a0e){return _0xd0dfaa(_0x5d2b55,_0x519a0e-0x25b);}this[_0x1e7fd5(0x39,-0x22)](_0x241494);}get[_0xd0dfaa(-0x1ca,-0x1b2)](){function _0x419ead(_0x4221be,_0x2b151b){return _0xd0dfaa(_0x4221be,_0x2b151b-0x22f);}return this[_0x419ead(-0x7a,0x18)]['colors'];}set[_0xd0dfaa(-0x209,-0x1b2)](_0xaede82){this[_0x1d9e44(0x19b,0x1cd)]['colors']=_0xaede82;function _0x1d9e44(_0x54a715,_0x32800c){return _0x4bcd34(_0x54a715,_0x32800c-0x1e8);}function _0x234eeb(_0x334362,_0x5156c8){return _0xd0dfaa(_0x5156c8,_0x334362-0x594);}if(this[_0x234eeb(0x303,0x2c3)]){const _0x845053={};_0x845053[_0x234eeb(0x3e2,0x3db)]=_0xaede82,this['particleSystem'][_0x234eeb(0x311,0x37a)](_0x845053);}this[_0x234eeb(0x389,0x3ee)]();}['_mountedHook'](){}['_addedHook'](){this[_0x174f81(0x149,0x18a)]=this[_0x174f81(0x93,-0x1)][_0x174f81(0x149,0xfc)],this['camera']=this[_0x3def69(0x4ed,0x545)][_0x3def69(0x58b,0x522)],this['primitives']=new Cesium$1['PrimitiveCollection'](),this['_map']['scene'][_0x174f81(0xb5,0x9e)]['add'](this['primitives']),this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](),'latRange':new Cesium$1['Cartesian2'](),'pixelSize':0x0,'lonDisplayRange':new Cesium$1[(_0x3def69(0x5f3,0x5a9))](),'latDisplayRange':new Cesium$1['Cartesian2']()},this['globeBoundingSphere']=new Cesium$1['BoundingSphere'](Cesium$1[_0x174f81(0xb7,0x38)][_0x3def69(0x5e5,0x5f2)],0.99*0x615299),this['updateViewerParameters'](),window[_0x174f81(0x10e,0x8a)]('resize',this[_0x174f81(0xe1,0x92)]['bind'](this),![]),this[_0x3def69(0x485,0x4f0)]=![],this['mouse_move']=![];function _0x174f81(_0x465b51,_0x50d5ad){return _0xd0dfaa(_0x50d5ad,_0x465b51-0x2ec);}this['_map']['on'](mars3d__namespace[_0x174f81(0xc8,0x6f)]['wheel'],this[_0x3def69(0x53c,0x4ef)],this),this['_map']['on'](mars3d__namespace[_0x174f81(0xc8,0xc9)]['mouseDown'],this[_0x3def69(0x62a,0x598)],this),this['_map']['on'](mars3d__namespace[_0x174f81(0xc8,0x140)]['mouseUp'],this['_onMouseUpEvent'],this);function _0x3def69(_0x5e0d78,_0x2001d4){return _0xd0dfaa(_0x5e0d78,_0x2001d4-0x79e);}this['_map']['on'](mars3d__namespace['EventType'][_0x3def69(0x584,0x551)],this['_onMouseMoveEvent'],this),this['_data']&&this['setData'](this[_0x174f81(0x112,0xd0)]);}['_removedHook'](){window[_0x125d12(0x358,0x33e)](_0x125d12(0x3e9,0x3dd),this[_0x125d12(0x3e9,0x471)]),this['_map'][_0x125d12(0x3b7,0x386)](mars3d__namespace[_0xde72c7(0x557,0x53b)][_0xde72c7(0x551,0x54a)],this['_onMap_preRenderEvent'],this);function _0x125d12(_0xe51ec9,_0x254ae5){return _0xd0dfaa(_0x254ae5,_0xe51ec9-0x5f4);}function _0xde72c7(_0x455457,_0x2210ca){return _0xd0dfaa(_0x455457,_0x2210ca-0x75f);}this['_map']['off'](mars3d__namespace['EventType']['wheel'],this[_0xde72c7(0x543,0x4b0)],this),this[_0x125d12(0x39b,0x373)][_0x125d12(0x3b7,0x382)](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0xde72c7(0x4b0,0x49d)],this['_onMouseUpEvent'],this),this['_map'][_0x125d12(0x3b7,0x344)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this['primitives'][_0xde72c7(0x60e,0x57f)](),this['_map'][_0xde72c7(0x5d9,0x5bc)][_0xde72c7(0x4a9,0x528)]['remove'](this['primitives']);}['resize'](){if(!this['show']||!this[_0x2230c6(0x4e1,0x44b)])return;function _0x447c59(_0xb0ad6c,_0x4ab37a){return _0xd0dfaa(_0xb0ad6c,_0x4ab37a-0x795);}this[_0x447c59(0x579,0x55e)]['show']=![];function _0x2230c6(_0x1eb98c,_0x5aea91){return _0x4bcd34(_0x5aea91,_0x1eb98c-0x576);}this['primitives'][_0x447c59(0x611,0x5b5)](),this[_0x447c59(0x559,0x53c)]['once'](mars3d__namespace['EventType'][_0x447c59(0x54b,0x580)],this['_onMap_preRenderEvent'],this);}[_0x4bcd34(-0x9e,-0x4d)](_0x3b7ffd){function _0xdd65ee(_0x7b9cfa,_0x13099c){return _0x4bcd34(_0x7b9cfa,_0x13099c- -0xde);}this[_0x5bf171(0x3b0,0x401)][_0xdd65ee(-0x52,-0xc5)](this[_0xdd65ee(-0xff,-0x85)]['context']);function _0x5bf171(_0x376f35,_0x5b0f86){return _0xd0dfaa(_0x5b0f86,_0x376f35-0x641);}this[_0xdd65ee(-0x11c,-0x1a6)](),this[_0xdd65ee(-0x18e,-0x119)][_0xdd65ee(-0x129,-0x130)]=!![];}['_onMapWhellEvent'](_0x1d4429){clearTimeout(this['refreshTimer']);if(!this[_0x3acbbc(0x557,0x50b)]||!this['particleSystem'])return;this['primitives']['show']=![];function _0x49e8f6(_0x2b1c42,_0x31264e){return _0x4bcd34(_0x31264e,_0x2b1c42-0x101);}function _0x3acbbc(_0x4de99d,_0x3d8cce){return _0xd0dfaa(_0x3d8cce,_0x4de99d-0x7a5);}this[_0x3acbbc(0x54d,0x54e)]=setTimeout(()=>{if(!this[_0xce8803(-0x1c8,-0x23a)])return;function _0xce8803(_0x5a7dda,_0x18e54d){return _0x49e8f6(_0x5a7dda- -0x277,_0x18e54d);}this['redraw']();},0xc8);}[_0x4bcd34(-0x62,-0xa)](_0x113a44){this['mouse_down']=!![];}[_0x4bcd34(-0xc2,-0x62)](_0x49e6ad){if(!this['show']||!this[_0x8d1873(0x251,0x1bf)])return;function _0xbea602(_0x18b9ff,_0x133a4f){return _0x4bcd34(_0x18b9ff,_0x133a4f- -0x14d);}function _0x8d1873(_0x13973d,_0x4a1207){return _0xd0dfaa(_0x13973d,_0x4a1207-0x450);}this[_0x8d1873(0x15a,0x1a2)]&&(this['primitives']['show']=![],this['mouse_move']=!![]);}[_0xd0dfaa(-0x267,-0x1d7)](_0xa22eb6){if(!this['show']||!this['particleSystem'])return;this['mouse_down']&&this[_0xe8a9eb(0x353,0x3a1)]&&this['redraw']();function _0x366979(_0x1e1cb7,_0x54d398){return _0x4bcd34(_0x54d398,_0x1e1cb7- -0x1b7);}this[_0x366979(-0x1f2,-0x1f5)][_0xe8a9eb(0x37c,0x346)]=!![];function _0xe8a9eb(_0x379669,_0x2e0afb){return _0xd0dfaa(_0x2e0afb,_0x379669-0x5ca);}this['mouse_down']=![],this['mouse_move']=![];}['redraw'](){if(!this['_map']||!this['show'])return;function _0x5ed8c7(_0x19ba10,_0x3f2000){return _0x4bcd34(_0x19ba10,_0x3f2000-0x2a1);}this[_0x4858d7(-0xe3,-0x111)]();function _0x4858d7(_0x18b55e,_0x368af6){return _0xd0dfaa(_0x368af6,_0x18b55e-0x11a);}this['particleSystem'][_0x5ed8c7(0x22a,0x29c)](this['viewerParameters']),this[_0x5ed8c7(0x231,0x266)]['show']=!![];}[_0x4bcd34(-0x18,-0x81)](_0x4d42a7){this[_0x76c76d(-0x162,-0xcc)]=_0x4d42a7;this['particleSystem']&&this[_0x1d6189(0x25c,0x2ed)][_0x76c76d(-0x1f7,-0x1a4)]();function _0x76c76d(_0x19400f,_0xad50da){return _0xd0dfaa(_0xad50da,_0x19400f-0x78);}this['particleSystem']=new ParticleSystem(this[_0x1d6189(0x34a,0x3aa)]['context'],_0x4d42a7,this['getOptions'](),this['viewerParameters']);function _0x1d6189(_0x21f2c2,_0x516f33){return _0x4bcd34(_0x516f33,_0x21f2c2-0x2f1);}this[_0x76c76d(-0x24c,-0x261)]();}['_setOptionsHook'](_0x3bbc29,_0x512847){function _0x41b690(_0x3b30cd,_0x577184){return _0xd0dfaa(_0x3b30cd,_0x577184-0x8e);}function _0x2ed1a2(_0x40e99d,_0x452561){return _0xd0dfaa(_0x40e99d,_0x452561-0x25f);}if(_0x3bbc29)for(const _0x5785da in _0x3bbc29){this[_0x5785da]=_0x3bbc29[_0x5785da];}this[_0x41b690(-0x24c,-0x203)]&&this['particleSystem']['setOptions'](this[_0x2ed1a2(0x24,0x29)]());}['getOptions'](){function _0x39f5be(_0x382737,_0x271ec2){return _0x4bcd34(_0x382737,_0x271ec2-0x101);}const _0x4e7920=Math['ceil'](Math['sqrt'](this['particlesNumber']));this['particlesNumber']=_0x4e7920*_0x4e7920;const _0x39b1aa={};_0x39b1aa[_0x51c583(-0x244,-0x1d1)]=_0x4e7920;function _0x51c583(_0x2fb03b,_0x2903aa){return _0x4bcd34(_0x2903aa,_0x2fb03b- -0x1bc);}return _0x39b1aa['maxParticles']=this['particlesNumber'],_0x39b1aa['colors']=this['colors'],_0x39b1aa[_0x39f5be(0x11c,0xb9)]=this[_0x39f5be(-0x51,0x40)],_0x39b1aa['fadeOpacity']=this[_0x39f5be(0x23,0xaa)],_0x39b1aa['dropRate']=this[_0x51c583(-0x165,-0x121)],_0x39b1aa['dropRateBump']=this['dropRateBump'],_0x39b1aa[_0x39f5be(-0x27,0x50)]=this['speedFactor'],_0x39b1aa['lineWidth']=this[_0x51c583(-0x179,-0x105)],_0x39b1aa[_0x51c583(-0x1ad,-0x193)]=this[_0x39f5be(0x187,0x110)],_0x39b1aa;}[_0xd0dfaa(-0x259,-0x2c4)](){this['primitives'][_0x200ce5(0x40e,0x4a0)](this['particleSystem']['particlesComputing']['primitives'][_0x581eb3(0x99,0x22)]),this[_0x581eb3(0xe1,0x14b)]['add'](this['particleSystem']['particlesComputing']['primitives']['updatePosition']);function _0x200ce5(_0x30b8f9,_0x49a09b){return _0x4bcd34(_0x49a09b,_0x30b8f9-0x41a);}function _0x581eb3(_0x54c492,_0xc0f3ff){return _0x4bcd34(_0xc0f3ff,_0x54c492-0x11c);}this['primitives']['add'](this[_0x200ce5(0x385,0x3a3)][_0x581eb3(0x84,-0x3)]['primitives']['postProcessingPosition']),this[_0x200ce5(0x3df,0x467)]['add'](this['particleSystem']['particlesRendering'][_0x581eb3(0xe1,0xc8)][_0x200ce5(0x46c,0x49a)]),this[_0x200ce5(0x3df,0x394)][_0x581eb3(0x110,0x108)](this['particleSystem']['particlesRendering']['primitives']['trails']),this[_0x581eb3(0xe1,0x114)][_0x200ce5(0x40e,0x422)](this['particleSystem'][_0x200ce5(0x389,0x375)]['primitives'][_0x200ce5(0x404,0x444)]);}['updateViewerParameters'](){function _0x449b95(_0x5a527d,_0x409c06){return _0xd0dfaa(_0x5a527d,_0x409c06-0x31a);}let _0x33199e=this['camera']['computeViewRectangle'](this[_0x1e0615(-0xc2,-0x121)]['globe'][_0x1e0615(-0x21d,-0x1f0)]);if(!_0x33199e){const _0x1466ad=this[_0x1e0615(-0x169,-0x1d7)]['getExtent']();_0x33199e=Cesium$1['Rectangle']['fromDegrees'](_0x1466ad['xmin'],_0x1466ad['ymin'],_0x1466ad['xmax'],_0x1466ad['ymax']);}const _0x324d11=Util['viewRectangleToLonLatRange'](_0x33199e);this['_data']?(this[_0x1e0615(-0xd0,-0x139)]['lonRange']['x']=Math['max'](_0x324d11['lon']['min'],this[_0x449b95(0xf3,0x140)]['xmin']),this[_0x449b95(0xda,0x15f)][_0x449b95(0xe3,0x5c)]['y']=Math[_0x1e0615(-0x190,-0x1d8)](_0x324d11[_0x1e0615(-0x1ac,-0x151)]['max'],this[_0x449b95(0xcf,0x140)]['xmax']),this[_0x1e0615(-0xe9,-0x139)]['latRange']['x']=Math['max'](_0x324d11[_0x1e0615(-0x23f,-0x1d0)][_0x449b95(0xee,0xc0)],this[_0x449b95(0xfd,0x140)]['ymin']),this[_0x1e0615(-0x118,-0x139)]['latRange']['y']=Math['min'](_0x324d11[_0x1e0615(-0x149,-0x1d0)]['max'],this['_data']['ymax'])):(this[_0x449b95(0x123,0x15f)]['lonRange']['x']=_0x324d11[_0x1e0615(-0xfb,-0x151)]['min'],this['viewerParameters']['lonRange']['y']=_0x324d11['lon'][_0x449b95(0x1b6,0x150)],this['viewerParameters'][_0x449b95(0x3f,0x91)]['x']=_0x324d11[_0x1e0615(-0x249,-0x1d0)]['min'],this['viewerParameters']['latRange']['y']=_0x324d11[_0x1e0615(-0x1de,-0x1d0)][_0x449b95(0xf9,0x150)]);function _0x1e0615(_0x3fd933,_0x2a6d32){return _0x4bcd34(_0x3fd933,_0x2a6d32- -0x17a);}const _0x10ca22=this[_0x1e0615(-0x1ec,-0x1fa)]['getPixelSize'](this[_0x449b95(0xda,0x68)],this[_0x1e0615(-0xd3,-0x121)][_0x1e0615(-0x1ae,-0x1fe)],this[_0x449b95(0x158,0x177)]['drawingBufferHeight']);_0x10ca22>0x0&&(this[_0x1e0615(-0x161,-0x139)]['pixelSize']=_0x10ca22);}}mars3d__namespace['LayerUtil'][_0x4bcd34(-0x32,-0x49)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this[_0xe5de1e(-0xec,-0x142)]=null;function _0xe5de1e(_0x36c6d2,_0x2fd03a){return _0x4bcd34(_0x36c6d2,_0x2fd03a- -0xec);}function _0x129b0a(_0x1b0e0b,_0x6152dc){return _0x4bcd34(_0x6152dc,_0x1b0e0b-0x325);}this[_0x129b0a(0x309,0x359)]=null,this['tlat']=null,this[_0xe5de1e(-0x198,-0x1ac)]=null,this[_0x129b0a(0x26d,0x276)]=null;}['destroy'](){for(const _0x1cdb48 in this){delete this[_0x1cdb48];}}}class CanvasWindField{constructor(_0xd57cae){this['setOptions'](_0xd57cae);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x985742){function _0x223438(_0x3a5fe6,_0x4b29b6){return _0xd0dfaa(_0x4b29b6,_0x3a5fe6-0x164);}this[_0x42eee3(0x270,0x2ed)]=(0x64-(_0x985742>0x63?0x63:_0x985742))*0x64;function _0x42eee3(_0x48d70e,_0x2d7585){return _0x4bcd34(_0x2d7585,_0x48d70e-0x30a);}this['_calc_speedRate']=[(this[_0x42eee3(0x25d,0x2c6)]-this['xmin'])/this[_0x223438(-0x132,-0xee)],(this[_0x42eee3(0x2aa,0x331)]-this[_0x42eee3(0x27e,0x2b5)])/this['_speedRate']];}get['maxAge'](){return this['_maxAge'];}set[_0xd0dfaa(-0x13c,-0x1b0)](_0x3c8559){function _0x48e028(_0x29c7ed,_0x412364){return _0xd0dfaa(_0x412364,_0x29c7ed-0x34f);}this[_0x48e028(0x16b,0x15f)]=_0x3c8559;}[_0xd0dfaa(-0x2b3,-0x283)](_0xa67810){this['options']=_0xa67810,this['maxAge']=_0xa67810['maxAge']||0x78;function _0x12aed7(_0x3b48a2,_0x1452f6){return _0x4bcd34(_0x3b48a2,_0x1452f6- -0x140);}this[_0x12aed7(-0x1a3,-0x1be)]=_0xa67810['speedRate']||0x32,this['particles']=[];const _0x5163ae=_0xa67810['particlesNumber']||0x1000;for(let _0x12a35f=0x0;_0x12a35f<_0x5163ae;_0x12a35f++){const _0x172130=this['_randomParticle'](new CanvasParticle());this['particles']['push'](_0x172130);}}[_0x4bcd34(-0x72,-0x1e)](_0x25a9de){function _0x1a2696(_0x2e01c3,_0x435203){return _0xd0dfaa(_0x2e01c3,_0x435203-0x722);}function _0x56f257(_0x3d2c20,_0x5da384){return _0x4bcd34(_0x5da384,_0x3d2c20-0xee);}this['rows']=_0x25a9de['rows'],this['cols']=_0x25a9de['cols'],this['xmin']=_0x25a9de[_0x56f257(0x13c,0x1ba)],this['xmax']=_0x25a9de[_0x56f257(0x41,0x71)],this[_0x56f257(0x62,0x7f)]=_0x25a9de[_0x1a2696(0x42e,0x49a)],this[_0x1a2696(0x4c9,0x4c6)]=_0x25a9de['ymax'],this['grid']=[];const _0xc7990d=_0x25a9de['udata'],_0x548716=_0x25a9de['vdata'];let _0x4fc384=![];_0xc7990d[_0x56f257(0x14c,0x1c4)]===this[_0x1a2696(0x557,0x583)]&&_0xc7990d[0x0][_0x56f257(0x14c,0xb7)]===this['cols']&&(_0x4fc384=!![]);let _0x19dd6b=0x0,_0x101786=null,_0x1fd564=null;for(let _0x165733=0x0;_0x165733<this['rows'];_0x165733++){_0x101786=[];for(let _0x4c5e9c=0x0;_0x4c5e9c<this[_0x56f257(0xf8,0x64)];_0x4c5e9c++,_0x19dd6b++){_0x4fc384?_0x1fd564=this['_calcUV'](_0xc7990d[_0x165733][_0x4c5e9c],_0x548716[_0x165733][_0x4c5e9c]):_0x1fd564=this['_calcUV'](_0xc7990d[_0x19dd6b],_0x548716[_0x19dd6b]),_0x101786['push'](_0x1fd564);}this['grid']['push'](_0x101786);}this[_0x56f257(0xd3,0x112)]['reverseY']&&this[_0x1a2696(0x53d,0x56b)]['reverse']();}['clear'](){delete this['rows'],delete this['cols'],delete this['xmin'],delete this[_0x243b2d(0x294,0x259)];function _0x243b2d(_0x31b7fe,_0x9c255d){return _0x4bcd34(_0x31b7fe,_0x9c255d-0x306);}function _0x497d93(_0x992594,_0x27a0f2){return _0x4bcd34(_0x27a0f2,_0x992594-0x377);}delete this[_0x497d93(0x2eb,0x29e)],delete this[_0x243b2d(0x26e,0x2a6)],delete this[_0x497d93(0x3bc,0x358)],delete this['particles'];}['toGridXY'](_0x52a6ce,_0xcb337f){function _0x1ab13a(_0x568f86,_0x4518c2){return _0x4bcd34(_0x4518c2,_0x568f86- -0x1d9);}const _0x40ca9c=(_0x52a6ce-this[_0x1ab13a(-0x18b,-0x11f)])/(this['xmax']-this['xmin'])*(this[_0x1ab13a(-0x1cf,-0x24f)]-0x1);function _0x5f1bd5(_0x45bebc,_0xb46e4c){return _0x4bcd34(_0xb46e4c,_0x45bebc-0x47c);}const _0xe3d306=(this[_0x5f1bd5(0x41c,0x390)]-_0xcb337f)/(this[_0x1ab13a(-0x239,-0x243)]-this[_0x1ab13a(-0x265,-0x27c)])*(this['rows']-0x1);return[_0x40ca9c,_0xe3d306];}['getUVByXY'](_0x5b6fb6,_0x250a63){function _0x447c57(_0x1a10f8,_0x287ea6){return _0x4bcd34(_0x287ea6,_0x1a10f8-0x467);}if(_0x5b6fb6<0x0||_0x5b6fb6>=this[_0x48b5b8(0x35b,0x2d9)]||_0x250a63>=this['rows'])return[0x0,0x0,0x0];const _0x5a30b0=Math[_0x48b5b8(0x277,0x2da)](_0x5b6fb6),_0x92f9=Math['floor'](_0x250a63);if(_0x5a30b0===_0x5b6fb6&&_0x92f9===_0x250a63)return this['grid'][_0x250a63][_0x5b6fb6];const _0x4a2ee5=_0x5a30b0+0x1,_0x56ea33=_0x92f9+0x1,_0x891bac=this['getUVByXY'](_0x5a30b0,_0x92f9),_0x5f58b7=this['getUVByXY'](_0x4a2ee5,_0x92f9),_0x457890=this[_0x48b5b8(0x382,0x30b)](_0x5a30b0,_0x56ea33);function _0x48b5b8(_0x3ea0bf,_0x3b0441){return _0x4bcd34(_0x3ea0bf,_0x3b0441-0x2cf);}const _0x5913cb=this['getUVByXY'](_0x4a2ee5,_0x56ea33);let _0x2f59a1=null;try{_0x2f59a1=this[_0x447c57(0x478,0x4fa)](_0x5b6fb6-_0x5a30b0,_0x250a63-_0x92f9,_0x891bac,_0x5f58b7,_0x457890,_0x5913cb);}catch(_0x4dde33){console['log'](_0x5b6fb6,_0x250a63);}return _0x2f59a1;}['_bilinearInterpolation'](_0x1cccc6,_0x4f00f0,_0xb77d73,_0x10a358,_0x18eb73,_0xa951e){const _0x4178df=0x1-_0x1cccc6,_0x5401ab=0x1-_0x4f00f0,_0x165c3f=_0x4178df*_0x5401ab,_0x31a06f=_0x1cccc6*_0x5401ab;function _0x5e9928(_0x375e69,_0xe771a){return _0x4bcd34(_0x375e69,_0xe771a- -0x6);}const _0x1c4c3c=_0x4178df*_0x4f00f0,_0x2a4e36=_0x1cccc6*_0x4f00f0,_0x4ad693=_0xb77d73[0x0]*_0x165c3f+_0x10a358[0x0]*_0x31a06f+_0x18eb73[0x0]*_0x1c4c3c+_0xa951e[0x0]*_0x2a4e36,_0x500f63=_0xb77d73[0x1]*_0x165c3f+_0x10a358[0x1]*_0x31a06f+_0x18eb73[0x1]*_0x1c4c3c+_0xa951e[0x1]*_0x2a4e36;return this[_0x5e9928(-0x7d,-0x19)](_0x4ad693,_0x500f63);}['_calcUV'](_0x553da9,_0x250724){return[+_0x553da9,+_0x250724,Math['sqrt'](_0x553da9*_0x553da9+_0x250724*_0x250724)];}['getUVByPoint'](_0x5d9c35,_0x2a428a){function _0x50159d(_0x558b4d,_0x79b078){return _0x4bcd34(_0x79b078,_0x558b4d- -0x17d);}if(!this['isInExtent'](_0x5d9c35,_0x2a428a))return null;const _0x1cf9a7=this[_0x50159d(-0x210,-0x1e7)](_0x5d9c35,_0x2a428a),_0x52e755=this['getUVByXY'](_0x1cf9a7[0x0],_0x1cf9a7[0x1]);return _0x52e755;}[_0xd0dfaa(-0x278,-0x299)](_0x55d447,_0xe7a7be){function _0x129326(_0x5f154f,_0x24e2e4){return _0xd0dfaa(_0x5f154f,_0x24e2e4-0x3ad);}return _0x55d447>=this[_0x129326(0x181,0x1ff)]&&_0x55d447<=this['xmax']&&_0xe7a7be>=this['ymin']&&_0xe7a7be<=this['ymax']?!![]:![];}['getRandomLatLng'](){const _0x24e214=fRandomByfloat(this[_0xca270e(0x50e,0x50c)],this[_0x49f8c8(0x35b,0x39f)]),_0x4a784c=fRandomByfloat(this['ymin'],this['ymax']);function _0x49f8c8(_0x964e88,_0x5db243){return _0x4bcd34(_0x964e88,_0x5db243-0x44c);}const _0x2453ac={};_0x2453ac[_0xca270e(0x46a,0x4fc)]=_0x4a784c,_0x2453ac[_0xca270e(0x443,0x4ab)]=_0x24e214;function _0xca270e(_0x1f08b1,_0x49f830){return _0xd0dfaa(_0x49f830,_0x1f08b1-0x6bc);}return _0x2453ac;}[_0x4bcd34(-0x4f,0x16)](){let _0xd905c6,_0x27bf62,_0x3ea3c5;for(let _0x3359a2=0x0,_0x42b09b=this['particles'][_0x467921(0x317,0x2f3)];_0x3359a2<_0x42b09b;_0x3359a2++){let _0x4f32d5=this['particles'][_0x3359a2];_0x4f32d5[_0x467921(0x15c,0x1d5)]<=0x0&&(_0x4f32d5=this[_0x467921(0x221,0x246)](_0x4f32d5));if(_0x4f32d5['age']>0x0){const _0x514cb8=_0x4f32d5[_0x467921(0x283,0x279)],_0x4d88c0=_0x4f32d5[_0x467921(0x138,0x1ce)];_0x3ea3c5=this[_0x3e364c(-0xbe,-0xda)](_0x514cb8,_0x4d88c0),_0x3ea3c5?(_0xd905c6=_0x514cb8+this['_calc_speedRate'][0x0]*_0x3ea3c5[0x0],_0x27bf62=_0x4d88c0+this[_0x3e364c(-0x6d,-0x78)][0x1]*_0x3ea3c5[0x1],_0x4f32d5[_0x3e364c(-0x7e,-0x5e)]=_0x514cb8,_0x4f32d5['lat']=_0x4d88c0,_0x4f32d5['tlng']=_0xd905c6,_0x4f32d5[_0x467921(0x179,0x1ce)]=_0x27bf62,_0x4f32d5['speed']=_0x3ea3c5[0x2],_0x4f32d5['age']--):_0x4f32d5['age']=0x0;}}function _0x467921(_0x4c674f,_0x5f1692){return _0x4bcd34(_0x4c674f,_0x5f1692-0x295);}function _0x3e364c(_0x23dab2,_0x50261b){return _0x4bcd34(_0x50261b,_0x23dab2- -0x1);}return this[_0x3e364c(-0x2f,-0x2c)];}['_randomParticle'](_0x28eb41){let _0x431a52,_0x1e5cff;for(let _0x38b72a=0x0;_0x38b72a<0x1e;_0x38b72a++){_0x431a52=this['getRandomLatLng'](),_0x1e5cff=this['getUVByPoint'](_0x431a52[_0x4d4356(0x23b,0x245)],_0x431a52['lat']);if(_0x1e5cff&&_0x1e5cff[0x2]>0x0)break;}if(!_0x1e5cff)return _0x28eb41;function _0x4d4356(_0x95f105,_0x3e5fcc){return _0xd0dfaa(_0x95f105,_0x3e5fcc-0x4be);}const _0x336c41=_0x431a52['lng']+this[_0x4d4356(0x2aa,0x256)][0x0]*_0x1e5cff[0x0],_0xa9160f=_0x431a52[_0x4d4356(0x2d2,0x26c)]+this[_0x4d4356(0x24f,0x256)][0x1]*_0x1e5cff[0x1];_0x28eb41[_0x4d4356(0x28f,0x245)]=_0x431a52[_0x4d4356(0x23f,0x245)],_0x28eb41[_0x2ed211(-0x172,-0x10d)]=_0x431a52['lat'],_0x28eb41['tlng']=_0x336c41,_0x28eb41[_0x4d4356(0x21b,0x1fb)]=_0xa9160f;function _0x2ed211(_0x24ec1f,_0x2d6d9f){return _0x4bcd34(_0x2d6d9f,_0x24ec1f- -0x11c);}return _0x28eb41['age']=Math['round'](Math[_0x2ed211(-0xda,-0xd4)]()*this[_0x2ed211(-0xd0,-0xb1)]),_0x28eb41[_0x2ed211(-0x1d4,-0x234)]=_0x1e5cff[0x2],_0x28eb41;}['destroy'](){for(const _0x3a6065 in this){delete this[_0x3a6065];}}}function fRandomByfloat(_0x42ca6b,_0x54e7e6){function _0x4a8fba(_0x1e5ca7,_0x2dedbe){return _0x4bcd34(_0x2dedbe,_0x1e5ca7-0x281);}return _0x42ca6b+Math[_0x4a8fba(0x2c3,0x2e3)]()*(_0x54e7e6-_0x42ca6b);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];function _0x4bcd34(_0x56e927,_0x3ee1d7){return _0x5c9e(_0x3ee1d7- -0x1d2,_0x56e927);}class CanvasWindLayer extends BaseLayer{constructor(_0x35fbd5={}){super(_0x35fbd5),this[_0x228e96(0x492,0x46a)](_0x35fbd5);function _0x228e96(_0x2c40d,_0x4c401e){return _0x4bcd34(_0x2c40d,_0x4c401e-0x461);}function _0x50b89d(_0x30249b,_0x28c73c){return _0x4bcd34(_0x30249b,_0x28c73c- -0x1e6);}this[_0x50b89d(-0x1f0,-0x274)]=null,_0x35fbd5['colors']&&_0x35fbd5['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x228e96(0x47f,0x487))](_0x35fbd5));}[_0x4bcd34(-0x37,0x9)](_0x43d265,_0x468170){this[_0x49eaeb(0x528,0x58f)]=0x3e8/(_0x43d265['frameRate']||0xa),this['_pointerEvents']=this[_0x49eaeb(0x533,0x59e)]['pointerEvents']??![],this[_0x478ec3(0xc5,0x14a)]=_0x43d265['color']||_0x478ec3(0x85,0x96),this[_0x49eaeb(0x5d3,0x5fc)]=_0x43d265[_0x478ec3(0x17c,0x204)]||0x1;function _0x478ec3(_0x484c9f,_0x52c4dd){return _0xd0dfaa(_0x52c4dd,_0x484c9f-0x335);}function _0x49eaeb(_0x131f12,_0x3cb57f){return _0xd0dfaa(_0x131f12,_0x3cb57f-0x7b5);}this['fixedHeight']=_0x43d265[_0x49eaeb(0x500,0x4f8)]??0x0,this[_0x478ec3(0x122,0x19c)]=_0x43d265['reverseY']??![],this['windField']&&this[_0x49eaeb(0x5c6,0x5e7)]['setOptions'](_0x43d265);}get['layer'](){function _0x4a6a76(_0x43a841,_0x373441){return _0xd0dfaa(_0x373441,_0x43a841-0x47c);}return this[_0x4a6a76(0x1f2,0x218)];}get['canvasWidth'](){function _0x4bff40(_0x4ecc76,_0x19ba35){return _0x4bcd34(_0x19ba35,_0x4ecc76-0x4ef);}return this['_map']['scene'][_0x4bff40(0x461,0x446)]['clientWidth'];}get[_0x4bcd34(-0x108,-0xa3)](){function _0x4356ab(_0x3f4b3a,_0x2a9a0f){return _0xd0dfaa(_0x2a9a0f,_0x3f4b3a-0x68b);}return this['_map']['scene'][_0x4356ab(0x401,0x48a)]['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x5655c1){function _0x5e78da(_0x314ad9,_0x428331){return _0x4bcd34(_0x314ad9,_0x428331- -0x1ac);}function _0x46f0ca(_0x18e922,_0x5f5589){return _0xd0dfaa(_0x18e922,_0x5f5589-0x16b);}this[_0x5e78da(-0x28f,-0x219)]=_0x5655c1;if(!this[_0x5e78da(-0x1fa,-0x23a)])return;_0x5655c1?this['canvas']['style']['pointer-events']=_0x46f0ca(-0x12a,-0xf8):this['canvas'][_0x46f0ca(-0x128,-0xb1)]['pointer-events']='none';}get[_0xd0dfaa(-0x1d1,-0x1e8)](){function _0x2266ab(_0x2eb5d4,_0x3f1951){return _0xd0dfaa(_0x3f1951,_0x2eb5d4-0x116);}return this[_0x2266ab(-0x101,-0xed)]['particlesNumber'];}set['particlesNumber'](_0x183b11){this['options'][_0xe52f76(-0x1ad,-0x16f)]=_0x183b11;function _0x4bc9c8(_0x245c61,_0x1be2a9){return _0x4bcd34(_0x245c61,_0x1be2a9- -0x4f);}function _0xe52f76(_0x2baef9,_0x2da199){return _0xd0dfaa(_0x2da199,_0x2baef9-0x3b);}clearTimeout(this[_0x4bc9c8(-0x85,-0xd9)]),this[_0xe52f76(-0x24b,-0x1c2)]=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x5ea82f(_0x4ebf6c,_0x2223ae){return _0xd0dfaa(_0x2223ae,_0x4ebf6c-0x613);}return this['options'][_0x5ea82f(0x399,0x38f)];}set[_0x4bcd34(-0xee,-0x7e)](_0x24c79e){this['options'][_0x1c1730(0x2d5,0x2d8)]=_0x24c79e;function _0x196bf1(_0x3e9e2f,_0x588187){return _0xd0dfaa(_0x3e9e2f,_0x588187-0x206);}function _0x1c1730(_0x4e7a58,_0x551efc){return _0x4bcd34(_0x551efc,_0x4e7a58-0x353);}this[_0x1c1730(0x381,0x3ab)]&&(this[_0x1c1730(0x381,0x35f)][_0x196bf1(-0x67,-0x74)]=_0x24c79e);}get['maxAge'](){function _0x56ccea(_0x122499,_0x4df48f){return _0xd0dfaa(_0x4df48f,_0x122499-0x3a0);}return this['options'][_0x56ccea(0x1f0,0x21c)];}set[_0xd0dfaa(-0x120,-0x1b0)](_0x2b5d87){function _0x2856fe(_0x19ca15,_0x5aa99b){return _0xd0dfaa(_0x19ca15,_0x5aa99b-0x3db);}function _0x5414a7(_0x2494bf,_0x2a4a71){return _0xd0dfaa(_0x2494bf,_0x2a4a71-0x707);}this[_0x5414a7(0x4a7,0x4f0)][_0x5414a7(0x5c3,0x557)]=_0x2b5d87,this['windField']&&(this[_0x5414a7(0x510,0x539)][_0x2856fe(0x1ec,0x22b)]=_0x2b5d87);}get[_0xd0dfaa(-0x1a5,-0x1ff)](){return this['windData'];}set['data'](_0x588359){this['setData'](_0x588359);}['_showHook'](_0x43a85b){function _0x44944e(_0x48c9a6,_0x9575ff){return _0xd0dfaa(_0x48c9a6,_0x9575ff-0x763);}function _0x460dcb(_0x3c70c3,_0x21696c){return _0xd0dfaa(_0x21696c,_0x3c70c3-0x191);}_0x43a85b?this['_addedHook']():(this[_0x44944e(0x591,0x5ba)]&&(this['options']['data']=this[_0x44944e(0x55e,0x5ba)]),this[_0x44944e(0x59f,0x55f)]());}[_0xd0dfaa(-0x1c5,-0x225)](){function _0x556428(_0x184d71,_0xe9f13e){return _0x4bcd34(_0x184d71,_0xe9f13e- -0xf2);}this[_0x556428(-0xb3,-0x10d)]['worker']?this['initWorker']():this['windField']=new CanvasWindField(this['options']);}[_0xd0dfaa(-0x298,-0x230)](){this[_0x5f9643(0x86,0x8d)]=this[_0x5f9643(0x131,0x158)]();const _0x4e31b8={};_0x4e31b8['willReadFrequently']=!![];function _0x48e405(_0x2059ef,_0x382375){return _0x4bcd34(_0x2059ef,_0x382375-0x3e4);}this['canvasContext']=this[_0x5f9643(0x5d,0x8d)]['getContext']('2d',_0x4e31b8),this[_0x48e405(0x44b,0x440)]();function _0x5f9643(_0x445646,_0x22e449){return _0x4bcd34(_0x445646,_0x22e449-0x11b);}this['options'][_0x5f9643(0x162,0x118)]&&this[_0x48e405(0x395,0x363)](this[_0x5f9643(0x93,0x100)][_0x48e405(0x367,0x3e1)]);}[_0x4bcd34(-0x6,-0x8)](){this[_0x13d38b(-0x118,-0xe9)]();function _0x5cbab4(_0x8f23a0,_0x58d23a){return _0x4bcd34(_0x58d23a,_0x8f23a0- -0x5d);}this['unbindEvent']();function _0x13d38b(_0x260afa,_0x38e74e){return _0x4bcd34(_0x260afa,_0x38e74e- -0x2b);}this['canvas']&&(this[_0x5cbab4(-0xba,-0x148)]['container']['removeChild'](this[_0x5cbab4(-0xeb,-0x86)]),delete this['canvas']);}['_createCanvas'](){const _0x1322c4=mars3d__namespace['DomUtil']['create']('canvas','mars3d-canvasWind',this['_map'][_0x5eb015(0x2b0,0x275)]);function _0x4cf40e(_0x117359,_0x2bb4c8){return _0x4bcd34(_0x117359,_0x2bb4c8-0xdf);}_0x1322c4['style']['position']=_0x4cf40e(0x42,0x50),_0x1322c4[_0x5eb015(0x170,0x1fd)][_0x4cf40e(0xf3,0x116)]='0px',_0x1322c4['style'][_0x5eb015(0x203,0x25d)]='0px',_0x1322c4['style']['width']=this['_map']['scene'][_0x4cf40e(0x6d,0x51)]['clientWidth']+'px',_0x1322c4['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px';function _0x5eb015(_0x517d5a,_0x558859){return _0x4bcd34(_0x517d5a,_0x558859-0x21d);}return _0x1322c4['style']['pointerEvents']=this['_pointerEvents']?'auto':_0x4cf40e(0x6b,0x60),_0x1322c4['style']['zIndex']=this[_0x5eb015(0x21c,0x202)]['zIndex']??0x9,_0x1322c4[_0x4cf40e(0xbf,0x7c)]=this['_map'][_0x4cf40e(0x141,0x138)]['canvas']['clientWidth'],_0x1322c4['height']=this[_0x4cf40e(0x42,0x82)]['scene']['canvas']['clientHeight'],_0x1322c4;}[_0xd0dfaa(-0x203,-0x20b)](){function _0x56b060(_0x1f87ef,_0x31d0a4){return _0x4bcd34(_0x31d0a4,_0x1f87ef-0x2d3);}function _0xccb228(_0x4abc74,_0x2ef8a9){return _0xd0dfaa(_0x2ef8a9,_0x4abc74-0x23a);}this[_0x56b060(0x245,0x204)]&&(this['canvas'][_0x56b060(0x2b3,0x2f3)]['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this['canvas']['style']['height']=this[_0x56b060(0x276,0x1fc)]['scene']['canvas']['clientHeight']+'px',this['canvas']['width']=this[_0xccb228(-0x1f,-0x99)]['scene'][_0xccb228(-0x50,-0xa2)][_0x56b060(0x251,0x283)],this['canvas'][_0x56b060(0x243,0x24f)]=this['_map']['scene']['canvas']['clientHeight']);}['bindEvent'](){const _0x4fe38e=this;function _0x139f9b(_0x1cbccb,_0x21ee4d){return _0xd0dfaa(_0x21ee4d,_0x1cbccb-0x3e8);}function _0x5c9911(_0x3caa8a,_0x5abaac){return _0xd0dfaa(_0x5abaac,_0x3caa8a-0x7ab);}let _0x8da811=Date[_0x5c9911(0x53d,0x5c6)]();(function _0x536f6f(){function _0x2a57bd(_0x15a98a,_0x348993){return _0x5c9911(_0x348993- -0x4ce,_0x15a98a);}function _0x47ba48(_0x5be426,_0x1e0de9){return _0x5c9911(_0x1e0de9- -0x7a4,_0x5be426);}if(_0x4fe38e[_0x47ba48(-0x332,-0x2ae)])return;_0x4fe38e[_0x47ba48(-0x2ab,-0x231)]=window[_0x2a57bd(0x19c,0x110)](_0x536f6f);if(_0x4fe38e[_0x47ba48(-0x230,-0x247)]&&_0x4fe38e['windField']){const _0x4b7733=Date['now'](),_0x572bbf=_0x4b7733-_0x8da811;_0x572bbf>_0x4fe38e['frameTime']&&(_0x8da811=_0x4b7733-_0x572bbf%_0x4fe38e[_0x47ba48(-0x269,-0x21f)],_0x4fe38e[_0x47ba48(-0x23b,-0x291)]());}}(),window['addEventListener']('resize',this['resize']['bind'](this),![]),this[_0x5c9911(0x4fd,0x51d)]=![],this[_0x139f9b(0x171,0x1a2)]=![],this['options']['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x139f9b(0x1c4,0x1b9)]['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this[_0x139f9b(0x18f,0x160)]['on'](mars3d__namespace['EventType'][_0x5c9911(0x4e9,0x4e1)],this[_0x139f9b(0x211,0x1c6)],this)));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']),delete this[_0x38c9a1(-0x8a,-0x9f)];function _0x38c9a1(_0x47890e,_0x204ecd){return _0x4bcd34(_0x47890e,_0x204ecd- -0x63);}function _0x155bf0(_0x2050e6,_0x4f8038){return _0xd0dfaa(_0x4f8038,_0x2050e6-0x1fd);}window[_0x155bf0(-0x9f,-0x72)]('resize',this['resize']),this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this[_0x38c9a1(-0x1a6,-0x116)],this),this[_0x38c9a1(-0x3c,-0xc0)][_0x155bf0(-0x40,-0x18)](mars3d__namespace[_0x38c9a1(-0xf8,-0x8b)]['mouseDown'],this[_0x155bf0(-0x9,-0x4b)],this),this['_map'][_0x155bf0(-0x40,-0xa9)](mars3d__namespace['EventType']['mouseUp'],this[_0x38c9a1(-0x8b,-0x3e)],this),this[_0x38c9a1(-0x51,-0xc0)]['off'](mars3d__namespace[_0x38c9a1(-0x30,-0x8b)]['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x1e2510){clearTimeout(this['refreshTimer']);if(!this[_0x5db6df(-0xc1,-0xb5)]||!this['canvas'])return;function _0x5db6df(_0xbf6e9c,_0x3ed2f4){return _0x4bcd34(_0xbf6e9c,_0x3ed2f4- -0x63);}function _0x547415(_0x272208,_0x476d7d){return _0xd0dfaa(_0x272208,_0x476d7d-0x108);}this['canvas'][_0x5db6df(-0x116,-0x83)]['visibility']='hidden',this[_0x5db6df(-0x49,-0xbf)]=setTimeout(()=>{if(!this[_0x150f2d(0x542,0x51b)])return;function _0xbd9b00(_0x5f1b8d,_0x79338f){return _0x547415(_0x5f1b8d,_0x79338f- -0x40);}function _0x150f2d(_0x1077e5,_0x51e9cf){return _0x547415(_0x51e9cf,_0x1077e5-0x688);}this[_0x150f2d(0x5b1,0x58a)](),this['canvas'][_0xbd9b00(-0x19b,-0x154)][_0x150f2d(0x596,0x5d3)]='visible';},0xc8);}['_onMouseDownEvent'](_0x5d72b8){function _0x153c50(_0x300cd4,_0x251f26){return _0x4bcd34(_0x251f26,_0x300cd4-0x31c);}this['mouse_down']=!![],this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x153c50(0x2ba,0x2df)],this);}['_onMouseMoveEvent'](_0x3cb428){function _0x3bf62a(_0x3819fa,_0x20c93b){return _0x4bcd34(_0x3819fa,_0x20c93b-0x4d2);}function _0x3a07cb(_0x32abd5,_0x1dcd5a){return _0x4bcd34(_0x32abd5,_0x1dcd5a- -0x205);}if(!this[_0x3a07cb(-0x2ea,-0x257)]||!this['canvas'])return;this['mouse_down']&&(this[_0x3bf62a(0x47d,0x444)]['style']['visibility']='hidden',this[_0x3a07cb(-0x239,-0x280)]=!![]);}[_0x4bcd34(0x1c,0x25)](_0x5b7422){if(!this[_0x3c3f63(0xa7,0x108)]||!this[_0x3f7526(0x118,0x185)])return;function _0x3f7526(_0x11df5e,_0x2ae5e4){return _0xd0dfaa(_0x2ae5e4,_0x11df5e-0x3a2);}this['_map']['off'](mars3d__namespace[_0x3c3f63(0x100,0x132)][_0x3c3f63(0xff,0x109)],this[_0x3c3f63(0x103,0xf8)],this);this['mouse_down']&&this['mouse_move']&&this['redraw']();function _0x3c3f63(_0x239617,_0x3835a2){return _0x4bcd34(_0x239617,_0x3835a2-0x15a);}this['canvas'][_0x3f7526(0x186,0x18f)][_0x3c3f63(0xff,0x15c)]=_0x3c3f63(0x1c4,0x160),this[_0x3c3f63(0x3d,0xa8)]=![],this['mouse_move']=![];}['setData'](_0x240299){this[_0x387dbc(0xbb,0xc1)](),this[_0xe7ca40(-0xaa,-0x18)]=_0x240299,this['windField'][_0xe7ca40(-0xc0,-0x89)](_0x240299);function _0x387dbc(_0x50d840,_0x4fe0e4){return _0xd0dfaa(_0x50d840,_0x4fe0e4-0x37b);}function _0xe7ca40(_0x3e2a0c,_0x53d600){return _0x4bcd34(_0x3e2a0c,_0x53d600- -0x6b);}this['redraw']();}['redraw'](){if(!this['show'])return;this['windField']['setOptions'](this['options']),this['update']();}['update'](){function _0x197b97(_0x13c977,_0x33544a){return _0xd0dfaa(_0x33544a,_0x13c977-0x557);}if(this[_0x4de39d(0x351,0x3ab)])return;function _0x4de39d(_0x3d3b52,_0x44a5e8){return _0x4bcd34(_0x3d3b52,_0x44a5e8-0x375);}this['_updateIng']=!![];if(this['worker'])this['windField'][_0x197b97(0x2bf,0x340)]();else{const _0x48d1ef=this['windField']['getParticles']();this['_drawLines'](_0x48d1ef);}this['_updateIng']=![];}[_0xd0dfaa(-0x142,-0x1af)](_0x419b18){function _0x3888a4(_0x1c165c,_0x5c8cf0){return _0x4bcd34(_0x1c165c,_0x5c8cf0- -0x160);}this['canvasContext']['globalCompositeOperation']='destination-in',this['canvasContext'][_0x4c2928(0x3ed,0x438)](0x0,0x0,this['canvasWidth'],this['canvasHeight']);function _0x4c2928(_0x300c95,_0x51c4ad){return _0x4bcd34(_0x300c95,_0x51c4ad-0x430);}this['canvasContext']['globalCompositeOperation']='lighter',this['canvasContext'][_0x3888a4(-0x181,-0x1b8)]=0.9;const _0x4f9774=this['_map']['scene'][_0x4c2928(0x3e4,0x425)]!==Cesium['SceneMode']['SCENE3D'],_0x1e9206=this[_0x4c2928(0x442,0x477)]*0.25;if(this['_colorRamp'])for(let _0x3d4faa=0x0,_0x349d08=_0x419b18[_0x4c2928(0x47b,0x48e)];_0x3d4faa<_0x349d08;_0x3d4faa++){const _0x54a34c=_0x419b18[_0x3d4faa],_0x432562=this['_tomap'](_0x54a34c['lng'],_0x54a34c[_0x4c2928(0x46b,0x3da)],_0x54a34c),_0x36f247=this[_0x3888a4(-0xe2,-0x175)](_0x54a34c['tlng'],_0x54a34c[_0x4c2928(0x344,0x369)],_0x54a34c);if(!_0x432562||!_0x36f247)continue;if(_0x4f9774&&Math[_0x4c2928(0x37b,0x3fe)](_0x432562[0x0]-_0x36f247[0x0])>=_0x1e9206)continue;this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this[_0x3888a4(-0x97,-0x11d)],this['canvasContext']['strokeStyle']=this['_colorRamp']['getColor'](_0x54a34c[_0x3888a4(-0x24b,-0x218)]),this['canvasContext'][_0x4c2928(0x442,0x3d7)](_0x432562[0x0],_0x432562[0x1]),this[_0x3888a4(-0x26c,-0x1d8)]['lineTo'](_0x36f247[0x0],_0x36f247[0x1]),this['canvasContext'][_0x4c2928(0x397,0x403)]();}else{this['canvasContext']['beginPath'](),this[_0x3888a4(-0x149,-0x1d8)]['lineWidth']=this[_0x4c2928(0x4c1,0x473)],this['canvasContext'][_0x3888a4(-0x109,-0x12d)]=this['color'];for(let _0x483b15=0x0,_0x3218ad=_0x419b18['length'];_0x483b15<_0x3218ad;_0x483b15++){const _0x1037eb=_0x419b18[_0x483b15],_0x5523e1=this[_0x4c2928(0x443,0x41b)](_0x1037eb['lng'],_0x1037eb[_0x3888a4(-0x139,-0x1b6)],_0x1037eb),_0x1c6fd1=this[_0x3888a4(-0x1d2,-0x175)](_0x1037eb[_0x3888a4(-0x1c1,-0x17c)],_0x1037eb['tlat'],_0x1037eb);if(!_0x5523e1||!_0x1c6fd1)continue;if(_0x4f9774&&Math[_0x3888a4(-0x1ce,-0x192)](_0x5523e1[0x0]-_0x1c6fd1[0x0])>=_0x1e9206)continue;this['canvasContext']['moveTo'](_0x5523e1[0x0],_0x5523e1[0x1]),this[_0x3888a4(-0x257,-0x1d8)]['lineTo'](_0x1c6fd1[0x0],_0x1c6fd1[0x1]);}this[_0x4c2928(0x39d,0x3b8)][_0x3888a4(-0x202,-0x18d)]();}}['_tomap'](_0x1fe425,_0x1e2d40,_0x333f69){function _0x5e305d(_0x501651,_0x4984ea){return _0xd0dfaa(_0x4984ea,_0x501651-0x53f);}function _0x4d9f2c(_0x5cf0f2,_0x269082){return _0x4bcd34(_0x5cf0f2,_0x269082-0x208);}const _0x8a0438=Cesium['Cartesian3']['fromDegrees'](_0x1fe425,_0x1e2d40,this['fixedHeight']),_0x56e772=this['_map']['scene'];if(_0x56e772['mode']===Cesium['SceneMode'][_0x5e305d(0x2de,0x25f)]){const _0x36bf68=new Cesium['EllipsoidalOccluder'](_0x56e772['globe']['ellipsoid'],_0x56e772['camera']['positionWC']),_0x124893=_0x36bf68['isPointVisible'](_0x8a0438);if(!_0x124893)return _0x333f69[_0x4d9f2c(0x193,0x148)]=0x0,null;}const _0x26f004=mars3d__namespace['PointTrans'][_0x4d9f2c(0x1ca,0x228)](this[_0x5e305d(0x2e6,0x361)][_0x4d9f2c(0x2cf,0x261)],_0x8a0438);return _0x26f004?[_0x26f004['x'],_0x26f004['y']]:null;}['clear'](){function _0x577d02(_0x9188e9,_0x568234){return _0xd0dfaa(_0x568234,_0x9188e9-0x84);}this['windField']['clear'](),delete this[_0x577d02(-0x125,-0x1ab)];}['initWorker'](){this['worker']=new Worker(this['options'][_0x146bcf(0x2a0,0x243)]),this['worker']['onmessage']=_0x4c2555=>{this['_drawLines'](_0x4c2555['data']['particles']),this['_updateIng2']=![];};function _0x146bcf(_0x3ea537,_0x5dcd31){return _0xd0dfaa(_0x5dcd31,_0x3ea537-0x4aa);}this[_0x146bcf(0x2dc,0x36a)]={'init':_0x1b3bcf=>{const _0x2fb6d5={};function _0x4a07b3(_0x5bdbf1,_0x337998){return _0x29ca77(_0x337998-0x2de,_0x5bdbf1);}_0x2fb6d5['type']='init',_0x2fb6d5['options']=_0x1b3bcf,this['worker'][_0x4a07b3(0x571,0x58f)](_0x2fb6d5);},'setOptions':_0x20dbda=>{const _0x467960={};function _0x4e4451(_0x41450d,_0xb0743b){return _0x29ca77(_0x41450d-0x2c9,_0xb0743b);}_0x467960[_0x341d95(0x99,0xd)]='setOptions';function _0x341d95(_0x578b8f,_0xbad650){return _0x29ca77(_0x578b8f- -0x20a,_0xbad650);}_0x467960['options']=_0x20dbda,this['worker'][_0x341d95(0xa7,0xea)](_0x467960);},'setDate':_0x59aeb8=>{function _0x204651(_0x55517e,_0x5446c0){return _0x146bcf(_0x55517e- -0x39e,_0x5446c0);}const _0x3fc8e6={};_0x3fc8e6['type']='setDate',_0x3fc8e6[_0x204651(-0xf3,-0x157)]=_0x59aeb8,this['worker']['postMessage'](_0x3fc8e6);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0x3b7b81={};_0x3b7b81['type']='update',this['worker']['postMessage'](_0x3b7b81);},'clear':()=>{const _0x2baf4f={};_0x2baf4f['type']='clear',this['worker']['postMessage'](_0x2baf4f);}};function _0x29ca77(_0x113caa,_0x3106f2){return _0x4bcd34(_0x3106f2,_0x113caa-0x25b);}this['windField'][_0x146bcf(0x26a,0x29c)](this['options']);}}mars3d__namespace[_0xd0dfaa(-0x148,-0x1d5)][_0xd0dfaa(-0x2c5,-0x245)](_0x4bcd34(-0x5b,-0x5b),CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x4bcd34(-0xca,-0x3e)]=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x3cb8ca={};function _0xd0dfaa(_0x1c9040,_0x15ffcb){return _0x5c9e(_0x15ffcb- -0x3ce,_0x1c9040);}function _0x5be9(){const _0x43b38d=['options','createTexture','preRender','levmin','reverseY','screen','_tomap','lev','_calcUV','refreshParticles','uniformMap','windTextures','resize','worker','pixelFormat','add','mode','_onMouseDownEvent','TWO_PI','_removedHook','owner','currentTrailsColor','applyViewerParameters','array','data','BufferUsage','updateViewerParameters','RGB','getOwnPropertyDescriptor','visibility','createRawRenderState','6RoxDNq','dimension','visible','Cartesian2','fillRect','_setOptionsHook','cols','floor','FLOAT','fromGeometry','vertexArray','dynamic','canrefresh','_bilinearInterpolation','getColorTexture','NEAREST','particlesNumber','blending','getParticles','maxParticles','_maxAge','canvasResize','createSegmentsGeometry','pixelDatatype','removeAll','redraw','addEventListener','viewport','toWindowCoordinates','isDestroyed','_data','clearFramebuffers','green','_onMouseUpEvent','ColorRamp','LayerUtil','sqrt','lon','value','geometry','speedScaleFactor','preExecute','windField','requestAnimationFrame','destroyParticlesTextures','dropRateBump','max','strokeStyle','defineProperty','umin','_updateIng','top','vSpeedRange','getDefaultRenderState','PI_OVER_TWO','IDENTITY','getUVByXY','_createCanvas','DrawCommand','commandType','left','viewerParameters','random','lineWidth','position','grid','454PkunCN','canvasWidth','type','commandToExecute','colors','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','maxAge','_drawLines','xmin','DISABLE_GL_POSITION_LOG_DEPTH','ZERO','depthTexture','segments','windData','THREE_PI_OVER_TWO','previousParticlesPosition','postMessage','dropRate','container','scene','toDegrees','createFramebuffer','bindEvent','rows','length','mod','ShaderProgram','PixelFormat','pixelSize','vmax','2216344FlfTgX','push','addPrimitives','tlat','mouseUp','forEach','createRenderingFramebuffers','normal','lonRange','fixedHeight','age','clearCommand','clear','getUVByPoint','dimensions','red','PixelDatatype','isDestroy','speed','textures','globeBoundingSphere','Matrix4','#ffffff','_onMapWhellEvent','mouse_down','speedFactor','Color','primitiveType','attributeLocations','xmax','keys','enabled','levmax','getU','outputTexture','getFullscreenQuad','PI_OVER_THREE','TRIANGLES','Math','canvasHeight','default','Pass','removeEventListener','TextureMagnificationFilter','currentTrails','isInExtent','update','particlesSpeed','_speedRate','viewRectangleToLonLatRange','particlesComputing','colorTable','ClearCommand','particleSystem','Sampler','toGridXY','OPAQUE','particlesRendering','height','absolute','canvas','latRange','ymin','Draw','_canrefresh','particlesTextures','particlesTextureSize','setOptions','trails','Appearance','drawingBufferWidth','calculateSpeed','clientWidth','setData','camera','none','speedRate','lng','depthTest','mouse_move','setGeometry','depthMask','canvasContext','77Mdmmps','ellipsoid','fill','color','destroy','now','getDirection','postProcessingPosition','RED','TextureMinificationFilter','_pointerEvents','_calc_speedRate','defined','currentParticlesPosition','drawingBufferHeight','#version\x20300\x20es\x0a\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20bool\x20colour;\x0a\x0ain\x20float\x20heightNormalization;\x0ain\x20float\x20speedNormalization;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speedNormalization\x20>\x20zero)\x20{\x0a\x20\x20\x20\x20if(colour)\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(heightNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20fragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x20zero));\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','all','fragmentShaderSource','SCENE3D','Compute','width','_onMouseMoveEvent','randomBetween','ymax','createRenderingPrimitives','min','_map','refreshTimer','canvasWind','9eescYL','moveTo','globalAlpha','fadeOpacity','lat','SceneMode','nextTrails','framebuffers','show','mouseMove','21ujbpFn','_randomParticle','create','_onMap_preRenderEvent','west','updatePosition','shaderProgram','register','particleHeight','colour','maximum','88262KqArVW','init','1162464nhEkyj','defines','off','udata','GeometryAttribute','CanvasWindField','sources','_animateFrame','primitives','getOptions','Cartesian3','autoClear','627280desanC','vertexShaderSource','commandList','_addedHook','context','abs','fromCssColorString','RGBA','2696080IHjyny','particles','stroke','ShaderSource','ComponentDatatype','frameTime','_mountedHook','EventType','794773YMhTQj','minimum','south','framebuffer','Geometry','VertexArray','currentTrailsDepth','style','LINEAR','setDate','getValidRange','tlng'];_0x5be9=function(){return _0x43b38d;};return _0x5be9();}_0x3cb8ca[_0x4bcd34(-0x46,0x2a)]=!![],Object['defineProperty'](exports,'__esModule',_0x3cb8ca);
}));
