/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.2
 * 编译日期：2025-03-02 20:20
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x48a5a7,_0x31c258){function _0x10bea7(_0x36d706,_0x568141){return _0x4142(_0x36d706-0x170,_0x568141);}const _0xb59428=_0x48a5a7();function _0x5db45b(_0x360f19,_0x495243){return _0x4142(_0x360f19- -0x101,_0x495243);}while(!![]){try{const _0x13cc83=-parseInt(_0x10bea7(0x407,0x475))/0x1*(-parseInt(_0x5db45b(0x1a4,0x19b))/0x2)+parseInt(_0x5db45b(0xc1,0xc0))/0x3+parseInt(_0x10bea7(0x3cb,0x384))/0x4+parseInt(_0x10bea7(0x3e2,0x378))/0x5+-parseInt(_0x5db45b(0xd3,0x79))/0x6*(parseInt(_0x5db45b(0x166,0x15c))/0x7)+-parseInt(_0x5db45b(0x10f,0xb0))/0x8+parseInt(_0x5db45b(0x134,0x162))/0x9*(-parseInt(_0x5db45b(0x1a6,0x123))/0xa);if(_0x13cc83===_0x31c258)break;else _0xb59428['push'](_0xb59428['shift']());}catch(_0x548a63){_0xb59428['push'](_0xb59428['shift']());}}}(_0x32ca,0x3e117));function _interopNamespace(_0x2366a8){if(_0x2366a8&&_0x2366a8['__esModule'])return _0x2366a8;var _0x5b54f9=Object['create'](null);_0x2366a8&&Object['keys'](_0x2366a8)[_0x52214e(0x542,0x4df)](function(_0x23807a){function _0x20dcd4(_0x57631e,_0x37e45d){return _0x52214e(_0x37e45d-0xe3,_0x57631e);}if(_0x23807a!==_0x20dcd4(0x5dd,0x635)){var _0x9219f0=Object['getOwnPropertyDescriptor'](_0x2366a8,_0x23807a);Object['defineProperty'](_0x5b54f9,_0x23807a,_0x9219f0['get']?_0x9219f0:{'enumerable':!![],'get':function(){return _0x2366a8[_0x23807a];}});}});_0x5b54f9['default']=_0x2366a8;function _0x52214e(_0x436444,_0x3b9000){return _0x4142(_0x436444-0x2da,_0x3b9000);}return _0x5b54f9;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x2bf539(0x468,0x4b0)];function getU(_0x2fa04f,_0x5c4152){const _0x4f109f=_0x2fa04f*Math['cos'](Cesium$2['Math'][_0x3744a2(-0x17e,-0x133)](_0x5c4152));function _0x3744a2(_0x1fc1e8,_0x488218){return _0x2bf539(_0x488218- -0x4f2,_0x1fc1e8);}return _0x4f109f;}function getV(_0x4e918e,_0x4991f9){function _0x588cbb(_0x4bc584,_0x2d5299){return _0x2bf539(_0x2d5299-0x11a,_0x4bc584);}function _0x118b6e(_0x2ae33f,_0x352ca8){return _0x2bf539(_0x2ae33f- -0x44d,_0x352ca8);}const _0x371233=_0x4e918e*Math[_0x588cbb(0x58c,0x544)](Cesium$2[_0x118b6e(0x61,0x32)][_0x588cbb(0x4a8,0x4d9)](_0x4991f9));return _0x371233;}function getSpeed(_0x2fbc96,_0x5057a0){function _0x335e3c(_0x55179f,_0x17a67e){return _0x2bf539(_0x55179f- -0x4b6,_0x17a67e);}const _0x403426=Math['sqrt'](Math[_0x335e3c(-0x9d,-0xfe)](_0x2fbc96,0x2)+Math['pow'](_0x5057a0,0x2));return _0x403426;}function getDirection(_0xd51c79,_0x2ed074){let _0x7d2630=Cesium$2['Math'][_0x153b08(0x22c,0x1be)](Math['atan2'](_0x2ed074,_0xd51c79));_0x7d2630+=_0x7d2630<0x0?0x168:0x0;function _0x153b08(_0x11bd3e,_0x124071){return _0x2bf539(_0x11bd3e- -0x253,_0x124071);}return _0x7d2630;}const _0x24f6ab={};_0x24f6ab['__proto__']=null,_0x24f6ab[_0x2bf539(0x460,0x49a)]=getU,_0x24f6ab[_0x2bf539(0x480,0x497)]=getV,_0x24f6ab[_0x4af14d(0x14a,0x1b3)]=getSpeed,_0x24f6ab[_0x4af14d(0x264,0x28b)]=getDirection;var WindUtil=_0x24f6ab,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x4af14d(0x1cf,0x245),postProcessingPositionFragmentShader=_0x2bf539(0x481,0x4a3),renderParticlesFragmentShader=_0x2bf539(0x46e,0x435),renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static[_0x4af14d(0x23a,0x274)](){const _0x47cbcd={};function _0x38ae95(_0x3ea52d,_0x144044){return _0x4af14d(_0x3ea52d,_0x144044- -0x336);}return _0x47cbcd[_0x38ae95(-0x189,-0x163)]=[calculateSpeedShader],new ShaderSource$1(_0x47cbcd);}static[_0x2bf539(0x428,0x40b)](){const _0x519f51={};return _0x519f51['sources']=[updatePositionShader],new ShaderSource$1(_0x519f51);}static['getSegmentDrawVertexShader'](){const _0x38bea0={};return _0x38bea0['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x38bea0);}static[_0x4af14d(0x216,0x1f2)](){const _0x3d0415={};return _0x3d0415['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x3d0415);}static['getPostProcessingPositionShader'](){const _0x4a6330={};return _0x4a6330['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x4a6330);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defaultValue,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x270ceb){this['commandType']=_0x270ceb['commandType'],this['geometry']=_0x270ceb[_0x5d08c0(0x5fb,0x5c6)],this['attributeLocations']=_0x270ceb['attributeLocations'],this[_0x5d08c0(0x631,0x621)]=_0x270ceb['primitiveType'],this['uniformMap']=_0x270ceb['uniformMap']||{},this[_0x5d08c0(0x5d3,0x590)]=_0x270ceb['vertexShaderSource'],this['fragmentShaderSource']=_0x270ceb['fragmentShaderSource'],this[_0x57d6e2(0x273,0x2d6)]=_0x270ceb['rawRenderState'],this[_0x5d08c0(0x615,0x647)]=_0x270ceb['framebuffer'],this[_0x57d6e2(0x1c8,0x1f8)]=_0x270ceb[_0x5d08c0(0x5bd,0x613)],this['autoClear']=defaultValue(_0x270ceb[_0x5d08c0(0x639,0x643)],![]),this[_0x57d6e2(0x260,0x1eb)]=_0x270ceb[_0x57d6e2(0x260,0x208)],this['show']=!![],this['commandToExecute']=undefined;function _0x5d08c0(_0x2ac36c,_0x4ec774){return _0x2bf539(_0x2ac36c-0x1ae,_0x4ec774);}this['clearCommand']=undefined;function _0x57d6e2(_0x214509,_0x260ae7){return _0x4af14d(_0x260ae7,_0x214509- -0x33);}this[_0x57d6e2(0x1e4,0x1e3)]=_0x270ceb['isDynamic']??(()=>!![]),this[_0x57d6e2(0x244,0x1fe)]&&(this[_0x57d6e2(0x1e9,0x17f)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1[_0x57d6e2(0x21f,0x253)]}));}['createCommand'](_0x34eff3){function _0x30a9f1(_0x3144a4,_0x7e80d9){return _0x2bf539(_0x7e80d9- -0x58b,_0x3144a4);}function _0x5c8945(_0x4d25a8,_0x2e6534){return _0x2bf539(_0x2e6534- -0x21a,_0x4d25a8);}if(this[_0x30a9f1(-0x72,-0xdf)]==='Draw'){const _0x4b970a={};_0x4b970a['context']=_0x34eff3,_0x4b970a[_0x5c8945(0x269,0x233)]=this[_0x5c8945(0x20a,0x233)],_0x4b970a['attributeLocations']=this['attributeLocations'],_0x4b970a['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x1ad0f7=VertexArray$1['fromGeometry'](_0x4b970a),_0x1a0da5={};_0x1a0da5['context']=_0x34eff3,_0x1a0da5[_0x30a9f1(-0x18e,-0x166)]=this[_0x5c8945(0x1f8,0x20b)],_0x1a0da5[_0x5c8945(0x219,0x1c9)]=this[_0x5c8945(0x1e8,0x1c9)],_0x1a0da5[_0x5c8945(0x2c9,0x249)]=this[_0x30a9f1(-0x15e,-0x128)];const _0x32b919=ShaderProgram['fromCache'](_0x1a0da5),_0x17c6ae=RenderState['fromCache'](this['rawRenderState']),_0x58ea1c={};return _0x58ea1c['owner']=this,_0x58ea1c[_0x5c8945(0x23c,0x282)]=_0x1ad0f7,_0x58ea1c['primitiveType']=this[_0x30a9f1(-0x100,-0x108)],_0x58ea1c['modelMatrix']=Matrix4['IDENTITY'],_0x58ea1c['renderState']=_0x17c6ae,_0x58ea1c[_0x5c8945(0x202,0x1b2)]=_0x32b919,_0x58ea1c['framebuffer']=this['framebuffer'],_0x58ea1c['uniformMap']=this['uniformMap'],_0x58ea1c['pass']=Pass$1[_0x5c8945(0x299,0x24c)],new DrawCommand(_0x58ea1c);}else{if(this[_0x5c8945(0x2a7,0x292)]==='Compute'){const _0x1656f1={};return _0x1656f1[_0x5c8945(0x270,0x270)]=this,_0x1656f1['fragmentShaderSource']=this['fragmentShaderSource'],_0x1656f1['uniformMap']=this['uniformMap'],_0x1656f1['outputTexture']=this['outputTexture'],_0x1656f1['persists']=!![],new ComputeCommand(_0x1656f1);}else throw new Error(_0x30a9f1(-0x10d,-0x177));}}[_0x2bf539(0x427,0x441)](_0x2ffc93,_0x31a10e){function _0x4bd4aa(_0x4af4f1,_0x45fe22){return _0x4af14d(_0x4af4f1,_0x45fe22- -0x2f0);}this['geometry']=_0x31a10e,defined(this['commandToExecute'])&&(this['commandToExecute']['vertexArray']=VertexArray$1[_0x4bd4aa(-0x5d,-0xc7)]({'context':_0x2ffc93,'geometry':this['geometry'],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x5a8897){if(!this[_0x1b4fed(0x59d,0x5ff)]())return;if(!this[_0x7bb60(0x172,0x15e)]||!defined(_0x5a8897))return;function _0x1b4fed(_0x33dd39,_0x5d74cc){return _0x2bf539(_0x33dd39-0x172,_0x5d74cc);}!defined(this['commandToExecute'])&&(this[_0x7bb60(0x1d4,0x221)]=this['createCommand'](_0x5a8897['context']));defined(this['preExecute'])&&this[_0x1b4fed(0x619,0x64a)]();function _0x7bb60(_0x41671c,_0x4f7380){return _0x2bf539(_0x41671c- -0x2c4,_0x4f7380);}if(!_0x5a8897['commandList']){console[_0x1b4fed(0x5a9,0x57d)]('frameState.commandList\x20is\x20undefined');return;}defined(this['clearCommand'])&&_0x5a8897['commandList']['push'](this[_0x1b4fed(0x5a2,0x52b)]),defined(this[_0x1b4fed(0x60a,0x5f4)])&&_0x5a8897['commandList']['push'](this['commandToExecute']);}[_0x2bf539(0x491,0x46c)](){return![];}['destroy'](){if(defined(this['commandToExecute'])){var _0x4b932f;(_0x4b932f=this['commandToExecute']['shaderProgram'])===null||_0x4b932f===void 0x0||_0x4b932f[_0x22791b(0x278,0x208)](),this['commandToExecute'][_0x22791b(0x232,0x226)]=undefined;}function _0x22791b(_0x2ca29d,_0x109081){return _0x2bf539(_0x2ca29d- -0x19a,_0x109081);}function _0x4fa6d0(_0x45b3c1,_0xdf30c2){return _0x4af14d(_0x45b3c1,_0xdf30c2- -0xd7);}return destroyObject(this);}}function deepMerge(_0x3d90ab,_0x5aea5c){if(!_0x3d90ab)return _0x5aea5c;function _0x26f990(_0x5e2e18,_0xccd425){return _0x4af14d(_0x5e2e18,_0xccd425-0x4e);}function _0xa35a00(_0x230bf3,_0x379ff8){return _0x4af14d(_0x379ff8,_0x230bf3-0x3d5);}if(!_0x5aea5c)return _0x3d90ab;const _0x3b7a4a={..._0x5aea5c},_0x13ec6d=_0x3b7a4a;for(const _0x59c89d in _0x3d90ab){if(Object['prototype'][_0x26f990(0x217,0x1fd)]['call'](_0x3d90ab,_0x59c89d)){const _0x398b68=_0x3d90ab[_0x59c89d],_0xb69db6=_0x5aea5c[_0x59c89d];if(Array[_0x26f990(0x1b7,0x21e)](_0x398b68)){_0x13ec6d[_0x59c89d]=_0x398b68['slice']();continue;}if(_0x398b68&&typeof _0x398b68==='object'){_0x13ec6d[_0x59c89d]=deepMerge(_0x398b68,_0xb69db6||{});continue;}_0x398b68!==undefined&&(_0x13ec6d[_0x59c89d]=_0x398b68);}}return _0x13ec6d;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x2bf539(0x468,0x496)];class WindParticlesComputing{constructor(_0x171e5c,_0x2af901,_0xfc8908,_0x2d2747,_0x639ee5){function _0x3d918e(_0x5d80bf,_0x436fb6){return _0x2bf539(_0x436fb6- -0x464,_0x5d80bf);}this[_0xf90408(0x1fb,0x1de)]=_0x171e5c,this[_0xf90408(0x1c1,0x153)]=_0xfc8908,this[_0xf90408(0x1b2,0x1c7)]=_0x2d2747,this[_0xf90408(0x202,0x22a)]=_0x2af901,this['frameRate']=0x3c;function _0xf90408(_0x6261b1,_0x1b8561){return _0x4af14d(_0x6261b1,_0x1b8561- -0x63);}this['frameRateAdjustment']=0x1;const _0x3d4498={};_0x3d4498[_0xf90408(0x128,0x18d)]=_0x639ee5,_0x3d4498[_0x3d918e(-0x18,-0x8b)]=0x1,_0x3d4498['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x3d4498),this['initFrameRate'](),this['createWindTextures'](),this['createParticlesTextures'](),this[_0x3d918e(-0xb9,-0x82)]();}[_0x2bf539(0x487,0x40c)](){const _0x311950=()=>{function _0x2057bb(_0x285094,_0x271073){return _0x4142(_0x271073- -0x1a,_0x285094);}function _0x57706d(_0x5b5ee3,_0xccd909){return _0x4142(_0xccd909- -0x141,_0x5b5ee3);}this['frameRateMonitor']['lastFramesPerSecond']>0x14&&(this['frameRate']=this[_0x2057bb(0x1d2,0x1b3)]['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math['max'](this[_0x57706d(0xf3,0xbc)],0x1));};function _0x34be87(_0x219780,_0x441e21){return _0x4af14d(_0x219780,_0x441e21-0x201);}_0x311950();const _0x4b9faa=setInterval(_0x311950,0x3e8),_0x1c2590=this[_0x34be87(0x433,0x3ff)][_0x49261e(0x63b,0x635)](this);function _0x49261e(_0x5a1ce2,_0x2f1fd7){return _0x4af14d(_0x5a1ce2,_0x2f1fd7-0x392);}this['destroy']=()=>{clearInterval(_0x4b9faa),_0x1c2590();};}[_0x4af14d(0x21f,0x255)](){function _0x37faf6(_0x2e6485,_0x545eaf){return _0x4af14d(_0x2e6485,_0x545eaf-0x146);}function _0x24161(_0x4f11ef,_0x507903){return _0x2bf539(_0x4f11ef- -0x41d,_0x507903);}const _0xcc600a={};_0xcc600a['minificationFilter']=TextureMinificationFilter$1['LINEAR'],_0xcc600a['magnificationFilter']=TextureMagnificationFilter$1[_0x24161(0x22,0x10)];const _0x35a43f={'context':this[_0x37faf6(0x3b1,0x387)],'width':this['windData'][_0x37faf6(0x385,0x389)],'height':this[_0x37faf6(0x355,0x3d3)]['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this['options'][_0x24161(0xc,0x4b)]??![],'sampler':new Sampler$1(_0xcc600a)};this['windTextures']={'U':new Texture$1({..._0x35a43f,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x24161(0x79,0xe9)])}}),'V':new Texture$1({..._0x35a43f,'source':{'arrayBufferView':new Float32Array(this[_0x24161(0x84,0xfe)]['v'][_0x37faf6(0x3c7,0x3c8)])}})};}['createParticlesTextures'](){const _0x573cb7={};_0x573cb7['minificationFilter']=TextureMinificationFilter$1['NEAREST'];function _0x11f728(_0x3789e6,_0x27fdc2){return _0x4af14d(_0x3789e6,_0x27fdc2- -0xf1);}_0x573cb7['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];function _0x5399e2(_0x12cdf5,_0x30d21e){return _0x2bf539(_0x30d21e- -0x566,_0x12cdf5);}const _0x328690={'context':this[_0x5399e2(-0xee,-0x111)],'width':this['options']['particlesTextureSize'],'height':this[_0x11f728(0x73,0xc5)][_0x11f728(0x1a3,0x1ae)],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x5399e2(-0x148,-0x19c)][_0x5399e2(-0x90,-0xb3)]*this[_0x11f728(0x4d,0xc5)][_0x5399e2(-0xbf,-0xb3)]*0x4)[_0x5399e2(-0x113,-0x118)](0x0)},'sampler':new Sampler$1(_0x573cb7)};this[_0x5399e2(-0x9f,-0xe9)]={'previousParticlesPosition':new Texture$1(_0x328690),'currentParticlesPosition':new Texture$1(_0x328690),'nextParticlesPosition':new Texture$1(_0x328690),'postProcessingPosition':new Texture$1(_0x328690),'particlesSpeed':new Texture$1(_0x328690)};}['destroyParticlesTextures'](){Object['values'](this['particlesTextures'])['forEach'](_0x21e774=>_0x21e774['destroy']());}[_0x2bf539(0x3e2,0x429)](){function _0x991333(_0x192328,_0x327af7){return _0x2bf539(_0x327af7-0x169,_0x192328);}function _0x226c75(_0x153598,_0x1f2296){return _0x2bf539(_0x153598-0xec,_0x1f2296);}this[_0x226c75(0x547,0x540)]={'calculateSpeed':new CustomPrimitive({'commandType':_0x226c75(0x596,0x530),'uniformMap':{'U':()=>this[_0x226c75(0x4a6,0x46d)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this[_0x226c75(0x58d,0x55c)]['u']['min'],this[_0x226c75(0x58d,0x5dd)]['u']['max']),'vRange':()=>new Cartesian2$1(this[_0x991333(0x5c0,0x60a)]['v']['min'],this[_0x991333(0x620,0x60a)]['v'][_0x226c75(0x4a2,0x50d)]),'speedRange':()=>new Cartesian2$1(this[_0x991333(0x650,0x60a)][_0x991333(0x565,0x587)]['min'],this[_0x991333(0x59f,0x60a)]['speed'][_0x991333(0x568,0x51f)]),'currentParticlesPosition':()=>this[_0x991333(0x584,0x5e6)][_0x991333(0x5a1,0x5a1)],'speedScaleFactor':()=>{function _0x1be61c(_0x56554e,_0x35f0b9){return _0x226c75(_0x35f0b9- -0x564,_0x56554e);}function _0x353cc8(_0x3e27ce,_0xc40f5f){return _0x991333(_0x3e27ce,_0xc40f5f- -0x66c);}return(this[_0x353cc8(-0x71,-0xc5)][_0x1be61c(-0x83,-0x77)]+0x32)*this['options']['speedFactor'];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData']['width'],this['windData'][_0x991333(0x516,0x574)]),'minimum':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds'][_0x991333(0x554,0x561)],this['windData']['bounds']['north'])},'fragmentShaderSource':ShaderManager[_0x226c75(0x574,0x4f4)](),'outputTexture':this['particlesTextures'][_0x991333(0x50f,0x560)],'preExecute':()=>{function _0x561fa4(_0x1233e7,_0x35b0e5){return _0x991333(_0x35b0e5,_0x1233e7- -0x48);}function _0x44c3ce(_0x3e85fd,_0x108a96){return _0x991333(_0x3e85fd,_0x108a96- -0x4ea);}const _0x19616c=this['particlesTextures']['previousParticlesPosition'];this[_0x44c3ce(0xeb,0xfc)]['previousParticlesPosition']=this['particlesTextures']['currentParticlesPosition'],this[_0x44c3ce(0xdf,0xfc)][_0x561fa4(0x559,0x59a)]=this[_0x561fa4(0x59e,0x55f)][_0x561fa4(0x5c7,0x548)],this['particlesTextures'][_0x44c3ce(0xf6,0x125)]=_0x19616c,this['primitives']['calculateSpeed'][_0x44c3ce(0xf0,0x117)]&&(this['primitives'][_0x44c3ce(0x78,0x3d)][_0x44c3ce(0x12a,0x117)]['outputTexture']=this[_0x561fa4(0x59e,0x609)]['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x991333(0x615,0x5a1)],'particlesSpeed':()=>this['particlesTextures'][_0x226c75(0x4e3,0x4bf)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x5c7536(_0x5f2a4b,_0x1b44b4){return _0x226c75(_0x5f2a4b- -0x3f3,_0x1b44b4);}function _0x44afa8(_0x3ad4b5,_0x4756ae){return _0x226c75(_0x3ad4b5- -0x4a1,_0x4756ae);}this[_0x5c7536(0x154,0x1b7)]['updatePosition']['commandToExecute']&&(this['primitives'][_0x5c7536(0x1a6,0x15f)][_0x44afa8(0xe3,0xcc)][_0x44afa8(0x5a,0xb2)]=this[_0x5c7536(0x176,0x101)][_0x5c7536(0xe9,0x89)]);},'isDynamic':()=>this['options'][_0x226c75(0x54a,0x4ec)]}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures'][_0x991333(0x511,0x559)],'particlesSpeed':()=>this[_0x991333(0x5d1,0x5e6)][_0x991333(0x5d5,0x560)],'lonRange':()=>this['viewerParameters']['lonRange'],'latRange':()=>this['viewerParameters'][_0x226c75(0x57b,0x5af)],'dataLonRange':()=>new Cartesian2$1(this['windData'][_0x226c75(0x4cc,0x4d6)]['west'],this[_0x991333(0x620,0x60a)][_0x991333(0x534,0x549)]['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x991333(0x5e6,0x60a)][_0x226c75(0x4cc,0x50c)]['south'],this[_0x991333(0x62b,0x60a)][_0x991333(0x5bf,0x549)][_0x991333(0x57b,0x545)]),'randomCoefficient':function(){function _0x4d024b(_0x29ee15,_0x118b8f){return _0x991333(_0x29ee15,_0x118b8f- -0x63f);}return Math[_0x4d024b(0x18,-0x44)]();},'dropRate':()=>this[_0x226c75(0x4b6,0x451)]['dropRate'],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this['options'][_0x226c75(0x526,0x508)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x4bd276(_0x4786bb,_0x10a109){return _0x991333(_0x4786bb,_0x10a109- -0x712);}function _0x3d488b(_0x526371,_0x207132){return _0x226c75(_0x207132-0x7e,_0x526371);}this['primitives'][_0x4bd276(-0xbc,-0x103)]['commandToExecute']&&(this['primitives'][_0x3d488b(0x64d,0x610)]['commandToExecute']['outputTexture']=this['particlesTextures'][_0x3d488b(0x59e,0x610)]);},'isDynamic':()=>this['options']['dynamic']})};}['reCreateWindTextures'](){function _0x45fca0(_0x4a2997,_0x1ef732){return _0x2bf539(_0x4a2997- -0xc,_0x1ef732);}this['windTextures']['U'][_0x45fca0(0x406,0x3e5)](),this[_0x45fca0(0x3ae,0x360)]['V']['destroy']();function _0x1be069(_0x46a73c,_0x23ceb5){return _0x4af14d(_0x46a73c,_0x23ceb5- -0x373);}this['createWindTextures']();}[_0x4af14d(0x28b,0x24e)](_0x5e1768){function _0x518127(_0x37c9e4,_0x3c8aab){return _0x4af14d(_0x37c9e4,_0x3c8aab-0x127);}this[_0x518127(0x357,0x3b4)]=_0x5e1768,this['reCreateWindTextures']();}[_0x4af14d(0x1e9,0x1e5)](_0x4d28cd){const _0x2f41db=_0x4d28cd[_0x38f2a4(0x54a,0x5b7)]!==undefined&&_0x4d28cd['flipY']!==this['options'][_0x38f2a4(0x5b6,0x5b7)];function _0x38f2a4(_0x545547,_0x26fdc3){return _0x4af14d(_0x545547,_0x26fdc3-0x3a2);}function _0x3201e5(_0x2ec20c,_0x3d25a1){return _0x2bf539(_0x3d25a1- -0x547,_0x2ec20c);}this['options']=deepMerge(_0x4d28cd,this['options']),_0x2f41db&&this[_0x3201e5(-0x10e,-0x103)]();}['processWindData'](_0x18e24e){function _0x67ec59(_0x692cee,_0x26c226){return _0x2bf539(_0x26c226- -0x5ed,_0x692cee);}const {array:_0x2e3f56}=_0x18e24e;let {min:_0x495487,max:_0x5e7932}=_0x18e24e;const _0xe1fc46=new Float32Array(_0x2e3f56['length']);function _0x2c46fa(_0x1de200,_0x57d726){return _0x4af14d(_0x1de200,_0x57d726-0x143);}_0x495487===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x495487=Math['min'](..._0x2e3f56));_0x5e7932===undefined&&(console['warn'](_0x67ec59(-0x147,-0x1cb)),_0x5e7932=Math['max'](..._0x2e3f56));const _0x11ace3=Math['max'](Math['abs'](_0x495487),Math[_0x67ec59(-0x292,-0x21d)](_0x5e7932));for(let _0x447bea=0x0;_0x447bea<_0x2e3f56[_0x67ec59(-0x1ec,-0x238)];_0x447bea++){const _0x3cf300=_0x2e3f56[_0x447bea]/_0x11ace3;_0xe1fc46[_0x447bea]=_0x3cf300;}return _0xe1fc46;}[_0x2bf539(0x412,0x47a)](){Object['values'](this[_0x648fde(0x58c,0x541)])[_0x5475aa(0x487,0x478)](_0x12de3e=>_0x12de3e['destroy']());function _0x648fde(_0x249c21,_0x563dd2){return _0x4af14d(_0x249c21,_0x563dd2-0x39b);}Object[_0x5475aa(0x4a4,0x47a)](this['particlesTextures'])['forEach'](_0x35faf5=>_0x35faf5['destroy']()),Object['values'](this['primitives'])['forEach'](_0x1ef52d=>_0x1ef52d['destroy']());function _0x5475aa(_0x3ebbe7,_0x3760d5){return _0x4af14d(_0x3ebbe7,_0x3760d5-0x210);}this['frameRateMonitor'][_0x648fde(0x51d,0x599)]();}}function _0x4af14d(_0x300f51,_0x2e5804){return _0x4142(_0x2e5804-0x0,_0x300f51);}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x163694,_0x1f19b2,_0x12c07d,_0x30c92e){this['context']=_0x163694,this['options']=_0x1f19b2,this['viewerParameters']=_0x12c07d,this['computing']=_0x30c92e;(typeof this['options']['particlesTextureSize']!=='number'||this[_0x191302(0x352,0x35a)]['particlesTextureSize']<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options']['particlesTextureSize']=0x100);this['colorTable']=this[_0x191302(0x3df,0x3a0)](),this[_0x2e335f(-0x160,-0x191)]=this['createRenderingTextures']();function _0x191302(_0x33f69b,_0x3c3641){return _0x4af14d(_0x33f69b,_0x3c3641-0x1a4);}function _0x2e335f(_0xa5ffc6,_0x3015c9){return _0x4af14d(_0x3015c9,_0xa5ffc6- -0x34b);}this['framebuffers']=this[_0x191302(0x41c,0x3da)](),this[_0x2e335f(-0x104,-0x12f)]=this['createPrimitives']();}['createRenderingTextures'](){const _0x8cfc55={};function _0x4098f7(_0x1fcedc,_0x4922c6){return _0x4af14d(_0x4922c6,_0x1fcedc-0x25d);}_0x8cfc55['context']=this[_0x4098f7(0x49e,0x4b6)],_0x8cfc55['width']=this[_0x4cdc18(0x1e1,0x1e7)]['drawingBufferWidth'],_0x8cfc55['height']=this['context']['drawingBufferHeight'],_0x8cfc55[_0x4cdc18(0x190,0x185)]=PixelFormat['RGBA'],_0x8cfc55[_0x4cdc18(0x27f,0x1fc)]=PixelDatatype[_0x4098f7(0x401,0x3a1)];const _0x645514=_0x8cfc55,_0x572636={};_0x572636['context']=this['context'],_0x572636['width']=this[_0x4098f7(0x49e,0x43b)]['drawingBufferWidth'],_0x572636['height']=this[_0x4098f7(0x49e,0x481)]['drawingBufferHeight'],_0x572636['pixelFormat']=PixelFormat['DEPTH_COMPONENT'],_0x572636[_0x4098f7(0x4b3,0x50a)]=PixelDatatype['UNSIGNED_INT'];function _0x4cdc18(_0x125135,_0x71353){return _0x4af14d(_0x125135,_0x71353- -0x5a);}const _0x4f9f65=_0x572636;return{'segmentsColor':new Texture(_0x645514),'segmentsDepth':new Texture(_0x4f9f65)};}['createRenderingFramebuffers'](){const _0x2a7450={};function _0xc2dffd(_0x4a8e9d,_0x1faf8f){return _0x4af14d(_0x1faf8f,_0x4a8e9d- -0x2ad);}_0x2a7450['context']=this['context'],_0x2a7450['colorTextures']=[this[_0xc2dffd(-0xc2,-0x5f)]['segmentsColor']];function _0x261603(_0x59e4ca,_0x5d73a6){return _0x2bf539(_0x5d73a6-0x151,_0x59e4ca);}return _0x2a7450[_0x261603(0x5dc,0x57e)]=this[_0xc2dffd(-0xc2,-0x92)]['segmentsDepth'],{'segments':new Framebuffer(_0x2a7450)};}[_0x4af14d(0x220,0x26e)](){function _0x24f6cb(_0x56b2cf,_0x99e234){return _0x2bf539(_0x99e234- -0x14f,_0x56b2cf);}function _0x31d171(_0x23c1f7,_0x5f7c44){return _0x2bf539(_0x23c1f7- -0x11,_0x5f7c44);}Object['values'](this[_0x24f6cb(0x366,0x305)])[_0x31d171(0x46b,0x42a)](_0x42556d=>{_0x42556d['destroy']();});}[_0x4af14d(0x210,0x1fc)](){const _0x3e8074=new Float32Array(this[_0xa4e70b(-0x20b,-0x22a)]['colors']['flatMap'](_0x4a5afd=>{const _0x5a0078=Color$1['fromCssColorString'](_0x4a5afd);function _0x122a75(_0x20bcb0,_0x2411d4){return _0xa4e70b(_0x2411d4-0x168,_0x20bcb0);}function _0x2b36c6(_0xdf3a3f,_0x4eb04e){return _0xa4e70b(_0xdf3a3f-0x685,_0x4eb04e);}return[_0x5a0078['red'],_0x5a0078[_0x2b36c6(0x46d,0x4b2)],_0x5a0078['blue'],_0x5a0078[_0x122a75(0x55,0x7)]];})),_0x4a8d71={};_0x4a8d71[_0xa4e70b(-0x185,-0x144)]=TextureMinificationFilter[_0xa4e70b(-0x196,-0x1d6)],_0x4a8d71['magnificationFilter']=TextureMagnificationFilter[_0x1f6d2c(0x49c,0x45f)];function _0x1f6d2c(_0x5a5160,_0x5308be){return _0x2bf539(_0x5a5160-0x5d,_0x5308be);}function _0xa4e70b(_0x13b358,_0x48b936){return _0x4af14d(_0x48b936,_0x13b358- -0x3c1);}return _0x4a8d71['wrapS']=TextureWrap['CLAMP_TO_EDGE'],_0x4a8d71['wrapT']=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this['options']['colors']['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x4a8d71),'source':{'width':this[_0xa4e70b(-0x20b,-0x1d9)][_0x1f6d2c(0x4be,0x4a0)]['length'],'height':0x1,'arrayBufferView':_0x3e8074}});}[_0x4af14d(0x218,0x1f4)](){const _0x6a8945=0x4;function _0x2fc634(_0x17aac5,_0x21af82){return _0x4af14d(_0x17aac5,_0x21af82-0x8);}const _0x265bfc=this[_0x295b43(0x404,0x485)]['particlesTextureSize'];let _0x34da78=[];for(let _0x5096ec=0x0;_0x5096ec<_0x265bfc;_0x5096ec++){for(let _0x223e13=0x0;_0x223e13<_0x265bfc;_0x223e13++){for(let _0x58cb95=0x0;_0x58cb95<_0x6a8945;_0x58cb95++){_0x34da78['push'](_0x5096ec/_0x265bfc),_0x34da78['push'](_0x223e13/_0x265bfc);}}}_0x34da78=new Float32Array(_0x34da78);const _0x1b38a5=this[_0x295b43(0x4ec,0x485)]['particlesTextureSize']**0x2;let _0x314179=[];for(let _0x43b09b=0x0;_0x43b09b<_0x1b38a5;_0x43b09b++){_0x314179['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x314179=new Float32Array(_0x314179);function _0x295b43(_0x3ab778,_0x31f3e5){return _0x2bf539(_0x31f3e5-0xbb,_0x3ab778);}let _0x329602=[];for(let _0x3ff172=0x0,_0x5e1256=0x0;_0x3ff172<_0x1b38a5;_0x3ff172++){_0x329602['push'](_0x5e1256+0x0,_0x5e1256+0x1,_0x5e1256+0x2,_0x5e1256+0x2,_0x5e1256+0x1,_0x5e1256+0x3),_0x5e1256+=_0x6a8945;}_0x329602=new Uint32Array(_0x329602);const _0x3a0e73={};_0x3a0e73['componentDatatype']=ComponentDatatype[_0x295b43(0x49a,0x4c2)],_0x3a0e73['componentsPerAttribute']=0x2,_0x3a0e73[_0x2fc634(0x28f,0x272)]=_0x34da78;const _0x2c1e1d={};_0x2c1e1d['componentDatatype']=ComponentDatatype['FLOAT'],_0x2c1e1d['componentsPerAttribute']=0x3,_0x2c1e1d['values']=_0x314179;const _0x1bf038=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x3a0e73),'normal':new GeometryAttribute(_0x2c1e1d)}),'indices':_0x329602});return _0x1bf038;}[_0x2bf539(0x48d,0x461)](_0x3d9e54){const _0x19c319={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x3d9e54};return Appearance['getDefaultRenderState'](!![],![],_0x19c319);}[_0x2bf539(0x45c,0x470)](){const _0x1615a7={};_0x1615a7['st']=0x0,_0x1615a7['normal']=0x1;function _0xe9615b(_0x494d76,_0x127140){return _0x2bf539(_0x494d76- -0x3b4,_0x127140);}const _0x7b3ed7={};_0x7b3ed7[_0x3cdb17(-0x191,-0x1bf)]=!![];const _0x47e719={};_0x47e719['enabled']=!![],_0x47e719[_0x3cdb17(-0xeb,-0x13e)]=WebGLRenderingContext[_0x3cdb17(-0x1b1,-0x183)],_0x47e719['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x47e719['blendFuncDestination']=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x50b16a={};function _0x3cdb17(_0x16babd,_0x3d5ea6){return _0x4af14d(_0x16babd,_0x3d5ea6- -0x3c7);}_0x50b16a['viewport']=undefined,_0x50b16a[_0x3cdb17(-0x1b4,-0x196)]=_0x7b3ed7,_0x50b16a['depthMask']=!![],_0x50b16a['blending']=_0x47e719;const _0x235884=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x1615a7,'geometry':this[_0xe9615b(0x54,0x52)](),'primitiveType':PrimitiveType[_0x3cdb17(-0x205,-0x1ce)],'uniformMap':{'previousParticlesPosition':()=>this[_0xe9615b(0x8e,0x110)][_0x3cdb17(-0xdf,-0x15e)]['previousParticlesPosition'],'currentParticlesPosition':()=>this['computing'][_0x3cdb17(-0xfc,-0x15e)][_0xe9615b(0x84,0xdf)],'postProcessingPosition':()=>this['computing']['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this[_0xe9615b(0x8e,0xa7)]['particlesTextures']['particlesSpeed'],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{var _0x52cd67,_0x8ebefd;const _0xe7f8aa=new Cartesian2(((_0x52cd67=this['options']['domain'])===null||_0x52cd67===void 0x0?void 0x0:_0x52cd67[_0x5a25b0(0x57a,0x54f)])??this['computing'][_0x4074a9(0x134,0x12f)][_0x5a25b0(0x4dd,0x541)]['min'],((_0x8ebefd=this[_0x4074a9(0x5d,0x91)]['domain'])===null||_0x8ebefd===void 0x0?void 0x0:_0x8ebefd[_0x5a25b0(0x481,0x4d9)])??this['computing'][_0x4074a9(0x134,0x104)][_0x5a25b0(0x520,0x541)][_0x5a25b0(0x543,0x4d9)]);function _0x4074a9(_0x4437fe,_0x5a0ca7){return _0xe9615b(_0x4437fe-0x47,_0x5a0ca7);}function _0x5a25b0(_0x252d5e,_0x14127c){return _0x3cdb17(_0x252d5e,_0x14127c-0x6fe);}return _0xe7f8aa;},'displayRange':()=>{function _0x6ae9bd(_0x4f26f0,_0x4366a9){return _0x3cdb17(_0x4f26f0,_0x4366a9-0x1b7);}var _0x2feefe,_0x2235bd;const _0x2c3d7e=new Cartesian2(((_0x2feefe=this[_0x6ae9bd(-0x74,-0x5a)]['displayRange'])===null||_0x2feefe===void 0x0?void 0x0:_0x2feefe['min'])??this['computing']['windData']['speed']['min'],((_0x2235bd=this[_0x6ae9bd(-0xc0,-0x5a)][_0x3528e0(0x47c,0x4f2)])===null||_0x2235bd===void 0x0?void 0x0:_0x2235bd['max'])??this['computing']['windData'][_0x3528e0(0x49f,0x461)][_0x6ae9bd(-0x3b,-0x6e)]);function _0x3528e0(_0x5d2cc8,_0x2ffd75){return _0xe9615b(_0x2ffd75-0x3f7,_0x5d2cc8);}return _0x2c3d7e;},'particleHeight':()=>this[_0x3cdb17(-0x293,-0x211)]['fixedHeight']||0x0,'aspect':()=>this['context'][_0x3cdb17(-0x217,-0x1dd)]/this[_0x3cdb17(-0x1d8,-0x186)][_0x3cdb17(-0xcf,-0x14d)],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x5d76ee={};function _0x1a1ab5(_0x227d60,_0x59b176){return _0x3cdb17(_0x227d60,_0x59b176-0x561);}_0x5d76ee['min']=0x1,_0x5d76ee['max']=0x2;const _0x286ab3=this['options']['lineWidth']||_0x5d76ee;return new Cartesian2(_0x286ab3['min'],_0x286ab3[_0x1a1ab5(0x366,0x33c)]);},'lineLength':()=>{const _0x147870={};function _0x62b68b(_0x4cbc08,_0x293e79){return _0x3cdb17(_0x293e79,_0x4cbc08-0x191);}_0x147870['min']=0x14,_0x147870[_0x62b68b(-0x94,-0x5b)]=0x64;function _0x267b4d(_0xc43134,_0x286618){return _0x3cdb17(_0xc43134,_0x286618-0x2eb);}const _0x4d8ba8=this['options'][_0x267b4d(0x20b,0x1a0)]||_0x147870;return new Cartesian2(_0x4d8ba8['min'],_0x4d8ba8['max']);},'is3D':()=>this['viewerParameters']['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this[_0xe9615b(0x4b,0x9a)]['segmentsDepth']},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager[_0x3cdb17(-0x230,-0x1d5)](),'rawRenderState':this[_0x3cdb17(-0x13a,-0x14e)](_0x50b16a)}),_0x5851f0={};return _0x5851f0['segments']=_0x235884,_0x5851f0;}['onParticlesTextureSizeChange'](){const _0x40a014=this[_0x234bb4(-0x1c0,-0x18f)]();this['primitives']['segments'][_0x234bb4(-0x128,-0x14a)]=_0x40a014;function _0x3b1f48(_0x509353,_0x13df67){return _0x4af14d(_0x509353,_0x13df67- -0x2cb);}const _0x25efc4={};_0x25efc4[_0x3b1f48(-0xc6,-0x8a)]=this[_0x234bb4(-0x127,-0x142)];function _0x234bb4(_0xac1a57,_0x5ef76a){return _0x4af14d(_0xac1a57,_0x5ef76a- -0x383);}_0x25efc4[_0x234bb4(-0x1c2,-0x14a)]=_0x40a014,_0x25efc4['attributeLocations']=this['primitives']['segments']['attributeLocations'],_0x25efc4['bufferUsage']=BufferUsage[_0x234bb4(-0x16a,-0xf7)];const _0x23b9c3=VertexArray['fromGeometry'](_0x25efc4);this[_0x234bb4(-0x14c,-0x13c)][_0x234bb4(-0x150,-0x184)]['commandToExecute']&&(this[_0x234bb4(-0xd3,-0x13c)]['segments'][_0x234bb4(-0xa8,-0xff)]['vertexArray']=_0x23b9c3);}[_0x4af14d(0x1e6,0x25e)](){this['colorTable']['destroy'](),this['colorTable']=this['createColorTableTexture']();}[_0x2bf539(0x3f9,0x41b)](_0x2c4407){function _0x59c4a9(_0x11c52a,_0x538e64){return _0x4af14d(_0x538e64,_0x11c52a- -0x37e);}function _0x1cd98c(_0x583441,_0x393816){return _0x2bf539(_0x393816- -0x26f,_0x583441);}const _0x4dd89e=_0x2c4407[_0x59c4a9(-0x131,-0x103)]&&JSON['stringify'](_0x2c4407[_0x1cd98c(0x213,0x1f2)])!==JSON['stringify'](this[_0x59c4a9(-0x1c8,-0x1bf)]['colors']);this[_0x59c4a9(-0x1c8,-0x1ab)]=deepMerge(_0x2c4407,this['options']),_0x4dd89e&&this['onColorTableChange']();}['destroy'](){Object['values'](this[_0x1b5001(0x657,0x5f5)])[_0x592d38(0x203,0x25c)](_0x359565=>{_0x359565['destroy']();});function _0x592d38(_0xd598cb,_0x425214){return _0x2bf539(_0xd598cb- -0x279,_0x425214);}Object['values'](this['primitives'])[_0x1b5001(0x5c9,0x61d)](_0x356588=>{function _0x414889(_0x4853d9,_0x5b7d98){return _0x592d38(_0x4853d9-0x1ae,_0x5b7d98);}_0x356588[_0x414889(0x347,0x30d)]();});function _0x1b5001(_0x55c6bd,_0x1643be){return _0x4af14d(_0x55c6bd,_0x1643be-0x3b5);}this[_0x1b5001(0x694,0x63a)][_0x592d38(0x199,0x212)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x540294,_0x13465a,_0x26d512,_0x19a7d7,_0x205a8a){this['context']=_0x540294,this['options']=_0x26d512,this['viewerParameters']=_0x19a7d7,this['computing']=new WindParticlesComputing(_0x540294,_0x13465a,_0x26d512,_0x19a7d7,_0x205a8a),this['rendering']=new WindParticlesRendering(_0x540294,_0x26d512,_0x19a7d7,this['computing']),this['clearFramebuffers']();}['getPrimitives'](){const _0x2f5e7a=[this['computing']['primitives']['calculateSpeed'],this['computing'][_0x344164(0x523,0x519)]['updatePosition'],this['computing']['primitives'][_0x344164(0x52d,0x564)],this[_0x857f53(0xaf,0x7a)]['primitives'][_0x344164(0x4a2,0x4d1)]];function _0x857f53(_0x22a52d,_0x46366a){return _0x2bf539(_0x22a52d- -0x315,_0x46366a);}function _0x344164(_0x581520,_0x53d081){return _0x2bf539(_0x53d081-0xbe,_0x581520);}return _0x2f5e7a;}['clearFramebuffers'](){function _0x136298(_0x4a06dd,_0xb94a49){return _0x4af14d(_0xb94a49,_0x4a06dd-0x309);}const _0x566930=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x136298(0x55b,0x4dc)]});function _0x5bc427(_0x458a2d,_0x32e136){return _0x2bf539(_0x458a2d-0x11,_0x32e136);}Object[_0x5bc427(0x4a5,0x432)](this['rendering']['framebuffers'])['forEach'](_0x1230d0=>{function _0x4a6c58(_0x2d5470,_0x2c1550){return _0x5bc427(_0x2c1550- -0x31b,_0x2d5470);}function _0x503599(_0x524d2c,_0x5d2657){return _0x136298(_0x524d2c- -0xd6,_0x5d2657);}_0x566930[_0x503599(0x486,0x4f7)]=this['rendering']['framebuffers'][_0x1230d0],_0x566930['execute'](this[_0x503599(0x474,0x4ba)]);});}['changeOptions'](_0x361bbe){let _0xedc19=![];_0x361bbe['particlesTextureSize']&&this[_0x12cd07(0x3bf,0x423)]['particlesTextureSize']!==_0x361bbe['particlesTextureSize']&&(_0xedc19=!![]);const _0x3427d9=deepMerge(_0x361bbe,this[_0x12cd07(0x49c,0x423)]);function _0x12cd07(_0x3785df,_0x14f089){return _0x4af14d(_0x3785df,_0x14f089-0x26d);}if(_0x3427d9['particlesTextureSize']<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x3427d9,this[_0x3fd7a4(-0x1e5,-0x18b)][_0x12cd07(0x43d,0x452)](_0x361bbe);function _0x3fd7a4(_0x12fa64,_0x4dae5b){return _0x4af14d(_0x12fa64,_0x4dae5b- -0x33b);}this['computing'][_0x12cd07(0x439,0x452)](_0x361bbe),_0xedc19&&(this['computing'][_0x12cd07(0x4ae,0x49a)](),this['computing'][_0x3fd7a4(-0xd6,-0x143)](),this[_0x3fd7a4(-0x161,-0x18b)]['onParticlesTextureSizeChange']());}[_0x4af14d(0x21c,0x286)](_0x794a50){this[_0x3936d6(0x413,0x41d)]=_0x794a50;function _0x3936d6(_0x17f093,_0x3795e7){return _0x2bf539(_0x17f093- -0x2b,_0x3795e7);}function _0x12a675(_0x23cddc,_0x555b95){return _0x2bf539(_0x555b95-0xd1,_0x23cddc);}this['computing'][_0x12a675(0x4ae,0x50f)]=_0x794a50,this['rendering']['viewerParameters']=_0x794a50;}[_0x2bf539(0x412,0x45e)](){this['computing']['destroy']();function _0x1a8bcb(_0x21dfc4,_0x2851ce){return _0x4af14d(_0x2851ce,_0x21dfc4- -0x3d9);}function _0x5d954e(_0x51f1fd,_0x2336e1){return _0x4af14d(_0x51f1fd,_0x2336e1-0x2f3);}this[_0x1a8bcb(-0x229,-0x227)][_0x1a8bcb(-0x1db,-0x228)]();}}const Cesium$1=mars3d__namespace[_0x4af14d(0x23d,0x254)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x272a4f={};_0x272a4f['min']=0x1,_0x272a4f[_0x2bf539(0x3b6,0x3d1)]=0x2;const _0x1c6609={};_0x1c6609['min']=0x14,_0x1c6609['max']=0x64;const _0x19aded={};_0x19aded['particlesTextureSize']=0x64,_0x19aded[_0x2bf539(0x416,0x3eb)]=0x0,_0x19aded['lineWidth']=_0x272a4f,_0x19aded['lineLength']=_0x1c6609,_0x19aded[_0x2bf539(0x40e,0x3e8)]=0x1,_0x19aded['dropRate']=0.003,_0x19aded['dropRateBump']=0.001;function _0x2bf539(_0x1497ec,_0x1661ad){return _0x4142(_0x1497ec-0x214,_0x1661ad);}_0x19aded[_0x4af14d(0x2a4,0x24d)]=['rgb(206,255,255)'],_0x19aded['flipY']=![],_0x19aded['dynamic']=!![];const DEF_OPTIONS=_0x19aded;function _0x32ca(){const _0x51e039=['createPrimitives','remove','dynamic','rectangle','getU','colors','updateWindData','attributeLocations','requestRender','isInExtent','OPAQUE','framebuffer','Cesium','createWindTextures','pixelDatatype','worker','Rectangle','windField','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','1591588pemnWY','_animateFrame','getDataAtLonLat','onColorTableChange','umin','alpha','toGridXY','_canrefresh','getRandomLatLng','updateViewerParameters','refreshTimer','BaseLayer','473788fgBkbQ','forEach','particlesTextures','values','toDegrees','getV','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','destoryRenderingFramebuffers','primitiveType','pointer-events','_calcUV','1616245CYamrX','initFrameRate','getCalculateSpeedShader','now','owner','autoClear','default','createRawRenderState','drawingBufferHeight','latRange','lineLength','isDestroyed','random','0px','keys','camera','array','west','commandToExecute','colorTable','applyViewerParameters','age','vertexArray','blendEquation','frameTime','getDirection','STATIC_DRAW','windData','CanvasWindField','canvasHeight','processWindData','mode','postProcessingPosition','preExecute','_onMouseUpEvent','off','Compute','823UQzMnY','commandType','updatePosition','Math','displayRange','mouse_down','alt','morphComplete','particlesTextureSize','cols','setData','type','bind','update','742dPhJjK','rawRenderState','10QJMdLR','length','max','_mountedHook','UNSIGNED_BYTE','fillRect','windTextures','particleSystem','_speedRate','green','calculateSpeed','toRadians','requestAnimationFrame','speedRate','_onMouseMoveEvent','hasOwnProperty','rendering','rows','left','getSpeed','south','mouse_move','options','mouseMove','shaderProgram','getColor','talt','lineWidth','abs','interpolated','_randomParticle','_map','ymin','EventType','627858UVBCQs','tlng','pointerEvents','samplingWindow','defineProperty','push','north','color','_updateIng2','_colorRamp','bounds','frameRateMonitor','createComputingPrimitives','fragmentShaderSource','isArray','Cartesian2','_removedHook','sources','12AfBMwc','_addedHook','mouseUp','data','lat','_createCanvas','isPointVisible','postMessage','nextParticlesPosition','getUVByXY','SceneMode','pixelFormat','_calc_speedRate','container','mouseDown','particlesSpeed','east','updateOptions','setDate','style','removeEventListener','resize','drawingBufferWidth','textures','_updateIng','pixelSize','unbindEvent','zIndex','scene','_onMouseDownEvent','getSegmentDrawFragmentShader','FLOAT','createSegmentsGeometry','positionWC','strokeStyle','height','createParticlesTextures','TRIANGLES','speedFactor','outputTexture','createColorTableTexture','frameRate','destroy','segments','Unknown\x20command\x20type','latitude','fixedHeight','init','_maxAge','pow','cancelAnimationFrame','globe','enabled','clientWidth','speed','particles','sqrt','_pointerEvents','max\x20is\x20undefined,\x20calculate\x20max','redraw','1092184JCwUcR','vertexShaderSource','_drawLines','setGeometry','getUpdatePositionShader','flipY','sin','isDynamic','min','depthTexture','_setOptionsHook','stroke','clearCommand','xmax','original','getParticles','position','floor','show','warn','currentParticlesPosition','lng','useViewerBounds','xmin','bindEvent','fromGeometry','viewerParameters','LINEAR','canvasWidth','destroyParticlesTextures','computing','canvas','reCreateWindTextures','depthTest','canvasContext','clear','maxAge','6386787TszXgv','createRenderingFramebuffers','visibility','grid','geometry','fill','ymax','minificationFilter','beginPath','setOptions','auto','framebuffers','context','clientHeight','width','FUNC_ADD','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','udata','primitives'];_0x32ca=function(){return _0x51e039;};return _0x32ca();}class WindLayer extends BaseLayer$1{constructor(_0x5538e6={}){_0x5538e6={...DEF_OPTIONS,..._0x5538e6},super(_0x5538e6),this['_setOptionsHook'](_0x5538e6,_0x5538e6);}get['layer'](){return this['primitives'];}get['data'](){return this['options']['data'];}set[_0x2bf539(0x3eb,0x376)](_0x1b6fee){function _0x2cdd12(_0xd5f421,_0x1641ff){return _0x2bf539(_0xd5f421- -0x9f,_0x1641ff);}function _0x439ac2(_0x145a7f,_0x11f252){return _0x4af14d(_0x145a7f,_0x11f252- -0xbc);}this['options'][_0x2cdd12(0x34c,0x358)]=_0x1b6fee,this[_0x439ac2(0x241,0x1e5)](_0x1b6fee);}get['colors'](){function _0x49fdbb(_0x405bcd,_0x180685){return _0x2bf539(_0x180685-0x99,_0x405bcd);}return this[_0x49fdbb(0x3e2,0x463)]['colors'];}set['colors'](_0x221d04){function _0x4fd0de(_0x9e3893,_0x2b17ae){return _0x4af14d(_0x2b17ae,_0x9e3893-0x37e);}this['options'][_0x484e03(0x1e7,0x16d)]=_0x221d04;function _0x484e03(_0x41e3d9,_0x4a7f61){return _0x2bf539(_0x4a7f61- -0x2f4,_0x41e3d9);}const _0x433190={};_0x433190[_0x484e03(0x162,0x16d)]=_0x221d04,this['_setOptionsHook'](this['options'],_0x433190);}['_mountedHook'](){}['_addedHook'](){function _0x2bf40d(_0x23ce62,_0x32ed4b){return _0x4af14d(_0x23ce62,_0x32ed4b- -0x21a);}this[_0x2bf40d(-0xae,-0x2a)]=this['_map'][_0x7f74f2(0x2b5,0x30f)],this['camera']=this['_map']['camera'];this[_0x2bf40d(-0x56,-0x64)]['data']&&this['setData'](this['options']['data']);if(!this[_0x7f74f2(0x352,0x3cf)])return;this[_0x7f74f2(0x2ef,0x2f0)]={'lonRange':new Cesium$1[(_0x2bf40d(-0xb2,-0x49))](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x7f74f2(0x2b5,0x265)][_0x2bf40d(0x52,0x77)]},this[_0x7f74f2(0x329,0x30f)](),this[_0x2bf40d(-0x11,-0x73)]=new WindParticleSystem(this['scene']['context'],this['windData'],this['options'],this[_0x7f74f2(0x2ef,0x26d)],this['scene']),this[_0x7f74f2(0x30c,0x2cb)]=this['particleSystem']['getPrimitives'](),this['primitives'][_0x2bf40d(0x36,0x4e)](_0x52e2ba=>{this['scene']['primitives']['add'](_0x52e2ba);});function _0x7f74f2(_0x4f164c,_0x117218){return _0x2bf539(_0x4f164c- -0x14f,_0x117218);}this['camera']['percentageChanged']=0.01,this['camera']['changed']['addEventListener'](this[_0x7f74f2(0x329,0x34d)]['bind'](this)),this[_0x2bf40d(-0x79,-0x2a)][_0x7f74f2(0x363,0x326)]['addEventListener'](this['updateViewerParameters']['bind'](this)),window['addEventListener']('resize',this[_0x2bf40d(0x86,0x4a)]['bind'](this));}[_0x4af14d(0x189,0x1d2)](){function _0x1ac87b(_0xccc10e,_0x2f0bca){return _0x2bf539(_0xccc10e- -0x158,_0x2f0bca);}this[_0x467659(0x429,0x4a6)]['changed']['removeEventListener'](this['updateViewerParameters'][_0x1ac87b(0x35f,0x381)](this)),this['scene'][_0x1ac87b(0x35a,0x3b4)]['removeEventListener'](this['updateViewerParameters']['bind'](this));function _0x467659(_0x2051ac,_0x1098de){return _0x4af14d(_0x1098de,_0x2051ac-0x1a8);}window[_0x467659(0x390,0x364)](_0x467659(0x391,0x36a),this['updateViewerParameters'][_0x1ac87b(0x35f,0x34e)](this)),this[_0x467659(0x3ef,0x3b7)]&&(this['primitives']['forEach'](_0x24d56f=>{function _0x308acc(_0xb82774,_0xc7e912){return _0x467659(_0xb82774-0x1ed,_0xc7e912);}function _0x40ef8b(_0x12db64,_0x5bbf60){return _0x1ac87b(_0x5bbf60-0x185,_0x12db64);}this[_0x40ef8b(0x464,0x431)]['primitives'][_0x308acc(0x5de,0x5bf)](_0x24d56f);}),delete this['primitives']),this['particleSystem']&&(this['particleSystem'][_0x1ac87b(0x2ba,0x289)](),delete this[_0x1ac87b(0x263,0x2bd)]);}[_0x2bf539(0x4b5,0x444)](_0x9ee109,_0x373b00){this[_0x3b3119(0x121,0x174)]=this[_0x3b3119(0x124,0x18a)](_0x9ee109);function _0x3b3119(_0x73ffa5,_0x2d8f05){return _0x4af14d(_0x2d8f05,_0x73ffa5- -0x16c);}if(_0x373b00){this['_removedHook'](),this['_addedHook']();return;}function _0x1ae02e(_0x3f23ed,_0x69caa3){return _0x2bf539(_0x3f23ed- -0x4ce,_0x69caa3);}this[_0x3b3119(0x3b,0x5e)]?(this[_0x1ae02e(-0x113,-0xcf)][_0x1ae02e(-0x8c,-0x43)]['updateWindData'](this['windData']),this[_0x1ae02e(-0xca,-0x119)][_0x3b3119(0xe4,0x7f)]()):this[_0x1ae02e(-0xe5,-0x110)]();}['_setOptionsHook'](_0x2ca3df,_0x18645b){function _0x33c358(_0x32c4d6,_0x321103){return _0x2bf539(_0x321103- -0x4bc,_0x32c4d6);}function _0x3d2d59(_0x266d35,_0x5de76c){return _0x4af14d(_0x5de76c,_0x266d35-0xf7);}this[_0x33c358(-0x10c,-0x101)]&&(this['particleSystem']['changeOptions'](_0x18645b),this[_0x33c358(-0x87,-0xb8)]['requestRender']());}['processWindData'](_0x2cbba6){var _0x15db93,_0x2bfd76;function _0x101a0d(_0x364a7b,_0x185fca){return _0x4af14d(_0x364a7b,_0x185fca-0x2c2);}function _0x6faba4(_0x5963bb,_0x3f8a9c){return _0x2bf539(_0x3f8a9c- -0x1fc,_0x5963bb);}const _0x2eebcc={..._0x2cbba6},_0x1c3c6f=_0x2eebcc;!_0x1c3c6f['height']&&_0x1c3c6f['rows']&&(_0x1c3c6f['height']=_0x1c3c6f[_0x6faba4(0x18b,0x1c9)]);!_0x1c3c6f[_0x101a0d(0x534,0x505)]&&_0x1c3c6f[_0x101a0d(0x597,0x562)]&&(_0x1c3c6f[_0x101a0d(0x511,0x505)]=_0x1c3c6f['cols']);!_0x1c3c6f[_0x6faba4(0x190,0x1e4)]&&(_0x1c3c6f['bounds']={'west':_0x1c3c6f[_0x101a0d(0x47a,0x4e9)],'south':_0x1c3c6f[_0x101a0d(0x49d,0x482)],'east':_0x1c3c6f[_0x6faba4(0x1f0,0x235)],'north':_0x1c3c6f['ymax']});if(!_0x1c3c6f['u']){const _0x49bf93={};_0x49bf93['array']=_0x2cbba6[_0x101a0d(0x504,0x508)],_0x49bf93['min']=_0x2cbba6[_0x101a0d(0x52e,0x521)],_0x49bf93['max']=_0x2cbba6['umax'],_0x1c3c6f['u']=_0x49bf93;}if(!_0x1c3c6f['v']){const _0x35669d={};_0x35669d['array']=_0x2cbba6['vdata'],_0x35669d['min']=_0x2cbba6['vmin'],_0x35669d['max']=_0x2cbba6['vmax'],_0x1c3c6f['v']=_0x35669d;}if(((_0x15db93=_0x1c3c6f[_0x6faba4(0x1f4,0x222)])===null||_0x15db93===void 0x0?void 0x0:_0x15db93['min'])===undefined||((_0x2bfd76=_0x1c3c6f[_0x6faba4(0x1d3,0x222)])===null||_0x2bfd76===void 0x0?void 0x0:_0x2bfd76[_0x101a0d(0x4ce,0x464)])===undefined||_0x1c3c6f['speed'][_0x6faba4(0x2e8,0x29a)]===undefined){const _0x4cb973={'array':new Float32Array(_0x1c3c6f['u']['array'][_0x101a0d(0x3eb,0x463)]),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0x4b610a=0x0;_0x4b610a<_0x1c3c6f['u'][_0x101a0d(0x54a,0x544)][_0x6faba4(0x1b5,0x1b9)];_0x4b610a++){_0x4cb973[_0x101a0d(0x560,0x544)][_0x4b610a]=Math['sqrt'](_0x1c3c6f['u'][_0x101a0d(0x4d5,0x544)][_0x4b610a]*_0x1c3c6f['u']['array'][_0x4b610a]+_0x1c3c6f['v'][_0x6faba4(0x2e4,0x29a)][_0x4b610a]*_0x1c3c6f['v']['array'][_0x4b610a]),_0x4cb973['array'][_0x4b610a]!==0x0&&(_0x4cb973['min']=Math[_0x101a0d(0x520,0x4da)](_0x4cb973['min'],_0x4cb973['array'][_0x4b610a]),_0x4cb973[_0x101a0d(0x494,0x464)]=Math['max'](_0x4cb973[_0x101a0d(0x49b,0x464)],_0x4cb973['array'][_0x4b610a]));}_0x1c3c6f[_0x101a0d(0x548,0x4cc)]=_0x4cb973;}return _0x1c3c6f;}['updateViewerParameters'](){var _0x22475e;const _0x17db9a=this['scene'],_0xcd0d71=_0x17db9a['canvas'],_0x29bec7={};_0x29bec7['x']=0x0,_0x29bec7['y']=0x0;const _0x31bb1e={};_0x31bb1e['x']=0x0,_0x31bb1e['y']=_0xcd0d71[_0x401ecc(0x115,0x16c)];const _0x6b7fee={};_0x6b7fee['x']=_0xcd0d71[_0x401ecc(0xdc,0x5b)],_0x6b7fee['y']=0x0;const _0x115649={};_0x115649['x']=_0xcd0d71['clientWidth'],_0x115649['y']=_0xcd0d71['clientHeight'];const _0x1b5298=[_0x29bec7,_0x31bb1e,_0x6b7fee,_0x115649];let _0x337f44=0xb4;function _0x5f4a57(_0x5e4227,_0x23dfb7){return _0x2bf539(_0x5e4227- -0x160,_0x23dfb7);}function _0x401ecc(_0xa5d1f3,_0x39dbdd){return _0x4af14d(_0x39dbdd,_0xa5d1f3- -0x12d);}let _0x394a20=-0xb4,_0xa4a014=0x5a,_0x393238=-0x5a,_0x8b95d8=![];for(const _0x3e68c9 of _0x1b5298){const _0x48b572=_0x17db9a['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x3e68c9['x'],_0x3e68c9['y']),_0x17db9a[_0x5f4a57(0x2bb,0x337)]['ellipsoid']);if(!_0x48b572){_0x8b95d8=!![];break;}const _0xba7963=_0x17db9a['globe']['ellipsoid']['cartesianToCartographic'](_0x48b572),_0x196e5c=Cesium$1[_0x5f4a57(0x34e,0x2ff)]['toDegrees'](_0xba7963['longitude']),_0x5c0178=Cesium$1['Math'][_0x401ecc(0x13e,0x1a6)](_0xba7963[_0x5f4a57(0x2b5,0x328)]);_0x337f44=Math['min'](_0x337f44,_0x196e5c),_0x394a20=Math['max'](_0x394a20,_0x196e5c),_0xa4a014=Math[_0x5f4a57(0x2cc,0x2cc)](_0xa4a014,_0x5c0178),_0x393238=Math['max'](_0x393238,_0x5c0178);}if(!_0x8b95d8){const _0xdc1d15=new Cesium$1[(_0x5f4a57(0x285,0x2d1))](Math['max'](this['windData']['bounds'][_0x5f4a57(0x337,0x2d6)],_0x337f44),Math['min'](this[_0x5f4a57(0x341,0x37a)][_0x401ecc(0x9f,0xb7)]['east'],_0x394a20)),_0x288c42=new Cesium$1['Cartesian2'](Math['max'](this['windData'][_0x5f4a57(0x280,0x23d)]['south'],_0xa4a014),Math[_0x401ecc(0xeb,0xbd)](this['windData']['bounds'][_0x401ecc(0x9b,0xbc)],_0x393238)),_0x5733b5=(_0xdc1d15['y']-_0xdc1d15['x'])*0.05,_0x442de0=(_0x288c42['y']-_0x288c42['x'])*0.05;_0xdc1d15['x']=Math[_0x401ecc(0x75,0xc0)](this['windData'][_0x5f4a57(0x280,0x2b4)]['west'],_0xdc1d15['x']-_0x5733b5),_0xdc1d15['y']=Math['min'](this['windData']['bounds']['east'],_0xdc1d15['y']+_0x5733b5),_0x288c42['x']=Math['max'](this[_0x5f4a57(0x341,0x393)]['bounds'][_0x5f4a57(0x268,0x253)],_0x288c42['x']-_0x442de0),_0x288c42['y']=Math[_0x401ecc(0xeb,0x116)](this[_0x401ecc(0x160,0x130)][_0x401ecc(0x9f,0xcd)]['north'],_0x288c42['y']+_0x442de0),this['viewerParameters']['lonRange']=_0xdc1d15,this['viewerParameters'][_0x401ecc(0x14e,0x17b)]=_0x288c42;const _0x5ca63a=this[_0x401ecc(0x160,0x10e)][_0x401ecc(0x9f,0x27)]['east']-this[_0x5f4a57(0x341,0x2c5)][_0x401ecc(0x9f,0xaa)][_0x401ecc(0x156,0x199)],_0x11f29c=this[_0x5f4a57(0x341,0x35e)][_0x5f4a57(0x280,0x274)][_0x5f4a57(0x27c,0x2af)]-this[_0x401ecc(0x160,0x192)][_0x401ecc(0x9f,0xcf)]['south'],_0x552a84=(_0xdc1d15['y']-_0xdc1d15['x'])/_0x5ca63a,_0x599ab5=(_0x288c42['y']-_0x288c42['x'])/_0x11f29c,_0x3676a0=Math[_0x5f4a57(0x2cc,0x2d6)](_0x552a84,_0x599ab5),_0x874a5a=0x3e8*_0x3676a0;_0x874a5a>0x0&&(this['viewerParameters'][_0x401ecc(0xc0,0x67)]=Math['max'](0x0,Math[_0x401ecc(0xeb,0x151)](0x3e8,_0x874a5a)));}this[_0x5f4a57(0x2de,0x309)]['sceneMode']=this['scene']['mode'],(_0x22475e=this['particleSystem'])===null||_0x22475e===void 0x0||_0x22475e['applyViewerParameters'](this[_0x5f4a57(0x2de,0x28b)]);}[_0x2bf539(0x471,0x4d1)](_0x44849d,_0x5ca000){const {bounds:_0x4cf204,width:_0x2a650a,height:_0x46eee8,u:_0x1c338f,v:_0xe15754,speed:_0x77293d}=this[_0x66769d(0x332,0x2cd)],{flipY:_0x51734a}=this['options'];if(_0x44849d<_0x4cf204['west']||_0x44849d>_0x4cf204['east']||_0x5ca000<_0x4cf204[_0x66769d(0x259,0x210)]||_0x5ca000>_0x4cf204[_0x3b3521(-0x201,-0x23a)])return null;const _0x37561f=(_0x44849d-_0x4cf204[_0x3b3521(-0x146,-0x186)])/(_0x4cf204[_0x3b3521(-0x1e5,-0x1a0)]-_0x4cf204[_0x66769d(0x328,0x2ea)])*(_0x2a650a-0x1);let _0x45609a=(_0x5ca000-_0x4cf204[_0x3b3521(-0x215,-0x248)])/(_0x4cf204[_0x66769d(0x26d,0x21b)]-_0x4cf204['south'])*(_0x46eee8-0x1);_0x51734a&&(_0x45609a=_0x46eee8-0x1-_0x45609a);const _0x46c40f=Math['floor'](_0x37561f),_0xbcbab4=Math['floor'](_0x45609a),_0x35a9e6=Math['floor'](_0x37561f),_0x247039=Math['min'](_0x35a9e6+0x1,_0x2a650a-0x1),_0xfa9660=Math['floor'](_0x45609a),_0x3788ae=Math[_0x66769d(0x2bd,0x255)](_0xfa9660+0x1,_0x46eee8-0x1),_0x2a9c40=_0x37561f-_0x35a9e6,_0xe9d374=_0x45609a-_0xfa9660;function _0x3b3521(_0x3a40b7,_0x12fe1a){return _0x2bf539(_0x3a40b7- -0x5dd,_0x12fe1a);}const _0x41e8fe=_0xbcbab4*_0x2a650a+_0x46c40f,_0x471e49=_0xfa9660*_0x2a650a+_0x35a9e6,_0x571e1e=_0xfa9660*_0x2a650a+_0x247039,_0x24c4ac=_0x3788ae*_0x2a650a+_0x35a9e6;function _0x66769d(_0x345d7a,_0x19596e){return _0x4af14d(_0x19596e,_0x345d7a-0xa5);}const _0x445743=_0x3788ae*_0x2a650a+_0x247039,_0x4dd8d3=_0x1c338f[_0x66769d(0x327,0x385)][_0x471e49],_0x54c725=_0x1c338f[_0x3b3521(-0x147,-0x114)][_0x571e1e],_0xc50894=_0x1c338f[_0x66769d(0x327,0x2bc)][_0x24c4ac],_0x52e2cd=_0x1c338f['array'][_0x445743],_0x4c4b82=(0x1-_0x2a9c40)*(0x1-_0xe9d374)*_0x4dd8d3+_0x2a9c40*(0x1-_0xe9d374)*_0x54c725+(0x1-_0x2a9c40)*_0xe9d374*_0xc50894+_0x2a9c40*_0xe9d374*_0x52e2cd,_0x5ce7e8=_0xe15754['array'][_0x471e49],_0x2d4c48=_0xe15754['array'][_0x571e1e],_0xc413b=_0xe15754['array'][_0x24c4ac],_0x2b31c7=_0xe15754['array'][_0x445743],_0x32d590=(0x1-_0x2a9c40)*(0x1-_0xe9d374)*_0x5ce7e8+_0x2a9c40*(0x1-_0xe9d374)*_0x2d4c48+(0x1-_0x2a9c40)*_0xe9d374*_0xc413b+_0x2a9c40*_0xe9d374*_0x2b31c7,_0x326e6e=Math['sqrt'](_0x4c4b82*_0x4c4b82+_0x32d590*_0x32d590),_0x37bf2a={};_0x37bf2a['u']=_0x1c338f['array'][_0x41e8fe],_0x37bf2a['v']=_0xe15754['array'][_0x41e8fe],_0x37bf2a[_0x66769d(0x2af,0x23d)]=_0x77293d['array'][_0x41e8fe];const _0x1f184d={};_0x1f184d['u']=_0x4c4b82,_0x1f184d['v']=_0x32d590,_0x1f184d['speed']=_0x326e6e;const _0x26137a={};return _0x26137a[_0x66769d(0x2c3,0x288)]=_0x37bf2a,_0x26137a[_0x3b3521(-0x20c,-0x23f)]=_0x1f184d,_0x26137a;}}function _0x4142(_0x1015e5,_0x2a3270){const _0x32cac9=_0x32ca();return _0x4142=function(_0x414240,_0x3812c3){_0x414240=_0x414240-0x1a1;let _0x23f10f=_0x32cac9[_0x414240];return _0x23f10f;},_0x4142(_0x1015e5,_0x2a3270);}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this[_0x22efa2(-0x45,0x3)]=null,this[_0x22efa2(-0xa3,-0x4a)]=null;function _0x5dcefe(_0x2bb29c,_0x5a5e15){return _0x2bf539(_0x5a5e15-0x3b,_0x2bb29c);}this[_0x22efa2(-0x42,-0x5f)]=null,this['tlat']=null,this[_0x5dcefe(0x4d9,0x4d6)]=null;function _0x22efa2(_0x481883,_0x48b5ba){return _0x4af14d(_0x481883,_0x48b5ba- -0x222);}this['speed']=null;}['destroy'](){for(const _0x3c92fa in this){delete this[_0x3c92fa];}}}class CanvasWindField{constructor(_0x339261){this['setOptions'](_0x339261);}get[_0x2bf539(0x3c1,0x42d)](){return this['_speedRate'];}set['speedRate'](_0x33eb2c){function _0x5b782f(_0x37ac41,_0x542b79){return _0x2bf539(_0x542b79-0x142,_0x37ac41);}function _0x259b21(_0x48b3e9,_0x5fbef2){return _0x2bf539(_0x48b3e9- -0x5b6,_0x5fbef2);}this[_0x5b782f(0x4bd,0x4fe)]=(0x64-(_0x33eb2c>0x63?0x63:_0x33eb2c))*0x64,this[_0x5b782f(0x4d0,0x536)]=[(this['xmax']-this[_0x259b21(-0x17b,-0x158)])/this['_speedRate'],(this['ymax']-this[_0x5b782f(0x4f7,0x516)])/this[_0x259b21(-0x1fa,-0x247)]];}get[_0x4af14d(0x1e6,0x234)](){return this['_maxAge'];}set[_0x2bf539(0x448,0x42d)](_0xa1ba7){function _0x4bc0b9(_0x21c314,_0x225bc0){return _0x4af14d(_0x21c314,_0x225bc0- -0x183);}this[_0x4bc0b9(0x89,0x81)]=_0xa1ba7;}['setOptions'](_0x3778e5){this['options']=_0x3778e5;function _0xb2db85(_0x2a0911,_0x120976){return _0x2bf539(_0x120976- -0x3ad,_0x2a0911);}function _0x201315(_0x2d6e75,_0x189e41){return _0x2bf539(_0x2d6e75- -0x4bb,_0x189e41);}this['maxAge']=_0x3778e5['maxAge']||0x78,this['speedRate']=_0x3778e5[_0xb2db85(0x5c,0x14)]||0x32,this['particles']=[];const _0x5277bb=_0x3778e5['particlesNumber']||0x1000;for(let _0x20207b=0x0;_0x20207b<_0x5277bb;_0x20207b++){const _0x2dbba8=this[_0x201315(-0xe9,-0xed)](new CanvasParticle());this['particles']['push'](_0x2dbba8);}}[_0x4af14d(0x21a,0x1e6)](_0x4a126d){this['rows']=_0x4a126d['rows'],this['cols']=_0x4a126d['cols'];function _0x333d7d(_0x135fcd,_0x52e97a){return _0x2bf539(_0x52e97a- -0x28b,_0x135fcd);}function _0x59d252(_0x1f6f3a,_0x5adede){return _0x4af14d(_0x5adede,_0x1f6f3a- -0x226);}this['xmin']=_0x4a126d['xmin'],this['xmax']=_0x4a126d['xmax'],this['ymin']=_0x4a126d['ymin'],this['ymax']=_0x4a126d['ymax'],this[_0x333d7d(0x1ea,0x1c1)]=[];const _0x484158=_0x4a126d[_0x333d7d(0x1f1,0x1cf)],_0x7bf0fe=_0x4a126d['vdata'];let _0xf255bd=![];_0x484158['length']===this[_0x59d252(-0x75,-0x3b)]&&_0x484158[0x0][_0x59d252(-0x85,-0xe3)]===this[_0x333d7d(0x1f7,0x229)]&&(_0xf255bd=!![]);let _0x3286cd=0x0,_0x49017a=null,_0x1829d9=null;for(let _0x1e6a95=0x0;_0x1e6a95<this['rows'];_0x1e6a95++){_0x49017a=[];for(let _0x21e1b6=0x0;_0x21e1b6<this['cols'];_0x21e1b6++,_0x3286cd++){_0xf255bd?_0x1829d9=this[_0x333d7d(0x1b5,0x1fa)](_0x484158[_0x1e6a95][_0x21e1b6],_0x7bf0fe[_0x1e6a95][_0x21e1b6]):_0x1829d9=this['_calcUV'](_0x484158[_0x3286cd],_0x7bf0fe[_0x3286cd]),_0x49017a['push'](_0x1829d9);}this['grid'][_0x59d252(-0x5f,-0xa2)](_0x49017a);}!this['options'][_0x333d7d(0x1f8,0x19e)]&&this['grid']['reverse']();}['clear'](){delete this[_0x576e7c(0xdd,0x147)],delete this['cols'],delete this['xmin'],delete this['xmax'],delete this['ymin'];function _0x16dcc8(_0x4cc2af,_0x3e5b64){return _0x4af14d(_0x3e5b64,_0x4cc2af-0x18b);}function _0x576e7c(_0x2d93ba,_0x10beb7){return _0x4af14d(_0x2d93ba,_0x10beb7- -0x6a);}delete this[_0x16dcc8(0x3c6,0x3ef)],delete this['grid'],delete this['particles'];}[_0x4af14d(0x1fd,0x261)](_0x5ed503,_0x183c8f){function _0x5e0a1d(_0x2dc535,_0x2d4a52){return _0x2bf539(_0x2dc535-0xca,_0x2d4a52);}function _0x307f14(_0x4ee286,_0x519844){return _0x2bf539(_0x519844- -0x588,_0x4ee286);}const _0x3e4dc1=(_0x5ed503-this['xmin'])/(this['xmax']-this['xmin'])*(this['cols']-0x1),_0x309333=(this['ymax']-_0x183c8f)/(this['ymax']-this[_0x307f14(-0x21d,-0x1b4)])*(this[_0x5e0a1d(0x48f,0x4ef)]-0x1);return[_0x3e4dc1,_0x309333];}['getUVByXY'](_0x3e042d,_0x56697d){if(_0x3e042d<0x0||_0x3e042d>=this[_0x107c31(-0x6d,-0x15)]||_0x56697d>=this['rows'])return[0x0,0x0,0x0];const _0x68f6a6=Math['floor'](_0x3e042d),_0x4c1915=Math[_0x107c31(-0x22,-0x94)](_0x56697d);function _0x4d37dd(_0x5b108e,_0x217060){return _0x4af14d(_0x217060,_0x5b108e- -0x289);}if(_0x68f6a6===_0x3e042d&&_0x4c1915===_0x56697d)return this['grid'][_0x56697d][_0x3e042d];const _0x4c383f=_0x68f6a6+0x1;function _0x107c31(_0x41e663,_0x376660){return _0x2bf539(_0x376660- -0x4c9,_0x41e663);}const _0x15c1a9=_0x4c1915+0x1,_0x894d6a=this[_0x4d37dd(-0xac,-0x73)](_0x68f6a6,_0x4c1915),_0x53d033=this['getUVByXY'](_0x4c383f,_0x4c1915),_0x34834e=this['getUVByXY'](_0x68f6a6,_0x15c1a9),_0x29d143=this[_0x4d37dd(-0xac,-0x67)](_0x4c383f,_0x15c1a9);let _0x3d5f66=null;try{_0x3d5f66=this['_bilinearInterpolation'](_0x3e042d-_0x68f6a6,_0x56697d-_0x4c1915,_0x894d6a,_0x53d033,_0x34834e,_0x29d143);}catch(_0x29085c){console['log'](_0x3e042d,_0x56697d);}return _0x3d5f66;}['_bilinearInterpolation'](_0x2013a7,_0x1f2ba5,_0x22ac51,_0x45ec3d,_0x3face4,_0x631437){const _0x564193=0x1-_0x2013a7,_0x1404cf=0x1-_0x1f2ba5,_0x3dd887=_0x564193*_0x1404cf,_0x3aece=_0x2013a7*_0x1404cf;function _0x40b0f4(_0x30d610,_0x217bf4){return _0x2bf539(_0x30d610- -0x384,_0x217bf4);}const _0x1e1526=_0x564193*_0x1f2ba5,_0x2b0d19=_0x2013a7*_0x1f2ba5,_0x2c66c5=_0x22ac51[0x0]*_0x3dd887+_0x45ec3d[0x0]*_0x3aece+_0x3face4[0x0]*_0x1e1526+_0x631437[0x0]*_0x2b0d19,_0x1825e1=_0x22ac51[0x1]*_0x3dd887+_0x45ec3d[0x1]*_0x3aece+_0x3face4[0x1]*_0x1e1526+_0x631437[0x1]*_0x2b0d19;return this[_0x40b0f4(0x101,0x15a)](_0x2c66c5,_0x1825e1);}[_0x4af14d(0x298,0x271)](_0x30314f,_0x9aee03){function _0x48228d(_0x47d238,_0x171a96){return _0x2bf539(_0x47d238-0x29,_0x171a96);}return[+_0x30314f,+_0x9aee03,Math[_0x48228d(0x449,0x470)](_0x30314f*_0x30314f+_0x9aee03*_0x9aee03)];}['getUVByPoint'](_0x4b680e,_0xa60c4){if(!this[_0x12b1f8(0x60a,0x5ab)](_0x4b680e,_0xa60c4))return null;const _0x1c6384=this['toGridXY'](_0x4b680e,_0xa60c4);function _0x12b1f8(_0x3743c2,_0x3e074b){return _0x2bf539(_0x3e074b-0x146,_0x3743c2);}const _0x18d37f=this['getUVByXY'](_0x1c6384[0x0],_0x1c6384[0x1]);return _0x18d37f;}[_0x2bf539(0x465,0x4d0)](_0x209e0e,_0x9275d1){return _0x209e0e>=this['xmin']&&_0x209e0e<=this['xmax']&&_0x9275d1>=this['ymin']&&_0x9275d1<=this['ymax']?!![]:![];}[_0x4af14d(0x278,0x263)](){const _0x41a42a=fRandomByfloat(this['xmin'],this[_0x36ce8b(0x20b,0x22f)]);function _0x36ce8b(_0xe0631d,_0x495792){return _0x2bf539(_0x495792- -0x202,_0xe0631d);}function _0x3dfab6(_0x571e82,_0x4d644e){return _0x2bf539(_0x571e82- -0xe6,_0x4d644e);}const _0x3f6ec4=fRandomByfloat(this['ymin'],this[_0x3dfab6(0x369,0x3c3)]),_0x45fcf0={};return _0x45fcf0[_0x36ce8b(0x179,0x1ea)]=_0x3f6ec4,_0x45fcf0['lng']=_0x41a42a,_0x45fcf0;}['getParticles'](){let _0x35c86d,_0x721738,_0x31f78f;function _0x32a9e2(_0x513868,_0x5df950){return _0x2bf539(_0x513868- -0x598,_0x5df950);}for(let _0x53c9ba=0x0,_0x5cc513=this[_0x2dc8f3(0xda,0x7d)]['length'];_0x53c9ba<_0x5cc513;_0x53c9ba++){let _0x2091d5=this['particles'][_0x53c9ba];_0x2091d5['age']<=0x0&&(_0x2091d5=this['_randomParticle'](_0x2091d5));if(_0x2091d5[_0x32a9e2(-0xfd,-0xd3)]>0x0){const _0x114b76=_0x2091d5[_0x32a9e2(-0x1c1,-0x192)],_0x2cc135=_0x2091d5['tlat'];_0x31f78f=this['getUVByPoint'](_0x114b76,_0x2cc135),_0x31f78f?(_0x35c86d=_0x114b76+this['_calc_speedRate'][0x0]*_0x31f78f[0x0],_0x721738=_0x2cc135+this[_0x32a9e2(-0x1a4,-0x157)][0x1]*_0x31f78f[0x1],_0x2091d5['lng']=_0x114b76,_0x2091d5['lat']=_0x2cc135,_0x2091d5[_0x2dc8f3(0x92,0x54)]=_0x35c86d,_0x2091d5['tlat']=_0x721738,_0x2091d5['speed']=_0x31f78f[0x2],_0x2091d5[_0x2dc8f3(0x156,0xf0)]--):_0x2091d5['age']=0x0;}}function _0x2dc8f3(_0x49d95b,_0x2efc47){return _0x2bf539(_0x49d95b- -0x345,_0x2efc47);}return this['particles'];}['_randomParticle'](_0x2bb1c8){let _0x107a48,_0x4bb693;for(let _0x3aec8a=0x0;_0x3aec8a<0x1e;_0x3aec8a++){_0x107a48=this['getRandomLatLng'](),_0x4bb693=this['getUVByPoint'](_0x107a48['lng'],_0x107a48[_0x1eb403(0xa9,0xb6)]);if(_0x4bb693&&_0x4bb693[0x2]>0x0)break;}if(!_0x4bb693)return _0x2bb1c8;const _0x4e19c5=_0x107a48['lng']+this['_calc_speedRate'][0x0]*_0x4bb693[0x0],_0x4f4165=_0x107a48['lat']+this[_0x430a04(0x8d,0x80)][0x1]*_0x4bb693[0x1];_0x2bb1c8['lng']=_0x107a48['lng'];function _0x1eb403(_0x1fbe00,_0x13804d){return _0x4af14d(_0x13804d,_0x1fbe00- -0x12f);}function _0x430a04(_0x365741,_0x31e2fd){return _0x4af14d(_0x31e2fd,_0x365741- -0x153);}return _0x2bb1c8['lat']=_0x107a48[_0x1eb403(0xa9,0xda)],_0x2bb1c8['tlng']=_0x4e19c5,_0x2bb1c8['tlat']=_0x4f4165,_0x2bb1c8[_0x1eb403(0x158,0x11e)]=Math['round'](0xa+Math['random']()*this[_0x430a04(0xe1,0x69)]),_0x2bb1c8[_0x430a04(0xb7,0xe6)]=_0x4bb693[0x2],_0x2bb1c8;}[_0x4af14d(0x1e1,0x1fe)](){for(const _0x4e1a18 in this){delete this[_0x4e1a18];}}}function fRandomByfloat(_0x3a7dbc,_0x26ed27){function _0x474be4(_0xf6a10e,_0x422f65){return _0x2bf539(_0x422f65- -0x457,_0xf6a10e);}return _0x3a7dbc+Math[_0x474be4(-0x2,0x3b)]()*(_0x26ed27-_0x3a7dbc);}const Cesium=mars3d__namespace[_0x2bf539(0x468,0x433)],BaseLayer=mars3d__namespace['layer'][_0x2bf539(0x47a,0x4ab)];class CanvasWindLayer extends BaseLayer{constructor(_0x176014={}){function _0x52a61e(_0x210b34,_0x171f63){return _0x4af14d(_0x210b34,_0x171f63- -0x31);}super(_0x176014),this[_0x52a61e(0x1f1,0x1e9)](_0x176014);function _0x58276e(_0x42f5da,_0x32e000){return _0x4af14d(_0x32e000,_0x42f5da-0x2c);}this[_0x52a61e(0x17a,0x1fe)]=null,_0x176014['colors']&&_0x176014['steps']&&(this[_0x52a61e(0x192,0x19a)]=new mars3d__namespace['ColorRamp'](_0x176014));}[_0x2bf539(0x42e,0x4af)](_0x4e03dc,_0x510a33){this['frameTime']=0x3e8/(_0x4e03dc['frameRate']||0xa);function _0x3cdae9(_0x40b7eb,_0x54a645){return _0x4af14d(_0x54a645,_0x40b7eb- -0xbc);}this[_0x3cdae9(0x151,0x141)]=this['options'][_0x4c8475(-0x12e,-0x12c)]??![],this['color']=_0x4e03dc[_0x4c8475(-0x14e,-0x127)]||'#ffffff';function _0x4c8475(_0x48041a,_0x4ef021){return _0x2bf539(_0x4ef021- -0x504,_0x48041a);}this['lineWidth']=_0x4e03dc['lineWidth']||0x1,this[_0x4c8475(-0x154,-0xee)]=_0x4e03dc['fixedHeight']??0x0,this[_0x3cdae9(0x159,0x1a4)]=_0x4e03dc[_0x3cdae9(0x159,0x1cc)]??![],this['windField']&&this['windField']['setOptions'](_0x4e03dc);}get['layer'](){function _0x48b68a(_0x2fa31e,_0x487db2){return _0x4af14d(_0x2fa31e,_0x487db2- -0x2a3);}return this[_0x48b68a(-0xc9,-0x74)];}get['canvasWidth'](){function _0x515b54(_0x1ff228,_0x14ebbc){return _0x2bf539(_0x14ebbc- -0x392,_0x1ff228);}function _0x3aae7b(_0x30eeef,_0x37f12b){return _0x2bf539(_0x30eeef- -0x351,_0x37f12b);}return this[_0x515b54(0x81,0x41)]['scene']['canvas'][_0x515b54(0x8a,0x8b)];}get[_0x2bf539(0x4a3,0x4af)](){function _0x2fd045(_0x302ec4,_0xd5abbf){return _0x2bf539(_0x302ec4-0x38,_0xd5abbf);}return this['_map']['scene']['canvas'][_0x2fd045(0x48e,0x50b)];}get[_0x2bf539(0x3d8,0x372)](){return this['_pointerEvents'];}set[_0x2bf539(0x3d8,0x3e9)](_0x20a41a){function _0x48de2d(_0x5383b4,_0x420db6){return _0x4af14d(_0x420db6,_0x5383b4-0x5);}this[_0x539987(0x4c,0x41)]=_0x20a41a;if(!this['canvas'])return;function _0x539987(_0x2a8e50,_0x36ed66){return _0x2bf539(_0x36ed66- -0x3e0,_0x2a8e50);}_0x20a41a?this['canvas']['style'][_0x539987(0x33,0xa4)]='all':this[_0x539987(0x74,0x63)][_0x539987(-0x68,0x1b)][_0x539987(0x9c,0xa4)]='none';}get['particlesNumber'](){return this['options']['particlesNumber'];}set['particlesNumber'](_0x22e605){this[_0x40dbe5(0x1e8,0x16d)]['particlesNumber']=_0x22e605,clearTimeout(this[_0x40dbe5(0x294,0x2fe)]);function _0x40dbe5(_0x191e27,_0x4a4bde){return _0x4af14d(_0x4a4bde,_0x191e27-0x32);}function _0x3e8b15(_0x560d96,_0x2d8f5a){return _0x2bf539(_0x2d8f5a- -0x5f6,_0x560d96);}this[_0x40dbe5(0x294,0x316)]=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){return this['options']['speedRate'];}set['speedRate'](_0x53e423){function _0x3b34ed(_0x494ce1,_0x33dbcf){return _0x4af14d(_0x33dbcf,_0x494ce1- -0x215);}function _0x375e73(_0x27728e,_0xc1d83d){return _0x2bf539(_0x27728e- -0x3f9,_0xc1d83d);}this[_0x3b34ed(-0x5f,-0xb7)][_0x3b34ed(-0x68,-0xa7)]=_0x53e423,this['windField']&&(this[_0x375e73(0x74,0x54)][_0x375e73(-0x38,0x4)]=_0x53e423);}get[_0x4af14d(0x241,0x234)](){return this['options']['maxAge'];}set['maxAge'](_0x29eac2){function _0x54047c(_0x27d302,_0x382128){return _0x2bf539(_0x27d302- -0x147,_0x382128);}function _0x5f497e(_0x39cf6c,_0xcda180){return _0x2bf539(_0xcda180- -0x56a,_0x39cf6c);}this[_0x54047c(0x283,0x258)]['maxAge']=_0x29eac2,this[_0x5f497e(-0x121,-0xfd)]&&(this[_0x54047c(0x326,0x323)]['maxAge']=_0x29eac2);}get['data'](){function _0x4fda9b(_0x1c76cf,_0x2e16a9){return _0x4af14d(_0x2e16a9,_0x1c76cf-0x3c1);}return this[_0x4fda9b(0x64e,0x60f)];}set[_0x4af14d(0x1aa,0x1d7)](_0x326d94){function _0xc5da93(_0x2b98b9,_0x278aef){return _0x4af14d(_0x278aef,_0x2b98b9-0x119);}this[_0xc5da93(0x3ba,0x3c0)](_0x326d94);}get[_0x2bf539(0x45f,0x3dc)](){let _0x2d0376=this['windData']['xmin'],_0x4534e4=this[_0x2e0686(0x29b,0x27b)][_0x103aea(0x71,0x1f)],_0x37da01=this[_0x2e0686(0x26a,0x27b)][_0x103aea(0x14,0x1)],_0x828b06=this['windData']['ymax'];function _0x2e0686(_0x1d3816,_0x484bc6){return _0x2bf539(_0x484bc6- -0x226,_0x1d3816);}_0x4534e4>=0x167&&_0x2d0376===0x0&&(_0x2d0376=-0xb4,_0x4534e4=0xb4);function _0x103aea(_0x39b3bd,_0x38158b){return _0x2bf539(_0x39b3bd- -0x3c0,_0x38158b);}return _0x2d0376=Math[_0x2e0686(0x199,0x190)](_0x2d0376,-0xb4),_0x4534e4=Math[_0x2e0686(0x1e2,0x206)](_0x4534e4,0xb4),_0x37da01=Math['max'](_0x37da01,-0x5a),_0x828b06=Math['min'](_0x828b06,0x5a),Cesium[_0x2e0686(0x269,0x246)]['fromDegrees'](_0x2d0376,_0x37da01,_0x4534e4,_0x828b06);}['_showHook'](_0x7aa9ef){function _0x574902(_0xda2467,_0x409688){return _0x4af14d(_0xda2467,_0x409688- -0x3e7);}function _0x1f2099(_0x4e8af9,_0x18fe99){return _0x2bf539(_0x4e8af9-0xbb,_0x18fe99);}_0x7aa9ef?this['_addedHook']():(this['windData']&&(this[_0x1f2099(0x485,0x453)][_0x574902(-0x254,-0x210)]=this[_0x1f2099(0x55c,0x54c)]),this['_removedHook']());}[_0x4af14d(0x1ec,0x1a3)](){function _0x86e6dc(_0x10c8e3,_0xa9ff95){return _0x2bf539(_0x10c8e3- -0x219,_0xa9ff95);}function _0x5262e2(_0x1deef2,_0x2ba030){return _0x2bf539(_0x2ba030- -0x32f,_0x1deef2);}this['options'][_0x5262e2(0x15b,0x13c)]?this['initWorker']():this[_0x86e6dc(0x254,0x1e9)]=new CanvasWindField(this[_0x86e6dc(0x1b1,0x202)]);}['_addedHook'](){this['canvas']=this[_0x533adb(-0x184,-0x118)]();const _0x4d5d3a={};_0x4d5d3a['willReadFrequently']=!![],this[_0x2612b6(0x29e,0x24c)]=this['canvas']['getContext']('2d',_0x4d5d3a),this['bindEvent']();function _0x2612b6(_0x110d53,_0x18ad70){return _0x4af14d(_0x18ad70,_0x110d53-0x6c);}function _0x533adb(_0x5a9dfa,_0x1cda3c){return _0x4af14d(_0x1cda3c,_0x5a9dfa- -0x35d);}this['options']['data']&&this['setData'](this[_0x2612b6(0x222,0x1ee)]['data']);}[_0x4af14d(0x168,0x1d2)](){this[_0x406548(-0x4a,0xe)]();function _0x14fa8c(_0x31b48c,_0x1e58da){return _0x4af14d(_0x31b48c,_0x1e58da- -0x31);}function _0x406548(_0x44064e,_0xe1727c){return _0x2bf539(_0xe1727c- -0x439,_0x44064e);}this[_0x406548(0x22,-0x37)](),this[_0x14fa8c(0x1cf,0x1fe)]&&(this[_0x14fa8c(0x15f,0x18e)][_0x14fa8c(0x170,0x1b0)]['removeChild'](this['canvas']),delete this[_0x14fa8c(0x19c,0x1fe)]);}['_createCanvas'](){const _0x1b3915=mars3d__namespace['DomUtil']['create']('canvas','mars3d-canvasWind',this['_map'][_0x7cda8e(0x548,0x56d)]);_0x1b3915[_0x10bdee(0x152,0x132)][_0x10bdee(0x15c,0x16b)]='absolute';function _0x10bdee(_0x100c0f,_0x1c2642){return _0x4af14d(_0x100c0f,_0x1c2642- -0xb5);}_0x1b3915[_0x7cda8e(0x54e,0x50a)]['top']=_0x7cda8e(0x5e6,0x64d),_0x1b3915[_0x7cda8e(0x54e,0x5d0)][_0x7cda8e(0x519,0x49b)]='0px',_0x1b3915['style'][_0x10bdee(0x195,0x18e)]=this['_map'][_0x7cda8e(0x557,0x5a9)][_0x7cda8e(0x596,0x5e9)]['clientWidth']+'px';function _0x7cda8e(_0x354136,_0x586bb8){return _0x2bf539(_0x354136-0x153,_0x586bb8);}return _0x1b3915['style'][_0x10bdee(0x11d,0x142)]=this['_map']['scene'][_0x10bdee(0x14f,0x17a)][_0x7cda8e(0x5a9,0x5a4)]+'px',_0x1b3915[_0x10bdee(0x1a8,0x132)]['pointerEvents']=this['_pointerEvents']?_0x7cda8e(0x5a6,0x590):'none',_0x1b3915['style'][_0x7cda8e(0x556,0x5cd)]=this[_0x7cda8e(0x51d,0x516)][_0x10bdee(0x127,0x13a)]??0x9,_0x1b3915[_0x7cda8e(0x5aa,0x5fd)]=this['_map']['scene']['canvas']['clientWidth'],_0x1b3915['height']=this['_map']['scene'][_0x10bdee(0x185,0x17a)]['clientHeight'],_0x1b3915;}[_0x2bf539(0x3fd,0x3b6)](){function _0x20962e(_0x503bd3,_0x53ece6){return _0x4af14d(_0x503bd3,_0x53ece6-0x1ad);}function _0x7bdae9(_0x1af8eb,_0x50c204){return _0x2bf539(_0x1af8eb- -0xd,_0x50c204);}this[_0x7bdae9(0x436,0x406)]&&(this[_0x7bdae9(0x436,0x3ed)]['style'][_0x7bdae9(0x44a,0x42f)]=this['_map']['scene'][_0x20962e(0x360,0x3dc)]['clientWidth']+'px',this['canvas'][_0x7bdae9(0x3ee,0x45c)]['height']=this[_0x7bdae9(0x3c6,0x36b)]['scene']['canvas']['clientHeight']+'px',this[_0x7bdae9(0x436,0x496)][_0x20962e(0x3f2,0x3f0)]=this['_map'][_0x7bdae9(0x3f7,0x470)]['canvas']['clientWidth'],this[_0x7bdae9(0x436,0x470)]['height']=this['_map']['scene']['canvas']['clientHeight']);}[_0x4af14d(0x2a3,0x228)](){const _0x5bc4dc=this;let _0x547755=Date['now']();(function _0x242eaa(){function _0x373fe8(_0x28eb82,_0x52e7c5){return _0x4142(_0x52e7c5- -0x79,_0x28eb82);}function _0x446b18(_0x3c61b6,_0x18cc08){return _0x4142(_0x3c61b6- -0x120,_0x18cc08);}if(_0x5bc4dc['isDestroy'])return;_0x5bc4dc[_0x446b18(0x13c,0x1a5)]=window[_0x373fe8(0x115,0x133)](_0x242eaa);if(_0x5bc4dc['show']&&_0x5bc4dc['windField']){const _0x253e2e=Date[_0x373fe8(0x17a,0x1fc)](),_0x5733d2=_0x253e2e-_0x547755;_0x5733d2>_0x5bc4dc[_0x446b18(0x16a,0x1bb)]&&(_0x547755=_0x253e2e-_0x5733d2%_0x5bc4dc['frameTime'],_0x5bc4dc[_0x373fe8(0x1bb,0x22b)]());}}(),window['addEventListener']('resize',this['resize']['bind'](this),![]));function _0x5013a6(_0x29a0a4,_0x1c9a97){return _0x2bf539(_0x1c9a97-0xef,_0x29a0a4);}this['mouse_down']=![],this['mouse_move']=![];function _0x2fb63c(_0x5d72e8,_0x2c0dcc){return _0x4af14d(_0x5d72e8,_0x2c0dcc- -0x1f);}this[_0x5013a6(0x523,0x4b9)]['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x2fb63c(0x1d5,0x1a2)]['wheel'],this['_onMapWhellEvent'],this),this[_0x5013a6(0x4e4,0x4c2)]['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x5013a6(0x4db,0x4f4)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x5013a6(0x496,0x4d9)],this[_0x5013a6(0x52c,0x597)],this));}[_0x2bf539(0x402,0x3ec)](){function _0x18bd3c(_0x5bb01e,_0x4ab734){return _0x2bf539(_0x4ab734- -0x32d,_0x5bb01e);}window[_0x18bd3c(0x109,0xed)](this[_0x18bd3c(0x186,0x143)]),delete this['_animateFrame'];function _0x5c5650(_0x3376ed,_0xd0d60b){return _0x2bf539(_0x3376ed- -0x232,_0xd0d60b);}window['removeEventListener']('resize',this['resize']),this['options']['mouseHidden']&&(this['_map']['off'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace['EventType'][_0x5c5650(0x1c4,0x22a)],this[_0x5c5650(0x1d3,0x218)],this),this[_0x5c5650(0x1a1,0x122)][_0x18bd3c(0x15e,0x17c)](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this[_0x5c5650(0x1a1,0x12b)]['off'](mars3d__namespace['EventType']['mouseMove'],this[_0x18bd3c(0x6e,0x95)],this));}['_onMapWhellEvent'](_0x9b6494){function _0xbe70da(_0x336d2c,_0x5a1ccb){return _0x4af14d(_0x5a1ccb,_0x336d2c-0xb);}clearTimeout(this[_0x515697(0x638,0x623)]);if(!this[_0x515697(0x5a2,0x5e0)]||!this['canvas'])return;function _0x515697(_0x4e5cec,_0x26be7a){return _0x4af14d(_0x4e5cec,_0x26be7a-0x3be);}this['canvas']['style'][_0x515697(0x5f9,0x5f5)]='hidden',this[_0x515697(0x69f,0x623)]=setTimeout(()=>{if(!this[_0x1d8d56(0x49a,0x4e9)])return;this[_0x1d8d56(0x538,0x4d6)]();function _0x525452(_0x3d229d,_0x5553dd){return _0x515697(_0x3d229d,_0x5553dd- -0x798);}function _0x1d8d56(_0x540cfb,_0x389c51){return _0xbe70da(_0x389c51-0x2bc,_0x540cfb);}this['canvas']['style']['visibility']='visible';},0xc8);}['_onMouseDownEvent'](_0x5d7ef7){this[_0x1b31df(0x306,0x2e5)]=!![],this[_0x3982fe(0x450,0x4cb)][_0x1b31df(0x264,0x2de)](mars3d__namespace[_0x3982fe(0x452,0x41d)]['mouseMove'],this[_0x1b31df(0x232,0x1f7)],this);function _0x3982fe(_0x1b12c2,_0x50a48d){return _0x4af14d(_0x50a48d,_0x1b12c2-0x291);}function _0x1b31df(_0x7eb26f,_0x513965){return _0x2bf539(_0x513965- -0x1cb,_0x7eb26f);}this[_0x1b31df(0x19b,0x208)]['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x1b31df(0x23a,0x1f7)],this);}['_onMouseMoveEvent'](_0xd56b62){if(!this['show']||!this[_0x326813(0x1cb,0x1c5)])return;function _0x326813(_0x470ba6,_0x5a223a){return _0x4af14d(_0x5a223a,_0x470ba6- -0x64);}function _0x1903c4(_0x2e5d36,_0x40e923){return _0x2bf539(_0x40e923- -0x7b,_0x2e5d36);}this[_0x1903c4(0x49c,0x435)]&&(this['canvas']['style']['visibility']='hidden',this['mouse_move']=!![]);}[_0x4af14d(0x27a,0x294)](_0x5928cc){if(!this['show']||!this['canvas'])return;this[_0xb8c8d1(0x2c4,0x27f)]['off'](mars3d__namespace[_0x4a594a(-0x1f4,-0x1e7)][_0x4a594a(-0x1fe,-0x203)],this[_0xb8c8d1(0x2b3,0x2c4)],this);this['mouse_down']&&this['mouse_move']&&this['redraw']();this['canvas'][_0x4a594a(-0x1ce,-0x1ba)]['visibility']='visible',this[_0xb8c8d1(0x3a1,0x389)]=![];function _0xb8c8d1(_0x1e22b4,_0x484b78){return _0x4af14d(_0x484b78,_0x1e22b4-0x105);}function _0x4a594a(_0x4dd864,_0x119ad0){return _0x4af14d(_0x119ad0,_0x4dd864- -0x3b5);}this[_0x4a594a(-0x200,-0x20a)]=![];}[_0x2bf539(0x4b5,0x45a)](_0x436011){function _0x2a993e(_0x5d6daa,_0x515155){return _0x4af14d(_0x5d6daa,_0x515155- -0x75);}this['clear'](),this[_0x2a993e(0x19e,0x218)]=_0x436011,this[_0x5c7486(-0x111,-0xa3)]['setDate'](_0x436011);function _0x5c7486(_0x336e25,_0x5353e1){return _0x4af14d(_0x5353e1,_0x336e25- -0x36a);}this[_0x2a993e(0x13e,0x19a)]();}[_0x4af14d(0x252,0x20f)](){function _0xf25bc3(_0x3bcf22,_0x54df47){return _0x4af14d(_0x3bcf22,_0x54df47- -0x3b7);}function _0x1c0f22(_0x54af55,_0x24622b){return _0x2bf539(_0x24622b- -0x4d7,_0x54af55);}if(!this[_0x1c0f22(-0x3b,-0xa1)])return;this[_0xf25bc3(-0x155,-0x15e)][_0xf25bc3(-0x11f,-0x179)](this['options']),this['update']();}['update'](){if(this['_updateIng'])return;function _0x3043f7(_0x36ea42,_0x5d2b54){return _0x4af14d(_0x36ea42,_0x5d2b54-0x14e);}this['_updateIng']=!![];function _0x1f1a09(_0x57f247,_0x2362ff){return _0x2bf539(_0x2362ff- -0x580,_0x57f247);}if(this['worker'])this['windField']['update']();else{const _0x5778d4=this['windField'][_0x1f1a09(-0xf8,-0x14d)]();this[_0x1f1a09(-0x13c,-0x15a)](_0x5778d4);}this[_0x3043f7(0x303,0x33a)]=![];}['_drawLines'](_0x24d04a){this['_canvasParticles']=_0x24d04a,this['canvasContext']['globalCompositeOperation']='destination-in',this['canvasContext'][_0x166966(0x248,0x219)](0x0,0x0,this[_0x166966(0x2c0,0x2a0)],this[_0x166966(0x2dd,0x303)]),this['canvasContext']['globalCompositeOperation']='lighter';function _0x166966(_0x360fb3,_0x40e441){return _0x4af14d(_0x360fb3,_0x40e441-0x74);}this[_0x5ea7bc(0x79,0xf5)]['globalAlpha']=0.9;const _0x2a6b4b=this['_map']['scene']['mode']!==Cesium[_0x5ea7bc(0x25,0x70)]['SCENE3D'],_0x279318=this['canvasWidth']*0.25;function _0x5ea7bc(_0x3d56fe,_0x8d3a5b){return _0x4af14d(_0x8d3a5b,_0x3d56fe- -0x1b9);}if(this[_0x5ea7bc(0x12,-0x4f)])for(let _0x3f7b5f=0x0,_0x162138=_0x24d04a['length'];_0x3f7b5f<_0x162138;_0x3f7b5f++){const _0x31303a=_0x24d04a[_0x3f7b5f],_0x39e94b=this['_tomap'](_0x31303a,_0x31303a[_0x166966(0x2e3,0x299)],_0x31303a['lat'],_0x31303a['alt']),_0x47055b=this['_tomap'](_0x31303a,_0x31303a['tlng'],_0x31303a['tlat'],_0x31303a['talt']);if(!_0x39e94b||!_0x47055b)continue;if(_0x2a6b4b&&Math['abs'](_0x39e94b[0x0]-_0x47055b[0x0])>=_0x279318)continue;this['canvasContext']['beginPath'](),this[_0x5ea7bc(0x79,0x5a)][_0x166966(0x1c4,0x22f)]=this['lineWidth'],this['canvasContext'][_0x5ea7bc(0x3d,0x92)]=this[_0x166966(0x293,0x23f)][_0x5ea7bc(0x0,-0x1d)](_0x31303a[_0x166966(0x2e4,0x27e)]),this[_0x166966(0x30f,0x2a6)]['moveTo'](_0x39e94b[0x0],_0x39e94b[0x1]),this['canvasContext']['lineTo'](_0x47055b[0x0],_0x47055b[0x1]),this['canvasContext'][_0x5ea7bc(0x62,-0x2)]();}else{this['canvasContext'][_0x166966(0x31e,0x2b1)](),this[_0x166966(0x2cf,0x2a6)]['lineWidth']=this['lineWidth'],this[_0x166966(0x263,0x2a6)]['strokeStyle']=this['color'];for(let _0x4e39d6=0x0,_0x405891=_0x24d04a[_0x5ea7bc(-0x18,0x44)];_0x4e39d6<_0x405891;_0x4e39d6++){const _0x212e39=_0x24d04a[_0x4e39d6],_0x39eeb8=this['_tomap'](_0x212e39,_0x212e39[_0x166966(0x278,0x299)],_0x212e39['lat'],_0x212e39[_0x5ea7bc(0xe4,0xc3)]),_0x5b9e45=this['_tomap'](_0x212e39,_0x212e39[_0x5ea7bc(0xa,-0x4)],_0x212e39['tlat'],_0x212e39[_0x166966(0x1b5,0x22e)]);if(!_0x39eeb8||!_0x5b9e45)continue;if(_0x2a6b4b&&Math[_0x166966(0x254,0x230)](_0x39eeb8[0x0]-_0x5b9e45[0x0])>=_0x279318)continue;this['canvasContext']['moveTo'](_0x39eeb8[0x0],_0x39eeb8[0x1]),this[_0x5ea7bc(0x79,0xe7)]['lineTo'](_0x5b9e45[0x0],_0x5b9e45[0x1]);}this['canvasContext'][_0x5ea7bc(0x62,0xba)]();}}['_tomap'](_0x22aa11,_0x398834,_0x468ab3,_0x4d4641){const _0x4cd5de=Cesium['Cartesian3']['fromDegrees'](_0x398834,_0x468ab3,_0x4d4641??this['fixedHeight']),_0x40770d=this[_0xebf9b6(0x219,0x227)]['scene'];function _0xebf9b6(_0x50a94b,_0x533288){return _0x4af14d(_0x50a94b,_0x533288-0x68);}if(_0x40770d[_0xebf9b6(0x33e,0x2f9)]===Cesium['SceneMode']['SCENE3D']){const _0x296c3e=new Cesium['EllipsoidalOccluder'](_0x40770d['globe']['ellipsoid'],_0x40770d['camera'][_0xebf9b6(0x283,0x25d)]),_0x3fcd20=_0x296c3e[_0x1a618c(0x581,0x517)](_0x4cd5de);if(!_0x3fcd20)return _0x22aa11['age']=0x0,null;}const _0x10c0ed=mars3d__namespace['PointTrans']['toWindowCoordinates'](this[_0x1a618c(0x566,0x506)][_0xebf9b6(0x237,0x258)],_0x4cd5de);function _0x1a618c(_0x93c8ed,_0x5b9602){return _0x4af14d(_0x5b9602,_0x93c8ed-0x3a7);}return _0x10c0ed?[_0x10c0ed['x'],_0x10c0ed['y']]:null;}['clear'](){function _0x534772(_0x2ce6a5,_0x2c31ac){return _0x2bf539(_0x2ce6a5- -0xf9,_0x2c31ac);}this[_0x534772(0x374,0x395)][_0x4b0ff5(0x21,0x89)]();function _0x4b0ff5(_0x1ecb82,_0x74cc12){return _0x4af14d(_0x1ecb82,_0x74cc12- -0x1aa);}delete this[_0x4b0ff5(0x96,0xe3)];}['initWorker'](){this['worker']=new Worker(this['options']['worker']),this['worker']['onmessage']=_0x31390f=>{this['_drawLines'](_0x31390f['data']['particles']),this['_updateIng2']=![];};function _0x1003b2(_0xba912d,_0x2c6158){return _0x2bf539(_0x2c6158- -0x360,_0xba912d);}this[_0x92ab5b(0x3a8,0x35a)]={'init':_0x235e2a=>{const _0x2b4141={};function _0x4aefed(_0x31d411,_0x3216b5){return _0x92ab5b(_0x31d411,_0x3216b5- -0x462);}function _0x20b803(_0x2d298d,_0x50ead7){return _0x92ab5b(_0x2d298d,_0x50ead7-0x1f7);}_0x2b4141['type']=_0x20b803(0x4a4,0x4fb),_0x2b4141[_0x4aefed(-0x18b,-0x1ab)]=_0x235e2a,this[_0x4aefed(-0x177,-0x10a)][_0x4aefed(-0x1a9,-0x186)](_0x2b4141);},'setOptions':_0x200ede=>{function _0x7dd663(_0x4c96cc,_0x20f46b){return _0x92ab5b(_0x20f46b,_0x4c96cc-0x252);}function _0x48ae0c(_0x56dbd5,_0xf52141){return _0x92ab5b(_0x56dbd5,_0xf52141-0x1f7);}const _0xc35527={};_0xc35527['type']=_0x48ae0c(0x54b,0x536),_0xc35527['options']=_0x200ede,this['worker'][_0x48ae0c(0x4dd,0x4d3)](_0xc35527);},'setDate':_0x1cb71e=>{const _0x35e9fc={};_0x35e9fc[_0x452ac5(0x4bb,0x530)]='setDate',_0x35e9fc[_0xa9b7fa(0x36b,0x3c3)]=_0x1cb71e;function _0x452ac5(_0x32ebc0,_0x394245){return _0x92ab5b(_0x394245,_0x32ebc0-0x118);}function _0xa9b7fa(_0x4d9465,_0x29d779){return _0x92ab5b(_0x4d9465,_0x29d779-0xeb);}this[_0x452ac5(0x470,0x469)][_0xa9b7fa(0x436,0x3c7)](_0x35e9fc);},'update':()=>{if(this[_0xfe1b20(0x4bb,0x518)])return;this[_0x1499ac(0x8d,0x14)]=!![];const _0x5f316e={};_0x5f316e['type']='update';function _0xfe1b20(_0x3a7f37,_0x5cb67e){return _0x92ab5b(_0x5cb67e,_0x3a7f37-0x1f0);}function _0x1499ac(_0x490627,_0x437663){return _0x92ab5b(_0x437663,_0x490627- -0x23e);}this['worker'][_0x1499ac(0x9e,0x86)](_0x5f316e);},'clear':()=>{function _0x4afb10(_0x5e6447,_0x22f429){return _0x92ab5b(_0x5e6447,_0x22f429- -0xb5);}const _0x7b21ed={};_0x7b21ed['type']=_0x4afb10(0x230,0x27f),this['worker']['postMessage'](_0x7b21ed);}};function _0x92ab5b(_0x4a054b,_0x47190f){return _0x2bf539(_0x47190f- -0x113,_0x4a054b);}this[_0x92ab5b(0x2db,0x35a)][_0x1003b2(0x50,0xb7)](this['options']);}}mars3d__namespace['LayerUtil']['register']('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports[_0x2bf539(0x4a2,0x4bf)]=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x3895c6={};_0x3895c6['value']=!![],Object[_0x2bf539(0x3da,0x44e)](exports,'__esModule',_0x3895c6);
}));
