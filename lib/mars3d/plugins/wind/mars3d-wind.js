/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.8.10
 * 编译日期：2024-12-11 21:54
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-08-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x411775,_0x8b9d5d){const _0x27355d=_0x411775();function _0x1b5ee7(_0x4c0979,_0x699664){return _0xeda3(_0x699664-0x30f,_0x4c0979);}function _0x49b99a(_0x31a306,_0x158930){return _0xeda3(_0x158930- -0x26d,_0x31a306);}while(!![]){try{const _0x253dab=-parseInt(_0x49b99a(-0xaf,-0xae))/0x1+parseInt(_0x49b99a(-0x102,-0x96))/0x2+-parseInt(_0x1b5ee7(0x59e,0x51a))/0x3*(-parseInt(_0x49b99a(-0x63,-0xad))/0x4)+parseInt(_0x1b5ee7(0x4c0,0x4ba))/0x5+parseInt(_0x1b5ee7(0x4e2,0x47d))/0x6*(-parseInt(_0x49b99a(0x31,-0x16))/0x7)+parseInt(_0x1b5ee7(0x5cd,0x582))/0x8+parseInt(_0x49b99a(0x78,-0x3))/0x9;if(_0x253dab===_0x8b9d5d)break;else _0x27355d['push'](_0x27355d['shift']());}catch(_0x481a1e){_0x27355d['push'](_0x27355d['shift']());}}}(_0xcd6d,0x51523));function _interopNamespace(_0x73f7b){if(_0x73f7b&&_0x73f7b['__esModule'])return _0x73f7b;var _0x573b32=Object['create'](null);return _0x73f7b&&Object['keys'](_0x73f7b)['forEach'](function(_0x39cb07){function _0x5aedad(_0x25f51c,_0x2bcb5a){return _0xeda3(_0x2bcb5a-0x90,_0x25f51c);}function _0x588f47(_0x43e699,_0x1a76cb){return _0xeda3(_0x43e699- -0x36b,_0x1a76cb);}if(_0x39cb07!=='default'){var _0x44afe3=Object['getOwnPropertyDescriptor'](_0x73f7b,_0x39cb07);Object[_0x5aedad(0x2f3,0x2ec)](_0x573b32,_0x39cb07,_0x44afe3[_0x588f47(-0x12c,-0x16e)]?_0x44afe3:{'enumerable':!![],'get':function(){return _0x73f7b[_0x39cb07];}});}}),_0x573b32['default']=_0x73f7b,_0x573b32;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace[_0x48c3f5(-0x40,-0x49)];function getU(_0x246d9b,_0x35bdfd){const _0x1e3a0c=_0x246d9b*Math['cos'](Cesium$2['Math'][_0x4b18c1(0x4d9,0x50b)](_0x35bdfd));function _0x4b18c1(_0x2f30fa,_0x11935a){return _0x48c3f5(_0x11935a,_0x2f30fa-0x5cb);}return _0x1e3a0c;}function getV(_0x160037,_0x503e62){const _0x19a323=_0x160037*Math['sin'](Cesium$2['Math']['toRadians'](_0x503e62));return _0x19a323;}function getSpeed(_0x5427e3,_0x2aeb19){const _0x4fc903=Math['sqrt'](Math['pow'](_0x5427e3,0x2)+Math['pow'](_0x2aeb19,0x2));return _0x4fc903;}function getDirection(_0x228aa8,_0x5c6500){let _0x2b5256=Cesium$2[_0x8454e8(0xba,0xc3)][_0x8454e8(0xb2,0x6d)](Math['atan2'](_0x5c6500,_0x228aa8));function _0x1260d6(_0x33afdf,_0x42aa14){return _0x48c3f5(_0x33afdf,_0x42aa14-0x31c);}function _0x8454e8(_0x5a9a48,_0x425891){return _0x48c3f5(_0x425891,_0x5a9a48-0x15d);}return _0x2b5256+=_0x2b5256<0x0?0x168:0x0,_0x2b5256;}const _0x4e6dc6={};_0x4e6dc6['__proto__']=null,_0x4e6dc6[_0x48c3f5(-0xbc,-0x114)]=getU;function _0x237aef(_0x3fb386,_0x3c19d8){return _0xeda3(_0x3c19d8- -0x2ac,_0x3fb386);}_0x4e6dc6['getV']=getV,_0x4e6dc6[_0x48c3f5(-0x10c,-0x11c)]=getSpeed,_0x4e6dc6[_0x48c3f5(-0x113,-0xe1)]=getDirection;function _0xeda3(_0x5c304a,_0x2cc1f4){const _0xcd6d3c=_0xcd6d();return _0xeda3=function(_0xeda3cd,_0x4d681d){_0xeda3cd=_0xeda3cd-0x164;let _0x211628=_0xcd6d3c[_0xeda3cd];return _0x211628;},_0xeda3(_0x5c304a,_0x2cc1f4);}function _0xcd6d(){const _0x2192b4=['createColorTableTexture','tlat','ymax','canvas','isPointVisible','pass','initFrameRate','pixelSize','CanvasWindField','ColorRamp','width','mouse_down','pointerEvents','auto','commandToExecute','hasOwnProperty','max','show','fromGeometry','306271vduJSy','_removedHook','_pointerEvents','unbindEvent','frameState.commandList\x20is\x20undefined','defineProperty','flipY','domain','off','xmax','lighter','fromCssColorString','udata','west','dynamic','CanvasWindLayer','hidden','LINEAR','frameTime','1090512UIeymL','#ffffff','particles','createPrimitives','commandType','steps','options','north','preExecute','458208hISSpg','register','tlng','random','frameRateMonitor','ellipsoid','DomUtil','none','getSpeed','persists','max\x20is\x20undefined,\x20calculate\x20max','createCommand','FLOAT','dropRate','frameRateAdjustment','framebuffers','getU','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','78ZMMBnu','push','grid','_speedRate','morphComplete','speedRate','nextParticlesPosition','fill','forEach','getDataAtLonLat','array','__esModule','updateViewerParameters','removeEventListener','sources','textures','particleHeight','redraw','viewerParameters','createRenderingTextures','RED','isDestroy','latRange','_calc_speedRate','beginPath','isInExtent','createSegmentsGeometry','outputTexture','attributeLocations','onmessage','onColorTableChange','pointer-events','toRadians','maxAge','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a','framebuffer','Cartesian2','fromDegrees','RGBA','canvasContext','resize','uniformMap','mouse_move','_bilinearInterpolation','refreshTimer','bounds','clientHeight','updateWindData','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','getDirection','primitiveType','min','xmin','windData','layer','slice','rows','warn','updateOptions','_updateIng2','mouseDown','1022310eeFNQn','visible','calculateSpeed','speedFactor','ymin','computing','useViewerBounds','particlesSpeed','floor','rendering','isDynamic','windField','vmax','sceneMode','_updateIng','cancelAnimationFrame','camera','lineWidth','_onMouseDownEvent','getUpdatePositionShader','498515hbUlou','264832EYoLFI','EventType','_onMouseUpEvent','create','pixelDatatype','zIndex','_drawLines','minificationFilter','rawRenderState','cols','data','container','vertexShaderSource','0px','createRenderingFramebuffers','position','mouseHidden','_tomap','_map','alt','umax','toDegrees','addEventListener','1108066MTYPOj','particlesTextures','_addedHook','particlesNumber','_animateFrame','particleSystem','Math','particlesTextureSize','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','bufferUsage','createParticlesTextures','wrapS','getParticles','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','error','canvasWind','geometry','bind','lng','vertexArray','autoClear','fragmentShaderSource','destroy','modelMatrix','type','toGridXY','now','globalCompositeOperation','_maxAge','_canvasParticles','globalAlpha','setData','frameRate','positionWC','vdata','height','bindEvent','owner','vmin','top','age','drawingBufferWidth','changeOptions','clear','blending','color','WindUtil','style','init','postMessage','fromCache','windTextures','21LjJaum','length','segmentsColor','Draw','getDefaultRenderState','canvasWidth','SCENE3D','displayRange','worker','green','getRandomLatLng','primitives','updatePosition','mouseMove','particlesTextureSize\x20must\x20be\x20greater\x20than\x200','fixedHeight','getPostProcessingPositionShader','reverseY','commandList','getUVByPoint','context','STATIC_DRAW','mouseUp','interpolated','previousParticlesPosition','colorTable','speed','talt','PointTrans','south','setGeometry','DEPTH_COMPONENT','_colorRamp','setDate','processWindData','clientWidth','ONE_MINUS_SRC_ALPHA','rgb(206,255,255)','globe','east','keys','lonRange','scene','onParticlesTextureSizeChange','Cesium','segmentsDepth','depthTexture','currentParticlesPosition','WindLayer','sqrt','setOptions','lat','get','values','Compute','_onMouseMoveEvent','colors'];_0xcd6d=function(){return _0x2192b4;};return _0xcd6d();}var WindUtil=_0x4e6dc6,updatePositionShader=_0x237aef(-0x113,-0x11c),calculateSpeedShader=_0x48c3f5(-0xba,-0x113),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader=_0x237aef(-0x17b,-0x10e),renderParticlesVertexShader=_0x237aef(-0xaf,-0xc8);const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x48c3f5(-0x7e,-0x49)];class ShaderManager{static['getCalculateSpeedShader'](){const _0x5ec085={};return _0x5ec085['sources']=[calculateSpeedShader],new ShaderSource$1(_0x5ec085);}static[_0x237aef(-0xab,-0xee)](){const _0x4e998f={};return _0x4e998f['sources']=[updatePositionShader],new ShaderSource$1(_0x4e998f);}static['getSegmentDrawVertexShader'](){function _0x26f4c4(_0x42f14e,_0x4cc8c5){return _0x48c3f5(_0x42f14e,_0x4cc8c5- -0x4);}const _0x15b537={};return _0x15b537[_0x26f4c4(-0x17b,-0x108)]=[renderParticlesVertexShader],new ShaderSource$1(_0x15b537);}static['getSegmentDrawFragmentShader'](){const _0x594506={};return _0x594506['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0x594506);}static['getPostProcessingPositionShader'](){const _0x3c2ebf={};return _0x3c2ebf['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x3c2ebf);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defaultValue,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x3f3c80){this['commandType']=_0x3f3c80[_0x1e0075(0x323,0x360)],this['geometry']=_0x3f3c80['geometry'],this[_0x2bb667(0x2dc,0x2a1)]=_0x3f3c80['attributeLocations'],this[_0x1e0075(0x255,0x1dc)]=_0x3f3c80[_0x2bb667(0x29f,0x2b7)],this['uniformMap']=_0x3f3c80['uniformMap']||{},this['vertexShaderSource']=_0x3f3c80[_0x2bb667(0x2c9,0x2e3)],this['fragmentShaderSource']=_0x3f3c80['fragmentShaderSource'],this[_0x1e0075(0x27d,0x252)]=_0x3f3c80[_0x2bb667(0x269,0x2df)],this[_0x1e0075(0x246,0x1fb)]=_0x3f3c80[_0x1e0075(0x246,0x250)],this['outputTexture']=_0x3f3c80['outputTexture'],this[_0x1e0075(0x2a0,0x286)]=defaultValue(_0x3f3c80['autoClear'],![]);function _0x2bb667(_0x4046d6,_0xee0ad){return _0x237aef(_0x4046d6,_0xee0ad-0x3c3);}function _0x1e0075(_0x1d33ea,_0x4f51b0){return _0x48c3f5(_0x4f51b0,_0x1d33ea-0x335);}this[_0x2bb667(0x3a5,0x389)]=_0x3f3c80['preExecute'],this['show']=!![],this[_0x1e0075(0x307,0x2e2)]=undefined,this['clearCommand']=undefined,this[_0x1e0075(0x26a,0x2f2)]=_0x3f3c80['isDynamic']??(()=>!![]),this[_0x1e0075(0x2a0,0x237)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x2bb667(0x2c3,0x2a8)],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x1b1e35){function _0x1e8105(_0x54dc63,_0x1ba3a1){return _0x48c3f5(_0x1ba3a1,_0x54dc63-0xf7);}function _0x3df5c2(_0x3a9f48,_0x2497c9){return _0x48c3f5(_0x2497c9,_0x3a9f48-0x520);}if(this['commandType']===_0x3df5c2(0x4ae,0x424)){const _0x4011c4={};_0x4011c4[_0x1e8105(0x96,0x8f)]=_0x1b1e35,_0x4011c4['geometry']=this['geometry'],_0x4011c4[_0x3df5c2(0x42a,0x43a)]=this[_0x1e8105(0x1,0x5a)],_0x4011c4['bufferUsage']=BufferUsage$1[_0x1e8105(0x97,0x12)];const _0x354d74=VertexArray$1[_0x3df5c2(0x4f6,0x4f5)](_0x4011c4),_0xa54447={};_0xa54447[_0x3df5c2(0x4bf,0x46c)]=_0x1b1e35,_0xa54447['vertexShaderSource']=this['vertexShaderSource'],_0xa54447['fragmentShaderSource']=this['fragmentShaderSource'],_0xa54447['attributeLocations']=this[_0x3df5c2(0x42a,0x4a3)];const _0x1270ac=ShaderProgram['fromCache'](_0xa54447),_0x4dc8a3=RenderState[_0x3df5c2(0x4a9,0x4cb)](this[_0x3df5c2(0x468,0x416)]),_0x1af5e9={};return _0x1af5e9[_0x1e8105(0x73,0x43)]=this,_0x1af5e9[_0x1e8105(0x61,0x9e)]=_0x354d74,_0x1af5e9[_0x1e8105(0x17,0x66)]=this['primitiveType'],_0x1af5e9[_0x3df5c2(0x48e,0x45b)]=Matrix4['IDENTITY'],_0x1af5e9['renderState']=_0x4dc8a3,_0x1af5e9['shaderProgram']=_0x1270ac,_0x1af5e9['framebuffer']=this['framebuffer'],_0x1af5e9[_0x1e8105(0xe,-0x22)]=this['uniformMap'],_0x1af5e9[_0x3df5c2(0x4e9,0x477)]=Pass$1['OPAQUE'],new DrawCommand(_0x1af5e9);}else{if(this['commandType']==='Compute'){const _0x541cc1={};return _0x541cc1['owner']=this,_0x541cc1[_0x3df5c2(0x48c,0x484)]=this['fragmentShaderSource'],_0x541cc1[_0x3df5c2(0x437,0x458)]=this['uniformMap'],_0x541cc1[_0x1e8105(0x0,0x61)]=this['outputTexture'],_0x541cc1[_0x3df5c2(0x405,0x417)]=!![],new ComputeCommand(_0x541cc1);}else throw new Error('Unknown\x20command\x20type');}}[_0x237aef(-0x74,-0x83)](_0x29f239,_0x4b64a9){this[_0x4119bc(0x328,0x2bb)]=_0x4b64a9;function _0x4119bc(_0x4f25a9,_0x4daa35){return _0x237aef(_0x4daa35,_0x4f25a9-0x3ed);}function _0x18cb67(_0x57f760,_0x112dae){return _0x237aef(_0x112dae,_0x57f760-0x4cc);}defined(this['commandToExecute'])&&(this['commandToExecute'][_0x18cb67(0x40a,0x48b)]=VertexArray$1[_0x18cb67(0x476,0x4cb)]({'context':_0x29f239,'geometry':this[_0x18cb67(0x407,0x3ea)],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x523c88){function _0x28280e(_0x54fc13,_0x5683f4){return _0x237aef(_0x54fc13,_0x5683f4-0x4a6);}if(!this['isDynamic']())return;if(!this[_0x110c76(-0x28,0x27)]||!defined(_0x523c88))return;!defined(this['commandToExecute'])&&(this[_0x28280e(0x4a8,0x44c)]=this[_0x28280e(0x35e,0x361)](_0x523c88['context']));defined(this['preExecute'])&&this[_0x110c76(-0xb,-0x55)]();if(!_0x523c88[_0x110c76(-0x60,0x29)]){console[_0x110c76(-0xd6,-0xe4)](_0x28280e(0x4d3,0x455));return;}defined(this['clearCommand'])&&_0x523c88['commandList']['push'](this['clearCommand']);function _0x110c76(_0x4d8156,_0xb4025f){return _0x237aef(_0xb4025f,_0x4d8156-0x2f);}defined(this[_0x28280e(0x497,0x44c)])&&_0x523c88['commandList'][_0x28280e(0x3b2,0x369)](this['commandToExecute']);}['isDestroyed'](){return![];}['destroy'](){if(defined(this['commandToExecute'])){var _0x2b91fa;(_0x2b91fa=this['commandToExecute']['shaderProgram'])===null||_0x2b91fa===void 0x0||_0x2b91fa['destroy'](),this['commandToExecute']['shaderProgram']=undefined;}return destroyObject(this);}}function deepMerge(_0x1eecc5,_0x41c3bc){if(!_0x1eecc5)return _0x41c3bc;if(!_0x41c3bc)return _0x1eecc5;function _0x20ad49(_0x44423a,_0x4fa06d){return _0x48c3f5(_0x44423a,_0x4fa06d-0x177);}const _0x4a98cb={..._0x41c3bc};function _0x1199f1(_0x116b6e,_0x36da37){return _0x48c3f5(_0x116b6e,_0x36da37-0x4ea);}const _0x3cafe9=_0x4a98cb;for(const _0x8de046 in _0x1eecc5){if(Object['prototype'][_0x20ad49(0x152,0x14a)]['call'](_0x1eecc5,_0x8de046)){const _0x360dca=_0x1eecc5[_0x8de046],_0x304ebc=_0x41c3bc[_0x8de046];if(Array['isArray'](_0x360dca)){_0x3cafe9[_0x8de046]=_0x360dca[_0x20ad49(0x116,0x9c)]();continue;}if(_0x360dca&&typeof _0x360dca==='object'){_0x3cafe9[_0x8de046]=deepMerge(_0x360dca,_0x304ebc||{});continue;}_0x360dca!==undefined&&(_0x3cafe9[_0x8de046]=_0x360dca);}}return _0x3cafe9;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace[_0x237aef(-0xa2,-0x75)];class WindParticlesComputing{constructor(_0x15c636,_0x18c8f1,_0x522f58,_0x1e9052,_0xc27812){this[_0x1eedf9(0x28,0x41)]=_0x15c636,this[_0x1eedf9(0x79,0x6f)]=_0x522f58,this['viewerParameters']=_0x1e9052;function _0x598b2e(_0x18512d,_0x31f33a){return _0x237aef(_0x31f33a,_0x18512d-0x2c4);}this['windData']=_0x18c8f1,this['frameRate']=0x3c,this['frameRateAdjustment']=0x1;const _0x3b7852={};function _0x1eedf9(_0x58f973,_0x1272b2){return _0x48c3f5(_0x1272b2,_0x58f973-0x89);}_0x3b7852['scene']=_0xc27812,_0x3b7852['samplingWindow']=0x1,_0x3b7852['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x3b7852),this['initFrameRate'](),this['createWindTextures'](),this['createParticlesTextures'](),this['createComputingPrimitives']();}[_0x48c3f5(0x2f,-0x36)](){const _0x3dd622=()=>{function _0x974e40(_0x416d25,_0x49ab0d){return _0xeda3(_0x416d25-0x3bc,_0x49ab0d);}function _0x50d27d(_0x3c3939,_0x188750){return _0xeda3(_0x3c3939-0x1d,_0x188750);}this[_0x974e40(0x633,0x686)]['lastFramesPerSecond']>0x14&&(this[_0x974e40(0x5b3,0x559)]=this[_0x974e40(0x633,0x5c4)]['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math[_0x974e40(0x610,0x697)](this['frameRate'],0x1));};_0x3dd622();function _0x338980(_0x583a40,_0x24bb81){return _0x237aef(_0x583a40,_0x24bb81-0x2cd);}function _0x2b1cf1(_0x41a76c,_0x48c468){return _0x48c3f5(_0x41a76c,_0x48c468-0x2f);}const _0x40b485=setInterval(_0x3dd622,0x3e8),_0x206dd5=this['destroy'][_0x2b1cf1(-0x77,-0x69)](this);this[_0x338980(0x245,0x20e)]=()=>{clearInterval(_0x40b485),_0x206dd5();};}['createWindTextures'](){const _0x5b5816={};_0x5b5816[_0x54394d(0x3f1,0x3f5)]=TextureMinificationFilter$1[_0x54394d(0x45d,0x496)],_0x5b5816['magnificationFilter']=TextureMagnificationFilter$1[_0x54394d(0x4f0,0x496)];function _0x46cc9a(_0x4eaafb,_0x3f1c63){return _0x237aef(_0x4eaafb,_0x3f1c63-0x3f5);}function _0x54394d(_0xc7004,_0x12b2d4){return _0x237aef(_0xc7004,_0x12b2d4-0x4da);}const _0x28151c={'context':this['context'],'width':this['windData'][_0x54394d(0x431,0x47c)],'height':this[_0x54394d(0x43a,0x3d1)][_0x46cc9a(0x31e,0x343)],'pixelFormat':PixelFormat$1[_0x54394d(0x388,0x3b0)],'pixelDatatype':PixelDatatype$1[_0x54394d(0x33e,0x396)],'flipY':this['options']['flipY']??![],'sampler':new Sampler$1(_0x5b5816)};this['windTextures']={'U':new Texture$1({..._0x28151c,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x28151c,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}[_0x48c3f5(-0x1e,-0x9f)](){function _0x17dbe5(_0x54396a,_0x3cebd8){return _0x48c3f5(_0x54396a,_0x3cebd8- -0x89);}const _0x5be03d={};_0x5be03d[_0x5a395a(-0xe9,-0xda)]=TextureMinificationFilter$1['NEAREST'],_0x5be03d['magnificationFilter']=TextureMagnificationFilter$1['NEAREST'];const _0x47c5e0={'context':this['context'],'width':this['options'][_0x17dbe5(-0xa1,-0x12b)],'height':this[_0x17dbe5(-0x104,-0x99)][_0x5a395a(-0xfd,-0xc3)],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this[_0x5a395a(0x9,-0x31)][_0x17dbe5(-0xb4,-0x12b)]*0x4)[_0x5a395a(-0xce,-0x12c)](0x0)},'sampler':new Sampler$1(_0x5be03d)};function _0x5a395a(_0x3e561c,_0x3e017c){return _0x48c3f5(_0x3e561c,_0x3e017c- -0x21);}this[_0x17dbe5(-0xd0,-0x131)]={'previousParticlesPosition':new Texture$1(_0x47c5e0),'currentParticlesPosition':new Texture$1(_0x47c5e0),'nextParticlesPosition':new Texture$1(_0x47c5e0),'postProcessingPosition':new Texture$1(_0x47c5e0),'particlesSpeed':new Texture$1(_0x47c5e0)};}['destroyParticlesTextures'](){function _0x53b514(_0x4113e5,_0xd29300){return _0x237aef(_0x4113e5,_0xd29300- -0xd4);}function _0x42ebc2(_0x5144c1,_0x30fe08){return _0x48c3f5(_0x30fe08,_0x5144c1-0x332);}Object['values'](this[_0x53b514(-0x19c,-0x1a8)])['forEach'](_0x2cd901=>_0x2cd901[_0x42ebc2(0x29f,0x297)]());}['createComputingPrimitives'](){function _0x25df04(_0x59b06a,_0x3d0d99){return _0x48c3f5(_0x3d0d99,_0x59b06a-0x103);}function _0x27b45f(_0x187c2e,_0x59145d){return _0x237aef(_0x187c2e,_0x59145d-0x5b3);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x25df04(0xc4,0x77),'uniformMap':{'U':()=>this[_0x27b45f(0x560,0x511)]['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x27b45f(0x50c,0x4a8)],this[_0x27b45f(0x47f,0x4aa)]['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x27b45f(0x52e,0x4a8)],this['windData']['v'][_0x25df04(0xd7,0x53)]),'speedRange':()=>new Cartesian2$1(this[_0x25df04(0x26,0x9c)]['speed']['min'],this[_0x25df04(0x26,0x74)]['speed']['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x4ed4f8(_0x185b18,_0x32bd78){return _0x27b45f(_0x185b18,_0x32bd78- -0x3ef);}function _0x9d2616(_0x16f0b6,_0x4076ae){return _0x25df04(_0x4076ae- -0xda,_0x16f0b6);}return(this[_0x9d2616(-0x108,-0xd7)][_0x4ed4f8(0xd8,0x163)]+0x32)*this['options'][_0x9d2616(-0x129,-0xa9)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this['windData'][_0x25df04(0xd1,0xf2)],this[_0x25df04(0x26,0x41)]['height']),'minimum':()=>new Cartesian2$1(this['windData']['bounds'][_0x25df04(0xe7,0x77)],this['windData']['bounds']['south']),'maximum':()=>new Cartesian2$1(this['windData']['bounds']['east'],this[_0x25df04(0x26,-0x47)][_0x27b45f(0x4a5,0x4a2)]['north'])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x27b45f(0x563,0x4df)]['particlesSpeed'],'preExecute':()=>{const _0x410cf4=this['particlesTextures']['previousParticlesPosition'];this[_0x3c5904(0x557,0x535)][_0x249598(0x20e,0x1b1)]=this['particlesTextures'][_0x3c5904(0x5b9,0x575)],this['particlesTextures']['currentParticlesPosition']=this[_0x3c5904(0x557,0x511)]['postProcessingPosition'],this['particlesTextures']['postProcessingPosition']=_0x410cf4;function _0x249598(_0x49440d,_0x151003){return _0x25df04(_0x49440d-0x168,_0x151003);}function _0x3c5904(_0x1f45c8,_0x5f4724){return _0x25df04(_0x1f45c8-0x4fc,_0x5f4724);}this[_0x3c5904(0x595,0x59e)]['calculateSpeed']['commandToExecute']&&(this['primitives'][_0x3c5904(0x52c,0x581)]['commandToExecute']['outputTexture']=this['particlesTextures'][_0x249598(0x19d,0x224)]);},'isDynamic':()=>this[_0x25df04(0xf3,0x90)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures'][_0x25df04(0xbd,0x3e)],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this[_0x25df04(0x5b,0xd2)]['nextParticlesPosition'],'preExecute':()=>{function _0x2eac1a(_0x493092,_0x503821){return _0x25df04(_0x493092- -0x15,_0x503821);}function _0x25a94b(_0x687613,_0x368ae1){return _0x25df04(_0x687613-0x1ce,_0x368ae1);}this['primitives']['updatePosition']['commandToExecute']&&(this[_0x25a94b(0x267,0x211)]['updatePosition'][_0x25a94b(0x2a3,0x2d9)][_0x2eac1a(-0x9,0x5d)]=this[_0x25a94b(0x229,0x287)]['nextParticlesPosition']);},'isDynamic':()=>this[_0x25df04(0xf3,0xfb)]['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this['particlesTextures'][_0x25df04(-0x9,-0x7f)],'particlesSpeed':()=>this['particlesTextures'][_0x27b45f(0x45d,0x4b9)],'lonRange':()=>this[_0x27b45f(0x48a,0x487)][_0x27b45f(0x5bf,0x53b)],'latRange':()=>this[_0x25df04(0x3,0x59)][_0x25df04(0x7,0x3e)],'dataLonRange':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds'][_0x25df04(0xb5,0x2f)]),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds']['south'],this[_0x27b45f(0x470,0x4aa)][_0x27b45f(0x4eb,0x4a2)]['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this[_0x27b45f(0x556,0x577)][_0x27b45f(0x407,0x470)],'dropRateBump':()=>this['options']['dropRateBump'],'useViewerBounds':()=>this[_0x25df04(0xf3,0xbe)][_0x25df04(0x34,0xaa)]},'fragmentShaderSource':ShaderManager[_0x25df04(0x9e,0x10c)](),'outputTexture':this[_0x25df04(0x5b,0x10)]['postProcessingPosition'],'preExecute':()=>{function _0x3aef67(_0x766840,_0x5e6c4f){return _0x25df04(_0x766840-0x515,_0x5e6c4f);}function _0x249602(_0x47ccdf,_0x27899){return _0x27b45f(_0x27899,_0x47ccdf- -0xa5);}this[_0x3aef67(0x5ae,0x567)]['postProcessingPosition']['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0x3aef67(0x5ea,0x629)][_0x3aef67(0x521,0x593)]=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this['options'][_0x25df04(0xe8,0x172)]})};}['reCreateWindTextures'](){this['windTextures']['U'][_0x4ece5d(0x1c2,0x1f3)]();function _0x4ece5d(_0x5e8b6b,_0x3833d7){return _0x48c3f5(_0x3833d7,_0x5e8b6b-0x255);}this['windTextures']['V']['destroy'](),this['createWindTextures']();}[_0x48c3f5(-0x60,-0xe3)](_0x2d722c){this[_0x2536b0(0x13d,0x17e)]=_0x2d722c;function _0x2536b0(_0x369395,_0x484003){return _0x237aef(_0x369395,_0x484003-0x287);}this['reCreateWindTextures']();}['updateOptions'](_0x38ca5f){const _0xf5a3e1=_0x38ca5f['flipY']!==undefined&&_0x38ca5f[_0xbb5afb(0x79,0x3b)]!==this[_0xbb5afb(0x8c,0x7d)]['flipY'];this['options']=deepMerge(_0x38ca5f,this['options']);function _0xbb5afb(_0x26ea8f,_0x889c0d){return _0x237aef(_0x889c0d,_0x26ea8f-0xc8);}function _0x166bca(_0x31d561,_0x3554de){return _0x237aef(_0x31d561,_0x3554de-0x33f);}_0xf5a3e1&&this['reCreateWindTextures']();}[_0x237aef(-0xd1,-0x7f)](_0x423871){const {array:_0x467d4c}=_0x423871;function _0x638135(_0x8ffb6c,_0x17cb7f){return _0x237aef(_0x8ffb6c,_0x17cb7f-0x693);}let {min:_0x13be2d,max:_0x9698e1}=_0x423871;const _0x8e4afd=new Float32Array(_0x467d4c['length']);_0x13be2d===undefined&&(console[_0x638135(0x55b,0x58e)]('min\x20is\x20undefined,\x20calculate\x20min'),_0x13be2d=Math['min'](..._0x467d4c));_0x9698e1===undefined&&(console[_0x638135(0x519,0x58e)](_0x638135(0x4e8,0x54d)),_0x9698e1=Math[_0x3e9477(0x62e,0x5a5)](..._0x467d4c));const _0x3ef225=Math[_0x638135(0x608,0x63b)](Math['abs'](_0x13be2d),Math['abs'](_0x9698e1));for(let _0x3118d2=0x0;_0x3118d2<_0x467d4c['length'];_0x3118d2++){const _0x5efefd=_0x467d4c[_0x3118d2]/_0x3ef225;_0x8e4afd[_0x3118d2]=_0x5efefd;}function _0x3e9477(_0x3aab0f,_0x157567){return _0x237aef(_0x3aab0f,_0x157567-0x5fd);}return _0x8e4afd;}['destroy'](){function _0x1d23ab(_0x24b8f4,_0x409ea0){return _0x48c3f5(_0x24b8f4,_0x409ea0-0x649);}Object[_0x4dd459(0x239,0x275)](this['windTextures'])[_0x1d23ab(0x52d,0x53f)](_0x20bd88=>_0x20bd88['destroy']()),Object[_0x1d23ab(0x5d8,0x609)](this[_0x4dd459(0x1e3,0x20d)])['forEach'](_0x307616=>_0x307616[_0x1d23ab(0x583,0x5b6)]()),Object[_0x1d23ab(0x5ae,0x609)](this[_0x1d23ab(0x5fd,0x5df)])[_0x4dd459(0x182,0x1ab)](_0x322e96=>_0x322e96['destroy']());function _0x4dd459(_0x466dea,_0x387321){return _0x48c3f5(_0x466dea,_0x387321-0x2b5);}this['frameRateMonitor'][_0x4dd459(0x299,0x222)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x44c2cc,_0x205588,_0x1782c6,_0x114db9){this['context']=_0x44c2cc;function _0x5cc743(_0x147f85,_0x36b384){return _0x237aef(_0x147f85,_0x36b384-0x3c6);}this['options']=_0x205588,this['viewerParameters']=_0x1782c6,this['computing']=_0x114db9;function _0x55c06f(_0x118f4e,_0x2e6809){return _0x48c3f5(_0x118f4e,_0x2e6809-0x2b8);}(typeof this[_0x5cc743(0x31e,0x38a)]['particlesTextureSize']!=='number'||this['options']['particlesTextureSize']<=0x0)&&(console[_0x55c06f(0x1b4,0x21d)](_0x5cc743(0x308,0x2f9)),this['options']['particlesTextureSize']=0x100),this['colorTable']=this[_0x55c06f(0x20a,0x27c)](),this['textures']=this[_0x5cc743(0x2c0,0x29b)](),this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this[_0x5cc743(0x31a,0x387)]();}[_0x237aef(-0xd4,-0x12b)](){const _0x286131={};_0x286131['context']=this[_0x518f65(0x1cb,0x16c)],_0x286131['width']=this['context']['drawingBufferWidth'],_0x286131[_0x4a70c6(0x52d,0x504)]=this['context']['drawingBufferHeight'],_0x286131['pixelFormat']=PixelFormat['RGBA'];function _0x4a70c6(_0x24b360,_0x37b3a3){return _0x237aef(_0x37b3a3,_0x24b360-0x5df);}_0x286131[_0x518f65(0x170,0x151)]=PixelDatatype['UNSIGNED_BYTE'];const _0x2c1040=_0x286131,_0x40d57b={};_0x40d57b[_0x518f65(0x1cb,0x15e)]=this['context'],_0x40d57b[_0x4a70c6(0x581,0x5d5)]=this[_0x4a70c6(0x552,0x597)][_0x518f65(0x1ac,0x210)],_0x40d57b['height']=this[_0x518f65(0x1cb,0x1a3)]['drawingBufferHeight'],_0x40d57b['pixelFormat']=PixelFormat[_0x4a70c6(0x55d,0x508)];function _0x518f65(_0x12052b,_0x5ebdbb){return _0x48c3f5(_0x5ebdbb,_0x12052b-0x22c);}_0x40d57b['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x2a3d1b=_0x40d57b;return{'segmentsColor':new Texture(_0x2c1040),'segmentsDepth':new Texture(_0x2a3d1b)};}[_0x237aef(-0x143,-0xde)](){function _0x58b9bc(_0x578388,_0x3052f7){return _0x48c3f5(_0x3052f7,_0x578388-0x329);}const _0x58249a={};_0x58249a['context']=this['context'],_0x58249a['colorTextures']=[this[_0xd7ed16(0xc5,0x12a)][_0xd7ed16(0x155,0xf6)]];function _0xd7ed16(_0x31e9d1,_0x242fb2){return _0x48c3f5(_0x242fb2,_0x31e9d1-0x1c8);}return _0x58249a[_0xd7ed16(0x181,0x129)]=this[_0x58b9bc(0x226,0x1a5)][_0xd7ed16(0x180,0x10e)],{'segments':new Framebuffer(_0x58249a)};}['destoryRenderingFramebuffers'](){Object['values'](this['framebuffers'])['forEach'](_0x576bad=>{function _0x497cd7(_0x4eb18c,_0x19e721){return _0xeda3(_0x4eb18c-0x1bf,_0x19e721);}_0x576bad[_0x497cd7(0x3ac,0x3d9)]();});}[_0x237aef(-0xf2,-0x68)](){const _0x19062a=new Float32Array(this['options'][_0x27eac6(0x253,0x28a)]['flatMap'](_0x227bd9=>{function _0x3ab3a6(_0x38f323,_0x21ae1a){return _0x27eac6(_0x21ae1a,_0x38f323- -0xce);}function _0x9275ee(_0x521c51,_0x51c5ae){return _0x27eac6(_0x521c51,_0x51c5ae- -0x419);}const _0xd9264e=Color$1[_0x3ab3a6(0x1db,0x1fd)](_0x227bd9);return[_0xd9264e['red'],_0xd9264e[_0x3ab3a6(0x18d,0x1ef)],_0xd9264e['blue'],_0xd9264e['alpha']];}));function _0x2c9bc9(_0x4002c6,_0x2328de){return _0x48c3f5(_0x4002c6,_0x2328de-0x566);}const _0xba090a={};_0xba090a[_0x2c9bc9(0x503,0x4ad)]=TextureMinificationFilter[_0x2c9bc9(0x4cd,0x54e)],_0xba090a['magnificationFilter']=TextureMagnificationFilter[_0x27eac6(0x290,0x2af)],_0xba090a[_0x27eac6(0x1c9,0x229)]=TextureWrap['CLAMP_TO_EDGE'],_0xba090a['wrapT']=TextureWrap['CLAMP_TO_EDGE'];function _0x27eac6(_0x4b4ec1,_0x190e4b){return _0x48c3f5(_0x4b4ec1,_0x190e4b-0x2c7);}return new Texture({'context':this['context'],'width':this[_0x2c9bc9(0x56a,0x556)]['colors'][_0x27eac6(0x267,0x253)],'height':0x1,'pixelFormat':PixelFormat[_0x2c9bc9(0x4b4,0x47a)],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0xba090a),'source':{'width':this['options']['colors']['length'],'height':0x1,'arrayBufferView':_0x19062a}});}['createSegmentsGeometry'](){const _0x28f62d=0x4;function _0x14c8cc(_0x35b241,_0x32ea4){return _0x237aef(_0x32ea4,_0x35b241-0x22a);}function _0x30e38f(_0x7b0b28,_0x41e057){return _0x48c3f5(_0x7b0b28,_0x41e057-0x5b2);}const _0x278933=this[_0x30e38f(0x5d3,0x5a2)]['particlesTextureSize'];let _0x2027ce=[];for(let _0x199842=0x0;_0x199842<_0x278933;_0x199842++){for(let _0x582cfb=0x0;_0x582cfb<_0x278933;_0x582cfb++){for(let _0x294155=0x0;_0x294155<_0x28f62d;_0x294155++){_0x2027ce['push'](_0x199842/_0x278933),_0x2027ce[_0x30e38f(0x429,0x4a1)](_0x582cfb/_0x278933);}}}_0x2027ce=new Float32Array(_0x2027ce);const _0x5d2bbb=this[_0x14c8cc(0x1ee,0x16f)][_0x14c8cc(0x15c,0x178)]**0x2;let _0x5ec84e=[];for(let _0xb966f4=0x0;_0xb966f4<_0x5d2bbb;_0xb966f4++){_0x5ec84e[_0x30e38f(0x477,0x4a1)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x5ec84e=new Float32Array(_0x5ec84e);let _0x4b42be=[];for(let _0xf4dc06=0x0,_0x84005e=0x0;_0xf4dc06<_0x5d2bbb;_0xf4dc06++){_0x4b42be[_0x14c8cc(0xed,0x8a)](_0x84005e+0x0,_0x84005e+0x1,_0x84005e+0x2,_0x84005e+0x2,_0x84005e+0x1,_0x84005e+0x3),_0x84005e+=_0x28f62d;}_0x4b42be=new Uint32Array(_0x4b42be);const _0x2c97bb={};_0x2c97bb['componentDatatype']=ComponentDatatype[_0x30e38f(0x4f8,0x49a)],_0x2c97bb['componentsPerAttribute']=0x2,_0x2c97bb['values']=_0x2027ce;const _0x483233={};_0x483233['componentDatatype']=ComponentDatatype[_0x30e38f(0x518,0x49a)],_0x483233['componentsPerAttribute']=0x3,_0x483233['values']=_0x5ec84e;const _0x5085cb=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x2c97bb),'normal':new GeometryAttribute(_0x483233)}),'indices':_0x4b42be});return _0x5085cb;}['createRawRenderState'](_0x5119fd){const _0x2b47b3={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x5119fd};function _0x332bac(_0x4d90f5,_0x5f4c47){return _0x48c3f5(_0x5f4c47,_0x4d90f5-0x190);}return Appearance[_0x332bac(0x11f,0x155)](!![],![],_0x2b47b3);}['createPrimitives'](){const _0x463704={};_0x463704['st']=0x0,_0x463704['normal']=0x1;const _0x4c4b2f={};_0x4c4b2f['enabled']=!![];const _0x5c783b={};_0x5c783b['enabled']=!![],_0x5c783b['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x5c783b['blendFuncSource']=WebGLRenderingContext['SRC_ALPHA'],_0x5c783b['blendFuncDestination']=WebGLRenderingContext[_0x212e34(0x4c3,0x444)];function _0x212e34(_0x196eb2,_0x243358){return _0x48c3f5(_0x243358,_0x196eb2-0x514);}function _0x127878(_0x5974f0,_0x18dd14){return _0x237aef(_0x5974f0,_0x18dd14-0x1d4);}const _0x532085={};_0x532085['viewport']=undefined,_0x532085['depthTest']=_0x4c4b2f,_0x532085['depthMask']=!![],_0x532085[_0x212e34(0x497,0x464)]=_0x5c783b;const _0x179e4b=new CustomPrimitive({'commandType':_0x127878(0xfa,0x136),'attributeLocations':_0x463704,'geometry':this[_0x212e34(0x41c,0x4a6)](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0x127878(0x123,0xd8)]['particlesTextures'][_0x127878(0xd8,0x162)],'postProcessingPosition':()=>this['computing'][_0x127878(0x183,0x100)]['postProcessingPosition'],'particlesSpeed':()=>this['computing'][_0x127878(0x15c,0x100)]['particlesSpeed'],'frameRateAdjustment':()=>this['computing'][_0x212e34(0x3fe,0x419)],'colorTable':()=>this[_0x212e34(0x4b8,0x538)],'domain':()=>{function _0x4d78ca(_0x4589a6,_0x2e82f7){return _0x127878(_0x4589a6,_0x2e82f7- -0x2e5);}function _0x321260(_0x5ec1a5,_0x3e42c2){return _0x127878(_0x3e42c2,_0x5ec1a5- -0x20e);}var _0x47380c,_0x5e5aeb;const _0x51b7ea=new Cartesian2(((_0x47380c=this[_0x4d78ca(-0x17d,-0x14d)][_0x321260(-0x88,-0x7d)])===null||_0x47380c===void 0x0?void 0x0:_0x47380c['min'])??this[_0x4d78ca(-0x275,-0x20d)]['windData']['speed'][_0x321260(-0x145,-0xe6)],((_0x5e5aeb=this[_0x321260(-0x76,-0xed)]['domain'])===null||_0x5e5aeb===void 0x0?void 0x0:_0x5e5aeb['max'])??this[_0x4d78ca(-0x22c,-0x20d)]['windData']['speed']['max']);return _0x51b7ea;},'displayRange':()=>{var _0x72c21a,_0x253240;function _0x249f02(_0x3b2c6c,_0x16f47a){return _0x212e34(_0x3b2c6c- -0x2b5,_0x16f47a);}const _0x231832=new Cartesian2(((_0x72c21a=this['options']['displayRange'])===null||_0x72c21a===void 0x0?void 0x0:_0x72c21a[_0x249f02(0x180,0x14a)])??this['computing']['windData']['speed']['min'],((_0x253240=this[_0x249f02(0x24f,0x2ba)][_0x249f02(0x1f1,0x193)])===null||_0x253240===void 0x0?void 0x0:_0x253240['max'])??this[_0x249f02(0x18f,0x16e)][_0x249f02(0x182,0x1ef)]['speed']['max']);function _0x414947(_0x25785f,_0x2740c1){return _0x127878(_0x2740c1,_0x25785f- -0x1a8);}return _0x231832;},'particleHeight':()=>this[_0x127878(0x123,0x198)][_0x127878(0xf0,0xa6)]||0x0,'aspect':()=>this[_0x127878(0x128,0x147)]['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this[_0x127878(0xe8,0xa8)]['pixelSize'],'lineWidth':()=>{const _0x3b61d2={};function _0x5b03dd(_0x3f652f,_0x57ae4e){return _0x212e34(_0x3f652f- -0x350,_0x57ae4e);}_0x3b61d2['min']=0x1,_0x3b61d2['max']=0x2;function _0x22c919(_0x32de30,_0x1098ca){return _0x212e34(_0x32de30-0x132,_0x1098ca);}const _0x117f29=this['options'][_0x22c919(0x582,0x55e)]||_0x3b61d2;return new Cartesian2(_0x117f29[_0x22c919(0x567,0x4fc)],_0x117f29[_0x5b03dd(0x198,0x1e9)]);},'lineLength':()=>{function _0x35a05a(_0x333b48,_0x1bb426){return _0x127878(_0x333b48,_0x1bb426-0x2a7);}const _0x1fe996={};_0x1fe996[_0x35a05a(0x384,0x370)]=0x14,_0x1fe996['max']=0x64;function _0x58029f(_0x1d452d,_0x4139bc){return _0x127878(_0x4139bc,_0x1d452d- -0x18c);}const _0x4c1c35=this[_0x58029f(0xc,-0x54)]['lineLength']||_0x1fe996;return new Cartesian2(_0x4c1c35['min'],_0x4c1c35['max']);},'is3D':()=>this['viewerParameters']['sceneMode']===SceneMode['SCENE3D'],'segmentsDepthTexture':()=>this['textures'][_0x212e34(0x4cc,0x556)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x532085)}),_0x4e53e9={};return _0x4e53e9['segments']=_0x179e4b,_0x4e53e9;}['onParticlesTextureSizeChange'](){function _0x5054e0(_0x4940ae,_0xfd886){return _0x48c3f5(_0x4940ae,_0xfd886-0x575);}const _0x45fe00=this[_0x38a961(0x442,0x4b9)]();this[_0x5054e0(0x539,0x50b)]['segments']['geometry']=_0x45fe00;const _0x522b14={};_0x522b14['context']=this[_0x38a961(0x4d9,0x4ad)],_0x522b14[_0x38a961(0x4a1,0x49f)]=_0x45fe00,_0x522b14[_0x5054e0(0x455,0x47f)]=this['primitives']['segments'][_0x5054e0(0x402,0x47f)],_0x522b14[_0x5054e0(0x4e9,0x4d5)]=BufferUsage['STATIC_DRAW'];const _0x104659=VertexArray[_0x5054e0(0x505,0x54b)](_0x522b14);function _0x38a961(_0x7f4125,_0xcc176f){return _0x48c3f5(_0xcc176f,_0x7f4125-0x53a);}this[_0x5054e0(0x549,0x50b)]['segments']['commandToExecute']&&(this['primitives']['segments']['commandToExecute']['vertexArray']=_0x104659);}[_0x237aef(-0x136,-0x120)](){function _0x2c00bc(_0x51d0a8,_0x55bd4c){return _0x237aef(_0x55bd4c,_0x51d0a8-0x4db);}this['colorTable'][_0x2c00bc(0x41c,0x3fb)](),this['colorTable']=this['createColorTableTexture']();}[_0x237aef(-0x15d,-0x104)](_0x2e9583){const _0x2d515f=_0x2e9583['colors']&&JSON['stringify'](_0x2e9583[_0xb72c6c(-0x185,-0x1ff)])!==JSON['stringify'](this[_0x1b1cdd(-0xb7,-0x5a)][_0x1b1cdd(-0x52,-0x87)]);function _0xb72c6c(_0x532cd9,_0x2f4dd5){return _0x48c3f5(_0x2f4dd5,_0x532cd9- -0x148);}this['options']=deepMerge(_0x2e9583,this['options']);function _0x1b1cdd(_0x498912,_0x44bd23){return _0x237aef(_0x498912,_0x44bd23- -0x1e);}_0x2d515f&&this[_0xb72c6c(-0x23c,-0x1d9)]();}['destroy'](){Object['values'](this[_0x4fbda7(-0x235,-0x2ba)])['forEach'](_0x438710=>{_0x438710['destroy']();});function _0x4fbda7(_0xe45240,_0x189ab8){return _0x237aef(_0x189ab8,_0xe45240- -0xf4);}Object['values'](this['primitives'])['forEach'](_0x2b8f76=>{function _0x46528d(_0x3bf95e,_0x19061d){return _0x4fbda7(_0x19061d-0x92,_0x3bf95e);}_0x2b8f76[_0x46528d(-0x11c,-0x121)]();}),this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x27043c,_0x58e97c,_0x40379c,_0x2a4bdf,_0x564093){this[_0x2d405b(0x41,0x95)]=_0x27043c,this['options']=_0x40379c,this['viewerParameters']=_0x2a4bdf;function _0x2d405b(_0x2b4945,_0x19181c){return _0x48c3f5(_0x19181c,_0x2b4945-0xa2);}this['computing']=new WindParticlesComputing(_0x27043c,_0x58e97c,_0x40379c,_0x2a4bdf,_0x564093);function _0x58ab35(_0x535f75,_0x413f0a){return _0x237aef(_0x535f75,_0x413f0a-0x379);}this[_0x2d405b(-0x2a,0x42)]=new WindParticlesRendering(_0x27043c,_0x40379c,_0x2a4bdf,this['computing']),this['clearFramebuffers']();}['getPrimitives'](){const _0x39608b=[this[_0x24f6a3(0x2ed,0x2dd)]['primitives']['calculateSpeed'],this[_0x43bfeb(-0x42,-0x56)]['primitives'][_0x24f6a3(0x354,0x3a3)],this[_0x43bfeb(0x12,-0x56)]['primitives']['postProcessingPosition'],this['rendering']['primitives']['segments']];function _0x43bfeb(_0x3c5e81,_0x5b368e){return _0x237aef(_0x3c5e81,_0x5b368e-0xa6);}function _0x24f6a3(_0x5997fd,_0x3503bf){return _0x237aef(_0x3503bf,_0x5997fd-0x3e9);}return _0x39608b;}['clearFramebuffers'](){function _0x12182a(_0x4178cd,_0x502097){return _0x48c3f5(_0x502097,_0x4178cd-0x222);}function _0x592d56(_0x166433,_0x6a22a7){return _0x48c3f5(_0x166433,_0x6a22a7-0x1c);}const _0x3abde7=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});Object[_0x12182a(0x1d5,0x1ef)](this['rendering'][_0x592d56(-0xe5,-0xf9)])['forEach'](_0x2f4213=>{_0x3abde7['framebuffer']=this['rendering']['framebuffers'][_0x2f4213],_0x3abde7['execute'](this['context']);});}[_0x48c3f5(0x3,-0x7f)](_0x2a4611){let _0x2af453=![];_0x2a4611['particlesTextureSize']&&this['options'][_0x5a1fc8(0x3a5,0x422)]!==_0x2a4611['particlesTextureSize']&&(_0x2af453=!![]);const _0x196de8=deepMerge(_0x2a4611,this['options']);if(_0x196de8[_0x5a1fc8(0x3a5,0x3b2)]<0x1)throw new Error(_0x5a1fc8(0x3e0,0x44c));this[_0x1e2b1b(0x37,0x44)]=_0x196de8;function _0x5a1fc8(_0xfbf720,_0x46e647){return _0x48c3f5(_0x46e647,_0xfbf720-0x447);}this[_0x1e2b1b(-0x84,-0x78)][_0x5a1fc8(0x36f,0x334)](_0x2a4611),this['computing']['updateOptions'](_0x2a4611);function _0x1e2b1b(_0x505bec,_0x4b8806){return _0x237aef(_0x505bec,_0x4b8806-0x80);}_0x2af453&&(this['computing']['destroyParticlesTextures'](),this[_0x1e2b1b(-0xc8,-0x7c)]['createParticlesTextures'](),this['rendering'][_0x5a1fc8(0x3fd,0x427)]());}['applyViewerParameters'](_0x1ce496){function _0x423645(_0x9147eb,_0x402d8d){return _0x48c3f5(_0x402d8d,_0x9147eb-0x396);}function _0x1b0ea8(_0x972e65,_0x2fb031){return _0x48c3f5(_0x2fb031,_0x972e65-0x59e);}this['viewerParameters']=_0x1ce496,this[_0x423645(0x2c6,0x265)][_0x1b0ea8(0x49e,0x4a3)]=_0x1ce496,this[_0x423645(0x2ca,0x320)]['viewerParameters']=_0x1ce496;}[_0x237aef(-0x102,-0xbf)](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace[_0x48c3f5(0x3b,-0x49)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x5991d8={};_0x5991d8['min']=0x1,_0x5991d8[_0x48c3f5(0x53,-0x2c)]=0x2;const _0x549be7={};_0x549be7['min']=0x14,_0x549be7['max']=0x64;const _0x46792f={};_0x46792f['particlesTextureSize']=0x64,_0x46792f[_0x237aef(-0xd2,-0x12e)]=0x3e8,_0x46792f[_0x237aef(-0x162,-0xf0)]=_0x5991d8,_0x46792f['lineLength']=_0x549be7,_0x46792f['speedFactor']=0x1,_0x46792f['dropRate']=0.003,_0x46792f['dropRateBump']=0.001,_0x46792f[_0x48c3f5(0x3e,-0x3d)]=[_0x237aef(-0xfa,-0x7c)],_0x46792f['flipY']=![],_0x46792f['dynamic']=!![];const DEF_OPTIONS=_0x46792f;class WindLayer extends BaseLayer$1{constructor(_0x4ba6d3={}){_0x4ba6d3={...DEF_OPTIONS,..._0x4ba6d3},super(_0x4ba6d3),this['_setOptionsHook'](_0x4ba6d3,_0x4ba6d3);}get['layer'](){function _0xf98358(_0x34d376,_0x1d6c37){return _0x48c3f5(_0x1d6c37,_0x34d376-0x19f);}return this[_0xf98358(0x135,0x1a1)];}get['data'](){return this['options']['data'];}set['data'](_0x49fab2){this[_0x4da5b2(0x50a,0x539)]['data']=_0x49fab2;function _0x4da5b2(_0x5aada2,_0x138df0){return _0x237aef(_0x138df0,_0x5aada2-0x546);}this['setData'](_0x49fab2);}get[_0x237aef(-0x13,-0x69)](){function _0x180c80(_0x55a643,_0x256807){return _0x48c3f5(_0x55a643,_0x256807-0x24);}return this[_0x180c80(-0x1d,0x14)]['colors'];}set[_0x48c3f5(-0x46,-0x3d)](_0x2018ed){this[_0x27efe8(0x4d0,0x512)]['colors']=_0x2018ed;const _0x3a59fd={};function _0x27efe8(_0x5b89ed,_0x590365){return _0x48c3f5(_0x5b89ed,_0x590365-0x522);}_0x3a59fd['colors']=_0x2018ed,this['_setOptionsHook'](this['options'],_0x3a59fd);}['_mountedHook'](){}[_0x237aef(-0x132,-0xd3)](){this['scene']=this[_0x400da8(0x286,0x271)]['scene'];function _0x400da8(_0x58a360,_0x2a3722){return _0x48c3f5(_0x58a360,_0x2a3722-0x31f);}this['camera']=this['_map']['camera'];this['options']['data']&&this['setData'](this['options'][_0x4f14c3(0x547,0x5a9)]);if(!this['windData'])return;this[_0x4f14c3(0x4fd,0x483)]={'lonRange':new Cesium$1[(_0x400da8(0x296,0x231))](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters'](),this[_0x400da8(0x229,0x27b)]=new WindParticleSystem(this['scene']['context'],this['windData'],this[_0x4f14c3(0x5ed,0x60d)],this['viewerParameters'],this['scene']),this['primitives']=this['particleSystem']['getPrimitives']();function _0x4f14c3(_0x27b6b7,_0x42dadc){return _0x48c3f5(_0x42dadc,_0x27b6b7-0x5fd);}this['primitives']['forEach'](_0xd10f18=>{function _0x2d8651(_0x17de8c,_0x7136f2){return _0x4f14c3(_0x17de8c- -0x341,_0x7136f2);}this[_0x2d8651(0x271,0x269)]['primitives']['add'](_0xd10f18);}),this[_0x4f14c3(0x538,0x592)]['percentageChanged']=0.01,this['camera']['changed'][_0x4f14c3(0x553,0x5b6)](this['updateViewerParameters'][_0x400da8(0x2a4,0x287)](this)),this['scene'][_0x4f14c3(0x4ef,0x53c)]['addEventListener'](this[_0x400da8(0x1e9,0x219)]['bind'](this)),window['addEventListener'](_0x400da8(0x241,0x235),this['updateViewerParameters'][_0x4f14c3(0x565,0x531)](this));}[_0x48c3f5(0x56,-0x28)](){this[_0xf51e35(0x2bd,0x2e1)]['changed'][_0x3a8ed0(0x10b,0x134)](this['updateViewerParameters']['bind'](this)),this['scene']['morphComplete'][_0x3a8ed0(0x10b,0xa6)](this[_0xf51e35(0x25b,0x2a0)][_0x3a8ed0(0x178,0x163)](this)),window['removeEventListener']('resize',this[_0x3a8ed0(0x10a,0x115)]['bind'](this));function _0x3a8ed0(_0x471a14,_0x2406a1){return _0x48c3f5(_0x2406a1,_0x471a14-0x210);}this[_0xf51e35(0x387,0x33c)]&&(this['primitives']['forEach'](_0x457e64=>{function _0x448c8d(_0x4bb14d,_0x3ec0bc){return _0x3a8ed0(_0x3ec0bc-0x6b,_0x4bb14d);}this['scene'][_0x448c8d(0x1f8,0x211)]['remove'](_0x457e64);}),delete this[_0xf51e35(0x372,0x33c)]);function _0xf51e35(_0x45c36a,_0x128545){return _0x48c3f5(_0x45c36a,_0x128545-0x3a6);}this[_0xf51e35(0x29b,0x302)]&&(this['particleSystem'][_0xf51e35(0x2aa,0x313)](),delete this['particleSystem']);}[_0x237aef(-0x3c,-0xb6)](_0x5af131,_0x39f015){function _0x6284bf(_0x8f5983,_0x4da1e6){return _0x237aef(_0x8f5983,_0x4da1e6- -0xd);}function _0x26b4d8(_0x31de0e,_0x3ab867){return _0x237aef(_0x31de0e,_0x3ab867-0x52);}this['windData']=this[_0x6284bf(-0x116,-0x8c)](_0x5af131);if(_0x39f015){this[_0x26b4d8(-0x1c,-0x2)](),this['_addedHook']();return;}this['particleSystem']?(this['particleSystem']['computing'][_0x6284bf(-0x117,-0x11c)](this[_0x6284bf(-0x17a,-0x116)]),this['scene']['requestRender']()):this[_0x6284bf(-0x8e,-0xe0)]();}['_setOptionsHook'](_0x14dea8,_0x503075){function _0x12bdd3(_0x268e27,_0x37300d){return _0x48c3f5(_0x268e27,_0x37300d-0x29e);}function _0x18a68f(_0x27277a,_0x38c799){return _0x48c3f5(_0x38c799,_0x27277a-0x3d6);}this[_0x12bdd3(0x203,0x1fa)]&&(this['particleSystem'][_0x18a68f(0x357,0x32b)](_0x503075),this[_0x12bdd3(0x20e,0x253)]['requestRender']());}['processWindData'](_0x1b75e0){var _0x59518b,_0x4f758c;function _0x509278(_0x40c51b,_0x5dc57f){return _0x48c3f5(_0x40c51b,_0x5dc57f-0xe3);}const _0x20606d={..._0x1b75e0},_0x373fb2=_0x20606d;function _0x2c8b58(_0x1a29ee,_0x370a33){return _0x237aef(_0x1a29ee,_0x370a33-0x3e6);}!_0x373fb2['height']&&_0x373fb2[_0x2c8b58(0x287,0x2e0)]&&(_0x373fb2['height']=_0x373fb2['rows']);!_0x373fb2['width']&&_0x373fb2[_0x509278(-0x5c,0x2c)]&&(_0x373fb2['width']=_0x373fb2['cols']);!_0x373fb2[_0x509278(0x1f,-0x2)]&&(_0x373fb2[_0x2c8b58(0x2e2,0x2d5)]={'west':_0x373fb2[_0x509278(-0x30,0x5)],'south':_0x373fb2['ymin'],'east':_0x373fb2[_0x509278(0x8a,0xc3)],'north':_0x373fb2[_0x509278(0xa5,0xa9)]});if(!_0x373fb2['u']){const _0x1006f0={};_0x1006f0['array']=_0x1b75e0[_0x2c8b58(0x3ad,0x39d)],_0x1006f0[_0x509278(0x3,0x4)]=_0x1b75e0['umin'],_0x1006f0['max']=_0x1b75e0[_0x509278(0x80,0x37)],_0x373fb2['u']=_0x1006f0;}if(!_0x373fb2['v']){const _0x2820aa={};_0x2820aa['array']=_0x1b75e0[_0x2c8b58(0x35c,0x333)],_0x2820aa['min']=_0x1b75e0[_0x509278(-0xc,0x60)],_0x2820aa['max']=_0x1b75e0[_0x2c8b58(0x310,0x2f1)],_0x373fb2['v']=_0x2820aa;}if(((_0x59518b=_0x373fb2[_0x509278(0xbc,0x88)])===null||_0x59518b===void 0x0?void 0x0:_0x59518b['min'])===undefined||((_0x4f758c=_0x373fb2[_0x509278(0x10f,0x88)])===null||_0x4f758c===void 0x0?void 0x0:_0x4f758c[_0x2c8b58(0x3b6,0x38e)])===undefined||_0x373fb2[_0x509278(0xf1,0x88)][_0x509278(-0x21,-0x25)]===undefined){const _0x42d437={'array':new Float32Array(_0x373fb2['u'][_0x2c8b58(0x2af,0x2b2)][_0x509278(0xe6,0x6f)]),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0xb0ac33=0x0;_0xb0ac33<_0x373fb2['u']['array']['length'];_0xb0ac33++){_0x42d437[_0x509278(0x24,-0x25)][_0xb0ac33]=Math[_0x2c8b58(0x38a,0x376)](_0x373fb2['u']['array'][_0xb0ac33]*_0x373fb2['u'][_0x509278(-0x1a,-0x25)][_0xb0ac33]+_0x373fb2['v']['array'][_0xb0ac33]*_0x373fb2['v'][_0x509278(0x49,-0x25)][_0xb0ac33]),_0x42d437[_0x509278(-0x51,-0x25)][_0xb0ac33]!==0x0&&(_0x42d437['min']=Math['min'](_0x42d437['min'],_0x42d437['array'][_0xb0ac33]),_0x42d437['max']=Math['max'](_0x42d437['max'],_0x42d437['array'][_0xb0ac33]));}_0x373fb2[_0x2c8b58(0x2ff,0x35f)]=_0x42d437;}return _0x373fb2;}['updateViewerParameters'](){var _0x4e354d;const _0x1b3d43=this['scene'],_0x148ee9=_0x1b3d43[_0x240243(-0xb1,-0xf8)],_0xa73b31={};_0xa73b31['x']=0x0,_0xa73b31['y']=0x0;const _0x2946cf={};_0x2946cf['x']=0x0,_0x2946cf['y']=_0x148ee9['clientHeight'];function _0x364b54(_0x4445ee,_0x251c3f){return _0x48c3f5(_0x251c3f,_0x4445ee-0x1d5);}const _0x37fb84={};_0x37fb84['x']=_0x148ee9[_0x364b54(0x183,0x1e3)],_0x37fb84['y']=0x0;function _0x240243(_0x3dd2b1,_0x5f0ea8){return _0x237aef(_0x3dd2b1,_0x5f0ea8- -0x93);}const _0x6e5ab1={};_0x6e5ab1['x']=_0x148ee9['clientWidth'],_0x6e5ab1['y']=_0x148ee9['clientHeight'];const _0xa4becb=[_0xa73b31,_0x2946cf,_0x37fb84,_0x6e5ab1];let _0x3e9691=0xb4,_0xa55841=-0xb4,_0x53ed91=0x5a,_0x181b44=-0x5a,_0xd69085=![];for(const _0x3cdc4a of _0xa4becb){const _0x5736b2=_0x1b3d43['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x3cdc4a['x'],_0x3cdc4a['y']),_0x1b3d43['globe']['ellipsoid']);if(!_0x5736b2){_0xd69085=!![];break;}const _0x27eaf4=_0x1b3d43['globe'][_0x240243(-0x7d,-0xc7)]['cartesianToCartographic'](_0x5736b2),_0x396c95=Cesium$1['Math'][_0x240243(-0x12b,-0x16a)](_0x27eaf4['longitude']),_0x4e9051=Cesium$1[_0x240243(-0x10d,-0x162)][_0x364b54(0x12a,0x15c)](_0x27eaf4['latitude']);_0x3e9691=Math['min'](_0x3e9691,_0x396c95),_0xa55841=Math[_0x240243(-0x11d,-0xeb)](_0xa55841,_0x396c95),_0x53ed91=Math['min'](_0x53ed91,_0x4e9051),_0x181b44=Math['max'](_0x181b44,_0x4e9051);}if(!_0xd69085){const _0x47b21d=new Cesium$1['Cartesian2'](Math['max'](this[_0x364b54(0xf8,0x167)][_0x240243(-0x1a4,-0x1a4)]['west'],_0x3e9691),Math['min'](this['windData'][_0x364b54(0xf0,0x117)]['east'],_0xa55841)),_0x3f9fa3=new Cesium$1['Cartesian2'](Math[_0x240243(-0xa3,-0xeb)](this[_0x364b54(0xf8,0xa8)]['bounds'][_0x240243(-0xd7,-0x117)],_0x53ed91),Math[_0x364b54(0xf6,0x74)](this[_0x364b54(0xf8,0xa5)][_0x240243(-0x12f,-0x1a4)]['north'],_0x181b44)),_0x59fa5c=(_0x47b21d['y']-_0x47b21d['x'])*0.05,_0x55b24c=(_0x3f9fa3['y']-_0x3f9fa3['x'])*0.05;_0x47b21d['x']=Math['max'](this[_0x364b54(0xf8,0x160)]['bounds'][_0x240243(-0xe8,-0xdb)],_0x47b21d['x']-_0x59fa5c),_0x47b21d['y']=Math['min'](this['windData'][_0x364b54(0xf0,0x163)]['east'],_0x47b21d['y']+_0x59fa5c),_0x3f9fa3['x']=Math['max'](this['windData'][_0x240243(-0x175,-0x1a4)][_0x240243(-0x10f,-0x117)],_0x3f9fa3['x']-_0x55b24c),_0x3f9fa3['y']=Math['min'](this['windData']['bounds']['north'],_0x3f9fa3['y']+_0x55b24c),this['viewerParameters'][_0x240243(-0x12e,-0x10b)]=_0x47b21d,this['viewerParameters'][_0x240243(-0x1ec,-0x1bb)]=_0x3f9fa3;const _0x1d3a88=this['windData']['bounds']['east']-this[_0x240243(-0x146,-0x19c)][_0x240243(-0x121,-0x1a4)][_0x364b54(0x1b9,0x185)],_0x339322=this['windData'][_0x240243(-0x1da,-0x1a4)][_0x240243(-0xc7,-0xce)]-this[_0x364b54(0xf8,0x155)][_0x364b54(0xf0,0x16c)][_0x364b54(0x17d,0x1a4)],_0x50fa82=(_0x47b21d['y']-_0x47b21d['x'])/_0x1d3a88,_0x427222=(_0x3f9fa3['y']-_0x3f9fa3['x'])/_0x339322,_0x3d14d7=Math['min'](_0x50fa82,_0x427222),_0x3ef6f8=0x3e8*_0x3d14d7;_0x3ef6f8>0x0&&(this[_0x364b54(0xd5,0xc7)][_0x240243(-0x138,-0xf4)]=Math['max'](0x0,Math['min'](0x3e8,_0x3ef6f8)));}this[_0x240243(-0x1de,-0x1bf)][_0x240243(-0x110,-0x187)]=this['scene']['mode'],(_0x4e354d=this['particleSystem'])===null||_0x4e354d===void 0x0||_0x4e354d['applyViewerParameters'](this['viewerParameters']);}[_0x237aef(-0x12b,-0x135)](_0x393463,_0x3a0125){const {bounds:_0x3eddbe,width:_0x4fd395,height:_0x2f0173,u:_0x32e1a2,v:_0x1d1bc2,speed:_0x2b82e0}=this[_0x4754dd(0x30,0x92)],{flipY:_0x99080a}=this[_0x4754dd(0x12b,0x15f)];if(_0x393463<_0x3eddbe[_0x4754dd(0x16c,0x153)]||_0x393463>_0x3eddbe['east']||_0x3a0125<_0x3eddbe[_0x4754dd(0x12b,0x117)]||_0x3a0125>_0x3eddbe['north'])return null;const _0x32abbf=(_0x393463-_0x3eddbe['west'])/(_0x3eddbe['east']-_0x3eddbe['west'])*(_0x4fd395-0x1);let _0x256e8a=(_0x3a0125-_0x3eddbe[_0x915cb4(0x1cf,0x1b4)])/(_0x3eddbe[_0x4754dd(0x17b,0x160)]-_0x3eddbe[_0x4754dd(0xa1,0x117)])*(_0x2f0173-0x1);_0x99080a&&(_0x256e8a=_0x2f0173-0x1-_0x256e8a);const _0x2851c1=Math['floor'](_0x32abbf),_0x507016=Math[_0x915cb4(0x15a,0x16d)](_0x256e8a),_0x3c52d2=Math['floor'](_0x32abbf),_0x48f8c9=Math[_0x4754dd(0x4a,0x90)](_0x3c52d2+0x1,_0x4fd395-0x1),_0x17f4e3=Math['floor'](_0x256e8a),_0x468ffa=Math[_0x4754dd(0x16,0x90)](_0x17f4e3+0x1,_0x2f0173-0x1),_0x588afd=_0x32abbf-_0x3c52d2,_0x3fa2bd=_0x256e8a-_0x17f4e3,_0x3dea35=_0x507016*_0x4fd395+_0x2851c1,_0x9a864a=_0x17f4e3*_0x4fd395+_0x3c52d2,_0x5d692d=_0x17f4e3*_0x4fd395+_0x48f8c9,_0x337944=_0x468ffa*_0x4fd395+_0x3c52d2,_0xfb91f5=_0x468ffa*_0x4fd395+_0x48f8c9,_0x2ef264=_0x32e1a2[_0x4754dd(0xc2,0x67)][_0x9a864a],_0x2fafa4=_0x32e1a2['array'][_0x5d692d],_0x42bd11=_0x32e1a2[_0x4754dd(0x8e,0x67)][_0x337944],_0x3846b9=_0x32e1a2[_0x4754dd(0xef,0x67)][_0xfb91f5],_0x1d2275=(0x1-_0x588afd)*(0x1-_0x3fa2bd)*_0x2ef264+_0x588afd*(0x1-_0x3fa2bd)*_0x2fafa4+(0x1-_0x588afd)*_0x3fa2bd*_0x42bd11+_0x588afd*_0x3fa2bd*_0x3846b9,_0x55ae76=_0x1d1bc2[_0x4754dd(0xf1,0x67)][_0x9a864a],_0x2d26e7=_0x1d1bc2[_0x915cb4(0x11f,0x16b)][_0x5d692d],_0xf968da=_0x1d1bc2[_0x915cb4(0x11f,0xb7)][_0x337944],_0x9975d=_0x1d1bc2['array'][_0xfb91f5],_0x408417=(0x1-_0x588afd)*(0x1-_0x3fa2bd)*_0x55ae76+_0x588afd*(0x1-_0x3fa2bd)*_0x2d26e7+(0x1-_0x588afd)*_0x3fa2bd*_0xf968da+_0x588afd*_0x3fa2bd*_0x9975d,_0x497171=Math[_0x915cb4(0x1e3,0x1dd)](_0x1d2275*_0x1d2275+_0x408417*_0x408417),_0x11f743={};function _0x4754dd(_0x103e82,_0x31a9a4){return _0x48c3f5(_0x103e82,_0x31a9a4-0x16f);}_0x11f743['u']=_0x32e1a2[_0x4754dd(0x79,0x67)][_0x3dea35],_0x11f743['v']=_0x1d1bc2[_0x4754dd(0xa9,0x67)][_0x3dea35],_0x11f743['speed']=_0x2b82e0[_0x915cb4(0x11f,0x140)][_0x3dea35];const _0x215713={};_0x215713['u']=_0x1d2275,_0x215713['v']=_0x408417,_0x215713[_0x915cb4(0x1cc,0x1b5)]=_0x497171;function _0x915cb4(_0x39eb96,_0x1fbb2a){return _0x48c3f5(_0x1fbb2a,_0x39eb96-0x227);}const _0x3c113a={};return _0x3c113a['original']=_0x11f743,_0x3c113a[_0x4754dd(0x11d,0x111)]=_0x215713,_0x3c113a;}}mars3d__namespace['LayerUtil'][_0x237aef(0x45,-0x38)]('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this[_0x530e51(0xf9,0x119)]=null;function _0x3243ff(_0xa27c56,_0x31f230){return _0x237aef(_0x31f230,_0xa27c56-0x4a7);}function _0x530e51(_0x381465,_0x119661){return _0x48c3f5(_0x381465,_0x119661-0x15b);}this[_0x530e51(0x1d1,0x150)]=null,this['tlat']=null,this['age']=null,this['speed']=null;}[_0x237aef(-0xa9,-0xbf)](){for(const _0x44fab2 in this){delete this[_0x44fab2];}}}function _0x48c3f5(_0x1c65b7,_0xd13f57){return _0xeda3(_0xd13f57- -0x280,_0x1c65b7);}class CanvasWindField{constructor(_0x1b316c){function _0x545cc2(_0x4f5265,_0x525ab3){return _0x237aef(_0x4f5265,_0x525ab3- -0xbc);}this[_0x545cc2(-0x149,-0x12b)](_0x1b316c);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x116b04){function _0x35c6c2(_0x45f287,_0x5c31fe){return _0x48c3f5(_0x5c31fe,_0x45f287-0x282);}function _0x1f995d(_0x5bb1c3,_0x500168){return _0x48c3f5(_0x500168,_0x5bb1c3-0x11d);}this[_0x1f995d(0xe,0x6e)]=(0x64-(_0x116b04>0x63?0x63:_0x116b04))*0x64,this[_0x35c6c2(0x187,0x18f)]=[(this[_0x1f995d(0xfd,0x13d)]-this['xmin'])/this[_0x1f995d(0xe,0x5c)],(this[_0x1f995d(0xe3,0x85)]-this[_0x1f995d(0x4c,-0x26)])/this['_speedRate']];}get['maxAge'](){function _0x186140(_0x3d79b6,_0x4abda8){return _0x237aef(_0x4abda8,_0x3d79b6-0x575);}return this[_0x186140(0x4bc,0x542)];}set['maxAge'](_0x12b76a){this['_maxAge']=_0x12b76a;}['setOptions'](_0x2b3f2d){function _0x139937(_0xe95c56,_0x29ce53){return _0x237aef(_0x29ce53,_0xe95c56-0xda);}this[_0x2fd2b1(0x37,-0x39)]=_0x2b3f2d,this[_0x2fd2b1(-0x11e,-0x11a)]=_0x2b3f2d['maxAge']||0x78;function _0x2fd2b1(_0x365276,_0x5c5bc5){return _0x48c3f5(_0x365276,_0x5c5bc5- -0x29);}this['speedRate']=_0x2b3f2d[_0x139937(-0x5f,0x2d)]||0x32,this['particles']=[];const _0x513cc3=_0x2b3f2d['particlesNumber']||0x1000;for(let _0x4bdf17=0x0;_0x4bdf17<_0x513cc3;_0x4bdf17++){const _0x117ec0=this['_randomParticle'](new CanvasParticle());this[_0x139937(0x9a,0xaa)]['push'](_0x117ec0);}}[_0x237aef(-0x84,-0x80)](_0x3a434a){this['rows']=_0x3a434a['rows'],this[_0x1cd698(-0x93,-0xc1)]=_0x3a434a['cols'],this[_0x40b9fc(0x51e,0x536)]=_0x3a434a['xmin'],this['xmax']=_0x3a434a[_0x40b9fc(0x64e,0x5f4)],this[_0x40b9fc(0x4e1,0x543)]=_0x3a434a[_0x40b9fc(0x57e,0x543)],this[_0x1cd698(-0x16,-0x93)]=_0x3a434a[_0x40b9fc(0x609,0x5da)],this['grid']=[];const _0x308d9d=_0x3a434a['udata'],_0x1591fc=_0x3a434a[_0x40b9fc(0x511,0x58d)];let _0x347c9d=![];_0x308d9d['length']===this['rows']&&_0x308d9d[0x0][_0x1cd698(-0x50,0xd)]===this['cols']&&(_0x347c9d=!![]);let _0x4d98d0=0x0,_0x2e8601=null;function _0x1cd698(_0x5631f3,_0x697260){return _0x48c3f5(_0x697260,_0x5631f3-0x24);}let _0x402954=null;for(let _0x1371c8=0x0;_0x1371c8<this['rows'];_0x1371c8++){_0x2e8601=[];for(let _0x39179b=0x0;_0x39179b<this[_0x1cd698(-0x93,-0x104)];_0x39179b++,_0x4d98d0++){_0x347c9d?_0x402954=this['_calcUV'](_0x308d9d[_0x1371c8][_0x39179b],_0x1591fc[_0x1371c8][_0x39179b]):_0x402954=this['_calcUV'](_0x308d9d[_0x4d98d0],_0x1591fc[_0x4d98d0]),_0x2e8601['push'](_0x402954);}this['grid']['push'](_0x2e8601);}function _0x40b9fc(_0x138085,_0x5151a3){return _0x48c3f5(_0x138085,_0x5151a3-0x614);}this['options'][_0x40b9fc(0x583,0x5b0)]&&this['grid']['reverse']();}[_0x48c3f5(-0x86,-0x7e)](){delete this['rows'],delete this['cols'],delete this['xmin'],delete this['xmax'],delete this['ymin'],delete this['ymax'];function _0x381f45(_0x1d0a7c,_0x24c781){return _0x48c3f5(_0x1d0a7c,_0x24c781-0x27e);}delete this[_0x381f45(0x1e2,0x16e)],delete this['particles'];}['toGridXY'](_0x26c438,_0x4e0550){function _0x474557(_0x346c54,_0x1b3f41){return _0x48c3f5(_0x346c54,_0x1b3f41- -0x161);}const _0x2a1148=(_0x26c438-this[_0x474557(-0x26d,-0x23f)])/(this[_0x194a19(0x2e2,0x25c)]-this['xmin'])*(this['cols']-0x1);function _0x194a19(_0x20f25,_0x24075b){return _0x237aef(_0x24075b,_0x20f25-0x32e);}const _0x442949=(this[_0x474557(-0x195,-0x19b)]-_0x4e0550)/(this['ymax']-this['ymin'])*(this['rows']-0x1);return[_0x2a1148,_0x442949];}['getUVByXY'](_0x2553ce,_0x1d8a5c){if(_0x2553ce<0x0||_0x2553ce>=this[_0x56ff93(0x2fa,0x291)]||_0x1d8a5c>=this['rows'])return[0x0,0x0,0x0];const _0xc09672=Math[_0x56ff93(0x2e4,0x25e)](_0x2553ce),_0x2cad0b=Math['floor'](_0x1d8a5c);if(_0xc09672===_0x2553ce&&_0x2cad0b===_0x1d8a5c)return this['grid'][_0x1d8a5c][_0x2553ce];const _0x5bef23=_0xc09672+0x1,_0x1d1913=_0x2cad0b+0x1,_0x4c9efb=this['getUVByXY'](_0xc09672,_0x2cad0b),_0x5689a3=this['getUVByXY'](_0x5bef23,_0x2cad0b),_0x466488=this['getUVByXY'](_0xc09672,_0x1d1913);function _0x56ff93(_0xcd0e3d,_0xac9735){return _0x48c3f5(_0xac9735,_0xcd0e3d-0x3b1);}function _0x5d87ce(_0x1ca3a6,_0x56d1a6){return _0x237aef(_0x56d1a6,_0x1ca3a6-0x3e9);}const _0x1ef537=this['getUVByXY'](_0x5bef23,_0x1d1913);let _0x40210c=null;try{_0x40210c=this['_bilinearInterpolation'](_0x2553ce-_0xc09672,_0x1d8a5c-_0x2cad0b,_0x4c9efb,_0x5689a3,_0x466488,_0x1ef537);}catch(_0x3c2d40){console['log'](_0x2553ce,_0x1d8a5c);}return _0x40210c;}[_0x48c3f5(-0x150,-0xe7)](_0x5c6153,_0x1ee91f,_0x3332bd,_0x14da49,_0x2b1a6f,_0x16663b){const _0x479fee=0x1-_0x5c6153,_0xab3ded=0x1-_0x1ee91f,_0x64c645=_0x479fee*_0xab3ded,_0x586440=_0x5c6153*_0xab3ded,_0x423866=_0x479fee*_0x1ee91f,_0x1260f9=_0x5c6153*_0x1ee91f,_0x516fb8=_0x3332bd[0x0]*_0x64c645+_0x14da49[0x0]*_0x586440+_0x2b1a6f[0x0]*_0x423866+_0x16663b[0x0]*_0x1260f9,_0x1bee9c=_0x3332bd[0x1]*_0x64c645+_0x14da49[0x1]*_0x586440+_0x2b1a6f[0x1]*_0x423866+_0x16663b[0x1]*_0x1260f9;return this['_calcUV'](_0x516fb8,_0x1bee9c);}['_calcUV'](_0x1e87cc,_0x3dd7b0){return[+_0x1e87cc,+_0x3dd7b0,Math['sqrt'](_0x1e87cc*_0x1e87cc+_0x3dd7b0*_0x3dd7b0)];}[_0x237aef(-0x24,-0x8e)](_0x480be8,_0x454df4){function _0xa6194e(_0x1ca421,_0x33c8e8){return _0x237aef(_0x33c8e8,_0x1ca421-0x590);}if(!this[_0xa6194e(0x46b,0x4c2)](_0x480be8,_0x454df4))return null;const _0x505ff9=this[_0x1eeef4(0x5b4,0x5a2)](_0x480be8,_0x454df4);function _0x1eeef4(_0x48498b,_0x33a1ef){return _0x237aef(_0x33a1ef,_0x48498b-0x670);}const _0x59b162=this['getUVByXY'](_0x505ff9[0x0],_0x505ff9[0x1]);return _0x59b162;}[_0x237aef(-0x106,-0x125)](_0x56f0d6,_0x42438c){function _0x5efae9(_0x2ecb19,_0x1475d6){return _0x48c3f5(_0x2ecb19,_0x1475d6-0x24c);}return _0x56f0d6>=this['xmin']&&_0x56f0d6<=this['xmax']&&_0x42438c>=this[_0x5efae9(0x206,0x17b)]&&_0x42438c<=this['ymax']?!![]:![];}[_0x48c3f5(-0x87,-0x6b)](){const _0x369ece=fRandomByfloat(this['xmin'],this[_0x53804d(0x562,0x5a4)]),_0x41cd1f=fRandomByfloat(this[_0x53804d(0x4b1,0x4ba)],this['ymax']),_0x2332c1={};function _0x4841f1(_0x512c49,_0x2d3226){return _0x48c3f5(_0x512c49,_0x2d3226- -0x34);}function _0x53804d(_0x1f618a,_0x266fee){return _0x48c3f5(_0x266fee,_0x1f618a-0x582);}return _0x2332c1['lat']=_0x41cd1f,_0x2332c1[_0x53804d(0x4eb,0x48e)]=_0x369ece,_0x2332c1;}['getParticles'](){let _0x2d83dc,_0xca20d3,_0x4f9559;function _0x48538c(_0x2695fd,_0x2125a3){return _0x48c3f5(_0x2125a3,_0x2695fd-0x4a4);}for(let _0x48d52b=0x0,_0x359744=this[_0x48538c(0x490,0x4b3)][_0x48538c(0x430,0x3c7)];_0x48d52b<_0x359744;_0x48d52b++){let _0x3726fa=this['particles'][_0x48d52b];_0x3726fa['age']<=0x0&&(_0x3726fa=this['_randomParticle'](_0x3726fa));if(_0x3726fa['age']>0x0){const _0x3d8aac=_0x3726fa[_0x4a4ad5(0x5fc,0x571)],_0x25b56b=_0x3726fa[_0x4a4ad5(0x5cc,0x627)];_0x4f9559=this['getUVByPoint'](_0x3d8aac,_0x25b56b),_0x4f9559?(_0x2d83dc=_0x3d8aac+this[_0x4a4ad5(0x50c,0x4ee)][0x0]*_0x4f9559[0x0],_0xca20d3=_0x25b56b+this['_calc_speedRate'][0x1]*_0x4f9559[0x1],_0x3726fa['lng']=_0x3d8aac,_0x3726fa['lat']=_0x25b56b,_0x3726fa['tlng']=_0x2d83dc,_0x3726fa['tlat']=_0xca20d3,_0x3726fa['speed']=_0x4f9559[0x2],_0x3726fa['age']--):_0x3726fa['age']=0x0;}}function _0x4a4ad5(_0x5bb915,_0x5921a1){return _0x48c3f5(_0x5921a1,_0x5bb915-0x607);}return this['particles'];}['_randomParticle'](_0x39c296){function _0x523538(_0x1ea39f,_0x1e9f65){return _0x48c3f5(_0x1ea39f,_0x1e9f65-0x36d);}let _0xede6ad,_0x268ded;for(let _0x2278bf=0x0;_0x2278bf<0x1e;_0x2278bf++){_0xede6ad=this['getRandomLatLng'](),_0x268ded=this['getUVByPoint'](_0xede6ad['lng'],_0xede6ad[_0x523538(0x32e,0x32b)]);if(_0x268ded&&_0x268ded[0x2]>0x0)break;}function _0x57dce7(_0x4b3124,_0x30932d){return _0x48c3f5(_0x30932d,_0x4b3124- -0x27);}if(!_0x268ded)return _0x39c296;const _0xf33237=_0xede6ad['lng']+this[_0x57dce7(-0x122,-0x188)][0x0]*_0x268ded[0x0],_0xd8ca7a=_0xede6ad['lat']+this['_calc_speedRate'][0x1]*_0x268ded[0x1];return _0x39c296[_0x523538(0x271,0x2d6)]=_0xede6ad['lng'],_0x39c296['lat']=_0xede6ad['lat'],_0x39c296['tlng']=_0xf33237,_0x39c296[_0x523538(0x395,0x332)]=_0xd8ca7a,_0x39c296[_0x523538(0x365,0x2ec)]=Math['round'](Math['random']()*this[_0x523538(0x1f5,0x27c)]),_0x39c296[_0x57dce7(-0x82,-0x3a)]=_0x268ded[0x2],_0x39c296;}[_0x48c3f5(-0x32,-0x93)](){for(const _0xfe2cde in this){delete this[_0xfe2cde];}}}function fRandomByfloat(_0x1d02ce,_0x5c9564){function _0xc98e2(_0x554292,_0x17a6e5){return _0x237aef(_0x554292,_0x17a6e5-0x4c2);}return _0x1d02ce+Math[_0xc98e2(0x440,0x48c)]()*(_0x5c9564-_0x1d02ce);}const Cesium=mars3d__namespace[_0x48c3f5(-0xa1,-0x49)],BaseLayer=mars3d__namespace[_0x237aef(-0x164,-0x108)]['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0xe6cc61={}){super(_0xe6cc61),this['_setOptionsHook'](_0xe6cc61),this['canvas']=null;function _0x49a873(_0x2297f8,_0x33926b){return _0x237aef(_0x2297f8,_0x33926b-0x247);}function _0x1139cc(_0x1645d0,_0x5727fc){return _0x48c3f5(_0x1645d0,_0x5727fc-0x1a9);}_0xe6cc61[_0x49a873(0x222,0x1de)]&&_0xe6cc61[_0x1139cc(0x1bf,0x198)]&&(this[_0x49a873(0x195,0x1c6)]=new mars3d__namespace[(_0x49a873(0x1b2,0x1e8))](_0xe6cc61));}['_setOptionsHook'](_0x4b57aa,_0x5793de){this['frameTime']=0x3e8/(_0x4b57aa[_0x89d127(0x253,0x215)]||0xa),this['_pointerEvents']=this[_0x194e49(0x3e2,0x375)]['pointerEvents']??![];function _0x89d127(_0x5155d2,_0x2065aa){return _0x237aef(_0x5155d2,_0x2065aa-0x2ca);}this[_0x89d127(0x237,0x222)]=_0x4b57aa[_0x194e49(0x376,0x37b)]||_0x194e49(0x3dd,0x468);function _0x194e49(_0x270743,_0x397604){return _0x237aef(_0x397604,_0x270743-0x41e);}this[_0x194e49(0x32e,0x39f)]=_0x4b57aa[_0x89d127(0x23c,0x1da)]||0x1,this['fixedHeight']=_0x4b57aa['fixedHeight']??0x0,this[_0x194e49(0x38e,0x3c6)]=_0x4b57aa[_0x194e49(0x38e,0x3e6)]??![],this['windField']&&this[_0x194e49(0x328,0x29f)]['setOptions'](_0x4b57aa);}get['layer'](){return this['canvas'];}get[_0x48c3f5(0x3,-0x70)](){function _0x3d5cff(_0x233100,_0x20d4be){return _0x237aef(_0x20d4be,_0x233100-0x65a);}return this[_0x3d5cff(0x580,0x525)]['scene']['canvas']['clientWidth'];}get['canvasHeight'](){function _0x1c0ace(_0x4a3b21,_0x4196c2){return _0x237aef(_0x4196c2,_0x4a3b21-0x3ce);}return this[_0x1c0ace(0x2f4,0x27d)]['scene']['canvas']['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x48c3f5(0x2c,-0x30)](_0x242b2a){this[_0x369505(0x374,0x3c2)]=_0x242b2a;function _0x369505(_0x1d6079,_0x4733f1){return _0x237aef(_0x1d6079,_0x4733f1-0x415);}function _0x289ae3(_0x5c41b4,_0x31b720){return _0x48c3f5(_0x5c41b4,_0x31b720-0x2f7);}if(!this[_0x289ae3(0x26e,0x2be)])return;_0x242b2a?this['canvas'][_0x289ae3(0x2d6,0x27d)]['pointer-events']='all':this[_0x369505(0x3d9,0x3b0)]['style'][_0x289ae3(0x1cd,0x204)]=_0x369505(0x35e,0x3e3);}get[_0x237aef(-0x9e,-0xd2)](){function _0xfa749(_0x5b736f,_0x5218c6){return _0x48c3f5(_0x5218c6,_0x5b736f- -0xf4);}return this[_0xfa749(-0x104,-0x128)]['particlesNumber'];}set[_0x237aef(-0x65,-0xd2)](_0x3b7c67){function _0x4d2eeb(_0x5655b1,_0x479f22){return _0x48c3f5(_0x5655b1,_0x479f22-0x23c);}this[_0x118a3e(0x38a,0x314)][_0x118a3e(0x2f4,0x310)]=_0x3b7c67,clearTimeout(this['_canrefresh']);function _0x118a3e(_0x4dca4e,_0x342c6d){return _0x48c3f5(_0x342c6d,_0x4dca4e-0x39a);}this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x530acd(_0x3fbb80,_0x43b2fa){return _0x237aef(_0x3fbb80,_0x43b2fa- -0x40);}return this['options'][_0x530acd(-0x155,-0x179)];}set[_0x237aef(-0x138,-0x139)](_0xcdec64){this['options']['speedRate']=_0xcdec64;function _0x34d2a1(_0x567cb4,_0x530cd0){return _0x237aef(_0x567cb4,_0x530cd0-0x259);}this[_0x34d2a1(0x1d8,0x163)]&&(this['windField']['speedRate']=_0xcdec64);}get[_0x48c3f5(-0x16c,-0xf1)](){return this['options']['maxAge'];}set[_0x48c3f5(-0x98,-0xf1)](_0x3f7dd3){function _0x2dc15d(_0x3e5bc1,_0x3ae8d2){return _0x48c3f5(_0x3e5bc1,_0x3ae8d2-0x486);}this['options'][_0x4225c1(0x48a,0x43d)]=_0x3f7dd3;function _0x4225c1(_0x3d8731,_0x2b44c0){return _0x237aef(_0x3d8731,_0x2b44c0-0x55a);}this[_0x4225c1(0x3e7,0x464)]&&(this['windField'][_0x4225c1(0x429,0x43d)]=_0x3f7dd3);}get[_0x48c3f5(-0xe4,-0xb6)](){function _0x3d5d96(_0x451ed0,_0x2b1d54){return _0x237aef(_0x2b1d54,_0x451ed0- -0xc);}return this[_0x3d5d96(-0x115,-0x19e)];}set['data'](_0x3bc301){function _0x36a6a9(_0x3d65b,_0x4edf76){return _0x237aef(_0x3d65b,_0x4edf76-0x100);}this[_0x36a6a9(-0x3d,0x4a)](_0x3bc301);}get['rectangle'](){function _0x36ed67(_0x39d83b,_0x578e44){return _0x237aef(_0x39d83b,_0x578e44-0x23b);}function _0x24c255(_0x478f8a,_0x53d6f7){return _0x48c3f5(_0x53d6f7,_0x478f8a-0x4de);}let _0x9462de=this['windData'][_0x36ed67(0x114,0x131)],_0x22a47e=this['windData']['xmax'],_0x40d4f7=this['windData'][_0x36ed67(0x1c1,0x13e)],_0xbc41f3=this[_0x36ed67(0x159,0x132)]['ymax'];return _0x22a47e>=0x167&&_0x9462de===0x0&&(_0x9462de=-0xb4,_0x22a47e=0xb4),_0x9462de=Math[_0x36ed67(0x1c9,0x1e3)](_0x9462de,-0xb4),_0x22a47e=Math[_0x36ed67(0xf1,0x130)](_0x22a47e,0xb4),_0x40d4f7=Math[_0x36ed67(0x179,0x1e3)](_0x40d4f7,-0x5a),_0xbc41f3=Math['min'](_0xbc41f3,0x5a),Cesium['Rectangle'][_0x24c255(0x3f1,0x442)](_0x9462de,_0x40d4f7,_0x22a47e,_0xbc41f3);}['_showHook'](_0x3feedd){function _0xb88e14(_0x25aa8e,_0x3ecef5){return _0x237aef(_0x3ecef5,_0x25aa8e-0x4d1);}function _0x12d749(_0x120f77,_0x22eac9){return _0x237aef(_0x22eac9,_0x120f77-0x311);}_0x3feedd?this[_0xb88e14(0x3fe,0x40a)]():(this['windData']&&(this[_0xb88e14(0x495,0x4c3)]['data']=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x238f60(_0x2d4965,_0x1fad56){return _0x237aef(_0x2d4965,_0x1fad56-0x4a2);}function _0xbaf7e(_0x2b7540,_0x35f242){return _0x237aef(_0x35f242,_0x2b7540-0x21a);}this[_0x238f60(0x4c0,0x466)][_0x238f60(0x48f,0x409)]?this['initWorker']():this[_0xbaf7e(0x124,0x19d)]=new CanvasWindField(this[_0xbaf7e(0x1de,0x17b)]);}['_addedHook'](){function _0xa121d8(_0x44bde7,_0x41ddb){return _0x48c3f5(_0x41ddb,_0x44bde7-0x1fa);}this['canvas']=this['_createCanvas']();const _0x35aee2={};_0x35aee2['willReadFrequently']=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0x35aee2),this[_0xa121d8(0x175,0x1f1)]();function _0x45b121(_0x59e074,_0x5e6234){return _0x237aef(_0x59e074,_0x5e6234-0x646);}this['options'][_0x45b121(0x531,0x564)]&&this[_0xa121d8(0x170,0x126)](this['options']['data']);}['_removedHook'](){this[_0x343b01(0x73,-0x10)]();function _0x343b01(_0x6be59c,_0x5bf390){return _0x237aef(_0x5bf390,_0x6be59c-0x11d);}function _0xc930bd(_0x418550,_0x47c788){return _0x237aef(_0x418550,_0x47c788- -0x77);}this[_0xc930bd(-0x7f,-0xc9)](),this[_0xc930bd(-0xf6,-0xdc)]&&(this[_0xc930bd(-0x10e,-0x151)][_0x343b01(0x3c,0x63)]['removeChild'](this['canvas']),delete this['canvas']);}['_createCanvas'](){const _0x48ef35=mars3d__namespace[_0x4197ad(0x1e1,0x1a2)][_0x57fba9(0x22b,0x2aa)](_0x57fba9(0x2af,0x256),'mars3d-canvasWind',this['_map']['container']);_0x48ef35[_0x57fba9(0x26e,0x2db)][_0x4197ad(0x100,0xf8)]='absolute',_0x48ef35['style'][_0x57fba9(0x266,0x2ad)]=_0x4197ad(0x122,0xf6),_0x48ef35['style']['left']='0px',_0x48ef35[_0x4197ad(0x14f,0x12f)][_0x4197ad(0x18d,0x177)]=this['_map']['scene']['canvas']['clientWidth']+'px',_0x48ef35['style'][_0x4197ad(0xac,0x123)]=this[_0x4197ad(0xea,0xfb)]['scene']['canvas']['clientHeight']+'px',_0x48ef35['style'][_0x57fba9(0x2b8,0x29d)]=this['_pointerEvents']?_0x4197ad(0x11d,0x17a):_0x57fba9(0x2e2,0x2ea),_0x48ef35['style'][_0x4197ad(0x13a,0xee)]=this['options']['zIndex']??0x9;function _0x57fba9(_0x290451,_0x58d1db){return _0x237aef(_0x58d1db,_0x290451-0x314);}_0x48ef35['width']=this['_map']['scene']['canvas'][_0x57fba9(0x296,0x304)];function _0x4197ad(_0x18e2dd,_0x344bcd){return _0x48c3f5(_0x18e2dd,_0x344bcd-0x1a9);}return _0x48ef35[_0x57fba9(0x262,0x21a)]=this['_map']['scene']['canvas']['clientHeight'],_0x48ef35;}[_0x237aef(-0x9a,-0x116)](){function _0x4f2a9c(_0x3b21d2,_0x4e4c8d){return _0x237aef(_0x3b21d2,_0x4e4c8d-0x4c9);}function _0x2951a1(_0x293534,_0x58dbb7){return _0x48c3f5(_0x293534,_0x58dbb7-0x3be);}this['canvas']&&(this[_0x4f2a9c(0x3e0,0x464)]['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this['canvas']['style']['height']=this[_0x4f2a9c(0x3ca,0x3ef)]['scene'][_0x2951a1(0x3aa,0x385)]['clientHeight']+'px',this['canvas']['width']=this[_0x2951a1(0x2f8,0x310)][_0x2951a1(0x3a8,0x373)][_0x2951a1(0x32b,0x385)]['clientWidth'],this[_0x2951a1(0x320,0x385)]['height']=this['_map']['scene'][_0x4f2a9c(0x4a9,0x464)][_0x2951a1(0x2e4,0x2da)]);}['bindEvent'](){const _0x1a0530=this;let _0x49c636=Date['now']();(function _0x462916(){if(_0x1a0530[_0x1ab71c(0xef,0xb1)])return;_0x1a0530[_0x5edec4(0x29f,0x321)]=window['requestAnimationFrame'](_0x462916);function _0x5edec4(_0x339923,_0x4cf125){return _0xeda3(_0x339923-0xc4,_0x4cf125);}function _0x1ab71c(_0x30ea78,_0xbdacbe){return _0xeda3(_0xbdacbe- -0xd2,_0x30ea78);}if(_0x1a0530['show']&&_0x1a0530['windField']){const _0xa99b3d=Date[_0x1ab71c(0xc2,0x11f)](),_0x19570e=_0xa99b3d-_0x49c636;_0x19570e>_0x1a0530[_0x1ab71c(0x21a,0x197)]&&(_0x49c636=_0xa99b3d-_0x19570e%_0x1a0530[_0x1ab71c(0x201,0x197)],_0x1a0530['update']());}}(),window['addEventListener']('resize',this['resize'][_0x55982b(0xfb,0x122)](this),![]),this[_0x55982b(0x162,0x1eb)]=![],this['mouse_move']=![]);function _0x55982b(_0x9d9da7,_0x3069ae){return _0x237aef(_0x3069ae,_0x9d9da7-0x1bf);}function _0x20c67a(_0x10ef5c,_0x2d9651){return _0x48c3f5(_0x2d9651,_0x10ef5c-0x5ca);}this[_0x55982b(0x183,0x1bf)][_0x20c67a(0x51a,0x52c)]&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x20c67a(0x4f4,0x544)],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x20c67a(0x50c,0x582)],this));}[_0x48c3f5(-0x81,-0x26)](){function _0xa09988(_0x43c735,_0x470f65){return _0x237aef(_0x43c735,_0x470f65-0x4c3);}window[_0xa09988(0x44d,0x3d1)](this[_0x132791(0x236,0x285)]),delete this['_animateFrame'];function _0x132791(_0x5c2e22,_0xfaaada){return _0x237aef(_0x5c2e22,_0xfaaada-0x356);}window[_0x132791(0x255,0x225)]('resize',this['resize']),this['options']['mouseHidden']&&(this[_0xa09988(0x396,0x3e9)]['off'](mars3d__namespace[_0xa09988(0x44e,0x3d8)]['wheel'],this['_onMapWhellEvent'],this),this['_map'][_0x132791(0x357,0x309)](mars3d__namespace[_0xa09988(0x36e,0x3d8)]['mouseDown'],this[_0x132791(0x294,0x267)],this),this['_map'][_0xa09988(0x3fa,0x476)](mars3d__namespace['EventType'][_0x132791(0x2b7,0x2cb)],this['_onMouseUpEvent'],this),this[_0xa09988(0x3e5,0x3e9)]['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x1e15af){clearTimeout(this['refreshTimer']);function _0x63b4ba(_0x21293e,_0x401cb8){return _0x48c3f5(_0x401cb8,_0x21293e-0x56f);}if(!this['show']||!this[_0x63b4ba(0x536,0x504)])return;function _0x2f47b3(_0x3b1d79,_0x510acb){return _0x48c3f5(_0x3b1d79,_0x510acb-0x6);}this['canvas']['style']['visibility']=_0x63b4ba(0x556,0x50e),this[_0x2f47b3(-0x8a,-0xe0)]=setTimeout(()=>{function _0x1d1742(_0x576bec,_0x544b62){return _0x2f47b3(_0x576bec,_0x544b62-0x80);}function _0x330367(_0x14f5d2,_0x27d106){return _0x63b4ba(_0x14f5d2- -0x5f6,_0x27d106);}if(!this[_0x330367(-0xb2,-0xdf)])return;this['redraw'](),this[_0x1d1742(-0x22,0x4d)]['style']['visibility']='visible';},0xc8);}['_onMouseDownEvent'](_0x2b31c5){function _0x1e8eb2(_0x244019,_0x44818e){return _0x48c3f5(_0x244019,_0x44818e-0x84);}this['mouse_down']=!![],this[_0x1e8eb2(-0x5d,-0x2a)]['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);function _0x49bc24(_0x27499e,_0x469760){return _0x48c3f5(_0x469760,_0x27499e-0x365);}this[_0x1e8eb2(-0x83,-0x2a)]['on'](mars3d__namespace[_0x49bc24(0x2a6,0x23a)][_0x1e8eb2(0x45,0x1c)],this[_0x49bc24(0x327,0x371)],this);}[_0x237aef(-0xad,-0x6a)](_0x53fa80){if(!this[_0x1bdbfe(0x30f,0x313)]||!this[_0x1bdbfe(0x301,0x2f8)])return;function _0x1bd53e(_0x586097,_0x55b762){return _0x48c3f5(_0x586097,_0x55b762-0x47c);}function _0x1bdbfe(_0x28fd22,_0x448bdd){return _0x48c3f5(_0x448bdd,_0x28fd22-0x33a);}this[_0x1bd53e(0x475,0x44b)]&&(this['canvas']['style']['visibility']='hidden',this[_0x1bdbfe(0x252,0x291)]=!![]);}['_onMouseUpEvent'](_0x14410b){function _0x12a4d0(_0x55710d,_0x32d2a6){return _0x237aef(_0x32d2a6,_0x55710d-0x448);}if(!this['show']||!this['canvas'])return;this['_map']['off'](mars3d__namespace[_0x12a4d0(0x35d,0x3c0)][_0x59a084(0x1de,0x15b)],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this[_0x59a084(0x8d,0xc2)]();this['canvas']['style']['visibility']=_0x59a084(0x17a,0xef),this[_0x59a084(0x164,0x192)]=![];function _0x59a084(_0x483945,_0x34faf2){return _0x237aef(_0x483945,_0x34faf2-0x1ef);}this[_0x59a084(0xa3,0xdb)]=![];}[_0x48c3f5(-0x54,-0x8a)](_0x6bf47d){function _0x4204f9(_0x5deb0e,_0x2bc8d0){return _0x237aef(_0x5deb0e,_0x2bc8d0-0x1a9);}this['clear'](),this[_0x4204f9(0x2f,0xa0)]=_0x6bf47d,this['windField']['setDate'](_0x6bf47d),this['redraw']();}[_0x237aef(-0x143,-0x12d)](){if(!this['show'])return;this['windField']['setOptions'](this['options']),this['update']();}['update'](){function _0x53cf86(_0x5e5ba8,_0x4509c5){return _0x48c3f5(_0x5e5ba8,_0x4509c5-0x468);}if(this['_updateIng'])return;this[_0x455626(0x107,0xef)]=!![];if(this['worker'])this['windField']['update']();else{const _0xab431d=this[_0x455626(0x104,0xb0)][_0x455626(0x131,0x102)]();this[_0x455626(0x114,0xa1)](_0xab431d);}function _0x455626(_0x20e0a5,_0x2a0dd2){return _0x237aef(_0x2a0dd2,_0x20e0a5-0x1fa);}this['_updateIng']=![];}['_drawLines'](_0x42cf30){function _0x22d2d1(_0x5f1eb0,_0x510109){return _0x237aef(_0x510109,_0x5f1eb0-0x1);}this[_0x22d2d1(-0xb7,-0xf9)]=_0x42cf30,this[_0x1d9ee4(-0x23b,-0x207)]['globalCompositeOperation']='destination-in';function _0x1d9ee4(_0x18c768,_0x96bffc){return _0x237aef(_0x96bffc,_0x18c768- -0x124);}this[_0x22d2d1(-0x116,-0x10a)]['fillRect'](0x0,0x0,this[_0x22d2d1(-0x9b,-0x96)],this['canvasHeight']),this['canvasContext'][_0x22d2d1(-0xb9,-0xe0)]=_0x22d2d1(-0x4a,0x1f),this[_0x22d2d1(-0x116,-0xd1)][_0x22d2d1(-0xb6,-0x130)]=0.9;const _0x2b627f=this['_map']['scene']['mode']!==Cesium['SceneMode']['SCENE3D'],_0x45485f=this[_0x1d9ee4(-0x1c0,-0x1fb)]*0.25;if(this['_colorRamp'])for(let _0x3be888=0x0,_0x27bbae=_0x42cf30['length'];_0x3be888<_0x27bbae;_0x3be888++){const _0x2f8a41=_0x42cf30[_0x3be888],_0x1fc246=this['_tomap'](_0x2f8a41,_0x2f8a41[_0x1d9ee4(-0x1e7,-0x1c2)],_0x2f8a41['lat'],_0x2f8a41[_0x22d2d1(-0xd8,-0xcf)]),_0x5ed33f=this['_tomap'](_0x2f8a41,_0x2f8a41['tlng'],_0x2f8a41['tlat'],_0x2f8a41['talt']);if(!_0x1fc246||!_0x5ed33f)continue;if(_0x2b627f&&Math['abs'](_0x1fc246[0x0]-_0x5ed33f[0x0])>=_0x45485f)continue;this['canvasContext'][_0x22d2d1(-0x125,-0xad)](),this['canvasContext']['lineWidth']=this['lineWidth'],this[_0x22d2d1(-0x116,-0xc1)]['strokeStyle']=this['_colorRamp']['getColor'](_0x2f8a41['speed']),this['canvasContext']['moveTo'](_0x1fc246[0x0],_0x1fc246[0x1]),this[_0x22d2d1(-0x116,-0xcd)]['lineTo'](_0x5ed33f[0x0],_0x5ed33f[0x1]),this['canvasContext']['stroke']();}else{this['canvasContext'][_0x1d9ee4(-0x24a,-0x20a)](),this[_0x22d2d1(-0x116,-0x178)]['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this[_0x22d2d1(-0xa7,-0x88)];for(let _0x1d3b95=0x0,_0x2517b7=_0x42cf30[_0x22d2d1(-0x9f,-0xe6)];_0x1d3b95<_0x2517b7;_0x1d3b95++){const _0x325e1d=_0x42cf30[_0x1d3b95],_0x229cd3=this[_0x1d9ee4(-0x1ff,-0x17e)](_0x325e1d,_0x325e1d['lng'],_0x325e1d['lat'],_0x325e1d['alt']),_0x23cb52=this['_tomap'](_0x325e1d,_0x325e1d['tlng'],_0x325e1d['tlat'],_0x325e1d[_0x22d2d1(-0x85,-0x68)]);if(!_0x229cd3||!_0x23cb52)continue;if(_0x2b627f&&Math['abs'](_0x229cd3[0x0]-_0x23cb52[0x0])>=_0x45485f)continue;this['canvasContext']['moveTo'](_0x229cd3[0x0],_0x229cd3[0x1]),this['canvasContext']['lineTo'](_0x23cb52[0x0],_0x23cb52[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x2cfae4,_0x3fdd38,_0x14a4cb,_0x5edaca){const _0x587cfc=Cesium['Cartesian3'][_0x577a1f(0x378,0x3d0)](_0x3fdd38,_0x14a4cb,_0x5edaca??this[_0x41e88d(0x265,0x2d0)]),_0x435fea=this['_map'][_0x577a1f(0x4d1,0x472)];if(_0x435fea['mode']===Cesium['SceneMode'][_0x41e88d(0x25c,0x2d6)]){const _0x107da4=new Cesium['EllipsoidalOccluder'](_0x435fea[_0x577a1f(0x4d6,0x46e)]['ellipsoid'],_0x435fea['camera'][_0x41e88d(0x243,0x1d4)]),_0x12aecf=_0x107da4[_0x577a1f(0x3fb,0x485)](_0x587cfc);if(!_0x12aecf)return _0x2cfae4[_0x41e88d(0x24a,0x1f4)]=0x0,null;}function _0x577a1f(_0x3bed28,_0x56de97){return _0x237aef(_0x3bed28,_0x56de97-0x4e9);}const _0x3b35ac=mars3d__namespace[_0x41e88d(0x272,0x25b)]['toWindowCoordinates'](this[_0x577a1f(0x39d,0x40f)]['scene'],_0x587cfc);function _0x41e88d(_0x4b0af3,_0x26f970){return _0x237aef(_0x26f970,_0x4b0af3-0x2f7);}return _0x3b35ac?[_0x3b35ac['x'],_0x3b35ac['y']]:null;}['clear'](){function _0x5a5056(_0x29f7dc,_0x49d9c6){return _0x48c3f5(_0x49d9c6,_0x29f7dc-0x4c2);}this[_0x5a5056(0x3f8,0x3e0)]['clear'](),delete this['windData'];}['initWorker'](){function _0x350af1(_0xc0ef3,_0x44be0a){return _0x237aef(_0xc0ef3,_0x44be0a-0x60);}this['worker']=new Worker(this['options'][_0x2770f4(0x1c0,0x154)]),this[_0x2770f4(0x1c0,0x23b)][_0x2770f4(0x138,0x111)]=_0x6f5663=>{this[_0x1f8e67(0x4f7,0x494)](_0x6f5663['data']['particles']);function _0x1f8e67(_0x24cea5,_0x568301){return _0x2770f4(_0x24cea5-0x384,_0x568301);}function _0xc3180a(_0x3e623b,_0x1b74a6){return _0x2770f4(_0x3e623b-0x136,_0x1b74a6);}this[_0x1f8e67(0x4da,0x553)]=![];};function _0x2770f4(_0x41fa1c,_0xbe9e19){return _0x48c3f5(_0xbe9e19,_0x41fa1c-0x22d);}this['windField']={'init':_0x2b3b98=>{function _0x1a0875(_0x1462a8,_0x3251e3){return _0x2770f4(_0x3251e3-0x159,_0x1462a8);}const _0x2a2ebc={};_0x2a2ebc['type']='init';function _0x772bc7(_0x45edb2,_0x40725c){return _0x350af1(_0x40725c,_0x45edb2-0x30d);}_0x2a2ebc[_0x772bc7(0x331,0x2c0)]=_0x2b3b98,this[_0x772bc7(0x2d4,0x359)]['postMessage'](_0x2a2ebc);},'setOptions':_0x3f144d=>{const _0xfac5e3={};_0xfac5e3[_0x6fe28b(0x22c,0x262)]='setOptions',_0xfac5e3['options']=_0x3f144d;function _0x6fe28b(_0x45688c,_0x2b4d0d){return _0x2770f4(_0x2b4d0d-0xc6,_0x45688c);}this['worker']['postMessage'](_0xfac5e3);},'setDate':_0x4d0fe9=>{const _0x3c6b49={};_0x3c6b49[_0x5eedf4(0x2e1,0x25a)]='setDate',_0x3c6b49[_0x96fc15(0x1c9,0x1a7)]=_0x4d0fe9;function _0x5eedf4(_0x97b531,_0x21198c){return _0x350af1(_0x21198c,_0x97b531-0x33e);}function _0x96fc15(_0x1688e9,_0x3890d1){return _0x2770f4(_0x1688e9-0x52,_0x3890d1);}this['worker']['postMessage'](_0x3c6b49);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0x353185={};function _0x52bc7a(_0x26931d,_0x575ea3){return _0x2770f4(_0x26931d-0x196,_0x575ea3);}_0x353185['type']='update',this['worker'][_0x52bc7a(0x34b,0x2d3)](_0x353185);},'clear':()=>{const _0x26d0ba={};_0x26d0ba[_0x4a0e8e(-0xd7,-0x122)]='clear';function _0x4a0e8e(_0x2c6a1f,_0x33e964){return _0x2770f4(_0x2c6a1f- -0x273,_0x33e964);}function _0x467210(_0x19d023,_0x455859){return _0x2770f4(_0x455859-0x2de,_0x19d023);}this['worker'][_0x4a0e8e(-0xbe,-0x61)](_0x26d0ba);}},this['windField'][_0x350af1(-0x70,-0x45)](this['options']);}}mars3d__namespace['LayerUtil'][_0x48c3f5(-0x59,-0xc)](_0x48c3f5(-0x84,-0x9a),CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x237aef(-0xa0,-0x60)]=CanvasWindField,mars3d__namespace[_0x48c3f5(-0x94,-0x7b)]=WindUtil,exports['CanvasWindField']=CanvasWindField,exports[_0x48c3f5(0x6b,-0x1a)]=CanvasWindLayer,exports[_0x48c3f5(-0x44,-0x45)]=WindLayer,exports['WindUtil']=WindUtil;const _0x5166fa={};_0x5166fa['value']=!![],Object['defineProperty'](exports,_0x48c3f5(-0x166,-0x107),_0x5166fa);
}));
