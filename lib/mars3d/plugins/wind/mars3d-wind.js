/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.11.0
 * 编译日期：2026-02-14 19:27
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2026-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x96a70d,_0x116152){const _0x5976cd=_0x96a70d();function _0x2561b6(_0x1bcb07,_0x446304){return _0x3f37(_0x446304-0x5f,_0x1bcb07);}function _0xc1006b(_0x1a92b1,_0x2a7c6f){return _0x3f37(_0x1a92b1- -0xf7,_0x2a7c6f);}while(!![]){try{const _0x50d5aa=parseInt(_0x2561b6(0x1ab,0x206))/0x1+parseInt(_0xc1006b(0x17a,0x1d7))/0x2*(parseInt(_0xc1006b(0x114,0xb3))/0x3)+parseInt(_0x2561b6(0x2d0,0x25e))/0x4+parseInt(_0xc1006b(0x16f,0x183))/0x5+-parseInt(_0x2561b6(0x269,0x2e4))/0x6*(parseInt(_0xc1006b(0x9f,0xe9))/0x7)+-parseInt(_0x2561b6(0x264,0x2dc))/0x8+-parseInt(_0xc1006b(0xe6,0x111))/0x9;if(_0x50d5aa===_0x116152)break;else _0x5976cd['push'](_0x5976cd['shift']());}catch(_0x4bdbb0){_0x5976cd['push'](_0x5976cd['shift']());}}}(_0x130c,0x7305a));function _interopNamespace(_0x477de3){function _0x239025(_0x2d10e2,_0x57d267){return _0x3f37(_0x57d267-0x5d,_0x2d10e2);}if(_0x477de3&&_0x477de3['__esModule'])return _0x477de3;var _0x4b2c5e=Object['create'](null);return _0x477de3&&Object['keys'](_0x477de3)[_0x239025(0x2c5,0x2e3)](function(_0x5611f0){function _0x3486a1(_0x2be2c1,_0x59a4a9){return _0x239025(_0x59a4a9,_0x2be2c1- -0x2ad);}if(_0x5611f0!==_0x3486a1(-0xb9,-0x10c)){var _0x10fa61=Object['getOwnPropertyDescriptor'](_0x477de3,_0x5611f0);Object['defineProperty'](_0x4b2c5e,_0x5611f0,_0x10fa61['get']?_0x10fa61:{'enumerable':!![],'get':function(){return _0x477de3[_0x5611f0];}});}}),_0x4b2c5e['default']=_0x477de3,_0x4b2c5e;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x3c811c,_0xeed70e){const _0xa83070=_0x3c811c*Math['cos'](Cesium$2[_0x36e650(-0x168,-0x131)]['toRadians'](_0xeed70e));function _0x36e650(_0x3461ad,_0x446bb1){return _0x3f37(_0x446bb1- -0x2c9,_0x3461ad);}return _0xa83070;}function getV(_0x5dd091,_0x3e71d9){function _0x563d68(_0x39e62e,_0x22a9d5){return _0x3f37(_0x22a9d5-0x21,_0x39e62e);}const _0x20d9c2=_0x5dd091*Math['sin'](Cesium$2[_0x563d68(0x19b,0x1b9)]['toRadians'](_0x3e71d9));return _0x20d9c2;}function getSpeed(_0x599941,_0x52ec1c){const _0x32ca7c=Math['sqrt'](Math[_0x228b8a(-0x20a,-0x1a2)](_0x599941,0x2)+Math['pow'](_0x52ec1c,0x2));function _0x228b8a(_0x194cce,_0x4b0712){return _0x3f37(_0x4b0712- -0x37c,_0x194cce);}return _0x32ca7c;}function getDirection(_0xda9e7d,_0x27489c){let _0x5018f0=Cesium$2['Math']['toDegrees'](Math['atan2'](_0x27489c,_0xda9e7d));return _0x5018f0+=_0x5018f0<0x0?0x168:0x0,_0x5018f0;}const _0x15f623={};function _0x3f37(_0x250a24,_0x1fb235){const _0x130c32=_0x130c();return _0x3f37=function(_0x3f3772,_0x3fa1a3){_0x3f3772=_0x3f3772-0x185;let _0x2aa0f2=_0x130c32[_0x3f3772];return _0x2aa0f2;},_0x3f37(_0x250a24,_0x1fb235);}_0x15f623['__proto__']=null,_0x15f623['getU']=getU,_0x15f623['getV']=getV,_0x15f623['getSpeed']=getSpeed,_0x15f623['getDirection']=getDirection;var WindUtil=_0x15f623;const version='3.11.0',buildTime='2026-02-14\x2019:26';var updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader=_0x42cab6(-0x1cf,-0x1b1),postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a',renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace['Cesium'];class ShaderManager{static['getCalculateSpeedShader'](){function _0x5074a5(_0x26ede9,_0x2299ee){return _0x42cab6(_0x2299ee,_0x26ede9-0xc0);}const _0x1ba605={};return _0x1ba605[_0x5074a5(-0x9b,-0x95)]=[calculateSpeedShader],new ShaderSource$1(_0x1ba605);}static['getUpdatePositionShader'](){const _0x58450d={};return _0x58450d['sources']=[updatePositionShader],new ShaderSource$1(_0x58450d);}static['getSegmentDrawVertexShader'](){const _0x22b603={};_0x22b603[_0xd9461d(0x53f,0x511)]=[renderParticlesVertexShader];function _0xd9461d(_0x167753,_0x7c86d2){return _0x42cab6(_0x7c86d2,_0x167753-0x69a);}return new ShaderSource$1(_0x22b603);}static['getSegmentDrawFragmentShader'](){function _0x2faf70(_0x2de1dd,_0x2ebc7a){return _0x42cab6(_0x2ebc7a,_0x2de1dd-0x106);}const _0x44f113={};return _0x44f113[_0x2faf70(-0x55,-0x2f)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x44f113);}static[_0x42cab6(-0x1b5,-0x170)](){const _0x275fc1={};return _0x275fc1['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x275fc1);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace[_0x42cab6(-0x171,-0x131)];class CustomPrimitive{constructor(_0x463942){this['commandType']=_0x463942[_0x42fa65(0x1db,0x1ca)],this['geometry']=_0x463942['geometry'],this[_0x152ffb(0x28c,0x265)]=_0x463942[_0x42fa65(0x1e2,0x1cb)],this['primitiveType']=_0x463942[_0x152ffb(0x1f0,0x190)],this['uniformMap']=_0x463942['uniformMap']||{};function _0x42fa65(_0x25e748,_0x3625c8){return _0x584038(_0x3625c8,_0x25e748-0x12);}function _0x152ffb(_0x5886f8,_0x392fe6){return _0x42cab6(_0x392fe6,_0x5886f8-0x3ad);}this['vertexShaderSource']=_0x463942[_0x152ffb(0x22b,0x1e7)],this[_0x42fa65(0x154,0x18a)]=_0x463942['fragmentShaderSource'],this['rawRenderState']=_0x463942['rawRenderState'],this[_0x42fa65(0x145,0x15e)]=_0x463942['framebuffer'],this['outputTexture']=_0x463942['outputTexture'],this['autoClear']=_0x463942['autoClear']??![],this[_0x152ffb(0x27d,0x2a6)]=_0x463942['preExecute'],this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['isDynamic']=_0x463942['isDynamic']??(()=>!![]),this[_0x152ffb(0x22c,0x299)]&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1[_0x42fa65(0x16d,0xf9)]}));}[_0x584038(0x122,0xd3)](_0x290ecc){function _0x441981(_0x172ee8,_0x51b990){return _0x42cab6(_0x172ee8,_0x51b990-0x32);}function _0x177a2f(_0x525832,_0x1503de){return _0x584038(_0x525832,_0x1503de- -0x2f1);}if(this[_0x441981(-0x131,-0xf6)]===_0x177a2f(-0x1b8,-0x18f)){const _0x2f57bd={};_0x2f57bd[_0x177a2f(-0x1b3,-0x214)]=_0x290ecc,_0x2f57bd[_0x177a2f(-0x1f8,-0x1cd)]=this['geometry'],_0x2f57bd[_0x441981(-0xe9,-0xef)]=this['attributeLocations'],_0x2f57bd[_0x441981(-0x134,-0x157)]=BufferUsage$1[_0x177a2f(-0x165,-0x1bf)];const _0x30321b=VertexArray$1[_0x441981(-0x1eb,-0x1ac)](_0x2f57bd),_0x17a816={};_0x17a816['context']=_0x290ecc,_0x17a816['vertexShaderSource']=this[_0x177a2f(-0x1d9,-0x182)],_0x17a816['fragmentShaderSource']=this[_0x441981(-0x194,-0x17d)],_0x17a816[_0x177a2f(-0x107,-0x121)]=this[_0x177a2f(-0xdc,-0x121)];const _0x705e91=ShaderProgram['fromCache'](_0x17a816),_0x3f34ff=RenderState['fromCache'](this['rawRenderState']),_0x54897b={};return _0x54897b[_0x441981(-0x1fa,-0x1aa)]=this,_0x54897b['vertexArray']=_0x30321b,_0x54897b[_0x177a2f(-0x21e,-0x1bd)]=this['primitiveType'],_0x54897b[_0x441981(-0x194,-0x18a)]=Matrix4[_0x441981(-0xf8,-0x146)],_0x54897b[_0x177a2f(-0x231,-0x222)]=_0x3f34ff,_0x54897b['shaderProgram']=_0x705e91,_0x54897b[_0x441981(-0x1a8,-0x18c)]=this[_0x177a2f(-0x1d0,-0x1be)],_0x54897b[_0x441981(-0x1ef,-0x1eb)]=this['uniformMap'],_0x54897b['pass']=Pass$1['OPAQUE'],new DrawCommand(_0x54897b);}else{if(this[_0x177a2f(-0x160,-0x128)]==='Compute'){const _0x22c0ed={};return _0x22c0ed['owner']=this,_0x22c0ed['fragmentShaderSource']=this[_0x177a2f(-0x20a,-0x1af)],_0x22c0ed['uniformMap']=this[_0x441981(-0x17a,-0x1eb)],_0x22c0ed[_0x177a2f(-0x236,-0x1fd)]=this['outputTexture'],_0x22c0ed[_0x441981(-0x13a,-0x15a)]=!![],new ComputeCommand(_0x22c0ed);}else throw new Error(_0x441981(-0x156,-0x196));}}[_0x584038(0x9e,0xee)](_0x4f56c0,_0x589097){function _0x24d904(_0x132e68,_0x2479fc){return _0x584038(_0x132e68,_0x2479fc-0x2d0);}function _0x5578b7(_0x2e853b,_0x5bfdb5){return _0x584038(_0x5bfdb5,_0x2e853b- -0x104);}this['geometry']=_0x589097,defined(this['commandToExecute'])&&(this[_0x5578b7(-0x2,0x1b)][_0x24d904(0x385,0x3fd)]=VertexArray$1['fromGeometry']({'context':_0x4f56c0,'geometry':this[_0x24d904(0x424,0x3f4)],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1[_0x5578b7(0x2e,-0x4e)]}));}[_0x42cab6(-0x15d,-0x1ba)](_0x2ce840){if(!this['isDynamic']())return;function _0x2a5d86(_0x2c584a,_0x3f52bf){return _0x42cab6(_0x3f52bf,_0x2c584a-0x3b0);}if(!this['show']||!defined(_0x2ce840))return;!defined(this['commandToExecute'])&&(this['commandToExecute']=this[_0x2a5d86(0x192,0x1f8)](_0x2ce840[_0x2a5d86(0x19c,0x1b8)]));defined(this[_0x4c001b(0x239,0x2b8)])&&this[_0x4c001b(0x305,0x2b8)]();if(!_0x2ce840[_0x4c001b(0x219,0x21d)]){console[_0x4c001b(0x18d,0x20d)]('frameState.commandList\x20is\x20undefined');return;}function _0x4c001b(_0x53f2cc,_0xf4ba72){return _0x584038(_0x53f2cc,_0xf4ba72-0xf7);}defined(this['clearCommand'])&&_0x2ce840['commandList']['push'](this['clearCommand']),defined(this['commandToExecute'])&&_0x2ce840['commandList'][_0x2a5d86(0x215,0x1c4)](this[_0x2a5d86(0x1c1,0x1a5)]);}['isDestroyed'](){return![];}['destroy'](){function _0x58094b(_0x406282,_0x38cb7a){return _0x42cab6(_0x38cb7a,_0x406282-0x4f7);}if(defined(this['commandToExecute'])){var _0x58a822;(_0x58a822=this[_0x56a931(0x85,0xae)]['shaderProgram'])===null||_0x58a822===void 0x0||_0x58a822[_0x56a931(0xef,0xb2)](),this['commandToExecute'][_0x56a931(0xbc,0x110)]=undefined;}function _0x56a931(_0x4a5f77,_0x56a22a){return _0x42cab6(_0x4a5f77,_0x56a22a-0x29d);}return destroyObject(this);}}function deepMerge(_0x50c7e8,_0x49ea64){if(!_0x50c7e8)return _0x49ea64;function _0x389d24(_0x5ee3c4,_0x18a135){return _0x42cab6(_0x18a135,_0x5ee3c4-0x116);}if(!_0x49ea64)return _0x50c7e8;function _0x4f8ee9(_0x52efaa,_0x2ec1cc){return _0x584038(_0x2ec1cc,_0x52efaa-0x425);}const _0xd2f23b={..._0x49ea64},_0x1cf62a=_0xd2f23b;for(const _0x566b8e in _0x50c7e8){if(Object[_0x389d24(-0x28,-0x3f)]['hasOwnProperty']['call'](_0x50c7e8,_0x566b8e)){const _0x44357c=_0x50c7e8[_0x566b8e],_0x260c31=_0x49ea64[_0x566b8e];if(Array['isArray'](_0x44357c)){_0x1cf62a[_0x566b8e]=_0x44357c['slice']();continue;}if(_0x44357c&&typeof _0x44357c===_0x4f8ee9(0x571,0x592)){_0x1cf62a[_0x566b8e]=deepMerge(_0x44357c,_0x260c31||{});continue;}_0x44357c!==undefined&&(_0x1cf62a[_0x566b8e]=_0x44357c);}}return _0x1cf62a;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x1aa41e,_0x12d889,_0x2fc62f,_0x30d011,_0x181efe){this['context']=_0x1aa41e,this[_0x207b04(-0x64,-0xcb)]=_0x2fc62f,this['viewerParameters']=_0x30d011,this['windData']=_0x12d889,this['frameRate']=0x3c;function _0x370d65(_0x37babb,_0x3068fe){return _0x42cab6(_0x37babb,_0x3068fe-0x423);}this['frameRateAdjustment']=0x1;const _0x1c7808={};_0x1c7808[_0x370d65(0x257,0x2c2)]=_0x181efe,_0x1c7808[_0x370d65(0x23a,0x21b)]=0x1,_0x1c7808['quietPeriod']=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x1c7808),this['initFrameRate'](),this['createWindTextures']();function _0x207b04(_0x4f4244,_0x4196e3){return _0x42cab6(_0x4f4244,_0x4196e3-0x9d);}this[_0x207b04(-0x139,-0xcc)](),this['createComputingPrimitives']();}['initFrameRate'](){const _0x48be63=()=>{function _0xc4e1fc(_0x56ce8a,_0x16f0c2){return _0x3f37(_0x16f0c2- -0x31b,_0x56ce8a);}function _0x440681(_0x13f06d,_0x4d38f4){return _0x3f37(_0x13f06d-0xb5,_0x4d38f4);}this['frameRateMonitor'][_0xc4e1fc(-0x108,-0x182)]>0x14&&(this['frameRate']=this[_0xc4e1fc(-0xbf,-0xc8)][_0x440681(0x24e,0x296)],this['frameRateAdjustment']=0x3c/Math[_0xc4e1fc(-0x136,-0xeb)](this['frameRate'],0x1));};_0x48be63();function _0x1f430a(_0x4afb64,_0x13bde9){return _0x584038(_0x13bde9,_0x4afb64-0x2ba);}const _0x486539=setInterval(_0x48be63,0x3e8),_0x452d50=this[_0x1f430a(0x3c0,0x363)]['bind'](this);this['destroy']=()=>{clearInterval(_0x486539),_0x452d50();};}[_0x584038(0x11e,0xf5)](){function _0x4f243e(_0x1a4e84,_0x53b9f0){return _0x584038(_0x1a4e84,_0x53b9f0-0x57);}const _0x12d593={};_0x12d593[_0x4ff07f(0x432,0x3c1)]=TextureMinificationFilter$1['LINEAR'],_0x12d593['magnificationFilter']=TextureMagnificationFilter$1[_0x4f243e(0x1d8,0x207)];function _0x4ff07f(_0x3cc142,_0x357733){return _0x584038(_0x357733,_0x3cc142-0x357);}const _0xb62ba0={'context':this['context'],'width':this['windData'][_0x4ff07f(0x4e8,0x4cd)],'height':this[_0x4f243e(0x1e6,0x1a4)]['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0x4ff07f(0x4e0,0x46e)]['flipY']??![],'sampler':new Sampler$1(_0x12d593)};this['windTextures']={'U':new Texture$1({..._0xb62ba0,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x4f243e(0x218,0x1d2)])}}),'V':new Texture$1({..._0xb62ba0,'source':{'arrayBufferView':new Float32Array(this['windData']['v']['array'])}})};}['createParticlesTextures'](){const _0x5867c2={};function _0x2408d1(_0x5ee453,_0x57497f){return _0x584038(_0x57497f,_0x5ee453- -0x30b);}function _0x26be4c(_0x3d4d67,_0x3d9c66){return _0x42cab6(_0x3d4d67,_0x3d9c66-0x4d9);}_0x5867c2[_0x26be4c(0x276,0x2c3)]=TextureMinificationFilter$1[_0x26be4c(0x2fb,0x345)],_0x5867c2[_0x26be4c(0x2ea,0x305)]=TextureMagnificationFilter$1['NEAREST'];const _0x2a0152={'context':this['context'],'width':this[_0x26be4c(0x37b,0x371)]['particlesTextureSize'],'height':this[_0x2408d1(-0x182,-0x122)][_0x26be4c(0x344,0x33f)],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this[_0x26be4c(0x332,0x371)]['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x5867c2)};this[_0x26be4c(0x3cd,0x377)]={'previousParticlesPosition':new Texture$1(_0x2a0152),'currentParticlesPosition':new Texture$1(_0x2a0152),'nextParticlesPosition':new Texture$1(_0x2a0152),'postProcessingPosition':new Texture$1(_0x2a0152),'particlesSpeed':new Texture$1(_0x2a0152)};}['destroyParticlesTextures'](){function _0x34bef5(_0xc236fb,_0x2dbc6d){return _0x584038(_0x2dbc6d,_0xc236fb-0xb);}function _0x11ddb2(_0x508350,_0x202641){return _0x584038(_0x202641,_0x508350-0x1c8);}Object[_0x34bef5(0x1ad,0x1dc)](this['particlesTextures'])['forEach'](_0x2c27c6=>_0x2c27c6[_0x11ddb2(0x2ce,0x2b6)]());}[_0x42cab6(-0x16a,-0x14d)](){function _0x4e84c1(_0x3b3579,_0x246c55){return _0x584038(_0x3b3579,_0x246c55-0xcf);}function _0x4ec531(_0x5769cd,_0x169884){return _0x584038(_0x5769cd,_0x169884-0x2d9);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x4e84c1(0x2a1,0x272),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this[_0x4e84c1(0x23b,0x252)]['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x4ec531(0x4e0,0x45e)],this['windData']['u']['max']),'vRange':()=>new Cartesian2$1(this['windData']['v']['min'],this[_0x4e84c1(0x272,0x21c)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData'][_0x4e84c1(0x22b,0x285)]['min'],this['windData'][_0x4ec531(0x4bd,0x48f)]['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x45ac69(_0x66b7f,_0x3d8033){return _0x4ec531(_0x3d8033,_0x66b7f- -0x341);}function _0x1fd207(_0x1265f8,_0x3532d0){return _0x4ec531(_0x3532d0,_0x1265f8- -0x9d);}return(this[_0x45ac69(0xe3,0x77)]['pixelSize']+0x32)*this['options'][_0x45ac69(0x14c,0xda)];},'frameRateAdjustment':()=>this[_0x4ec531(0x3f9,0x3b1)],'dimension':()=>new Cartesian2$1(this['windData']['width'],this[_0x4e84c1(0x1f6,0x21c)]['height']),'minimum':()=>new Cartesian2$1(this['windData']['bounds']['west'],this['windData']['bounds'][_0x4e84c1(0x246,0x230)]),'maximum':()=>new Cartesian2$1(this['windData']['bounds'][_0x4e84c1(0x19d,0x21e)],this[_0x4e84c1(0x284,0x21c)]['bounds'][_0x4e84c1(0x22f,0x263)])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this['particlesTextures']['particlesSpeed'],'preExecute':()=>{function _0x523a08(_0x1ab3af,_0x227e59){return _0x4e84c1(_0x227e59,_0x1ab3af- -0x10a);}const _0x16cfd6=this['particlesTextures']['previousParticlesPosition'];function _0x5b8dc8(_0x1d6650,_0x1465b6){return _0x4ec531(_0x1465b6,_0x1d6650- -0x2af);}this['particlesTextures']['previousParticlesPosition']=this['particlesTextures'][_0x5b8dc8(0x1d6,0x174)],this['particlesTextures']['currentParticlesPosition']=this[_0x5b8dc8(0x1b9,0x1e4)][_0x523a08(0xd9,0x92)],this['particlesTextures'][_0x5b8dc8(0x13e,0x192)]=_0x16cfd6,this['primitives'][_0x5b8dc8(0x165,0x1d1)]['commandToExecute']&&(this[_0x5b8dc8(0x196,0x198)]['calculateSpeed']['commandToExecute'][_0x5b8dc8(0x11e,0x171)]=this[_0x523a08(0x154,0x1a0)][_0x523a08(0x153,0x1c1)]);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'particlesSpeed':()=>this[_0x4e84c1(0x2c8,0x25e)]['particlesSpeed']},'fragmentShaderSource':ShaderManager[_0x4e84c1(0x2a1,0x26c)](),'outputTexture':this[_0x4e84c1(0x280,0x25e)][_0x4e84c1(0x259,0x241)],'preExecute':()=>{function _0xe0248c(_0x516b68,_0x3369d1){return _0x4e84c1(_0x3369d1,_0x516b68- -0x379);}function _0x45e2c0(_0x3afb88,_0x5de91c){return _0x4e84c1(_0x3afb88,_0x5de91c-0x233);}this['primitives']['updatePosition']['commandToExecute']&&(this['primitives']['updatePosition']['commandToExecute'][_0x45e2c0(0x3a9,0x3f6)]=this[_0x45e2c0(0x500,0x491)]['nextParticlesPosition']);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this[_0x4e84c1(0x252,0x25e)][_0x4ec531(0x45a,0x44b)],'particlesSpeed':()=>this['particlesTextures'][_0x4ec531(0x4ac,0x467)],'lonRange':()=>this[_0x4ec531(0x472,0x424)]['lonRange'],'latRange':()=>this[_0x4ec531(0x3aa,0x424)]['latRange'],'dataLonRange':()=>new Cartesian2$1(this[_0x4ec531(0x3d0,0x426)][_0x4ec531(0x3bc,0x3be)][_0x4ec531(0x34f,0x3ab)],this[_0x4e84c1(0x221,0x21c)]['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this[_0x4ec531(0x44e,0x426)]['bounds'][_0x4e84c1(0x2a8,0x230)],this[_0x4ec531(0x3cb,0x426)]['bounds']['north']),'randomCoefficient':function(){function _0x442159(_0x27d6f8,_0x54e231){return _0x4e84c1(_0x27d6f8,_0x54e231-0x74);}return Math[_0x442159(0x19b,0x211)]();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this[_0x4e84c1(0x2a4,0x258)][_0x4e84c1(0x1a6,0x1a9)],'useViewerBounds':()=>this['options']['useViewerBounds']},'fragmentShaderSource':ShaderManager[_0x4e84c1(0x28f,0x250)](),'outputTexture':this[_0x4e84c1(0x1fd,0x25e)]['postProcessingPosition'],'preExecute':()=>{function _0x15f3fa(_0x5be5e0,_0x873127){return _0x4e84c1(_0x5be5e0,_0x873127-0x20a);}function _0x3c8ab6(_0x1f2e58,_0x18c318){return _0x4e84c1(_0x1f2e58,_0x18c318-0x279);}this['primitives'][_0x15f3fa(0x464,0x3ed)][_0x15f3fa(0x43b,0x3db)]&&(this[_0x15f3fa(0x448,0x445)]['postProcessingPosition'][_0x15f3fa(0x35e,0x3db)][_0x15f3fa(0x397,0x3cd)]=this[_0x15f3fa(0x3ff,0x468)]['postProcessingPosition']);},'isDynamic':()=>this[_0x4e84c1(0x289,0x258)]['dynamic']})};}['reCreateWindTextures'](){function _0x258cbd(_0x3509f8,_0x389092){return _0x42cab6(_0x389092,_0x3509f8-0x3c);}this['windTextures']['U'][_0x539bbb(-0x3e,-0x98)]();function _0x539bbb(_0x177d4a,_0x19807b){return _0x584038(_0x177d4a,_0x19807b- -0x19e);}this['windTextures']['V'][_0x539bbb(-0x3c,-0x98)](),this['createWindTextures']();}['updateWindData'](_0xa0dd5c){function _0x6e2622(_0x27276b,_0x13b8d7){return _0x584038(_0x27276b,_0x13b8d7-0x2de);}this['windData']=_0xa0dd5c,this[_0x6e2622(0x48a,0x47f)]();}['updateOptions'](_0x1032d7){function _0x52bb15(_0x323ca8,_0x49f4ba){return _0x42cab6(_0x49f4ba,_0x323ca8-0x60d);}const _0x1957f9=_0x1032d7['flipY']!==undefined&&_0x1032d7['flipY']!==this['options']['flipY'];function _0x8e1eaf(_0x1d34ba,_0x441673){return _0x584038(_0x1d34ba,_0x441673- -0x75);}this['options']=deepMerge(_0x1032d7,this[_0x52bb15(0x4a5,0x481)]),_0x1957f9&&this[_0x52bb15(0x4bd,0x473)]();}['processWindData'](_0x43e873){const {array:_0x4a8648}=_0x43e873;function _0x1f47e5(_0x248892,_0xf0aa6c){return _0x42cab6(_0x248892,_0xf0aa6c-0x39f);}let {min:_0x3404c8,max:_0x108544}=_0x43e873;const _0x5a2186=new Float32Array(_0x4a8648['length']);_0x3404c8===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x3404c8=Math['min'](..._0x4a8648));function _0x2cd256(_0x5e3907,_0xcb1e63){return _0x42cab6(_0x5e3907,_0xcb1e63-0x25e);}_0x108544===undefined&&(console[_0x1f47e5(0x1e8,0x1c4)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x108544=Math['max'](..._0x4a8648));const _0x342891=Math['max'](Math[_0x2cd256(0xc2,0x53)](_0x3404c8),Math['abs'](_0x108544));for(let _0x3b74b0=0x0;_0x3b74b0<_0x4a8648[_0x2cd256(0x153,0xde)];_0x3b74b0++){const _0xd616db=_0x4a8648[_0x3b74b0]/_0x342891;_0x5a2186[_0x3b74b0]=_0xd616db;}return _0x5a2186;}['destroy'](){function _0x2c593e(_0x4e669d,_0xe12ca7){return _0x42cab6(_0xe12ca7,_0x4e669d-0x2);}function _0x38420c(_0x1c980f,_0xcbe79b){return _0x42cab6(_0xcbe79b,_0x1c980f-0x1ed);}Object[_0x38420c(0x9e,0x112)](this[_0x38420c(0x7f,0xdb)])[_0x2c593e(-0x121,-0x182)](_0x53a2be=>_0x53a2be[_0x2c593e(-0x1e9,-0x1ab)]()),Object['values'](this[_0x38420c(0x8b,0xdb)])['forEach'](_0x7be5d6=>_0x7be5d6['destroy']()),Object[_0x38420c(0x9e,0x63)](this[_0x2c593e(-0x183,-0x12e)])[_0x38420c(0xca,0x113)](_0x3e4c68=>_0x3e4c68[_0x2c593e(-0x1e9,-0x20a)]()),this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x14f6db,_0xf664f5,_0x18f7fb,_0x2dcd90){this['context']=_0x14f6db,this[_0x4617b7(0x156,0x1b7)]=_0xf664f5,this[_0xd36aec(0x415,0x3ac)]=_0x18f7fb;function _0x4617b7(_0x5a611d,_0x3cfe8c){return _0x584038(_0x5a611d,_0x3cfe8c-0x2e);}this['computing']=_0x2dcd90;(typeof this[_0x4617b7(0x1d1,0x1b7)]['particlesTextureSize']!==_0xd36aec(0x43c,0x42d)||this[_0x4617b7(0x18d,0x1b7)]['particlesTextureSize']<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this['options']['particlesTextureSize']=0x100);this['colorTable']=this['createColorTableTexture'](),this[_0xd36aec(0x3e8,0x3ec)]=this['createRenderingTextures'](),this['framebuffers']=this['createRenderingFramebuffers']();function _0xd36aec(_0x4bd60e,_0x2a27b1){return _0x584038(_0x4bd60e,_0x2a27b1-0x261);}this['primitives']=this[_0xd36aec(0x3e7,0x406)]();}['createRenderingTextures'](){const _0xe4f0c7={};_0xe4f0c7['context']=this['context'],_0xe4f0c7['width']=this[_0x1714b5(-0xd8,-0x6f)]['drawingBufferWidth'],_0xe4f0c7[_0x1714b5(0xd,0xe)]=this['context'][_0x18a316(0x61c,0x602)],_0xe4f0c7[_0x1714b5(-0xc8,-0x5b)]=PixelFormat['RGBA'],_0xe4f0c7[_0x18a316(0x634,0x672)]=PixelDatatype['UNSIGNED_BYTE'];const _0x3ab97f=_0xe4f0c7,_0x244d17={};function _0x18a316(_0x31993b,_0x27881f){return _0x584038(_0x27881f,_0x31993b-0x472);}_0x244d17['context']=this[_0x18a316(0x54f,0x5b2)],_0x244d17[_0x18a316(0x603,0x581)]=this['context'][_0x1714b5(-0x26,-0xd)],_0x244d17[_0x1714b5(-0x13,0xe)]=this['context'][_0x18a316(0x61c,0x636)],_0x244d17[_0x18a316(0x563,0x542)]=PixelFormat[_0x1714b5(0x23,-0x24)];function _0x1714b5(_0x332576,_0x8d4755){return _0x584038(_0x332576,_0x8d4755- -0x14c);}_0x244d17['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0x593dd5=_0x244d17;return{'segmentsColor':new Texture(_0x3ab97f),'segmentsDepth':new Texture(_0x593dd5)};}['createRenderingFramebuffers'](){const _0x30330f={};_0x30330f['context']=this['context'];function _0x5ec31a(_0x4d95ed,_0x783c23){return _0x584038(_0x783c23,_0x4d95ed- -0xee);}return _0x30330f['colorTextures']=[this[_0x5ec31a(0x9d,0x72)]['segmentsColor']],_0x30330f['depthTexture']=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0x30330f)};}['destoryRenderingFramebuffers'](){function _0x477864(_0xff0a33,_0x530ce1){return _0x584038(_0xff0a33,_0x530ce1-0x2ad);}Object['values'](this[_0x477864(0x452,0x3d7)])['forEach'](_0x2ebc2e=>{_0x2ebc2e['destroy']();});}['createColorTableTexture'](){const _0x491700=new Float32Array(this['options']['colors'][_0x5e3b16(-0x61,-0xb3)](_0x5cb55d=>{const _0x4cfcd3=Color$1['fromCssColorString'](_0x5cb55d);function _0x3ceb0e(_0x24c079,_0xe38284){return _0x5e3b16(_0xe38284,_0x24c079-0x129);}return[_0x4cfcd3['red'],_0x4cfcd3['green'],_0x4cfcd3[_0x3ceb0e(0x66,0xe3)],_0x4cfcd3['alpha']];})),_0x4fdae4={};_0x4fdae4[_0x5e3b16(-0x97,-0xcb)]=TextureMinificationFilter['LINEAR'],_0x4fdae4['magnificationFilter']=TextureMagnificationFilter['LINEAR'];function _0x5dddc3(_0x3587ee,_0x5d9541){return _0x42cab6(_0x3587ee,_0x5d9541-0x728);}_0x4fdae4[_0x5dddc3(0x535,0x50e)]=TextureWrap[_0x5dddc3(0x590,0x5ca)];function _0x5e3b16(_0x14675f,_0x82dbb8){return _0x42cab6(_0x14675f,_0x82dbb8-0x14b);}return _0x4fdae4[_0x5e3b16(0xd,0x1)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this[_0x5dddc3(0x581,0x514)],'width':this[_0x5e3b16(-0x71,-0x1d)]['colors']['length'],'height':0x1,'pixelFormat':PixelFormat[_0x5dddc3(0x5e7,0x575)],'pixelDatatype':PixelDatatype[_0x5e3b16(-0x6,-0x1a)],'sampler':new Sampler(_0x4fdae4),'source':{'width':this['options'][_0x5dddc3(0x552,0x57c)][_0x5e3b16(-0xaa,-0x35)],'height':0x1,'arrayBufferView':_0x491700}});}[_0x584038(0x146,0x1c7)](){const _0x4e6b4e=0x4,_0x11e890=this['options']['particlesTextureSize'];let _0x47e15e=[];for(let _0x3bbe43=0x0;_0x3bbe43<_0x11e890;_0x3bbe43++){for(let _0x238cb4=0x0;_0x238cb4<_0x11e890;_0x238cb4++){for(let _0x2eb00e=0x0;_0x2eb00e<_0x4e6b4e;_0x2eb00e++){_0x47e15e[_0x49f6b5(-0x193,-0x131)](_0x3bbe43/_0x11e890),_0x47e15e['push'](_0x238cb4/_0x11e890);}}}_0x47e15e=new Float32Array(_0x47e15e);const _0x5aa20d=this['options']['particlesTextureSize']**0x2;let _0xa61633=[];for(let _0x145298=0x0;_0x145298<_0x5aa20d;_0x145298++){_0xa61633[_0x2e4634(-0x1ac,-0x200)](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0xa61633=new Float32Array(_0xa61633);let _0x2ca60d=[];for(let _0x8a36f=0x0,_0x2b39b2=0x0;_0x8a36f<_0x5aa20d;_0x8a36f++){_0x2ca60d[_0x49f6b5(-0x198,-0x131)](_0x2b39b2+0x0,_0x2b39b2+0x1,_0x2b39b2+0x2,_0x2b39b2+0x2,_0x2b39b2+0x1,_0x2b39b2+0x3),_0x2b39b2+=_0x4e6b4e;}_0x2ca60d=new Uint32Array(_0x2ca60d);const _0x5999cf={};function _0x2e4634(_0x49734f,_0x13f3a0){return _0x584038(_0x13f3a0,_0x49734f- -0x302);}_0x5999cf['componentDatatype']=ComponentDatatype['FLOAT'],_0x5999cf[_0x49f6b5(-0xc5,-0x111)]=0x2,_0x5999cf['values']=_0x47e15e;const _0x3d92ce={};_0x3d92ce['componentDatatype']=ComponentDatatype['FLOAT'],_0x3d92ce['componentsPerAttribute']=0x3;function _0x49f6b5(_0x5d781c,_0x529e7f){return _0x42cab6(_0x5d781c,_0x529e7f-0x6a);}_0x3d92ce[_0x49f6b5(-0x6b,-0xe5)]=_0xa61633;const _0x4aeefd=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x5999cf),'normal':new GeometryAttribute(_0x3d92ce)}),'indices':_0x2ca60d});return _0x4aeefd;}['createRawRenderState'](_0x4e242a){const _0x52711f={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x4e242a};function _0x2fc8bd(_0x22ebfe,_0xeb9ea9){return _0x584038(_0x22ebfe,_0xeb9ea9- -0x207);}return Appearance[_0x2fc8bd(-0xc2,-0xae)](!![],![],_0x52711f);}['createPrimitives'](){const _0x5deb83={};_0x5deb83['st']=0x0,_0x5deb83[_0x45aeb9(0xd1,0xc9)]=0x1;const _0xbeb9a5={};_0xbeb9a5[_0x45aeb9(0x15b,0xe6)]=!![];const _0x2f93a5={};_0x2f93a5[_0x171420(0x5f5,0x5aa)]=!![],_0x2f93a5['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x2f93a5[_0x45aeb9(0x1be,0x17b)]=WebGLRenderingContext[_0x45aeb9(0x13d,0xc4)];function _0x171420(_0x2bedd8,_0x35f8ad){return _0x584038(_0x2bedd8,_0x35f8ad-0x48a);}_0x2f93a5['blendFuncDestination']=WebGLRenderingContext['ONE_MINUS_SRC_ALPHA'];const _0x213995={};function _0x45aeb9(_0x19d7ee,_0x40d414){return _0x584038(_0x19d7ee,_0x40d414- -0x3a);}_0x213995['viewport']=undefined,_0x213995['depthTest']=_0xbeb9a5,_0x213995[_0x171420(0x606,0x5a6)]=!![],_0x213995[_0x45aeb9(0xc9,0xaa)]=_0x2f93a5;const _0x153fa6=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x5deb83,'geometry':this[_0x171420(0x683,0x651)](),'primitiveType':PrimitiveType[_0x45aeb9(0x163,0xe7)],'uniformMap':{'previousParticlesPosition':()=>this[_0x171420(0x632,0x621)]['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this['computing'][_0x45aeb9(0x18b,0x155)][_0x45aeb9(0x1e2,0x172)],'postProcessingPosition':()=>this['computing']['particlesTextures']['postProcessingPosition'],'particlesSpeed':()=>this[_0x171420(0x5ec,0x621)][_0x171420(0x69a,0x619)]['particlesSpeed'],'frameRateAdjustment':()=>this[_0x45aeb9(0xf6,0x15d)]['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{function _0x1361fa(_0x1aef80,_0x223585){return _0x171420(_0x223585,_0x1aef80- -0x407);}function _0x5cce47(_0x397020,_0x5c576f){return _0x45aeb9(_0x5c576f,_0x397020- -0x73);}var _0x45992d,_0x47c6a9;const _0x55c56d=new Cartesian2(((_0x45992d=this[_0x1361fa(0x20c,0x213)][_0x1361fa(0x19e,0x11c)])===null||_0x45992d===void 0x0?void 0x0:_0x45992d['min'])??this['computing'][_0x5cce47(0xa0,0x101)]['speed']['min'],((_0x47c6a9=this[_0x5cce47(0xdc,0x6d)][_0x1361fa(0x19e,0x150)])===null||_0x47c6a9===void 0x0?void 0x0:_0x47c6a9['max'])??this['computing']['windData'][_0x1361fa(0x239,0x20e)][_0x1361fa(0x1fb,0x1c2)]);return _0x55c56d;},'displayRange':()=>{function _0x18db36(_0x5a21ab,_0x2d5960){return _0x45aeb9(_0x5a21ab,_0x2d5960- -0x1d7);}var _0x1814ba,_0x56eecb;function _0x118a24(_0x9eece1,_0x451d27){return _0x45aeb9(_0x451d27,_0x9eece1-0x35d);}const _0xcf55d=new Cartesian2(((_0x1814ba=this['options']['displayRange'])===null||_0x1814ba===void 0x0?void 0x0:_0x1814ba[_0x18db36(-0x18,-0x8c)])??this[_0x118a24(0x4ba,0x4d6)]['windData']['speed'][_0x118a24(0x4a8,0x45c)],((_0x56eecb=this['options'][_0x118a24(0x48e,0x45a)])===null||_0x56eecb===void 0x0?void 0x0:_0x56eecb[_0x18db36(-0x53,-0x99)])??this['computing'][_0x118a24(0x470,0x4b4)]['speed']['max']);return _0xcf55d;},'particleHeight':()=>this['options'][_0x45aeb9(0x114,0x117)]||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x4da89b={};_0x4da89b['min']=0x1,_0x4da89b[_0x87fd2d(0x57e,0x55f)]=0x2;function _0x87fd2d(_0x3b2371,_0x103655){return _0x45aeb9(_0x3b2371,_0x103655-0x421);}const _0x13be07=this['options'][_0x87fd2d(0x507,0x4d4)]||_0x4da89b;function _0x25c285(_0x2d1ae1,_0xa5fdf1){return _0x171420(_0xa5fdf1,_0x2d1ae1- -0x4e7);}return new Cartesian2(_0x13be07['min'],_0x13be07[_0x25c285(0x11b,0xa4)]);},'lineLength':()=>{const _0xbfcb88={};_0xbfcb88['min']=0x14,_0xbfcb88['max']=0x64;function _0x192917(_0x7aa285,_0xb54d67){return _0x171420(_0xb54d67,_0x7aa285- -0x3e);}const _0x44c013=this[_0x429603(0x511,0x531)]['lineLength']||_0xbfcb88;function _0x429603(_0x269686,_0x2fbf12){return _0x171420(_0x269686,_0x2fbf12- -0xe2);}return new Cartesian2(_0x44c013['min'],_0x44c013[_0x192917(0x5c4,0x60e)]);},'is3D':()=>this[_0x45aeb9(0xfd,0x111)]['sceneMode']===SceneMode[_0x171420(0x643,0x608)],'segmentsDepthTexture':()=>this['textures']['segmentsDepth']},'vertexShaderSource':ShaderManager[_0x45aeb9(0xc8,0x107)](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x213995)}),_0x4cdc01={};return _0x4cdc01[_0x45aeb9(0xe3,0xd0)]=_0x153fa6,_0x4cdc01;}['onParticlesTextureSizeChange'](){const _0x38a6d4=this[_0x45e02e(0x1cc,0x1b3)]();this[_0x14f32b(0x285,0x28f)][_0x14f32b(0x270,0x22d)]['geometry']=_0x38a6d4;function _0x45e02e(_0x4c2687,_0x2efef3){return _0x584038(_0x2efef3,_0x4c2687-0x5);}const _0x19091e={};_0x19091e['context']=this['context'];function _0x14f32b(_0x7bf390,_0x2e099c){return _0x584038(_0x7bf390,_0x2e099c-0x123);}_0x19091e['geometry']=_0x38a6d4,_0x19091e[_0x45e02e(0x1d5,0x249)]=this['primitives']['segments']['attributeLocations'],_0x19091e[_0x14f32b(0x246,0x28b)]=BufferUsage['STATIC_DRAW'];const _0x3872e1=VertexArray['fromGeometry'](_0x19091e);this['primitives']['segments'][_0x14f32b(0x221,0x225)]&&(this['primitives']['segments'][_0x14f32b(0x1c2,0x225)][_0x45e02e(0x132,0xd6)]=_0x3872e1);}[_0x42cab6(-0x182,-0x1a3)](){function _0x381595(_0x170100,_0x1ac6a7){return _0x42cab6(_0x1ac6a7,_0x170100-0x1fb);}this[_0x381595(0x89,0x9c)]['destroy'](),this['colorTable']=this['createColorTableTexture']();}['updateOptions'](_0x395f89){const _0x47dbcb=_0x395f89['colors']&&JSON['stringify'](_0x395f89['colors'])!==JSON['stringify'](this['options']['colors']);this[_0x33d798(0xa7,0xaa)]=deepMerge(_0x395f89,this['options']);function _0x33d798(_0x35c81f,_0xf7e6c7){return _0x584038(_0x35c81f,_0xf7e6c7- -0xdf);}_0x47dbcb&&this['onColorTableChange']();}['destroy'](){Object['values'](this['framebuffers'])[_0x2ebc4e(0x3e1,0x3cb)](_0x878bf8=>{function _0x1be4f5(_0x60a50e,_0x48e052){return _0x2ebc4e(_0x60a50e- -0xe2,_0x48e052);}_0x878bf8[_0x1be4f5(0x237,0x27b)]();}),Object['values'](this[_0x5c2cf2(0xf5,0x99)])['forEach'](_0x5e7aa9=>{_0x5e7aa9['destroy']();});function _0x2ebc4e(_0x149bda,_0x4a8577){return _0x42cab6(_0x4a8577,_0x149bda-0x504);}function _0x5c2cf2(_0x3434bb,_0x23efaa){return _0x584038(_0x3434bb,_0x23efaa- -0xd3);}this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0xb278c7,_0x1c61ea,_0x4116d0,_0x512f08,_0x1d3127){function _0x415a28(_0x55f68b,_0x4456bd){return _0x584038(_0x4456bd,_0x55f68b- -0x1e9);}this[_0x415a28(-0x10c,-0x146)]=_0xb278c7,this['options']=_0x4116d0,this['viewerParameters']=_0x512f08,this['computing']=new WindParticlesComputing(_0xb278c7,_0x1c61ea,_0x4116d0,_0x512f08,_0x1d3127),this['rendering']=new WindParticlesRendering(_0xb278c7,_0x4116d0,_0x512f08,this['computing']),this['clearFramebuffers']();}['getPrimitives'](){function _0x4cb759(_0x30abdb,_0x44ee79){return _0x584038(_0x30abdb,_0x44ee79- -0x264);}function _0x5bbe60(_0x2267f5,_0x110050){return _0x42cab6(_0x110050,_0x2267f5-0x706);}const _0x34d0b0=[this['computing']['primitives']['calculateSpeed'],this['computing']['primitives'][_0x5bbe60(0x5c6,0x649)],this[_0x4cb759(-0x121,-0xcd)][_0x5bbe60(0x581,0x5be)][_0x5bbe60(0x529,0x583)],this[_0x4cb759(-0x1a5,-0x197)][_0x5bbe60(0x581,0x50b)][_0x5bbe60(0x51f,0x4aa)]];return _0x34d0b0;}['clearFramebuffers'](){const _0x2c597f=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});function _0xbd2226(_0x3236ba,_0x4cc354){return _0x584038(_0x3236ba,_0x4cc354-0x209);}function _0x8ba66d(_0x57aed0,_0xd2300c){return _0x584038(_0xd2300c,_0x57aed0- -0x2e8);}Object[_0xbd2226(0x390,0x3d1)](this[_0xbd2226(0x25f,0x2d6)][_0x8ba66d(-0x1be,-0x1a2)])['forEach'](_0x185041=>{function _0x2af37d(_0x517dd7,_0x21c814){return _0x8ba66d(_0x21c814-0x148,_0x517dd7);}function _0x1e6643(_0x9b7a4a,_0x47afad){return _0xbd2226(_0x47afad,_0x9b7a4a- -0x15b);}_0x2c597f[_0x1e6643(0x1e1,0x1d6)]=this[_0x1e6643(0x17b,0xfa)][_0x2af37d(-0x64,-0x76)][_0x185041],_0x2c597f['execute'](this['context']);});}['changeOptions'](_0x70525){let _0x5bba64=![];function _0x21880b(_0x1ca07c,_0x184ec6){return _0x584038(_0x184ec6,_0x1ca07c-0x3c3);}_0x70525[_0x12f150(0x54d,0x521)]&&this[_0x12f150(0x57f,0x590)]['particlesTextureSize']!==_0x70525[_0x12f150(0x54d,0x5c2)]&&(_0x5bba64=!![]);const _0x4e1110=deepMerge(_0x70525,this[_0x12f150(0x57f,0x5d8)]);if(_0x4e1110[_0x12f150(0x54d,0x54d)]<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x4e1110,this['rendering']['updateOptions'](_0x70525);function _0x12f150(_0xfdefe1,_0x4f8491){return _0x42cab6(_0x4f8491,_0xfdefe1-0x6e7);}this[_0x21880b(0x55a,0x515)]['updateOptions'](_0x70525),_0x5bba64&&(this[_0x12f150(0x58d,0x550)]['destroyParticlesTextures'](),this[_0x12f150(0x58d,0x581)]['createParticlesTextures'](),this['rendering']['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0xc2645e){this['viewerParameters']=_0xc2645e;function _0xb116ee(_0x1cc4dd,_0x434422){return _0x42cab6(_0x434422,_0x1cc4dd-0x545);}this[_0x2db478(-0x170,-0x1e0)][_0x2db478(-0x1bc,-0x209)]=_0xc2645e;function _0x2db478(_0x22de05,_0x124857){return _0x42cab6(_0x124857,_0x22de05- -0x16);}this['rendering']['viewerParameters']=_0xc2645e;}[_0x584038(0x128,0x106)](){function _0x2d9be(_0x94330a,_0x4f8b27){return _0x584038(_0x4f8b27,_0x94330a-0x3f7);}function _0x5a8714(_0x45fd0e,_0x558812){return _0x584038(_0x45fd0e,_0x558812-0x11);}this[_0x5a8714(0x126,0x1a8)]['destroy'](),this['rendering'][_0x5a8714(0x143,0x117)]();}}const Cesium$1=mars3d__namespace[_0x584038(0x241,0x1c0)],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'];function _0x584038(_0x5b54d9,_0x5a0568){return _0x3f37(_0x5a0568- -0xb8,_0x5b54d9);}const _0x284fdc={};_0x284fdc['min']=0x1,_0x284fdc[_0x42cab6(-0x145,-0x179)]=0x2;const _0x337521={};_0x337521['min']=0x14,_0x337521[_0x42cab6(-0x118,-0x179)]=0x64;const _0xeeffa={};function _0x130c(){const _0x5d0847=['rgb(206,255,255)','domain','depthMask','magnificationFilter','create','toGridXY','enabled','TRIANGLES','pow','ymin','geometry','12625317gebtfz','commandList','canvasWind','DEPTH_COMPONENT','Unknown\x20command\x20type','framebuffers','age','alt','vertexArray','clientWidth','_animateFrame','show','canvasContext','STATIC_DRAW','framebuffer','primitiveType','modelMatrix','pixelSize','update','data','resize','moveTo','calculateSpeed','rows','vmax','RGBA','drawingBufferWidth','#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a','getSegmentDrawVertexShader','fragmentShaderSource','tlat','processWindData','colors','fromDegrees','3282856MIaPnA','maxAge','clientHeight','mouseDown','viewerParameters','object','windData','onColorTableChange','east','_calc_speedRate','fixedHeight','lineLength','1384374KTjaEQ','updateViewerParameters','off','push','particlesTextureSize','mouseMove','getDefaultRenderState','height','OPAQUE','removeEventListener','NEAREST','canvasWidth','MIN_VALUE','globe','south','Draw','rectangle','shaderProgram','persists','mouse_down','isPointVisible','bufferUsage','floor','logInfo','displayRange','primitives','stroke','udata','vertexShaderSource','autoClear','length','nextParticlesPosition','EventType','xmin','particles','componentsPerAttribute','_colorRamp','max','IDENTITY','isInExtent','array','_showHook','_map','SCENE3D','colorTable','0px','getPostProcessingPositionShader','_updateIng','windTextures','tlng','min','pointerEvents','xmax','createParticlesTextures','options','now','textures','FLOAT','Rectangle','particlesSpeed','particlesTextures','scene','width','_removedHook','CLAMP_TO_EDGE','north','particlesNumber','sources','computing','ellipsoid','redraw','lat','frameRateMonitor','postMessage','getUpdatePositionShader','register','ymax','_canvasParticles','reCreateWindTextures','values','Compute','createComputingPrimitives','createPrimitives','mouse_move','wrapT','setData','getPrimitives','drawingBufferHeight','latitude','currentParticlesPosition','frameTime','2866805cldUvv','_calcUV','LINEAR','updatePosition','bind','prototype','speedFactor','blendFuncSource','speed','windField','mode','4VxAQPQ','CanvasWindField','flipY','getUVByXY','grid','visibility','addEventListener','Cesium','preExecute','pixelDatatype','canvas','_onMouseMoveEvent','1489704gzUuQe','_updateIng2','createSegmentsGeometry','keys','commandType','_tomap','_onMouseUpEvent','number','6isPWcU','forEach','auto','attributeLocations','cols','rendering','random','renderState','changed','destination-in','west','createCommand','uniformMap','_drawLines','pointer-events','wrapS','frameRateAdjustment','worker','dropRateBump','minificationFilter','CanvasWindLayer','context','6528319YAjbtz','default','Math','lastFramesPerSecond','style','blue','blending','bounds','abs','canvasHeight','\x20\x20\x20\x20编译日期：','samplingWindow','particleSystem','Cartesian2','lng','lineWidth','setGeometry','675782rcUfdO','none','pixelFormat','top','flatMap','outputTexture','createWindTextures','_randomParticle','_setOptionsHook','getColor','clear','layer','getRandomLatLng','MAX_VALUE','camera','SRC_ALPHA','mars3d-canvasWind','lineTo','value','commandToExecute','normal','bindEvent','toWindowCoordinates','destroy','speedRate','defineProperty','container','segments','setDate','_onMouseDownEvent','type','zIndex','interpolated','_pointerEvents','_speedRate','lighter','fromGeometry','postProcessingPosition','owner','warn','_createCanvas','setOptions','getUVByPoint'];_0x130c=function(){return _0x5d0847;};return _0x130c();}_0xeeffa[_0x42cab6(-0x216,-0x19a)]=0x64,_0xeeffa['fixedHeight']=0x0,_0xeeffa[_0x42cab6(-0x1fc,-0x204)]=_0x284fdc,_0xeeffa[_0x42cab6(-0x12f,-0x19f)]=_0x337521,_0xeeffa['speedFactor']=0x1,_0xeeffa['dropRate']=0.003,_0xeeffa['dropRateBump']=0.001,_0xeeffa[_0x584038(0x18a,0x145)]=[_0x584038(0x129,0x11a)],_0xeeffa['flipY']=![],_0xeeffa['dynamic']=!![];const DEF_OPTIONS=_0xeeffa;class WindLayer extends BaseLayer$1{constructor(_0x10876a={}){_0x10876a={...DEF_OPTIONS,..._0x10876a},super(_0x10876a),this['_setOptionsHook'](_0x10876a,_0x10876a);}get['layer'](){function _0x3a6608(_0x967441,_0x2ce2f0){return _0x584038(_0x2ce2f0,_0x967441-0x3e1);}return this[_0x3a6608(0x54d,0x4e1)];}get['data'](){return this['options']['data'];}set['data'](_0x5aa907){this[_0x4edbd9(-0x11a,-0x11d)]['data']=_0x5aa907;function _0x4edbd9(_0x21a3e4,_0x213f2e){return _0x42cab6(_0x21a3e4,_0x213f2e-0x4b);}this['setData'](_0x5aa907);}get[_0x42cab6(-0x1fd,-0x1ac)](){function _0x33b55a(_0xf6d338,_0x95948e){return _0x584038(_0x95948e,_0xf6d338- -0x203);}return this['options'][_0x33b55a(-0xbe,-0xa0)];}set['colors'](_0x21a52b){this[_0x5846a4(0xaf,0xdf)]['colors']=_0x21a52b;function _0x5846a4(_0x4710ac,_0x1ba89a){return _0x584038(_0x4710ac,_0x1ba89a- -0xaa);}const _0x495ae6={};_0x495ae6['colors']=_0x21a52b,this['_setOptionsHook'](this['options'],_0x495ae6);}[_0x584038(0x1b6,0x17c)](_0x324e6){_0x324e6?this['_addedHook']():this['_removedHook']();}['_mountedHook'](){}['_addedHook'](){this[_0x338881(0x126,0x11d)]=this[_0x1c54bc(-0xcf,-0x131)]['scene'],this[_0x1c54bc(-0x162,-0x1b1)]=this[_0x1c54bc(-0x152,-0x131)]['camera'];this['options']['data']&&this['setData'](this[_0x1c54bc(-0xf1,-0x125)][_0x338881(0x122,0xc5)]);if(!this['windData']||!this[_0x338881(0x99,0xbd)])return;this[_0x1c54bc(-0x1a4,-0x163)]={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1['Cartesian2'](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this[_0x1c54bc(-0x18a,-0x11e)]['mode']},this[_0x338881(0x79,0xe1)](),this[_0x338881(0xea,0x77)]=new WindParticleSystem(this[_0x338881(0x154,0x11d)][_0x1c54bc(-0x249,-0x1d1)],this[_0x338881(0x6a,0xda)],this['options'],this['viewerParameters'],this[_0x1c54bc(-0xcc,-0x11e)]),this['primitives']=this[_0x338881(0x68,0x77)][_0x1c54bc(-0xf1,-0x105)](),this[_0x1c54bc(-0x12b,-0x142)][_0x338881(0x1c7,0x15b)](_0x29a7fb=>{this['scene']['primitives']['add'](_0x29a7fb);}),this[_0x338881(0xea,0x8a)]['percentageChanged']=0.01;function _0x1c54bc(_0xf78493,_0x45beeb){return _0x42cab6(_0xf78493,_0x45beeb-0x43);}this['camera'][_0x1c54bc(-0x1fc,-0x1de)][_0x1c54bc(-0x140,-0xef)](this['updateViewerParameters']['bind'](this));function _0x338881(_0x54c1e3,_0x1354fc){return _0x584038(_0x54c1e3,_0x1354fc- -0x73);}this['scene']['morphComplete']['addEventListener'](this[_0x1c54bc(-0x1a1,-0x15a)]['bind'](this)),window[_0x1c54bc(-0xbc,-0xef)]('resize',this[_0x338881(0x93,0xe1)]['bind'](this));}['_removedHook'](){this[_0x2c29a1(-0x152,-0x159)]['changed'][_0x3e1739(0x3ff,0x412)](this[_0x2c29a1(-0x139,-0x102)]['bind'](this)),this['scene']['morphComplete']['removeEventListener'](this['updateViewerParameters']['bind'](this));function _0x3e1739(_0x301dec,_0x80a4c1){return _0x584038(_0x301dec,_0x80a4c1-0x2b6);}window['removeEventListener'](_0x2c29a1(-0x112,-0x11d),this['updateViewerParameters'][_0x3e1739(0x487,0x468)](this));this[_0x2c29a1(-0x14c,-0xea)]&&(this['primitives'][_0x3e1739(0x444,0x484)](_0xc280bd=>{function _0x52e32e(_0x3b1f69,_0x33e632){return _0x3e1739(_0x33e632,_0x3b1f69- -0x112);}this['scene'][_0x52e32e(0x310,0x2fc)]['remove'](_0xc280bd);}),delete this[_0x3e1739(0x42f,0x422)]);function _0x2c29a1(_0x41ca49,_0x9ce399){return _0x42cab6(_0x41ca49,_0x9ce399-0x9b);}this[_0x3e1739(0x3ba,0x3a0)]&&(this[_0x2c29a1(-0x10f,-0x16c)]['destroy'](),delete this[_0x2c29a1(-0x1d5,-0x16c)]);}['setData'](_0x397fb5,_0x33a9bc){this['windData']=this['processWindData'](_0x397fb5);function _0x27a83b(_0x5f33d5,_0x3da3b4){return _0x584038(_0x3da3b4,_0x5f33d5-0x1a9);}function _0x2025dc(_0xc270d8,_0x46c709){return _0x584038(_0x46c709,_0xc270d8- -0x2c6);}if(_0x33a9bc){this[_0x2025dc(-0x134,-0x138)](),this['_addedHook']();return;}this[_0x27a83b(0x293,0x27b)]?(this[_0x2025dc(-0x1dc,-0x15e)]['computing']['updateWindData'](this[_0x2025dc(-0x179,-0x100)]),this[_0x27a83b(0x339,0x331)]['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0xe8d10c,_0x155444){function _0x358674(_0x34dd36,_0x1b3231){return _0x42cab6(_0x34dd36,_0x1b3231-0xd5);}function _0x4c1c6e(_0x5d74d0,_0x3dbd53){return _0x42cab6(_0x5d74d0,_0x3dbd53-0x601);}this[_0x4c1c6e(0x468,0x3fa)]&&(this[_0x358674(-0x1a5,-0x132)]['changeOptions'](_0x155444),this[_0x358674(-0x81,-0x8c)]['requestRender']());}[_0x584038(0x115,0x144)](_0x25dddd){var _0x2ff662,_0x49f99e;const _0xb3fde2={..._0x25dddd},_0x14e96b=_0xb3fde2;function _0x1d8fcf(_0x462aea,_0x434653){return _0x42cab6(_0x462aea,_0x434653-0x296);}function _0x2c1bc9(_0x2c3c98,_0x22303e){return _0x584038(_0x22303e,_0x2c3c98-0x373);}!_0x14e96b['height']&&_0x14e96b[_0x2c1bc9(0x4af,0x4c1)]&&(_0x14e96b['height']=_0x14e96b['rows']);!_0x14e96b['width']&&_0x14e96b[_0x2c1bc9(0x544,0x582)]&&(_0x14e96b[_0x2c1bc9(0x504,0x563)]=_0x14e96b['cols']);!_0x14e96b['bounds']&&(_0x14e96b['bounds']={'west':_0x14e96b[_0x1d8fcf(0xf5,0x119)],'south':_0x14e96b['ymin'],'east':_0x14e96b[_0x2c1bc9(0x4fa,0x49c)],'north':_0x14e96b['ymax']});if(!_0x14e96b['u']){const _0x615431={};_0x615431['array']=_0x25dddd[_0x2c1bc9(0x4e1,0x55c)],_0x615431['min']=_0x25dddd['umin'],_0x615431['max']=_0x25dddd['umax'],_0x14e96b['u']=_0x615431;}if(!_0x14e96b['v']){const _0x4c2008={};_0x4c2008[_0x1d8fcf(0xec,0x120)]=_0x25dddd['vdata'],_0x4c2008[_0x2c1bc9(0x4f8,0x4c5)]=_0x25dddd['vmin'],_0x4c2008['max']=_0x25dddd[_0x1d8fcf(0xad,0xe2)],_0x14e96b['v']=_0x4c2008;}if(((_0x2ff662=_0x14e96b[_0x1d8fcf(0x1c6,0x15b)])===null||_0x2ff662===void 0x0?void 0x0:_0x2ff662[_0x1d8fcf(0x173,0x12a)])===undefined||((_0x49f99e=_0x14e96b['speed'])===null||_0x49f99e===void 0x0?void 0x0:_0x49f99e[_0x1d8fcf(0x148,0x11d)])===undefined||_0x14e96b['speed'][_0x1d8fcf(0xfb,0x120)]===undefined){const _0xfc8f7a={'array':new Float32Array(_0x14e96b['u']['array']['length']),'min':Number[_0x1d8fcf(0x6e,0xa1)],'max':Number[_0x2c1bc9(0x4d2,0x490)]};for(let _0x21869b=0x0;_0x21869b<_0x14e96b['u'][_0x2c1bc9(0x4ee,0x46e)]['length'];_0x21869b++){_0xfc8f7a['array'][_0x21869b]=Math['sqrt'](_0x14e96b['u']['array'][_0x21869b]*_0x14e96b['u'][_0x1d8fcf(0xbe,0x120)][_0x21869b]+_0x14e96b['v']['array'][_0x21869b]*_0x14e96b['v']['array'][_0x21869b]),_0xfc8f7a[_0x2c1bc9(0x4ee,0x46f)][_0x21869b]!==0x0&&(_0xfc8f7a[_0x1d8fcf(0xf9,0x12a)]=Math[_0x1d8fcf(0xa9,0x12a)](_0xfc8f7a['min'],_0xfc8f7a[_0x1d8fcf(0xa7,0x120)][_0x21869b]),_0xfc8f7a[_0x2c1bc9(0x4eb,0x52d)]=Math[_0x2c1bc9(0x4eb,0x4ca)](_0xfc8f7a['max'],_0xfc8f7a['array'][_0x21869b]));}_0x14e96b['speed']=_0xfc8f7a;}return _0x14e96b;}[_0x584038(0x141,0x154)](){var _0x1352fc;const _0xa9ab2=this['scene'];if(!_0xa9ab2)return;const _0x3a174f=_0xa9ab2['canvas'],_0x299e06={};_0x299e06['x']=0x0,_0x299e06['y']=0x0;const _0x1d2434={};_0x1d2434['x']=0x0;function _0x3ea4e5(_0x4ddf22,_0x17b11e){return _0x584038(_0x4ddf22,_0x17b11e-0x6c);}_0x1d2434['y']=_0x3a174f[_0x3ea4e5(0x1ff,0x1b5)];const _0x21e3a1={};_0x21e3a1['x']=_0x3a174f['clientWidth'],_0x21e3a1['y']=0x0;const _0x16d1cd={};_0x16d1cd['x']=_0x3a174f[_0x49b9fb(0x258,0x2c8)],_0x16d1cd['y']=_0x3a174f['clientHeight'];const _0x650c98=[_0x299e06,_0x1d2434,_0x21e3a1,_0x16d1cd];let _0x1abaa4=0xb4,_0x2419f3=-0xb4;function _0x49b9fb(_0x593e86,_0x3e31f3){return _0x584038(_0x3e31f3,_0x593e86-0x12a);}let _0xff203d=0x5a,_0x1c4f41=-0x5a,_0x15e4bd=![];for(const _0x47405a of _0x650c98){const _0x2d0a9a=_0xa9ab2[_0x3ea4e5(0x11c,0x169)]['pickEllipsoid'](new Cesium$1[(_0x3ea4e5(0xee,0x157))](_0x47405a['x'],_0x47405a['y']),_0xa9ab2[_0x3ea4e5(0x160,0x1cc)]['ellipsoid']);if(!_0x2d0a9a){_0x15e4bd=!![];break;}const _0x2fc150=_0xa9ab2[_0x3ea4e5(0x1c3,0x1cc)][_0x49b9fb(0x2c2,0x266)]['cartesianToCartographic'](_0x2d0a9a),_0x528701=Cesium$1['Math']['toDegrees'](_0x2fc150['longitude']),_0x36633f=Cesium$1['Math']['toDegrees'](_0x2fc150[_0x3ea4e5(0x26d,0x217)]);_0x1abaa4=Math['min'](_0x1abaa4,_0x528701),_0x2419f3=Math['max'](_0x2419f3,_0x528701),_0xff203d=Math[_0x3ea4e5(0x1b6,0x1f1)](_0xff203d,_0x36633f),_0x1c4f41=Math[_0x49b9fb(0x2a2,0x237)](_0x1c4f41,_0x36633f);}if(!_0x15e4bd){const _0x499263=new Cesium$1['Cartesian2'](Math[_0x49b9fb(0x2a2,0x2ba)](this[_0x3ea4e5(0x196,0x1b9)][_0x49b9fb(0x20f,0x198)][_0x49b9fb(0x1fc,0x239)],_0x1abaa4),Math['min'](this[_0x49b9fb(0x277,0x200)][_0x3ea4e5(0x18c,0x151)]['east'],_0x2419f3)),_0x46de57=new Cesium$1['Cartesian2'](Math['max'](this['windData'][_0x3ea4e5(0xf7,0x151)][_0x49b9fb(0x28b,0x245)],_0xff203d),Math['min'](this[_0x3ea4e5(0x137,0x1b9)]['bounds']['north'],_0x1c4f41)),_0xbc6f9b=(_0x499263['y']-_0x499263['x'])*0.05,_0x21a0b8=(_0x46de57['y']-_0x46de57['x'])*0.05;_0x499263['x']=Math[_0x49b9fb(0x2a2,0x311)](this[_0x49b9fb(0x277,0x295)]['bounds'][_0x49b9fb(0x1fc,0x21d)],_0x499263['x']-_0xbc6f9b),_0x499263['y']=Math[_0x49b9fb(0x2af,0x2e7)](this['windData']['bounds'][_0x49b9fb(0x279,0x24a)],_0x499263['y']+_0xbc6f9b),_0x46de57['x']=Math['max'](this['windData']['bounds'][_0x3ea4e5(0x24e,0x1cd)],_0x46de57['x']-_0x21a0b8),_0x46de57['y']=Math['min'](this['windData'][_0x3ea4e5(0x102,0x151)][_0x3ea4e5(0x233,0x200)],_0x46de57['y']+_0x21a0b8),this['viewerParameters']['lonRange']=_0x499263,this[_0x49b9fb(0x275,0x2e4)]['latRange']=_0x46de57;const _0x2083b1=this['windData']['bounds'][_0x3ea4e5(0x21a,0x1bb)]-this['windData'][_0x3ea4e5(0x129,0x151)]['west'],_0x68dd62=this['windData']['bounds'][_0x3ea4e5(0x276,0x200)]-this['windData']['bounds'][_0x49b9fb(0x28b,0x281)],_0x2266df=(_0x499263['y']-_0x499263['x'])/_0x2083b1,_0x26d5d0=(_0x46de57['y']-_0x46de57['x'])/_0x68dd62,_0x459be0=Math[_0x3ea4e5(0x207,0x1f1)](_0x2266df,_0x26d5d0),_0x35b4a4=0x3e8*_0x459be0;_0x35b4a4>0x0&&(this[_0x3ea4e5(0x21b,0x1b7)][_0x49b9fb(0x260,0x228)]=Math[_0x49b9fb(0x2a2,0x2fd)](0x0,Math['min'](0x3e8,_0x35b4a4)));}this[_0x49b9fb(0x275,0x2d7)]['sceneMode']=this[_0x49b9fb(0x2ba,0x2d4)]['mode'],(_0x1352fc=this['particleSystem'])===null||_0x1352fc===void 0x0||_0x1352fc['applyViewerParameters'](this['viewerParameters']);}['getDataAtLonLat'](_0x4278f9,_0x35c377){const {bounds:_0x438800,width:_0x42f563,height:_0x1372d6,u:_0x5f387f,v:_0xa50b6a,speed:_0x50b1be}=this['windData'],{flipY:_0x39074c}=this[_0x41c8d2(0x5c7,0x5ea)];if(_0x4278f9<_0x438800['west']||_0x4278f9>_0x438800['east']||_0x35c377<_0x438800[_0x453793(0x285,0x255)]||_0x35c377>_0x438800[_0x453793(0x2b8,0x2fd)])return null;const _0x1b1541=(_0x4278f9-_0x438800['west'])/(_0x438800['east']-_0x438800['west'])*(_0x42f563-0x1);let _0x102c2d=(_0x35c377-_0x438800['south'])/(_0x438800['north']-_0x438800['south'])*(_0x1372d6-0x1);_0x39074c&&(_0x102c2d=_0x1372d6-0x1-_0x102c2d);const _0x5dd03d=Math[_0x453793(0x28d,0x247)](_0x1b1541),_0x4b78df=Math['floor'](_0x102c2d),_0x22e453=Math['floor'](_0x1b1541),_0x47400e=Math['min'](_0x22e453+0x1,_0x42f563-0x1),_0x18ebc8=Math['floor'](_0x102c2d),_0xd811cf=Math[_0x453793(0x2a9,0x312)](_0x18ebc8+0x1,_0x1372d6-0x1),_0x515a32=_0x1b1541-_0x22e453,_0x84018e=_0x102c2d-_0x18ebc8,_0x572983=_0x4b78df*_0x42f563+_0x5dd03d,_0x20fbba=_0x18ebc8*_0x42f563+_0x22e453,_0x50c437=_0x18ebc8*_0x42f563+_0x47400e,_0x1ccbd3=_0xd811cf*_0x42f563+_0x22e453,_0x59949f=_0xd811cf*_0x42f563+_0x47400e,_0x45ceb1=_0x5f387f[_0x453793(0x29f,0x2ac)][_0x20fbba],_0x48834b=_0x5f387f['array'][_0x50c437];function _0x453793(_0x58c7c4,_0x3bc3b1){return _0x42cab6(_0x3bc3b1,_0x58c7c4-0x415);}const _0x4bcd78=_0x5f387f['array'][_0x1ccbd3],_0x30486d=_0x5f387f[_0x453793(0x29f,0x282)][_0x59949f],_0xc731e5=(0x1-_0x515a32)*(0x1-_0x84018e)*_0x45ceb1+_0x515a32*(0x1-_0x84018e)*_0x48834b+(0x1-_0x515a32)*_0x84018e*_0x4bcd78+_0x515a32*_0x84018e*_0x30486d,_0x2ce89c=_0xa50b6a['array'][_0x20fbba],_0x503937=_0xa50b6a[_0x41c8d2(0x5b9,0x5a3)][_0x50c437],_0x204f59=_0xa50b6a[_0x453793(0x29f,0x241)][_0x1ccbd3],_0x48bb3f=_0xa50b6a['array'][_0x59949f],_0x1a053e=(0x1-_0x515a32)*(0x1-_0x84018e)*_0x2ce89c+_0x515a32*(0x1-_0x84018e)*_0x503937+(0x1-_0x515a32)*_0x84018e*_0x204f59+_0x515a32*_0x84018e*_0x48bb3f,_0x3404f8=Math['sqrt'](_0xc731e5*_0xc731e5+_0x1a053e*_0x1a053e),_0x3d3b8d={};_0x3d3b8d['u']=_0x5f387f['array'][_0x572983];function _0x41c8d2(_0x422f74,_0x4188b4){return _0x42cab6(_0x4188b4,_0x422f74-0x72f);}_0x3d3b8d['v']=_0xa50b6a['array'][_0x572983],_0x3d3b8d[_0x453793(0x2da,0x2e7)]=_0x50b1be['array'][_0x572983];const _0x3ee606={};_0x3ee606['u']=_0xc731e5,_0x3ee606['v']=_0x1a053e,_0x3ee606['speed']=_0x3404f8;const _0x1bbbb7={};return _0x1bbbb7['original']=_0x3d3b8d,_0x1bbbb7[_0x453793(0x233,0x23a)]=_0x3ee606,_0x1bbbb7;}}mars3d__namespace['LayerUtil'][_0x584038(0x173,0x19e)]('wind',WindLayer),mars3d__namespace[_0x42cab6(-0x226,-0x1f7)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){this[_0x4df985(0xd5,0x5c)]=null;function _0x5287a0(_0x64572a,_0x54db4c){return _0x42cab6(_0x54db4c,_0x64572a-0x317);}this['lat']=null,this['tlng']=null;function _0x4df985(_0x48978f,_0x3e5068){return _0x42cab6(_0x48978f,_0x3e5068-0x261);}this[_0x5287a0(0x169,0x154)]=null,this[_0x4df985(0x5d,0x9b)]=null,this['speed']=null;}['destroy'](){for(const _0x824de4 in this){delete this[_0x824de4];}}}class CanvasWindField{constructor(_0x1452d3){this['setOptions'](_0x1452d3);}get['speedRate'](){return this['_speedRate'];}set[_0x42cab6(-0x1eb,-0x1ea)](_0x3b5f9d){function _0x3a82d5(_0x426c8a,_0x62a18f){return _0x584038(_0x62a18f,_0x426c8a- -0x1c3);}this['_speedRate']=(0x64-(_0x3b5f9d>0x63?0x63:_0x3b5f9d))*0x64;function _0x17479c(_0x1c4f59,_0x182054){return _0x584038(_0x182054,_0x1c4f59-0x328);}this['_calc_speedRate']=[(this[_0x17479c(0x4af,0x472)]-this['xmin'])/this['_speedRate'],(this['ymax']-this[_0x17479c(0x44b,0x4cc)])/this[_0x17479c(0x439,0x3c1)]];}get['maxAge'](){return this['_maxAge'];}set[_0x584038(0xce,0x148)](_0x52ad21){this['_maxAge']=_0x52ad21;}['setOptions'](_0xcd391f){this['options']=_0xcd391f;function _0x3d2a7f(_0x198bcf,_0x4dd828){return _0x42cab6(_0x198bcf,_0x4dd828-0x1db);}this[_0x8bd820(0x65,0x47)]=_0xcd391f['maxAge']||0x78,this['speedRate']=_0xcd391f['speedRate']||0x32;function _0x8bd820(_0x404481,_0x46f312){return _0x584038(_0x404481,_0x46f312- -0x101);}this['particles']=[];const _0x13544a=_0xcd391f['particlesNumber']||0x1000;for(let _0x1eead1=0x0;_0x1eead1<_0x13544a;_0x1eead1++){const _0xbd0622=this['_randomParticle'](new CanvasParticle());this[_0x3d2a7f(0xc8,0x5f)][_0x3d2a7f(0x67,0x40)](_0xbd0622);}}['setDate'](_0x395dee){this['rows']=_0x395dee['rows'],this['cols']=_0x395dee['cols'],this[_0x28fb33(0x483,0x438)]=_0x395dee[_0x28fb33(0x483,0x40f)],this['xmax']=_0x395dee[_0x3dfc67(0x416,0x3f7)],this['ymin']=_0x395dee[_0x3dfc67(0x3b2,0x3ac)],this['ymax']=_0x395dee[_0x3dfc67(0x42e,0x3b3)],this[_0x28fb33(0x4cc,0x4e1)]=[];const _0x5f0e42=_0x395dee[_0x28fb33(0x47d,0x4db)];function _0x3dfc67(_0x28e903,_0x52851c){return _0x584038(_0x52851c,_0x28e903-0x28f);}const _0x5cd212=_0x395dee['vdata'];let _0x1d1a76=![];_0x5f0e42[_0x3dfc67(0x400,0x3cc)]===this[_0x28fb33(0x44b,0x4a7)]&&_0x5f0e42[0x0][_0x3dfc67(0x400,0x43f)]===this[_0x3dfc67(0x460,0x468)]&&(_0x1d1a76=!![]);let _0x165f86=0x0,_0x38f2b4=null,_0x2abec5=null;function _0x28fb33(_0x4c09bb,_0x550fab){return _0x584038(_0x550fab,_0x4c09bb-0x30f);}for(let _0x59fc00=0x0;_0x59fc00<this['rows'];_0x59fc00++){_0x38f2b4=[];for(let _0x186f76=0x0;_0x186f76<this['cols'];_0x186f76++,_0x165f86++){_0x1d1a76?_0x2abec5=this['_calcUV'](_0x5f0e42[_0x59fc00][_0x186f76],_0x5cd212[_0x59fc00][_0x186f76]):_0x2abec5=this['_calcUV'](_0x5f0e42[_0x165f86],_0x5cd212[_0x165f86]),_0x38f2b4[_0x3dfc67(0x3e5,0x412)](_0x2abec5);}this['grid'][_0x28fb33(0x465,0x46b)](_0x38f2b4);}!this[_0x3dfc67(0x418,0x398)]['flipY']&&this['grid']['reverse']();}[_0x42cab6(-0x17b,-0x1f8)](){delete this['rows'],delete this['cols'],delete this['xmin'],delete this['xmax'],delete this['ymin'],delete this['ymax'],delete this['grid'],delete this['particles'];}['toGridXY'](_0x29b1c9,_0x1a7c49){function _0x49011e(_0x18003b,_0x5e35f8){return _0x42cab6(_0x5e35f8,_0x18003b-0x44e);}const _0x492544=(_0x29b1c9-this['xmin'])/(this[_0x21c224(-0x99,-0x85)]-this['xmin'])*(this[_0x49011e(0x32e,0x348)]-0x1),_0x27d327=(this[_0x21c224(0x9,-0x6d)]-_0x1a7c49)/(this['ymax']-this[_0x49011e(0x280,0x20b)])*(this[_0x49011e(0x299,0x309)]-0x1);function _0x21c224(_0x56e7f6,_0x3e361e){return _0x584038(_0x56e7f6,_0x3e361e- -0x20c);}return[_0x492544,_0x27d327];}['getUVByXY'](_0x412b8e,_0x2ca635){function _0x242b7c(_0x2caf59,_0x12eb1d){return _0x584038(_0x12eb1d,_0x2caf59- -0x26a);}if(_0x412b8e<0x0||_0x412b8e>=this['cols']||_0x2ca635>=this[_0x51ca19(-0x81,-0xd0)])return[0x0,0x0,0x0];const _0x4caba1=Math[_0x51ca19(-0x88,-0xa3)](_0x412b8e),_0x3596e0=Math[_0x51ca19(-0xea,-0xa3)](_0x2ca635);if(_0x4caba1===_0x412b8e&&_0x3596e0===_0x2ca635)return this['grid'][_0x2ca635][_0x412b8e];const _0x492dde=_0x4caba1+0x1,_0x19b99b=_0x3596e0+0x1,_0x102b6e=this['getUVByXY'](_0x4caba1,_0x3596e0),_0x15753f=this['getUVByXY'](_0x492dde,_0x3596e0),_0x1359e9=this['getUVByXY'](_0x4caba1,_0x19b99b),_0x4ff4ad=this[_0x242b7c(-0xae,-0xcf)](_0x492dde,_0x19b99b);let _0x2d209f=null;try{_0x2d209f=this['_bilinearInterpolation'](_0x412b8e-_0x4caba1,_0x2ca635-_0x3596e0,_0x102b6e,_0x15753f,_0x1359e9,_0x4ff4ad);}catch(_0x397532){console['log'](_0x412b8e,_0x2ca635);}function _0x51ca19(_0x13cf04,_0x3cab9d){return _0x42cab6(_0x13cf04,_0x3cab9d-0xe5);}return _0x2d209f;}['_bilinearInterpolation'](_0x50276c,_0x345d3b,_0x1a59b4,_0x66ef74,_0x3c8657,_0x3e6569){const _0x31baaf=0x1-_0x50276c;function _0x85e6a3(_0x46553d,_0x39420f){return _0x584038(_0x46553d,_0x39420f- -0x2b9);}const _0x39b5d4=0x1-_0x345d3b,_0x2b92e4=_0x31baaf*_0x39b5d4,_0x539b3d=_0x50276c*_0x39b5d4,_0x2cff05=_0x31baaf*_0x345d3b,_0xd75770=_0x50276c*_0x345d3b,_0x52c385=_0x1a59b4[0x0]*_0x2b92e4+_0x66ef74[0x0]*_0x539b3d+_0x3c8657[0x0]*_0x2cff05+_0x3e6569[0x0]*_0xd75770,_0x14bba4=_0x1a59b4[0x1]*_0x2b92e4+_0x66ef74[0x1]*_0x539b3d+_0x3c8657[0x1]*_0x2cff05+_0x3e6569[0x1]*_0xd75770;return this[_0x85e6a3(-0x180,-0x10a)](_0x52c385,_0x14bba4);}['_calcUV'](_0x278aca,_0x367730){return[+_0x278aca,+_0x367730,Math['sqrt'](_0x278aca*_0x278aca+_0x367730*_0x367730)];}[_0x584038(0x142,0x119)](_0x26fd27,_0x36ebc5){if(!this['isInExtent'](_0x26fd27,_0x36ebc5))return null;function _0x38237c(_0x454f25,_0x3fa907){return _0x584038(_0x454f25,_0x3fa907- -0xa);}const _0x4a6692=this[_0x38237c(0xb4,0x115)](_0x26fd27,_0x36ebc5),_0x35f85d=this['getUVByXY'](_0x4a6692[0x0],_0x4a6692[0x1]);return _0x35f85d;}[_0x42cab6(-0xfb,-0x177)](_0x2553b9,_0x2c9907){function _0x404494(_0x3e367f,_0x211e56){return _0x42cab6(_0x211e56,_0x3e367f-0x5e2);}function _0x1011ed(_0x2d88c0,_0x23c9a0){return _0x584038(_0x2d88c0,_0x23c9a0-0x3ee);}return _0x2553b9>=this[_0x404494(0x465,0x451)]&&_0x2553b9<=this[_0x1011ed(0x4fd,0x575)]&&_0x2c9907>=this['ymin']&&_0x2c9907<=this['ymax']?!![]:![];}[_0x584038(0xe0,0xfb)](){const _0x3fc89e=fRandomByfloat(this['xmin'],this['xmax']),_0x360b0b=fRandomByfloat(this[_0x2eba17(0x515,0x507)],this['ymax']),_0x52a8ed={};_0x52a8ed[_0x2eba17(0x58c,0x525)]=_0x360b0b;function _0x2eba17(_0x4214ef,_0x205452){return _0x584038(_0x205452,_0x4214ef-0x3f2);}function _0x4be20d(_0x2ffb60,_0x3d2b2b){return _0x42cab6(_0x2ffb60,_0x3d2b2b-0x143);}return _0x52a8ed['lng']=_0x3fc89e,_0x52a8ed;}['getParticles'](){function _0x1dc46c(_0x7e5460,_0x2c7ed3){return _0x584038(_0x2c7ed3,_0x7e5460-0x498);}let _0x1a796c,_0x5cb803,_0x1d9bb9;function _0x336cec(_0x1be7d5,_0x91398c){return _0x584038(_0x91398c,_0x1be7d5- -0x2df);}for(let _0x1d7d06=0x0,_0x1a4006=this['particles']['length'];_0x1d7d06<_0x1a4006;_0x1d7d06++){let _0x4239f1=this[_0x336cec(-0x16a,-0x14b)][_0x1d7d06];_0x4239f1[_0x336cec(-0x1b4,-0x1bf)]<=0x0&&(_0x4239f1=this['_randomParticle'](_0x4239f1));if(_0x4239f1['age']>0x0){const _0x1afed9=_0x4239f1['tlng'],_0x14236d=_0x4239f1['tlat'];_0x1d9bb9=this['getUVByPoint'](_0x1afed9,_0x14236d),_0x1d9bb9?(_0x1a796c=_0x1afed9+this['_calc_speedRate'][0x0]*_0x1d9bb9[0x0],_0x5cb803=_0x14236d+this['_calc_speedRate'][0x1]*_0x1d9bb9[0x1],_0x4239f1['lng']=_0x1afed9,_0x4239f1['lat']=_0x14236d,_0x4239f1['tlng']=_0x1a796c,_0x4239f1['tlat']=_0x5cb803,_0x4239f1[_0x1dc46c(0x64e,0x695)]=_0x1d9bb9[0x2],_0x4239f1['age']--):_0x4239f1['age']=0x0;}}return this[_0x336cec(-0x16a,-0x136)];}[_0x42cab6(-0x215,-0x1fb)](_0x62aa9d){let _0x3444a9,_0x126982;for(let _0x388454=0x0;_0x388454<0x1e;_0x388454++){_0x3444a9=this[_0x4cb3c8(0x204,0x21b)](),_0x126982=this['getUVByPoint'](_0x3444a9['lng'],_0x3444a9[_0x4cb3c8(0x244,0x2ba)]);if(_0x126982&&_0x126982[0x2]>0x0)break;}if(!_0x126982)return _0x62aa9d;const _0x319655=_0x3444a9['lng']+this[_0x4cb3c8(0x277,0x270)][0x0]*_0x126982[0x0],_0x4fb8f4=_0x3444a9[_0x2f4e2b(0x29,0x10)]+this[_0x4cb3c8(0x297,0x270)][0x1]*_0x126982[0x1];_0x62aa9d['lng']=_0x3444a9['lng'],_0x62aa9d['lat']=_0x3444a9['lat'];function _0x4cb3c8(_0xd3aa46,_0x299588){return _0x584038(_0xd3aa46,_0x299588-0x120);}_0x62aa9d['tlng']=_0x319655;function _0x2f4e2b(_0x5ce3c9,_0x415d76){return _0x42cab6(_0x5ce3c9,_0x415d76-0x167);}return _0x62aa9d[_0x2f4e2b(-0x1e,-0x47)]=_0x4fb8f4,_0x62aa9d['age']=Math['round'](0xa+Math['random']()*this['maxAge']),_0x62aa9d['speed']=_0x126982[0x2],_0x62aa9d;}[_0x584038(0x13b,0x106)](){for(const _0x501277 in this){delete this[_0x501277];}}}function fRandomByfloat(_0x3a83a5,_0x8b5074){function _0x1a2a1f(_0xce2dc7,_0x20dddd){return _0x584038(_0x20dddd,_0xce2dc7-0x2ed);}return _0x3a83a5+Math[_0x1a2a1f(0x3bb,0x3e7)]()*(_0x8b5074-_0x3a83a5);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class CanvasWindLayer extends BaseLayer{constructor(_0x3a7b6d={}){super(_0x3a7b6d);function _0x594acd(_0x2a96d7,_0x43878c){return _0x42cab6(_0x43878c,_0x2a96d7-0x65d);}this['_setOptionsHook'](_0x3a7b6d);function _0x9cdce(_0x57dde9,_0x1ca6ad){return _0x42cab6(_0x1ca6ad,_0x57dde9-0x2e7);}this[_0x594acd(0x52f,0x54d)]=null,_0x3a7b6d[_0x594acd(0x4b1,0x4af)]&&_0x3a7b6d['steps']&&(this[_0x9cdce(0x16d,0x187)]=new mars3d__namespace['ColorRamp'](_0x3a7b6d));}[_0x42cab6(-0x1c1,-0x1fa)](_0x414a1e,_0x1132c1){this['frameTime']=0x3e8/(_0x414a1e['frameRate']||0xa),this['_pointerEvents']=this[_0x37c0db(0x619,0x634)][_0x37c0db(0x616,0x5fa)]??![],this['color']=_0x414a1e['color']||'#ffffff',this['lineWidth']=_0x414a1e[_0x37c0db(0x57d,0x5b0)]||0x1;function _0x37c0db(_0x1e0544,_0x1b8b07){return _0x584038(_0x1b8b07,_0x1e0544-0x490);}function _0x585ea1(_0x2627b2,_0x2a4621){return _0x584038(_0x2a4621,_0x2627b2- -0x25f);}this['fixedHeight']=_0x414a1e['fixedHeight']??0x0,this[_0x585ea1(-0xa4,-0x78)]=_0x414a1e[_0x37c0db(0x64b,0x655)]??![],this[_0x585ea1(-0xa8,-0xdb)]&&this['windField'][_0x585ea1(-0x147,-0x17e)](_0x414a1e);}get['layer'](){return this['canvas'];}get['canvasWidth'](){return this['_map']['scene']['canvas']['clientWidth'];}get['canvasHeight'](){function _0x38e82c(_0x20526b,_0x1b9c71){return _0x584038(_0x20526b,_0x1b9c71-0x30d);}function _0x1615cf(_0x480df7,_0x2800bf){return _0x42cab6(_0x480df7,_0x2800bf-0x6b1);}return this[_0x38e82c(0x48d,0x48a)]['scene'][_0x1615cf(0x605,0x583)]['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x42cab6(-0x100,-0x16b)](_0x34ad36){this[_0x3b62af(-0x1c8,-0x21b)]=_0x34ad36;if(!this[_0x377742(0x49a,0x457)])return;function _0x3b62af(_0x3ea3b5,_0x4a6909){return _0x584038(_0x3ea3b5,_0x4a6909- -0x32b);}function _0x377742(_0x507e50,_0x4ca6b3){return _0x584038(_0x4ca6b3,_0x507e50-0x2d7);}_0x34ad36?this['canvas'][_0x377742(0x3b9,0x3b1)][_0x3b62af(-0x2ad,-0x255)]='all':this[_0x377742(0x49a,0x496)]['style'][_0x3b62af(-0x1e6,-0x255)]=_0x377742(0x3c7,0x369);}get[_0x584038(0x1b5,0x195)](){function _0xdcd1c0(_0x649ccd,_0x4b6ee6){return _0x584038(_0x4b6ee6,_0x649ccd- -0xa6);}return this[_0xdcd1c0(0xe3,0xb1)]['particlesNumber'];}set[_0x42cab6(-0x183,-0x15c)](_0x53670e){this['options']['particlesNumber']=_0x53670e,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{function _0x28c12c(_0x3bfe0e,_0x3026ad){return _0x3f37(_0x3026ad- -0x2e0,_0x3bfe0e);}this[_0x28c12c(-0x100,-0x8f)]();},0x1f4);}get[_0x584038(0xdd,0x107)](){return this['options']['speedRate'];}set['speedRate'](_0x3e3123){function _0x5e54b5(_0x5db5f0,_0x3fd41b){return _0x42cab6(_0x3fd41b,_0x5db5f0-0x145);}function _0x5615e6(_0xa2b42e,_0x1bd8fc){return _0x42cab6(_0xa2b42e,_0x1bd8fc-0x1f2);}this['options']['speedRate']=_0x3e3123,this[_0x5615e6(0x7b,0xb8)]&&(this['windField'][_0x5615e6(-0x41,0x8)]=_0x3e3123);}get[_0x42cab6(-0x20b,-0x1a9)](){return this['options']['maxAge'];}set['maxAge'](_0x30677d){function _0x25b708(_0x297269,_0x5cb542){return _0x584038(_0x297269,_0x5cb542- -0x2b3);}this[_0x25b708(-0x17a,-0x12a)]['maxAge']=_0x30677d;function _0x1115fd(_0x20eccb,_0x5e76a4){return _0x42cab6(_0x20eccb,_0x5e76a4-0xb4);}this['windField']&&(this[_0x25b708(-0xfd,-0xfc)]['maxAge']=_0x30677d);}get['data'](){function _0x114a4d(_0x25f5c9,_0x2356af){return _0x584038(_0x25f5c9,_0x2356af-0x1b8);}return this[_0x114a4d(0x31d,0x305)];}set['data'](_0x1f4167){this['setData'](_0x1f4167);}get[_0x42cab6(-0x1c7,-0x18e)](){let _0x4daf10=this[_0x1a165c(-0x14,0x2a)][_0x5613ce(-0xf6,-0x7f)],_0x481050=this['windData'][_0x1a165c(0x26,-0x49)];function _0x5613ce(_0x3682ed,_0x36ae4f){return _0x42cab6(_0x36ae4f,_0x3682ed-0x87);}let _0x1e30f6=this[_0x1a165c(-0x14,-0x71)]['ymin'],_0x4a5582=this['windData'][_0x5613ce(-0xcb,-0x13d)];_0x481050>=0x167&&_0x4daf10===0x0&&(_0x4daf10=-0xb4,_0x481050=0xb4);_0x4daf10=Math['max'](_0x4daf10,-0xb4),_0x481050=Math['min'](_0x481050,0xb4),_0x1e30f6=Math[_0x1a165c(0x17,0x7a)](_0x1e30f6,-0x5a);function _0x1a165c(_0x4ea901,_0x52f41f){return _0x584038(_0x52f41f,_0x4ea901- -0x161);}return _0x4a5582=Math['min'](_0x4a5582,0x5a),Cesium[_0x1a165c(0x2c,-0x14)][_0x5613ce(-0x124,-0xf0)](_0x4daf10,_0x1e30f6,_0x481050,_0x4a5582);}['_showHook'](_0x50014c){function _0x1ac987(_0x374ac3,_0x241a3a){return _0x42cab6(_0x374ac3,_0x241a3a-0xd7);}function _0x263695(_0x5be382,_0x360f1d){return _0x584038(_0x5be382,_0x360f1d- -0xed);}_0x50014c?this['_addedHook']():(this['windData']&&(this['options'][_0x1ac987(-0x76,-0xe2)]=this['windData']),this[_0x1ac987(-0x64,-0x88)]());}['_mountedHook'](){function _0x171338(_0x1e7ebc,_0x4cf15f){return _0x584038(_0x4cf15f,_0x1e7ebc-0x1c6);}function _0x1d323a(_0x13217f,_0x565b2c){return _0x584038(_0x13217f,_0x565b2c-0x20a);}this[_0x171338(0x34f,0x316)][_0x1d323a(0x26a,0x2e3)]?this['initWorker']():this['windField']=new CanvasWindField(this['options']);}['_addedHook'](){this[_0x55764e(-0x180,-0x145)]=this[_0x55764e(-0x17f,-0x1f1)]();const _0x23beab={};_0x23beab['willReadFrequently']=!![];function _0x55764e(_0x53f312,_0xeb9045){return _0x584038(_0x53f312,_0xeb9045- -0x308);}this[_0x4a903b(0x1af,0x1e5)]=this['canvas']['getContext']('2d',_0x23beab);function _0x4a903b(_0x34a940,_0xef1d61){return _0x42cab6(_0x34a940,_0xef1d61-0x3a5);}this['bindEvent'](),this[_0x55764e(-0x12a,-0x17f)]['data']&&this['setData'](this['options'][_0x4a903b(0x254,0x1ec)]);}['_removedHook'](){this[_0x2256e9(0x25e,0x299)]();function _0x2256e9(_0x1bb0af,_0x45065e){return _0x42cab6(_0x45065e,_0x1bb0af-0x456);}this['unbindEvent']();function _0x36bec6(_0xf807dc,_0x5521ac){return _0x42cab6(_0x5521ac,_0xf807dc- -0x37);}this['canvas']&&(this['_map'][_0x2256e9(0x26e,0x23b)]['removeChild'](this[_0x36bec6(-0x165,-0x195)]),delete this['canvas']);}['_createCanvas'](){const _0x399a74=mars3d__namespace['DomUtil'][_0x32e502(0xc5,0x124)](_0x32e502(0x22b,0x1c9),_0x32ddc8(0x309,0x318),this[_0x32ddc8(0x3de,0x396)]['container']);_0x399a74[_0x32ddc8(0x32b,0x2fb)]['position']='absolute',_0x399a74['style'][_0x32ddc8(0x2b5,0x30b)]=_0x32ddc8(0x36b,0x399),_0x399a74['style']['left']=_0x32e502(0x11b,0x186),_0x399a74[_0x32e502(0xc5,0xe8)]['width']=this['_map'][_0x32ddc8(0x3f7,0x3a9)]['canvas']['clientWidth']+'px',_0x399a74[_0x32ddc8(0x35a,0x2fb)]['height']=this['_map']['scene']['canvas']['clientHeight']+'px';function _0x32e502(_0x50ee39,_0x18a836){return _0x584038(_0x50ee39,_0x18a836-0x6);}_0x399a74[_0x32e502(0xcb,0xe8)]['pointerEvents']=this['_pointerEvents']?_0x32e502(0x1d6,0x1d5):_0x32ddc8(0x302,0x309),_0x399a74['style']['zIndex']=this['options'][_0x32e502(0x11f,0x114)]??0x9;function _0x32ddc8(_0x23aa1d,_0x16d8fb){return _0x584038(_0x23aa1d,_0x16d8fb-0x219);}return _0x399a74['width']=this['_map'][_0x32e502(0x194,0x196)][_0x32ddc8(0x3e5,0x3dc)][_0x32e502(0x1b6,0x134)],_0x399a74['height']=this['_map']['scene']['canvas']['clientHeight'],_0x399a74;}['resize'](){function _0x16bcff(_0x11500f,_0x3634d3){return _0x584038(_0x3634d3,_0x11500f-0x2e8);}function _0x7db112(_0x28c439,_0x4a6848){return _0x42cab6(_0x28c439,_0x4a6848-0x9c);}this[_0x7db112(-0x54,-0x92)]&&(this['canvas']['style'][_0x16bcff(0x479,0x404)]=this['_map'][_0x16bcff(0x478,0x467)][_0x16bcff(0x4ab,0x442)]['clientWidth']+'px',this['canvas']['style']['height']=this['_map']['scene'][_0x7db112(-0x1f,-0x92)]['clientHeight']+'px',this['canvas'][_0x16bcff(0x479,0x431)]=this[_0x16bcff(0x465,0x3f1)]['scene']['canvas'][_0x7db112(-0x1a9,-0x127)],this[_0x7db112(-0x63,-0x92)]['height']=this['_map'][_0x16bcff(0x478,0x486)]['canvas'][_0x7db112(-0x12a,-0x10c)]);}[_0x584038(0xa7,0x104)](){function _0x498bee(_0x1173ad,_0x51b4a0){return _0x42cab6(_0x51b4a0,_0x1173ad-0x53c);}const _0x1ffa97=this;let _0x57171a=Date['now']();function _0x152a59(_0xaad1ad,_0x1da29f){return _0x42cab6(_0x1da29f,_0xaad1ad-0x2da);}(function _0x3955e3(){if(_0x1ffa97['isDestroy'])return;function _0x39bd27(_0x3a4846,_0x5c7863){return _0x3f37(_0x3a4846-0x319,_0x5c7863);}function _0x4600f(_0x20da74,_0x4393bb){return _0x3f37(_0x20da74-0x2d7,_0x4393bb);}_0x1ffa97[_0x4600f(0x4be,0x44f)]=window['requestAnimationFrame'](_0x3955e3);if(_0x1ffa97['show']&&_0x1ffa97['windField']){const _0x40f05f=Date[_0x4600f(0x519,0x4b0)](),_0x170bbc=_0x40f05f-_0x57171a;_0x170bbc>_0x1ffa97['frameTime']&&(_0x57171a=_0x40f05f-_0x170bbc%_0x1ffa97[_0x39bd27(0x57e,0x5c7)],_0x1ffa97['update']());}}(),window[_0x498bee(0x40a,0x40f)](_0x498bee(0x384,0x348),this['resize'][_0x498bee(0x3fd,0x3a5)](this),![]),this['mouse_down']=![],this['mouse_move']=![],this[_0x498bee(0x3d4,0x43e)]['mouseHidden']&&(this['_map']['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x498bee(0x395,0x392)],this[_0x152a59(0xf5,0x159)],this),this[_0x152a59(0x166,0x14c)]['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x498bee(0x416,0x3ca)],this)));}['unbindEvent'](){function _0x5d3403(_0x3a33ef,_0x34dfd6){return _0x42cab6(_0x3a33ef,_0x34dfd6-0x113);}window['cancelAnimationFrame'](this['_animateFrame']),delete this['_animateFrame'],window['removeEventListener'](_0x5d3403(-0xb4,-0xa5),this['resize']);function _0x5773a7(_0x44fffe,_0x447f3f){return _0x584038(_0x44fffe,_0x447f3f- -0xbe);}this[_0x5773a7(0x71,0xcb)]['mouseHidden']&&(this['_map'][_0x5773a7(0x9d,0x97)](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this[_0x5773a7(0x6b,0xbf)][_0x5773a7(0xdd,0x97)](mars3d__namespace[_0x5773a7(0xa0,0xb5)]['mouseDown'],this[_0x5773a7(0x5d,0x4e)],this),this[_0x5d3403(-0x2d,-0x61)][_0x5d3403(-0x8b,-0x89)](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this[_0x5d3403(-0x39,-0x61)][_0x5773a7(0x30,0x97)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x2fac8a){function _0x171a97(_0x51e06c,_0x477a9e){return _0x42cab6(_0x477a9e,_0x51e06c-0x16a);}clearTimeout(this['refreshTimer']);function _0x476b16(_0x595665,_0x3a1b25){return _0x584038(_0x595665,_0x3a1b25- -0x2af);}if(!this[_0x476b16(-0x1d6,-0x17f)]||!this['canvas'])return;this[_0x171a97(0x3c,0x8c)]['style']['visibility']='hidden',this['refreshTimer']=setTimeout(()=>{if(!this['show'])return;function _0x39b26b(_0x946c07,_0x217efa){return _0x171a97(_0x217efa-0x1c,_0x946c07);}this[_0x39b26b(0x8f,0x2e)](),this['canvas']['style']['visibility']='visible';},0xc8);}[_0x584038(0x164,0x10c)](_0xa4dd77){this['mouse_down']=!![],this[_0x34f60d(0x1a7,0x1e9)]['off'](mars3d__namespace[_0x385d5e(0x2c7,0x337)]['mouseMove'],this['_onMouseMoveEvent'],this);function _0x385d5e(_0x5f2b3d,_0x54c9a8){return _0x42cab6(_0x5f2b3d,_0x54c9a8-0x4b5);}function _0x34f60d(_0x1b65dd,_0x20304f){return _0x584038(_0x1b65dd,_0x20304f-0x6c);}this[_0x385d5e(0x35e,0x341)]['on'](mars3d__namespace[_0x34f60d(0x250,0x1df)][_0x34f60d(0x14e,0x1c4)],this[_0x385d5e(0x3b1,0x388)],this);}['_onMouseMoveEvent'](_0x54536c){function _0xbf639b(_0x5a8bcc,_0x44d92f){return _0x584038(_0x44d92f,_0x5a8bcc-0x297);}function _0x449d02(_0x5b979e,_0x1d8b15){return _0x42cab6(_0x5b979e,_0x1d8b15-0x270);}if(!this[_0xbf639b(0x3c7,0x421)]||!this['canvas'])return;this['mouse_down']&&(this['canvas']['style'][_0xbf639b(0x455,0x41b)]='hidden',this[_0xbf639b(0x43d,0x4a4)]=!![]);}[_0x584038(0x17d,0x1cb)](_0x4c7a48){if(!this['show']||!this['canvas'])return;function _0x2f2e40(_0x5b71d6,_0x44ba6b){return _0x42cab6(_0x5b71d6,_0x44ba6b-0x13d);}this[_0x2f2e40(-0x36,-0x37)]['off'](mars3d__namespace[_0x587766(0x442,0x402)]['mouseMove'],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this[_0x587766(0x445,0x428)]();function _0x587766(_0x222df0,_0x2df44b){return _0x42cab6(_0x222df0,_0x2df44b-0x580);}this['canvas'][_0x587766(0x359,0x371)]['visibility']='visible',this[_0x2f2e40(-0x83,-0x4e)]=![],this['mouse_move']=![];}[_0x42cab6(-0x138,-0x149)](_0x447acb){this['clear']();function _0x142ff7(_0x5cf074,_0x3b2b5d){return _0x42cab6(_0x5cf074,_0x3b2b5d-0x582);}function _0x4a70f6(_0xa1b5e7,_0xde39cb){return _0x42cab6(_0xde39cb,_0xa1b5e7-0x77);}this['windData']=_0x447acb,this[_0x4a70f6(-0xc3,-0xcf)][_0x142ff7(0x3dd,0x39c)](_0x447acb),this['redraw']();}['redraw'](){if(!this['show'])return;function _0x18c133(_0x1faa35,_0x3f5344){return _0x42cab6(_0x1faa35,_0x3f5344-0x5c8);}this[_0x18c133(0x4f3,0x48e)]['setOptions'](this['options']),this['update']();}['update'](){function _0x1f6e56(_0x42ab6d,_0x2912b5){return _0x42cab6(_0x2912b5,_0x42ab6d-0x541);}if(this[_0x1f6e56(0x3d2,0x431)])return;this[_0x1b34fb(0xb,0x55)]=!![];if(this['worker'])this[_0x1f6e56(0x407,0x442)]['update']();else{const _0x5de5db=this[_0x1b34fb(0xec,0x8a)]['getParticles']();this[_0x1b34fb(-0x72,-0x58)](_0x5de5db);}function _0x1b34fb(_0x2ce09e,_0x52f7f8){return _0x42cab6(_0x2ce09e,_0x52f7f8-0x1c4);}this['_updateIng']=![];}[_0x584038(0xec,0xd5)](_0xcfbbba){this[_0x628c69(0x3b7,0x3ca)]=_0xcfbbba,this[_0x628c69(0x348,0x373)]['globalCompositeOperation']=_0x2961fb(0x152,0xd5),this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this[_0x628c69(0x2fe,0x27e)]),this['canvasContext']['globalCompositeOperation']=_0x2961fb(0x187,0x116);function _0x2961fb(_0x2dfb75,_0x5f2aa7){return _0x584038(_0x2dfb75,_0x5f2aa7-0x4);}this['canvasContext']['globalAlpha']=0.9;const _0x4c28ab=this['_map']['scene'][_0x2961fb(0x162,0x1bc)]!==Cesium['SceneMode']['SCENE3D'];function _0x628c69(_0x3add6b,_0xb8ddfa){return _0x42cab6(_0xb8ddfa,_0x3add6b-0x508);}const _0x287f8e=this[_0x628c69(0x375,0x38a)]*0.25;if(this['_colorRamp'])for(let _0x552246=0x0,_0x3afd43=_0xcfbbba['length'];_0x552246<_0x3afd43;_0x552246++){const _0x4ac368=_0xcfbbba[_0x552246],_0x20b672=this['_tomap'](_0x4ac368,_0x4ac368[_0x2961fb(0xb1,0xf0)],_0x4ac368['lat'],_0x4ac368[_0x2961fb(0x19b,0x130)]),_0x336e06=this[_0x628c69(0x3e1,0x431)](_0x4ac368,_0x4ac368[_0x2961fb(0x1b5,0x188)],_0x4ac368[_0x2961fb(0xd2,0x147)],_0x4ac368['talt']);if(!_0x20b672||!_0x336e06)continue;if(_0x4c28ab&&Math['abs'](_0x20b672[0x0]-_0x336e06[0x0])>=_0x287f8e)continue;this[_0x2961fb(0x173,0x135)]['beginPath'](),this[_0x628c69(0x348,0x395)][_0x628c69(0x304,0x2df)]=this['lineWidth'],this[_0x628c69(0x348,0x36c)]['strokeStyle']=this['_colorRamp'][_0x628c69(0x30f,0x384)](_0x4ac368['speed']),this['canvasContext'][_0x2961fb(0x111,0x13e)](_0x20b672[0x0],_0x20b672[0x1]),this[_0x2961fb(0x195,0x135)]['lineTo'](_0x336e06[0x0],_0x336e06[0x1]),this['canvasContext'][_0x2961fb(0x1a6,0x171)]();}else{this[_0x628c69(0x348,0x38e)]['beginPath'](),this['canvasContext']['lineWidth']=this[_0x628c69(0x304,0x2cb)],this['canvasContext']['strokeStyle']=this['color'];for(let _0x751b19=0x0,_0x37dcdd=_0xcfbbba['length'];_0x751b19<_0x37dcdd;_0x751b19++){const _0x198261=_0xcfbbba[_0x751b19],_0x21fef9=this[_0x2961fb(0x22d,0x1ce)](_0x198261,_0x198261['lng'],_0x198261[_0x2961fb(0x128,0x19e)],_0x198261[_0x2961fb(0x106,0x130)]),_0x4e909c=this[_0x628c69(0x3e1,0x35f)](_0x198261,_0x198261['tlng'],_0x198261['tlat'],_0x198261['talt']);if(!_0x21fef9||!_0x4e909c)continue;if(_0x4c28ab&&Math['abs'](_0x21fef9[0x0]-_0x4e909c[0x0])>=_0x287f8e)continue;this[_0x2961fb(0xc1,0x135)]['moveTo'](_0x21fef9[0x0],_0x21fef9[0x1]),this['canvasContext'][_0x2961fb(0x13e,0x104)](_0x4e909c[0x0],_0x4e909c[0x1]);}this[_0x2961fb(0x14b,0x135)][_0x628c69(0x384,0x39c)]();}}['_tomap'](_0x516cd8,_0x5e37be,_0x442096,_0xd1d797){const _0x3b7aac=Cesium['Cartesian3']['fromDegrees'](_0x5e37be,_0x442096,_0xd1d797??this['fixedHeight']),_0xc15ad9=this[_0x2a0696(0x46a,0x47a)]['scene'];if(_0xc15ad9[_0x1558eb(-0x3e,-0x82)]===Cesium['SceneMode'][_0x2a0696(0x49f,0x47b)]){const _0x5cef5f=new Cesium['EllipsoidalOccluder'](_0xc15ad9['globe']['ellipsoid'],_0xc15ad9[_0x1558eb(-0x1bb,-0x13d)]['positionWC']),_0x206d12=_0x5cef5f[_0x2a0696(0x414,0x464)](_0x3b7aac);if(!_0x206d12)return _0x516cd8[_0x1558eb(-0xe8,-0x10f)]=0x0,null;}const _0xcc5ab=mars3d__namespace['PointTrans'][_0x2a0696(0x469,0x402)](this[_0x2a0696(0x40a,0x47a)][_0x2a0696(0x463,0x48d)],_0x3b7aac);function _0x2a0696(_0x54e574,_0x405da9){return _0x42cab6(_0x54e574,_0x405da9-0x5ee);}function _0x1558eb(_0x41939a,_0x3102e3){return _0x584038(_0x41939a,_0x3102e3- -0x23a);}return _0xcc5ab?[_0xcc5ab['x'],_0xcc5ab['y']]:null;}['clear'](){this[_0x177f40(-0x6a,-0x3b)]['clear']();function _0x177f40(_0x3aebf5,_0xfbbb5){return _0x584038(_0x3aebf5,_0xfbbb5- -0x1f2);}delete this['windData'];}['initWorker'](){this['worker']=new Worker(this[_0x1ffb13(0xca,0x5c)]['worker']);function _0x1ffb13(_0x16a229,_0x505704){return _0x584038(_0x16a229,_0x505704- -0x12d);}this['worker']['onmessage']=_0x1e397f=>{function _0x334d44(_0x2f4d1a,_0x2f6a72){return _0x1ffb13(_0x2f6a72,_0x2f4d1a-0x148);}function _0x5befed(_0x20448c,_0x295e95){return _0x1ffb13(_0x295e95,_0x20448c-0x4c6);}this['_drawLines'](_0x1e397f[_0x334d44(0x153,0x189)][_0x5befed(0x50e,0x48e)]),this[_0x334d44(0x1e1,0x21b)]=![];},this['windField']={'init':_0x384f9a=>{const _0x56be18={};_0x56be18[_0x4590ee(-0x1aa,-0x1fc)]='init';function _0x4590ee(_0x5560f9,_0xf14f84){return _0x1ffb13(_0xf14f84,_0x5560f9- -0x18a);}_0x56be18['options']=_0x384f9a,this['worker']['postMessage'](_0x56be18);},'setOptions':_0xb5b2bc=>{const _0x5c3d64={};_0x5c3d64['type']='setOptions',_0x5c3d64[_0x373fa0(-0x67,0x8)]=_0xb5b2bc;function _0x373fa0(_0x1bbc6d,_0x3e8367){return _0x1ffb13(_0x3e8367,_0x1bbc6d- -0xc3);}this['worker']['postMessage'](_0x5c3d64);},'setDate':_0x203620=>{function _0x2dead9(_0x32856c,_0x19fcb5){return _0x1ffb13(_0x19fcb5,_0x32856c-0x264);}function _0x5d585e(_0x4d8c35,_0xf630d2){return _0x1ffb13(_0x4d8c35,_0xf630d2-0x202);}const _0x2877c0={};_0x2877c0['type']='setDate',_0x2877c0[_0x5d585e(0x228,0x20d)]=_0x203620,this[_0x2dead9(0x210,0x293)]['postMessage'](_0x2877c0);},'update':()=>{function _0x4f4d5d(_0x4e9f26,_0x2800dd){return _0x1ffb13(_0x4e9f26,_0x2800dd-0x5be);}if(this[_0x1d5ff3(-0x3e,0x33)])return;this[_0x4f4d5d(0x6ce,0x657)]=!![];const _0x45f079={};_0x45f079['type']='update';function _0x1d5ff3(_0x413a53,_0x11e9dc){return _0x1ffb13(_0x413a53,_0x11e9dc- -0x66);}this[_0x4f4d5d(0x56f,0x56a)]['postMessage'](_0x45f079);},'clear':()=>{function _0x317f06(_0x368c00,_0x4fdc1c){return _0x1ffb13(_0x4fdc1c,_0x368c00- -0xb5);}const _0x738ef9={};_0x738ef9['type']=_0x57bcb7(0x455,0x3ee);function _0x57bcb7(_0x244479,_0x25ad17){return _0x1ffb13(_0x25ad17,_0x244479-0x489);}this[_0x57bcb7(0x435,0x4b1)][_0x57bcb7(0x4f8,0x4d5)](_0x738ef9);}},this['windField']['init'](this['options']);}}mars3d__namespace['LayerUtil'][_0x42cab6(-0xd5,-0x153)](_0x42cab6(-0x1f2,-0x1ca),CanvasWindLayer),mars3d__namespace[_0x584038(0x88,0xfa)][_0x584038(0x141,0xdc)]=CanvasWindLayer,mars3d__namespace[_0x584038(0x1c9,0x1ba)]=CanvasWindField,mars3d__namespace['Log'][_0x42cab6(-0x1e2,-0x187)]('mars3d-wind插件注册成功\x20\x20\x20\x20\x20版本：'+version+_0x584038(0x157,0xe8)+buildTime),mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer;function _0x42cab6(_0x57895a,_0x2fb0e5){return _0x3f37(_0x2fb0e5- -0x3a9,_0x57895a);}exports['WindUtil']=WindUtil;const _0x513f2c={};_0x513f2c[_0x42cab6(-0x259,-0x1f0)]=!![],Object[_0x42cab6(-0x1e6,-0x1e9)](exports,'__esModule',_0x513f2c);
}));
