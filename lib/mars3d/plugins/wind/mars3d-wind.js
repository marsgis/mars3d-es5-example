/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.7.20
 * 编译日期：2024-07-01 17:14:14
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';function _0x419e(){const _0x429e7c=['toGridXY','toDegrees','Cartesian3','speed','maxParticles','speedFactor','preRender','_createCanvas','nextParticlesSpeed','hidden','GeometryAttributes','redraw','toRadians','random','particles','ComponentDatatype','speedRate','lng','particlesNumber','_calcUV','canvasContext','ymin','sqrt','_randomParticle','setOptions','_colorRamp','OPAQUE','getColorTexture','floor','width','getU','Appearance','abs','__proto__','enabled','uniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20\x20\x20float\x20term1\x20=\x20111132.92;\x0a\x20\x20\x20\x20float\x20term2\x20=\x20559.82\x20*\x20cos(2.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term3\x20=\x201.175\x20*\x20cos(4.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term4\x20=\x200.0023\x20*\x20cos(6.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20\x20\x20float\x20term5\x20=\x20111412.84\x20*\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20term6\x20=\x2093.5\x20*\x20cos(3.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term7\x20=\x200.118\x20*\x20cos(5.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avoid\x20updatePosition(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20windVectorInLonLatLev;\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20speed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20updatePosition(lonLatLev,\x20speed);\x0a}\x0a','clientHeight','attributeLocations','data','context','colors','segmentsDepth','lonRange','currentTrailsDepth','particleSystem','450297pftHlX','createRenderingPrimitives','fromDegrees','framebuffers','min','dropRateBump','defines','Framebuffer','lev','_pointerEvents','DepthFunction','getRandomLatLng','clear','removeEventListener','currentTrails','createRawRenderState','fragmentShaderSource','particlesTextureSize','ellipsoid','now','udata','mouse_down','outputTexture','UNSIGNED_BYTE','createWindTextures','createSegmentsGeometry','lat','visibility','show','maxAge','isInExtent','vmax','pixelSize','height','preExecute','defined','getFullscreenQuad','south','Draw','BufferUsage','updateViewerParameters','_canrefresh','depthTest','textures','depthMask','addPrimitives','create','blending','bindEvent','fixedHeight','defineProperty','auto','globe','125MRvrAz','ComputeCommand','vdata','lineWidth','_speedRate','_data','register','nextTrailsColor','350VJwuUz','createTexture','PixelDatatype','TRIANGLES','_map','vertexArray','WindLayer','off','_calc_speedRate','sources','Compute','mouseDown','destroy','beginPath','TextureMagnificationFilter','windField','PrimitiveType','lon','tlat','setDate','top','viewerParameters','6410305CHEbVv','randomizeParticles','refreshTimer','TextureMinificationFilter','_removedHook','_onMapWhellEvent','depthTexture','grid','scene','push','strokeStyle','createParticlesTextures','STATIC_DRAW','age','PixelFormat','updateSpeed','95286RFCnQL','rawRenderState','canvasWidth','THREE_PI_OVER_TWO','type','getDefaultRenderState','currentParticlesPosition','BoundingSphere','autoClear','NEAREST','particlesComputing','Cesium','destroyParticlesTextures','moveTo','forEach','rows','length','_onMap_preRenderEvent','_onMouseMoveEvent','659562iGKwrZ','getSpeed','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','red','absolute','segments','PI_OVER_THREE','update','cols','pointerEvents','_addedHook','getUVByPoint','interval','getOwnPropertyDescriptor','screen','addEventListener','uniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20randomParticle\x20=\x20texture(postProcessingPosition,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20vec4\x20particleSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x0a\x20\x20\x20\x20if\x20(randomParticle.a\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20particleSpeed;\x0a\x20\x20\x20\x20}\x0a}\x0a','onmessage','PI_OVER_TWO','getV','mouseMove','particlesTextures','clientWidth','Rectangle','EventType','SceneMode','clampToLatitudeRange','dropRate','reverse','Color','initWorker','mode','array','TWO_PI','worker','postProcessingPosition','value','colorTable','xmin','postMessage','Cartesian2','computeViewRectangle','max','windTextures','24800EiiuQS','SCENE3D','layer','setData','currentParticlesSpeed','_onMouseDownEvent','willReadFrequently','positionWC','FLOAT','__esModule','viewport','ZERO','uniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x0a\x20\x20\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0\x20*\x20trailsColor)\x20/\x20255.0;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20pointsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20trailsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a','particlesRendering','20XQeKcy','color','options','GeometryAttribute','ShaderSource','style','wheel','latRange','visible','canvasResize','drawingBufferHeight','0px','createRenderingTextures','fadeOpacity','uniform\x20sampler2D\x20colorTable;\x0a\x0ain\x20float\x20speedNormalization;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20out_FragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x200.0));\x0a}\x0a','left','clearCommand','log','mouse_move','framebuffer','viewRectangleToLonLatRange','84793Rifjzo','clearFramebuffers','getOptions','ymax','Math','zIndex','default','windData','camera','_setOptionsHook','frameTime','_tomap','geometry','16IQIuyH','add','_drawLines','canvas','RGBA','6056CHsIgb','tlng','dimensions','uniformMap','unbindEvent','primitives','createCommand','nextParticlesPosition','BaseLayer','VertexArray','resize','keys','particlesWind','shaderProgram','nextTrails','commandToExecute','Geometry','xmax'];_0x419e=function(){return _0x429e7c;};return _0x419e();}(function(_0xf427c1,_0x33efd9){function _0x23a6b8(_0x588688,_0x2167a2){return _0x1dfc(_0x588688- -0x372,_0x2167a2);}function _0x51188b(_0x5bee85,_0x1ea3ca){return _0x1dfc(_0x1ea3ca-0x178,_0x5bee85);}const _0x1dcc8c=_0xf427c1();while(!![]){try{const _0x2c8b45=-parseInt(_0x23a6b8(-0x168,-0x1cd))/0x1*(parseInt(_0x23a6b8(-0x15b,-0x141))/0x2)+-parseInt(_0x51188b(0x2f8,0x333))/0x3+parseInt(_0x51188b(0x381,0x394))/0x4*(-parseInt(_0x51188b(0x2f6,0x2f2))/0x5)+-parseInt(_0x51188b(0x3a2,0x320))/0x6*(-parseInt(_0x51188b(0x379,0x2fa))/0x7)+-parseInt(_0x23a6b8(-0x18b,-0x1a1))/0x8+-parseInt(_0x51188b(0x316,0x2bd))/0x9*(-parseInt(_0x23a6b8(-0x17d,-0x150))/0xa)+parseInt(_0x23a6b8(-0x1da,-0x151))/0xb;if(_0x2c8b45===_0x33efd9)break;else _0x1dcc8c['push'](_0x1dcc8c['shift']());}catch(_0x33f09a){_0x1dcc8c['push'](_0x1dcc8c['shift']());}}}(_0x419e,0x8347b));function _interopNamespace(_0x2d8095){if(_0x2d8095&&_0x2d8095['__esModule'])return _0x2d8095;var _0x2674d8=Object[_0x418ee2(0xc1,0xb2)](null);function _0x181036(_0x260612,_0x2d6f72){return _0x1dfc(_0x260612- -0x149,_0x2d6f72);}_0x2d8095&&Object['keys'](_0x2d8095)['forEach'](function(_0x3bc91c){function _0x51e420(_0x3f4b32,_0x4f143f){return _0x418ee2(_0x3f4b32- -0xe7,_0x4f143f);}function _0x283fa8(_0x308571,_0x36d666){return _0x418ee2(_0x308571- -0x18e,_0x36d666);}if(_0x3bc91c!=='default'){var _0x6a8a21=Object[_0x283fa8(-0x78,-0x53)](_0x2d8095,_0x3bc91c);Object[_0x51e420(-0x22,-0x8e)](_0x2674d8,_0x3bc91c,_0x6a8a21['get']?_0x6a8a21:{'enumerable':!![],'get':function(){return _0x2d8095[_0x3bc91c];}});}});_0x2674d8[_0x418ee2(0x15e,0x19b)]=_0x2d8095;function _0x418ee2(_0x36a76e,_0xd7a72d){return _0x1dfc(_0x36a76e- -0xb2,_0xd7a72d);}return _0x2674d8;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace[_0x43215e(-0xfd,-0x134)];function getU(_0x496560,_0x24785a){const _0xa85966=_0x496560*Math['cos'](Cesium$7[_0x5957de(0x2a5,0x26e)][_0x5957de(0x189,0x184)](_0x24785a));function _0x2235a8(_0x30ce5e,_0x54c982){return _0x43215e(_0x30ce5e,_0x54c982-0x36f);}function _0x5957de(_0x2d8b3,_0x1f56e2){return _0x43215e(_0x2d8b3,_0x1f56e2-0x347);}return _0xa85966;}function getV(_0x3ea495,_0x29c7d0){const _0x413872=_0x3ea495*Math['sin'](Cesium$7[_0x226a2e(0x137,0x123)]['toRadians'](_0x29c7d0));function _0x226a2e(_0x1eb65e,_0x357b5b){return _0x43215e(_0x357b5b,_0x1eb65e-0x210);}return _0x413872;}function getSpeed(_0x4d399c,_0x120c1a){function _0x26a9aa(_0x4d5a20,_0x412494){return _0x43215e(_0x412494,_0x4d5a20-0x30f);}const _0x2dfded=Math[_0x26a9aa(0x156,0xec)](Math['pow'](_0x4d399c,0x2)+Math['pow'](_0x120c1a,0x2));return _0x2dfded;}function getDirection(_0x235cc5,_0x41711e){function _0x2c5664(_0x27199e,_0x2f49b7){return _0x43215e(_0x27199e,_0x2f49b7-0x2bc);}let _0x273dad=Cesium$7[_0x3281aa(0x413,0x473)][_0x2c5664(0x242,0x204)](Math['atan2'](_0x41711e,_0x235cc5));function _0x3281aa(_0xfef0a5,_0x35f279){return _0x43215e(_0xfef0a5,_0x35f279-0x54c);}return _0x273dad+=_0x273dad<0x0?0x168:0x0,_0x273dad;}const _0x1ab9dc={};_0x1ab9dc[_0x43215e(-0x1e3,-0x1ae)]=null,_0x1ab9dc[_0x43215e(-0x1fc,-0x1b1)]=getU,_0x1ab9dc[_0x3c7570(0x48c,0x48e)]=getV,_0x1ab9dc[_0x43215e(-0x198,-0x12b)]=getSpeed,_0x1ab9dc['getDirection']=getDirection;function _0x43215e(_0x4256c4,_0x5712c0){return _0x1dfc(_0x5712c0- -0x2e7,_0x4256c4);}var WindUtil=_0x1ab9dc;function _0x3c7570(_0x5c65dd,_0x1f5098){return _0x1dfc(_0x1f5098-0x2c0,_0x5c65dd);}const Cesium$6=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x2eab47){this['commandType']=_0x2eab47['commandType'],this['geometry']=_0x2eab47[_0xeb8582(0x1f2,0x18f)],this['attributeLocations']=_0x2eab47[_0x15c36d(0x227,0x1e5)],this['primitiveType']=_0x2eab47['primitiveType'],this['uniformMap']=_0x2eab47['uniformMap'],this['vertexShaderSource']=_0x2eab47['vertexShaderSource'],this['fragmentShaderSource']=_0x2eab47['fragmentShaderSource'],this['rawRenderState']=_0x2eab47[_0x15c36d(0x29f,0x251)],this[_0xeb8582(0x1e4,0x193)]=_0x2eab47[_0x15c36d(0x2c8,0x2b0)],this['outputTexture']=_0x2eab47[_0xeb8582(0x137,0x1b8)],this['autoClear']=_0x2eab47[_0xeb8582(0x18c,0x169)]??![],this['preExecute']=_0x2eab47[_0xeb8582(0x143,0x135)],this['show']=!![];function _0x15c36d(_0x4daf63,_0x41dbc1){return _0x43215e(_0x4daf63,_0x41dbc1-0x38f);}this['commandToExecute']=undefined,this[_0x15c36d(0x2e9,0x2ad)]=undefined;function _0xeb8582(_0x18e08b,_0x18131a){return _0x43215e(_0x18131a,_0x18e08b-0x2c3);}this['autoClear']&&(this['clearCommand']=new Cesium$6['ClearCommand']({'color':new Cesium$6[(_0x15c36d(0x271,0x280))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x15c36d(0x22b,0x2b0)],'pass':Cesium$6['Pass']['OPAQUE']}));}[_0x43215e(-0x11f,-0xc5)](_0x3a3004){function _0x1187d9(_0x2cfcc5,_0x1e61d9){return _0x3c7570(_0x2cfcc5,_0x1e61d9- -0xf8);}function _0xdba5b0(_0x3e00d1,_0x436b0b){return _0x3c7570(_0x3e00d1,_0x436b0b-0x29);}switch(this['commandType']){case'Draw':{const _0x23f236=Cesium$6['VertexArray']['fromGeometry']({'context':_0x3a3004,'geometry':this['geometry'],'attributeLocations':this[_0xdba5b0(0x3f0,0x426)],'bufferUsage':Cesium$6[_0xdba5b0(0x473,0x455)]['STATIC_DRAW']}),_0x353a54={};_0x353a54['context']=_0x3a3004,_0x353a54[_0xdba5b0(0x42b,0x426)]=this['attributeLocations'],_0x353a54['vertexShaderSource']=this['vertexShaderSource'],_0x353a54[_0x1187d9(0x38e,0x31d)]=this['fragmentShaderSource'];const _0x2ae440=Cesium$6['ShaderProgram']['fromCache'](_0x353a54),_0x382805=Cesium$6['RenderState']['fromCache'](this[_0xdba5b0(0x43a,0x492)]);return new Cesium$6['DrawCommand']({'primitiveType':this['primitiveType'],'shaderProgram':_0x2ae440,'vertexArray':_0x23f236,'modelMatrix':Cesium$6['Matrix4']['IDENTITY'],'renderState':_0x382805,'uniformMap':this['uniformMap'],'castShadows':![],'receiveShadows':![],'framebuffer':this['framebuffer'],'pass':Cesium$6['Pass']['OPAQUE'],'pickOnly':!![],'owner':this});}case'Compute':{const _0x22cb36={};return _0x22cb36['owner']=this,_0x22cb36[_0xdba5b0(0x3b3,0x43e)]=this['fragmentShaderSource'],_0x22cb36[_0xdba5b0(0x487,0x508)]=this[_0xdba5b0(0x4d8,0x508)],_0x22cb36['outputTexture']=this['outputTexture'],_0x22cb36['persists']=!![],new Cesium$6[(_0x1187d9(0x382,0x343))](_0x22cb36);}}}['setGeometry'](_0x25c2bf,_0x51f32e){this[_0x30cfcc(0x4b,0xab)]=_0x51f32e;const _0x51fe16=Cesium$6['VertexArray']['fromGeometry']({'context':_0x25c2bf,'geometry':this['geometry'],'attributeLocations':this[_0x4c0e5e(0x35f,0x3ad)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']});function _0x4c0e5e(_0x454212,_0x212929){return _0x43215e(_0x212929,_0x454212-0x509);}function _0x30cfcc(_0x3c6fbc,_0x10b7ca){return _0x43215e(_0x3c6fbc,_0x10b7ca-0x17c);}this['commandToExecute']['vertexArray']=_0x51fe16;}['update'](_0x284ec8){if(!this['show'])return;if(_0x284ec8['mode']!==Cesium$6[_0x2109d3(0x466,0x482)][_0x2109d3(0x47a,0x483)])return;!Cesium$6[_0x2109d3(0x3fa,0x3a6)](this['commandToExecute'])&&(this['commandToExecute']=this['createCommand'](_0x284ec8['context']));function _0x2109d3(_0x236011,_0x3a2b98){return _0x3c7570(_0x3a2b98,_0x236011- -0x2e);}function _0x13f2bb(_0x7c184b,_0x3c2711){return _0x43215e(_0x7c184b,_0x3c2711- -0x28);}Cesium$6['defined'](this['preExecute'])&&this[_0x13f2bb(-0x1fb,-0x1a8)](),Cesium$6['defined'](this['clearCommand'])&&_0x284ec8['commandList']['push'](this['clearCommand']),_0x284ec8['commandList']['push'](this[_0x2109d3(0x4bd,0x438)]);}['isDestroyed'](){return![];}['destroy'](){if(this[_0x40e2b6(0x435,0x431)]){var _0x2bfbfa,_0x3ef064;(_0x2bfbfa=this['clearCommand'])!==null&&_0x2bfbfa!==void 0x0&&_0x2bfbfa['vertexArray']&&this['clearCommand']['vertexArray']['destroy'](),(_0x3ef064=this['clearCommand'])!==null&&_0x3ef064!==void 0x0&&_0x3ef064[_0x40e2b6(0x403,0x455)]&&this['clearCommand'][_0x40e2b6(0x497,0x455)]['destroy'](),delete this['clearCommand'];}this['commandToExecute']&&(this[_0x31af75(0x5c,0x7c)][_0x31af75(-0x48,0x10)]&&this[_0x31af75(0x5c,0x38)]['vertexArray'][_0x40e2b6(0x3b5,0x3ba)](),this[_0x40e2b6(0x489,0x457)][_0x40e2b6(0x4c1,0x455)]&&this[_0x40e2b6(0x427,0x457)]['shaderProgram'][_0x31af75(-0x41,-0x21)](),delete this['commandToExecute']);function _0x31af75(_0xbefbd0,_0x49651a){return _0x3c7570(_0x49651a,_0xbefbd0- -0x48f);}function _0x40e2b6(_0xd59049,_0x520665){return _0x43215e(_0xd59049,_0x520665-0x513);}return Cesium$6['destroyObject'](this);}}const Cesium$5=mars3d__namespace['Cesium'],Util=(function(){function _0x4fa4aa(_0xd53c25,_0x3e5151){return _0x43215e(_0xd53c25,_0x3e5151-0x395);}const _0x526dd8=function(){function _0x246520(_0x4f0bdb,_0x404bd9){return _0x1dfc(_0x404bd9-0x114,_0x4f0bdb);}const _0x5efbdf=new Cesium$5[(_0x1c6450(0x2a4,0x279))]({'attributes':new Cesium$5[(_0x246520(0x254,0x236))]({'position':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0x246520(0x2bc,0x23b)]['FLOAT'],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5[_0x246520(0x23b,0x23b)][_0x246520(0x320,0x303)],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});function _0x1c6450(_0x2e8d9c,_0x5b8e2b){return _0x1dfc(_0x2e8d9c-0x78,_0x5b8e2b);}return _0x5efbdf;},_0x30ac0c=function(_0x2e0960,_0x3f152f){if(Cesium$5['defined'](_0x3f152f)){const _0x413ec8={};_0x413ec8['arrayBufferView']=_0x3f152f,_0x2e0960['source']=_0x413ec8;}const _0x2e5740=new Cesium$5['Texture'](_0x2e0960);return _0x2e5740;},_0x10d23d=function(_0x4879b2,_0xdb353a,_0x5ada7c){const _0x489534={};function _0x419918(_0x2d1b5d,_0x4c5a0f){return _0x1dfc(_0x2d1b5d-0x1ed,_0x4c5a0f);}_0x489534['context']=_0x4879b2,_0x489534['colorTextures']=[_0xdb353a],_0x489534['depthTexture']=_0x5ada7c;const _0x3e3f50=new Cesium$5[(_0x419918(0x339,0x2da))](_0x489534);return _0x3e3f50;},_0x39f86d=function(_0x47b1fe){const _0x3e6e5a=!![],_0x1cfbc1=![],_0x1c2b36={};_0x1c2b36[_0x580943(0x2e5,0x28a)]=_0x47b1fe[_0x580943(0x2e5,0x324)],_0x1c2b36['depthTest']=_0x47b1fe[_0x4f28e5(0x110,0x13d)];function _0x4f28e5(_0x260bbc,_0x5975cc){return _0x1dfc(_0x5975cc- -0x32,_0x260bbc);}_0x1c2b36['depthMask']=_0x47b1fe[_0x580943(0x265,0x231)],_0x1c2b36['blending']=_0x47b1fe[_0x4f28e5(0x17e,0x142)];const _0x50fb35=_0x1c2b36,_0x3a9648=Cesium$5[_0x580943(0x22b,0x1e6)][_0x4f28e5(0x140,0x17b)](_0x3e6e5a,_0x1cfbc1,_0x50fb35);function _0x580943(_0x25c1b4,_0x4a21aa){return _0x1dfc(_0x25c1b4-0xf4,_0x4a21aa);}return _0x3a9648;},_0x5e49f4=function(_0x34c3c0){const _0x51dbae={},_0x4251b4=Cesium$5['Math']['mod'](_0x34c3c0['west'],Cesium$5['Math']['TWO_PI']);function _0x31cf8f(_0x1545ff,_0x385d6a){return _0x1dfc(_0x1545ff- -0x1bc,_0x385d6a);}const _0x550472=Cesium$5['Math']['mod'](_0x34c3c0['east'],Cesium$5['Math'][_0x624573(0x274,0x21d)]),_0xd9c54d=_0x34c3c0['width'];let _0x1d8e6f,_0x49761c;function _0x624573(_0x16a9d3,_0x318b1b){return _0x1dfc(_0x318b1b-0x41,_0x16a9d3);}_0xd9c54d>Cesium$5[_0x624573(0x23a,0x24f)][_0x624573(0x241,0x1ec)]?(_0x1d8e6f=0x0,_0x49761c=Cesium$5['Math']['TWO_PI']):_0x550472-_0x4251b4<_0xd9c54d?(_0x1d8e6f=_0x4251b4,_0x49761c=_0x4251b4+_0xd9c54d):(_0x1d8e6f=_0x4251b4,_0x49761c=_0x550472);_0x51dbae[_0x31cf8f(-0x29,-0x71)]={'min':Cesium$5[_0x624573(0x27d,0x24f)][_0x31cf8f(0x73,0x9b)](_0x1d8e6f),'max':Cesium$5['Math']['toDegrees'](_0x49761c)};const _0x5a37a1=_0x34c3c0[_0x31cf8f(-0x52,-0x6c)],_0x476c7d=_0x34c3c0['north'],_0x2f9d9a=_0x34c3c0[_0x31cf8f(-0x56,-0x73)],_0x384915=_0x2f9d9a>Cesium$5[_0x624573(0x2ae,0x24f)]['PI']/0xc?_0x2f9d9a/0x2:0x0;let _0x354c33=Cesium$5['Math'][_0x624573(0x21f,0x216)](_0x5a37a1-_0x384915),_0x56f333=Cesium$5['Math']['clampToLatitudeRange'](_0x476c7d+_0x384915);return _0x354c33<-Cesium$5[_0x31cf8f(0x52,0x52)][_0x31cf8f(0x5,0x30)]&&(_0x354c33=-Cesium$5['Math'][_0x624573(0x26e,0x20e)]),_0x56f333>Cesium$5['Math'][_0x31cf8f(0x5,0xc)]&&(_0x56f333=Cesium$5['Math'][_0x31cf8f(0x11,0x27)]),_0x51dbae[_0x624573(0x200,0x1a0)]={'min':Cesium$5['Math']['toDegrees'](_0x354c33),'max':Cesium$5[_0x31cf8f(0x52,0x87)][_0x31cf8f(0x73,0xc6)](_0x56f333)},_0x51dbae;},_0x4fa827={};function _0x3230b2(_0x20bb75,_0x2fab0e){return _0x43215e(_0x20bb75,_0x2fab0e-0x1e3);}return _0x4fa827[_0x4fa4aa(0x292,0x217)]=_0x526dd8,_0x4fa827[_0x4fa4aa(0x1b0,0x231)]=_0x30ac0c,_0x4fa827['createFramebuffer']=_0x10d23d,_0x4fa827['createRawRenderState']=_0x39f86d,_0x4fa827['viewRectangleToLonLatRange']=_0x5e49f4,_0x4fa827;}());var segmentDraw_vert='in\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20normal\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20postProcessingSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0aout\x20float\x20speedNormalization;\x0a\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20\x20\x20float\x20a\x20=\x206378137.0;\x20//\x20Semi-major\x20axis\x0a\x20\x20\x20\x20float\x20b\x20=\x206356752.3142;\x20//\x20Semi-minor\x20axis\x0a\x20\x20\x20\x20float\x20e2\x20=\x206.69437999014e-3;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x0a\x20\x20\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calcProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0,\x20360.0)\x20-\x20180.0;\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0);\x0a\x20\x20\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calcOffset(vec4\x20currentProjectedCoordinate,\x20vec4\x20nextProjectedCoordinate,\x20float\x20offsetSign)\x20{\x0a\x20\x20\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0);\x0a\x20\x20\x20\x20vec2\x20currentXY\x20=\x20(currentProjectedCoordinate.xy\x20/\x20currentProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x20\x20\x20\x20vec2\x20nextXY\x20=\x20(nextProjectedCoordinate.xy\x20/\x20nextProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0;\x0a\x20\x20\x20\x20vec2\x20direction\x20=\x20normalize(nextXY\x20-\x20currentXY);\x0a\x20\x20\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0,\x200.0);\x0a\x20\x20\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20\x20\x20vec4\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex);\x0a\x0a\x20\x20\x20\x20vec4\x20currentProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20vec4\x20nextProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(nextPosition.w\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(nextPosition.xyz);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20float\x20pointToUse\x20=\x20normal.x;\x20//\x20-1\x20is\x20currentProjectedCoordinate\x20and\x20+1\x20is\x20nextProjectedCoordinate\x0a\x20\x20\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20pixelSize\x20*\x20calcOffset(currentProjectedCoordinate,\x20nextProjectedCoordinate,\x20offsetSign);\x0a\x20\x20\x20\x20if\x20(pointToUse\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20currentProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20nextProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20speedNormalization\x20=\x20texture(postProcessingSpeed,\x20particleIndex).a;\x0a}\x0a',segmentDraw_frag=_0x43215e(-0x120,-0xe4),fullscreen_vert='in\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(position,\x201.0);\x0a}\x0a',trailDraw_frag=_0x3c7570(0x4d1,0x4b3),screenDraw_frag='uniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20trailsColor;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x0a}\x0a';const Cesium$4=mars3d__namespace[_0x43215e(-0x108,-0x134)];class ParticlesRendering{constructor(_0x4d71cc,_0x50627d,_0x3dc271,_0x5e5def,_0x2cac71){function _0x25f4b7(_0x2421e7,_0x1e3894){return _0x43215e(_0x1e3894,_0x2421e7-0x472);}this[_0x25f4b7(0x38c,0x35b)](_0x4d71cc,_0x50627d,_0x3dc271[_0x5e1aab(-0x1ff,-0x182)]),this['createRenderingFramebuffers'](_0x4d71cc);function _0x5e1aab(_0x33b33a,_0x4b25b2){return _0x43215e(_0x33b33a,_0x4b25b2-0x25);}this[_0x5e1aab(-0x1e3,-0x17c)](_0x4d71cc,_0x3dc271,_0x5e5def,_0x2cac71);}['createRenderingTextures'](_0x2ed346,_0x410f79,_0x18aeed){const _0x5cea29={};function _0x16194f(_0x53044f,_0x3242fd){return _0x43215e(_0x53044f,_0x3242fd- -0xf3);}_0x5cea29['context']=_0x2ed346,_0x5cea29['width']=_0x2ed346['drawingBufferWidth'],_0x5cea29['height']=_0x2ed346[_0x28aafc(-0xe4,-0x15e)],_0x5cea29['pixelFormat']=Cesium$4[_0x16194f(-0x259,-0x234)]['RGBA'],_0x5cea29['pixelDatatype']=Cesium$4['PixelDatatype'][_0x28aafc(-0x176,-0x201)];const _0x1589e2=_0x5cea29,_0x317f99={};_0x317f99[_0x16194f(-0x2b6,-0x29b)]=_0x2ed346,_0x317f99[_0x16194f(-0x2c3,-0x2a5)]=_0x2ed346['drawingBufferWidth'],_0x317f99[_0x28aafc(-0x220,-0x1f7)]=_0x2ed346['drawingBufferHeight'],_0x317f99['pixelFormat']=Cesium$4[_0x16194f(-0x29b,-0x234)]['DEPTH_COMPONENT'],_0x317f99['pixelDatatype']=Cesium$4['PixelDatatype']['UNSIGNED_INT'];function _0x28aafc(_0xa24fab,_0x3315d0){return _0x43215e(_0xa24fab,_0x3315d0- -0x76);}const _0x361df6=_0x317f99,_0x22a59c=_0x18aeed['length'],_0x1b82ad=new Float32Array(_0x22a59c*0x3);for(let _0x17e513=0x0;_0x17e513<_0x22a59c;_0x17e513++){const _0x481440=Cesium$4[_0x16194f(-0x235,-0x202)]['fromCssColorString'](_0x18aeed[_0x17e513]);_0x1b82ad[0x3*_0x17e513]=_0x481440[_0x28aafc(-0x1ec,-0x19f)],_0x1b82ad[0x3*_0x17e513+0x1]=_0x481440['green'],_0x1b82ad[0x3*_0x17e513+0x2]=_0x481440['blue'];}const _0x1b1fcf={'context':_0x2ed346,'width':_0x22a59c,'height':0x1,'pixelFormat':Cesium$4['PixelFormat']['RGB'],'pixelDatatype':Cesium$4[_0x28aafc(-0x231,-0x1d9)][_0x16194f(-0x1ec,-0x1eb)],'sampler':new Cesium$4['Sampler']({'minificationFilter':Cesium$4['TextureMinificationFilter']['LINEAR'],'magnificationFilter':Cesium$4['TextureMagnificationFilter']['LINEAR']})};this['textures']={'segmentsColor':Util[_0x28aafc(-0x20f,-0x1da)](_0x1589e2),'segmentsDepth':Util[_0x16194f(-0x2a6,-0x257)](_0x361df6),'currentTrailsColor':Util[_0x16194f(-0x249,-0x257)](_0x1589e2),'currentTrailsDepth':Util['createTexture'](_0x361df6),'nextTrailsColor':Util['createTexture'](_0x1589e2),'nextTrailsDepth':Util['createTexture'](_0x361df6),'colorTable':Util['createTexture'](_0x1b1fcf,_0x1b82ad)};}['createRenderingFramebuffers'](_0x356d10){function _0x53ec96(_0x329d97,_0xcc8b86){return _0x3c7570(_0xcc8b86,_0x329d97- -0x657);}function _0x4160e3(_0x16a5d2,_0x586c2d){return _0x43215e(_0x586c2d,_0x16a5d2-0x5bf);}this[_0x53ec96(-0x24f,-0x280)]={'segments':Util['createFramebuffer'](_0x356d10,this['textures']['segmentsColor'],this['textures'][_0x53ec96(-0x256,-0x1d3)]),'currentTrails':Util['createFramebuffer'](_0x356d10,this[_0x4160e3(0x448,0x45e)]['currentTrailsColor'],this[_0x53ec96(-0x227,-0x2a6)][_0x53ec96(-0x254,-0x280)]),'nextTrails':Util['createFramebuffer'](_0x356d10,this[_0x53ec96(-0x227,-0x1b6)][_0x4160e3(0x459,0x463)],this['textures']['nextTrailsDepth'])};}['createSegmentsGeometry'](_0x9c8140){function _0x2e7533(_0x19df15,_0x28560d){return _0x43215e(_0x19df15,_0x28560d-0xbd);}const _0x3a7582=0x4;let _0x31a83e=[];for(let _0x336747=0x0;_0x336747<_0x9c8140[_0x4cf869(-0x31,0x1d)];_0x336747++){for(let _0x1be615=0x0;_0x1be615<_0x9c8140[_0x2e7533(-0x157,-0xd4)];_0x1be615++){for(let _0x413427=0x0;_0x413427<_0x3a7582;_0x413427++){_0x31a83e['push'](_0x336747/_0x9c8140['particlesTextureSize']),_0x31a83e['push'](_0x1be615/_0x9c8140['particlesTextureSize']);}}}function _0x4cf869(_0x525a50,_0x24ec9c){return _0x43215e(_0x24ec9c,_0x525a50-0x160);}_0x31a83e=new Float32Array(_0x31a83e);let _0x32c8e7=[];const _0x438710=[-0x1,0x1],_0x5f2356=[-0x1,0x1];for(let _0x246fa5=0x0;_0x246fa5<_0x9c8140['maxParticles'];_0x246fa5++){for(let _0x35b99e=0x0;_0x35b99e<_0x3a7582/0x2;_0x35b99e++){for(let _0x46b01d=0x0;_0x46b01d<_0x3a7582/0x2;_0x46b01d++){_0x32c8e7[_0x2e7533(-0x6d,-0x89)](_0x438710[_0x35b99e]),_0x32c8e7[_0x4cf869(0x1a,0x83)](_0x5f2356[_0x46b01d]),_0x32c8e7[_0x4cf869(0x1a,0x1a)](0x0);}}}_0x32c8e7=new Float32Array(_0x32c8e7);const _0x3f866f=0x6*_0x9c8140[_0x4cf869(0xab,0xb9)],_0x356916=new Uint32Array(_0x3f866f);for(let _0x309e19=0x0,_0x2ae7db=0x0,_0x1dc35d=0x0;_0x309e19<_0x9c8140['maxParticles'];_0x309e19++){_0x356916[_0x2ae7db++]=_0x1dc35d+0x0,_0x356916[_0x2ae7db++]=_0x1dc35d+0x1,_0x356916[_0x2ae7db++]=_0x1dc35d+0x2,_0x356916[_0x2ae7db++]=_0x1dc35d+0x2,_0x356916[_0x2ae7db++]=_0x1dc35d+0x1,_0x356916[_0x2ae7db++]=_0x1dc35d+0x3,_0x1dc35d+=0x4;}const _0x53a100=new Cesium$4[(_0x2e7533(-0x2d,0x2))]({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4[(_0x2e7533(-0x52,-0x32))]({'componentDatatype':Cesium$4[_0x4cf869(-0x60,0x22)]['FLOAT'],'componentsPerAttribute':0x2,'values':_0x31a83e}),'normal':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x3,'values':_0x32c8e7})}),'indices':_0x356916});return _0x53a100;}[_0x43215e(-0x1d8,-0x1a1)](_0x40b893,_0x25c8d9,_0x5df2ce,_0x11a0e7){const _0x58ef90=this,_0x393a66={};_0x393a66['st']=0x0,_0x393a66['normal']=0x1;const _0x5994fc={};_0x5994fc['sources']=[segmentDraw_vert];const _0x48a732={};_0x48a732[_0x4706fa(0x23e,0x219)]=[segmentDraw_frag];const _0x5eac48={};_0x5eac48['enabled']=!![];const _0x32895c={};_0x32895c[_0x53edb2(-0x163,-0x1c7)]=undefined,_0x32895c[_0x4706fa(0x222,0x1db)]=_0x5eac48,_0x32895c['depthMask']=!![];const _0x24104a={};_0x24104a['position']=0x0,_0x24104a['st']=0x1;const _0x111b71={};_0x111b71['defines']=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x111b71[_0x4706fa(0x23e,0x252)]=[fullscreen_vert];const _0x3b0d5f={};_0x3b0d5f[_0x4706fa(0x1fe,0x1d8)]=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x3b0d5f['sources']=[trailDraw_frag];function _0x53edb2(_0x568611,_0x1e39f8){return _0x3c7570(_0x568611,_0x1e39f8- -0x678);}const _0x11f5d6={};_0x11f5d6['position']=0x0,_0x11f5d6['st']=0x1;const _0x32ea28={};_0x32ea28[_0x53edb2(-0x207,-0x26d)]=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x32ea28['sources']=[fullscreen_vert];const _0x3a53af={};_0x3a53af['defines']=[_0x53edb2(-0x17e,-0x1fb)],_0x3a53af['sources']=[screenDraw_frag];const _0x72f95c={};function _0x4706fa(_0x267c07,_0x511f9f){return _0x3c7570(_0x511f9f,_0x267c07- -0x20d);}_0x72f95c['enabled']=![];const _0xd42f51={};_0xd42f51[_0x4706fa(0x1ed,0x183)]=!![],this[_0x53edb2(-0x13d,-0x197)]={'segments':new CustomPrimitive({'commandType':_0x53edb2(-0x214,-0x24d),'attributeLocations':_0x393a66,'geometry':this['createSegmentsGeometry'](_0x25c8d9),'primitiveType':Cesium$4[_0x4706fa(0x245,0x25f)][_0x4706fa(0x238,0x1d8)],'uniformMap':{'currentParticlesPosition':function(){return _0x11a0e7['particlesTextures']['currentParticlesPosition'];},'postProcessingPosition':function(){function _0xa82f2a(_0x4ed3c0,_0xafcb71){return _0x53edb2(_0x4ed3c0,_0xafcb71-0x35f);}function _0x44542f(_0x35a4d0,_0x1555bd){return _0x4706fa(_0x35a4d0- -0x3c5,_0x1555bd);}return _0x11a0e7[_0xa82f2a(0x1de,0x177)][_0xa82f2a(0x17d,0x185)];},'postProcessingSpeed':function(){function _0x4c4285(_0xd99a08,_0x36ea6d){return _0x4706fa(_0x36ea6d-0x269,_0xd99a08);}return _0x11a0e7[_0x4c4285(0x481,0x4ec)]['postProcessingSpeed'];},'colorTable':function(){function _0x588508(_0x17c886,_0x10f0a0){return _0x4706fa(_0x17c886-0xc6,_0x10f0a0);}return _0x58ef90['textures'][_0x588508(0x359,0x392)];},'aspect':function(){return _0x40b893['drawingBufferWidth']/_0x40b893['drawingBufferHeight'];},'pixelSize':function(){function _0x2d6d50(_0x3aed53,_0x2df48c){return _0x4706fa(_0x3aed53-0x54,_0x2df48c);}return _0x5df2ce[_0x2d6d50(0x26c,0x2d5)];},'lineWidth':function(){function _0x2e70df(_0x4de933,_0x5767a3){return _0x53edb2(_0x5767a3,_0x4de933-0x90);}return _0x25c8d9[_0x2e70df(-0x1ab,-0x13a)];},'particleHeight':function(){return _0x25c8d9['particleHeight'];}},'vertexShaderSource':new Cesium$4[(_0x53edb2(-0x1e9,-0x1bf))](_0x5994fc),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x48a732),'rawRenderState':Util['createRawRenderState'](_0x32895c),'framebuffer':this['framebuffers'][_0x53edb2(-0x20b,-0x1f8)],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':_0x53edb2(-0x2ad,-0x24d),'attributeLocations':_0x24104a,'geometry':Util['getFullscreenQuad'](),'primitiveType':Cesium$4['PrimitiveType'][_0x4706fa(0x238,0x1b2)],'uniformMap':{'segmentsColorTexture':function(){return _0x58ef90['textures']['segmentsColor'];},'segmentsDepthTexture':function(){return _0x58ef90['textures']['segmentsDepth'];},'currentTrailsColor':function(){function _0x319bd6(_0x2b07d9,_0x432e76){return _0x53edb2(_0x2b07d9,_0x432e76-0x65f);}return _0x58ef90['framebuffers']['currentTrails'][_0x319bd6(0x43b,0x3da)](0x0);},'trailsDepthTexture':function(){function _0x32d7be(_0x1c842e,_0x42d757){return _0x53edb2(_0x42d757,_0x1c842e- -0x16);}function _0x2935fc(_0x4b916e,_0x5ecea3){return _0x4706fa(_0x5ecea3- -0x1b1,_0x4b916e);}return _0x58ef90[_0x32d7be(-0x286,-0x29a)]['currentTrails'][_0x32d7be(-0x230,-0x259)];},'fadeOpacity':function(){return _0x25c8d9['fadeOpacity'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x111b71),'fragmentShaderSource':new Cesium$4[(_0x4706fa(0x2ac,0x2b0))](_0x3b0d5f),'rawRenderState':Util[_0x4706fa(0x207,0x27f)]({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4[_0x53edb2(-0x254,-0x269)]['ALWAYS']},'depthMask':!![]}),'framebuffer':this[_0x53edb2(-0x2bd,-0x270)]['nextTrails'],'autoClear':!![],'preExecute':function(){const _0x2fe955=_0x58ef90['framebuffers']['currentTrails'];_0x58ef90[_0x4ab909(0xa8,0x104)][_0x4ab909(0xb3,0x2f)]=_0x58ef90['framebuffers'][_0x4ab909(0x18a,0x198)];function _0x4ab909(_0x304931,_0x142861){return _0x4706fa(_0x304931- -0x153,_0x142861);}_0x58ef90[_0x4ab909(0xa8,0x8a)]['nextTrails']=_0x2fe955;function _0x51e565(_0x42dc64,_0x469eb7){return _0x53edb2(_0x42dc64,_0x469eb7-0x3fd);}_0x58ef90['primitives']['trails'][_0x4ab909(0x18b,0x1a7)]['framebuffer']=_0x58ef90[_0x4ab909(0xa8,0x79)]['nextTrails'],_0x58ef90['primitives']['trails']['clearCommand'][_0x4ab909(0x168,0x161)]=_0x58ef90[_0x51e565(0x17a,0x18d)]['nextTrails'];}}),'screen':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x11f5d6,'geometry':Util[_0x53edb2(-0x1ff,-0x24f)](),'primitiveType':Cesium$4['PrimitiveType'][_0x53edb2(-0x2b0,-0x233)],'uniformMap':{'trailsColorTexture':function(){return _0x58ef90['framebuffers']['nextTrails']['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x19c0e9(_0x416358,_0x52ac62){return _0x53edb2(_0x416358,_0x52ac62-0x1da);}return _0x58ef90['framebuffers'][_0x19c0e9(-0x3d,0x4c)]['depthTexture'];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x32ea28),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x3a53af),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0x72f95c,'depthMask':!![],'blending':_0xd42f51}),'framebuffer':undefined})};}}var getWind_frag='//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x,\x20360.0);\x0a\x20\x20\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20-90.0,\x2090.0);\x0a\x0a\x20\x20\x20\x20vec3\x20index3D\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20index3D.z\x20=\x20(lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z;\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205],\x20width\x20=\x203,\x20height\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x203\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x202\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWind(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20\x20\x20float\x20result\x20=\x20texture(windTexture,\x20normalizedIndex2D).r;\x0a\x20\x20\x20\x20return\x20result;\x0a}\x0a\x0aconst\x20mat4\x20kernelMatrix\x20=\x20mat4(\x0a\x20\x20\x20\x200.0,\x20-1.0,\x202.0,\x20-1.0,\x20//\x20first\x20column\x0a\x20\x20\x20\x202.0,\x200.0,\x20-5.0,\x203.0,\x20//\x20second\x20column\x0a\x20\x20\x20\x200.0,\x201.0,\x204.0,\x20-3.0,\x20//\x20third\x20column\x0a\x20\x20\x20\x200.0,\x200.0,\x20-1.0,\x201.0\x20//\x20fourth\x20column\x0a);\x0afloat\x20oneDimensionInterpolation(float\x20t,\x20float\x20p0,\x20float\x20p1,\x20float\x20p2,\x20float\x20p3)\x20{\x0a\x20\x20\x20\x20vec4\x20tVec4\x20=\x20vec4(1.0,\x20t,\x20t\x20*\x20t,\x20t\x20*\x20t\x20*\x20t);\x0a\x20\x20\x20\x20tVec4\x20=\x20tVec4\x20/\x202.0;\x0a\x20\x20\x20\x20vec4\x20pVec4\x20=\x20vec4(p0,\x20p1,\x20p2,\x20p3);\x0a\x20\x20\x20\x20return\x20dot((tVec4\x20*\x20kernelMatrix),\x20pVec4);\x0a}\x0a\x0afloat\x20calculateB(sampler2D\x20windTexture,\x20float\x20t,\x20float\x20lon,\x20float\x20lat,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20float\x20lon0\x20=\x20floor(lon)\x20-\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon1\x20=\x20floor(lon);\x0a\x20\x20\x20\x20float\x20lon2\x20=\x20floor(lon)\x20+\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon3\x20=\x20floor(lon)\x20+\x202.0\x20*\x20interval.x;\x0a\x0a\x20\x20\x20\x20float\x20p0\x20=\x20getWind(windTexture,\x20vec3(lon0,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p1\x20=\x20getWind(windTexture,\x20vec3(lon1,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p2\x20=\x20getWind(windTexture,\x20vec3(lon2,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p3\x20=\x20getWind(windTexture,\x20vec3(lon3,\x20lat,\x20lev));\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(t,\x20p0,\x20p1,\x20p2,\x20p3);\x0a}\x0a\x0afloat\x20interpolateOneTexture(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20\x20\x20float\x20lat0\x20=\x20floor(lat)\x20-\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat1\x20=\x20floor(lat);\x0a\x20\x20\x20\x20float\x20lat2\x20=\x20floor(lat)\x20+\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat3\x20=\x20floor(lat)\x20+\x202.0\x20*\x20interval.y;\x0a\x0a\x20\x20\x20\x20vec2\x20coefficient\x20=\x20lonLatLev.xy\x20-\x20floor(lonLatLev.xy);\x0a\x20\x20\x20\x20float\x20b0\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat0,\x20lev);\x0a\x20\x20\x20\x20float\x20b1\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat1,\x20lev);\x0a\x20\x20\x20\x20float\x20b2\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat2,\x20lev);\x0a\x20\x20\x20\x20float\x20b3\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat3,\x20lev);\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(coefficient.y,\x20b0,\x20b1,\x20b2,\x20b3);\x0a}\x0a\x0avec3\x20bicubic(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\x0a\x20\x20\x20\x20float\x20u\x20=\x20interpolateOneTexture(U,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20v\x20=\x20interpolateOneTexture(V,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20bicubic(lonLatLev);\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(windVector,\x200.0);\x0a}\x0a',updateSpeed_frag='uniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0auniform\x20sampler2D\x20particlesWind;\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20speedFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec3\x20percent\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20\x20\x20float\x20normalization\x20=\x20length(percent);\x0a\x0a\x20\x20\x20\x20return\x20normalization;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20//\x20vec3\x20currentSpeed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20texture(particlesWind,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20vec4(speedFactor\x20*\x20pixelSize\x20*\x20windVector,\x20calculateWindNorm(windVector));\x0a\x20\x20\x20\x20out_FragColor\x20=\x20nextSpeed;\x0a}\x0a',updatePosition_frag=_0x3c7570(0x3cc,0x3fb),postProcessingPosition_frag='uniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0auniform\x20float\x20dropRate;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0auniform\x20float\x20dropRateBump;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898,\x2078.233,\x204375.85453);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0,\x201.0);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0);\x0a\x20\x20\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20lev);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20\x20\x20return\x20particle.y\x20<\x20-90.0\x20||\x20particle.y\x20>\x2090.0;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20nextSpeed.a;\x0a\x0a\x20\x20\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20\x20\x20if\x20(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(randomParticle,\x201.0);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a\x20\x20\x20\x20}\x0a}\x0a',postProcessingSpeed_frag=_0x3c7570(0x4fb,0x48b);const Cesium$3=mars3d__namespace[_0x43215e(-0xcf,-0x134)];function _0x1dfc(_0x2da291,_0x161d21){const _0x419edf=_0x419e();return _0x1dfc=function(_0x1dfcaa,_0x543ce1){_0x1dfcaa=_0x1dfcaa-0x11e;let _0x3a169b=_0x419edf[_0x1dfcaa];return _0x3a169b;},_0x1dfc(_0x2da291,_0x161d21);}class ParticlesComputing{constructor(_0x1145f3,_0x515751,_0x59e867,_0x271353){this['data']=_0x515751,this['createWindTextures'](_0x1145f3,_0x515751),this['createParticlesTextures'](_0x1145f3,_0x59e867,_0x271353),this['createComputingPrimitives'](_0x515751,_0x59e867,_0x271353);}[_0x3c7570(0x3d1,0x41d)](_0x767815,_0x5ee35d){function _0x22c956(_0x2e0bd5,_0x16c24a){return _0x43215e(_0x2e0bd5,_0x16c24a-0xc1);}function _0x4657b9(_0x57897f,_0x437cb5){return _0x43215e(_0x57897f,_0x437cb5- -0x4b);}const _0x4d7518={'context':_0x767815,'width':_0x5ee35d['dimensions']['lon'],'height':_0x5ee35d['dimensions']['lat']*(_0x5ee35d['dimensions'][_0x22c956(-0xc2,-0xd9)]||0x1),'pixelFormat':Cesium$3['PixelFormat']['LUMINANCE'],'pixelDatatype':Cesium$3[_0x22c956(-0x68,-0xa2)][_0x22c956(0xc,-0x37)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0x4657b9(-0x21e,-0x197)][_0x4657b9(-0x103,-0x181)],'magnificationFilter':Cesium$3[_0x4657b9(-0x12d,-0x1a2)]['NEAREST']})};this['windTextures']={'U':Util['createTexture'](_0x4d7518,_0x5ee35d['U']['array']),'V':Util['createTexture'](_0x4d7518,_0x5ee35d['V']['array'])};}['createParticlesTextures'](_0x1aa9e0,_0x217d11,_0x3766c6){const _0x3d5823={'context':_0x1aa9e0,'width':_0x217d11['particlesTextureSize'],'height':_0x217d11['particlesTextureSize'],'pixelFormat':Cesium$3['PixelFormat'][_0x333db0(0x600,0x67f)],'pixelDatatype':Cesium$3['PixelDatatype'][_0x333db0(0x5d4,0x647)],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter']['NEAREST']})};function _0x519b93(_0x6b4aa2,_0x3f54d2){return _0x3c7570(_0x3f54d2,_0x6b4aa2- -0x136);}function _0x333db0(_0x4c43bc,_0x5c3c46){return _0x43215e(_0x5c3c46,_0x4c43bc-0x6cc);}const _0x149ffe=this[_0x333db0(0x57e,0x55b)](_0x217d11['maxParticles'],_0x3766c6),_0x2ea5c7=new Float32Array(0x4*_0x217d11[_0x519b93(0x3bc,0x3bc)])['fill'](0x0);this['particlesTextures']={'particlesWind':Util['createTexture'](_0x3d5823),'currentParticlesPosition':Util[_0x333db0(0x568,0x51c)](_0x3d5823,_0x149ffe),'nextParticlesPosition':Util[_0x519b93(0x30d,0x315)](_0x3d5823,_0x149ffe),'currentParticlesSpeed':Util[_0x519b93(0x30d,0x394)](_0x3d5823,_0x2ea5c7),'nextParticlesSpeed':Util[_0x333db0(0x568,0x56f)](_0x3d5823,_0x2ea5c7),'postProcessingPosition':Util['createTexture'](_0x3d5823,_0x149ffe),'postProcessingSpeed':Util[_0x519b93(0x30d,0x2a8)](_0x3d5823,_0x2ea5c7)};}['randomizeParticles'](_0x2b8268,_0x35d1f8){const _0x441e38=new Float32Array(0x4*_0x2b8268);for(let _0x399556=0x0;_0x399556<_0x2b8268;_0x399556++){_0x441e38[0x4*_0x399556]=Cesium$3[_0x4427b9(0x2b2,0x279)]['randomBetween'](_0x35d1f8['lonRange']['x'],_0x35d1f8['lonRange']['y']),_0x441e38[0x4*_0x399556+0x1]=Cesium$3['Math']['randomBetween'](_0x35d1f8[_0x4427b9(0x2a0,0x288)]['x'],_0x35d1f8['latRange']['y']),_0x441e38[0x4*_0x399556+0x2]=Cesium$3['Math']['randomBetween'](this['data']['lev'][_0x7d211c(0xef,0xa9)],this['data'][_0x4427b9(0x1f1,0x1b0)]['max']),_0x441e38[0x4*_0x399556+0x3]=0x0;}function _0x7d211c(_0xf5c25d,_0x5afd3b){return _0x3c7570(_0xf5c25d,_0x5afd3b- -0x360);}function _0x4427b9(_0x2083d0,_0x1201cd){return _0x3c7570(_0x1201cd,_0x2083d0- -0x21c);}return _0x441e38;}['destroyParticlesTextures'](){function _0x53c8f1(_0x3434cf,_0x2e2a26){return _0x3c7570(_0x2e2a26,_0x3434cf- -0x8e);}function _0x16faf3(_0x4acdb5,_0x42a672){return _0x3c7570(_0x4acdb5,_0x42a672- -0xe);}Object['keys'](this[_0x53c8f1(0x402,0x3ec)])[_0x16faf3(0x3f3,0x468)](_0x33fbe0=>{function _0x3b28b6(_0x2987d9,_0xf5ce62){return _0x16faf3(_0xf5ce62,_0x2987d9- -0x55c);}function _0x5bd9c7(_0x337fcd,_0x3138d7){return _0x16faf3(_0x337fcd,_0x3138d7- -0x2be);}this[_0x5bd9c7(0x19d,0x1c4)][_0x33fbe0][_0x3b28b6(-0x11c,-0xcb)]();});}['createComputingPrimitives'](_0x56c971,_0x120c39,_0x3697f1){const _0x2910a7=new Cesium$3[(_0x3574e2(0x118,0x137))](_0x56c971['dimensions'][_0x3574e2(0x37,0x9a)],_0x56c971[_0x3574e2(0x193,0x125)]['lat'],_0x56c971[_0x3574e2(0x159,0x125)][_0x3574e2(0xd3,0x54)]),_0x405874=new Cesium$3['Cartesian3'](_0x56c971['lon'][_0x3574e2(0x8f,0x50)],_0x56c971['lat'][_0x3574e2(-0x23,0x50)],_0x56c971[_0x3574e2(-0x6,0x54)]['min']),_0x4f497f=new Cesium$3[(_0x6354e8(0xb3,0xa3))](_0x56c971[_0x6354e8(-0x25,0x6)]['max'],_0x56c971['lat'][_0x6354e8(-0xb,0x58)],_0x56c971[_0x3574e2(0xab,0x54)][_0x3574e2(0x6f,0xec)]),_0x5451c3=new Cesium$3['Cartesian3']((_0x4f497f['x']-_0x405874['x'])/(_0x2910a7['x']-0x1),(_0x4f497f['y']-_0x405874['y'])/(_0x2910a7['y']-0x1),_0x2910a7['z']>0x1?(_0x4f497f['z']-_0x405874['z'])/(_0x2910a7['z']-0x1):0x1),_0x19b338=new Cesium$3['Cartesian2'](_0x56c971['U']['min'],_0x56c971['U']['max']),_0x5d9855=new Cesium$3[(_0x6354e8(0x38,0x56))](_0x56c971['V'][_0x3574e2(0x38,0x50)],_0x56c971['V']['max']),_0x250e06=this,_0x5e61d7={};function _0x6354e8(_0xc51a2c,_0x2a954c){return _0x3c7570(_0xc51a2c,_0x2a954c- -0x44d);}_0x5e61d7['U']=function(){return _0x250e06['windTextures']['U'];},_0x5e61d7['V']=function(){return _0x250e06['windTextures']['V'];},_0x5e61d7['currentParticlesPosition']=function(){function _0x1c7a2c(_0x20ccce,_0x55e994){return _0x6354e8(_0x20ccce,_0x55e994- -0x21f);}return _0x250e06[_0x1c7a2c(-0x1a4,-0x1dc)]['currentParticlesPosition'];};function _0x3574e2(_0x35e8ee,_0x210907){return _0x43215e(_0x35e8ee,_0x210907-0x1ee);}_0x5e61d7['dimension']=function(){return _0x2910a7;},_0x5e61d7['minimum']=function(){return _0x405874;},_0x5e61d7['maximum']=function(){return _0x4f497f;},_0x5e61d7[_0x6354e8(0x62,0x3a)]=function(){return _0x5451c3;};const _0x34478f={};_0x34478f[_0x6354e8(0x61,-0x2)]=[getWind_frag];const _0x3cf3ff={};_0x3cf3ff[_0x3574e2(0x97,0x92)]=[updateSpeed_frag];const _0x1c9517={};_0x1c9517['sources']=[updatePosition_frag];const _0x3884eb={};_0x3884eb['sources']=[postProcessingPosition_frag];const _0x171cd3={};_0x171cd3[_0x6354e8(0x88,-0x2)]=[postProcessingSpeed_frag],this[_0x6354e8(0x75,0x94)]={'getWind':new CustomPrimitive({'commandType':'Compute','uniformMap':_0x5e61d7,'fragmentShaderSource':new Cesium$3[(_0x3574e2(0x187,0x100))](_0x34478f),'outputTexture':this['particlesTextures'][_0x3574e2(0x145,0x12f)],'preExecute':function(){function _0x104d9b(_0x4407f0,_0x3780a4){return _0x3574e2(_0x4407f0,_0x3780a4- -0x280);}_0x250e06['primitives']['getWind']['commandToExecute']['outputTexture']=_0x250e06['particlesTextures'][_0x104d9b(-0x1c7,-0x151)];}}),'updateSpeed':new CustomPrimitive({'commandType':_0x6354e8(0x8,-0x1),'uniformMap':{'currentParticlesSpeed':function(){function _0x4cefac(_0x1619df,_0x41dedf){return _0x3574e2(_0x1619df,_0x41dedf- -0x270);}return _0x250e06['particlesTextures'][_0x4cefac(-0x104,-0x17e)];},'particlesWind':function(){return _0x250e06['particlesTextures']['particlesWind'];},'uSpeedRange':function(){return _0x19b338;},'vSpeedRange':function(){return _0x5d9855;},'pixelSize':function(){return _0x3697f1['pixelSize'];},'speedFactor':function(){return _0x120c39['speedFactor'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x3cf3ff),'outputTexture':this[_0x3574e2(0x89,0xd7)]['nextParticlesSpeed'],'preExecute':function(){const _0x3dc76d=_0x250e06[_0xb73323(0x518,0x4a4)]['currentParticlesSpeed'];_0x250e06[_0x175d83(-0xbd,-0xba)][_0x175d83(-0xed,-0x9f)]=_0x250e06[_0xb73323(0x518,0x4cf)]['postProcessingSpeed'];function _0x175d83(_0x439695,_0x239cea){return _0x6354e8(_0x439695,_0x239cea- -0xfd);}_0x250e06[_0xb73323(0x518,0x493)]['postProcessingSpeed']=_0x3dc76d;function _0xb73323(_0x1d1e50,_0x1fc56f){return _0x3574e2(_0x1fc56f,_0x1d1e50-0x441);}_0x250e06['primitives'][_0x175d83(-0x11d,-0xe3)]['commandToExecute']['outputTexture']=_0x250e06[_0xb73323(0x518,0x4a0)]['nextParticlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':_0x3574e2(0x62,0x93),'uniformMap':{'currentParticlesPosition':function(){function _0x480d00(_0x3758f3,_0x50e0ee){return _0x6354e8(_0x3758f3,_0x50e0ee-0x414);}return _0x250e06['particlesTextures'][_0x480d00(0x483,0x435)];},'currentParticlesSpeed':function(){function _0x51fd83(_0x2086f0,_0x350826){return _0x3574e2(_0x2086f0,_0x350826-0xb9);}return _0x250e06[_0x51fd83(0x1f6,0x190)]['currentParticlesSpeed'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x1c9517),'outputTexture':this['particlesTextures'][_0x3574e2(0xa2,0x12a)],'preExecute':function(){function _0x162084(_0x6fcb60,_0xad0b4c){return _0x6354e8(_0xad0b4c,_0x6fcb60- -0x22c);}const _0x1ad586=_0x250e06['particlesTextures'][_0x5cac2b(0x13b,0xfe)];_0x250e06['particlesTextures'][_0x162084(-0x20b,-0x279)]=_0x250e06[_0x162084(-0x1e9,-0x1be)]['postProcessingPosition'];function _0x5cac2b(_0x18d053,_0x49ed7e){return _0x6354e8(_0x49ed7e,_0x18d053-0x11a);}_0x250e06['particlesTextures'][_0x5cac2b(0x16b,0x1ce)]=_0x1ad586,_0x250e06[_0x162084(-0x198,-0x215)]['updatePosition']['commandToExecute']['outputTexture']=_0x250e06['particlesTextures']['nextParticlesPosition'];}}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':function(){return _0x250e06['particlesTextures']['nextParticlesPosition'];},'nextParticlesSpeed':function(){function _0xc9246b(_0x418290,_0x1fa83c){return _0x6354e8(_0x1fa83c,_0x418290-0x191);}return _0x250e06['particlesTextures'][_0xc9246b(0x124,0x99)];},'lonRange':function(){function _0x5b4d1f(_0x4d874b,_0x1b0064){return _0x3574e2(_0x1b0064,_0x4d874b-0x29c);}return _0x3697f1[_0x5b4d1f(0x2e5,0x320)];},'latRange':function(){return _0x3697f1['latRange'];},'randomCoefficient':function(){const _0x2fd5b4=Math['random']();return _0x2fd5b4;},'dropRate':function(){return _0x120c39['dropRate'];},'dropRateBump':function(){return _0x120c39['dropRateBump'];}},'fragmentShaderSource':new Cesium$3[(_0x3574e2(0xb0,0x100))](_0x3884eb),'outputTexture':this[_0x6354e8(0xc8,0x43)]['postProcessingPosition'],'preExecute':function(){function _0x7f0878(_0x44aff4,_0x4997c4){return _0x3574e2(_0x44aff4,_0x4997c4-0x28f);}function _0x590993(_0x5aba3e,_0x4e858e){return _0x6354e8(_0x5aba3e,_0x4e858e-0x3af);}_0x250e06['primitives'][_0x7f0878(0x304,0x374)]['commandToExecute'][_0x590993(0x3de,0x37d)]=_0x250e06['particlesTextures']['postProcessingPosition'];}}),'postProcessingSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'postProcessingPosition':function(){function _0x2ac5aa(_0x19f257,_0xae9c75){return _0x6354e8(_0xae9c75,_0x19f257-0x2ec);}return _0x250e06['particlesTextures'][_0x2ac5aa(0x33d,0x2b9)];},'nextParticlesSpeed':function(){function _0x532730(_0x41766f,_0x16ba67){return _0x6354e8(_0x16ba67,_0x41766f-0xec);}return _0x250e06['particlesTextures'][_0x532730(0x7f,0x7d)];}},'fragmentShaderSource':new Cesium$3[(_0x3574e2(0x183,0x100))](_0x171cd3),'outputTexture':this[_0x3574e2(0xae,0xd7)]['postProcessingSpeed'],'preExecute':function(){function _0x640d92(_0x59d580,_0x1df08a){return _0x6354e8(_0x59d580,_0x1df08a- -0x1b);}_0x250e06[_0x640d92(0xba,0x79)]['postProcessingSpeed']['commandToExecute']['outputTexture']=_0x250e06['particlesTextures']['postProcessingSpeed'];}})};}}const Cesium$2=mars3d__namespace[_0x43215e(-0x133,-0x134)];class ParticleSystem{constructor(_0x4852aa,_0x153e5f,_0x118377,_0x39680b){this['context']=_0x4852aa,_0x153e5f={..._0x153e5f};function _0x2c1e31(_0x2affc5,_0x4a49f8){return _0x3c7570(_0x2affc5,_0x4a49f8- -0x49d);}_0x153e5f[_0x29d21e(-0x1bf,-0x204)]&&_0x153e5f[_0x2c1e31(-0x94,-0x61)]&&(_0x153e5f['dimensions']={},_0x153e5f['dimensions'][_0x29d21e(-0x185,-0x1b6)]=_0x153e5f['cols'],_0x153e5f['dimensions']['lat']=_0x153e5f[_0x29d21e(-0x161,-0x1d1)],_0x153e5f['dimensions']['lev']=_0x153e5f['lev']||0x1,_0x153e5f['lon']={},_0x153e5f['lon'][_0x29d21e(-0x1cf,-0x21a)]=_0x153e5f['xmin'],_0x153e5f['lon']['max']=_0x153e5f['xmax'],_0x153e5f[_0x2c1e31(-0x101,-0x7e)]={},_0x153e5f['lat']['min']=_0x153e5f['ymin'],_0x153e5f['lat'][_0x29d21e(-0x133,-0x121)]=_0x153e5f[_0x29d21e(-0x10b,-0x11e)],_0x153e5f['lev']={},_0x153e5f['lev']['min']=_0x153e5f['levmin']??0x1,_0x153e5f['lev']['max']=_0x153e5f['levmax']??0x1,_0x153e5f['U']={},_0x153e5f['U']['array']=new Float32Array(_0x153e5f[_0x2c1e31(-0xa8,-0x84)]),_0x153e5f['U']['min']=_0x153e5f['umin']??Math['min'](..._0x153e5f['udata']),_0x153e5f['U'][_0x2c1e31(-0x61,0x8)]=_0x153e5f['umax']??Math['max'](..._0x153e5f['udata']),_0x153e5f['V']={},_0x153e5f['V'][_0x2c1e31(-0x42,-0x2)]=new Float32Array(_0x153e5f['vdata']),_0x153e5f['V'][_0x29d21e(-0x1cf,-0x244)]=_0x153e5f['vmin']??Math['min'](..._0x153e5f['vdata']),_0x153e5f['V'][_0x29d21e(-0x133,-0xc7)]=_0x153e5f[_0x2c1e31(-0xa,-0x79)]??Math['max'](..._0x153e5f[_0x2c1e31(-0x5c,-0x61)]));function _0x29d21e(_0x16f9e1,_0x2b008c){return _0x3c7570(_0x2b008c,_0x16f9e1- -0x5d8);}this['data']=_0x153e5f,this['options']=_0x118377,this[_0x2c1e31(-0x8a,-0x46)]=_0x39680b,this[_0x2c1e31(0x3d,-0x2b)]=new ParticlesComputing(this[_0x29d21e(-0x1d9,-0x174)],this['data'],this[_0x2c1e31(-0x35,0x1a)],this['viewerParameters']),this[_0x2c1e31(0x58,0x17)]=new ParticlesRendering(this['context'],this['data'],this['options'],this['viewerParameters'],this['particlesComputing']);}[_0x3c7570(0x453,0x4be)](_0x258115){this['particlesComputing'][_0x59ec46(0x45e,0x484)](),Object['keys'](this['particlesComputing']['windTextures'])['forEach'](_0x1f0a04=>{function _0x59815e(_0x299b0b,_0x1e1d31){return _0x59ec46(_0x299b0b- -0x4a0,_0x1e1d31);}this['particlesComputing']['windTextures'][_0x1f0a04][_0x59815e(-0x68,-0xc7)]();});function _0x17ef8b(_0x2e92b1,_0x3c4795){return _0x3c7570(_0x3c4795,_0x2e92b1-0x19);}this['particlesRendering'][_0x17ef8b(0x449,0x3ee)]['colorTable']['destroy'](),Object['keys'](this['particlesRendering']['framebuffers'])['forEach'](_0x64ac9=>{function _0x1f6aaf(_0x27766f,_0x513330){return _0x17ef8b(_0x27766f- -0x678,_0x513330);}this['particlesRendering']['framebuffers'][_0x64ac9][_0x1f6aaf(-0x211,-0x18d)]();}),this[_0x59ec46(0x3e9,0x419)]=_0x258115,this['particlesComputing']=new ParticlesComputing(this[_0x59ec46(0x3e9,0x3e0)],this[_0x59ec46(0x3e8,0x40d)],this['options'],this[_0x59ec46(0x441,0x4b3)]);function _0x59ec46(_0x51690f,_0x1dbe4c){return _0x43215e(_0x1dbe4c,_0x51690f-0x591);}this['particlesRendering']=new ParticlesRendering(this[_0x17ef8b(0x418,0x44f)],this[_0x59ec46(0x3e8,0x3c3)],this['options'],this['viewerParameters'],this['particlesComputing']);}['clearFramebuffers'](){function _0x5f4004(_0x50d424,_0x532fe3){return _0x3c7570(_0x532fe3,_0x50d424- -0x5ed);}const _0x27bdfc=new Cesium$2['ClearCommand']({'color':new Cesium$2[(_0x589d54(-0xc6,-0xcc))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2['Pass'][_0x5f4004(-0x1fb,-0x1aa)]});function _0x589d54(_0x210cd3,_0x5d3bca){return _0x43215e(_0x5d3bca,_0x210cd3-0x49);}Object['keys'](this[_0x589d54(-0xaa,-0x10f)][_0x589d54(-0x156,-0x1b5)])[_0x589d54(-0xe8,-0x10c)](_0x5e185d=>{_0x27bdfc[_0x2c4113(0x4ee,0x544)]=this[_0x37f71a(0x1ed,0x175)]['framebuffers'][_0x5e185d];function _0x2c4113(_0x11665a,_0x59316f){return _0x5f4004(_0x59316f-0x669,_0x11665a);}function _0x37f71a(_0x5c4b49,_0x2b623b){return _0x5f4004(_0x2b623b-0x2ae,_0x5c4b49);}_0x27bdfc['execute'](this[_0x2c4113(0x4aa,0x47b)]);});}['refreshParticles'](_0x41f0a8){function _0xd1eb59(_0x3bf74e,_0x4f3840){return _0x3c7570(_0x3bf74e,_0x4f3840-0x9c);}this[_0x5a2e16(0x118,0x17f)]();function _0x5a2e16(_0x147aee,_0x4ded68){return _0x3c7570(_0x4ded68,_0x147aee- -0x3b3);}this[_0x5a2e16(0xbf,0x77)]['destroyParticlesTextures'](),this['particlesComputing'][_0xd1eb59(0x564,0x4ff)](this['context'],this['options'],this[_0xd1eb59(0x554,0x4f3)]);if(_0x41f0a8){var _0x2d5cd6;const _0x5cc3f6=this['particlesRendering'][_0x5a2e16(0x6b,0x9a)](this['options']);this['particlesRendering']['primitives'][_0x5a2e16(0xcd,0xba)][_0xd1eb59(0x532,0x572)]=_0x5cc3f6;const _0xaf65fa=Cesium$2[_0x5a2e16(0x132,0x191)]['fromGeometry']({'context':this['context'],'geometry':_0x5cc3f6,'attributeLocations':this[_0x5a2e16(0x101,0x10d)]['primitives'][_0xd1eb59(0x4b4,0x51c)][_0x5a2e16(0x4a,0x8d)],'bufferUsage':Cesium$2[_0x5a2e16(0x79,0xbc)][_0xd1eb59(0x529,0x500)]});(_0x2d5cd6=this['particlesRendering'][_0xd1eb59(0x551,0x57d)])!==null&&_0x2d5cd6!==void 0x0&&(_0x2d5cd6=_0x2d5cd6['segments'])!==null&&_0x2d5cd6!==void 0x0&&_0x2d5cd6[_0x5a2e16(0x138,0x157)]&&(this['particlesRendering']['primitives'][_0xd1eb59(0x524,0x51c)][_0xd1eb59(0x58e,0x587)]['vertexArray']=_0xaf65fa);}}[_0x43215e(-0x1f7,-0x1b7)](_0x2868a0){let _0x293ee5=![];this['options'][_0x37cb64(0x511,0x4a2)]!==_0x2868a0['maxParticles']&&(_0x293ee5=!![]);function _0x37cb64(_0x2c46c4,_0x39a145){return _0x43215e(_0x2c46c4,_0x39a145-0x557);}Object['keys'](_0x2868a0)['forEach'](_0x4c483f=>{this['options'][_0x4c483f]=_0x2868a0[_0x4c483f];}),this['refreshParticles'](_0x293ee5);}['applyViewerParameters'](_0x17852e){function _0x226707(_0x2a0cee,_0x1eff2a){return _0x43215e(_0x1eff2a,_0x2a0cee- -0xf2);}Object[_0x226707(-0x1b2,-0x1d7)](_0x17852e)['forEach'](_0x393bbf=>{this['viewerParameters'][_0x393bbf]=_0x17852e[_0x393bbf];}),this['refreshParticles'](![]);}[_0x3c7570(0x492,0x44e)](){function _0x1f698a(_0x549013,_0x3b97b3){return _0x3c7570(_0x549013,_0x3b97b3- -0x1eb);}clearTimeout(this['canrefresh']),this[_0x471c2b(-0x1a8,-0x225)]['destroyParticlesTextures'](),Object[_0x471c2b(-0x176,-0x1b0)](this[_0x471c2b(-0x21d,-0x225)][_0x471c2b(-0x1eb,-0x1f1)])[_0x471c2b(-0x206,-0x221)](_0x15fd1b=>{function _0x1821d9(_0x4b0ae9,_0x15c80e){return _0x471c2b(_0x15c80e,_0x4b0ae9-0x3e4);}function _0x574ba0(_0xe0b672,_0x87e564){return _0x1f698a(_0x87e564,_0xe0b672- -0x35d);}this['particlesComputing'][_0x574ba0(-0xa2,-0x6f)][_0x15fd1b][_0x574ba0(-0xfa,-0xf3)]();}),this['particlesRendering']['textures'][_0x471c2b(-0x1f2,-0x1f7)]['destroy']();function _0x471c2b(_0x53cb85,_0x42b575){return _0x3c7570(_0x53cb85,_0x42b575- -0x697);}Object['keys'](this[_0x471c2b(-0x185,-0x1e3)]['framebuffers'])['forEach'](_0x11bcb7=>{this['particlesRendering']['framebuffers'][_0x11bcb7]['destroy']();});for(const _0x50c91d in this){delete this[_0x50c91d];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x4379b3={};_0x4379b3['particlesNumber']=0x1000,_0x4379b3['fixedHeight']=0x0,_0x4379b3[_0x43215e(-0x120,-0xe5)]=0.996,_0x4379b3[_0x43215e(-0x8e,-0x111)]=0.003,_0x4379b3[_0x43215e(-0x1a1,-0x19d)]=0.01,_0x4379b3['speedFactor']=0.5,_0x4379b3['lineWidth']=0x2,_0x4379b3['colors']=['rgb(206,255,255)'];const DEF_OPTIONS=_0x4379b3;class WindLayer extends BaseLayer$1{constructor(_0x81b838={}){_0x81b838={...DEF_OPTIONS,..._0x81b838},super(_0x81b838),this['_setOptionsHook'](_0x81b838);}get['layer'](){function _0x50f201(_0xdde5d2,_0x32dffa){return _0x43215e(_0xdde5d2,_0x32dffa-0x523);}return this[_0x50f201(0x442,0x45d)];}get['data'](){return this['_data'];}set['data'](_0x57f0d3){this['setData'](_0x57f0d3);}get[_0x43215e(-0x1c6,-0x1a7)](){return this['options']['colors'];}set[_0x43215e(-0x157,-0x1a7)](_0x7dd3bb){this['options'][_0x59060d(0x240,0x236)]=_0x7dd3bb;if(this[_0x3375ec(0x483,0x410)]){const _0x4c67bf={};_0x4c67bf[_0x3375ec(0x44f,0x40c)]=_0x7dd3bb,this[_0x59060d(0x244,0x1ec)]['setOptions'](_0x4c67bf);}function _0x3375ec(_0x3bd395,_0x3fc917){return _0x3c7570(_0x3bd395,_0x3fc917-0xc);}function _0x59060d(_0x5c34f3,_0x48e0fc){return _0x43215e(_0x48e0fc,_0x5c34f3-0x3e7);}this[_0x59060d(0x326,0x311)]();}['_mountedHook'](){}['_addedHook'](){this[_0x239d72(0x51c,0x546)]=this[_0x239d72(0x53a,0x52c)][_0x35896c(0x400,0x41e)];function _0x35896c(_0x1ea780,_0x50e05d){return _0x3c7570(_0x50e05d,_0x1ea780- -0x60);}this[_0x35896c(0x472,0x4a9)]=this['_map']['camera'];function _0x239d72(_0x4b9476,_0x3f1002){return _0x43215e(_0x4b9476,_0x3f1002-0x68d);}this['primitives']=new Cesium$1['PrimitiveCollection'](),this[_0x35896c(0x3e6,0x429)]['scene']['primitives'][_0x35896c(0x478,0x480)](this[_0x35896c(0x481,0x4db)]),this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](),'latRange':new Cesium$1[(_0x35896c(0x443,0x4cd))](),'pixelSize':0x0},this['globeBoundingSphere']=new Cesium$1[(_0x35896c(0x40f,0x47f))](Cesium$1[_0x35896c(0x490,0x465)][_0x239d72(0x5c8,0x598)],0.99*0x615299),this['updateViewerParameters'](),window[_0x35896c(0x42a,0x47e)]('resize',this[_0x35896c(0x486,0x480)]['bind'](this),![]),this[_0x35896c(0x3ba,0x352)]=![],this['mouse_move']=![],this[_0x35896c(0x3e6,0x437)]['on'](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace[_0x35896c(0x433,0x3f9)]['mouseDown'],this[_0x239d72(0x55b,0x592)],this),this['_map']['on'](mars3d__namespace[_0x35896c(0x433,0x47c)]['mouseUp'],this['_onMouseUpEvent'],this),this[_0x239d72(0x4fd,0x52c)]['on'](mars3d__namespace[_0x35896c(0x433,0x407)][_0x35896c(0x42f,0x485)],this['_onMouseMoveEvent'],this),this['_data']&&this[_0x239d72(0x5a8,0x590)](this[_0x35896c(0x3df,0x433)]);}[_0x43215e(-0x17b,-0x14b)](){window[_0x2ac194(0x144,0x17d)]('resize',this[_0x2ac194(0x218,0x22f)]);function _0x2ac194(_0x5824dd,_0x3d6c28){return _0x3c7570(_0x3d6c28,_0x5824dd- -0x2ce);}function _0x243a0e(_0x4b2bca,_0x396533){return _0x43215e(_0x396533,_0x4b2bca-0x159);}this['_map'][_0x2ac194(0x17b,0x117)](mars3d__namespace['EventType'][_0x243a0e(-0x70,-0x64)],this['_onMap_preRenderEvent'],this),this['_map'][_0x243a0e(-0x5,0x42)](mars3d__namespace[_0x243a0e(0x45,0x1c)][_0x2ac194(0x1ed,0x1b7)],this['_onMapWhellEvent'],this),this[_0x243a0e(-0x8,0xd)]['off'](mars3d__namespace[_0x243a0e(0x45,-0x10)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace[_0x243a0e(0x45,-0x9)]['mouseUp'],this['_onMouseUpEvent'],this),this['_map'][_0x2ac194(0x17b,0x12b)](mars3d__namespace['EventType'][_0x2ac194(0x1c1,0x194)],this[_0x243a0e(0x2c,0x1c)],this),this[_0x243a0e(0x93,0xe3)]['removeAll'](),this['_map'][_0x2ac194(0x192,0x10c)]['primitives']['remove'](this['primitives']);}['resize'](){if(!this['show']||!this[_0x510310(0x407,0x404)])return;this[_0x510310(0x4e4,0x539)]['show']=![],this[_0x510310(0x4e4,0x4d1)]['removeAll']();function _0x431084(_0x31d49c,_0x22e263){return _0x43215e(_0x31d49c,_0x22e263-0x40d);}function _0x510310(_0x4320b9,_0xc00b89){return _0x3c7570(_0xc00b89,_0x4320b9-0x3);}this['_map']['once'](mars3d__namespace['EventType'][_0x510310(0x3e1,0x45d)],this[_0x431084(0x356,0x2df)],this);}[_0x43215e(-0xdc,-0x12e)](_0x87bf3e){function _0x291c40(_0x10f354,_0x196e3d){return _0x3c7570(_0x10f354,_0x196e3d- -0x299);}this[_0x291c40(0x169,0x16b)][_0x314579(0x2d8,0x340)](this[_0x314579(0x27a,0x25d)][_0x291c40(0x1aa,0x166)]);function _0x314579(_0x2dea92,_0x349ab3){return _0x43215e(_0x349ab3,_0x2dea92-0x3c1);}this[_0x291c40(0x1c1,0x199)](),this[_0x314579(0x2fb,0x383)][_0x291c40(0x14b,0x188)]=!![];}['_onMapWhellEvent'](_0x701c3){clearTimeout(this['refreshTimer']);if(!this[_0x68de24(-0x3d,-0xb1)]||!this['particleSystem'])return;function _0x170ac4(_0x528397,_0x52e877){return _0x3c7570(_0x528397,_0x52e877- -0x418);}function _0x68de24(_0x53d849,_0x4b2400){return _0x43215e(_0x53d849,_0x4b2400-0xd5);}this['primitives'][_0x170ac4(0x58,0x9)]=![],this[_0x68de24(-0xec,-0x78)]=setTimeout(()=>{function _0x58e09a(_0x5b2075,_0x60c2b8){return _0x68de24(_0x60c2b8,_0x5b2075-0x4b8);}if(!this[_0x58e09a(0x407,0x44b)])return;this['redraw']();},0xc8);}[_0x43215e(-0x97,-0xfb)](_0x510835){this['mouse_down']=!![];}['_onMouseMoveEvent'](_0x293a45){if(!this['show']||!this['particleSystem'])return;this['mouse_down']&&(this['primitives']['show']=![],this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x192680){if(!this['show']||!this['particleSystem'])return;this['mouse_down']&&this['mouse_move']&&this[_0x47c536(-0x19d,-0x1ac)]();this[_0x4fc469(0x5c6,0x576)]['show']=!![];function _0x4fc469(_0x433511,_0x163c28){return _0x43215e(_0x163c28,_0x433511-0x68c);}this[_0x47c536(-0x166,-0x17b)]=![];function _0x47c536(_0x5045a1,_0x1da2b4){return _0x43215e(_0x1da2b4,_0x5045a1-0x27);}this[_0x47c536(-0xb9,-0x36)]=![];}[_0x3c7570(0x3fa,0x3e3)](){function _0x3cca41(_0x392877,_0x31e221){return _0x3c7570(_0x392877,_0x31e221-0x47);}if(!this[_0x3b0161(0x2ad,0x2a0)]||!this[_0x3b0161(0x288,0x23b)])return;this['updateViewerParameters']();function _0x3b0161(_0x3163ae,_0x3b41e7){return _0x43215e(_0x3b41e7,_0x3163ae-0x40e);}this['particleSystem']['applyViewerParameters'](this[_0x3cca41(0x488,0x49e)]),this[_0x3b0161(0x348,0x361)]['show']=!![];}[_0x3c7570(0x4b9,0x4aa)](_0x481cb3){function _0x48b507(_0x48b0f5,_0x1e3e61){return _0x43215e(_0x1e3e61,_0x48b0f5-0x268);}this[_0x1f06e8(0x52a,0x4be)]=_0x481cb3;this['particleSystem']&&this[_0x1f06e8(0x417,0x483)]['destroy']();function _0x1f06e8(_0x359f79,_0x476e36){return _0x43215e(_0x359f79,_0x476e36-0x626);}this[_0x48b507(0xc5,0x130)]=new ParticleSystem(this[_0x1f06e8(0x45b,0x4df)]['context'],_0x481cb3,this[_0x48b507(0x18d,0x194)](),this[_0x48b507(0x118,0x153)]),this[_0x1f06e8(0x4ac,0x4b1)]();}['_setOptionsHook'](_0x49d567,_0x396e1f){function _0x3e32f0(_0x561796,_0x4330ec){return _0x3c7570(_0x4330ec,_0x561796- -0x5b);}if(_0x49d567)for(const _0x47c848 in _0x49d567){this[_0x47c848]=_0x49d567[_0x47c848];}function _0x57dea7(_0x2434bd,_0x3543b6){return _0x43215e(_0x2434bd,_0x3543b6-0x26f);}this[_0x3e32f0(0x3a9,0x3ab)]&&this[_0x57dea7(0x130,0xcc)]['setOptions'](this[_0x57dea7(0x117,0x194)]());}[_0x43215e(-0xfb,-0xdb)](){const _0x36e673=Math['ceil'](Math['sqrt'](this['particlesNumber']));this['particlesNumber']=_0x36e673*_0x36e673;const _0x4aeb9f={};_0x4aeb9f['particlesTextureSize']=_0x36e673,_0x4aeb9f['maxParticles']=this['particlesNumber'],_0x4aeb9f['particleHeight']=this['fixedHeight'],_0x4aeb9f['fadeOpacity']=this['fadeOpacity'];function _0x1fe25d(_0x281a37,_0x355862){return _0x43215e(_0x355862,_0x281a37-0x26a);}function _0x1cc90a(_0x27bfec,_0xe4cf66){return _0x3c7570(_0xe4cf66,_0x27bfec- -0x401);}return _0x4aeb9f[_0x1cc90a(0x95,0xb5)]=this[_0x1fe25d(0x159,0x176)],_0x4aeb9f['dropRateBump']=this[_0x1cc90a(0x9,0x22)],_0x4aeb9f[_0x1cc90a(0xf2,0x10c)]=this['speedFactor'],_0x4aeb9f['lineWidth']=this[_0x1fe25d(0x100,0x10d)],_0x4aeb9f[_0x1fe25d(0xc3,0xaf)]=this['colors'],_0x4aeb9f;}['addPrimitives'](){this['primitives']['add'](this[_0x4530cb(0x319,0x2cc)]['particlesComputing'][_0x5f0d13(-0x80,-0xd9)]['getWind']),this['primitives']['add'](this[_0x4530cb(0x319,0x31c)]['particlesComputing'][_0x4530cb(0x3f6,0x3eb)]['updateSpeed']),this[_0x4530cb(0x3f6,0x44d)]['add'](this['particleSystem'][_0x4530cb(0x387,0x411)]['primitives']['updatePosition']);function _0x4530cb(_0x286ecd,_0x54ca32){return _0x3c7570(_0x54ca32,_0x286ecd- -0xeb);}this[_0x5f0d13(-0x80,-0xcc)][_0x5f0d13(-0x89,-0x79)](this[_0x4530cb(0x319,0x34e)][_0x4530cb(0x387,0x391)][_0x5f0d13(-0x80,-0x5a)]['postProcessingPosition']),this[_0x4530cb(0x3f6,0x385)]['add'](this['particleSystem'][_0x5f0d13(-0xef,-0xe4)]['primitives']['postProcessingSpeed']),this['primitives']['add'](this[_0x5f0d13(-0x15d,-0xeb)][_0x5f0d13(-0xad,-0xe4)]['primitives']['segments']);function _0x5f0d13(_0x1fbd0a,_0xe19531){return _0x3c7570(_0xe19531,_0x1fbd0a- -0x561);}this['primitives'][_0x4530cb(0x3ed,0x43c)](this['particleSystem']['particlesRendering']['primitives']['trails']),this['primitives']['add'](this['particleSystem'][_0x4530cb(0x3c9,0x371)][_0x4530cb(0x3f6,0x39a)][_0x4530cb(0x39e,0x3fa)]);}[_0x3c7570(0x488,0x42d)](){function _0x49ad9b(_0x24b361,_0x41783a){return _0x43215e(_0x41783a,_0x24b361- -0x3b);}function _0x4171c9(_0xdb0642,_0x1ed3c4){return _0x43215e(_0x1ed3c4,_0xdb0642-0x92);}let _0x1b2a37=this['camera'][_0x4171c9(-0x71,-0xb0)](this['scene'][_0x4171c9(-0xdc,-0x11d)][_0x4171c9(-0xfe,-0x17c)]);if(!_0x1b2a37){const _0x44aaf2=this['_map']['getExtent']();_0x1b2a37=Cesium$1[_0x4171c9(-0x83,-0x7d)]['fromDegrees'](_0x44aaf2['xmin'],_0x44aaf2['ymin'],_0x44aaf2['xmax'],_0x44aaf2[_0x4171c9(-0x48,-0xb3)]);}const _0x3af075=Util[_0x49ad9b(-0x119,-0x158)](_0x1b2a37);this['viewerParameters']['lonRange']['x']=_0x3af075['lon'][_0x49ad9b(-0x1d9,-0x1a8)],this[_0x4171c9(-0xbe,-0x35)]['lonRange']['y']=_0x3af075[_0x49ad9b(-0x18f,-0x1e0)][_0x49ad9b(-0x13d,-0x10c)],this['viewerParameters'][_0x4171c9(-0x59,-0x2e)]['x']=_0x3af075['lat']['min'],this['viewerParameters']['latRange']['y']=_0x3af075[_0x49ad9b(-0x1c3,-0x1e6)]['max'];const _0x193a00=this['camera']['getPixelSize'](this['globeBoundingSphere'],this['scene']['drawingBufferWidth'],this[_0x49ad9b(-0x182,-0x1fb)]['drawingBufferHeight']);_0x193a00>0x0&&(this[_0x4171c9(-0xbe,-0xfa)][_0x49ad9b(-0x1bd,-0x19b)]=_0x193a00);}}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace['layer']['WindLayer']=WindLayer;class CanvasParticle{constructor(){function _0x148fb9(_0x3ea1fa,_0x33030e){return _0x43215e(_0x3ea1fa,_0x33030e-0x5bd);}this[_0x5d53c1(0x398,0x3f0)]=null,this['lat']=null;function _0x5d53c1(_0xc74a6a,_0x2597b6){return _0x3c7570(_0x2597b6,_0xc74a6a- -0x51);}this[_0x148fb9(0x476,0x4f3)]=null,this[_0x5d53c1(0x403,0x41e)]=null,this['age']=null,this['speed']=null;}[_0x3c7570(0x4a9,0x44e)](){for(const _0x469952 in this){delete this[_0x469952];}}}class CanvasWindField{constructor(_0x196c97){this['setOptions'](_0x196c97);}get[_0x43215e(-0x242,-0x1bf)](){function _0x4efe04(_0xaf0c6b,_0x3e446f){return _0x43215e(_0xaf0c6b,_0x3e446f-0x438);}return this[_0x4efe04(0x2dc,0x2cf)];}set['speedRate'](_0x51d1a6){function _0x30db31(_0x2e7ed2,_0x844bea){return _0x3c7570(_0x844bea,_0x2e7ed2- -0x263);}this['_speedRate']=(0x64-(_0x51d1a6>0x63?0x63:_0x51d1a6))*0x64,this['_calc_speedRate']=[(this['xmax']-this[_0x30db31(0x23e,0x256)])/this['_speedRate'],(this['ymax']-this['ymin'])/this['_speedRate']];}get[_0x43215e(-0x15b,-0x185)](){return this['_maxAge'];}set[_0x43215e(-0x12d,-0x185)](_0x5a512d){this['_maxAge']=_0x5a512d;}['setOptions'](_0xf8c4de){function _0x48e4cc(_0x14ef73,_0x423145){return _0x3c7570(_0x14ef73,_0x423145-0xb4);}this[_0x48e4cc(0x580,0x56b)]=_0xf8c4de;function _0x22cf16(_0x5dd02e,_0x549b49){return _0x43215e(_0x549b49,_0x5dd02e-0x3ee);}this['maxAge']=_0xf8c4de['maxAge']||0x78,this['speedRate']=_0xf8c4de['speedRate']||0x32,this[_0x22cf16(0x22d,0x1c9)]=[];const _0x264536=_0xf8c4de['particlesNumber']||0x1000;for(let _0x6e265=0x0;_0x6e265<_0x264536;_0x6e265++){const _0x186989=this[_0x22cf16(0x236,0x1ba)](new CanvasParticle());this['particles']['push'](_0x186989);}}[_0x3c7570(0x47f,0x455)](_0x36eaf2){this[_0x3d8a04(0x20e,0x237)]=_0x36eaf2['rows'],this['cols']=_0x36eaf2[_0x3d8a04(0x1c1,0x243)],this['xmin']=_0x36eaf2['xmin'],this[_0x309b0d(-0x12b,-0x13c)]=_0x36eaf2['xmax'],this[_0x3d8a04(0x124,0x1ad)]=_0x36eaf2[_0x3d8a04(0x131,0x1ad)],this['ymax']=_0x36eaf2['ymax'];function _0x309b0d(_0x45a393,_0x4895d4){return _0x3c7570(_0x4895d4,_0x45a393- -0x618);}this[_0x3d8a04(0x19b,0x21f)]=[];const _0x3ab5ec=_0x36eaf2[_0x3d8a04(0x196,0x1d9)],_0x55c39a=_0x36eaf2[_0x309b0d(-0x1dc,-0x263)];let _0x52cff3=![];_0x3ab5ec[_0x3d8a04(0x277,0x238)]===this[_0x309b0d(-0x1a1,-0x20f)]&&_0x3ab5ec[0x0]['length']===this[_0x3d8a04(0x2af,0x243)]&&(_0x52cff3=!![]);let _0x5099c6=0x0,_0x5d1391=null;function _0x3d8a04(_0x3950d2,_0x43f8c2){return _0x43215e(_0x3950d2,_0x43f8c2-0x367);}let _0x5029bf=null;for(let _0x2fdba9=0x0;_0x2fdba9<this['rows'];_0x2fdba9++){_0x5d1391=[];for(let _0x3d212d=0x0;_0x3d212d<this[_0x3d8a04(0x211,0x243)];_0x3d212d++,_0x5099c6++){_0x52cff3?_0x5029bf=this['_calcUV'](_0x3ab5ec[_0x2fdba9][_0x3d212d],_0x55c39a[_0x2fdba9][_0x3d212d]):_0x5029bf=this[_0x3d8a04(0x209,0x1ab)](_0x3ab5ec[_0x5099c6],_0x55c39a[_0x5099c6]),_0x5d1391[_0x309b0d(-0x1b7,-0x137)](_0x5029bf);}this['grid']['push'](_0x5d1391);}this[_0x3d8a04(0x1ed,0x277)]['reverseY']&&this['grid'][_0x309b0d(-0x181,-0x103)]();}['clear'](){function _0x2521d4(_0x510f88,_0x225b19){return _0x43215e(_0x510f88,_0x225b19-0x3ba);}delete this['rows'],delete this[_0x2521d4(0x276,0x296)],delete this['xmin'],delete this[_0x2521d4(0x288,0x300)],delete this['ymin'],delete this['ymax'],delete this['grid'];function _0x2c7e69(_0x335470,_0x1e13a5){return _0x43215e(_0x335470,_0x1e13a5-0x482);}delete this[_0x2c7e69(0x25d,0x2c1)];}['toGridXY'](_0x143e3f,_0x1c3c34){const _0x169546=(_0x143e3f-this[_0x1cff75(0x38e,0x385)])/(this['xmax']-this['xmin'])*(this['cols']-0x1);function _0x1cff75(_0x4046aa,_0x1073c8){return _0x3c7570(_0x1073c8,_0x4046aa- -0x113);}const _0x2fd5c2=(this[_0x1cff75(0x3ba,0x349)]-_0x1c3c34)/(this['ymax']-this['ymin'])*(this['rows']-0x1);function _0x2e88fa(_0x2b3000,_0x5e947c){return _0x43215e(_0x2b3000,_0x5e947c-0x60a);}return[_0x169546,_0x2fd5c2];}['getUVByXY'](_0x40f33f,_0x57a4a7){if(_0x40f33f<0x0||_0x40f33f>=this['cols']||_0x57a4a7>=this['rows'])return[0x0,0x0,0x0];const _0x5ee347=Math[_0x162a92(-0x28c,-0x2b4)](_0x40f33f),_0x189038=Math[_0x162a92(-0x28c,-0x27d)](_0x57a4a7);if(_0x5ee347===_0x40f33f&&_0x189038===_0x57a4a7)return this['grid'][_0x57a4a7][_0x40f33f];const _0x11a25b=_0x5ee347+0x1,_0x244cb8=_0x189038+0x1,_0x10d82a=this['getUVByXY'](_0x5ee347,_0x189038),_0x7dcda1=this['getUVByXY'](_0x11a25b,_0x189038);function _0x23dfc1(_0x38174b,_0x1d5129){return _0x43215e(_0x1d5129,_0x38174b-0x12e);}const _0x5d192b=this['getUVByXY'](_0x5ee347,_0x244cb8),_0x415bf8=this['getUVByXY'](_0x11a25b,_0x244cb8);let _0xb49256=null;try{_0xb49256=this['_bilinearInterpolation'](_0x40f33f-_0x5ee347,_0x57a4a7-_0x189038,_0x10d82a,_0x7dcda1,_0x5d192b,_0x415bf8);}catch(_0x2a53e8){console[_0x23dfc1(0x4d,0xb1)](_0x40f33f,_0x57a4a7);}function _0x162a92(_0x217bf,_0x45974e){return _0x3c7570(_0x45974e,_0x217bf- -0x680);}return _0xb49256;}['_bilinearInterpolation'](_0x3621df,_0x36272b,_0x131483,_0x5db7db,_0x44e60e,_0x32f103){const _0x2369b1=0x1-_0x3621df,_0x127062=0x1-_0x36272b,_0x5c60aa=_0x2369b1*_0x127062,_0x54c925=_0x3621df*_0x127062,_0x4768cd=_0x2369b1*_0x36272b,_0x20eb9a=_0x3621df*_0x36272b,_0x13336d=_0x131483[0x0]*_0x5c60aa+_0x5db7db[0x0]*_0x54c925+_0x44e60e[0x0]*_0x4768cd+_0x32f103[0x0]*_0x20eb9a,_0x27de13=_0x131483[0x1]*_0x5c60aa+_0x5db7db[0x1]*_0x54c925+_0x44e60e[0x1]*_0x4768cd+_0x32f103[0x1]*_0x20eb9a;return this['_calcUV'](_0x13336d,_0x27de13);}['_calcUV'](_0x43bdca,_0xde1cee){return[+_0x43bdca,+_0xde1cee,Math['sqrt'](_0x43bdca*_0x43bdca+_0xde1cee*_0xde1cee)];}[_0x43215e(-0x17d,-0x121)](_0x3b7216,_0x38b0d3){if(!this['isInExtent'](_0x3b7216,_0x38b0d3))return null;const _0x3bd61a=this[_0x1e1bab(0x448,0x441)](_0x3b7216,_0x38b0d3),_0x41abc6=this['getUVByXY'](_0x3bd61a[0x0],_0x3bd61a[0x1]);function _0x1e1bab(_0x4bf12d,_0xde7029){return _0x43215e(_0xde7029,_0x4bf12d-0x501);}return _0x41abc6;}[_0x43215e(-0x166,-0x184)](_0x4f8ae9,_0x3a2a25){function _0x4650dd(_0x4f1f9,_0x281461){return _0x43215e(_0x281461,_0x4f1f9-0x2db);}function _0x528457(_0x447b2d,_0x31dbbf){return _0x3c7570(_0x31dbbf,_0x447b2d-0x44);}return _0x4f8ae9>=this[_0x528457(0x4e5,0x4d9)]&&_0x4f8ae9<=this['xmax']&&_0x3a2a25>=this[_0x528457(0x431,0x448)]&&_0x3a2a25<=this[_0x528457(0x511,0x571)]?!![]:![];}[_0x3c7570(0x44e,0x410)](){const _0x4493a5=fRandomByfloat(this['xmin'],this[_0x50fc75(0x5cb,0x55e)]);function _0x50fc75(_0xe1c38b,_0x46c8d2){return _0x43215e(_0x46c8d2,_0xe1c38b-0x685);}const _0x153b22=fRandomByfloat(this['ymin'],this['ymax']);function _0x113a28(_0x3c163b,_0x366c6e){return _0x3c7570(_0x366c6e,_0x3c163b- -0x20e);}const _0x58c58e={};return _0x58c58e['lat']=_0x153b22,_0x58c58e[_0x50fc75(0x4c7,0x45f)]=_0x4493a5,_0x58c58e;}['getParticles'](){function _0x19fde9(_0x3f10d6,_0x4e8889){return _0x3c7570(_0x3f10d6,_0x4e8889- -0x118);}let _0x2d8806,_0x1468ee,_0x26f7e2;for(let _0x3a83e5=0x0,_0x4aac12=this['particles'][_0x19fde9(0x3e0,0x360)];_0x3a83e5<_0x4aac12;_0x3a83e5++){let _0x22857d=this['particles'][_0x3a83e5];_0x22857d[_0x19fde9(0x2fc,0x34d)]<=0x0&&(_0x22857d=this[_0x20ceae(-0x227,-0x1e3)](_0x22857d));if(_0x22857d['age']>0x0){const _0x1a01d6=_0x22857d['tlng'],_0x39cbd8=_0x22857d[_0x19fde9(0x2d5,0x33c)];_0x26f7e2=this[_0x19fde9(0x3a3,0x36e)](_0x1a01d6,_0x39cbd8),_0x26f7e2?(_0x2d8806=_0x1a01d6+this['_calc_speedRate'][0x0]*_0x26f7e2[0x0],_0x1468ee=_0x39cbd8+this['_calc_speedRate'][0x1]*_0x26f7e2[0x1],_0x22857d['lng']=_0x1a01d6,_0x22857d['lat']=_0x39cbd8,_0x22857d['tlng']=_0x2d8806,_0x22857d[_0x20ceae(-0x181,-0x17e)]=_0x1468ee,_0x22857d['speed']=_0x26f7e2[0x2],_0x22857d[_0x20ceae(-0x1ad,-0x16d)]--):_0x22857d[_0x19fde9(0x2e3,0x34d)]=0x0;}}function _0x20ceae(_0x4b5999,_0x2d4e5e){return _0x43215e(_0x4b5999,_0x2d4e5e- -0x2b);}return this['particles'];}[_0x43215e(-0x1d2,-0x1b8)](_0x79c93a){function _0x1feebe(_0x3a05c4,_0x11702b){return _0x43215e(_0x3a05c4,_0x11702b-0x167);}let _0x865e62,_0x587c02;for(let _0x37f2f2=0x0;_0x37f2f2<0x1e;_0x37f2f2++){_0x865e62=this[_0x1feebe(-0x11,-0x30)](),_0x587c02=this['getUVByPoint'](_0x865e62[_0x1feebe(-0xb6,-0x57)],_0x865e62[_0x16b248(0x3d5,0x45b)]);if(_0x587c02&&_0x587c02[0x2]>0x0)break;}if(!_0x587c02)return _0x79c93a;const _0xb6b4b2=_0x865e62[_0x1feebe(0x7,-0x57)]+this['_calc_speedRate'][0x0]*_0x587c02[0x0];function _0x16b248(_0x332112,_0x212b3b){return _0x3c7570(_0x212b3b,_0x332112- -0x4a);}const _0x48f014=_0x865e62['lat']+this[_0x1feebe(-0x4e,0xa)][0x1]*_0x587c02[0x1];return _0x79c93a[_0x1feebe(-0x9b,-0x57)]=_0x865e62['lng'],_0x79c93a['lat']=_0x865e62[_0x1feebe(0x39,-0x21)],_0x79c93a[_0x16b248(0x493,0x4a4)]=_0xb6b4b2,_0x79c93a[_0x16b248(0x40a,0x3cc)]=_0x48f014,_0x79c93a[_0x1feebe(0xab,0x25)]=Math['round'](Math['random']()*this[_0x16b248(0x3d8,0x391)]),_0x79c93a[_0x16b248(0x4a7,0x4ea)]=_0x587c02[0x2],_0x79c93a;}['destroy'](){for(const _0x123172 in this){delete this[_0x123172];}}}function fRandomByfloat(_0x43d297,_0x435390){function _0x2e3dba(_0xe90164,_0xd116ea){return _0x3c7570(_0xe90164,_0xd116ea- -0xc1);}return _0x43d297+Math[_0x2e3dba(0x2cf,0x324)]()*(_0x435390-_0x43d297);}const Cesium=mars3d__namespace[_0x3c7570(0x4e6,0x473)],BaseLayer=mars3d__namespace['layer'][_0x3c7570(0x511,0x4e4)];class CanvasWindLayer extends BaseLayer{constructor(_0x39618e={}){super(_0x39618e);function _0x1efcd8(_0x3e617b,_0x3b6af8){return _0x43215e(_0x3b6af8,_0x3e617b-0x660);}this[_0x1efcd8(0x58c,0x550)](_0x39618e);function _0x46a1c4(_0x283df7,_0x5c200f){return _0x3c7570(_0x5c200f,_0x283df7-0x3e);}this['canvas']=null,_0x39618e[_0x46a1c4(0x43e,0x3f7)]&&_0x39618e['steps']&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x39618e));}['_setOptionsHook'](_0x36faf6,_0x459b10){this[_0x149c8e(0x48e,0x4f1)]=0x3e8/(_0x36faf6['frameRate']||0xa);function _0x109bc1(_0x4b97ac,_0x4dce68){return _0x3c7570(_0x4dce68,_0x4b97ac-0xd);}function _0x149c8e(_0x1dae05,_0x4e2145){return _0x43215e(_0x1dae05,_0x4e2145-0x5c4);}this['_pointerEvents']=this[_0x149c8e(0x4c0,0x4d4)][_0x149c8e(0x446,0x4a1)]??![],this['color']=_0x36faf6[_0x149c8e(0x459,0x4d3)]||'#ffffff',this[_0x109bc1(0x44a,0x4a5)]=_0x36faf6[_0x149c8e(0x440,0x45a)]||0x1,this['fixedHeight']=_0x36faf6[_0x109bc1(0x443,0x3e1)]??0x0,this['reverseY']=_0x36faf6['reverseY']??![],this['windField']&&this[_0x109bc1(0x45e,0x45f)]['setOptions'](_0x36faf6);}get['layer'](){return this['canvas'];}get['canvasWidth'](){function _0x4cb555(_0x45bfc8,_0x2ecb32){return _0x3c7570(_0x2ecb32,_0x45bfc8- -0xea);}return this['_map']['scene'][_0x4cb555(0x3f0,0x3a7)]['clientWidth'];}get['canvasHeight'](){function _0x28126e(_0x26b1d0,_0x5e673a){return _0x3c7570(_0x26b1d0,_0x5e673a- -0x125);}return this['_map']['scene'][_0x28126e(0x3bb,0x3b5)]['clientHeight'];}get[_0x43215e(-0x9d,-0x123)](){return this['_pointerEvents'];}set['pointerEvents'](_0x5bcbd2){this['_pointerEvents']=_0x5bcbd2;function _0x5e8e02(_0x2a38db,_0x332086){return _0x3c7570(_0x332086,_0x2a38db-0xd6);}if(!this['canvas'])return;_0x5bcbd2?this[_0x5e8e02(0x5b0,0x629)]['style']['pointer-events']='all':this['canvas']['style']['pointer-events']='none';}get[_0x3c7570(0x370,0x3ea)](){function _0x35ff8c(_0x4e3283,_0x265e82){return _0x43215e(_0x4e3283,_0x265e82- -0x61);}function _0x4e87f3(_0x423e7f,_0x33dc7c){return _0x3c7570(_0x423e7f,_0x33dc7c- -0x4ef);}return this[_0x4e87f3(0x2c,-0x38)][_0x35ff8c(-0x275,-0x21e)];}set['particlesNumber'](_0x5bb956){this[_0x2edb49(0x3c7,0x37f)]['particlesNumber']=_0x5bb956;function _0x2edb49(_0x592174,_0x4b8747){return _0x43215e(_0x592174,_0x4b8747-0x46f);}clearTimeout(this[_0x5744a6(0x67,0x64)]);function _0x5744a6(_0x436738,_0x3a1c02){return _0x3c7570(_0x3a1c02,_0x436738- -0x3c7);}this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get[_0x3c7570(0x391,0x3e8)](){function _0x4567c7(_0x415f2d,_0x15bfcc){return _0x3c7570(_0x415f2d,_0x15bfcc-0xce);}return this[_0x4567c7(0x5cb,0x585)]['speedRate'];}set['speedRate'](_0x31a94c){this['options']['speedRate']=_0x31a94c;function _0x589b6c(_0x354fcf,_0x4ec0a8){return _0x43215e(_0x4ec0a8,_0x354fcf-0x2c8);}function _0x148271(_0x1ad99c,_0xf4414d){return _0x3c7570(_0x1ad99c,_0xf4414d- -0xb6);}this[_0x148271(0x359,0x39b)]&&(this[_0x589b6c(0x172,0x16a)][_0x148271(0x3b1,0x332)]=_0x31a94c);}get['maxAge'](){return this['options']['maxAge'];}set['maxAge'](_0x4d5e4a){function _0x4e04f0(_0x7b6afa,_0x382f01){return _0x43215e(_0x382f01,_0x7b6afa-0x43b);}function _0x10e54a(_0x3407d3,_0x4c6804){return _0x43215e(_0x4c6804,_0x3407d3-0x5af);}this[_0x4e04f0(0x34b,0x3b0)][_0x10e54a(0x42a,0x3d1)]=_0x4d5e4a,this['windField']&&(this['windField']['maxAge']=_0x4d5e4a);}get[_0x43215e(-0x141,-0x1a9)](){return this['windData'];}set[_0x43215e(-0x189,-0x1a9)](_0x3cd302){this['setData'](_0x3cd302);}['_showHook'](_0x270d36){function _0x4f6fae(_0x54039c,_0x580d56){return _0x43215e(_0x580d56,_0x54039c-0x67);}function _0x3a478d(_0x471ffc,_0x1d911a){return _0x43215e(_0x471ffc,_0x1d911a-0x18c);}_0x270d36?this[_0x4f6fae(-0xbb,-0x6f)]():(this['windData']&&(this['options']['data']=this[_0x3a478d(0xa5,0xb6)]),this['_removedHook']());}['_mountedHook'](){function _0x3ae6e2(_0x360a26,_0x42d460){return _0x3c7570(_0x360a26,_0x42d460-0xf0);}function _0x3828fb(_0xcd5d5,_0x4fc10b){return _0x43215e(_0xcd5d5,_0x4fc10b-0x1ba);}this['options']['worker']?this[_0x3ae6e2(0x5b8,0x589)]():this[_0x3828fb(0xa0,0x64)]=new CanvasWindField(this[_0x3ae6e2(0x619,0x5a7)]);}['_addedHook'](){function _0x372a93(_0x43c341,_0x3fd2fe){return _0x43215e(_0x43c341,_0x3fd2fe-0x588);}this[_0x372a93(0x4ce,0x4bb)]=this[_0x372a93(0x424,0x3c0)]();const _0xdc0ae4={};function _0x383721(_0x4d4c11,_0x137041){return _0x3c7570(_0x4d4c11,_0x137041- -0x5ce);}_0xdc0ae4[_0x372a93(0x406,0x48e)]=!![],this['canvasContext']=this['canvas']['getContext']('2d',_0xdc0ae4),this[_0x372a93(0x3fe,0x416)](),this['options']['data']&&this['setData'](this[_0x372a93(0x48a,0x498)][_0x372a93(0x3e7,0x3df)]);}['_removedHook'](){this[_0x51e520(0x23f,0x256)]();function _0x51e520(_0x54234b,_0x11d0f5){return _0x3c7570(_0x11d0f5,_0x54234b- -0x1d2);}this[_0xf8e895(0x43b,0x3f1)]();function _0xf8e895(_0x4973f7,_0x20f9a8){return _0x3c7570(_0x4973f7,_0x20f9a8- -0xef);}this['canvas']&&(this[_0x51e520(0x274,0x2bc)]['container']['removeChild'](this[_0xf8e895(0x3ec,0x3eb)]),delete this[_0x51e520(0x308,0x2fc)]);}['_createCanvas'](){const _0xbcbe4d=mars3d__namespace['DomUtil']['create']('canvas','mars3d-canvasWind',this[_0x7698d0(0x38c,0x357)]['container']);_0xbcbe4d[_0x17eb9d(0x1ef,0x20c)]['position']=_0x17eb9d(0x1b4,0x13b),_0xbcbe4d[_0x17eb9d(0x1ef,0x22a)][_0x7698d0(0x39c,0x3bf)]=_0x7698d0(0x406,0x46e);function _0x17eb9d(_0x4b7148,_0x104402){return _0x43215e(_0x104402,_0x4b7148-0x2dc);}_0xbcbe4d['style'][_0x7698d0(0x40a,0x381)]=_0x17eb9d(0x1f5,0x1c5),_0xbcbe4d[_0x7698d0(0x400,0x3f9)]['width']=this['_map'][_0x17eb9d(0x195,0x11b)][_0x17eb9d(0x20f,0x1e3)]['clientWidth']+'px';function _0x7698d0(_0x1c4c0b,_0x3691cc){return _0x43215e(_0x3691cc,_0x1c4c0b-0x4ed);}return _0xbcbe4d['style'][_0x17eb9d(0x15b,0x1b9)]=this[_0x17eb9d(0x17b,0x128)][_0x17eb9d(0x195,0x201)]['canvas'][_0x17eb9d(0x131,0x115)]+'px',_0xbcbe4d['style']['pointerEvents']=this[_0x7698d0(0x354,0x379)]?_0x17eb9d(0x16d,0x17d):'none',_0xbcbe4d[_0x17eb9d(0x1ef,0x1aa)][_0x7698d0(0x415,0x449)]=this['options'][_0x17eb9d(0x204,0x20b)]??0x9,_0xbcbe4d['width']=this[_0x17eb9d(0x17b,0x206)][_0x7698d0(0x3a6,0x362)]['canvas']['clientWidth'],_0xbcbe4d['height']=this[_0x17eb9d(0x17b,0x136)]['scene']['canvas'][_0x7698d0(0x342,0x2d8)],_0xbcbe4d;}['resize'](){function _0x370e95(_0x34919d,_0x5e0520){return _0x43215e(_0x34919d,_0x5e0520- -0x10);}function _0x2b9282(_0xac77b7,_0x32e46a){return _0x3c7570(_0xac77b7,_0x32e46a-0x32);}this[_0x370e95(-0x12b,-0xdd)]&&(this['canvas'][_0x370e95(-0xdd,-0xfd)][_0x2b9282(0x427,0x427)]=this[_0x370e95(-0x1bd,-0x171)][_0x2b9282(0x4d2,0x492)]['canvas'][_0x370e95(-0x163,-0x126)]+'px',this['canvas']['style']['height']=this['_map'][_0x2b9282(0x476,0x492)]['canvas'][_0x2b9282(0x3b4,0x42e)]+'px',this[_0x2b9282(0x530,0x50c)]['width']=this[_0x2b9282(0x49a,0x478)]['scene']['canvas'][_0x2b9282(0x47e,0x4c3)],this[_0x370e95(-0x13c,-0xdd)]['height']=this['_map']['scene']['canvas']['clientHeight']);}['bindEvent'](){const _0x25b93e=this;function _0x5b40a4(_0x4c243e,_0x4d706c){return _0x43215e(_0x4d706c,_0x4c243e-0xa1);}let _0x300d34=Date[_0x1bc3a3(0x2cf,0x33f)]();function _0x1bc3a3(_0x5d3d55,_0x245f61){return _0x43215e(_0x5d3d55,_0x245f61-0x4ce);}(function _0x3bcdcd(){if(_0x25b93e['isDestroy'])return;function _0x539d64(_0x235e24,_0x20253b){return _0x1bc3a3(_0x20253b,_0x235e24- -0x46e);}function _0x43c078(_0x40df90,_0x2d7cf1){return _0x1bc3a3(_0x2d7cf1,_0x40df90- -0x163);}_0x25b93e['_animateFrame']=window['requestAnimationFrame'](_0x3bcdcd);if(_0x25b93e[_0x43c078(0x1e5,0x1c9)]&&_0x25b93e[_0x539d64(-0xf6,-0x150)]){const _0x502632=Date[_0x43c078(0x1dc,0x193)](),_0x492556=_0x502632-_0x300d34;_0x492556>_0x25b93e[_0x539d64(-0x73,-0xce)]&&(_0x300d34=_0x502632-_0x492556%_0x25b93e['frameTime'],_0x25b93e['update']());}}(),window['addEventListener']('resize',this['resize']['bind'](this),![]),this[_0x5b40a4(-0xec,-0x12c)]=![],this[_0x5b40a4(-0x3f,0x3b)]=![],this[_0x5b40a4(-0x4f,-0x90)]['mouseHidden']&&(this['_map']['on'](mars3d__namespace[_0x5b40a4(-0x73,-0x42)][_0x5b40a4(-0x4b,-0x15)],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x5b40a4(-0xb9,-0x138)],this['_onMouseDownEvent'],this),this[_0x1bc3a3(0x3d4,0x36d)]['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this)));}['unbindEvent'](){window['cancelAnimationFrame'](this['_animateFrame']),delete this['_animateFrame'],window['removeEventListener']('resize',this['resize']);function _0x3b7b4b(_0x67f00c,_0x4f112a){return _0x3c7570(_0x67f00c,_0x4f112a- -0xf);}function _0x344551(_0x51c83a,_0xb65d5f){return _0x43215e(_0x51c83a,_0xb65d5f-0x30a);}this['options']['mouseHidden']&&(this['_map'][_0x344551(0x152,0x1ac)](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace[_0x3b7b4b(0x407,0x484)]['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['off'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this),this[_0x344551(0x20b,0x1a9)][_0x344551(0x211,0x1ac)](mars3d__namespace['EventType']['mouseMove'],this[_0x3b7b4b(0x42b,0x46b)],this));}[_0x3c7570(0x484,0x45d)](_0x12464b){function _0x1922e7(_0x1608c0,_0x8a2f50){return _0x3c7570(_0x8a2f50,_0x1608c0- -0x481);}function _0x3f38b4(_0x10030d,_0x57cab3){return _0x43215e(_0x10030d,_0x57cab3-0x549);}clearTimeout(this[_0x3f38b4(0x3eb,0x3fc)]);if(!this[_0x1922e7(-0x60,-0x54)]||!this[_0x1922e7(0x59,0x71)])return;this['canvas']['style']['visibility']=_0x1922e7(-0xa0,-0x2d),this['refreshTimer']=setTimeout(()=>{function _0xca10f1(_0x877c3e,_0x2b231b){return _0x3f38b4(_0x2b231b,_0x877c3e- -0x1f2);}if(!this[_0xca10f1(0x1d1,0x1cb)])return;function _0x1da18a(_0xa83c62,_0x563980){return _0x1922e7(_0xa83c62-0x527,_0x563980);}this['redraw'](),this['canvas']['style']['visibility']=_0xca10f1(0x26d,0x240);},0xc8);}['_onMouseDownEvent'](_0x394d91){this['mouse_down']=!![],this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x569727){function _0x39604f(_0xcab324,_0x3efce0){return _0x43215e(_0x3efce0,_0xcab324-0x66b);}function _0x50591d(_0x2f041d,_0x3e32aa){return _0x43215e(_0x2f041d,_0x3e32aa-0x36b);}if(!this['show']||!this['canvas'])return;this[_0x50591d(0x22b,0x1de)]&&(this['canvas'][_0x50591d(0x250,0x27e)][_0x50591d(0x1d5,0x1e4)]='hidden',this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x141bf6){if(!this[_0x1674ec(0xf4,0x80)]||!this['canvas'])return;function _0x1674ec(_0x8e19ee,_0x5bcca9){return _0x43215e(_0x8e19ee,_0x5bcca9-0x206);}this['_map'][_0x1674ec(0x64,0xa8)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this[_0x1818fc(-0x51,-0xb4)]();this[_0x1818fc(-0x38,0x43)]['style']['visibility']='visible',this['mouse_down']=![];function _0x1818fc(_0x4066f4,_0x4caa1b){return _0x43215e(_0x4066f4,_0x4caa1b-0x110);}this['mouse_move']=![];}['setData'](_0x5197fc){function _0x13d4b2(_0x4e782d,_0x1b244b){return _0x43215e(_0x4e782d,_0x1b244b-0x35d);}this[_0x13d4b2(0x145,0x1c7)](),this['windData']=_0x5197fc,this['windField']['setDate'](_0x5197fc),this['redraw']();}[_0x43215e(-0x204,-0x1c4)](){function _0x28039c(_0x11b28b,_0x69b8e2){return _0x43215e(_0x69b8e2,_0x11b28b-0xf5);}if(!this['show'])return;function _0x370438(_0x2acc38,_0x3234dc){return _0x43215e(_0x3234dc,_0x2acc38-0x23d);}this[_0x28039c(-0x61,-0xd6)][_0x28039c(-0xc2,-0x56)](this[_0x28039c(0x5,-0x3)]),this['update']();}['update'](){function _0x24a8ec(_0x3f7d01,_0x4003d4){return _0x43215e(_0x4003d4,_0x3f7d01-0x297);}if(this['_updateIng'])return;this['_updateIng']=!![];function _0x3d38f8(_0x3d4283,_0x45fc7f){return _0x3c7570(_0x3d4283,_0x45fc7f- -0x1d2);}if(this['worker'])this[_0x3d38f8(0x278,0x27f)]['update']();else{const _0xdebc57=this['windField']['getParticles']();this[_0x24a8ec(0x1c9,0x20a)](_0xdebc57);}this['_updateIng']=![];}['_drawLines'](_0x352e1e){this[_0x339f2b(0x265,0x2c5)]['globalCompositeOperation']='destination-in',this[_0x3f32dc(0x4ca,0x4d9)]['fillRect'](0x0,0x0,this[_0x339f2b(0x33c,0x343)],this['canvasHeight']);function _0x3f32dc(_0x3ff379,_0x5d4545){return _0x3c7570(_0x3ff379,_0x5d4545-0xed);}this['canvasContext']['globalCompositeOperation']='lighter',this['canvasContext']['globalAlpha']=0.9;const _0x338a38=this['_map']['scene']['mode']!==Cesium['SceneMode']['SCENE3D'],_0x27bc56=this[_0x339f2b(0x2be,0x343)]*0.25;function _0x339f2b(_0x4b4fe6,_0x297df2){return _0x3c7570(_0x4b4fe6,_0x297df2- -0x127);}if(this[_0x3f32dc(0x4b8,0x4de)])for(let _0x4a348c=0x0,_0x360fff=_0x352e1e['length'];_0x4a348c<_0x360fff;_0x4a348c++){const _0x2486d2=_0x352e1e[_0x4a348c],_0x22a91d=this['_tomap'](_0x2486d2['lng'],_0x2486d2['lat'],_0x2486d2),_0x5d42d4=this[_0x339f2b(0x3e6,0x3ae)](_0x2486d2[_0x3f32dc(0x58b,0x5ca)],_0x2486d2['tlat'],_0x2486d2);if(!_0x22a91d||!_0x5d42d4)continue;if(_0x338a38&&Math[_0x339f2b(0x2c1,0x2d1)](_0x22a91d[0x0]-_0x5d42d4[0x0])>=_0x27bc56)continue;this[_0x3f32dc(0x52a,0x4d9)][_0x3f32dc(0x595,0x53c)](),this['canvasContext'][_0x339f2b(0x2a5,0x316)]=this['lineWidth'],this[_0x339f2b(0x338,0x2c5)][_0x339f2b(0x314,0x33b)]=this[_0x339f2b(0x299,0x2ca)]['getColor'](_0x2486d2['speed']),this['canvasContext'][_0x3f32dc(0x5c6,0x562)](_0x22a91d[0x0],_0x22a91d[0x1]),this['canvasContext']['lineTo'](_0x5d42d4[0x0],_0x5d42d4[0x1]),this['canvasContext']['stroke']();}else{this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this[_0x339f2b(0x373,0x316)],this['canvasContext']['strokeStyle']=this['color'];for(let _0x5389ec=0x0,_0x4d9eca=_0x352e1e['length'];_0x5389ec<_0x4d9eca;_0x5389ec++){const _0x4ae6ce=_0x352e1e[_0x5389ec],_0x3f2e4b=this[_0x3f32dc(0x5c2,0x5c2)](_0x4ae6ce[_0x339f2b(0x2b5,0x2c2)],_0x4ae6ce[_0x339f2b(0x318,0x2f8)],_0x4ae6ce),_0x1f7848=this[_0x339f2b(0x3b5,0x3ae)](_0x4ae6ce['tlng'],_0x4ae6ce[_0x339f2b(0x2e5,0x32d)],_0x4ae6ce);if(!_0x3f2e4b||!_0x1f7848)continue;if(_0x338a38&&Math['abs'](_0x3f2e4b[0x0]-_0x1f7848[0x0])>=_0x27bc56)continue;this[_0x3f32dc(0x530,0x4d9)]['moveTo'](_0x3f2e4b[0x0],_0x3f2e4b[0x1]),this[_0x3f32dc(0x497,0x4d9)]['lineTo'](_0x1f7848[0x0],_0x1f7848[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x529a55,_0x24ea22,_0x2ac321){const _0x4a43f8=Cesium['Cartesian3'][_0x5311f2(0xf9,0xc9)](_0x529a55,_0x24ea22,this['fixedHeight']),_0x4c3f52=this[_0x5311f2(0x138,0xf9)][_0x5311f2(0x152,0x131)];if(_0x4c3f52[_0x5311f2(0x18c,0x115)]===Cesium['SceneMode'][_0x5311f2(0x19a,0x12c)]){const _0x3da909=new Cesium['EllipsoidalOccluder'](_0x4c3f52['globe'][_0x4b43e7(0x268,0x1dd)],_0x4c3f52['camera'][_0x5311f2(0x1a0,0x168)]),_0x209a61=_0x3da909['isPointVisible'](_0x4a43f8);if(!_0x209a61)return _0x2ac321[_0x5311f2(0x157,0x1d4)]=0x0,null;}function _0x5311f2(_0x2f69ae,_0x46841a){return _0x43215e(_0x46841a,_0x2f69ae-0x299);}function _0x4b43e7(_0x44f500,_0x58ec46){return _0x43215e(_0x58ec46,_0x44f500-0x3f8);}const _0x2e4abb=Cesium['SceneTransforms']['wgs84ToWindowCoordinates'](this[_0x4b43e7(0x297,0x2c2)]['scene'],_0x4a43f8);return _0x2e4abb?[_0x2e4abb['x'],_0x2e4abb['y']]:null;}['clear'](){function _0x1de5e(_0x37d6a4,_0x5b515f){return _0x43215e(_0x5b515f,_0x37d6a4-0x29b);}function _0x426e9c(_0x397205,_0x3eb4d3){return _0x43215e(_0x397205,_0x3eb4d3-0x3dc);}this[_0x1de5e(0x145,0x135)]['clear'](),delete this[_0x426e9c(0x2d3,0x306)];}['initWorker'](){this['worker']=new Worker(this['options']['worker']),this['worker'][_0x851e74(0x322,0x311)]=_0xdd573a=>{function _0x320f7a(_0x4a6950,_0x20fa3e){return _0x851e74(_0x4a6950,_0x20fa3e- -0x4f8);}this[_0x320f7a(-0x144,-0x19a)](_0xdd573a['data'][_0x320f7a(-0x260,-0x28d)]);function _0x23346f(_0x2e9d07,_0x38e4f0){return _0x851e74(_0x38e4f0,_0x2e9d07- -0x105);}this['_updateIng2']=![];},this['windField']={'init':_0x44a82d=>{const _0x3517c0={};_0x3517c0['type']='init',_0x3517c0[_0x912c62(0x2a1,0x24b)]=_0x44a82d;function _0x912c62(_0x33a097,_0x4368c3){return _0x851e74(_0x33a097,_0x4368c3- -0xf1);}this['worker']['postMessage'](_0x3517c0);},'setOptions':_0x5b0a3a=>{const _0x53aa4e={};_0x53aa4e['type']=_0xa46568(0x108,0xef);function _0x47e577(_0x3ced2f,_0x4efbbc){return _0x851e74(_0x3ced2f,_0x4efbbc- -0x3e6);}function _0xa46568(_0x4b3bd3,_0x1c4c5f){return _0x851e74(_0x4b3bd3,_0x1c4c5f- -0x186);}_0x53aa4e[_0xa46568(0x222,0x1b6)]=_0x5b0a3a,this['worker']['postMessage'](_0x53aa4e);},'setDate':_0x1aee30=>{function _0x555bd4(_0x4922c5,_0x5596c1){return _0x851e74(_0x4922c5,_0x5596c1- -0x398);}function _0x36feb2(_0x4f9bcd,_0xddd5ce){return _0x851e74(_0x4f9bcd,_0xddd5ce- -0x1);}const _0x31beee={};_0x31beee[_0x555bd4(-0xb6,-0xa7)]=_0x36feb2(0x304,0x2d9),_0x31beee[_0x555bd4(-0x14e,-0x115)]=_0x1aee30,this['worker']['postMessage'](_0x31beee);},'update':()=>{function _0x5a4c45(_0x210bd1,_0x59d45a){return _0x851e74(_0x59d45a,_0x210bd1- -0x4c9);}function _0x395204(_0x2a076b,_0x26e002){return _0x851e74(_0x26e002,_0x2a076b-0x17);}if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0x3d88f4={};_0x3d88f4['type']=_0x395204(0x31e,0x36b),this[_0x5a4c45(-0x1a7,-0x1b8)]['postMessage'](_0x3d88f4);},'clear':()=>{function _0x57ee3c(_0x734238,_0x6f394f){return _0x851e74(_0x734238,_0x6f394f- -0x245);}const _0x371601={};_0x371601['type']='clear',this['worker'][_0x57ee3c(0x135,0xe2)](_0x371601);}};function _0x851e74(_0x238c97,_0x4eb9c5){return _0x43215e(_0x238c97,_0x4eb9c5-0x42c);}function _0x525b53(_0x1885c6,_0x52778c){return _0x3c7570(_0x1885c6,_0x52778c- -0x527);}this[_0x525b53(-0xf5,-0xd6)]['init'](this[_0x851e74(0x2e3,0x33c)]);}}mars3d__namespace['LayerUtil'][_0x3c7570(0x43f,0x440)]('canvasWind',CanvasWindLayer),mars3d__namespace[_0x43215e(-0x84,-0xfe)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x43215e(-0x1da,-0x15f)]=WindLayer,exports['WindUtil']=WindUtil;const _0x38b5f1={};_0x38b5f1[_0x43215e(-0x84,-0x108)]=!![],Object[_0x43215e(-0x13e,-0x170)](exports,_0x43215e(-0x128,-0xf7),_0x38b5f1);
}));
