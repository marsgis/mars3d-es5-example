/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.10.12
 * 编译日期：2026-01-21 12:23
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-07-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x307d02,_0x31dda2){function _0x279be8(_0x4fa6ec,_0x5299ef){return _0x478d(_0x4fa6ec-0x2c0,_0x5299ef);}function _0x1afdd9(_0x54cabf,_0x20141e){return _0x478d(_0x20141e-0x361,_0x54cabf);}const _0x1a9aea=_0x307d02();while(!![]){try{const _0x6b22f4=parseInt(_0x279be8(0x455,0x4b7))/0x1*(-parseInt(_0x279be8(0x3f1,0x484))/0x2)+-parseInt(_0x279be8(0x4c0,0x44e))/0x3*(-parseInt(_0x1afdd9(0x589,0x507))/0x4)+parseInt(_0x279be8(0x3de,0x40d))/0x5+parseInt(_0x1afdd9(0x565,0x577))/0x6*(-parseInt(_0x279be8(0x443,0x4c5))/0x7)+-parseInt(_0x279be8(0x41f,0x458))/0x8+parseInt(_0x279be8(0x3f2,0x46c))/0x9*(parseInt(_0x1afdd9(0x537,0x580))/0xa)+parseInt(_0x1afdd9(0x4ff,0x4f2))/0xb*(parseInt(_0x1afdd9(0x547,0x4d6))/0xc);if(_0x6b22f4===_0x31dda2)break;else _0x1a9aea['push'](_0x1a9aea['shift']());}catch(_0x112d05){_0x1a9aea['push'](_0x1a9aea['shift']());}}}(_0x1059,0xbfab0));function _interopNamespace(_0xec2e41){function _0xb28da3(_0x5040bf,_0x24e56f){return _0x478d(_0x5040bf- -0x3aa,_0x24e56f);}if(_0xec2e41&&_0xec2e41[_0xb28da3(-0x1f8,-0x273)])return _0xec2e41;function _0x4b0951(_0x8ef2cb,_0x2cf780){return _0x478d(_0x2cf780- -0xd7,_0x8ef2cb);}var _0x2d424c=Object[_0x4b0951(0xf8,0xfa)](null);return _0xec2e41&&Object['keys'](_0xec2e41)['forEach'](function(_0x511a86){function _0x4f3a5d(_0x2bdb2e,_0x3cf33e){return _0x4b0951(_0x3cf33e,_0x2bdb2e-0xf6);}function _0x20658a(_0x3b933f,_0x20fc48){return _0xb28da3(_0x3b933f-0x742,_0x20fc48);}if(_0x511a86!=='default'){var _0x333809=Object[_0x20658a(0x5a5,0x577)](_0xec2e41,_0x511a86);Object['defineProperty'](_0x2d424c,_0x511a86,_0x333809[_0x20658a(0x555,0x4d6)]?_0x333809:{'enumerable':!![],'get':function(){return _0xec2e41[_0x511a86];}});}}),_0x2d424c['default']=_0xec2e41,_0x2d424c;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function _0x478d(_0x5b3abf,_0x183f31){const _0x10596e=_0x1059();return _0x478d=function(_0x478d4e,_0x329dfd){_0x478d4e=_0x478d4e-0x104;let _0x188099=_0x10596e[_0x478d4e];return _0x188099;},_0x478d(_0x5b3abf,_0x183f31);}function getU(_0x14c2b5,_0x545085){const _0x3fda6a=_0x14c2b5*Math['cos'](Cesium$2['Math']['toRadians'](_0x545085));return _0x3fda6a;}function getV(_0x1728c0,_0x40fab9){function _0x3ad1d3(_0x15d103,_0x49c131){return _0x478d(_0x15d103- -0xff,_0x49c131);}const _0x24952f=_0x1728c0*Math[_0x3ad1d3(0xfd,0xd5)](Cesium$2['Math']['toRadians'](_0x40fab9));return _0x24952f;}function _0x277c1c(_0x5d735e,_0x1a6a02){return _0x478d(_0x1a6a02- -0x21c,_0x5d735e);}function _0x27ad09(_0x3ee60e,_0x5ec9d2){return _0x478d(_0x5ec9d2-0x282,_0x3ee60e);}function getSpeed(_0xe65898,_0x17bba1){const _0x350695=Math[_0x5d100c(0x60e,0x620)](Math['pow'](_0xe65898,0x2)+Math['pow'](_0x17bba1,0x2));function _0x5d100c(_0x8b5e91,_0x2b32bd){return _0x478d(_0x8b5e91-0x3e5,_0x2b32bd);}return _0x350695;}function getDirection(_0x2b7094,_0x356edc){let _0x4ef49c=Cesium$2[_0x3af9ef(-0x47,-0x60)][_0x2510cc(-0x1b5,-0x1cf)](Math[_0x2510cc(-0x144,-0x125)](_0x356edc,_0x2b7094));function _0x3af9ef(_0x5c68df,_0x3b7345){return _0x478d(_0x5c68df- -0x271,_0x3b7345);}function _0x2510cc(_0x46ba2c,_0x27d9f6){return _0x478d(_0x27d9f6- -0x322,_0x46ba2c);}return _0x4ef49c+=_0x4ef49c<0x0?0x168:0x0,_0x4ef49c;}const _0x4913ff={};_0x4913ff['__proto__']=null,_0x4913ff[_0x277c1c(0x1f,-0x5e)]=getU,_0x4913ff[_0x277c1c(-0xf8,-0xdd)]=getV,_0x4913ff['getSpeed']=getSpeed,_0x4913ff[_0x27ad09(0x3d7,0x430)]=getDirection;var WindUtil=_0x4913ff;const version=_0x27ad09(0x3cf,0x399),buildTime=_0x277c1c(-0x44,-0x12);var updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a',renderParticlesFragmentShader=_0x277c1c(-0xb7,-0x73),renderParticlesVertexShader=_0x277c1c(-0x78,-0x1);const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x27ad09(0x3db,0x3aa)];class ShaderManager{static['getCalculateSpeedShader'](){const _0xcdb30a={};return _0xcdb30a['sources']=[calculateSpeedShader],new ShaderSource$1(_0xcdb30a);}static['getUpdatePositionShader'](){const _0x16ecbb={};_0x16ecbb[_0x53a9ee(0x371,0x3b7)]=[updatePositionShader];function _0x53a9ee(_0x50be94,_0x273435){return _0x277c1c(_0x50be94,_0x273435-0x3f2);}return new ShaderSource$1(_0x16ecbb);}static['getSegmentDrawVertexShader'](){const _0x4d5b45={};function _0x4e0dff(_0x565ac6,_0x367a5f){return _0x27ad09(_0x367a5f,_0x565ac6- -0x451);}return _0x4d5b45[_0x4e0dff(0x12,-0x54)]=[renderParticlesVertexShader],new ShaderSource$1(_0x4d5b45);}static['getSegmentDrawFragmentShader'](){const _0xc5cde9={};return _0xc5cde9['sources']=[renderParticlesFragmentShader],new ShaderSource$1(_0xc5cde9);}static[_0x277c1c(-0x5b,-0xb7)](){function _0x287329(_0x462caa,_0x5c8aee){return _0x277c1c(_0x5c8aee,_0x462caa- -0x24);}const _0x4ea37e={};return _0x4ea37e[_0x287329(-0x5f,0x2a)]=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x4ea37e);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defined,destroyObject}=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x172966){this['commandType']=_0x172966['commandType'],this[_0x4a7785(-0x3f,-0xb6)]=_0x172966[_0x4a7785(-0xd8,-0xb6)];function _0x4a7785(_0x59694c,_0x42a973){return _0x277c1c(_0x59694c,_0x42a973- -0x10);}this['attributeLocations']=_0x172966['attributeLocations'],this[_0x4a7785(-0x9e,-0x64)]=_0x172966['primitiveType'],this[_0x3e710a(-0x14a,-0x168)]=_0x172966['uniformMap']||{};function _0x3e710a(_0x2e801c,_0x3360bf){return _0x277c1c(_0x2e801c,_0x3360bf- -0xd8);}this['vertexShaderSource']=_0x172966[_0x4a7785(-0xa8,-0x28)],this['fragmentShaderSource']=_0x172966[_0x3e710a(-0x188,-0xfa)],this[_0x3e710a(-0x182,-0x19c)]=_0x172966['rawRenderState'],this['framebuffer']=_0x172966[_0x4a7785(-0x8c,-0x96)],this['outputTexture']=_0x172966['outputTexture'],this['autoClear']=_0x172966[_0x4a7785(0x4,-0x31)]??![],this[_0x4a7785(0xb,-0x24)]=_0x172966[_0x3e710a(-0x10a,-0xec)],this['show']=!![],this[_0x3e710a(-0x1c8,-0x153)]=undefined,this['clearCommand']=undefined,this[_0x4a7785(-0xbd,-0xb0)]=_0x172966['isDynamic']??(()=>!![]),this['autoClear']&&(this['clearCommand']=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x4a7785(-0x7f,-0x96)],'pass':Pass$1[_0x3e710a(-0x1ac,-0x11b)]}));}['createCommand'](_0x55fbee){function _0x1d9364(_0x3c3c1e,_0x5dd996){return _0x27ad09(_0x5dd996,_0x3c3c1e- -0x654);}function _0x4eb3d2(_0x1bb3ed,_0x582f28){return _0x277c1c(_0x1bb3ed,_0x582f28-0xb8);}if(this['commandType']==='Draw'){const _0x3b7d10={};_0x3b7d10[_0x1d9364(-0x235,-0x241)]=_0x55fbee,_0x3b7d10['geometry']=this[_0x4eb3d2(-0x35,0x12)],_0x3b7d10[_0x4eb3d2(0x1f,0x1d)]=this[_0x1d9364(-0x251,-0x235)],_0x3b7d10['bufferUsage']=BufferUsage$1[_0x1d9364(-0x1b8,-0x141)];const _0x108df6=VertexArray$1['fromGeometry'](_0x3b7d10),_0x47bb09={};_0x47bb09['context']=_0x55fbee,_0x47bb09[_0x4eb3d2(0x10c,0xa0)]=this[_0x4eb3d2(0xe4,0xa0)],_0x47bb09['fragmentShaderSource']=this[_0x4eb3d2(0xfd,0x96)],_0x47bb09['attributeLocations']=this['attributeLocations'];const _0x33a706=ShaderProgram['fromCache'](_0x47bb09),_0x2ed3fa=RenderState['fromCache'](this['rawRenderState']),_0x3bbce3={};return _0x3bbce3[_0x1d9364(-0x1b1,-0x16d)]=this,_0x3bbce3['vertexArray']=_0x108df6,_0x3bbce3['primitiveType']=this[_0x1d9364(-0x20a,-0x1ff)],_0x3bbce3[_0x4eb3d2(0xbb,0x2e)]=Matrix4['IDENTITY'],_0x3bbce3['renderState']=_0x2ed3fa,_0x3bbce3['shaderProgram']=_0x33a706,_0x3bbce3['framebuffer']=this['framebuffer'],_0x3bbce3[_0x1d9364(-0x246,-0x294)]=this['uniformMap'],_0x3bbce3[_0x1d9364(-0x2ad,-0x228)]=Pass$1['OPAQUE'],new DrawCommand(_0x3bbce3);}else{if(this[_0x1d9364(-0x276,-0x259)]==='Compute'){const _0x4e3a8c={};return _0x4e3a8c['owner']=this,_0x4e3a8c[_0x1d9364(-0x1d8,-0x185)]=this['fragmentShaderSource'],_0x4e3a8c['uniformMap']=this[_0x4eb3d2(0x68,0x28)],_0x4e3a8c['outputTexture']=this[_0x1d9364(-0x1e7,-0x173)],_0x4e3a8c[_0x1d9364(-0x299,-0x228)]=!![],new ComputeCommand(_0x4e3a8c);}else throw new Error(_0x4eb3d2(-0x30,-0x1a));}}[_0x27ad09(0x43e,0x3ce)](_0x2c4199,_0x17eeea){function _0x237320(_0x2555f1,_0x3067cf){return _0x27ad09(_0x2555f1,_0x3067cf- -0x3e7);}this['geometry']=_0x17eeea;function _0x4f5b07(_0x527fa1,_0x5039bb){return _0x27ad09(_0x5039bb,_0x527fa1- -0x227);}defined(this[_0x237320(-0x3c,0x3c)])&&(this['commandToExecute'][_0x4f5b07(0x1b5,0x244)]=VertexArray$1['fromGeometry']({'context':_0x2c4199,'geometry':this[_0x4f5b07(0x1d1,0x16e)],'attributeLocations':this[_0x4f5b07(0x1dc,0x242)],'bufferUsage':BufferUsage$1[_0x4f5b07(0x275,0x1e2)]}));}[_0x277c1c(-0xfa,-0x113)](_0x241cf9){if(!this['isDynamic']())return;if(!this['show']||!defined(_0x241cf9))return;function _0x3cac5b(_0x44614c,_0x3be7c2){return _0x27ad09(_0x3be7c2,_0x44614c- -0x2b4);}!defined(this[_0x3cac5b(0x16f,0x17c)])&&(this['commandToExecute']=this[_0x1fb886(0x26b,0x2c2)](_0x241cf9['context']));defined(this['preExecute'])&&this['preExecute']();if(!_0x241cf9['commandList']){console[_0x1fb886(0x1e7,0x251)]('frameState.commandList\x20is\x20undefined');return;}function _0x1fb886(_0x176ab9,_0x229ca1){return _0x27ad09(_0x176ab9,_0x229ca1- -0x1c1);}defined(this['clearCommand'])&&_0x241cf9[_0x3cac5b(0x178,0x1ec)]['push'](this[_0x1fb886(0x2b6,0x24a)]),defined(this[_0x3cac5b(0x16f,0x1f5)])&&_0x241cf9['commandList']['push'](this['commandToExecute']);}[_0x277c1c(-0x112,-0x9a)](){return![];}['destroy'](){if(defined(this['commandToExecute'])){var _0x2fea77;(_0x2fea77=this['commandToExecute'][_0x2f23bf(0x242,0x274)])===null||_0x2fea77===void 0x0||_0x2fea77[_0x2f23bf(0x20a,0x1d6)](),this['commandToExecute'][_0x301823(-0x1e1,-0x1d4)]=undefined;}function _0x2f23bf(_0xb094bf,_0x16d0b3){return _0x27ad09(_0x16d0b3,_0xb094bf- -0x1a3);}function _0x301823(_0x5bdaf7,_0x55a4df){return _0x27ad09(_0x55a4df,_0x5bdaf7- -0x5c6);}return destroyObject(this);}}function deepMerge(_0x5e3691,_0x2d76ea){if(!_0x5e3691)return _0x2d76ea;if(!_0x2d76ea)return _0x5e3691;const _0x5d52eb={..._0x2d76ea},_0x1508fb=_0x5d52eb;for(const _0x167290 in _0x5e3691){if(Object['prototype']['hasOwnProperty']['call'](_0x5e3691,_0x167290)){const _0x296059=_0x5e3691[_0x167290],_0x106f1f=_0x2d76ea[_0x167290];if(Array['isArray'](_0x296059)){_0x1508fb[_0x167290]=_0x296059['slice']();continue;}if(_0x296059&&typeof _0x296059==='object'){_0x1508fb[_0x167290]=deepMerge(_0x296059,_0x106f1f||{});continue;}_0x296059!==undefined&&(_0x1508fb[_0x167290]=_0x296059);}}return _0x1508fb;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x2649a6,_0x3be03a,_0x4ec87d,_0xdb863d,_0x392484){this['context']=_0x2649a6,this['options']=_0x4ec87d;function _0x27073b(_0x5890d6,_0xd8f336){return _0x27ad09(_0x5890d6,_0xd8f336- -0x3c5);}this['viewerParameters']=_0xdb863d,this[_0xe55374(0x107,0xb9)]=_0x3be03a,this[_0x27073b(0x5d,0x41)]=0x3c,this['frameRateAdjustment']=0x1;const _0x25ca80={};_0x25ca80['scene']=_0x392484,_0x25ca80['samplingWindow']=0x1,_0x25ca80[_0xe55374(0x5f,0xbc)]=0x0,this['frameRateMonitor']=new FrameRateMonitor(_0x25ca80),this[_0xe55374(0xdb,0xe5)](),this['createWindTextures'](),this[_0x27073b(0x84,0x59)]();function _0xe55374(_0x7eecb8,_0x1c8d5a){return _0x277c1c(_0x1c8d5a,_0x7eecb8-0x10a);}this['createComputingPrimitives']();}['initFrameRate'](){function _0x5325e3(_0x535d6f,_0x574bb6){return _0x27ad09(_0x535d6f,_0x574bb6- -0x428);}function _0x220383(_0x2e615f,_0x3ab6fd){return _0x27ad09(_0x2e615f,_0x3ab6fd- -0x41);}const _0x28c55a=()=>{function _0x328041(_0x300264,_0x2e0f33){return _0x478d(_0x2e0f33-0xd9,_0x300264);}function _0x165f2b(_0x3779b5,_0x36be02){return _0x478d(_0x36be02- -0x25e,_0x3779b5);}this['frameRateMonitor'][_0x165f2b(-0x93,-0xc0)]>0x14&&(this[_0x165f2b(-0x54,-0xda)]=this['frameRateMonitor']['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math['max'](this['frameRate'],0x1));};_0x28c55a();const _0x3dc35a=setInterval(_0x28c55a,0x3e8),_0x198ac5=this['destroy'][_0x5325e3(-0x12,-0x7d)](this);this[_0x220383(0x399,0x36c)]=()=>{clearInterval(_0x3dc35a),_0x198ac5();};}['createWindTextures'](){const _0x1b84a8={};_0x1b84a8['minificationFilter']=TextureMinificationFilter$1['LINEAR'],_0x1b84a8['magnificationFilter']=TextureMagnificationFilter$1[_0x2eed53(-0xd1,-0xe5)];const _0x2d5f7d={'context':this[_0x5ebfa1(-0x18,-0xa6)],'width':this[_0x5ebfa1(-0xb5,-0x2a)]['width'],'height':this[_0x5ebfa1(-0xc,-0x2a)][_0x2eed53(-0xf4,-0xb8)],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this[_0x5ebfa1(-0xbb,-0x128)]['flipY']??![],'sampler':new Sampler$1(_0x1b84a8)};function _0x2eed53(_0x2ae9ca,_0x3e1beb){return _0x27ad09(_0x2ae9ca,_0x3e1beb- -0x4b4);}function _0x5ebfa1(_0x500fc3,_0x5cc930){return _0x27ad09(_0x500fc3,_0x5cc930- -0x4c5);}this['windTextures']={'U':new Texture$1({..._0x2d5f7d,'source':{'arrayBufferView':new Float32Array(this['windData']['u'][_0x2eed53(-0x83,-0x111)])}}),'V':new Texture$1({..._0x2d5f7d,'source':{'arrayBufferView':new Float32Array(this['windData']['v'][_0x2eed53(-0x9d,-0x111)])}})};}['createParticlesTextures'](){function _0x231d2c(_0x48e45f,_0x3e5db7){return _0x27ad09(_0x48e45f,_0x3e5db7-0xfa);}const _0x2d0b80={};_0x2d0b80['minificationFilter']=TextureMinificationFilter$1[_0x2aa73b(-0x6d,-0xef)];function _0x2aa73b(_0x393dfe,_0x1b7869){return _0x27ad09(_0x393dfe,_0x1b7869- -0x521);}_0x2d0b80['magnificationFilter']=TextureMagnificationFilter$1[_0x2aa73b(-0x159,-0xef)];const _0x4afd35={'context':this['context'],'width':this['options']['particlesTextureSize'],'height':this['options'][_0x2aa73b(-0x92,-0x9c)],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x231d2c(0x5c4,0x562)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this['options']['particlesTextureSize']*this['options']['particlesTextureSize']*0x4)[_0x231d2c(0x512,0x483)](0x0)},'sampler':new Sampler$1(_0x2d0b80)};this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x4afd35),'currentParticlesPosition':new Texture$1(_0x4afd35),'nextParticlesPosition':new Texture$1(_0x4afd35),'postProcessingPosition':new Texture$1(_0x4afd35),'particlesSpeed':new Texture$1(_0x4afd35)};}[_0x277c1c(-0x7,-0x8e)](){function _0x4cde95(_0x4f3c21,_0x249445){return _0x27ad09(_0x249445,_0x4f3c21- -0x45);}function _0x1d5a66(_0x1fec3e,_0x179833){return _0x277c1c(_0x1fec3e,_0x179833-0x3de);}Object[_0x1d5a66(0x328,0x2f2)](this[_0x1d5a66(0x34e,0x3c1)])[_0x1d5a66(0x407,0x375)](_0x14ed3f=>_0x14ed3f[_0x4cde95(0x368,0x317)]());}[_0x27ad09(0x41a,0x429)](){function _0x17d7e7(_0x2eb025,_0x37393e){return _0x277c1c(_0x2eb025,_0x37393e- -0xdd);}function _0x59a21e(_0x1914bf,_0x131eb3){return _0x277c1c(_0x1914bf,_0x131eb3-0x30d);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'U':()=>this[_0x17d7e7(-0x202,-0x18d)]['U'],'V':()=>this[_0x17d7e7(-0x10a,-0x18d)]['V'],'uRange':()=>new Cartesian2$1(this['windData']['u'][_0x17d7e7(-0x1cc,-0x157)],this[_0x59a21e(0x2f6,0x30a)]['u'][_0x59a21e(0x181,0x1fe)]),'vRange':()=>new Cartesian2$1(this['windData']['v'][_0x17d7e7(-0xcd,-0x157)],this[_0x59a21e(0x299,0x30a)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData']['speed'][_0x17d7e7(-0xc6,-0x157)],this['windData']['speed']['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x557d3f(_0x2658e2,_0x243866){return _0x17d7e7(_0x2658e2,_0x243866-0x466);}return(this[_0x557d3f(0x2e3,0x271)]['pixelSize']+0x32)*this['options']['speedFactor'];},'frameRateAdjustment':()=>this[_0x59a21e(0x2f2,0x2c3)],'dimension':()=>new Cartesian2$1(this['windData'][_0x17d7e7(-0x167,-0x1e1)],this[_0x17d7e7(-0x6c,-0xe0)][_0x17d7e7(-0x10e,-0x17f)]),'minimum':()=>new Cartesian2$1(this[_0x17d7e7(-0xd7,-0xe0)]['bounds']['west'],this['windData'][_0x59a21e(0x2b7,0x285)]['south']),'maximum':()=>new Cartesian2$1(this[_0x17d7e7(-0x172,-0xe0)][_0x59a21e(0x310,0x285)][_0x59a21e(0x398,0x314)],this[_0x17d7e7(-0x147,-0xe0)]['bounds']['north'])},'fragmentShaderSource':ShaderManager[_0x59a21e(0x352,0x2e0)](),'outputTexture':this['particlesTextures'][_0x17d7e7(-0x185,-0x1cc)],'preExecute':()=>{function _0xb94d02(_0x54c769,_0x113e1f){return _0x17d7e7(_0x113e1f,_0x54c769- -0xdd);}const _0x457052=this['particlesTextures'][_0x41c270(-0x125,-0x11d)];this['particlesTextures']['previousParticlesPosition']=this[_0x41c270(-0x124,-0x176)][_0xb94d02(-0x1f2,-0x22f)],this[_0xb94d02(-0x1d7,-0x19a)][_0xb94d02(-0x1f2,-0x270)]=this['particlesTextures'][_0x41c270(-0x21d,-0x1a7)],this['particlesTextures'][_0xb94d02(-0x2d0,-0x308)]=_0x457052;function _0x41c270(_0x580185,_0x260e05){return _0x59a21e(_0x260e05,_0x580185- -0x414);}this[_0xb94d02(-0x20b,-0x1bb)][_0xb94d02(-0x2a1,-0x31c)][_0x41c270(-0x182,-0x12a)]&&(this[_0x41c270(-0x158,-0x106)]['calculateSpeed'][_0xb94d02(-0x235,-0x1b4)]['outputTexture']=this['particlesTextures'][_0x41c270(-0x1f6,-0x1db)]);},'isDynamic':()=>this[_0x59a21e(0x285,0x20c)]['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':()=>this[_0x59a21e(0x296,0x2f0)]['currentParticlesPosition'],'particlesSpeed':()=>this['particlesTextures']['particlesSpeed']},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this['particlesTextures']['nextParticlesPosition'],'preExecute':()=>{function _0x2ba97b(_0x2c3757,_0x50a9ae){return _0x17d7e7(_0x50a9ae,_0x2c3757- -0x70);}function _0x291689(_0x499e8f,_0x2d534e){return _0x59a21e(_0x499e8f,_0x2d534e- -0x101);}this['primitives']['updatePosition']['commandToExecute']&&(this[_0x2ba97b(-0x19e,-0x22e)]['updatePosition']['commandToExecute'][_0x2ba97b(-0x17e,-0x205)]=this['particlesTextures'][_0x291689(0x196,0x201)]);},'isDynamic':()=>this['options']['dynamic']}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':()=>this[_0x59a21e(0x2bd,0x2f0)][_0x17d7e7(-0xc8,-0xe8)],'particlesSpeed':()=>this[_0x17d7e7(-0xc4,-0xfa)][_0x17d7e7(-0x14d,-0x1cc)],'lonRange':()=>this['viewerParameters'][_0x17d7e7(-0x24a,-0x1d2)],'latRange':()=>this[_0x59a21e(0x193,0x1f5)][_0x59a21e(0x269,0x2ea)],'dataLonRange':()=>new Cartesian2$1(this[_0x17d7e7(-0x13c,-0xe0)][_0x17d7e7(-0x149,-0x165)]['west'],this['windData'][_0x17d7e7(-0x172,-0x165)]['east']),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x59a21e(0x2c1,0x2cd)],this['windData']['bounds'][_0x59a21e(0x2d8,0x29e)]),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this[_0x17d7e7(-0x210,-0x1de)]['dropRateBump'],'useViewerBounds':()=>this['options'][_0x59a21e(0x279,0x2fc)]},'fragmentShaderSource':ShaderManager[_0x59a21e(0x2bd,0x256)](),'outputTexture':this['particlesTextures']['postProcessingPosition'],'preExecute':()=>{function _0x520e1b(_0x4f9289,_0x1b5ab1){return _0x17d7e7(_0x1b5ab1,_0x4f9289-0x94);}function _0x1a269a(_0x51fedb,_0x3f9974){return _0x59a21e(_0x51fedb,_0x3f9974- -0x12c);}this['primitives'][_0x520e1b(-0x15f,-0x1ee)]['commandToExecute']&&(this['primitives']['postProcessingPosition'][_0x520e1b(-0xc4,-0x73)]['outputTexture']=this['particlesTextures']['postProcessingPosition']);},'isDynamic':()=>this['options']['dynamic']})};}[_0x27ad09(0x3d8,0x45d)](){this['windTextures']['U']['destroy']();function _0x4ed2e2(_0xb014df,_0xf7b7a9){return _0x277c1c(_0xf7b7a9,_0xb014df-0x40d);}function _0x2b2a44(_0x594869,_0x4c1e36){return _0x27ad09(_0x4c1e36,_0x594869- -0x1da);}this[_0x2b2a44(0x214,0x1d1)]['V']['destroy'](),this[_0x4ed2e2(0x38b,0x415)]();}['updateWindData'](_0x34d5aa){function _0xffb2ed(_0x873fc0,_0x2eaa5c){return _0x27ad09(_0x873fc0,_0x2eaa5c- -0x412);}this[_0xffb2ed(0x28,0x89)]=_0x34d5aa,this['reCreateWindTextures']();}['updateOptions'](_0x5d2989){const _0x5dc85f=_0x5d2989['flipY']!==undefined&&_0x5d2989[_0x396cc3(-0xca,-0x9b)]!==this['options']['flipY'];function _0x473d92(_0x1cc8a6,_0x1c894f){return _0x27ad09(_0x1cc8a6,_0x1c894f- -0x2b8);}this[_0x396cc3(-0x123,-0x16e)]=deepMerge(_0x5d2989,this['options']);function _0x396cc3(_0x1e169f,_0x3d0862){return _0x277c1c(_0x3d0862,_0x1e169f- -0x22);}_0x5dc85f&&this['reCreateWindTextures']();}[_0x277c1c(-0x102,-0x109)](_0x388e13){const {array:_0x171b22}=_0x388e13;let {min:_0x52e55e,max:_0x5ee495}=_0x388e13;const _0x1b2832=new Float32Array(_0x171b22['length']);_0x52e55e===undefined&&(console['warn']('min\x20is\x20undefined,\x20calculate\x20min'),_0x52e55e=Math[_0xa5bfa0(0x170,0x173)](..._0x171b22));function _0xa5bfa0(_0x2f16bd,_0x46f37c){return _0x27ad09(_0x46f37c,_0x2f16bd- -0x2b4);}_0x5ee495===undefined&&(console[_0xa5bfa0(0x15e,0x117)]('max\x20is\x20undefined,\x20calculate\x20max'),_0x5ee495=Math['max'](..._0x171b22));const _0x40420d=Math['max'](Math['abs'](_0x52e55e),Math['abs'](_0x5ee495));function _0x20ab91(_0x3b1eb6,_0x12ca99){return _0x277c1c(_0x3b1eb6,_0x12ca99-0x3af);}for(let _0x3b1ce6=0x0;_0x3b1ce6<_0x171b22[_0xa5bfa0(0x185,0x15a)];_0x3b1ce6++){const _0x2db25a=_0x171b22[_0x3b1ce6]/_0x40420d;_0x1b2832[_0x3b1ce6]=_0x2db25a;}return _0x1b2832;}['destroy'](){Object['values'](this[_0x46c167(-0x7b,-0x100)])['forEach'](_0x372680=>_0x372680[_0x2ec105(-0x169,-0x18d)]());function _0x2ec105(_0x144c6c,_0x209bb6){return _0x27ad09(_0x144c6c,_0x209bb6- -0x53a);}Object['values'](this[_0x2ec105(-0xfa,-0xb9)])[_0x2ec105(-0xf7,-0x105)](_0x277353=>_0x277353[_0x2ec105(-0x1eb,-0x18d)]());function _0x46c167(_0x20ab7d,_0x374c3a){return _0x27ad09(_0x20ab7d,_0x374c3a- -0x4ee);}Object[_0x46c167(-0x10f,-0x13c)](this[_0x2ec105(-0x17a,-0xed)])['forEach'](_0x37bd2b=>_0x37bd2b['destroy']()),this[_0x2ec105(-0x7a,-0xcc)][_0x2ec105(-0x217,-0x18d)]();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x3aeb48,_0x841017,_0x50e687,_0x1c1c58){this['context']=_0x3aeb48,this['options']=_0x841017;function _0x405a6c(_0x32d69e,_0x1fe275){return _0x27ad09(_0x32d69e,_0x1fe275-0x25);}this['viewerParameters']=_0x50e687,this['computing']=_0x1c1c58;(typeof this['options'][_0x405a6c(0x52c,0x4aa)]!=='number'||this['options']['particlesTextureSize']<=0x0)&&(console[_0x2e858e(0x1b8,0x1a2)](_0x2e858e(0x230,0x266)),this[_0x405a6c(0x3cd,0x3c2)][_0x405a6c(0x498,0x4aa)]=0x100);this['colorTable']=this['createColorTableTexture']();function _0x2e858e(_0x1b840c,_0x492841){return _0x277c1c(_0x492841,_0x1b840c-0x2b4);}this['textures']=this[_0x405a6c(0x34d,0x3da)](),this['framebuffers']=this['createRenderingFramebuffers'](),this['primitives']=this['createPrimitives']();}[_0x27ad09(0x35b,0x3b5)](){const _0x98837d={};_0x98837d['context']=this['context'],_0x98837d['width']=this[_0x5548ec(0x196,0x1ac)]['drawingBufferWidth'],_0x98837d['height']=this[_0x3b6648(0x530,0x5ad)]['drawingBufferHeight'],_0x98837d[_0x5548ec(0x107,0x17f)]=PixelFormat[_0x5548ec(0x1ae,0x13d)],_0x98837d[_0x3b6648(0x5bb,0x601)]=PixelDatatype['UNSIGNED_BYTE'];const _0x2adade=_0x98837d,_0x2248f1={};_0x2248f1[_0x3b6648(0x530,0x59e)]=this['context'],_0x2248f1[_0x3b6648(0x4ab,0x4ad)]=this['context'][_0x3b6648(0x537,0x525)],_0x2248f1[_0x3b6648(0x50d,0x4b8)]=this['context']['drawingBufferHeight'],_0x2248f1['pixelFormat']=PixelFormat[_0x5548ec(0x220,0x1f3)];function _0x5548ec(_0x1fa848,_0x1d4b72){return _0x27ad09(_0x1d4b72,_0x1fa848- -0x289);}_0x2248f1[_0x3b6648(0x5bb,0x533)]=PixelDatatype['UNSIGNED_INT'];const _0x4864ae=_0x2248f1;function _0x3b6648(_0x5cd1f0,_0x19f1ce){return _0x277c1c(_0x19f1ce,_0x5cd1f0-0x5af);}return{'segmentsColor':new Texture(_0x2adade),'segmentsDepth':new Texture(_0x4864ae)};}['createRenderingFramebuffers'](){const _0x28f4d9={};_0x28f4d9['context']=this['context'],_0x28f4d9['colorTextures']=[this['textures'][_0x42a0a6(0x11d,0x14f)]],_0x28f4d9['depthTexture']=this['textures'][_0x47fe18(-0x1e1,-0x1fe)];function _0x42a0a6(_0x463a73,_0x3beec1){return _0x27ad09(_0x3beec1,_0x463a73- -0x2d5);}function _0x47fe18(_0x5c263b,_0x43e21b){return _0x277c1c(_0x43e21b,_0x5c263b- -0xcf);}return{'segments':new Framebuffer(_0x28f4d9)};}[_0x27ad09(0x47a,0x40d)](){function _0x4843eb(_0x4134a1,_0x54efec){return _0x277c1c(_0x54efec,_0x4134a1-0x108);}Object[_0x4843eb(0x1c,0x9c)](this['framebuffers'])['forEach'](_0xb2238c=>{_0xb2238c['destroy']();});}['createColorTableTexture'](){const _0x414f72=new Float32Array(this['options']['colors']['flatMap'](_0x499cd2=>{const _0x15d78e=Color$1[_0x34170e(-0x99,-0x4a)](_0x499cd2);function _0x45fa8b(_0x1b5af7,_0x43b619){return _0x478d(_0x1b5af7-0x1a8,_0x43b619);}function _0x34170e(_0x4e0165,_0x1f3f18){return _0x478d(_0x1f3f18- -0x169,_0x4e0165);}return[_0x15d78e[_0x34170e(0x67,0x1d)],_0x15d78e[_0x45fa8b(0x374,0x3f7)],_0x15d78e['blue'],_0x15d78e[_0x45fa8b(0x36f,0x33e)]];}));function _0x431ce2(_0x184da4,_0x7c73ec){return _0x27ad09(_0x7c73ec,_0x184da4- -0x18c);}const _0x269c8e={};_0x269c8e['minificationFilter']=TextureMinificationFilter['LINEAR'],_0x269c8e['magnificationFilter']=TextureMagnificationFilter[_0x431ce2(0x243,0x21e)],_0x269c8e['wrapS']=TextureWrap[_0x431ce2(0x20c,0x1fa)];function _0x17235c(_0x48f954,_0x1c6f9a){return _0x277c1c(_0x48f954,_0x1c6f9a-0x59e);}return _0x269c8e[_0x17235c(0x59d,0x597)]=TextureWrap['CLAMP_TO_EDGE'],new Texture({'context':this['context'],'width':this[_0x431ce2(0x211,0x262)][_0x431ce2(0x29b,0x321)]['length'],'height':0x1,'pixelFormat':PixelFormat['RGBA'],'pixelDatatype':PixelDatatype[_0x431ce2(0x2dc,0x336)],'sampler':new Sampler(_0x269c8e),'source':{'width':this[_0x17235c(0x4a4,0x49d)]['colors']['length'],'height':0x1,'arrayBufferView':_0x414f72}});}['createSegmentsGeometry'](){const _0x55bfc1=0x4,_0xd64acb=this[_0x432592(0x14d,0x16f)]['particlesTextureSize'];let _0x370d29=[];for(let _0x32fa6b=0x0;_0x32fa6b<_0xd64acb;_0x32fa6b++){for(let _0x322a26=0x0;_0x322a26<_0xd64acb;_0x322a26++){for(let _0x47683d=0x0;_0x47683d<_0x55bfc1;_0x47683d++){_0x370d29[_0x432592(0x14f,0xf6)](_0x32fa6b/_0xd64acb),_0x370d29[_0x432592(0x14f,0xbe)](_0x322a26/_0xd64acb);}}}_0x370d29=new Float32Array(_0x370d29);const _0x1158a0=this['options'][_0x2b8166(0x67,0x77)]**0x2;let _0x24b896=[];for(let _0x4a08e8=0x0;_0x4a08e8<_0x1158a0;_0x4a08e8++){_0x24b896['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x24b896=new Float32Array(_0x24b896);let _0x2e7a42=[];function _0x2b8166(_0x4b975c,_0x19fbf0){return _0x277c1c(_0x19fbf0,_0x4b975c-0x80);}for(let _0x1f838c=0x0,_0x16857c=0x0;_0x1f838c<_0x1158a0;_0x1f838c++){_0x2e7a42[_0x2b8166(-0x7f,-0xa8)](_0x16857c+0x0,_0x16857c+0x1,_0x16857c+0x2,_0x16857c+0x2,_0x16857c+0x1,_0x16857c+0x3),_0x16857c+=_0x55bfc1;}_0x2e7a42=new Uint32Array(_0x2e7a42);const _0x10dbf8={};_0x10dbf8[_0x2b8166(0x3b,0x6f)]=ComponentDatatype[_0x2b8166(0x4a,0x48)];function _0x432592(_0x1c2458,_0x1d1ce2){return _0x277c1c(_0x1d1ce2,_0x1c2458-0x24e);}_0x10dbf8[_0x2b8166(0x20,0x73)]=0x2,_0x10dbf8[_0x432592(0x162,0x10a)]=_0x370d29;const _0x3886a8={};_0x3886a8['componentDatatype']=ComponentDatatype[_0x2b8166(0x4a,-0x2c)],_0x3886a8[_0x2b8166(0x20,0xab)]=0x3,_0x3886a8['values']=_0x24b896;const _0x212cd4=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x10dbf8),'normal':new GeometryAttribute(_0x3886a8)}),'indices':_0x2e7a42});return _0x212cd4;}[_0x277c1c(-0x3e,-0x9c)](_0x44fba5){const _0x408345={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x44fba5};return Appearance['getDefaultRenderState'](!![],![],_0x408345);}['createPrimitives'](){const _0x5ee37e={};_0x5ee37e['st']=0x0,_0x5ee37e['normal']=0x1;const _0xc0e99e={};_0xc0e99e[_0x5776d5(-0x44,-0xc8)]=!![];const _0x577a13={};_0x577a13['enabled']=!![],_0x577a13['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x577a13[_0x125534(0x4ae,0x45e)]=WebGLRenderingContext['SRC_ALPHA'],_0x577a13['blendFuncDestination']=WebGLRenderingContext[_0x5776d5(0x10,-0x22)];function _0x125534(_0x50da14,_0x5e1039){return _0x277c1c(_0x5e1039,_0x50da14-0x4c3);}const _0x4c3ba1={};_0x4c3ba1[_0x125534(0x431,0x49e)]=undefined,_0x4c3ba1[_0x125534(0x415,0x3df)]=_0xc0e99e;function _0x5776d5(_0x448866,_0x37a137){return _0x277c1c(_0x37a137,_0x448866-0x15);}_0x4c3ba1['depthMask']=!![],_0x4c3ba1[_0x125534(0x4c5,0x4ea)]=_0x577a13;const _0x5a1c6e=new CustomPrimitive({'commandType':_0x5776d5(-0xd9,-0xa2),'attributeLocations':_0x5ee37e,'geometry':this[_0x5776d5(-0x68,-0xee)](),'primitiveType':PrimitiveType[_0x5776d5(-0x74,-0xe8)],'uniformMap':{'previousParticlesPosition':()=>this['computing'][_0x125534(0x4a6,0x41a)]['previousParticlesPosition'],'currentParticlesPosition':()=>this['computing']['particlesTextures'][_0x125534(0x48b,0x517)],'postProcessingPosition':()=>this['computing']['particlesTextures'][_0x5776d5(-0x101,-0xce)],'particlesSpeed':()=>this[_0x125534(0x49d,0x516)]['particlesTextures'][_0x125534(0x3d4,0x3e1)],'frameRateAdjustment':()=>this['computing']['frameRateAdjustment'],'colorTable':()=>this['colorTable'],'domain':()=>{var _0x25c8e2,_0x41a132;const _0x17a812=new Cartesian2(((_0x25c8e2=this['options']['domain'])===null||_0x25c8e2===void 0x0?void 0x0:_0x25c8e2['min'])??this['computing']['windData']['speed']['min'],((_0x41a132=this['options']['domain'])===null||_0x41a132===void 0x0?void 0x0:_0x41a132[_0x2ac870(-0x8,0x63)])??this['computing']['windData'][_0x3c4613(-0x1bc,-0x1e2)][_0x3c4613(-0x1d8,-0x25a)]);function _0x2ac870(_0x1ebf7f,_0x5a1488){return _0x125534(_0x5a1488- -0x351,_0x1ebf7f);}function _0x3c4613(_0x21fc72,_0x199510){return _0x5776d5(_0x199510- -0x160,_0x21fc72);}return _0x17a812;},'displayRange':()=>{var _0x3a5131,_0x321cef;function _0x340f87(_0x5a51c2,_0x53f69e){return _0x125534(_0x5a51c2- -0xc7,_0x53f69e);}const _0xb791ef=new Cartesian2(((_0x3a5131=this['options'][_0x329969(0x406,0x3f9)])===null||_0x3a5131===void 0x0?void 0x0:_0x3a5131['min'])??this['computing'][_0x340f87(0x3f9,0x43d)]['speed']['min'],((_0x321cef=this['options']['displayRange'])===null||_0x321cef===void 0x0?void 0x0:_0x321cef['max'])??this['computing']['windData']['speed']['max']);function _0x329969(_0x582429,_0x2746e3){return _0x125534(_0x582429-0x27,_0x2746e3);}return _0xb791ef;},'particleHeight':()=>this[_0x125534(0x3c2,0x3c0)]['fixedHeight']||0x0,'aspect':()=>this['context']['drawingBufferWidth']/this['context'][_0x125534(0x456,0x453)],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{const _0x1c64a6={};_0x1c64a6[_0x20b7e5(0x16e,0xe1)]=0x1,_0x1c64a6['max']=0x2;function _0x20b7e5(_0x3838e8,_0x526186){return _0x125534(_0x526186- -0x368,_0x3838e8);}const _0x30fda0=this[_0x20b7e5(-0x39,0x5a)][_0x20b7e5(0xbd,0x8d)]||_0x1c64a6;function _0x1d01e5(_0x77623b,_0x3cb7d1){return _0x5776d5(_0x77623b-0x26e,_0x3cb7d1);}return new Cartesian2(_0x30fda0[_0x20b7e5(0x114,0xe1)],_0x30fda0[_0x1d01e5(0x174,0xee)]);},'lineLength':()=>{const _0x44ab58={};function _0x3685ed(_0x2c1a9e,_0x5e73aa){return _0x125534(_0x5e73aa-0x61,_0x2c1a9e);}_0x44ab58['min']=0x14,_0x44ab58[_0x968cd1(-0x186,-0x1f4)]=0x64;function _0x968cd1(_0xede4c,_0x530460){return _0x5776d5(_0xede4c- -0x8c,_0x530460);}const _0x20c177=this['options']['lineLength']||_0x44ab58;return new Cartesian2(_0x20c177['min'],_0x20c177[_0x968cd1(-0x186,-0x148)]);},'is3D':()=>this['viewerParameters']['sceneMode']===SceneMode[_0x125534(0x4b5,0x4e7)],'segmentsDepthTexture':()=>this['textures'][_0x125534(0x3b1,0x3f0)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this[_0x125534(0x427,0x395)](_0x4c3ba1)}),_0x531520={};return _0x531520['segments']=_0x5a1c6e,_0x531520;}['onParticlesTextureSizeChange'](){const _0x28445b=this['createSegmentsGeometry']();this['primitives']['segments']['geometry']=_0x28445b;const _0x1a51a9={};function _0xeff616(_0x3fe3ae,_0x426adc){return _0x277c1c(_0x426adc,_0x3fe3ae-0x4ef);}_0x1a51a9['context']=this['context'],_0x1a51a9['geometry']=_0x28445b,_0x1a51a9[_0xeff616(0x454,0x46d)]=this[_0xeff616(0x49e,0x477)]['segments']['attributeLocations'];function _0x4a6709(_0x56a3ca,_0x1ad863){return _0x27ad09(_0x56a3ca,_0x1ad863- -0x348);}_0x1a51a9['bufferUsage']=BufferUsage['STATIC_DRAW'];const _0x2c7fe2=VertexArray['fromGeometry'](_0x1a51a9);this['primitives']['segments']['commandToExecute']&&(this['primitives']['segments']['commandToExecute']['vertexArray']=_0x2c7fe2);}[_0x27ad09(0x37b,0x3a6)](){this[_0x3ed67f(-0xc9,-0xb5)][_0xf7b698(-0x23f,-0x2ac)]();function _0x3ed67f(_0x19201a,_0x1a6cec){return _0x27ad09(_0x1a6cec,_0x19201a- -0x49a);}function _0xf7b698(_0x438609,_0x1620ab){return _0x27ad09(_0x438609,_0x1620ab- -0x659);}this['colorTable']=this[_0xf7b698(-0x22e,-0x1bb)]();}['updateOptions'](_0x50b785){function _0x5f2e96(_0x1e47af,_0x516d9e){return _0x27ad09(_0x1e47af,_0x516d9e- -0x4d6);}function _0x2a0d73(_0x532e33,_0xf4c1fe){return _0x277c1c(_0x532e33,_0xf4c1fe-0x431);}const _0xf0b75f=_0x50b785[_0x2a0d73(0x3cb,0x3ba)]&&JSON[_0x5f2e96(-0xa4,-0x45)](_0x50b785['colors'])!==JSON['stringify'](this[_0x2a0d73(0x329,0x330)][_0x5f2e96(-0xf1,-0xaf)]);this['options']=deepMerge(_0x50b785,this['options']),_0xf0b75f&&this['onColorTableChange']();}['destroy'](){Object['values'](this['framebuffers'])['forEach'](_0x18700b=>{_0x18700b['destroy']();}),Object['values'](this['primitives'])[_0x3e9ae8(0x58,0xad)](_0x4f76dd=>{_0x4f76dd['destroy']();});function _0x311fa6(_0xa6fe60,_0x2f330e){return _0x277c1c(_0xa6fe60,_0x2f330e- -0xdc);}function _0x3e9ae8(_0x4742a3,_0x55d09d){return _0x27ad09(_0x55d09d,_0x4742a3- -0x3dd);}this['colorTable'][_0x3e9ae8(-0x30,0x46)]();}}const {ClearCommand,Color,Pass}=mars3d__namespace['Cesium'];class WindParticleSystem{constructor(_0x37fd80,_0x7584bf,_0x1a95af,_0x59d746,_0x59a23d){this[_0x504709(0x213,0x24b)]=_0x37fd80;function _0x10b0d8(_0x3a7fc5,_0x555f66){return _0x27ad09(_0x3a7fc5,_0x555f66- -0x631);}this['options']=_0x1a95af,this[_0x10b0d8(-0x31e,-0x2ab)]=_0x59d746;function _0x504709(_0x3dd8d2,_0x2e2154){return _0x27ad09(_0x2e2154,_0x3dd8d2- -0x20c);}this[_0x504709(0x26c,0x256)]=new WindParticlesComputing(_0x37fd80,_0x7584bf,_0x1a95af,_0x59d746,_0x59a23d),this[_0x10b0d8(-0x23b,-0x259)]=new WindParticlesRendering(_0x37fd80,_0x1a95af,_0x59d746,this['computing']),this['clearFramebuffers']();}[_0x277c1c(0x81,0x8)](){const _0x2f79f8=[this[_0x277fab(0x2c1,0x2db)][_0x277fab(0x2a4,0x2b0)][_0x277fab(0x1c1,0x21a)],this['computing']['primitives']['updatePosition'],this['computing'][_0x100f9c(-0xfb,-0xba)][_0x100f9c(-0x1d8,-0x17f)],this['rendering']['primitives']['segments']];function _0x277fab(_0x4507ec,_0x322a8a){return _0x277c1c(_0x4507ec,_0x322a8a-0x301);}function _0x100f9c(_0x792f7e,_0xda7e43){return _0x27ad09(_0x792f7e,_0xda7e43- -0x507);}return _0x2f79f8;}[_0x27ad09(0x491,0x473)](){const _0x6bab24=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass[_0x46e490(0x4d6,0x4be)]});function _0x1676a1(_0x229aef,_0xac065e){return _0x27ad09(_0x229aef,_0xac065e- -0x19e);}function _0x46e490(_0x168e92,_0x198c5e){return _0x277c1c(_0x198c5e,_0x168e92-0x519);}Object['keys'](this[_0x1676a1(0x21b,0x23a)]['framebuffers'])['forEach'](_0x137650=>{_0x6bab24[_0x426bcc(-0xcb,-0x50)]=this['rendering'][_0x426bcc(-0x9,-0x67)][_0x137650];function _0x426bcc(_0x12ca6a,_0x886775){return _0x1676a1(_0x12ca6a,_0x886775- -0x2ca);}function _0xad637e(_0x2c37a7,_0x1c7e29){return _0x46e490(_0x1c7e29- -0x3bf,_0x2c37a7);}_0x6bab24['execute'](this['context']);});}['changeOptions'](_0x2a3166){function _0x1727af(_0x21a3d2,_0x110de4){return _0x27ad09(_0x21a3d2,_0x110de4- -0x3ab);}let _0x5a1298=![];_0x2a3166['particlesTextureSize']&&this['options'][_0xc77cc8(0x578,0x60b)]!==_0x2a3166['particlesTextureSize']&&(_0x5a1298=!![]);function _0xc77cc8(_0x40d8ab,_0x4a9425){return _0x277c1c(_0x4a9425,_0x40d8ab-0x591);}const _0x5bf7a5=deepMerge(_0x2a3166,this['options']);if(_0x5bf7a5[_0xc77cc8(0x578,0x59b)]<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');this['options']=_0x5bf7a5,this[_0xc77cc8(0x4cb,0x52d)][_0xc77cc8(0x4c6,0x452)](_0x2a3166),this['computing'][_0xc77cc8(0x4c6,0x48f)](_0x2a3166),_0x5a1298&&(this[_0x1727af(0x143,0xcd)]['destroyParticlesTextures'](),this[_0xc77cc8(0x56b,0x531)]['createParticlesTextures'](),this['rendering']['onParticlesTextureSizeChange']());}['applyViewerParameters'](_0x2e27ab){this[_0x57d183(0x49d,0x4ad)]=_0x2e27ab;function _0x3f86df(_0x364979,_0x142cc5){return _0x277c1c(_0x142cc5,_0x364979-0x3f1);}function _0x57d183(_0x453eb4,_0x5475b5){return _0x27ad09(_0x5475b5,_0x453eb4-0x117);}this['computing'][_0x57d183(0x49d,0x478)]=_0x2e27ab,this[_0x3f86df(0x32b,0x383)][_0x3f86df(0x2d9,0x347)]=_0x2e27ab;}['destroy'](){this['computing'][_0x3e51e7(-0x86,-0x87)]();function _0x217c7d(_0x22817f,_0x2e0fd1){return _0x27ad09(_0x2e0fd1,_0x22817f- -0x286);}function _0x3e51e7(_0x1a589c,_0x4c1b6d){return _0x277c1c(_0x1a589c,_0x4c1b6d-0x6a);}this['rendering'][_0x3e51e7(-0xd0,-0x87)]();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace[_0x277c1c(-0x146,-0xe8)]['BaseLayer'],_0x26fad9={};_0x26fad9['min']=0x1,_0x26fad9['max']=0x2;const _0x16887b={};_0x16887b['min']=0x14,_0x16887b['max']=0x64;const _0x2ac54a={};_0x2ac54a['particlesTextureSize']=0x64,_0x2ac54a['fixedHeight']=0x0,_0x2ac54a['lineWidth']=_0x26fad9,_0x2ac54a['lineLength']=_0x16887b,_0x2ac54a['speedFactor']=0x1,_0x2ac54a[_0x27ad09(0x3e4,0x3a8)]=0.003,_0x2ac54a['dropRateBump']=0.001,_0x2ac54a['colors']=[_0x277c1c(-0x52,-0x94)],_0x2ac54a[_0x27ad09(0x3ff,0x3f6)]=![],_0x2ac54a['dynamic']=!![];const DEF_OPTIONS=_0x2ac54a;class WindLayer extends BaseLayer$1{constructor(_0x15c5e3={}){_0x15c5e3={...DEF_OPTIONS,..._0x15c5e3};function _0x2b31b4(_0x309cb2,_0x1c630e){return _0x277c1c(_0x309cb2,_0x1c630e- -0x145);}super(_0x15c5e3),this[_0x2b31b4(-0x210,-0x1f6)](_0x15c5e3,_0x15c5e3);}get['layer'](){return this['primitives'];}get['data'](){return this['options']['data'];}set[_0x277c1c(-0x4e,-0xbe)](_0x44ef9){this['options']['data']=_0x44ef9;function _0x885429(_0x24459a,_0x17b780){return _0x27ad09(_0x24459a,_0x17b780- -0x409);}this[_0x885429(0x0,0x56)](_0x44ef9);}get['colors'](){function _0x262919(_0x2bd3e8,_0x5342a8){return _0x277c1c(_0x2bd3e8,_0x5342a8-0x1bf);}return this[_0x262919(0xa2,0xbe)]['colors'];}set['colors'](_0x52e468){this['options']['colors']=_0x52e468;const _0x2b8be9={};_0x2b8be9['colors']=_0x52e468,this['_setOptionsHook'](this['options'],_0x2b8be9);}[_0x27ad09(0x413,0x455)](_0x3c5da1){_0x3c5da1?this['_addedHook']():this['_removedHook']();}[_0x277c1c(-0x55,-0x66)](){}['_addedHook'](){this['scene']=this[_0x24c2f2(0xc6,0x73)][_0x581388(0x122,0x8f)],this['camera']=this['_map']['camera'];this[_0x581388(-0x3e,0x3d)][_0x581388(0xf2,0x80)]&&this[_0x581388(0x15f,0xff)](this['options'][_0x581388(0x8,0x80)]);if(!this[_0x581388(0x16a,0x13b)]||!this['show'])return;this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1[(_0x581388(0x41,0x68))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene']['mode']},this['updateViewerParameters'](),this[_0x24c2f2(0x1b,0x70)]=new WindParticleSystem(this['scene'][_0x581388(0x14f,0xbf)],this['windData'],this['options'],this['viewerParameters'],this['scene']),this['primitives']=this['particleSystem'][_0x581388(0xfe,0x146)](),this['primitives']['forEach'](_0x38951b=>{function _0x55c431(_0x50f83d,_0x25c1cf){return _0x24c2f2(_0x50f83d,_0x25c1cf-0x305);}function _0x38a005(_0x51227f,_0x3140e8){return _0x24c2f2(_0x3140e8,_0x51227f- -0x105);}this[_0x38a005(-0x69,0x24)]['primitives'][_0x38a005(0x3d,0x14)](_0x38951b);});function _0x24c2f2(_0x627b79,_0x44eb99){return _0x27ad09(_0x627b79,_0x44eb99- -0x353);}function _0x581388(_0x50cb6c,_0x20544a){return _0x277c1c(_0x50cb6c,_0x20544a-0x13e);}this[_0x24c2f2(0xba,0x83)]['percentageChanged']=0.01,this['camera']['changed'][_0x24c2f2(0xbd,0xbc)](this[_0x24c2f2(0xa5,0x135)][_0x581388(0x51,0x4b)](this)),this['scene'][_0x24c2f2(-0x49,0x3b)]['addEventListener'](this[_0x24c2f2(0xd3,0x135)][_0x24c2f2(0x2e,0x58)](this)),window['addEventListener']('resize',this['updateViewerParameters'][_0x581388(0x71,0x4b)](this));}[_0x277c1c(0x2c,-0x29)](){this[_0x1c13f8(-0x1af,-0x11b)]['changed'][_0x545119(0x573,0x5de)](this['updateViewerParameters']['bind'](this)),this['scene'][_0x1c13f8(-0x1ad,-0x163)]['removeEventListener'](this['updateViewerParameters']['bind'](this));function _0x1c13f8(_0x35fc59,_0x5f132a){return _0x27ad09(_0x35fc59,_0x5f132a- -0x4f1);}window['removeEventListener']('resize',this['updateViewerParameters']['bind'](this));function _0x545119(_0x2aebcb,_0x58cb96){return _0x27ad09(_0x58cb96,_0x2aebcb-0x123);}this[_0x545119(0x570,0x5fb)]&&(this[_0x1c13f8(-0xc7,-0xa4)]['forEach'](_0x85c94b=>{this['scene']['primitives']['remove'](_0x85c94b);}),delete this['primitives']),this['particleSystem']&&(this['particleSystem'][_0x545119(0x4d0,0x51c)](),delete this[_0x1c13f8(-0xce,-0x12e)]);}['setData'](_0x2961c4,_0x84a8c9){function _0x1666db(_0xa1402c,_0x167ed3){return _0x27ad09(_0xa1402c,_0x167ed3- -0x136);}this['windData']=this['processWindData'](_0x2961c4);function _0xdd54e5(_0x4eef1b,_0x42d15b){return _0x27ad09(_0x4eef1b,_0x42d15b- -0x3d1);}if(_0x84a8c9){this['_removedHook'](),this['_addedHook']();return;}this['particleSystem']?(this[_0xdd54e5(-0x89,-0xe)]['computing']['updateWindData'](this['windData']),this['scene'][_0xdd54e5(-0x29,-0x40)]()):this[_0xdd54e5(0x9d,0x6c)]();}[_0x277c1c(-0x125,-0xb1)](_0x7fac6b,_0x3a8d50){function _0x5a3d3a(_0x2d0d6b,_0x4bbc9c){return _0x27ad09(_0x4bbc9c,_0x2d0d6b- -0x3d2);}this['particleSystem']&&(this['particleSystem']['changeOptions'](_0x3a8d50),this[_0x5a3d3a(0x1d,0x72)]['requestRender']());}['processWindData'](_0x24db23){var _0x34cc75,_0xe777c6;const _0x120995={..._0x24db23},_0x5c795a=_0x120995;!_0x5c795a[_0xd35657(0x3d4,0x44a)]&&_0x5c795a['rows']&&(_0x5c795a['height']=_0x5c795a[_0x5e5f5e(0x212,0x246)]);!_0x5c795a[_0x5e5f5e(0x2b6,0x234)]&&_0x5c795a['cols']&&(_0x5c795a['width']=_0x5c795a['cols']);!_0x5c795a['bounds']&&(_0x5c795a['bounds']={'west':_0x5c795a['xmin'],'south':_0x5c795a['ymin'],'east':_0x5c795a['xmax'],'north':_0x5c795a[_0xd35657(0x419,0x3b4)]});function _0xd35657(_0x1a6f6a,_0x537956){return _0x27ad09(_0x537956,_0x1a6f6a- -0x28);}if(!_0x5c795a['u']){const _0x2fe37d={};_0x2fe37d['array']=_0x24db23['udata'],_0x2fe37d['min']=_0x24db23[_0xd35657(0x3aa,0x388)],_0x2fe37d['max']=_0x24db23['umax'],_0x5c795a['u']=_0x2fe37d;}if(!_0x5c795a['v']){const _0x3910ea={};_0x3910ea['array']=_0x24db23[_0x5e5f5e(0x2d3,0x252)],_0x3910ea['min']=_0x24db23['vmin'],_0x3910ea[_0x5e5f5e(0x240,0x229)]=_0x24db23['vmax'],_0x5c795a['v']=_0x3910ea;}function _0x5e5f5e(_0x34750d,_0x361476){return _0x277c1c(_0x34750d,_0x361476-0x338);}if(((_0x34cc75=_0x5c795a['speed'])===null||_0x34cc75===void 0x0?void 0x0:_0x34cc75['min'])===undefined||((_0xe777c6=_0x5c795a['speed'])===null||_0xe777c6===void 0x0?void 0x0:_0xe777c6[_0xd35657(0x367,0x3ab)])===undefined||_0x5c795a['speed'][_0xd35657(0x37b,0x309)]===undefined){const _0x1bd279={'array':new Float32Array(_0x5c795a['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number['MIN_VALUE']};for(let _0x38349d=0x0;_0x38349d<_0x5c795a['u'][_0x5e5f5e(0x1e6,0x23d)]['length'];_0x38349d++){_0x1bd279['array'][_0x38349d]=Math[_0x5e5f5e(0x2cc,0x345)](_0x5c795a['u'][_0xd35657(0x37b,0x2e9)][_0x38349d]*_0x5c795a['u'][_0x5e5f5e(0x293,0x23d)][_0x38349d]+_0x5c795a['v'][_0xd35657(0x37b,0x340)][_0x38349d]*_0x5c795a['v'][_0xd35657(0x37b,0x2ec)][_0x38349d]),_0x1bd279[_0xd35657(0x37b,0x359)][_0x38349d]!==0x0&&(_0x1bd279[_0xd35657(0x3fc,0x440)]=Math['min'](_0x1bd279['min'],_0x1bd279['array'][_0x38349d]),_0x1bd279[_0x5e5f5e(0x274,0x229)]=Math['max'](_0x1bd279['max'],_0x1bd279[_0x5e5f5e(0x289,0x23d)][_0x38349d]));}_0x5c795a['speed']=_0x1bd279;}return _0x5c795a;}[_0x27ad09(0x484,0x488)](){var _0xb4f118;const _0x479532=this['scene'];if(!_0x479532)return;const _0x1ecb22=_0x479532[_0x5f10ac(0x44a,0x480)],_0x497aef={};_0x497aef['x']=0x0,_0x497aef['y']=0x0;const _0x324640={};_0x324640['x']=0x0,_0x324640['y']=_0x1ecb22['clientHeight'];const _0x3a8116={};_0x3a8116['x']=_0x1ecb22['clientWidth'],_0x3a8116['y']=0x0;const _0x3a4216={};_0x3a4216['x']=_0x1ecb22['clientWidth'],_0x3a4216['y']=_0x1ecb22['clientHeight'];const _0x149c86=[_0x497aef,_0x324640,_0x3a8116,_0x3a4216];function _0x14183d(_0x322502,_0x5640f9){return _0x27ad09(_0x322502,_0x5640f9- -0xa4);}let _0x3d26c2=0xb4,_0x102eaf=-0xb4,_0x1f6b2d=0x5a,_0x5077d7=-0x5a,_0xae0f03=![];for(const _0x36f449 of _0x149c86){const _0x28628e=_0x479532['camera']['pickEllipsoid'](new Cesium$1['Cartesian2'](_0x36f449['x'],_0x36f449['y']),_0x479532['globe']['ellipsoid']);if(!_0x28628e){_0xae0f03=!![];break;}const _0xa09a1a=_0x479532[_0x14183d(0x380,0x351)]['ellipsoid']['cartesianToCartographic'](_0x28628e),_0x36d738=Cesium$1[_0x14183d(0x3db,0x408)][_0x5f10ac(0x45f,0x46a)](_0xa09a1a['longitude']),_0x49e2d9=Cesium$1[_0x14183d(0x3f7,0x408)]['toDegrees'](_0xa09a1a[_0x5f10ac(0x529,0x54d)]);_0x3d26c2=Math[_0x5f10ac(0x4ae,0x466)](_0x3d26c2,_0x36d738),_0x102eaf=Math['max'](_0x102eaf,_0x36d738),_0x1f6b2d=Math['min'](_0x1f6b2d,_0x49e2d9),_0x5077d7=Math['max'](_0x5077d7,_0x49e2d9);}if(!_0xae0f03){const _0x1e71dd=new Cesium$1[(_0x5f10ac(0x452,0x420))](Math['max'](this['windData']['bounds']['west'],_0x3d26c2),Math['min'](this['windData']['bounds']['east'],_0x102eaf)),_0x4802d3=new Cesium$1['Cartesian2'](Math[_0x14183d(0x269,0x2eb)](this['windData']['bounds']['south'],_0x1f6b2d),Math['min'](this[_0x14183d(0x431,0x3f7)]['bounds'][_0x5f10ac(0x4b9,0x449)],_0x5077d7)),_0x2d1466=(_0x1e71dd['y']-_0x1e71dd['x'])*0.05,_0x401807=(_0x4802d3['y']-_0x4802d3['x'])*0.05;_0x1e71dd['x']=Math['max'](this['windData']['bounds'][_0x14183d(0x48b,0x409)],_0x1e71dd['x']-_0x2d1466),_0x1e71dd['y']=Math['min'](this['windData']['bounds'][_0x5f10ac(0x52f,0x4e3)],_0x1e71dd['y']+_0x2d1466),_0x4802d3['x']=Math[_0x5f10ac(0x419,0x396)](this[_0x14183d(0x414,0x3f7)]['bounds']['south'],_0x4802d3['x']-_0x401807),_0x4802d3['y']=Math['min'](this['windData']['bounds'][_0x14183d(0x3c5,0x38b)],_0x4802d3['y']+_0x401807),this[_0x14183d(0x29d,0x2e2)]['lonRange']=_0x1e71dd,this[_0x14183d(0x28c,0x2e2)]['latRange']=_0x4802d3;const _0x40ab73=this['windData'][_0x5f10ac(0x4a0,0x486)]['east']-this['windData']['bounds'][_0x14183d(0x37f,0x409)],_0xb7e313=this['windData'][_0x14183d(0x3ae,0x372)]['north']-this['windData']['bounds']['south'],_0x5989c7=(_0x1e71dd['y']-_0x1e71dd['x'])/_0x40ab73,_0x522802=(_0x4802d3['y']-_0x4802d3['x'])/_0xb7e313,_0x353120=Math['min'](_0x5989c7,_0x522802),_0x4b7ce3=0x3e8*_0x353120;_0x4b7ce3>0x0&&(this['viewerParameters']['pixelSize']=Math[_0x14183d(0x358,0x2eb)](0x0,Math['min'](0x3e8,_0x4b7ce3)));}function _0x5f10ac(_0x58bb71,_0x7e0f42){return _0x277c1c(_0x7e0f42,_0x58bb71-0x528);}this['viewerParameters']['sceneMode']=this[_0x5f10ac(0x479,0x502)][_0x14183d(0x3d3,0x3c1)],(_0xb4f118=this['particleSystem'])===null||_0xb4f118===void 0x0||_0xb4f118[_0x5f10ac(0x4e6,0x574)](this['viewerParameters']);}[_0x27ad09(0x3e0,0x458)](_0x1143d7,_0x275b85){const {bounds:_0x222cac,width:_0x1ca9d0,height:_0xb97b2,u:_0x46abbc,v:_0xd6a8b4,speed:_0x3bb77e}=this[_0x8bc120(0x172,0x193)],{flipY:_0x376163}=this[_0x1a21bf(-0x1f2,-0x285)];if(_0x1143d7<_0x222cac['west']||_0x1143d7>_0x222cac['east']||_0x275b85<_0x222cac[_0x8bc120(0x135,0x138)]||_0x275b85>_0x222cac['north'])return null;const _0x8e18ab=(_0x1143d7-_0x222cac['west'])/(_0x222cac['east']-_0x222cac[_0x8bc120(0x184,0x134)])*(_0x1ca9d0-0x1);let _0x4659bd=(_0x275b85-_0x222cac['south'])/(_0x222cac['north']-_0x222cac['south'])*(_0xb97b2-0x1);_0x376163&&(_0x4659bd=_0xb97b2-0x1-_0x4659bd);const _0x28e958=Math['floor'](_0x8e18ab),_0x2266dd=Math[_0x1a21bf(-0x1a5,-0x116)](_0x4659bd),_0x39f3d6=Math['floor'](_0x8e18ab),_0x394a50=Math[_0x8bc120(0xfb,0x95)](_0x39f3d6+0x1,_0x1ca9d0-0x1),_0x32e388=Math['floor'](_0x4659bd),_0x14282c=Math[_0x8bc120(0xfb,0x88)](_0x32e388+0x1,_0xb97b2-0x1),_0x50039e=_0x8e18ab-_0x39f3d6,_0x51f745=_0x4659bd-_0x32e388,_0x2432ba=_0x2266dd*_0x1ca9d0+_0x28e958,_0x307812=_0x32e388*_0x1ca9d0+_0x39f3d6,_0x328f9f=_0x32e388*_0x1ca9d0+_0x394a50,_0x13cb2f=_0x14282c*_0x1ca9d0+_0x39f3d6;function _0x1a21bf(_0x292e97,_0x4351de){return _0x27ad09(_0x4351de,_0x292e97- -0x58f);}const _0x36670e=_0x14282c*_0x1ca9d0+_0x394a50,_0xa20924=_0x46abbc[_0x8bc120(0x7a,0x79)][_0x307812],_0x3359d0=_0x46abbc['array'][_0x328f9f],_0x2885e9=_0x46abbc['array'][_0x13cb2f],_0xe61453=_0x46abbc['array'][_0x36670e],_0x118662=(0x1-_0x50039e)*(0x1-_0x51f745)*_0xa20924+_0x50039e*(0x1-_0x51f745)*_0x3359d0+(0x1-_0x50039e)*_0x51f745*_0x2885e9+_0x50039e*_0x51f745*_0xe61453,_0x83596f=_0xd6a8b4['array'][_0x307812],_0x5b9e38=_0xd6a8b4['array'][_0x328f9f],_0x69c1ae=_0xd6a8b4['array'][_0x13cb2f],_0x4f61c9=_0xd6a8b4['array'][_0x36670e],_0x329b6e=(0x1-_0x50039e)*(0x1-_0x51f745)*_0x83596f+_0x50039e*(0x1-_0x51f745)*_0x5b9e38+(0x1-_0x50039e)*_0x51f745*_0x69c1ae+_0x50039e*_0x51f745*_0x4f61c9,_0x4b9162=Math[_0x1a21bf(-0xe4,-0xcd)](_0x118662*_0x118662+_0x329b6e*_0x329b6e),_0x1ef7ea={};_0x1ef7ea['u']=_0x46abbc[_0x1a21bf(-0x1ec,-0x192)][_0x2432ba],_0x1ef7ea['v']=_0xd6a8b4[_0x8bc120(0x7a,0x109)][_0x2432ba],_0x1ef7ea['speed']=_0x3bb77e['array'][_0x2432ba];const _0x14eda2={};function _0x8bc120(_0x437363,_0x52c57f){return _0x277c1c(_0x52c57f,_0x437363-0x175);}_0x14eda2['u']=_0x118662,_0x14eda2['v']=_0x329b6e,_0x14eda2[_0x8bc120(0xde,0x132)]=_0x4b9162;const _0x1cae21={};return _0x1cae21[_0x8bc120(0xf0,0x79)]=_0x1ef7ea,_0x1cae21[_0x1a21bf(-0x144,-0x149)]=_0x14eda2,_0x1cae21;}}mars3d__namespace[_0x277c1c(-0xcf,-0x108)][_0x27ad09(0x44c,0x442)]('wind',WindLayer),mars3d__namespace['layer'][_0x277c1c(-0x35,-0xaa)]=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this['lat']=null,this['tlng']=null,this['tlat']=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x58ebd1 in this){delete this[_0x58ebd1];}}}class CanvasWindField{constructor(_0xa8563a){function _0x1a181e(_0x2f611b,_0x10f4cd){return _0x27ad09(_0x2f611b,_0x10f4cd- -0x432);}this[_0x1a181e(0xf7,0x75)](_0xa8563a);}get[_0x27ad09(0x4db,0x470)](){return this['_speedRate'];}set['speedRate'](_0x1c8610){this[_0x3ff3c4(-0x15a,-0x1af)]=(0x64-(_0x1c8610>0x63?0x63:_0x1c8610))*0x64;function _0x3ff3c4(_0x5cc1ab,_0x49c267){return _0x27ad09(_0x49c267,_0x5cc1ab- -0x577);}function _0x370e48(_0x153f55,_0x5b45f9){return _0x27ad09(_0x5b45f9,_0x153f55- -0xac);}this['_calc_speedRate']=[(this[_0x370e48(0x2ef,0x371)]-this['xmin'])/this[_0x3ff3c4(-0x15a,-0x128)],(this[_0x3ff3c4(-0x136,-0x180)]-this['ymin'])/this[_0x3ff3c4(-0x15a,-0x14e)]];}get[_0x277c1c(-0x105,-0xa1)](){return this['_maxAge'];}set['maxAge'](_0x579827){this['_maxAge']=_0x579827;}['setOptions'](_0x4f23fc){this[_0x3c2d3d(-0x29b,-0x225)]=_0x4f23fc;function _0x3c2d3d(_0x3fd711,_0x559552){return _0x277c1c(_0x3fd711,_0x559552- -0x124);}this[_0x3c2d3d(-0x155,-0x1c5)]=_0x4f23fc[_0x259eca(0x2df,0x2c0)]||0x78;function _0x259eca(_0x3d988c,_0x52cc35){return _0x277c1c(_0x52cc35,_0x3d988c-0x380);}this['speedRate']=_0x4f23fc['speedRate']||0x32,this['particles']=[];const _0x421900=_0x4f23fc['particlesNumber']||0x1000;for(let _0x30b7b9=0x0;_0x30b7b9<_0x421900;_0x30b7b9++){const _0x3114ab=this[_0x3c2d3d(-0x193,-0x1c7)](new CanvasParticle());this[_0x259eca(0x293,0x2f3)][_0x259eca(0x281,0x24d)](_0x3114ab);}}['setDate'](_0x4b3fd7){this[_0xe03ac6(0x39c,0x3ae)]=_0x4b3fd7['rows'],this[_0x27d1a3(-0x24a,-0x210)]=_0x4b3fd7[_0x27d1a3(-0x1a1,-0x210)],this[_0x27d1a3(-0x1b2,-0x20f)]=_0x4b3fd7[_0x27d1a3(-0x1ae,-0x20f)],this[_0xe03ac6(0x431,0x39d)]=_0x4b3fd7['xmax'],this['ymin']=_0x4b3fd7[_0x27d1a3(-0x19c,-0x185)],this[_0x27d1a3(-0x1f5,-0x18b)]=_0x4b3fd7['ymax'],this[_0x27d1a3(-0x15c,-0x17d)]=[];const _0x3afd6e=_0x4b3fd7['udata'];function _0xe03ac6(_0x4d5cd6,_0xd7f2cb){return _0x27ad09(_0x4d5cd6,_0xd7f2cb-0x2);}const _0x5abc54=_0x4b3fd7['vdata'];let _0x2bdd8c=![];_0x3afd6e[_0xe03ac6(0x3ac,0x43b)]===this['rows']&&_0x3afd6e[0x0]['length']===this[_0xe03ac6(0x352,0x3be)]&&(_0x2bdd8c=!![]);let _0x3779aa=0x0,_0x2fa8d3=null,_0x1f9a51=null;for(let _0x5bc4e4=0x0;_0x5bc4e4<this['rows'];_0x5bc4e4++){_0x2fa8d3=[];for(let _0x37a347=0x0;_0x37a347<this[_0xe03ac6(0x3a2,0x3be)];_0x37a347++,_0x3779aa++){_0x2bdd8c?_0x1f9a51=this['_calcUV'](_0x3afd6e[_0x5bc4e4][_0x37a347],_0x5abc54[_0x5bc4e4][_0x37a347]):_0x1f9a51=this[_0x27d1a3(-0x224,-0x1b1)](_0x3afd6e[_0x3779aa],_0x5abc54[_0x3779aa]),_0x2fa8d3[_0xe03ac6(0x3fd,0x3a1)](_0x1f9a51);}this['grid']['push'](_0x2fa8d3);}function _0x27d1a3(_0x12c7e6,_0xe798d0){return _0x27ad09(_0x12c7e6,_0xe798d0- -0x5cc);}!this[_0xe03ac6(0x349,0x39f)]['flipY']&&this['grid']['reverse']();}[_0x27ad09(0x433,0x42a)](){delete this[_0x4f62fa(0x461,0x42a)],delete this['cols'],delete this['xmin'];function _0x212abd(_0x20b5b3,_0x1e0adc){return _0x277c1c(_0x1e0adc,_0x20b5b3-0x2ae);}function _0x4f62fa(_0xadd23a,_0x3d55af){return _0x277c1c(_0xadd23a,_0x3d55af-0x51c);}delete this[_0x4f62fa(0x479,0x419)],delete this['ymin'],delete this[_0x212abd(0x251,0x216)],delete this[_0x4f62fa(0x477,0x4cd)],delete this['particles'];}[_0x27ad09(0x440,0x3f9)](_0xcff676,_0x3a053d){const _0x326e9e=(_0xcff676-this['xmin'])/(this['xmax']-this['xmin'])*(this['cols']-0x1),_0x3b602c=(this[_0x487ec6(0x1ce,0x189)]-_0x3a053d)/(this['ymax']-this['ymin'])*(this['rows']-0x1);function _0x487ec6(_0x463c7b,_0x1d17c4){return _0x27ad09(_0x1d17c4,_0x463c7b- -0x273);}return[_0x326e9e,_0x3b602c];}['getUVByXY'](_0x41f4f8,_0x14a507){if(_0x41f4f8<0x0||_0x41f4f8>=this['cols']||_0x14a507>=this['rows'])return[0x0,0x0,0x0];const _0x5e4d40=Math['floor'](_0x41f4f8);function _0x5546b3(_0x3695e2,_0xebbc1c){return _0x27ad09(_0x3695e2,_0xebbc1c- -0xd8);}const _0x4721bb=Math['floor'](_0x14a507);function _0x5050bc(_0x58dea0,_0x18160b){return _0x277c1c(_0x18160b,_0x58dea0-0x5fc);}if(_0x5e4d40===_0x41f4f8&&_0x4721bb===_0x14a507)return this[_0x5050bc(0x5ad,0x5fa)][_0x14a507][_0x41f4f8];const _0x2b2b22=_0x5e4d40+0x1,_0x223b69=_0x4721bb+0x1,_0x1027de=this[_0x5546b3(0x429,0x3ba)](_0x5e4d40,_0x4721bb),_0x44e795=this['getUVByXY'](_0x2b2b22,_0x4721bb),_0x421e5b=this[_0x5546b3(0x3b0,0x3ba)](_0x5e4d40,_0x223b69),_0x185d9c=this[_0x5546b3(0x421,0x3ba)](_0x2b2b22,_0x223b69);let _0x51f2c5=null;try{_0x51f2c5=this[_0x5050bc(0x594,0x536)](_0x41f4f8-_0x5e4d40,_0x14a507-_0x4721bb,_0x1027de,_0x44e795,_0x421e5b,_0x185d9c);}catch(_0x57fb00){console[_0x5050bc(0x5b8,0x5c8)](_0x41f4f8,_0x14a507);}return _0x51f2c5;}[_0x277c1c(-0x2c,-0x68)](_0x1c484f,_0x3ad11f,_0x1ea46f,_0x758f40,_0x4cd1e3,_0xb85206){const _0x996e5e=0x1-_0x1c484f,_0x1bd4d8=0x1-_0x3ad11f,_0x5711b2=_0x996e5e*_0x1bd4d8,_0x376e84=_0x1c484f*_0x1bd4d8,_0x235b5e=_0x996e5e*_0x3ad11f,_0x2cd3aa=_0x1c484f*_0x3ad11f,_0x3fc95f=_0x1ea46f[0x0]*_0x5711b2+_0x758f40[0x0]*_0x376e84+_0x4cd1e3[0x0]*_0x235b5e+_0xb85206[0x0]*_0x2cd3aa;function _0x39a419(_0x52e585,_0x187d56){return _0x277c1c(_0x187d56,_0x52e585- -0x13b);}const _0x382641=_0x1ea46f[0x1]*_0x5711b2+_0x758f40[0x1]*_0x376e84+_0x4cd1e3[0x1]*_0x235b5e+_0xb85206[0x1]*_0x2cd3aa;return this[_0x39a419(-0x1be,-0x1cc)](_0x3fc95f,_0x382641);}['_calcUV'](_0x53db79,_0x14b968){function _0x68fd39(_0x3e9987,_0x5601e0){return _0x27ad09(_0x5601e0,_0x3e9987- -0x578);}return[+_0x53db79,+_0x14b968,Math[_0x68fd39(-0xcd,-0x152)](_0x53db79*_0x53db79+_0x14b968*_0x14b968)];}[_0x277c1c(0x2a,-0xa)](_0x195ee0,_0x15522c){if(!this[_0xfa742d(0x243,0x1d0)](_0x195ee0,_0x15522c))return null;function _0xfa742d(_0x41bc23,_0x4e529c){return _0x277c1c(_0x41bc23,_0x4e529c-0x204);}const _0xb27ad7=this[_0xfa742d(0xf0,0x15f)](_0x195ee0,_0x15522c);function _0x4d7c90(_0x63a0a,_0x4f6908){return _0x277c1c(_0x4f6908,_0x63a0a-0x5b);}const _0x98b40e=this[_0x4d7c90(0x4f,0xac)](_0xb27ad7[0x0],_0xb27ad7[0x1]);return _0x98b40e;}['isInExtent'](_0xb99dbc,_0x13dcb5){function _0x7ce749(_0x23a601,_0x2ad53d){return _0x27ad09(_0x2ad53d,_0x23a601- -0x3b1);}function _0xceb54e(_0x3cad97,_0x4c918b){return _0x27ad09(_0x3cad97,_0x4c918b- -0xe2);}return _0xb99dbc>=this[_0xceb54e(0x358,0x2db)]&&_0xb99dbc<=this[_0x7ce749(-0x16,0x3)]&&_0x13dcb5>=this['ymin']&&_0x13dcb5<=this[_0xceb54e(0x2d5,0x35f)]?!![]:![];}[_0x277c1c(-0x13b,-0xe0)](){function _0x313711(_0x5dc0b0,_0x31f652){return _0x27ad09(_0x5dc0b0,_0x31f652- -0x114);}const _0x3b9a51=fRandomByfloat(this[_0x313711(0x24c,0x2a9)],this['xmax']),_0x1f147c=fRandomByfloat(this['ymin'],this['ymax']),_0x502ffd={};_0x502ffd['lat']=_0x1f147c;function _0x43f199(_0x1b798b,_0x423452){return _0x277c1c(_0x1b798b,_0x423452-0x409);}return _0x502ffd[_0x43f199(0x38d,0x354)]=_0x3b9a51,_0x502ffd;}['getParticles'](){let _0x28bafe,_0x21a7d1,_0x40e692;function _0xad565c(_0xfcdb09,_0x2f4967){return _0x27ad09(_0xfcdb09,_0x2f4967- -0x525);}for(let _0x2650c0=0x0,_0x450fec=this[_0x37952c(-0x19a,-0x16d)]['length'];_0x2650c0<_0x450fec;_0x2650c0++){let _0x10e066=this['particles'][_0x2650c0];_0x10e066['age']<=0x0&&(_0x10e066=this['_randomParticle'](_0x10e066));if(_0x10e066['age']>0x0){const _0x4321d7=_0x10e066[_0xad565c(-0xb5,-0xa1)],_0x49e665=_0x10e066[_0xad565c(-0xf1,-0x7d)];_0x40e692=this[_0xad565c(-0x71,-0x91)](_0x4321d7,_0x49e665),_0x40e692?(_0x28bafe=_0x4321d7+this[_0x37952c(-0x48,-0xa4)][0x0]*_0x40e692[0x0],_0x21a7d1=_0x49e665+this['_calc_speedRate'][0x1]*_0x40e692[0x1],_0x10e066['lng']=_0x4321d7,_0x10e066['lat']=_0x49e665,_0x10e066['tlng']=_0x28bafe,_0x10e066[_0xad565c(-0xfc,-0x7d)]=_0x21a7d1,_0x10e066['speed']=_0x40e692[0x2],_0x10e066[_0xad565c(-0x1e6,-0x189)]--):_0x10e066['age']=0x0;}}function _0x37952c(_0x383121,_0x17116c){return _0x27ad09(_0x383121,_0x17116c- -0x51e);}return this[_0x37952c(-0x1fb,-0x16d)];}[_0x27ad09(0x36e,0x3fb)](_0x42175c){let _0x5a611c,_0x36fa97;for(let _0x2ff7f6=0x0;_0x2ff7f6<0x1e;_0x2ff7f6++){_0x5a611c=this['getRandomLatLng'](),_0x36fa97=this['getUVByPoint'](_0x5a611c['lng'],_0x5a611c[_0x34f6b6(-0x2d2,-0x346)]);if(_0x36fa97&&_0x36fa97[0x2]>0x0)break;}if(!_0x36fa97)return _0x42175c;function _0x34f6b6(_0x4788fd,_0x4a20bf){return _0x27ad09(_0x4a20bf,_0x4788fd- -0x65c);}const _0x4087af=_0x5a611c['lng']+this['_calc_speedRate'][0x0]*_0x36fa97[0x0],_0x69be5e=_0x5a611c[_0x34f6b6(-0x2d2,-0x289)]+this['_calc_speedRate'][0x1]*_0x36fa97[0x1];_0x42175c['lng']=_0x5a611c[_0x32017a(0x2aa,0x235)],_0x42175c['lat']=_0x5a611c[_0x32017a(0x24b,0x1c7)],_0x42175c['tlng']=_0x4087af;function _0x32017a(_0x1d6ad0,_0x5a9306){return _0x27ad09(_0x5a9306,_0x1d6ad0- -0x13f);}return _0x42175c['tlat']=_0x69be5e,_0x42175c[_0x32017a(0x25d,0x28a)]=Math['round'](0xa+Math[_0x34f6b6(-0x1ba,-0x230)]()*this['maxAge']),_0x42175c['speed']=_0x36fa97[0x2],_0x42175c;}[_0x277c1c(-0x17c,-0xf1)](){for(const _0x5e69d1 in this){delete this[_0x5e69d1];}}}function fRandomByfloat(_0x5a30fe,_0x940f34){function _0x3acd8f(_0x569b47,_0x5b67ed){return _0x277c1c(_0x569b47,_0x5b67ed-0x43f);}return _0x5a30fe+Math[_0x3acd8f(0x3b6,0x443)]()*(_0x940f34-_0x5a30fe);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x277c1c(-0x18c,-0x107)];class CanvasWindLayer extends BaseLayer{constructor(_0x4f198e={}){function _0x36d10a(_0x53dc91,_0x3afd45){return _0x277c1c(_0x53dc91,_0x3afd45-0x27c);}super(_0x4f198e);function _0x22c82a(_0x27ee28,_0x52ce98){return _0x27ad09(_0x52ce98,_0x27ee28- -0x472);}this[_0x22c82a(-0x85,-0x109)](_0x4f198e),this['canvas']=null,_0x4f198e[_0x22c82a(-0x4b,-0x49)]&&_0x4f198e['steps']&&(this['_colorRamp']=new mars3d__namespace['ColorRamp'](_0x4f198e));}['_setOptionsHook'](_0x588313,_0x1812ea){this[_0x15df80(0x384,0x372)]=0x3e8/(_0x588313[_0x15df80(0x3c1,0x43f)]||0xa),this['_pointerEvents']=this['options'][_0x319908(0x16d,0x192)]??![],this[_0x15df80(0x42d,0x492)]=_0x588313['color']||_0x15df80(0x40d,0x3d1),this['lineWidth']=_0x588313[_0x319908(0xd1,0x114)]||0x1,this['fixedHeight']=_0x588313[_0x319908(0x157,0x102)]??0x0;function _0x15df80(_0x2d8623,_0x2b51a7){return _0x27ad09(_0x2b51a7,_0x2d8623- -0x45);}this['flipY']=_0x588313[_0x319908(0xf7,0xe9)]??![];function _0x319908(_0x3bfefb,_0x41e42a){return _0x277c1c(_0x41e42a,_0x3bfefb-0x19f);}this['windField']&&this['windField']['setOptions'](_0x588313);}get[_0x27ad09(0x336,0x3b6)](){return this['canvas'];}get['canvasWidth'](){function _0xc1cea1(_0x133dca,_0x52bf32){return _0x277c1c(_0x52bf32,_0x133dca- -0x17e);}return this['_map']['scene']['canvas'][_0xc1cea1(-0x1d4,-0x14e)];}get[_0x27ad09(0x42a,0x411)](){function _0x131fc5(_0x355a3f,_0x5c7487){return _0x277c1c(_0x355a3f,_0x5c7487-0x6);}return this['_map'][_0x131fc5(-0x10a,-0xa9)]['canvas']['clientHeight'];}get[_0x27ad09(0x4f0,0x46c)](){function _0x5dd128(_0x399e0d,_0x5ac433){return _0x277c1c(_0x5ac433,_0x399e0d-0x348);}return this[_0x5dd128(0x338,0x2fb)];}set[_0x27ad09(0x49c,0x46c)](_0xa21657){function _0x4cab55(_0x1fc5be,_0x34ffc2){return _0x277c1c(_0x1fc5be,_0x34ffc2-0x5ca);}function _0x2e2f1e(_0x118e4a,_0x1fcf13){return _0x277c1c(_0x1fcf13,_0x118e4a-0x1b2);}this[_0x4cab55(0x5ce,0x5ba)]=_0xa21657;if(!this['canvas'])return;_0xa21657?this[_0x4cab55(0x4d9,0x4ec)][_0x4cab55(0x529,0x4f6)][_0x4cab55(0x522,0x4be)]='all':this['canvas']['style']['pointer-events']='none';}get['particlesNumber'](){function _0x3c18b9(_0x160704,_0x31faa7){return _0x27ad09(_0x160704,_0x31faa7- -0xf);}return this['options'][_0x3c18b9(0x432,0x42d)];}set['particlesNumber'](_0x38bec6){this[_0x1c9803(-0x16c,-0x115)]['particlesNumber']=_0x38bec6,clearTimeout(this[_0x1c9803(-0xcf,-0x49)]);function _0x1f7010(_0x1545e1,_0x309de1){return _0x277c1c(_0x309de1,_0x1545e1- -0x22);}function _0x1c9803(_0x14d842,_0x52e864){return _0x277c1c(_0x14d842,_0x52e864- -0x14);}this[_0x1c9803(0xb,-0x49)]=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x51123e(_0x41c1d0,_0x1684fa){return _0x27ad09(_0x1684fa,_0x41c1d0- -0x5cd);}return this[_0x51123e(-0x230,-0x1f8)]['speedRate'];}set[_0x27ad09(0x4b7,0x470)](_0x57e45a){this['options']['speedRate']=_0x57e45a;function _0x300aed(_0x540c9b,_0x226692){return _0x277c1c(_0x226692,_0x540c9b- -0x74);}this['windField']&&(this[_0x300aed(-0xb2,-0x10e)]['speedRate']=_0x57e45a);}get[_0x277c1c(-0x8e,-0xa1)](){return this['options']['maxAge'];}set['maxAge'](_0x207426){function _0x536756(_0x18f18f,_0xb39e48){return _0x27ad09(_0xb39e48,_0x18f18f- -0x47);}function _0x257fde(_0x1f2dda,_0x35b6fe){return _0x277c1c(_0x1f2dda,_0x35b6fe- -0x40);}this[_0x536756(0x356,0x305)]['maxAge']=_0x207426,this['windField']&&(this[_0x536756(0x419,0x443)]['maxAge']=_0x207426);}get[_0x27ad09(0x3b8,0x3e0)](){return this['windData'];}set['data'](_0xb3410b){this['setData'](_0xb3410b);}get['rectangle'](){let _0x503c3a=this[_0xeb9a27(-0x10c,-0x141)]['xmin'],_0x30ab44=this['windData']['xmax'],_0x214742=this['windData'][_0x1595ca(0x103,0xce)],_0x33e594=this[_0x1595ca(0x157,0xce)][_0xeb9a27(-0x1e7,-0x19b)];_0x30ab44>=0x167&&_0x503c3a===0x0&&(_0x503c3a=-0xb4,_0x30ab44=0xb4);function _0x1595ca(_0x3ca93d,_0x25380c){return _0x277c1c(_0x25380c,_0x3ca93d-0x15a);}_0x503c3a=Math['max'](_0x503c3a,-0xb4),_0x30ab44=Math['min'](_0x30ab44,0xb4),_0x214742=Math['max'](_0x214742,-0x5a),_0x33e594=Math[_0x1595ca(0xe0,0x139)](_0x33e594,0x5a);function _0xeb9a27(_0x36fadf,_0x2f2857){return _0x277c1c(_0x36fadf,_0x2f2857- -0x13e);}return Cesium['Rectangle'][_0x1595ca(0x113,0x123)](_0x503c3a,_0x214742,_0x30ab44,_0x33e594);}[_0x27ad09(0x3ff,0x455)](_0xdbf3dc){function _0x59fa45(_0x3e86fa,_0x4fa081){return _0x27ad09(_0x4fa081,_0x3e86fa- -0x1d);}function _0x504b8c(_0x5a959e,_0x944c60){return _0x277c1c(_0x944c60,_0x5a959e- -0xdf);}_0xdbf3dc?this['_addedHook']():(this[_0x504b8c(-0xe2,-0x12c)]&&(this['options'][_0x59fa45(0x3c3,0x3bc)]=this[_0x59fa45(0x47e,0x4af)]),this['_removedHook']());}['_mountedHook'](){function _0xea320e(_0x399168,_0x424277){return _0x27ad09(_0x399168,_0x424277- -0x166);}function _0x53d29b(_0x19dec3,_0x4553d7){return _0x27ad09(_0x19dec3,_0x4553d7- -0x14);}this[_0xea320e(0x1b8,0x237)]['worker']?this[_0x53d29b(0x34d,0x3d0)]():this[_0x53d29b(0x472,0x44c)]=new CanvasWindField(this[_0x53d29b(0x339,0x389)]);}['_addedHook'](){this[_0x1063e8(0x207,0x1e5)]=this[_0x1063e8(0x238,0x275)]();function _0x49cf35(_0x123c65,_0x258600){return _0x277c1c(_0x258600,_0x123c65-0x97);}const _0x1147b9={};_0x1147b9[_0x49cf35(0x26,0x3c)]=!![],this['canvasContext']=this[_0x1063e8(0x207,0x257)][_0x1063e8(0x1da,0x21c)]('2d',_0x1147b9),this[_0x49cf35(0x2c,0xac)]();function _0x1063e8(_0x27938f,_0x331a17){return _0x27ad09(_0x331a17,_0x27938f- -0x1b9);}this['options']['data']&&this[_0x1063e8(0x2a6,0x26d)](this['options'][_0x49cf35(-0x27,-0x3a)]);}['_removedHook'](){this[_0x13c5c8(0x474,0x3f1)]();function _0x29b68a(_0x360d83,_0x3444b5){return _0x277c1c(_0x3444b5,_0x360d83-0x2e6);}function _0x13c5c8(_0x5a2197,_0x17dd7c){return _0x277c1c(_0x17dd7c,_0x5a2197-0x4e8);}this[_0x29b68a(0x276,0x2b0)](),this[_0x13c5c8(0x40a,0x3c0)]&&(this[_0x29b68a(0x20e,0x17c)][_0x29b68a(0x2be,0x329)]['removeChild'](this['canvas']),delete this['canvas']);}['_createCanvas'](){const _0x16cd3b=mars3d__namespace['DomUtil'][_0x6c33e1(0x511,0x4cc)](_0x462a1b(0x323,0x396),'mars3d-canvasWind',this['_map'][_0x6c33e1(0x530,0x4ef)]);_0x16cd3b[_0x462a1b(0x417,0x3a0)][_0x6c33e1(0x4d0,0x4da)]='absolute',_0x16cd3b['style']['top']='0px',_0x16cd3b['style'][_0x6c33e1(0x43d,0x432)]=_0x6c33e1(0x4c5,0x4f2),_0x16cd3b['style'][_0x6c33e1(0x497,0x413)]=this['_map']['scene'][_0x462a1b(0x42a,0x396)]['clientWidth']+'px',_0x16cd3b[_0x6c33e1(0x3e5,0x443)][_0x462a1b(0x3c5,0x3d2)]=this[_0x462a1b(0x345,0x39c)]['scene']['canvas']['clientHeight']+'px',_0x16cd3b[_0x462a1b(0x42e,0x3a0)]['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x16cd3b['style'][_0x462a1b(0x379,0x39b)]=this[_0x462a1b(0x316,0x373)]['zIndex']??0x9;function _0x6c33e1(_0x4e1300,_0x5b374d){return _0x27ad09(_0x4e1300,_0x5b374d-0x79);}function _0x462a1b(_0x52bdff,_0x245418){return _0x277c1c(_0x52bdff,_0x245418-0x474);}return _0x16cd3b[_0x6c33e1(0x465,0x413)]=this['_map']['scene']['canvas']['clientWidth'],_0x16cd3b['height']=this['_map'][_0x462a1b(0x36c,0x3c5)]['canvas'][_0x462a1b(0x421,0x3c2)],_0x16cd3b;}['resize'](){function _0x8e8a34(_0x52fca7,_0x5a4784){return _0x27ad09(_0x52fca7,_0x5a4784- -0x160);}function _0x139dcc(_0x5efde6,_0x1e287e){return _0x277c1c(_0x5efde6,_0x1e287e-0x577);}this[_0x139dcc(0x526,0x499)]&&(this['canvas']['style']['width']=this['_map']['scene']['canvas'][_0x8e8a34(0x2cc,0x2e8)]+'px',this[_0x8e8a34(0x24e,0x260)]['style'][_0x8e8a34(0x213,0x29c)]=this['_map']['scene']['canvas']['clientHeight']+'px',this['canvas']['width']=this['_map'][_0x139dcc(0x52b,0x4c8)]['canvas']['clientWidth'],this['canvas']['height']=this['_map']['scene']['canvas']['clientHeight']);}['bindEvent'](){function _0x3877fb(_0xc0ac55,_0x356566){return _0x27ad09(_0xc0ac55,_0x356566- -0x598);}const _0x142abf=this;let _0x3c49bc=Date['now']();(function _0x3e9384(){function _0x307590(_0x3db8ed,_0x218607){return _0x478d(_0x3db8ed-0x1bb,_0x218607);}function _0x345ef9(_0xbd13f3,_0x59fcfe){return _0x478d(_0x59fcfe-0xf8,_0xbd13f3);}if(_0x142abf['isDestroy'])return;_0x142abf[_0x345ef9(0x1eb,0x238)]=window['requestAnimationFrame'](_0x3e9384);if(_0x142abf['show']&&_0x142abf[_0x345ef9(0x286,0x2d6)]){const _0x3ce8fd=Date['now'](),_0x3d8631=_0x3ce8fd-_0x3c49bc;_0x3d8631>_0x142abf[_0x307590(0x302,0x337)]&&(_0x3c49bc=_0x3ce8fd-_0x3d8631%_0x142abf['frameTime'],_0x142abf['update']());}}());function _0x212b8f(_0x575a6b,_0x5826d9){return _0x277c1c(_0x575a6b,_0x5826d9-0x11e);}window['addEventListener']('resize',this[_0x212b8f(0x44,0xba)]['bind'](this),![]),this[_0x3877fb(-0x1b9,-0x1b2)]=![],this['mouse_move']=![],this['options'][_0x212b8f(-0x3a,0x14)]&&(this['_map']['on'](mars3d__namespace['EventType'][_0x212b8f(0xb0,0x6b)],this['_onMapWhellEvent'],this),this[_0x212b8f(0x66,0x46)]['on'](mars3d__namespace[_0x212b8f(0xaf,0x80)][_0x212b8f(0x99,0x5f)],this['_onMouseDownEvent'],this),this[_0x212b8f(0x16,0x46)]['on'](mars3d__namespace['EventType']['mouseUp'],this[_0x212b8f(-0x47,0x3f)],this));}['unbindEvent'](){window[_0x1e0aa7(0x4d6,0x55c)](this['_animateFrame']);function _0x1e0aa7(_0x373923,_0x5d1bc8){return _0x27ad09(_0x373923,_0x5d1bc8-0xf8);}function _0x1a0081(_0x3bf5cf,_0x9b8e49){return _0x27ad09(_0x9b8e49,_0x3bf5cf-0x39);}delete this['_animateFrame'],window['removeEventListener']('resize',this[_0x1e0aa7(0x519,0x532)]),this[_0x1a0081(0x3d6,0x378)]['mouseHidden']&&(this[_0x1a0081(0x3ff,0x3a3)]['off'](mars3d__namespace['EventType'][_0x1a0081(0x424,0x412)],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace[_0x1a0081(0x439,0x3d6)]['mouseDown'],this['_onMouseDownEvent'],this),this[_0x1e0aa7(0x538,0x4be)]['off'](mars3d__namespace[_0x1e0aa7(0x51a,0x4f8)][_0x1e0aa7(0x4e8,0x563)],this['_onMouseUpEvent'],this),this[_0x1a0081(0x3ff,0x376)][_0x1e0aa7(0x4d0,0x533)](mars3d__namespace[_0x1a0081(0x439,0x4c3)]['mouseMove'],this[_0x1a0081(0x3e7,0x40c)],this));}[_0x27ad09(0x508,0x4a4)](_0x4f61d3){function _0x47839b(_0x33b0eb,_0x4464d4){return _0x277c1c(_0x33b0eb,_0x4464d4-0x50f);}clearTimeout(this[_0x47839b(0x416,0x415)]);function _0x2e4f62(_0x472b00,_0x428a92){return _0x27ad09(_0x472b00,_0x428a92-0xe2);}if(!this['show']||!this[_0x2e4f62(0x44d,0x4a2)])return;this['canvas'][_0x47839b(0x4c1,0x43b)][_0x2e4f62(0x556,0x528)]='hidden',this['refreshTimer']=setTimeout(()=>{function _0x44f22e(_0x3b2cf6,_0x38e629){return _0x47839b(_0x3b2cf6,_0x38e629- -0x24f);}if(!this[_0x575be8(0x1a6,0x1ec)])return;this['redraw']();function _0x575be8(_0x81e77c,_0x18876b){return _0x47839b(_0x81e77c,_0x18876b- -0x2aa);}this[_0x575be8(0xf9,0x187)]['style']['visibility']=_0x575be8(0x185,0x1d0);},0xc8);}['_onMouseDownEvent'](_0x5c004c){this[_0x25402c(-0x267,-0x23d)]=!![],this[_0x1c5298(-0x298,-0x25a)][_0x25402c(-0x212,-0x232)](mars3d__namespace[_0x1c5298(-0x28f,-0x220)]['mouseMove'],this[_0x1c5298(-0x27c,-0x272)],this);function _0x1c5298(_0x5cd6ca,_0x5de811){return _0x27ad09(_0x5cd6ca,_0x5de811- -0x620);}function _0x25402c(_0x5b1e72,_0x46fd4d){return _0x277c1c(_0x46fd4d,_0x5b1e72- -0x1af);}this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}[_0x27ad09(0x3b2,0x3ae)](_0x2b5303){function _0x249542(_0x1c3270,_0x1abd5c){return _0x277c1c(_0x1abd5c,_0x1c3270-0x360);}if(!this['show']||!this['canvas'])return;this[_0x249542(0x2a8,0x293)]&&(this['canvas']['style']['visibility']='hidden',this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x1d4324){function _0x2278af(_0x1ef5f1,_0x4b3b76){return _0x277c1c(_0x4b3b76,_0x1ef5f1-0xca);}if(!this['show']||!this['canvas'])return;this[_0x5c3d8e(0x34a,0x363)]['off'](mars3d__namespace['EventType'][_0x2278af(0x7d,0x6a)],this[_0x2278af(-0x26,-0x89)],this);function _0x5c3d8e(_0x409822,_0x47915c){return _0x277c1c(_0x47915c,_0x409822-0x422);}this['mouse_down']&&this['mouse_move']&&this['redraw'](),this[_0x5c3d8e(0x344,0x327)][_0x2278af(-0xa,-0x60)]['visibility']='visible',this['mouse_down']=![],this['mouse_move']=![];}['setData'](_0x272137){this[_0x2d390f(0x3eb,0x39f)](),this[_0x2d390f(0x45c,0x4b2)]=_0x272137;function _0x43e202(_0x5047cf,_0x1cbb19){return _0x277c1c(_0x1cbb19,_0x5047cf- -0x65);}this['windField'][_0x43e202(-0x12a,-0x127)](_0x272137);function _0x2d390f(_0x18e88b,_0x10bf22){return _0x277c1c(_0x10bf22,_0x18e88b-0x45f);}this[_0x43e202(-0x78,-0x1d)]();}['redraw'](){if(!this['show'])return;this[_0x137345(-0x148,-0xb6)]['setOptions'](this['options']);function _0x137345(_0x385e3,_0x2c0432){return _0x27ad09(_0x2c0432,_0x385e3- -0x5a8);}function _0x2e1d0e(_0x10526a,_0x4f4e5b){return _0x277c1c(_0x10526a,_0x4f4e5b- -0x31);}this[_0x2e1d0e(-0xdd,-0x144)]();}['update'](){function _0x584e7f(_0x3bab6d,_0x2dce94){return _0x27ad09(_0x2dce94,_0x3bab6d-0x105);}if(this[_0x584e7f(0x56c,0x5a1)])return;function _0x59b0f2(_0x57e49c,_0x18ae60){return _0x277c1c(_0x18ae60,_0x57e49c-0x10);}this[_0x59b0f2(-0x27,-0x80)]=!![];if(this[_0x584e7f(0x59f,0x62b)])this[_0x59b0f2(-0x2e,-0x3e)][_0x59b0f2(-0x103,-0xb0)]();else{const _0x46d7ba=this['windField'][_0x59b0f2(-0xb1,-0xba)]();this['_drawLines'](_0x46d7ba);}this[_0x59b0f2(-0x27,0x22)]=![];}[_0x277c1c(-0x111,-0xca)](_0x5d0938){this['_canvasParticles']=_0x5d0938;function _0x55b0b7(_0x2fee72,_0x115152){return _0x277c1c(_0x2fee72,_0x115152-0x4dd);}this['canvasContext'][_0x29d786(0x494,0x513)]='destination-in',this[_0x29d786(0x47c,0x50d)][_0x29d786(0x4e3,0x4ef)](0x0,0x0,this[_0x29d786(0x4ee,0x4b8)],this['canvasHeight']),this['canvasContext'][_0x55b0b7(0x4a2,0x427)]=_0x55b0b7(0x450,0x40a),this['canvasContext']['globalAlpha']=0.9;const _0x52d61f=this['_map'][_0x55b0b7(0x482,0x42e)]['mode']!==Cesium[_0x55b0b7(0x450,0x4a1)]['SCENE3D'],_0x2a956b=this[_0x29d786(0x463,0x4b8)]*0.25;function _0x29d786(_0x375557,_0x1c2207){return _0x27ad09(_0x375557,_0x1c2207-0x12b);}if(this['_colorRamp'])for(let _0x4d8e29=0x0,_0x46d4f7=_0x5d0938['length'];_0x4d8e29<_0x46d4f7;_0x4d8e29++){const _0x1bbd0d=_0x5d0938[_0x4d8e29],_0x4c5771=this['_tomap'](_0x1bbd0d,_0x1bbd0d['lng'],_0x1bbd0d[_0x29d786(0x451,0x4b5)],_0x1bbd0d[_0x29d786(0x513,0x59f)]),_0x5c43f4=this['_tomap'](_0x1bbd0d,_0x1bbd0d[_0x29d786(0x59b,0x5af)],_0x1bbd0d['tlat'],_0x1bbd0d[_0x29d786(0x535,0x5b2)]);if(!_0x4c5771||!_0x5c43f4)continue;if(_0x52d61f&&Math[_0x29d786(0x493,0x4f2)](_0x4c5771[0x0]-_0x5c43f4[0x0])>=_0x2a956b)continue;this['canvasContext'][_0x55b0b7(0x41f,0x416)](),this['canvasContext']['lineWidth']=this[_0x29d786(0x49a,0x4fb)],this['canvasContext'][_0x55b0b7(0x48f,0x439)]=this['_colorRamp']['getColor'](_0x1bbd0d['speed']),this['canvasContext']['moveTo'](_0x4c5771[0x0],_0x4c5771[0x1]),this['canvasContext']['lineTo'](_0x5c43f4[0x0],_0x5c43f4[0x1]),this['canvasContext'][_0x29d786(0x467,0x4f8)]();}else{this[_0x29d786(0x591,0x50d)]['beginPath'](),this[_0x29d786(0x48c,0x50d)][_0x55b0b7(0x44c,0x40f)]=this[_0x55b0b7(0x37b,0x40f)],this['canvasContext']['strokeStyle']=this['color'];for(let _0x4b6153=0x0,_0x4c4582=_0x5d0938[_0x55b0b7(0x471,0x478)];_0x4b6153<_0x4c4582;_0x4b6153++){const _0x41c44b=_0x5d0938[_0x4b6153],_0x46abc5=this[_0x55b0b7(0x46a,0x482)](_0x41c44b,_0x41c44b['lng'],_0x41c44b[_0x55b0b7(0x38c,0x3c9)],_0x41c44b['alt']),_0x2bfa0b=this['_tomap'](_0x41c44b,_0x41c44b[_0x55b0b7(0x4a7,0x4c3)],_0x41c44b[_0x55b0b7(0x522,0x4e7)],_0x41c44b[_0x55b0b7(0x483,0x4c6)]);if(!_0x46abc5||!_0x2bfa0b)continue;if(_0x52d61f&&Math['abs'](_0x46abc5[0x0]-_0x2bfa0b[0x0])>=_0x2a956b)continue;this['canvasContext']['moveTo'](_0x46abc5[0x0],_0x46abc5[0x1]),this[_0x55b0b7(0x3e0,0x421)][_0x55b0b7(0x537,0x4d5)](_0x2bfa0b[0x0],_0x2bfa0b[0x1]);}this[_0x29d786(0x517,0x50d)][_0x55b0b7(0x419,0x40c)]();}}['_tomap'](_0x454f34,_0x10c79e,_0x25965c,_0x46c546){const _0x29e540=Cesium['Cartesian3'][_0x21581f(0x20,0x38)](_0x10c79e,_0x25965c,_0x46c546??this['fixedHeight']),_0x5bb123=this['_map']['scene'];function _0x4731a6(_0x503f80,_0x58645a){return _0x27ad09(_0x503f80,_0x58645a- -0x5a8);}if(_0x5bb123[_0x21581f(0x2e,0x74)]===Cesium['SceneMode']['SCENE3D']){const _0x5dd55b=new Cesium[(_0x4731a6(-0x139,-0x1a9))](_0x5bb123[_0x4731a6(-0x19f,-0x1b3)]['ellipsoid'],_0x5bb123['camera'][_0x21581f(-0x5c,0x28)]),_0x1dec32=_0x5dd55b['isPointVisible'](_0x29e540);if(!_0x1dec32)return _0x454f34['age']=0x0,null;}const _0xddfef2=mars3d__namespace['PointTrans']['toWindowCoordinates'](this['_map'][_0x21581f(-0x48,0x4)],_0x29e540);function _0x21581f(_0x3dc884,_0x1fe09b){return _0x277c1c(_0x1fe09b,_0x3dc884-0x67);}return _0xddfef2?[_0xddfef2['x'],_0xddfef2['y']]:null;}['clear'](){this['windField']['clear']();function _0x4273f4(_0x1aea71,_0xad77ee){return _0x27ad09(_0xad77ee,_0x1aea71- -0x5c5);}delete this[_0x4273f4(-0x12a,-0x194)];}['initWorker'](){function _0xb7cc5b(_0x809f14,_0x23d3f9){return _0x27ad09(_0x23d3f9,_0x809f14- -0x64c);}this['worker']=new Worker(this[_0xb7cc5b(-0x2af,-0x2a6)]['worker']);function _0x5d10ca(_0x4a5f82,_0x2b835f){return _0x277c1c(_0x2b835f,_0x4a5f82-0x41d);}this['worker'][_0x5d10ca(0x3a1,0x372)]=_0xe082d4=>{this['_drawLines'](_0xe082d4['data']['particles']),this['_updateIng2']=![];},this['windField']={'init':_0x227d17=>{function _0x323de8(_0x3235e8,_0x399f44){return _0xb7cc5b(_0x3235e8-0x61b,_0x399f44);}const _0x4ed52d={};_0x4ed52d[_0x30765e(-0x1db,-0x244)]='init',_0x4ed52d['options']=_0x227d17;function _0x30765e(_0x38dacd,_0x1faaf8){return _0xb7cc5b(_0x38dacd-0x25,_0x1faaf8);}this['worker'][_0x30765e(-0x1b0,-0x1d6)](_0x4ed52d);},'setOptions':_0x514ef5=>{const _0x1cd90e={};_0x1cd90e[_0x3e8aaf(0xca,0x100)]='setOptions';function _0x3e8aaf(_0x4c64d3,_0x9779a3){return _0x5d10ca(_0x4c64d3- -0x301,_0x9779a3);}function _0x1ae82b(_0x19d4a0,_0x168ba1){return _0x5d10ca(_0x19d4a0- -0x4d6,_0x168ba1);}_0x1cd90e['options']=_0x514ef5,this[_0x1ae82b(-0xbd,-0xed)]['postMessage'](_0x1cd90e);},'setDate':_0xc24396=>{const _0x51b77a={};function _0x4542d1(_0x65167e,_0x19994f){return _0xb7cc5b(_0x65167e-0x393,_0x19994f);}_0x51b77a['type']='setDate',_0x51b77a[_0x16f436(-0x5b,-0x86)]=_0xc24396;function _0x16f436(_0x5dbefa,_0x5b5018){return _0x5d10ca(_0x5b5018- -0x3e5,_0x5dbefa);}this['worker'][_0x4542d1(0x1be,0x15a)](_0x51b77a);},'update':()=>{function _0x2ac637(_0x41c7ce,_0x1e4af9){return _0x5d10ca(_0x1e4af9- -0x2a2,_0x41c7ce);}if(this['_updateIng2'])return;this['_updateIng2']=!![];function _0x4630e4(_0x214925,_0xbff353){return _0xb7cc5b(_0x214925-0x23,_0xbff353);}const _0x221978={};_0x221978['type']=_0x2ac637(0xc9,0x68),this[_0x4630e4(-0x18f,-0x176)]['postMessage'](_0x221978);},'clear':()=>{function _0xd4a5ab(_0x81e019,_0x44aa28){return _0x5d10ca(_0x81e019- -0x58,_0x44aa28);}const _0x45c73f={};_0x45c73f['type']='clear',this[_0xd4a5ab(0x3c1,0x3bb)]['postMessage'](_0x45c73f);}},this['windField']['init'](this['options']);}}function _0x1059(){const _0xc984a4=['createRawRenderState','attributeLocations','isDestroyed','334159JwDjXo','frameRate','speed','red','visible','rgb(206,255,255)','clearCommand','viewport','destoryRenderingFramebuffers','uniformMap','addEventListener','destroyParticlesTextures','canvasHeight','warn','11846483wSKzms','modelMatrix','TRIANGLES','bounds','249503yXDNmO','framebuffer','original','Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.','_calcUV','createWindTextures','_speedRate','createParticlesTextures','context','lastFramesPerSecond','createSegmentsGeometry','onmessage','commandToExecute','min','show','drawingBufferWidth','colors','4300tGHoqc','createComputingPrimitives','clear','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','commandList','willReadFrequently','unbindEvent','north','getDirection','drawingBufferHeight','NEAREST','bindEvent','__esModule','forEach','_bilinearInterpolation','RGBA','_mountedHook','length','resize','off','particlesNumber','_addedHook','componentsPerAttribute','get','getU','ymax','register','_tomap','\x20\x20\x20\x20编译日期：','enabled','visibility','ymin','clientWidth','alpha','primitiveType','interpolated','type','primitives','green','grid','removeEventListener','mouseMove','#ffffff','create','frameRateAdjustment','_showHook','fixedHeight','fromDegrees','getDataAtLonLat','componentDatatype','log','OPAQUE','applyViewerParameters','reCreateWindTextures','south','setData','windField','position','SceneMode','sources','cancelAnimationFrame','mode','currentParticlesPosition','_updateIng','FLOAT','_canrefresh','isInExtent','mouseUp','pointerEvents','outputTexture','frameRateMonitor','initFrameRate','speedRate','getCalculateSpeedShader','color','clearFramebuffers','alt','_removedHook','container','postMessage','computing','0px','_calc_speedRate','latRange','fragmentShaderSource','autoClear','sin','atan2','previousParticlesPosition','particlesTextures','2607klkQLf','createCommand','tlng','particlesTextureSize','vertexShaderSource','talt','updateViewerParameters','blendFuncSource','preExecute','redraw','2026-01-21\x2012:23','useViewerBounds','_pointerEvents','getOwnPropertyDescriptor','SCENE3D','stringify','getUVByXY','nextParticlesPosition','getUVByPoint','add','lineTo','wrapT','12oVwSyw','ONE_MINUS_SRC_ALPHA','worker','windData','STATIC_DRAW','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a','createColorTableTexture','latitude','blending','14460jFaYtJ','random','owner','_onMapWhellEvent','east','getPrimitives','setOptions','tlat','DEPTH_COMPONENT','pixelDatatype','sqrt','Math','west','viewerParameters','value','postProcessingPosition','fill','lat','update','segmentsDepth','canvasWidth','morphComplete','max','pixelFormat','requestRender','pointer-events','getContext','mouseHidden','processWindData','LayerUtil','BaseLayer','CLAMP_TO_EDGE','3.10.12','width','xmax','age','options','CanvasWindField','push','4562200xmLfxg','fromCssColorString','error','array','refreshTimer','Log','onColorTableChange','pass','dropRate','lonRange','Cesium','bind','rows','destroy','_onMouseMoveEvent','particlesSpeed','Draw','particles','values','6NjaYuG','387itHiNv','createRenderingTextures','layer','calculateSpeed','vdata','left','displayRange','persists','cols','xmin','getRandomLatLng','_onMouseUpEvent','canvas','getV','_animateFrame','particleSystem','fillRect','zIndex','_map','abs','Cartesian2','frameTime','style','lighter','Unknown\x20command\x20type','stroke','setGeometry','LINEAR','lineWidth','colorTable','umin','updateOptions','_drawLines','toDegrees','camera','beginPath','rendering','setDate','rawRenderState','positionWC','vertexArray','getParticles','commandType','mouseDown','data','10853528NpkBJE','canvasContext','logInfo','initWorker','shaderProgram','mouse_down','getPostProcessingPositionShader','globalCompositeOperation','lng','floor','wheel','clientHeight','_setOptionsHook','windTextures','scene','depthTest','_createCanvas','segmentsColor','quietPeriod','WindLayer','globe','flipY','12jBqBaB','geometry','toGridXY','strokeStyle','_randomParticle','height','maxAge','isDynamic','EllipsoidalOccluder','EventType','framebuffers'];_0x1059=function(){return _0xc984a4;};return _0x1059();}mars3d__namespace['LayerUtil']['register']('canvasWind',CanvasWindLayer),mars3d__namespace[_0x277c1c(-0x105,-0xe8)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x277c1c(-0xc5,-0x100)]=CanvasWindField,mars3d__namespace[_0x277c1c(-0x78,-0xf9)][_0x27ad09(0x470,0x3e3)]('mars3d-wind插件注册成功\x20\x20\x20\x20\x20版本：'+version+_0x277c1c(0x2,-0x5a)+buildTime),mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x341bb8={};_0x341bb8[_0x277c1c(-0xd1,-0x117)]=!![],Object['defineProperty'](exports,_0x277c1c(-0x14,-0x6a),_0x341bb8);
}));
