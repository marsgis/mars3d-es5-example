/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.7.23
 * 编译日期：2024-07-22 00:04:45
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x46ade7,_0x41c388){const _0x518d7e=_0x46ade7();function _0x305265(_0x1e8c51,_0x1feac6){return _0x3de5(_0x1e8c51-0x1d1,_0x1feac6);}function _0xf8f743(_0x318dac,_0x7b9c79){return _0x3de5(_0x318dac-0x163,_0x7b9c79);}while(!![]){try{const _0x4933f9=parseInt(_0x305265(0x3b5,0x38e))/0x1*(-parseInt(_0xf8f743(0x421,0x3c4))/0x2)+-parseInt(_0x305265(0x46e,0x47e))/0x3*(-parseInt(_0xf8f743(0x344,0x3d5))/0x4)+-parseInt(_0x305265(0x4a5,0x4f3))/0x5+-parseInt(_0xf8f743(0x345,0x332))/0x6*(-parseInt(_0xf8f743(0x3d6,0x3f3))/0x7)+parseInt(_0x305265(0x446,0x48f))/0x8+parseInt(_0x305265(0x40f,0x46b))/0x9+-parseInt(_0x305265(0x49b,0x4f0))/0xa;if(_0x4933f9===_0x41c388)break;else _0x518d7e['push'](_0x518d7e['shift']());}catch(_0x549061){_0x518d7e['push'](_0x518d7e['shift']());}}}(_0x37b5,0xe97c3));function _interopNamespace(_0x53c44d){if(_0x53c44d&&_0x53c44d['__esModule'])return _0x53c44d;function _0x5d7002(_0x1b37e0,_0x17d2eb){return _0x3de5(_0x1b37e0-0x150,_0x17d2eb);}var _0x264295=Object['create'](null);_0x53c44d&&Object['keys'](_0x53c44d)[_0x18d442(0x26f,0x250)](function(_0x3bc075){function _0xeedd83(_0x358d34,_0x27f647){return _0x18d442(_0x358d34-0x275,_0x27f647);}if(_0x3bc075!=='default'){var _0x34f13c=Object['getOwnPropertyDescriptor'](_0x53c44d,_0x3bc075);Object[_0xeedd83(0x4a0,0x499)](_0x264295,_0x3bc075,_0x34f13c['get']?_0x34f13c:{'enumerable':!![],'get':function(){return _0x53c44d[_0x3bc075];}});}});_0x264295[_0x5d7002(0x325,0x392)]=_0x53c44d;function _0x18d442(_0x3cf67d,_0x5c8ea8){return _0x3de5(_0x3cf67d-0x7,_0x5c8ea8);}return _0x264295;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$7=mars3d__namespace[_0x2fb72e(0x546,0x4e4)];function getU(_0x9b89a3,_0x123374){const _0x203c77=_0x9b89a3*Math[_0x581bd3(0x122,0x9c)](Cesium$7['Math']['toRadians'](_0x123374));function _0x581bd3(_0x53b4a6,_0x5448a2){return _0x2fb72e(_0x5448a2- -0x536,_0x53b4a6);}return _0x203c77;}function _0x3de5(_0x2a5158,_0x509c26){const _0x37b59b=_0x37b5();return _0x3de5=function(_0x3de524,_0xde62){_0x3de524=_0x3de524-0x1b8;let _0x7fdf6b=_0x37b59b[_0x3de524];return _0x7fdf6b;},_0x3de5(_0x2a5158,_0x509c26);}function _0x2fb72e(_0x336c24,_0x2f35d3){return _0x3de5(_0x336c24-0x33a,_0x2f35d3);}function getV(_0x3f2ee1,_0x451346){const _0x566e7b=_0x3f2ee1*Math[_0x29f283(0x486,0x401)](Cesium$7['Math']['toRadians'](_0x451346));function _0x29f283(_0x39d867,_0x39edd0){return _0x2fb72e(_0x39d867- -0x112,_0x39edd0);}return _0x566e7b;}function getSpeed(_0x35952e,_0xcfcb22){const _0x265adf=Math['sqrt'](Math['pow'](_0x35952e,0x2)+Math['pow'](_0xcfcb22,0x2));return _0x265adf;}function getDirection(_0x432ee1,_0xf20f7d){let _0x57b2f5=Cesium$7['Math'][_0x360ad4(0x251,0x207)](Math['atan2'](_0xf20f7d,_0x432ee1));function _0x360ad4(_0x18b3b1,_0x4b91d7){return _0x2fb72e(_0x4b91d7- -0x34a,_0x18b3b1);}return _0x57b2f5+=_0x57b2f5<0x0?0x168:0x0,_0x57b2f5;}const _0x439fa1={};_0x439fa1[_0x2fb72e(0x57c,0x571)]=null,_0x439fa1['getU']=getU,_0x439fa1['getV']=getV,_0x439fa1['getSpeed']=getSpeed;function _0x33b593(_0x5b8097,_0x1c4c1d){return _0x3de5(_0x5b8097-0x5c,_0x1c4c1d);}_0x439fa1['getDirection']=getDirection;function _0x37b5(){const _0xd165ee=['tlng','now','applyViewerParameters','defined','fromDegrees','nextTrailsColor','88746OCcrfi','xmin','7450408GNCXjn','source','_calc_speedRate','getRandomLatLng','particleHeight','EventType','strokeStyle','commandList','uniformMap','options','udata','grid','normal','vdata','particleSystem','_onMouseMoveEvent','particles','textures','worker','height','register','primitiveType','LayerUtil','createFramebuffer','min','removeChild','TRIANGLES','getUVByXY','lineWidth','particlesTextureSize','toGridXY','canvas','add','commandToExecute','segmentsColor','cos','style','GeometryAttribute','particlesRendering','rawRenderState','12AhOWmP','depthMask','lng','_onMapWhellEvent','TWO_PI','SCENE3D','xmax','postMessage','autoClear','_pointerEvents','windData','_drawLines','value','_speedRate','drawingBufferWidth','globe','particlesWind','mouse_down','Framebuffer','data','mouseUp','context','uniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x20//\x20use\x20to\x20improve\x20the\x20pseudo-random\x20generator\x0auniform\x20float\x20dropRate;\x20//\x20drop\x20rate\x20is\x20a\x20chance\x20a\x20particle\x20will\x20restart\x20at\x20random\x20position\x20to\x20avoid\x20degeneration\x0auniform\x20float\x20dropRateBump;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898,\x2078.233,\x204375.85453);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0,\x201.0);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec3\x20generateRandomParticle(vec2\x20seed,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20longitude\x20is\x20in\x20[0,\x20360]\x0a\x20\x20\x20\x20float\x20randomLon\x20=\x20mod(rand(seed,\x20lonRange),\x20360.0);\x0a\x20\x20\x20\x20float\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x0a\x20\x20\x20\x20return\x20vec3(randomLon,\x20randomLat,\x20lev);\x0a}\x0a\x0abool\x20particleOutbound(vec3\x20particle)\x20{\x0a\x20\x20\x20\x20return\x20particle.y\x20<\x20-90.0\x20||\x20particle.y\x20>\x2090.0;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20nextSpeed.a;\x0a\x0a\x20\x20\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec2\x20seed2\x20=\x20nextSpeed.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20\x20\x20vec3\x20randomParticle\x20=\x20generateRandomParticle(seed1,\x20nextParticle.z);\x0a\x20\x20\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20\x20\x20if\x20(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(randomParticle,\x201.0);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a\x20\x20\x20\x20}\x0a}\x0a','_updateIng','BoundingSphere','getUVByPoint','ellipsoid','destroy','keys','ymax','DISABLE_LOG_DEPTH_FRAGMENT_WRITE','_onMouseDownEvent','latRange','952AZCZYy','addEventListener','color','windField','Sampler','BaseLayer','speed','_setOptionsHook','getWind','Cartesian2','ymin','segmentsDepth','5724010DRZjAq','rows','_removedHook','umax','fromCssColorString','Math','initWorker','isDestroyed','mouseHidden','defines','5331955jJfcFc','floor','top','reverse','resize','canvasWidth','lev','drawingBufferHeight','depthTexture','pointer-events','OPAQUE','wind','max','ALWAYS','push','currentParticlesPosition','visibility','UNSIGNED_BYTE','framebuffer','Cartesian3','clientWidth','width','ComputeCommand','camera','length','south','postProcessingSpeed','NEAREST','show','pixelDatatype','addPrimitives','vmin','uniform\x20sampler2D\x20colorTable;\x0a\x0ain\x20float\x20speedNormalization;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20out_FragColor\x20=\x20texture(colorTable,\x20vec2(speedNormalization,\x200.0));\x0a}\x0a','STATIC_DRAW','currentParticlesSpeed','_colorRamp','stroke','zIndex','removeEventListener','default','none','canvasHeight','screen','off','setData','dimensions','depthTest','reverseY','TextureMinificationFilter','createRawRenderState','Matrix4','76064twyyuf','402fEvnJs','unbindEvent','700lwLFjL','_tomap','destroyParticlesTextures','maxParticles','viewerParameters','THREE_PI_OVER_TWO','fadeOpacity','age','beginPath','ceil','DISABLE_GL_POSITION_LOG_DEPTH','onmessage','tlat','_onMouseUpEvent','array','ColorRamp','removeAll','createRenderingPrimitives','create','clientHeight','sources','_calcUV','BufferUsage','dropRate','lat','clearCommand','nextTrails','redraw','levmin','FLOAT','getColorTexture','enabled','update','cols','vertexArray','ShaderSource','_createCanvas','ShaderProgram','sqrt','maxAge','Cesium','SceneMode','fromGeometry','speedRate','outputTexture','lighter','setDate','_data','particlesComputing','commandType','ComponentDatatype','toDegrees','isPointVisible','_randomParticle','fragmentShaderSource','getFullscreenQuad','pixelFormat','moveTo','clearFramebuffers','Color','_animateFrame','visible','mouseMove','lineTo','defineProperty','RGBA','updateSpeed','PixelFormat','_maxAge','_map','PI_OVER_TWO','refreshParticles','VertexArray','in\x20vec2\x20st;\x0a//\x20it\x20is\x20not\x20normal\x20itself,\x20but\x20used\x20to\x20control\x20normal\x0ain\x20vec3\x20normal;\x20//\x20(point\x20to\x20use,\x20offset\x20sign,\x20not\x20used\x20component)\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20postProcessingSpeed;\x0a\x0auniform\x20float\x20particleHeight;\x0a\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20lineWidth;\x0a\x0aout\x20float\x20speedNormalization;\x0a\x0avec3\x20convertCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20\x20\x20float\x20a\x20=\x206378137.0;\x20//\x20Semi-major\x20axis\x0a\x20\x20\x20\x20float\x20b\x20=\x206356752.3142;\x20//\x20Semi-minor\x20axis\x0a\x20\x20\x20\x20float\x20e2\x20=\x206.69437999014e-3;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x20\x20\x20\x20float\x20longitude\x20=\x20radians(lonLatLev.x);\x0a\x0a\x20\x20\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x0a\x20\x20\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calcProjectedCoordinate(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20the\x20range\x20of\x20longitude\x20in\x20Cesium\x20is\x20[-180,\x20180]\x20but\x20the\x20range\x20of\x20longitude\x20in\x20the\x20NetCDF\x20file\x20is\x20[0,\x20360]\x0a\x20\x20\x20\x20//\x20[0,\x20180]\x20is\x20corresponding\x20to\x20[0,\x20180]\x20and\x20[180,\x20360]\x20is\x20corresponding\x20to\x20[-180,\x200]\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x\x20+\x20180.0,\x20360.0)\x20-\x20180.0;\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLatLev);\x0a\x20\x20\x20\x20vec4\x20projectedCoordinate\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0);\x0a\x20\x20\x20\x20return\x20projectedCoordinate;\x0a}\x0a\x0avec4\x20calcOffset(vec4\x20currentProjectedCoordinate,\x20vec4\x20nextProjectedCoordinate,\x20float\x20offsetSign)\x20{\x0a\x20\x20\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0);\x0a\x20\x20\x20\x20vec2\x20currentXY\x20=\x20(currentProjectedCoordinate.xy\x20/\x20currentProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x20\x20\x20\x20vec2\x20nextXY\x20=\x20(nextProjectedCoordinate.xy\x20/\x20nextProjectedCoordinate.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20float\x20offsetLength\x20=\x20lineWidth\x20/\x202.0;\x0a\x20\x20\x20\x20vec2\x20direction\x20=\x20normalize(nextXY\x20-\x20currentXY);\x0a\x20\x20\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x20\x20\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0,\x200.0);\x0a\x20\x20\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20particleIndex\x20=\x20st;\x0a\x0a\x20\x20\x20\x20vec3\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rgb;\x0a\x20\x20\x20\x20vec4\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex);\x0a\x0a\x20\x20\x20\x20vec4\x20currentProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20vec4\x20nextProjectedCoordinate\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(nextPosition.w\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20currentProjectedCoordinate\x20=\x20calcProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20nextProjectedCoordinate\x20=\x20calcProjectedCoordinate(nextPosition.xyz);\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20float\x20pointToUse\x20=\x20normal.x;\x20//\x20-1\x20is\x20currentProjectedCoordinate\x20and\x20+1\x20is\x20nextProjectedCoordinate\x0a\x20\x20\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x0a\x20\x20\x20\x20vec4\x20offset\x20=\x20pixelSize\x20*\x20calcOffset(currentProjectedCoordinate,\x20nextProjectedCoordinate,\x20offsetSign);\x0a\x20\x20\x20\x20if\x20(pointToUse\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20currentProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20nextProjectedCoordinate\x20+\x20offset;\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20speedNormalization\x20=\x20texture(postProcessingSpeed,\x20particleIndex).a;\x0a}\x0a','speedFactor','layer','bindEvent','geometry','nextParticlesSpeed','uniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0auniform\x20sampler2D\x20particlesWind;\x0a\x0a//\x20used\x20to\x20calculate\x20the\x20wind\x20norm\x0auniform\x20vec2\x20uSpeedRange;\x20//\x20(min,\x20max);\x0auniform\x20vec2\x20vSpeedRange;\x0auniform\x20float\x20pixelSize;\x0auniform\x20float\x20speedFactor;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0afloat\x20calculateWindNorm(vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec3\x20percent\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20percent.x\x20=\x20(speed.x\x20-\x20uSpeedRange.x)\x20/\x20(uSpeedRange.y\x20-\x20uSpeedRange.x);\x0a\x20\x20\x20\x20percent.y\x20=\x20(speed.y\x20-\x20vSpeedRange.x)\x20/\x20(vSpeedRange.y\x20-\x20vSpeedRange.x);\x0a\x20\x20\x20\x20float\x20normalization\x20=\x20length(percent);\x0a\x0a\x20\x20\x20\x20return\x20normalization;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20//\x20vec3\x20currentSpeed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20texture(particlesWind,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20vec4\x20nextSpeed\x20=\x20vec4(speedFactor\x20*\x20pixelSize\x20*\x20windVector,\x20calculateWindNorm(windVector));\x0a\x20\x20\x20\x20out_FragColor\x20=\x20nextSpeed;\x0a}\x0a','blending','createParticlesTextures','getPixelSize','type','globalCompositeOperation','willReadFrequently','in\x20vec3\x20position;\x0ain\x20vec2\x20st;\x0a\x0aout\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20textureCoordinate\x20=\x20st;\x0a\x20\x20\x20\x20gl_Position\x20=\x20vec4(position,\x201.0);\x0a}\x0a','scene','windTextures','primitives','9644004jOsSUH','Draw','getContext','PixelDatatype','__proto__','refreshTimer','0px','nextParticlesPosition','particlesNumber','canvasContext','framebuffers','fixedHeight','particlesTextures','attributeLocations','globalAlpha','log','colorTable','setOptions','LINEAR','mouse_move','viewRectangleToLonLatRange','pointerEvents','vertexShaderSource','Compute','shaderProgram','lon','pixelSize','preRender','clear','destroyObject','postProcessingPosition','computeViewRectangle','sin','colors','segments','isDestroy','createSegmentsGeometry','east','UNSIGNED_INT','mod','createTexture','randomBetween','forEach','_onMap_preRenderEvent','lonRange','createRenderingFramebuffers','owner'];_0x37b5=function(){return _0xd165ee;};return _0x37b5();}var WindUtil=_0x439fa1;const Cesium$6=mars3d__namespace['Cesium'];class CustomPrimitive{constructor(_0x15ff16){this[_0x82bc32(0x356,0x3a5)]=_0x15ff16[_0x82bc32(0x351,0x3a5)],this[_0x82bc32(0x3e5,0x3c1)]=_0x15ff16['geometry'],this['attributeLocations']=_0x15ff16[_0x2cc2d2(0x566,0x4db)],this[_0x82bc32(0x3cf,0x41a)]=_0x15ff16[_0x2cc2d2(0x591,0x51a)],this['uniformMap']=_0x15ff16[_0x2cc2d2(0x507,0x50d)],this['vertexShaderSource']=_0x15ff16[_0x2cc2d2(0x453,0x4e4)],this['fragmentShaderSource']=_0x15ff16['fragmentShaderSource'],this[_0x82bc32(0x3e0,0x42c)]=_0x15ff16['rawRenderState'];function _0x82bc32(_0x33a1a1,_0x17d08f){return _0x2fb72e(_0x17d08f- -0x1aa,_0x33a1a1);}this['framebuffer']=_0x15ff16['framebuffer'],this['outputTexture']=_0x15ff16[_0x2cc2d2(0x4bd,0x4a0)],this[_0x82bc32(0x489,0x435)]=_0x15ff16['autoClear']??![],this['preExecute']=_0x15ff16['preExecute'];function _0x2cc2d2(_0x1d896f,_0x2c2dcb){return _0x2fb72e(_0x2c2dcb- -0xaa,_0x1d896f);}this['show']=!![],this['commandToExecute']=undefined,this['clearCommand']=undefined,this['autoClear']&&(this['clearCommand']=new Cesium$6['ClearCommand']({'color':new Cesium$6[(_0x2cc2d2(0x4a4,0x4af))](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this[_0x2cc2d2(0x41d,0x450)],'pass':Cesium$6['Pass']['OPAQUE']}));}['createCommand'](_0x10cc82){function _0x5592f3(_0x53415b,_0x3ea462){return _0x2fb72e(_0x3ea462- -0x4fa,_0x53415b);}function _0x22755b(_0x21684b,_0x146215){return _0x2fb72e(_0x21684b- -0x21f,_0x146215);}switch(this[_0x22755b(0x330,0x375)]){case'Draw':{const _0x410863=Cesium$6[_0x22755b(0x347,0x3a2)][_0x5592f3(0xc9,0x4e)]({'context':_0x10cc82,'geometry':this[_0x22755b(0x34c,0x2be)],'attributeLocations':this['attributeLocations'],'bufferUsage':Cesium$6['BufferUsage'][_0x22755b(0x2ea,0x2ba)]}),_0x1dbd08={};_0x1dbd08[_0x5592f3(0x129,0xf2)]=_0x10cc82,_0x1dbd08[_0x22755b(0x366,0x342)]=this[_0x5592f3(0x4a,0x8b)],_0x1dbd08['vertexShaderSource']=this[_0x22755b(0x36f,0x34d)],_0x1dbd08['fragmentShaderSource']=this[_0x22755b(0x335,0x35a)];const _0x42c731=Cesium$6[_0x5592f3(0xa5,0x49)]['fromCache'](_0x1dbd08),_0x546a18=Cesium$6['RenderState']['fromCache'](this['rawRenderState']);return new Cesium$6['DrawCommand']({'primitiveType':this['primitiveType'],'shaderProgram':_0x42c731,'vertexArray':_0x410863,'modelMatrix':Cesium$6[_0x5592f3(0x7f,0x20)]['IDENTITY'],'renderState':_0x546a18,'uniformMap':this[_0x22755b(0x398,0x379)],'castShadows':![],'receiveShadows':![],'framebuffer':this['framebuffer'],'pass':Cesium$6['Pass'][_0x5592f3(-0x7e,-0x8)],'pickOnly':!![],'owner':this});}case _0x22755b(0x370,0x2ea):{const _0x34991a={};return _0x34991a[_0x22755b(0x387,0x412)]=this,_0x34991a['fragmentShaderSource']=this['fragmentShaderSource'],_0x34991a['uniformMap']=this[_0x22755b(0x398,0x3cd)],_0x34991a['outputTexture']=this['outputTexture'],_0x34991a['persists']=!![],new Cesium$6[(_0x5592f3(0x51,0x4))](_0x34991a);}}}['setGeometry'](_0x51e646,_0x2259e){this['geometry']=_0x2259e;function _0xbb94cd(_0x368b10,_0x38fdb2){return _0x33b593(_0x38fdb2- -0x67,_0x368b10);}function _0x4e72f8(_0x4b5872,_0x4091d5){return _0x2fb72e(_0x4091d5- -0x13a,_0x4b5872);}const _0x3cfce9=Cesium$6['VertexArray']['fromGeometry']({'context':_0x51e646,'geometry':this['geometry'],'attributeLocations':this[_0xbb94cd(0x216,0x240)],'bufferUsage':Cesium$6['BufferUsage']['STATIC_DRAW']});this[_0x4e72f8(0x4e8,0x496)]['vertexArray']=_0x3cfce9;}['update'](_0x1380b0){if(!this['show'])return;function _0x48920e(_0x220f3e,_0x684ec6){return _0x2fb72e(_0x220f3e- -0x621,_0x684ec6);}function _0x33ce74(_0x41d975,_0x4bf982){return _0x2fb72e(_0x41d975- -0x2af,_0x4bf982);}if(_0x1380b0['mode']!==Cesium$6[_0x33ce74(0x298,0x2ea)][_0x33ce74(0x32d,0x2ef)])return;!Cesium$6[_0x48920e(-0x77,-0x24)](this['commandToExecute'])&&(this[_0x33ce74(0x321,0x2b3)]=this['createCommand'](_0x1380b0[_0x48920e(-0x35,-0xa7)])),Cesium$6['defined'](this['preExecute'])&&this['preExecute'](),Cesium$6['defined'](this['clearCommand'])&&_0x1380b0['commandList']['push'](this[_0x33ce74(0x288,0x2a9)]),_0x1380b0[_0x48920e(-0x6b,-0x19)]['push'](this['commandToExecute']);}[_0x2fb72e(0x60b,0x680)](){return![];}['destroy'](){if(this['clearCommand']){var _0x5729cb,_0x5c7039;(_0x5729cb=this['clearCommand'])!==null&&_0x5729cb!==void 0x0&&_0x5729cb[_0x2beb57(0x4ce,0x53e)]&&this[_0x492af2(0x4b0,0x4cf)]['vertexArray'][_0x492af2(0x5ee,0x58a)](),(_0x5c7039=this['clearCommand'])!==null&&_0x5c7039!==void 0x0&&_0x5c7039['shaderProgram']&&this['clearCommand']['shaderProgram']['destroy'](),delete this['clearCommand'];}function _0x2beb57(_0x3d72c3,_0x427b67){return _0x2fb72e(_0x427b67- -0x2,_0x3d72c3);}function _0x492af2(_0x5cb832,_0x6d579c){return _0x33b593(_0x6d579c-0x276,_0x5cb832);}return this['commandToExecute']&&(this[_0x2beb57(0x64e,0x5ce)]['vertexArray']&&this['commandToExecute']['vertexArray']['destroy'](),this[_0x2beb57(0x540,0x5ce)]['shaderProgram']&&this[_0x2beb57(0x541,0x5ce)][_0x2beb57(0x61d,0x58e)][_0x2beb57(0x63c,0x5f0)](),delete this['commandToExecute']),Cesium$6[_0x492af2(0x4dc,0x52d)](this);}}const Cesium$5=mars3d__namespace[_0x33b593(0x268,0x273)],Util=(function(){const _0x3b94d3=function(){const _0x5b183e=new Cesium$5['Geometry']({'attributes':new Cesium$5['GeometryAttributes']({'position':new Cesium$5[(_0x1f579a(0xed,0x104))]({'componentDatatype':Cesium$5[_0x223e12(0x53f,0x4ff)][_0x223e12(0x543,0x4ea)],'componentsPerAttribute':0x3,'values':new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0])}),'st':new Cesium$5['GeometryAttribute']({'componentDatatype':Cesium$5['ComponentDatatype'][_0x1f579a(0x82,0x6b)],'componentsPerAttribute':0x2,'values':new Float32Array([0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x1])})}),'indices':new Uint32Array([0x3,0x2,0x0,0x0,0x2,0x1])});function _0x223e12(_0x34f332,_0x126eb7){return _0x3de5(_0x126eb7-0x2e9,_0x34f332);}function _0x1f579a(_0x526c35,_0x1c47b7){return _0x3de5(_0x1c47b7- -0x196,_0x526c35);}return _0x5b183e;};function _0x64116(_0x284735,_0x17abce){return _0x2fb72e(_0x284735- -0x5de,_0x17abce);}const _0x2aca8b=function(_0x357973,_0x88fa04){function _0x7cc053(_0x3ea4ac,_0x5c506f){return _0x3de5(_0x3ea4ac-0x7a,_0x5c506f);}if(Cesium$5[_0x7cc053(0x2ea,0x2e1)](_0x88fa04)){const _0x147fcb={};_0x147fcb['arrayBufferView']=_0x88fa04,_0x357973[_0x42b71a(0x2e0,0x33c)]=_0x147fcb;}function _0x42b71a(_0x3c730c,_0x3f38f9){return _0x3de5(_0x3f38f9-0xc6,_0x3c730c);}const _0x49b976=new Cesium$5['Texture'](_0x357973);return _0x49b976;},_0x479a69=function(_0x4e8996,_0xc8b818,_0x1ca46b){const _0x548205={};function _0x21bec9(_0x91aa37,_0x38232b){return _0x3de5(_0x38232b-0x1ea,_0x91aa37);}_0x548205['context']=_0x4e8996,_0x548205['colorTextures']=[_0xc8b818],_0x548205[_0x5c4130(0x5ab,0x61c)]=_0x1ca46b;function _0x5c4130(_0x4fad15,_0x547457){return _0x3de5(_0x4fad15-0x2cf,_0x547457);}const _0x34489b=new Cesium$5[(_0x21bec9(0x437,0x499))](_0x548205);return _0x34489b;},_0x21d9d1=function(_0x5c1a20){const _0x57abe5=!![],_0x6b85b=![],_0x2b453a={};_0x2b453a['viewport']=_0x5c1a20['viewport'],_0x2b453a[_0x460667(-0x1e,-0x4d)]=_0x5c1a20[_0x460667(-0x9a,-0x4d)];function _0x460667(_0x83ac80,_0x3f90f3){return _0x3de5(_0x3f90f3- -0x229,_0x83ac80);}_0x2b453a[_0x460667(0x17,0x75)]=_0x5c1a20[_0xf8f8e5(0x43e,0x3b2)],_0x2b453a['blending']=_0x5c1a20[_0xf8f8e5(0x2dc,0x348)];const _0x1e51fd=_0x2b453a;function _0xf8f8e5(_0x4d34f4,_0x3e355b){return _0x3de5(_0x3e355b-0x114,_0x4d34f4);}const _0x5481f2=Cesium$5['Appearance']['getDefaultRenderState'](_0x57abe5,_0x6b85b,_0x1e51fd);return _0x5481f2;},_0x4a7d9e=function(_0x360487){const _0x40a708={},_0x15c6d8=Cesium$5[_0xe166b7(0x233,0x1b2)][_0xe166b7(0x1cb,0x148)](_0x360487['west'],Cesium$5[_0xe166b7(0x1e1,0x1b2)][_0x316f94(0x65,0x90)]),_0x2d34be=Cesium$5['Math']['mod'](_0x360487[_0x316f94(0x27,-0x4f)],Cesium$5[_0xe166b7(0x1e7,0x1b2)][_0xe166b7(0x155,0x184)]);function _0x316f94(_0x2efcc8,_0x269816){return _0x3de5(_0x2efcc8- -0x23c,_0x269816);}const _0x72678e=_0x360487['width'];let _0x39797c,_0xb5d3ae;function _0xe166b7(_0x261637,_0x58faff){return _0x3de5(_0x58faff- -0x11d,_0x261637);}_0x72678e>Cesium$5[_0xe166b7(0x1f9,0x1b2)][_0x316f94(-0x53,-0x4d)]?(_0x39797c=0x0,_0xb5d3ae=Cesium$5[_0xe166b7(0x1b4,0x1b2)][_0x316f94(0x65,-0xc)]):_0x2d34be-_0x15c6d8<_0x72678e?(_0x39797c=_0x15c6d8,_0xb5d3ae=_0x15c6d8+_0x72678e):(_0x39797c=_0x15c6d8,_0xb5d3ae=_0x2d34be);_0x40a708['lon']={'min':Cesium$5['Math']['toDegrees'](_0x39797c),'max':Cesium$5['Math']['toDegrees'](_0xb5d3ae)};const _0x2818de=_0x360487[_0xe166b7(0x34,0xaa)],_0x25f7f8=_0x360487['north'],_0x2122de=_0x360487['height'],_0x86a055=_0x2122de>Cesium$5[_0xe166b7(0x209,0x1b2)]['PI']/0xc?_0x2122de/0x2:0x0;let _0x51bfc4=Cesium$5[_0xe166b7(0x1b7,0x1b2)]['clampToLatitudeRange'](_0x2818de-_0x86a055),_0x3b9f6f=Cesium$5['Math']['clampToLatitudeRange'](_0x25f7f8+_0x86a055);return _0x51bfc4<-Cesium$5[_0xe166b7(0x1bf,0x1b2)]['PI_OVER_THREE']&&(_0x51bfc4=-Cesium$5[_0x316f94(0x93,0xe0)]['PI_OVER_TWO']),_0x3b9f6f>Cesium$5['Math']['PI_OVER_THREE']&&(_0x3b9f6f=Cesium$5['Math'][_0xe166b7(0x11f,0x10d)]),_0x40a708['lat']={'min':Cesium$5[_0xe166b7(0x163,0x1b2)]['toDegrees'](_0x51bfc4),'max':Cesium$5[_0x316f94(0x93,0xfd)][_0xe166b7(0x95,0xfa)](_0x3b9f6f)},_0x40a708;},_0x40887f={};return _0x40887f['getFullscreenQuad']=_0x3b94d3,_0x40887f['createTexture']=_0x2aca8b,_0x40887f['createFramebuffer']=_0x479a69,_0x40887f['createRawRenderState']=_0x21d9d1,_0x40887f[_0x64116(-0x52,-0xa8)]=_0x4a7d9e,_0x40887f;}());var segmentDraw_vert=_0x33b593(0x289,0x21b),segmentDraw_frag=_0x2fb72e(0x508,0x4c4),fullscreen_vert=_0x2fb72e(0x574,0x4e2),trailDraw_frag='uniform\x20sampler2D\x20segmentsColorTexture;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0auniform\x20sampler2D\x20currentTrailsColor;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0auniform\x20float\x20fadeOpacity;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20pointsColor\x20=\x20texture(segmentsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(currentTrailsColor,\x20textureCoordinate);\x0a\x0a\x20\x20\x20\x20trailsColor\x20=\x20floor(fadeOpacity\x20*\x20255.0\x20*\x20trailsColor)\x20/\x20255.0;\x20//\x20make\x20sure\x20the\x20trailsColor\x20will\x20be\x20strictly\x20decreased\x0a\x0a\x20\x20\x20\x20float\x20pointsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20if\x20(pointsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20pointsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20out_FragColor\x20+\x20trailsColor;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20gl_FragDepth\x20=\x20min(pointsDepth,\x20trailsDepth);\x0a}\x0a',screenDraw_frag='uniform\x20sampler2D\x20trailsColorTexture;\x0auniform\x20sampler2D\x20trailsDepthTexture;\x0a\x0ain\x20vec2\x20textureCoordinate;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20trailsColor\x20=\x20texture(trailsColorTexture,\x20textureCoordinate);\x0a\x20\x20\x20\x20float\x20trailsDepth\x20=\x20texture(trailsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x0a\x20\x20\x20\x20if\x20(trailsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20trailsColor;\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x0a}\x0a';const Cesium$4=mars3d__namespace['Cesium'];class ParticlesRendering{constructor(_0x3b8ba0,_0x478844,_0x1b496b,_0x5de8d0,_0x19682a){this['createRenderingTextures'](_0x3b8ba0,_0x478844,_0x1b496b['colors']),this['createRenderingFramebuffers'](_0x3b8ba0);function _0x11abc4(_0x388e6e,_0x2efd8d){return _0x33b593(_0x2efd8d- -0x3a0,_0x388e6e);}this[_0x11abc4(-0x1c8,-0x14f)](_0x3b8ba0,_0x1b496b,_0x5de8d0,_0x19682a);}['createRenderingTextures'](_0x4ac828,_0x35ecd1,_0x10f7d7){const _0x138da1={};_0x138da1[_0xa27a69(0x674,0x5e2)]=_0x4ac828,_0x138da1[_0x4810d8(0x21d,0x229)]=_0x4ac828['drawingBufferWidth'],_0x138da1['height']=_0x4ac828['drawingBufferHeight'],_0x138da1[_0xa27a69(0x5be,0x54c)]=Cesium$4[_0xa27a69(0x59c,0x557)]['RGBA'],_0x138da1[_0x4810d8(0x225,0x251)]=Cesium$4[_0xa27a69(0x56e,0x571)][_0x4810d8(0x219,0x22d)];const _0x2052fb=_0x138da1,_0x5dd82d={};_0x5dd82d[_0x4810d8(0x30c,0x2a8)]=_0x4ac828,_0x5dd82d['width']=_0x4ac828[_0x4810d8(0x305,0x276)],_0x5dd82d[_0x4810d8(0x2e2,0x2c4)]=_0x4ac828['drawingBufferHeight'],_0x5dd82d[_0x4810d8(0x276,0x277)]=Cesium$4['PixelFormat']['DEPTH_COMPONENT'],_0x5dd82d['pixelDatatype']=Cesium$4['PixelDatatype'][_0x4810d8(0x2be,0x34f)];const _0x3d491f=_0x5dd82d;function _0xa27a69(_0x529a3e,_0x31c7ec){return _0x2fb72e(_0x31c7ec- -0xa,_0x529a3e);}const _0x117056=_0x10f7d7['length'],_0x5752c2=new Float32Array(_0x117056*0x3);for(let _0x93bd11=0x0;_0x93bd11<_0x117056;_0x93bd11++){const _0x411e52=Cesium$4['Color'][_0x4810d8(0x328,0x358)](_0x10f7d7[_0x93bd11]);_0x5752c2[0x3*_0x93bd11]=_0x411e52['red'],_0x5752c2[0x3*_0x93bd11+0x1]=_0x411e52['green'],_0x5752c2[0x3*_0x93bd11+0x2]=_0x411e52['blue'];}function _0x4810d8(_0x236b11,_0x3fc17f){return _0x2fb72e(_0x236b11- -0x2e0,_0x3fc17f);}const _0x4ffd51={'context':_0x4ac828,'width':_0x117056,'height':0x1,'pixelFormat':Cesium$4[_0xa27a69(0x5d6,0x557)]['RGB'],'pixelDatatype':Cesium$4[_0xa27a69(0x5df,0x571)][_0xa27a69(0x55a,0x531)],'sampler':new Cesium$4[(_0x4810d8(0x31c,0x358))]({'minificationFilter':Cesium$4[_0x4810d8(0x238,0x29d)][_0xa27a69(0x60c,0x580)],'magnificationFilter':Cesium$4['TextureMagnificationFilter'][_0xa27a69(0x612,0x580)]})};this['textures']={'segmentsColor':Util[_0xa27a69(0x508,0x596)](_0x2052fb),'segmentsDepth':Util[_0x4810d8(0x2c0,0x2a6)](_0x3d491f),'currentTrailsColor':Util['createTexture'](_0x2052fb),'currentTrailsDepth':Util['createTexture'](_0x3d491f),'nextTrailsColor':Util['createTexture'](_0x2052fb),'nextTrailsDepth':Util['createTexture'](_0x3d491f),'colorTable':Util[_0xa27a69(0x61c,0x596)](_0x4ffd51,_0x5752c2)};}[_0x33b593(0x2c7,0x321)](_0x5bc7d6){function _0x820485(_0x2ea831,_0xe323b6){return _0x2fb72e(_0x2ea831- -0x6d0,_0xe323b6);}function _0x528d99(_0x57b59b,_0x30f3c4){return _0x33b593(_0x30f3c4-0x2a8,_0x57b59b);}this['framebuffers']={'segments':Util['createFramebuffer'](_0x5bc7d6,this['textures']['segmentsColor'],this['textures'][_0x528d99(0x560,0x5cd)]),'currentTrails':Util[_0x820485(-0x10a,-0x93)](_0x5bc7d6,this['textures']['currentTrailsColor'],this[_0x820485(-0x110,-0xff)]['currentTrailsDepth']),'nextTrails':Util[_0x820485(-0x10a,-0x114)](_0x5bc7d6,this['textures'][_0x528d99(0x5fb,0x576)],this['textures']['nextTrailsDepth'])};}['createSegmentsGeometry'](_0x123c4a){const _0x5e185b=0x4;let _0x5607dd=[];for(let _0x363217=0x0;_0x363217<_0x123c4a['particlesTextureSize'];_0x363217++){for(let _0x35b9f0=0x0;_0x35b9f0<_0x123c4a[_0x41507a(0x458,0x4bf)];_0x35b9f0++){for(let _0x16d103=0x0;_0x16d103<_0x5e185b;_0x16d103++){_0x5607dd['push'](_0x363217/_0x123c4a[_0x41507a(0x432,0x4bf)]),_0x5607dd['push'](_0x35b9f0/_0x123c4a['particlesTextureSize']);}}}function _0x41507a(_0x19bb26,_0x907ef8){return _0x33b593(_0x907ef8-0x1d1,_0x19bb26);}_0x5607dd=new Float32Array(_0x5607dd);let _0x618403=[];const _0x43200b=[-0x1,0x1];function _0x109eeb(_0x2f4d85,_0xd47be8){return _0x33b593(_0xd47be8-0x38a,_0x2f4d85);}const _0x17f717=[-0x1,0x1];for(let _0x19b256=0x0;_0x19b256<_0x123c4a[_0x41507a(0x46f,0x414)];_0x19b256++){for(let _0x2bbafa=0x0;_0x2bbafa<_0x5e185b/0x2;_0x2bbafa++){for(let _0x57d23f=0x0;_0x57d23f<_0x5e185b/0x2;_0x57d23f++){_0x618403['push'](_0x43200b[_0x2bbafa]),_0x618403['push'](_0x17f717[_0x57d23f]),_0x618403['push'](0x0);}}}_0x618403=new Float32Array(_0x618403);const _0x45585b=0x6*_0x123c4a[_0x109eeb(0x5d4,0x5cd)],_0x3a4277=new Uint32Array(_0x45585b);for(let _0x37cb77=0x0,_0x12e683=0x0,_0x196fdc=0x0;_0x37cb77<_0x123c4a[_0x41507a(0x487,0x414)];_0x37cb77++){_0x3a4277[_0x12e683++]=_0x196fdc+0x0,_0x3a4277[_0x12e683++]=_0x196fdc+0x1,_0x3a4277[_0x12e683++]=_0x196fdc+0x2,_0x3a4277[_0x12e683++]=_0x196fdc+0x2,_0x3a4277[_0x12e683++]=_0x196fdc+0x1,_0x3a4277[_0x12e683++]=_0x196fdc+0x3,_0x196fdc+=0x4;}const _0x5ca5bc=new Cesium$4['Geometry']({'attributes':new Cesium$4['GeometryAttributes']({'st':new Cesium$4[(_0x41507a(0x4e2,0x4c7))]({'componentDatatype':Cesium$4['ComponentDatatype']['FLOAT'],'componentsPerAttribute':0x2,'values':_0x5607dd}),'normal':new Cesium$4['GeometryAttribute']({'componentDatatype':Cesium$4[_0x41507a(0x3d7,0x443)][_0x41507a(0x3ad,0x42e)],'componentsPerAttribute':0x3,'values':_0x618403})}),'indices':_0x3a4277});return _0x5ca5bc;}['createRenderingPrimitives'](_0x4c272b,_0x569851,_0x560efa,_0x5cfa7d){const _0x2478f5=this,_0x517736={};function _0x59271a(_0x6bcec5,_0x265487){return _0x33b593(_0x6bcec5- -0x148,_0x265487);}_0x517736['st']=0x0,_0x517736[_0x59271a(0x195,0x16d)]=0x1;const _0x431ef3={};_0x431ef3[_0x59271a(0x10c,0x14d)]=[segmentDraw_vert];const _0x2fd9c4={};_0x2fd9c4['sources']=[segmentDraw_frag];const _0x241ebf={};_0x241ebf['enabled']=!![];const _0x176211={};_0x176211['viewport']=undefined,_0x176211['depthTest']=_0x241ebf,_0x176211[_0x56f79c(-0x33,-0x3)]=!![];const _0x21b120={};_0x21b120['position']=0x0,_0x21b120['st']=0x1;function _0x56f79c(_0x29d88a,_0x152a32){return _0x2fb72e(_0x152a32- -0x5db,_0x29d88a);}const _0x241eba={};_0x241eba[_0x56f79c(0x29,0x32)]=['DISABLE_GL_POSITION_LOG_DEPTH'],_0x241eba['sources']=[fullscreen_vert];const _0x4eab84={};_0x4eab84['defines']=[_0x59271a(0x1cf,0x19c)],_0x4eab84['sources']=[trailDraw_frag];const _0x3f44cb={};_0x3f44cb['position']=0x0,_0x3f44cb['st']=0x1;const _0x3d8785={};_0x3d8785[_0x59271a(0x1e7,0x263)]=[_0x59271a(0x102,0x18b)],_0x3d8785['sources']=[fullscreen_vert];const _0x596d03={};_0x596d03['defines']=['DISABLE_LOG_DEPTH_FRAGMENT_WRITE'],_0x596d03['sources']=[screenDraw_frag];const _0x304af7={};_0x304af7['enabled']=![];const _0x261e2a={};_0x261e2a[_0x59271a(0x117,0x186)]=!![],this['primitives']={'segments':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x517736,'geometry':this['createSegmentsGeometry'](_0x569851),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'currentParticlesPosition':function(){return _0x5cfa7d['particlesTextures']['currentParticlesPosition'];},'postProcessingPosition':function(){function _0x30d242(_0xed6491,_0x4cdaf5){return _0x56f79c(_0xed6491,_0x4cdaf5-0x5f1);}return _0x5cfa7d['particlesTextures'][_0x30d242(0x5f6,0x5ac)];},'postProcessingSpeed':function(){function _0x338055(_0x53b003,_0x1e46ed){return _0x59271a(_0x53b003- -0x282,_0x1e46ed);}function _0x46acda(_0x77bcbb,_0xe381a5){return _0x59271a(_0xe381a5- -0xb2,_0x77bcbb);}return _0x5cfa7d[_0x46acda(0xfd,0xac)][_0x338055(-0x1a6,-0x1ea)];},'colorTable':function(){function _0x4be10b(_0x2e41d4,_0x27907a){return _0x56f79c(_0x2e41d4,_0x27907a-0xfe);}return _0x2478f5['textures'][_0x4be10b(0x73,0xab)];},'aspect':function(){function _0x438953(_0x7567a7,_0x4f7666){return _0x56f79c(_0x7567a7,_0x4f7666- -0x12);}function _0x4464cc(_0x3b1afb,_0x42d711){return _0x56f79c(_0x3b1afb,_0x42d711-0x73);}return _0x4c272b[_0x438953(-0x2,-0x8)]/_0x4c272b[_0x438953(0xac,0x28)];},'pixelSize':function(){function _0x3cfa9a(_0x4911c1,_0x4430a8){return _0x59271a(_0x4911c1-0x205,_0x4430a8);}return _0x560efa[_0x3cfa9a(0x371,0x31e)];},'lineWidth':function(){function _0x5b18a0(_0x3c890f,_0xee23d8){return _0x56f79c(_0xee23d8,_0x3c890f-0x50b);}return _0x569851[_0x5b18a0(0x4fb,0x4bd)];},'particleHeight':function(){function _0x56a725(_0x9f8dcf,_0x26e0a2){return _0x56f79c(_0x26e0a2,_0x9f8dcf-0x31);}return _0x569851[_0x56a725(0x9,-0x86)];}},'vertexShaderSource':new Cesium$4[(_0x59271a(0x11b,0x122))](_0x431ef3),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x2fd9c4),'rawRenderState':Util[_0x56f79c(-0x139,-0xc2)](_0x176211),'framebuffer':this[_0x59271a(0x15c,0x175)][_0x59271a(0x174,0x10d)],'autoClear':!![]}),'trails':new CustomPrimitive({'commandType':_0x56f79c(-0x6b,-0x62),'attributeLocations':_0x21b120,'geometry':Util[_0x59271a(0x12f,0xe5)](),'primitiveType':Cesium$4['PrimitiveType'][_0x56f79c(-0xd,-0x12)],'uniformMap':{'segmentsColorTexture':function(){function _0x5aa682(_0x3b1084,_0x46a6f5){return _0x56f79c(_0x46a6f5,_0x3b1084-0x111);}return _0x2478f5['textures'][_0x5aa682(0x107,0xe6)];},'segmentsDepthTexture':function(){function _0x33cfc4(_0x140c08,_0xe8d5d1){return _0x56f79c(_0xe8d5d1,_0x140c08-0x4ae);}return _0x2478f5['textures'][_0x33cfc4(0x4d6,0x50c)];},'currentTrailsColor':function(){function _0x3b8020(_0x5843b3,_0x4078f3){return _0x56f79c(_0x4078f3,_0x5843b3- -0x57);}return _0x2478f5['framebuffers']['currentTrails'][_0x3b8020(-0xf6,-0xfc)](0x0);},'trailsDepthTexture':function(){function _0x4da7a2(_0xb2e05e,_0x260ab0){return _0x56f79c(_0x260ab0,_0xb2e05e- -0x42);}return _0x2478f5['framebuffers']['currentTrails'][_0x4da7a2(-0x7,-0x1e)];},'fadeOpacity':function(){function _0x2f63d4(_0x52d7d0,_0x2d4086){return _0x56f79c(_0x52d7d0,_0x2d4086-0x2af);}return _0x569851[_0x2f63d4(0x1fa,0x1f8)];}},'vertexShaderSource':new Cesium$4['ShaderSource'](_0x241eba),'fragmentShaderSource':new Cesium$4[(_0x56f79c(-0x56,-0x9a))](_0x4eab84),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':{'enabled':!![],'func':Cesium$4['DepthFunction'][_0x59271a(0xcf,0xbd)]},'depthMask':!![]}),'framebuffer':this[_0x59271a(0x15c,0x108)]['nextTrails'],'autoClear':!![],'preExecute':function(){const _0x47c80a=_0x2478f5['framebuffers']['currentTrails'];_0x2478f5['framebuffers']['currentTrails']=_0x2478f5['framebuffers']['nextTrails'];function _0x105087(_0x4b6023,_0x11d0e1){return _0x59271a(_0x4b6023-0xe6,_0x11d0e1);}_0x2478f5[_0xd1231b(0x4a7,0x46f)]['nextTrails']=_0x47c80a;function _0xd1231b(_0x57a87a,_0x33f9aa){return _0x59271a(_0x57a87a-0x34b,_0x33f9aa);}_0x2478f5[_0xd1231b(0x49c,0x465)]['trails']['commandToExecute']['framebuffer']=_0x2478f5['framebuffers']['nextTrails'],_0x2478f5['primitives']['trails']['clearCommand']['framebuffer']=_0x2478f5['framebuffers'][_0x105087(0x1f8,0x1fd)];}}),'screen':new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x3f44cb,'geometry':Util[_0x59271a(0x12f,0xfb)](),'primitiveType':Cesium$4['PrimitiveType']['TRIANGLES'],'uniformMap':{'trailsColorTexture':function(){return _0x2478f5['framebuffers']['nextTrails']['getColorTexture'](0x0);},'trailsDepthTexture':function(){function _0x2a7260(_0x41f154,_0x7f8c8){return _0x56f79c(_0x7f8c8,_0x41f154-0x4f4);}return _0x2478f5[_0x2a7260(0x49b,0x433)]['nextTrails']['depthTexture'];}},'vertexShaderSource':new Cesium$4[(_0x56f79c(-0xc,-0x9a))](_0x3d8785),'fragmentShaderSource':new Cesium$4['ShaderSource'](_0x596d03),'rawRenderState':Util['createRawRenderState']({'viewport':undefined,'depthTest':_0x304af7,'depthMask':!![],'blending':_0x261e2a}),'framebuffer':undefined})};}}var getWind_frag='//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat*lev\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec3\x20dimension;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20vec3\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0auniform\x20vec3\x20interval;\x20//\x20interval\x20of\x20each\x20dimension\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20\x20\x20lonLatLev.x\x20=\x20mod(lonLatLev.x,\x20360.0);\x0a\x20\x20\x20\x20lonLatLev.y\x20=\x20clamp(lonLatLev.y,\x20-90.0,\x2090.0);\x0a\x0a\x20\x20\x20\x20vec3\x20index3D\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20index3D.x\x20=\x20(lonLatLev.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20\x20\x20index3D.y\x20=\x20(lonLatLev.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x20\x20\x20\x20index3D.z\x20=\x20(lonLatLev.z\x20-\x20minimum.z)\x20/\x20interval.z;\x0a\x0a\x20\x20\x20\x20//\x20the\x20st\x20texture\x20coordinate\x20corresponding\x20to\x20(col,\x20row)\x20index\x0a\x20\x20\x20\x20//\x20example\x0a\x20\x20\x20\x20//\x20data\x20array\x20is\x20[0,\x201,\x202,\x203,\x204,\x205],\x20width\x20=\x203,\x20height\x20=\x202\x0a\x20\x20\x20\x20//\x20the\x20content\x20of\x20texture\x20will\x20be\x0a\x20\x20\x20\x20//\x20t\x201.0\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x203\x204\x205\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x0a\x20\x20\x20\x20//\x20\x20\x20\x20|\x20\x200\x201\x202\x0a\x20\x20\x20\x20//\x20\x20\x200.0------1.0\x20s\x0a\x0a\x20\x20\x20\x20vec2\x20index2D\x20=\x20vec2(index3D.x,\x20index3D.z\x20*\x20dimension.y\x20+\x20index3D.y);\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20(dimension.y\x20*\x20dimension.z));\x0a\x20\x20\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWind(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLatLev);\x0a\x20\x20\x20\x20float\x20result\x20=\x20texture(windTexture,\x20normalizedIndex2D).r;\x0a\x20\x20\x20\x20return\x20result;\x0a}\x0a\x0aconst\x20mat4\x20kernelMatrix\x20=\x20mat4(\x0a\x20\x20\x20\x200.0,\x20-1.0,\x202.0,\x20-1.0,\x20//\x20first\x20column\x0a\x20\x20\x20\x202.0,\x200.0,\x20-5.0,\x203.0,\x20//\x20second\x20column\x0a\x20\x20\x20\x200.0,\x201.0,\x204.0,\x20-3.0,\x20//\x20third\x20column\x0a\x20\x20\x20\x200.0,\x200.0,\x20-1.0,\x201.0\x20//\x20fourth\x20column\x0a);\x0afloat\x20oneDimensionInterpolation(float\x20t,\x20float\x20p0,\x20float\x20p1,\x20float\x20p2,\x20float\x20p3)\x20{\x0a\x20\x20\x20\x20vec4\x20tVec4\x20=\x20vec4(1.0,\x20t,\x20t\x20*\x20t,\x20t\x20*\x20t\x20*\x20t);\x0a\x20\x20\x20\x20tVec4\x20=\x20tVec4\x20/\x202.0;\x0a\x20\x20\x20\x20vec4\x20pVec4\x20=\x20vec4(p0,\x20p1,\x20p2,\x20p3);\x0a\x20\x20\x20\x20return\x20dot((tVec4\x20*\x20kernelMatrix),\x20pVec4);\x0a}\x0a\x0afloat\x20calculateB(sampler2D\x20windTexture,\x20float\x20t,\x20float\x20lon,\x20float\x20lat,\x20float\x20lev)\x20{\x0a\x20\x20\x20\x20float\x20lon0\x20=\x20floor(lon)\x20-\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon1\x20=\x20floor(lon);\x0a\x20\x20\x20\x20float\x20lon2\x20=\x20floor(lon)\x20+\x201.0\x20*\x20interval.x;\x0a\x20\x20\x20\x20float\x20lon3\x20=\x20floor(lon)\x20+\x202.0\x20*\x20interval.x;\x0a\x0a\x20\x20\x20\x20float\x20p0\x20=\x20getWind(windTexture,\x20vec3(lon0,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p1\x20=\x20getWind(windTexture,\x20vec3(lon1,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p2\x20=\x20getWind(windTexture,\x20vec3(lon2,\x20lat,\x20lev));\x0a\x20\x20\x20\x20float\x20p3\x20=\x20getWind(windTexture,\x20vec3(lon3,\x20lat,\x20lev));\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(t,\x20p0,\x20p1,\x20p2,\x20p3);\x0a}\x0a\x0afloat\x20interpolateOneTexture(sampler2D\x20windTexture,\x20vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20float\x20lon\x20=\x20lonLatLev.x;\x0a\x20\x20\x20\x20float\x20lat\x20=\x20lonLatLev.y;\x0a\x20\x20\x20\x20float\x20lev\x20=\x20lonLatLev.z;\x0a\x0a\x20\x20\x20\x20float\x20lat0\x20=\x20floor(lat)\x20-\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat1\x20=\x20floor(lat);\x0a\x20\x20\x20\x20float\x20lat2\x20=\x20floor(lat)\x20+\x201.0\x20*\x20interval.y;\x0a\x20\x20\x20\x20float\x20lat3\x20=\x20floor(lat)\x20+\x202.0\x20*\x20interval.y;\x0a\x0a\x20\x20\x20\x20vec2\x20coefficient\x20=\x20lonLatLev.xy\x20-\x20floor(lonLatLev.xy);\x0a\x20\x20\x20\x20float\x20b0\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat0,\x20lev);\x0a\x20\x20\x20\x20float\x20b1\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat1,\x20lev);\x0a\x20\x20\x20\x20float\x20b2\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat2,\x20lev);\x0a\x20\x20\x20\x20float\x20b3\x20=\x20calculateB(windTexture,\x20coefficient.x,\x20lon,\x20lat3,\x20lev);\x0a\x0a\x20\x20\x20\x20return\x20oneDimensionInterpolation(coefficient.y,\x20b0,\x20b1,\x20b2,\x20b3);\x0a}\x0a\x0avec3\x20bicubic(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\x0a\x20\x20\x20\x20float\x20u\x20=\x20interpolateOneTexture(U,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20v\x20=\x20interpolateOneTexture(V,\x20lonLatLev);\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20return\x20vec3(u,\x20v,\x20w);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20windVector\x20=\x20bicubic(lonLatLev);\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(windVector,\x200.0);\x0a}\x0a',updateSpeed_frag=_0x2fb72e(0x56d,0x538),updatePosition_frag='uniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0auniform\x20sampler2D\x20currentParticlesSpeed;\x20//\x20(u,\x20v,\x20w,\x20normalization)\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20lengthOfLonLat(vec3\x20lonLatLev)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20\x20\x20float\x20latitude\x20=\x20radians(lonLatLev.y);\x0a\x0a\x20\x20\x20\x20float\x20term1\x20=\x20111132.92;\x0a\x20\x20\x20\x20float\x20term2\x20=\x20559.82\x20*\x20cos(2.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term3\x20=\x201.175\x20*\x20cos(4.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term4\x20=\x200.0023\x20*\x20cos(6.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20\x20\x20float\x20term5\x20=\x20111412.84\x20*\x20cos(latitude);\x0a\x20\x20\x20\x20float\x20term6\x20=\x2093.5\x20*\x20cos(3.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20term7\x20=\x200.118\x20*\x20cos(5.0\x20*\x20latitude);\x0a\x20\x20\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avoid\x20updatePosition(vec3\x20lonLatLev,\x20vec3\x20speed)\x20{\x0a\x20\x20\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLatLev);\x0a\x20\x20\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20\x20\x20float\x20w\x20=\x200.0;\x0a\x20\x20\x20\x20vec3\x20windVectorInLonLatLev\x20=\x20vec3(u,\x20v,\x20w);\x0a\x0a\x20\x20\x20\x20vec3\x20nextParticle\x20=\x20lonLatLev\x20+\x20windVectorInLonLatLev;\x0a\x0a\x20\x20\x20\x20out_FragColor\x20=\x20vec4(nextParticle,\x200.0);\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20\x20\x20vec3\x20lonLatLev\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rgb;\x0a\x20\x20\x20\x20vec3\x20speed\x20=\x20texture(currentParticlesSpeed,\x20v_textureCoordinates).rgb;\x0a\x0a\x20\x20\x20\x20updatePosition(lonLatLev,\x20speed);\x0a}\x0a',postProcessingPosition_frag=_0x2fb72e(0x5ed,0x58e),postProcessingSpeed_frag='uniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20nextParticlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20randomParticle\x20=\x20texture(postProcessingPosition,\x20v_textureCoordinates);\x0a\x20\x20\x20\x20vec4\x20particleSpeed\x20=\x20texture(nextParticlesSpeed,\x20v_textureCoordinates);\x0a\x0a\x20\x20\x20\x20if\x20(randomParticle.a\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20vec4(0.0);\x0a\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20out_FragColor\x20=\x20particleSpeed;\x0a\x20\x20\x20\x20}\x0a}\x0a';const Cesium$3=mars3d__namespace[_0x2fb72e(0x546,0x5d1)];class ParticlesComputing{constructor(_0x407acb,_0x45ba85,_0x4d6ebf,_0x428841){this['data']=_0x45ba85,this['createWindTextures'](_0x407acb,_0x45ba85),this['createParticlesTextures'](_0x407acb,_0x4d6ebf,_0x428841),this['createComputingPrimitives'](_0x45ba85,_0x4d6ebf,_0x428841);}['createWindTextures'](_0x653fe0,_0x527e1a){function _0x381dc5(_0x5d529f,_0x11bac2){return _0x2fb72e(_0x5d529f- -0x6a3,_0x11bac2);}function _0x2db791(_0x1ad2c8,_0x52ce5f){return _0x2fb72e(_0x1ad2c8- -0x2d7,_0x52ce5f);}const _0x1bb50f={'context':_0x653fe0,'width':_0x527e1a['dimensions']['lon'],'height':_0x527e1a['dimensions']['lat']*(_0x527e1a['dimensions']['lev']||0x1),'pixelFormat':Cesium$3['PixelFormat']['LUMINANCE'],'pixelDatatype':Cesium$3[_0x381dc5(-0x128,-0x168)][_0x2db791(0x264,0x2e6)],'flipY':![],'sampler':new Cesium$3[(_0x2db791(0x325,0x2ba))]({'minificationFilter':Cesium$3['TextureMinificationFilter']['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x2db791(0x22c,0x213)]})};this[_0x2db791(0x29f,0x30a)]={'U':Util['createTexture'](_0x1bb50f,_0x527e1a['U']['array']),'V':Util[_0x381dc5(-0x103,-0xb1)](_0x1bb50f,_0x527e1a['V']['array'])};}['createParticlesTextures'](_0x549c45,_0x387eba,_0x17b071){const _0xa7e1ec={'context':_0x549c45,'width':_0x387eba[_0x3c8af1(0x594,0x51c)],'height':_0x387eba['particlesTextureSize'],'pixelFormat':Cesium$3[_0x2f2ba9(0x36e,0x398)][_0x2f2ba9(0x382,0x396)],'pixelDatatype':Cesium$3[_0x2f2ba9(0x410,0x3b2)]['FLOAT'],'flipY':![],'sampler':new Cesium$3['Sampler']({'minificationFilter':Cesium$3[_0x2f2ba9(0x2bd,0x34f)]['NEAREST'],'magnificationFilter':Cesium$3['TextureMagnificationFilter'][_0x3c8af1(0x4dd,0x453)]})},_0x3056b9=this['randomizeParticles'](_0x387eba[_0x3c8af1(0x3e9,0x471)],_0x17b071);function _0x3c8af1(_0x510c86,_0x5e0297){return _0x33b593(_0x5e0297-0x22e,_0x510c86);}function _0x2f2ba9(_0x33ae48,_0x184a58){return _0x2fb72e(_0x184a58- -0x1c9,_0x33ae48);}const _0x4ab732=new Float32Array(0x4*_0x387eba['maxParticles'])['fill'](0x0);this['particlesTextures']={'particlesWind':Util['createTexture'](_0xa7e1ec),'currentParticlesPosition':Util['createTexture'](_0xa7e1ec,_0x3056b9),'nextParticlesPosition':Util['createTexture'](_0xa7e1ec,_0x3056b9),'currentParticlesSpeed':Util['createTexture'](_0xa7e1ec,_0x4ab732),'nextParticlesSpeed':Util['createTexture'](_0xa7e1ec,_0x4ab732),'postProcessingPosition':Util['createTexture'](_0xa7e1ec,_0x3056b9),'postProcessingSpeed':Util['createTexture'](_0xa7e1ec,_0x4ab732)};}['randomizeParticles'](_0x4d50e4,_0x55e536){function _0x449ab0(_0x58e80e,_0x1759e5){return _0x33b593(_0x58e80e-0x2cc,_0x1759e5);}const _0x38eb7f=new Float32Array(0x4*_0x4d50e4);for(let _0x18d702=0x0;_0x18d702<_0x4d50e4;_0x18d702++){_0x38eb7f[0x4*_0x18d702]=Cesium$3[_0x449ab0(0x5f7,0x58e)][_0x449ab0(0x58f,0x5bf)](_0x55e536[_0x21ee8b(0x2a4,0x2c2)]['x'],_0x55e536[_0x449ab0(0x592,0x534)]['y']),_0x38eb7f[0x4*_0x18d702+0x1]=Cesium$3[_0x21ee8b(0x389,0x327)]['randomBetween'](_0x55e536['latRange']['x'],_0x55e536[_0x449ab0(0x5e5,0x57d)]['y']),_0x38eb7f[0x4*_0x18d702+0x2]=Cesium$3['Math']['randomBetween'](this[_0x21ee8b(0x355,0x308)]['lev']['min'],this[_0x449ab0(0x5d8,0x601)][_0x449ab0(0x602,0x615)]['max']),_0x38eb7f[0x4*_0x18d702+0x3]=0x0;}function _0x21ee8b(_0x324196,_0x5c763f){return _0x2fb72e(_0x5c763f- -0x2e2,_0x324196);}return _0x38eb7f;}['destroyParticlesTextures'](){function _0x1e6127(_0x28116c,_0x4fc4c3){return _0x2fb72e(_0x4fc4c3- -0x2d6,_0x28116c);}function _0x3f4f8d(_0xd6fc12,_0x4be7b8){return _0x2fb72e(_0xd6fc12- -0xda,_0x4be7b8);}Object[_0x1e6127(0x301,0x31d)](this[_0x1e6127(0x2d0,0x2ae)])['forEach'](_0x1e9fed=>{function _0xdc73a(_0xe11beb,_0x2b12c3){return _0x1e6127(_0xe11beb,_0x2b12c3- -0x87);}this['particlesTextures'][_0x1e9fed][_0xdc73a(0x205,0x295)]();});}['createComputingPrimitives'](_0x54d78d,_0x3734f2,_0x1dfc5b){const _0x18df20=new Cesium$3[(_0xedfd61(0x53d,0x55b))](_0x54d78d['dimensions']['lon'],_0x54d78d[_0x545c38(0x612,0x592)]['lat'],_0x54d78d[_0xedfd61(0x585,0x575)]['lev']),_0x5086ba=new Cesium$3['Cartesian3'](_0x54d78d['lon'][_0x545c38(0x5b3,0x644)],_0x54d78d['lat']['min'],_0x54d78d[_0x545c38(0x6df,0x691)][_0xedfd61(0x643,0x627)]),_0x30ecf7=new Cesium$3['Cartesian3'](_0x54d78d['lon']['max'],_0x54d78d[_0xedfd61(0x5b3,0x596)][_0xedfd61(0x594,0x554)],_0x54d78d[_0x545c38(0x680,0x691)]['max']),_0x53261d=new Cesium$3[(_0x545c38(0x5be,0x578))]((_0x30ecf7['x']-_0x5086ba['x'])/(_0x18df20['x']-0x1),(_0x30ecf7['y']-_0x5086ba['y'])/(_0x18df20['y']-0x1),_0x18df20['z']>0x1?(_0x30ecf7['z']-_0x5086ba['z'])/(_0x18df20['z']-0x1):0x1),_0x11f0e2=new Cesium$3['Cartesian2'](_0x54d78d['U'][_0xedfd61(0x5bf,0x627)],_0x54d78d['U']['max']);function _0xedfd61(_0x17e53a,_0x5e5ccd){return _0x2fb72e(_0x5e5ccd-0x60,_0x17e53a);}const _0xfab1a9=new Cesium$3[(_0xedfd61(0x697,0x661))](_0x54d78d['V'][_0x545c38(0x65f,0x644)],_0x54d78d['V'][_0xedfd61(0x5cb,0x554)]),_0x53a559=this,_0x2975ff={};_0x2975ff['U']=function(){function _0x2314e4(_0x496b36,_0x363717){return _0xedfd61(_0x496b36,_0x363717- -0x1d7);}return _0x53a559[_0x2314e4(0x439,0x3ff)]['U'];},_0x2975ff['V']=function(){return _0x53a559['windTextures']['V'];},_0x2975ff[_0xedfd61(0x4c7,0x557)]=function(){function _0x1b8c26(_0x3a5bc4,_0x182670){return _0xedfd61(_0x182670,_0x3a5bc4- -0x434);}function _0x33813a(_0x1d0d72,_0x33c67e){return _0x545c38(_0x33c67e,_0x1d0d72- -0x54f);}return _0x53a559[_0x1b8c26(0x1b0,0x164)][_0x1b8c26(0x123,0x194)];},_0x2975ff['dimension']=function(){return _0x18df20;},_0x2975ff['minimum']=function(){return _0x5086ba;},_0x2975ff['maximum']=function(){return _0x30ecf7;},_0x2975ff['interval']=function(){return _0x53261d;};const _0x5de4d5={};_0x5de4d5[_0x545c38(0x576,0x5af)]=[getWind_frag];const _0x56db64={};_0x56db64[_0x545c38(0x579,0x5af)]=[updateSpeed_frag];function _0x545c38(_0x44bec3,_0x40ea68){return _0x2fb72e(_0x40ea68-0x7d,_0x44bec3);}const _0x2fc99e={};_0x2fc99e['sources']=[updatePosition_frag];const _0x22b729={};_0x22b729['sources']=[postProcessingPosition_frag];const _0x4a4094={};_0x4a4094['sources']=[postProcessingSpeed_frag],this['primitives']={'getWind':new CustomPrimitive({'commandType':'Compute','uniformMap':_0x2975ff,'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x5de4d5),'outputTexture':this[_0xedfd61(0x5f6,0x5e4)][_0xedfd61(0x67a,0x647)],'preExecute':function(){function _0x4d2383(_0x4ed32a,_0x504a3c){return _0x545c38(_0x504a3c,_0x4ed32a- -0x106);}function _0x9acca6(_0x2d5b19,_0x59a0f8){return _0x545c38(_0x2d5b19,_0x59a0f8- -0x5de);}_0x53a559['primitives'][_0x4d2383(0x577,0x4ee)][_0x4d2383(0x547,0x54a)][_0x4d2383(0x4c1,0x54b)]=_0x53a559['particlesTextures'][_0x4d2383(0x55e,0x59c)];}}),'updateSpeed':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesSpeed':function(){function _0x41f6f7(_0x3d74a5,_0x53ce6f){return _0x545c38(_0x3d74a5,_0x53ce6f- -0x223);}return _0x53a559['particlesTextures'][_0x41f6f7(0x361,0x364)];},'particlesWind':function(){function _0x4e6863(_0xa75898,_0x5643e0){return _0x545c38(_0x5643e0,_0xa75898- -0x463);}return _0x53a559[_0x4e6863(0x19e,0x1f1)]['particlesWind'];},'uSpeedRange':function(){return _0x11f0e2;},'vSpeedRange':function(){return _0xfab1a9;},'pixelSize':function(){return _0x1dfc5b['pixelSize'];},'speedFactor':function(){function _0x4092f5(_0x4278c0,_0x243e78){return _0xedfd61(_0x4278c0,_0x243e78- -0x719);}return _0x3734f2[_0x4092f5(-0x198,-0x151)];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x56db64),'outputTexture':this[_0x545c38(0x62b,0x601)]['nextParticlesSpeed'],'preExecute':function(){const _0x495ecf=_0x53a559['particlesTextures'][_0x13ae19(-0x17a,-0x1d3)];function _0x13ae19(_0x110e27,_0x580b72){return _0x545c38(_0x110e27,_0x580b72- -0x75a);}_0x53a559[_0x13ae19(-0x11e,-0x159)]['currentParticlesSpeed']=_0x53a559[_0x13ae19(-0x1d6,-0x159)][_0x5c4847(0xb,-0x76)],_0x53a559[_0x5c4847(0x8d,0xa)][_0x5c4847(0xb,0x95)]=_0x495ecf;function _0x5c4847(_0x555bed,_0x567d16){return _0x545c38(_0x567d16,_0x555bed- -0x574);}_0x53a559['primitives']['updateSpeed']['commandToExecute']['outputTexture']=_0x53a559[_0x13ae19(-0x14e,-0x159)]['nextParticlesSpeed'];}}),'updatePosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'currentParticlesPosition':function(){function _0x6eddc6(_0x12ccb0,_0x5b82ca){return _0x545c38(_0x5b82ca,_0x12ccb0- -0x444);}function _0x16a881(_0x356cc4,_0xf51e4d){return _0xedfd61(_0x356cc4,_0xf51e4d- -0x5f9);}return _0x53a559[_0x6eddc6(0x1bd,0x23c)][_0x6eddc6(0x130,0xa2)];},'currentParticlesSpeed':function(){function _0x4e2b85(_0xa8bf2e,_0x19d876){return _0x545c38(_0x19d876,_0xa8bf2e- -0x4b8);}return _0x53a559[_0x4e2b85(0x149,0x1b0)]['currentParticlesSpeed'];}},'fragmentShaderSource':new Cesium$3[(_0x545c38(0x5f2,0x5be))](_0x2fc99e),'outputTexture':this[_0x545c38(0x68c,0x601)]['nextParticlesPosition'],'preExecute':function(){const _0x4cfa46=_0x53a559['particlesTextures'][_0x335e25(-0x197,-0x20a)];_0x53a559[_0x26d5db(-0x140,-0xf0)]['currentParticlesPosition']=_0x53a559[_0x335e25(-0x10a,-0x150)]['postProcessingPosition'],_0x53a559[_0x335e25(-0x10a,-0x128)]['postProcessingPosition']=_0x4cfa46;function _0x335e25(_0x45658b,_0x34d44a){return _0xedfd61(_0x34d44a,_0x45658b- -0x6ee);}function _0x26d5db(_0x5e3778,_0x170d80){return _0xedfd61(_0x170d80,_0x5e3778- -0x724);}_0x53a559['primitives']['updatePosition']['commandToExecute'][_0x335e25(-0x144,-0x19f)]=_0x53a559['particlesTextures'][_0x26d5db(-0x145,-0x176)];}}),'postProcessingPosition':new CustomPrimitive({'commandType':'Compute','uniformMap':{'nextParticlesPosition':function(){function _0x1605b4(_0x49203e,_0x3f10d2){return _0x545c38(_0x3f10d2,_0x49203e-0x11);}return _0x53a559['particlesTextures'][_0x1605b4(0x60d,0x63b)];},'nextParticlesSpeed':function(){return _0x53a559['particlesTextures']['nextParticlesSpeed'];},'lonRange':function(){function _0x4750cc(_0x46b4ab,_0x3705cf){return _0xedfd61(_0x46b4ab,_0x3705cf- -0x3df);}return _0x1dfc5b[_0x4750cc(0x282,0x225)];},'latRange':function(){return _0x1dfc5b['latRange'];},'randomCoefficient':function(){const _0x2da488=Math['random']();return _0x2da488;},'dropRate':function(){function _0x22eef0(_0x5d7712,_0x4274ca){return _0x545c38(_0x4274ca,_0x5d7712- -0x5ce);}return _0x3734f2[_0x22eef0(-0x1c,-0x4a)];},'dropRateBump':function(){return _0x3734f2['dropRateBump'];}},'fragmentShaderSource':new Cesium$3['ShaderSource'](_0x22b729),'outputTexture':this[_0xedfd61(0x575,0x5e4)]['postProcessingPosition'],'preExecute':function(){function _0x49400e(_0x8ee604,_0x5c55a4){return _0x545c38(_0x5c55a4,_0x8ee604- -0x131);}function _0x168311(_0xaef965,_0x26633b){return _0xedfd61(_0xaef965,_0x26633b- -0x74d);}_0x53a559[_0x49400e(0x4c3,0x4af)][_0x49400e(0x4e2,0x556)][_0x49400e(0x51c,0x591)][_0x49400e(0x496,0x41f)]=_0x53a559['particlesTextures']['postProcessingPosition'];}}),'postProcessingSpeed':new CustomPrimitive({'commandType':_0xedfd61(0x5e7,0x5ef),'uniformMap':{'postProcessingPosition':function(){function _0xfee862(_0x457091,_0xd7e185){return _0x545c38(_0x457091,_0xd7e185- -0x95);}return _0x53a559['particlesTextures'][_0xfee862(0x59f,0x57e)];},'nextParticlesSpeed':function(){function _0x5779d8(_0x115330,_0x4b5b3f){return _0xedfd61(_0x4b5b3f,_0x115330- -0x501);}function _0x1ba6df(_0x244ace,_0x66ea9e){return _0x545c38(_0x244ace,_0x66ea9e-0x22);}return _0x53a559[_0x1ba6df(0x655,0x623)][_0x1ba6df(0x5f2,0x60b)];}},'fragmentShaderSource':new Cesium$3[(_0xedfd61(0x5e4,0x5a1))](_0x4a4094),'outputTexture':this[_0x545c38(0x669,0x601)][_0x545c38(0x5ff,0x57f)],'preExecute':function(){function _0x3f315c(_0x2d259b,_0x1dcb6e){return _0x545c38(_0x1dcb6e,_0x2d259b- -0x510);}function _0x5695b0(_0x547621,_0x43529f){return _0x545c38(_0x43529f,_0x547621- -0x194);}_0x53a559['primitives']['postProcessingSpeed'][_0x5695b0(0x4b9,0x454)]['outputTexture']=_0x53a559[_0x5695b0(0x46d,0x453)]['postProcessingSpeed'];}})};}}const Cesium$2=mars3d__namespace[_0x2fb72e(0x546,0x59e)];class ParticleSystem{constructor(_0x1d0b93,_0x4220e8,_0x55360a,_0xf77c53){this['context']=_0x1d0b93,_0x4220e8={..._0x4220e8};function _0x462f5b(_0x5083af,_0x2ceb2b){return _0x2fb72e(_0x2ceb2b-0x13,_0x5083af);}_0x4220e8['udata']&&_0x4220e8['vdata']&&(_0x4220e8[_0x465249(-0xff,-0x7f)]={},_0x4220e8['dimensions']['lon']=_0x4220e8['cols'],_0x4220e8['dimensions']['lat']=_0x4220e8['rows'],_0x4220e8['dimensions'][_0x462f5b(0x606,0x627)]=_0x4220e8[_0x465249(0x1b,0x80)]||0x1,_0x4220e8['lon']={},_0x4220e8[_0x465249(-0x58,-0x3)]['min']=_0x4220e8[_0x462f5b(0x538,0x5c1)],_0x4220e8[_0x462f5b(0x521,0x5a4)]['max']=_0x4220e8[_0x465249(0x2a,0x49)],_0x4220e8['lat']={},_0x4220e8[_0x465249(-0x64,-0x5e)]['min']=_0x4220e8['ymin'],_0x4220e8['lat']['max']=_0x4220e8['ymax'],_0x4220e8[_0x465249(0x50,0x80)]={},_0x4220e8['lev']['min']=_0x4220e8[_0x462f5b(0x4eb,0x54d)]??0x1,_0x4220e8[_0x462f5b(0x62b,0x627)]['max']=_0x4220e8['levmax']??0x1,_0x4220e8['U']={},_0x4220e8['U']['array']=new Float32Array(_0x4220e8[_0x462f5b(0x606,0x5cc)]),_0x4220e8['U']['min']=_0x4220e8['umin']??Math['min'](..._0x4220e8[_0x465249(0x71,0x25)]),_0x4220e8['U'][_0x465249(-0x6a,-0xa0)]=_0x4220e8[_0x465249(0x8f,0x73)]??Math['max'](..._0x4220e8[_0x465249(0x5d,0x25)]),_0x4220e8['V']={},_0x4220e8['V'][_0x462f5b(0x544,0x53f)]=new Float32Array(_0x4220e8['vdata']),_0x4220e8['V'][_0x465249(-0xc,0x33)]=_0x4220e8[_0x462f5b(0x4a4,0x51a)]??Math[_0x462f5b(0x619,0x5da)](..._0x4220e8[_0x462f5b(0x5e5,0x5cf)]),_0x4220e8['V'][_0x462f5b(0x4cb,0x507)]=_0x4220e8['vmax']??Math['max'](..._0x4220e8[_0x462f5b(0x659,0x5cf)]));this['data']=_0x4220e8,this['options']=_0x55360a;function _0x465249(_0x427220,_0x278812){return _0x2fb72e(_0x278812- -0x594,_0x427220);}this['viewerParameters']=_0xf77c53,this[_0x462f5b(0x4f5,0x561)]=new ParticlesComputing(this[_0x465249(0x63,0x58)],this['data'],this[_0x465249(0xb4,0x24)],this['viewerParameters']),this[_0x465249(0x95,0x41)]=new ParticlesRendering(this['context'],this['data'],this['options'],this['viewerParameters'],this['particlesComputing']);}['canvasResize'](_0x286904){this['particlesComputing'][_0x328629(0x298,0x229)](),Object['keys'](this[_0x328629(0x2c6,0x24a)][_0xec674e(0x171,0x137)])['forEach'](_0x37abb9=>{function _0x35c308(_0x4ebf01,_0x51ceed){return _0x328629(_0x4ebf01-0x1c,_0x51ceed);}this['particlesComputing'][_0x35c308(0x30a,0x29d)][_0x37abb9]['destroy']();}),this[_0xec674e(0x1d0,0x17d)][_0x328629(0x338,0x3aa)]['colorTable'][_0x328629(0x36a,0x3e9)]();function _0x328629(_0x43e529,_0x4a84b5){return _0x33b593(_0x43e529-0x56,_0x4a84b5);}function _0xec674e(_0x23a003,_0x128256){return _0x33b593(_0x23a003- -0x127,_0x128256);}Object['keys'](this[_0x328629(0x34d,0x340)][_0x328629(0x2fa,0x2fe)])['forEach'](_0x5b41fa=>{function _0x42adb7(_0x5d2a0a,_0x9f2c32){return _0x328629(_0x5d2a0a-0x8,_0x9f2c32);}function _0x41b745(_0x5ac5b9,_0x40ca81){return _0x328629(_0x40ca81-0x2f3,_0x5ac5b9);}this[_0x42adb7(0x355,0x359)]['framebuffers'][_0x5b41fa][_0x42adb7(0x372,0x2ef)]();}),this['context']=_0x286904,this[_0x328629(0x2c6,0x30b)]=new ParticlesComputing(this[_0xec674e(0x1e7,0x18f)],this['data'],this[_0xec674e(0x1b3,0x146)],this[_0x328629(0x29a,0x2fd)]),this['particlesRendering']=new ParticlesRendering(this[_0x328629(0x364,0x3ea)],this[_0x328629(0x362,0x36e)],this['options'],this['viewerParameters'],this[_0x328629(0x2c6,0x2a7)]);}['clearFramebuffers'](){const _0x191b33=new Cesium$2['ClearCommand']({'color':new Cesium$2['Color'](0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Cesium$2['Pass']['OPAQUE']});Object['keys'](this['particlesRendering']['framebuffers'])['forEach'](_0x29e4a6=>{function _0xbbb958(_0x5d2b4a,_0x3cfa3a){return _0x3de5(_0x5d2b4a-0x2cb,_0x3cfa3a);}_0x191b33['framebuffer']=this['particlesRendering'][_0x2787bf(0x3ed,0x360)][_0x29e4a6];function _0x2787bf(_0x16ce1a,_0xc824a5){return _0x3de5(_0xc824a5-0x118,_0x16ce1a);}_0x191b33['execute'](this[_0x2787bf(0x350,0x3ca)]);});}['refreshParticles'](_0x3c8954){this[_0x9973d2(-0xa0,-0x90)](),this[_0x9973d2(-0xc,-0x9a)]['destroyParticlesTextures']();function _0x9973d2(_0x2d539b,_0x213641){return _0x33b593(_0x213641- -0x30a,_0x2d539b);}function _0x46ccf6(_0x23cab4,_0x2aa663){return _0x33b593(_0x2aa663- -0x2a4,_0x23cab4);}this[_0x46ccf6(-0x2d,-0x34)][_0x9973d2(-0xb1,-0x79)](this['context'],this[_0x46ccf6(-0x4f,0x36)],this[_0x46ccf6(-0x7f,-0x60)]);if(_0x3c8954){var _0xbac764;const _0x45fd97=this[_0x46ccf6(-0x3f,0x53)][_0x46ccf6(-0x3f,0x1a)](this['options']);this[_0x46ccf6(0x84,0x53)]['primitives'][_0x9973d2(-0x63,-0x4e)][_0x9973d2(-0x4b,-0x7d)]=_0x45fd97;const _0x40a760=Cesium$2[_0x9973d2(-0x70,-0x82)]['fromGeometry']({'context':this[_0x46ccf6(0xea,0x6a)],'geometry':_0x45fd97,'attributeLocations':this['particlesRendering']['primitives']['segments'][_0x46ccf6(0x76,0x3)],'bufferUsage':Cesium$2[_0x46ccf6(-0xda,-0x4e)]['STATIC_DRAW']});(_0xbac764=this[_0x46ccf6(0xc,0x53)][_0x46ccf6(-0x43,-0xb)])!==null&&_0xbac764!==void 0x0&&(_0xbac764=_0xbac764[_0x46ccf6(-0x71,0x18)])!==null&&_0xbac764!==void 0x0&&_0xbac764[_0x9973d2(0x40,-0x18)]&&(this['particlesRendering']['primitives'][_0x9973d2(-0x9b,-0x4e)]['commandToExecute'][_0x46ccf6(0x47,-0x42)]=_0x40a760);}}['setOptions'](_0x1921bd){let _0x1c5141=![];function _0x50ef22(_0x17b135,_0x416196){return _0x2fb72e(_0x416196- -0x410,_0x17b135);}this[_0x50ef22(0x225,0x1a8)]['maxParticles']!==_0x1921bd['maxParticles']&&(_0x1c5141=!![]);Object[_0x279d47(0x63c,0x5ab)](_0x1921bd)[_0x279d47(0x5ae,0x55a)](_0x2148b7=>{this['options'][_0x2148b7]=_0x1921bd[_0x2148b7];});function _0x279d47(_0x45fb46,_0x47e31f){return _0x2fb72e(_0x47e31f- -0x48,_0x45fb46);}this['refreshParticles'](_0x1c5141);}[_0x2fb72e(0x5a9,0x5e7)](_0x292535){function _0x3baa82(_0x5afec0,_0x257dc1){return _0x2fb72e(_0x5afec0- -0x36d,_0x257dc1);}function _0x34a971(_0x5f8496,_0x375385){return _0x2fb72e(_0x5f8496- -0x3ff,_0x375385);}Object[_0x34a971(0x1f4,0x1da)](_0x292535)['forEach'](_0x34ad84=>{this['viewerParameters'][_0x34ad84]=_0x292535[_0x34ad84];}),this[_0x3baa82(0x1f8,0x196)](![]);}['destroy'](){clearTimeout(this['canrefresh']),this['particlesComputing']['destroyParticlesTextures'](),Object['keys'](this['particlesComputing']['windTextures'])['forEach'](_0x6243e0=>{function _0x24c98b(_0x1027d8,_0x53c0fb){return _0x3de5(_0x53c0fb-0xa9,_0x1027d8);}this['particlesComputing']['windTextures'][_0x6243e0][_0x24c98b(0x3d8,0x361)]();});function _0x25ac7b(_0x3a7ba7,_0x3ebb09){return _0x2fb72e(_0x3a7ba7- -0x3b0,_0x3ebb09);}function _0x4df28e(_0x190baf,_0x46073b){return _0x33b593(_0x190baf-0x1b9,_0x46073b);}this[_0x25ac7b(0x225,0x289)]['textures']['colorTable'][_0x4df28e(0x4cd,0x4af)](),Object['keys'](this['particlesRendering']['framebuffers'])['forEach'](_0x2fb922=>{this['particlesRendering']['framebuffers'][_0x2fb922]['destroy']();});for(const _0x324033 in this){delete this[_0x324033];}}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer']['BaseLayer'],_0x320cef={};_0x320cef['particlesNumber']=0x1000,_0x320cef['fixedHeight']=0x0,_0x320cef['fadeOpacity']=0.996,_0x320cef[_0x2fb72e(0x535,0x4da)]=0.003,_0x320cef['dropRateBump']=0.01,_0x320cef['speedFactor']=0.5,_0x320cef['lineWidth']=0x2,_0x320cef['colors']=['rgb(206,255,255)'];const DEF_OPTIONS=_0x320cef;class WindLayer extends BaseLayer$1{constructor(_0x5f15dc={}){_0x5f15dc={...DEF_OPTIONS,..._0x5f15dc},super(_0x5f15dc),this['_setOptionsHook'](_0x5f15dc);}get['layer'](){return this['primitives'];}get['data'](){function _0x147220(_0x5097eb,_0x3054e1){return _0x2fb72e(_0x3054e1- -0x33f,_0x5097eb);}return this[_0x147220(0x1a1,0x20e)];}set['data'](_0x524250){function _0x509255(_0x10c747,_0xd08a8b){return _0x2fb72e(_0xd08a8b- -0x3dd,_0x10c747);}this[_0x509255(0xd6,0x137)](_0x524250);}get[_0x33b593(0x2bb,0x26f)](){function _0x1c08ea(_0x382200,_0x22e654){return _0x33b593(_0x382200-0x355,_0x22e654);}function _0x563cd7(_0x5f2ef5,_0x52fc78){return _0x2fb72e(_0x5f2ef5- -0x703,_0x52fc78);}return this[_0x563cd7(-0x14b,-0x115)][_0x1c08ea(0x610,0x61b)];}set['colors'](_0x12a6f4){this[_0x27186b(0x28e,0x316)]['colors']=_0x12a6f4;function _0x16799a(_0x2e3d12,_0x52b0a0){return _0x2fb72e(_0x2e3d12- -0x147,_0x52b0a0);}if(this[_0x16799a(0x476,0x472)]){const _0x30308c={};_0x30308c[_0x27186b(0x26f,0x2b4)]=_0x12a6f4,this['particleSystem'][_0x27186b(0x25f,0x213)](_0x30308c);}function _0x27186b(_0x3eb04c,_0x3d625e){return _0x2fb72e(_0x3eb04c- -0x32a,_0x3d625e);}this['resize']();}['_mountedHook'](){}['_addedHook'](){this['scene']=this['_map']['scene'],this['camera']=this['_map']['camera'];function _0x33d756(_0x1e831c,_0xf8cb9b){return _0x2fb72e(_0xf8cb9b- -0x319,_0x1e831c);}this['primitives']=new Cesium$1['PrimitiveCollection'](),this['_map']['scene']['primitives']['add'](this[_0x5c7ab8(0x132,0x196)]),this['viewerParameters']={'lonRange':new Cesium$1[(_0x33d756(0x366,0x2e8))](),'latRange':new Cesium$1['Cartesian2'](),'pixelSize':0x0},this['globeBoundingSphere']=new Cesium$1[(_0x5c7ab8(0x1a4,0x20e))](Cesium$1[_0x5c7ab8(0x12d,0x11a)]['ZERO'],0.99*0x615299),this['updateViewerParameters']();function _0x5c7ab8(_0x47d81f,_0x405ee9){return _0x2fb72e(_0x405ee9- -0x3e1,_0x47d81f);}window['addEventListener'](_0x5c7ab8(0x2bb,0x231),this[_0x33d756(0x358,0x2f9)]['bind'](this),![]),this['mouse_down']=![],this['mouse_move']=![],this[_0x33d756(0x210,0x24a)]['on'](mars3d__namespace[_0x5c7ab8(0x246,0x1d3)]['wheel'],this['_onMapWhellEvent'],this),this['_map']['on'](mars3d__namespace[_0x33d756(0x256,0x29b)]['mouseDown'],this[_0x5c7ab8(0x2a4,0x215)],this),this[_0x5c7ab8(0x11e,0x182)]['on'](mars3d__namespace[_0x5c7ab8(0x202,0x1d3)]['mouseUp'],this['_onMouseUpEvent'],this),this['_map']['on'](mars3d__namespace[_0x5c7ab8(0x206,0x1d3)]['mouseMove'],this[_0x33d756(0x329,0x2a5)],this),this[_0x33d756(0x1e5,0x234)]&&this['setData'](this['_data']);}[_0x33b593(0x328,0x37e)](){function _0x1e1626(_0x2ee78f,_0x2d6e17){return _0x33b593(_0x2ee78f-0xcc,_0x2d6e17);}window[_0x1e1626(0x2fc,0x311)](_0x1e1626(0x400,0x425),this['resize']),this['_map']['off'](mars3d__namespace[_0x94fbab(-0x6e,0x5)]['preRender'],this[_0x1e1626(0x391,0x3f1)],this);function _0x94fbab(_0x33e409,_0x2921f8){return _0x2fb72e(_0x33e409- -0x622,_0x2921f8);}this[_0x1e1626(0x351,0x33a)]['off'](mars3d__namespace['EventType']['wheel'],this[_0x1e1626(0x3c8,0x40b)],this),this['_map'][_0x94fbab(-0x10f,-0x145)](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map'][_0x94fbab(-0x10f,-0x93)](mars3d__namespace['EventType'][_0x1e1626(0x3d9,0x43f)],this[_0x1e1626(0x319,0x364)],this),this[_0x94fbab(-0xbf,-0x44)][_0x1e1626(0x301,0x337)](mars3d__namespace[_0x1e1626(0x3a2,0x32f)][_0x94fbab(-0xc6,-0x7b)],this[_0x94fbab(-0x64,0x19)],this),this[_0x1e1626(0x365,0x3a1)][_0x94fbab(-0xf4,-0x143)](),this['_map']['scene'][_0x1e1626(0x365,0x3b7)]['remove'](this['primitives']);}[_0x33b593(0x334,0x309)](){if(!this['show']||!this[_0x464745(0x546,0x506)])return;this['primitives']['show']=![];function _0x3e9772(_0x2717f5,_0x189667){return _0x33b593(_0x189667- -0x1b0,_0x2717f5);}this[_0x3e9772(0xa1,0xe9)][_0x464745(0x4b7,0x4f6)]();function _0x464745(_0x37b669,_0x1aa5f2){return _0x2fb72e(_0x37b669- -0x77,_0x1aa5f2);}this[_0x464745(0x4ec,0x4e4)]['once'](mars3d__namespace[_0x464745(0x53d,0x529)][_0x464745(0x51c,0x57e)],this[_0x464745(0x52c,0x522)],this);}[_0x33b593(0x2c5,0x2c7)](_0x28578b){function _0x2adfc5(_0x107fe3,_0x5e4c69){return _0x33b593(_0x107fe3-0xdb,_0x5e4c69);}function _0x2c98dd(_0x5e2c61,_0x2b24b5){return _0x2fb72e(_0x5e2c61- -0x257,_0x2b24b5);}this['particleSystem']['canvasResize'](this['scene']['context']),this[_0x2c98dd(0x2af,0x260)](),this[_0x2c98dd(0x320,0x321)][_0x2adfc5(0x301,0x2de)]=!![];}['_onMapWhellEvent'](_0x2bdf92){function _0xe4161(_0xee5e34,_0xc0e4f2){return _0x33b593(_0xc0e4f2- -0xd8,_0xee5e34);}function _0x1d5089(_0x1f62e1,_0x5a0e5a){return _0x33b593(_0x1f62e1-0x238,_0x5a0e5a);}clearTimeout(this['refreshTimer']);if(!this[_0xe4161(0x1c4,0x14e)]||!this[_0x1d5089(0x517,0x51d)])return;this[_0x1d5089(0x4d1,0x48f)]['show']=![],this[_0xe4161(0x171,0x1c7)]=setTimeout(()=>{function _0x525acb(_0x240d7a,_0x47b9e1){return _0x1d5089(_0x240d7a- -0x63b,_0x47b9e1);}function _0xee2403(_0x51ee9c,_0x36b274){return _0x1d5089(_0x36b274- -0x562,_0x51ee9c);}if(!this[_0x525acb(-0x1dd,-0x227)])return;this[_0x525acb(-0x1a8,-0x20d)]();},0xc8);}['_onMouseDownEvent'](_0x58ac1e){this['mouse_down']=!![];}['_onMouseMoveEvent'](_0x3ef0c8){function _0x33ba0e(_0x1abb51,_0x28ae39){return _0x33b593(_0x28ae39- -0x3fb,_0x1abb51);}if(!this[_0x33ba0e(-0x15e,-0x1d5)]||!this['particleSystem'])return;this['mouse_down']&&(this['primitives']['show']=![],this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x336f21){if(!this['show']||!this[_0x549870(0x325,0x30f)])return;this['mouse_down']&&this['mouse_move']&&this['redraw']();this['primitives'][_0x549870(0x26c,0x1d9)]=!![];function _0x549870(_0x4d1c0f,_0x5bb9ad){return _0x2fb72e(_0x4d1c0f- -0x298,_0x5bb9ad);}this['mouse_down']=![];function _0x160110(_0xfb18f9,_0x48d72e){return _0x2fb72e(_0xfb18f9-0x64,_0x48d72e);}this['mouse_move']=![];}[_0x2fb72e(0x539,0x579)](){function _0x20d722(_0x4b328b,_0x2f6451){return _0x2fb72e(_0x4b328b-0x67,_0x2f6451);}function _0xef7646(_0x5da2e7,_0xdf054f){return _0x2fb72e(_0x5da2e7- -0x223,_0xdf054f);}if(!this[_0x20d722(0x5ca,0x5d1)]||!this[_0xef7646(0x2e1,0x35c)])return;this['updateViewerParameters'](),this['particleSystem']['applyViewerParameters'](this['viewerParameters']),this['primitives']['show']=!![];}[_0x33b593(0x236,0x1e6)](_0x3a726a){this['_data']=_0x3a726a;function _0x2b78cd(_0x1c7278,_0x4da3c1){return _0x33b593(_0x1c7278-0x1b3,_0x4da3c1);}this['particleSystem']&&this[_0x2b78cd(0x492,0x498)]['destroy']();function _0xd27fda(_0x51560c,_0x25f7e1){return _0x33b593(_0x25f7e1-0xd7,_0x51560c);}this[_0x2b78cd(0x492,0x4c4)]=new ParticleSystem(this['scene'][_0x2b78cd(0x4c1,0x4c1)],_0x3a726a,this['getOptions'](),this['viewerParameters']),this[_0x2b78cd(0x3db,0x394)]();}[_0x2fb72e(0x5ff,0x5ce)](_0x4cba21,_0x4012ba){if(_0x4cba21)for(const _0x1f27b5 in _0x4cba21){this[_0x1f27b5]=_0x4cba21[_0x1f27b5];}this['particleSystem']&&this['particleSystem']['setOptions'](this['getOptions']());}['getOptions'](){const _0x5659e1=Math[_0x250e46(0x437,0x3a6)](Math[_0x250e46(0x446,0x3c3)](this['particlesNumber']));this[_0xbc16e5(0x221,0x258)]=_0x5659e1*_0x5659e1;const _0x2a00f2={};_0x2a00f2[_0x250e46(0x4d0,0x44b)]=_0x5659e1,_0x2a00f2['maxParticles']=this['particlesNumber'];function _0x250e46(_0xaef412,_0x3c4482){return _0x33b593(_0x3c4482-0x15d,_0xaef412);}function _0xbc16e5(_0x20ebb3,_0x29e555){return _0x2fb72e(_0x29e555- -0x328,_0x20ebb3);}return _0x2a00f2['particleHeight']=this['fixedHeight'],_0x2a00f2['fadeOpacity']=this['fadeOpacity'],_0x2a00f2[_0xbc16e5(0x226,0x20d)]=this[_0x250e46(0x327,0x3b4)],_0x2a00f2['dropRateBump']=this['dropRateBump'],_0x2a00f2['speedFactor']=this[_0x250e46(0x3e6,0x3e7)],_0x2a00f2['lineWidth']=this['lineWidth'],_0x2a00f2['colors']=this['colors'],_0x2a00f2;}['addPrimitives'](){this['primitives'][_0x167c75(0x145,0x163)](this['particleSystem']['particlesComputing']['primitives']['getWind']),this['primitives'][_0x249084(0x8f,0x93)](this[_0x249084(0x7d,0x10e)]['particlesComputing'][_0x167c75(0x128,0x10b)][_0x167c75(0x12d,0xf4)]),this[_0x249084(0x37,-0x27)][_0x167c75(0x1a3,0x163)](this[_0x249084(0x7d,0x85)][_0x167c75(0x7b,0xe2)]['primitives']['updatePosition']),this['primitives']['add'](this['particleSystem'][_0x249084(0xe,0x8b)]['primitives']['postProcessingPosition']);function _0x249084(_0x33297,_0x387a19){return _0x33b593(_0x33297- -0x262,_0x387a19);}this[_0x167c75(0x133,0x10b)][_0x249084(0x8f,0x9f)](this[_0x167c75(0x1d2,0x151)]['particlesComputing'][_0x167c75(0xa5,0x10b)]['postProcessingSpeed']);function _0x167c75(_0x3cd553,_0x4df602){return _0x33b593(_0x4df602- -0x18e,_0x3cd553);}this['primitives']['add'](this['particleSystem'][_0x249084(0x95,0x86)][_0x249084(0x37,0x27)]['segments']),this['primitives']['add'](this['particleSystem'][_0x167c75(0xea,0x169)]['primitives']['trails']),this['primitives']['add'](this[_0x167c75(0x163,0x151)][_0x249084(0x95,0x42)][_0x167c75(0xf5,0x10b)][_0x249084(-0x2e,0x44)]);}['updateViewerParameters'](){let _0x643769=this[_0x1ff4c2(0x2b6,0x336)][_0x1ff4c2(0x34e,0x37f)](this[_0x1ff4c2(0x32c,0x3ac)][_0x2fa27c(0x5f5,0x5cb)][_0x2fa27c(0x5c5,0x5d6)]);if(!_0x643769){const _0x1cbb26=this['_map']['getExtent']();_0x643769=Cesium$1['Rectangle']['fromDegrees'](_0x1cbb26['xmin'],_0x1cbb26[_0x2fa27c(0x611,0x5e7)],_0x1cbb26[_0x1ff4c2(0x394,0x35e)],_0x1cbb26['ymax']);}const _0x2474c5=Util['viewRectangleToLonLatRange'](_0x643769);this[_0x1ff4c2(0x2d9,0x302)]['lonRange']['x']=_0x2474c5['lon'][_0x2fa27c(0x52d,0x5ac)],this['viewerParameters']['lonRange']['y']=_0x2474c5['lon']['max'];function _0x2fa27c(_0x15278a,_0x3a5967){return _0x33b593(_0x3a5967-0x2c3,_0x15278a);}this['viewerParameters']['latRange']['x']=_0x2474c5['lat'][_0x1ff4c2(0x37e,0x313)];function _0x1ff4c2(_0x519ea1,_0x4e42a8){return _0x33b593(_0x519ea1-0x95,_0x4e42a8);}this['viewerParameters'][_0x2fa27c(0x560,0x5dc)]['y']=_0x2474c5['lat'][_0x2fa27c(0x4de,0x4d9)];const _0x54ba19=this['camera'][_0x2fa27c(0x5da,0x555)](this['globeBoundingSphere'],this['scene']['drawingBufferWidth'],this[_0x1ff4c2(0x32c,0x372)][_0x1ff4c2(0x3cc,0x3fe)]);_0x54ba19>0x0&&(this['viewerParameters'][_0x2fa27c(0x545,0x577)]=_0x54ba19);}}mars3d__namespace['LayerUtil'][_0x2fb72e(0x5c3,0x653)](_0x33b593(0x215,0x1e2),WindLayer),mars3d__namespace[_0x2fb72e(0x569,0x4da)]['WindLayer']=WindLayer;class CanvasParticle{constructor(){this['lng']=null,this[_0x3068d5(-0xff,-0x12e)]=null;function _0xc6f566(_0x26818a,_0x2db780){return _0x2fb72e(_0x2db780- -0x6b2,_0x26818a);}function _0x3068d5(_0x30421d,_0x1eddb2){return _0x33b593(_0x1eddb2- -0x386,_0x30421d);}this['tlng']=null,this[_0x3068d5(-0x141,-0x13a)]=null,this[_0x3068d5(-0x10d,-0x13f)]=null,this['speed']=null;}[_0x33b593(0x314,0x2a6)](){for(const _0x1bf2f0 in this){delete this[_0x1bf2f0];}}}class CanvasWindField{constructor(_0x3719d0){function _0x46a44b(_0xc49e6,_0x4861a5){return _0x2fb72e(_0x4861a5- -0x6e4,_0xc49e6);}this[_0x46a44b(-0x1c1,-0x15b)](_0x3719d0);}get[_0x2fb72e(0x549,0x57b)](){function _0x267079(_0x1f202e,_0x4095e6){return _0x33b593(_0x1f202e-0x22,_0x4095e6);}return this[_0x267079(0x328,0x302)];}set['speedRate'](_0x151aa6){function _0x1ce764(_0x563dd9,_0x3ab3cc){return _0x2fb72e(_0x563dd9- -0x41f,_0x3ab3cc);}function _0x7dc4b9(_0xf20cc2,_0x716f5e){return _0x33b593(_0xf20cc2-0x1f9,_0x716f5e);}this['_speedRate']=(0x64-(_0x151aa6>0x63?0x63:_0x151aa6))*0x64,this['_calc_speedRate']=[(this[_0x1ce764(0x1be,0x1e5)]-this['xmin'])/this[_0x7dc4b9(0x4ff,0x578)],(this[_0x1ce764(0x1d5,0x1a7)]-this['ymin'])/this['_speedRate']];}get['maxAge'](){function _0x19b311(_0x11a458,_0x29020d){return _0x2fb72e(_0x29020d- -0x67d,_0x11a458);}return this[_0x19b311(-0x133,-0x11b)];}set[_0x2fb72e(0x545,0x4dc)](_0x1f9332){this['_maxAge']=_0x1f9332;}['setOptions'](_0x1abb48){this['options']=_0x1abb48,this['maxAge']=_0x1abb48['maxAge']||0x78,this['speedRate']=_0x1abb48['speedRate']||0x32,this['particles']=[];const _0x5ba486=_0x1abb48['particlesNumber']||0x1000;function _0x1166f6(_0x2b6de9,_0x50e2f8){return _0x33b593(_0x2b6de9-0x108,_0x50e2f8);}function _0x5010fc(_0x4f2321,_0x3d15c3){return _0x33b593(_0x3d15c3- -0x17b,_0x4f2321);}for(let _0x3038e6=0x0;_0x3038e6<_0x5ba486;_0x3038e6++){const _0x112fcf=this[_0x1166f6(0x37d,0x3ae)](new CanvasParticle());this['particles'][_0x1166f6(0x320,0x2e8)](_0x112fcf);}}[_0x33b593(0x26e,0x202)](_0x24984d){this[_0x30d4c9(0x4d1,0x53a)]=_0x24984d['rows'],this['cols']=_0x24984d['cols'],this[_0x30d4c9(0x47a,0x491)]=_0x24984d[_0x4bdfe9(0x148,0x108)],this['xmax']=_0x24984d['xmax'],this['ymin']=_0x24984d['ymin'],this['ymax']=_0x24984d['ymax'],this[_0x4bdfe9(0x153,0x114)]=[];const _0x4910a5=_0x24984d['udata'],_0x4744ac=_0x24984d['vdata'];let _0xa58bef=![];function _0x4bdfe9(_0x47ac88,_0x286008){return _0x33b593(_0x286008- -0x1c8,_0x47ac88);}_0x4910a5['length']===this['rows']&&_0x4910a5[0x0]['length']===this[_0x4bdfe9(0x9f,0x99)]&&(_0xa58bef=!![]);function _0x30d4c9(_0x300155,_0x41d04f){return _0x33b593(_0x300155-0x1aa,_0x41d04f);}let _0x10adba=0x0,_0x19d575=null,_0x1054fc=null;for(let _0x41c6d5=0x0;_0x41c6d5<this['rows'];_0x41c6d5++){_0x19d575=[];for(let _0x1638b5=0x0;_0x1638b5<this['cols'];_0x1638b5++,_0x10adba++){_0xa58bef?_0x1054fc=this[_0x30d4c9(0x3ff,0x40b)](_0x4910a5[_0x41c6d5][_0x1638b5],_0x4744ac[_0x41c6d5][_0x1638b5]):_0x1054fc=this['_calcUV'](_0x4910a5[_0x10adba],_0x4744ac[_0x10adba]),_0x19d575[_0x4bdfe9(-0x3e,0x50)](_0x1054fc);}this['grid'][_0x30d4c9(0x3c2,0x42c)](_0x19d575);}this[_0x30d4c9(0x484,0x498)]['reverseY']&&this['grid'][_0x4bdfe9(0x157,0x16b)]();}[_0x33b593(0x2b6,0x23e)](){delete this[_0x47df7d(0x571,0x4e9)],delete this['cols'];function _0x55ddef(_0x4aa63d,_0x65a818){return _0x33b593(_0x4aa63d-0x38a,_0x65a818);}delete this['xmin'];function _0x47df7d(_0x5ec4f8,_0x168bba){return _0x2fb72e(_0x5ec4f8- -0x94,_0x168bba);}delete this[_0x55ddef(0x689,0x6eb)],delete this[_0x55ddef(0x6ae,0x6b3)],delete this['ymax'],delete this['grid'],delete this[_0x47df7d(0x52b,0x590)];}[_0x33b593(0x2ef,0x2ce)](_0x42b04d,_0x40d791){const _0x5900d0=(_0x42b04d-this['xmin'])/(this[_0x88526e(0x140,0x1ac)]-this[_0x156b6a(0x236,0x1eb)])*(this['cols']-0x1);function _0x88526e(_0x5c34b5,_0x5a3142){return _0x2fb72e(_0x5c34b5- -0x49d,_0x5a3142);}const _0x4d7c73=(this['ymax']-_0x40d791)/(this[_0x88526e(0x157,0x17a)]-this[_0x88526e(0x165,0xfb)])*(this['rows']-0x1);function _0x156b6a(_0x5034b9,_0x3797d3){return _0x33b593(_0x3797d3- -0xe5,_0x5034b9);}return[_0x5900d0,_0x4d7c73];}['getUVByXY'](_0x455825,_0x1bf4e6){if(_0x455825<0x0||_0x455825>=this[_0x349403(0x302,0x352)]||_0x1bf4e6>=this['rows'])return[0x0,0x0,0x0];const _0x14cbc8=Math[_0x349403(0x3d1,0x422)](_0x455825),_0x58bdc5=Math['floor'](_0x1bf4e6);if(_0x14cbc8===_0x455825&&_0x58bdc5===_0x1bf4e6)return this['grid'][_0x1bf4e6][_0x455825];function _0x349403(_0x20fefa,_0x400e36){return _0x2fb72e(_0x400e36- -0x1ed,_0x20fefa);}const _0x2ba863=_0x14cbc8+0x1,_0x24a7bc=_0x58bdc5+0x1,_0x1c6f97=this[_0x349403(0x3b1,0x3dd)](_0x14cbc8,_0x58bdc5),_0xf5dc04=this['getUVByXY'](_0x2ba863,_0x58bdc5),_0x2709db=this['getUVByXY'](_0x14cbc8,_0x24a7bc);function _0x59c11b(_0x209363,_0x2f292a){return _0x33b593(_0x209363- -0xaf,_0x2f292a);}const _0x2f2d47=this['getUVByXY'](_0x2ba863,_0x24a7bc);let _0x22cc2c=null;try{_0x22cc2c=this['_bilinearInterpolation'](_0x455825-_0x14cbc8,_0x1bf4e6-_0x58bdc5,_0x1c6f97,_0xf5dc04,_0x2709db,_0x2f2d47);}catch(_0x348517){console[_0x59c11b(0x1fa,0x28a)](_0x455825,_0x1bf4e6);}return _0x22cc2c;}['_bilinearInterpolation'](_0x439819,_0x4b9f5e,_0x8be88,_0x577d71,_0x5d6dfa,_0x453397){const _0x3030a5=0x1-_0x439819,_0x2cf83c=0x1-_0x4b9f5e,_0x392aba=_0x3030a5*_0x2cf83c,_0x1cd776=_0x439819*_0x2cf83c,_0x45b12f=_0x3030a5*_0x4b9f5e,_0x34719d=_0x439819*_0x4b9f5e,_0x20d919=_0x8be88[0x0]*_0x392aba+_0x577d71[0x0]*_0x1cd776+_0x5d6dfa[0x0]*_0x45b12f+_0x453397[0x0]*_0x34719d;function _0x3539c1(_0x2c5ee3,_0x330cc8){return _0x2fb72e(_0x330cc8- -0x4c4,_0x2c5ee3);}const _0x582a3e=_0x8be88[0x1]*_0x392aba+_0x577d71[0x1]*_0x1cd776+_0x5d6dfa[0x1]*_0x45b12f+_0x453397[0x1]*_0x34719d;return this[_0x3539c1(0xfd,0x6f)](_0x20d919,_0x582a3e);}['_calcUV'](_0x51c556,_0x174ab0){function _0x2f0542(_0x3b151a,_0x49fcf0){return _0x33b593(_0x49fcf0- -0x1e2,_0x3b151a);}return[+_0x51c556,+_0x174ab0,Math[_0x2f0542(0xd9,0x84)](_0x51c556*_0x51c556+_0x174ab0*_0x174ab0)];}['getUVByPoint'](_0x42b635,_0x3ac196){if(!this['isInExtent'](_0x42b635,_0x3ac196))return null;const _0x2ef361=this['toGridXY'](_0x42b635,_0x3ac196);function _0xdd0e5(_0x781aa2,_0x1e8a77){return _0x33b593(_0x1e8a77-0x1bb,_0x781aa2);}const _0x1b5218=this[_0xdd0e5(0x4a5,0x4a7)](_0x2ef361[0x0],_0x2ef361[0x1]);return _0x1b5218;}['isInExtent'](_0x33d235,_0x2435b5){return _0x33d235>=this['xmin']&&_0x33d235<=this['xmax']&&_0x2435b5>=this['ymin']&&_0x2435b5<=this['ymax']?!![]:![];}[_0x33b593(0x2d4,0x2af)](){const _0x203092=fRandomByfloat(this['xmin'],this[_0x170f7b(0x162,0x1a3)]),_0x486f52=fRandomByfloat(this['ymin'],this['ymax']),_0x58d725={};_0x58d725['lat']=_0x486f52,_0x58d725['lng']=_0x203092;function _0x170f7b(_0x5950df,_0x1f5db0){return _0x33b593(_0x1f5db0- -0x15c,_0x5950df);}return _0x58d725;}['getParticles'](){function _0x165836(_0x5b6371,_0x4ccedd){return _0x33b593(_0x4ccedd- -0x403,_0x5b6371);}let _0x8acedb,_0x25e347,_0x274141;function _0x25ed9a(_0x597990,_0xeafdeb){return _0x2fb72e(_0x597990- -0x52e,_0xeafdeb);}for(let _0x4f53f6=0x0,_0x1ee97c=this[_0x165836(-0xee,-0x122)][_0x25ed9a(-0x2e,0x1e)];_0x4f53f6<_0x1ee97c;_0x4f53f6++){let _0xf54735=this['particles'][_0x4f53f6];_0xf54735['age']<=0x0&&(_0xf54735=this[_0x165836(-0x210,-0x18e)](_0xf54735));if(_0xf54735['age']>0x0){const _0x71e076=_0xf54735['tlng'],_0x30b57a=_0xf54735['tlat'];_0x274141=this['getUVByPoint'](_0x71e076,_0x30b57a),_0x274141?(_0x8acedb=_0x71e076+this[_0x25ed9a(0x83,0x14)][0x0]*_0x274141[0x0],_0x25e347=_0x30b57a+this[_0x165836(-0xc2,-0x130)][0x1]*_0x274141[0x1],_0xf54735['lng']=_0x71e076,_0xf54735['lat']=_0x30b57a,_0xf54735[_0x165836(-0x1bd,-0x13a)]=_0x8acedb,_0xf54735['tlat']=_0x25e347,_0xf54735['speed']=_0x274141[0x2],_0xf54735['age']--):_0xf54735['age']=0x0;}}return this['particles'];}[_0x2fb72e(0x553,0x5e6)](_0x3c4d4f){let _0x3e5707,_0x5a549e;for(let _0x2a4f63=0x0;_0x2a4f63<0x1e;_0x2a4f63++){_0x3e5707=this['getRandomLatLng'](),_0x5a549e=this[_0x94f61d(0x2af,0x233)](_0x3e5707['lng'],_0x3e5707['lat']);if(_0x5a549e&&_0x5a549e[0x2]>0x0)break;}if(!_0x5a549e)return _0x3c4d4f;const _0x210f37=_0x3e5707['lng']+this[_0x1e314a(0x547,0x5a0)][0x0]*_0x5a549e[0x0];function _0x94f61d(_0x40ce33,_0x51ab91){return _0x2fb72e(_0x40ce33- -0x341,_0x51ab91);}const _0x3e63b1=_0x3e5707['lat']+this[_0x1e314a(0x582,0x5a0)][0x1]*_0x5a549e[0x1];_0x3c4d4f['lng']=_0x3e5707[_0x1e314a(0x63f,0x5c8)],_0x3c4d4f['lat']=_0x3e5707[_0x94f61d(0x1f5,0x267)];function _0x1e314a(_0x1d59e4,_0x1ef97e){return _0x33b593(_0x1ef97e-0x2cd,_0x1d59e4);}return _0x3c4d4f['tlng']=_0x210f37,_0x3c4d4f['tlat']=_0x3e63b1,_0x3c4d4f[_0x1e314a(0x55a,0x514)]=Math['round'](Math['random']()*this[_0x1e314a(0x4ab,0x534)]),_0x3c4d4f[_0x1e314a(0x5e0,0x5ed)]=_0x5a549e[0x2],_0x3c4d4f;}['destroy'](){for(const _0x29fe7f in this){delete this[_0x29fe7f];}}}function fRandomByfloat(_0x1defd3,_0x4c7244){return _0x1defd3+Math['random']()*(_0x4c7244-_0x1defd3);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x33b593(0x31f,0x318)];class CanvasWindLayer extends BaseLayer{constructor(_0x1a7e68={}){super(_0x1a7e68),this['_setOptionsHook'](_0x1a7e68);function _0x578dc2(_0x560b5a,_0x1737e6){return _0x2fb72e(_0x1737e6- -0x8d,_0x560b5a);}this['canvas']=null,_0x1a7e68['colors']&&_0x1a7e68['steps']&&(this['_colorRamp']=new mars3d__namespace[(_0x578dc2(0x436,0x4a0))](_0x1a7e68));}['_setOptionsHook'](_0x293f0f,_0x5721a9){this['frameTime']=0x3e8/(_0x293f0f['frameRate']||0xa),this['_pointerEvents']=this[_0x25a437(-0xcb,-0x3e)][_0x50b80c(0xc8,0xff)]??![];function _0x25a437(_0x12b967,_0x33aa38){return _0x2fb72e(_0x33aa38- -0x5f6,_0x12b967);}this[_0x25a437(-0x2,0x4)]=_0x293f0f['color']||'#ffffff',this['lineWidth']=_0x293f0f[_0x25a437(0x1,-0x2b)]||0x1,this[_0x25a437(-0x41,-0x73)]=_0x293f0f['fixedHeight']??0x0,this['reverseY']=_0x293f0f[_0x25a437(-0x80,-0xdf)]??![];function _0x50b80c(_0x4688ad,_0x112739){return _0x33b593(_0x112739- -0x1b0,_0x4688ad);}this[_0x50b80c(0x17a,0x16d)]&&this[_0x25a437(-0x8b,0x5)]['setOptions'](_0x293f0f);}get[_0x33b593(0x28b,0x2aa)](){return this['canvas'];}get[_0x2fb72e(0x613,0x6a4)](){function _0x3a2c65(_0x5dc4bb,_0x1c0b15){return _0x33b593(_0x5dc4bb-0x218,_0x1c0b15);}return this['_map']['scene'][_0x3a2c65(0x508,0x4e7)]['clientWidth'];}get['canvasHeight'](){function _0x4d9723(_0x56d2b1,_0x2db7e7){return _0x33b593(_0x56d2b1-0xfb,_0x2db7e7);}return this['_map']['scene']['canvas'][_0x4d9723(0x34e,0x34f)];}get[_0x33b593(0x2af,0x24b)](){return this['_pointerEvents'];}set['pointerEvents'](_0x12081e){function _0x383172(_0x2ad167,_0x34fec0){return _0x2fb72e(_0x34fec0- -0x5e4,_0x2ad167);}this[_0x383172(0x53,-0x4)]=_0x12081e;if(!this['canvas'])return;function _0x1de21f(_0x2ce73e,_0x7bb361){return _0x33b593(_0x2ce73e- -0x29a,_0x7bb361);}_0x12081e?this[_0x383172(0x5f,-0x16)]['style']['pointer-events']='all':this['canvas'][_0x1de21f(0x5b,0xeb)][_0x1de21f(0x9f,0x122)]='none';}get['particlesNumber'](){return this['options']['particlesNumber'];}set[_0x33b593(0x2a2,0x292)](_0x3f50e8){this['options']['particlesNumber']=_0x3f50e8,clearTimeout(this['_canrefresh']),this['_canrefresh']=setTimeout(()=>{this['redraw']();},0x1f4);}get['speedRate'](){function _0x5bdd79(_0x548c92,_0x4746d4){return _0x2fb72e(_0x4746d4- -0x4c0,_0x548c92);}return this['options'][_0x5bdd79(0x3e,0x89)];}set['speedRate'](_0xc5887e){function _0x2f9c11(_0x5d5bde,_0x10a0e7){return _0x33b593(_0x5d5bde-0x1f5,_0x10a0e7);}function _0x31d55e(_0x1bf73e,_0x268b80){return _0x2fb72e(_0x268b80- -0x176,_0x1bf73e);}this['options']['speedRate']=_0xc5887e,this['windField']&&(this[_0x2f9c11(0x512,0x576)][_0x31d55e(0x356,0x3d3)]=_0xc5887e);}get['maxAge'](){function _0x4ff5fc(_0x4b0209,_0x223cdb){return _0x33b593(_0x4b0209-0x2ce,_0x223cdb);}function _0x42093c(_0x497621,_0x196a23){return _0x33b593(_0x196a23- -0x58,_0x497621);}return this[_0x42093c(0x24a,0x282)][_0x4ff5fc(0x535,0x4b6)];}set['maxAge'](_0x182455){this['options']['maxAge']=_0x182455;function _0x3dd25d(_0x26dff0,_0x159041){return _0x2fb72e(_0x159041- -0x1d1,_0x26dff0);}this[_0x3dd25d(0x4ba,0x42a)]&&(this['windField']['maxAge']=_0x182455);}get[_0x33b593(0x30c,0x361)](){return this['windData'];}set[_0x33b593(0x30c,0x392)](_0x5061e0){function _0x3000c8(_0x1e8754,_0x13dcca){return _0x33b593(_0x13dcca- -0x323,_0x1e8754);}this[_0x3000c8(-0x146,-0xed)](_0x5061e0);}['_showHook'](_0x3df72e){function _0x17b7ea(_0x2d8768,_0x436a86){return _0x33b593(_0x2d8768- -0x39,_0x436a86);}function _0x280c0d(_0x51974c,_0x557a35){return _0x33b593(_0x557a35-0x39,_0x51974c);}_0x3df72e?this['_addedHook']():(this[_0x17b7ea(0x2ca,0x23f)]&&(this[_0x280c0d(0x381,0x313)]['data']=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x58e088(_0x3f74b5,_0x51d382){return _0x2fb72e(_0x51d382- -0x4f,_0x3f74b5);}function _0x2422c4(_0x148da4,_0x57b4f6){return _0x2fb72e(_0x57b4f6-0x12,_0x148da4);}this[_0x2422c4(0x64c,0x5ca)]['worker']?this['initWorker']():this['windField']=new CanvasWindField(this[_0x58e088(0x547,0x569)]);}['_addedHook'](){this[_0x41aadb(0x476,0x42f)]=this[_0x41aadb(0x3f9,0x3a3)]();const _0x2dd761={};_0x2dd761[_0x16a4be(0x39d,0x3e8)]=!![],this['canvasContext']=this[_0x41aadb(0x418,0x42f)][_0x16a4be(0x3a4,0x419)]('2d',_0x2dd761),this['bindEvent']();function _0x16a4be(_0x2b0478,_0x1b8d74){return _0x33b593(_0x2b0478-0x108,_0x1b8d74);}function _0x41aadb(_0xfd60d2,_0x5844ba){return _0x2fb72e(_0x5844ba- -0x19f,_0xfd60d2);}this[_0x16a4be(0x3e2,0x3be)][_0x16a4be(0x414,0x43d)]&&this['setData'](this['options'][_0x16a4be(0x414,0x428)]);}['_removedHook'](){this['clear'](),this[_0x576da1(0x28f,0x22d)]();function _0x576da1(_0x46684f,_0x4d1efa){return _0x33b593(_0x46684f-0x50,_0x4d1efa);}function _0x15c29c(_0x59fd9b,_0x38e2f3){return _0x33b593(_0x59fd9b- -0x218,_0x38e2f3);}this['canvas']&&(this['_map']['container'][_0x15c29c(0xd2,0x14a)](this['canvas']),delete this[_0x15c29c(0xd8,0xaf)]);}['_createCanvas'](){const _0x151710=mars3d__namespace['DomUtil'][_0x365932(0x21e,0x1d9)]('canvas','mars3d-canvasWind',this['_map']['container']);_0x151710['style']['position']='absolute',_0x151710['style'][_0x5ca468(0x380,0x3da)]=_0x365932(0x26c,0x24a),_0x151710[_0x365932(0x2c1,0x279)]['left']=_0x5ca468(0x2c8,0x348);function _0x5ca468(_0xf38ac1,_0x5e0abc){return _0x33b593(_0x5e0abc-0xa8,_0xf38ac1);}_0x151710[_0x5ca468(0x38c,0x39d)]['width']=this['_map']['scene']['canvas']['clientWidth']+'px',_0x151710['style'][_0x5ca468(0x391,0x38c)]=this[_0x365932(0x251,0x1f4)][_0x5ca468(0x3b0,0x33f)]['canvas']['clientHeight']+'px',_0x151710['style']['pointerEvents']=this['_pointerEvents']?'auto':_0x5ca468(0x33c,0x2da),_0x151710[_0x5ca468(0x311,0x39d)]['zIndex']=this['options'][_0x365932(0x1fb,0x1d4)]??0x9,_0x151710['width']=this[_0x365932(0x251,0x233)]['scene']['canvas']['clientWidth'];function _0x365932(_0x154a53,_0x3d3515){return _0x33b593(_0x154a53- -0x34,_0x3d3515);}return _0x151710['height']=this[_0x365932(0x251,0x24d)][_0x365932(0x263,0x1f5)][_0x365932(0x2bc,0x347)]['clientHeight'],_0x151710;}['resize'](){function _0x1c7486(_0x2c4bda,_0x3c034b){return _0x33b593(_0x3c034b- -0x2e1,_0x2c4bda);}function _0x25c83d(_0x259fae,_0x2880f6){return _0x33b593(_0x259fae- -0x2d7,_0x2880f6);}this['canvas']&&(this['canvas']['style']['width']=this['_map']['scene'][_0x1c7486(0x95,0xf)][_0x25c83d(-0xb9,-0x147)]+'px',this[_0x1c7486(-0x6f,0xf)]['style']['height']=this[_0x25c83d(-0x52,-0x66)][_0x1c7486(-0x3d,-0x4a)][_0x25c83d(0x19,-0x74)]['clientHeight']+'px',this['canvas']['width']=this['_map']['scene']['canvas']['clientWidth'],this['canvas']['height']=this[_0x25c83d(-0x52,-0x96)][_0x25c83d(-0x40,-0xae)]['canvas'][_0x1c7486(-0xbb,-0x8e)]);}[_0x33b593(0x28c,0x24a)](){const _0x4b40f5=this;let _0x27cb1b=Date['now']();(function _0x521e98(){if(_0x4b40f5[_0x172097(0x28d,0x285)])return;_0x4b40f5['_animateFrame']=window['requestAnimationFrame'](_0x521e98);function _0x1b917b(_0x3833bb,_0x45fb2c){return _0x3de5(_0x45fb2c-0xa7,_0x3833bb);}function _0x172097(_0x18fdbb,_0x589d59){return _0x3de5(_0x18fdbb-0x2c,_0x589d59);}if(_0x4b40f5['show']&&_0x4b40f5['windField']){const _0x480f3e=Date[_0x1b917b(0x2db,0x315)](),_0x4b04c0=_0x480f3e-_0x27cb1b;_0x4b04c0>_0x4b40f5['frameTime']&&(_0x27cb1b=_0x480f3e-_0x4b04c0%_0x4b40f5['frameTime'],_0x4b40f5[_0x1b917b(0x2a9,0x2ab)]());}}(),window[_0xbd1aa8(0x540,0x5ad)]('resize',this['resize']['bind'](this),![]),this['mouse_down']=![],this['mouse_move']=![]);function _0xbd1aa8(_0x531f32,_0x10b2d5){return _0x33b593(_0x531f32-0x225,_0x10b2d5);}function _0x561678(_0x18c092,_0x579512){return _0x2fb72e(_0x18c092- -0x37f,_0x579512);}this[_0xbd1aa8(0x4ff,0x52f)][_0xbd1aa8(0x553,0x50e)]&&(this[_0x561678(0x1e4,0x22d)]['on'](mars3d__namespace[_0xbd1aa8(0x4fb,0x547)]['wheel'],this['_onMapWhellEvent'],this),this[_0x561678(0x1e4,0x172)]['on'](mars3d__namespace['EventType']['mouseDown'],this['_onMouseDownEvent'],this),this['_map']['on'](mars3d__namespace[_0x561678(0x235,0x1c4)][_0x561678(0x26c,0x217)],this['_onMouseUpEvent'],this));}[_0x33b593(0x23f,0x27f)](){window['cancelAnimationFrame'](this[_0x2785be(-0x8,-0x18)]);function _0x2785be(_0x43b7e0,_0x218c4a){return _0x2fb72e(_0x218c4a- -0x572,_0x43b7e0);}delete this['_animateFrame'];function _0x4572f4(_0x2d8d12,_0x53410f){return _0x33b593(_0x53410f- -0xf8,_0x2d8d12);}window['removeEventListener'](_0x2785be(0xa3,0xa0),this[_0x2785be(0x7f,0xa0)]),this[_0x2785be(0xbb,0x46)][_0x4572f4(0x234,0x236)]&&(this['_map'][_0x4572f4(0x159,0x13d)](mars3d__namespace['EventType']['wheel'],this['_onMapWhellEvent'],this),this['_map']['off'](mars3d__namespace[_0x4572f4(0x14c,0x1de)]['mouseDown'],this[_0x4572f4(0x1c4,0x220)],this),this['_map'][_0x2785be(-0x88,-0x5f)](mars3d__namespace['EventType'][_0x4572f4(0x216,0x215)],this['_onMouseUpEvent'],this),this['_map'][_0x2785be(-0x84,-0x5f)](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this));}['_onMapWhellEvent'](_0x4c93b6){clearTimeout(this[_0x21f896(-0xab,-0x29)]);if(!this['show']||!this['canvas'])return;this[_0x21f896(-0x57,0x28)]['style']['visibility']='hidden';function _0x52f800(_0x369b5d,_0x46cdf2){return _0x33b593(_0x46cdf2- -0x40c,_0x369b5d);}function _0x21f896(_0x130138,_0x609f77){return _0x33b593(_0x609f77- -0x2c8,_0x130138);}this[_0x52f800(-0x107,-0x16d)]=setTimeout(()=>{function _0x220cea(_0x32594b,_0x5f1b28){return _0x52f800(_0x32594b,_0x5f1b28-0x3da);}if(!this[_0x3b3400(0x4ad,0x523)])return;function _0x3b3400(_0x3d9997,_0x2dd7e8){return _0x52f800(_0x3d9997,_0x2dd7e8-0x709);}this['redraw'](),this[_0x220cea(0x25e,0x2be)]['style'][_0x220cea(0x233,0x1e8)]='visible';},0xc8);}[_0x33b593(0x318,0x2fa)](_0x1e8814){this['mouse_down']=!![],this[_0x2311f7(0x598,0x545)][_0x400b9e(0x487,0x43d)](mars3d__namespace['EventType']['mouseMove'],this[_0x400b9e(0x532,0x564)],this);function _0x400b9e(_0x5b5f41,_0x39a543){return _0x2fb72e(_0x5b5f41- -0x8c,_0x39a543);}function _0x2311f7(_0x46c7dc,_0x57d6c9){return _0x2fb72e(_0x46c7dc-0x35,_0x57d6c9);}this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMouseMoveEvent'],this);}['_onMouseMoveEvent'](_0x28d555){function _0x28c4cf(_0x2d82cb,_0x5d8b15){return _0x2fb72e(_0x5d8b15- -0x6dd,_0x2d82cb);}function _0x2696fa(_0x1e930d,_0x317a61){return _0x33b593(_0x1e930d- -0x31e,_0x317a61);}if(!this[_0x2696fa(-0xf8,-0x16e)]||!this[_0x28c4cf(-0x91,-0x10f)])return;this['mouse_down']&&(this[_0x28c4cf(-0x100,-0x10f)]['style']['visibility']='hidden',this[_0x28c4cf(-0xc4,-0x152)]=!![]);}['_onMouseUpEvent'](_0x1e154b){if(!this['show']||!this['canvas'])return;this[_0xd50466(0x53d,0x5bd)][_0xd50466(0x4ed,0x55c)](mars3d__namespace['EventType']['mouseMove'],this[_0xd50466(0x598,0x61f)],this);this[_0xd50466(0x5c2,0x54e)]&&this['mouse_move']&&this['redraw']();this[_0xd50466(0x5a8,0x5b7)]['style'][_0xd50466(0x4d2,0x4c0)]=_0xd50466(0x535,0x528);function _0x8a65f9(_0x1572a0,_0x11a3d4){return _0x2fb72e(_0x11a3d4- -0x593,_0x1572a0);}this['mouse_down']=![];function _0xd50466(_0x5096c2,_0x1e9c98){return _0x33b593(_0x5096c2-0x2b8,_0x1e9c98);}this['mouse_move']=![];}[_0x33b593(0x236,0x227)](_0x37dff6){this['clear'](),this['windData']=_0x37dff6,this['windField']['setDate'](_0x37dff6),this['redraw']();}[_0x33b593(0x25b,0x1fd)](){function _0x127033(_0x33a86f,_0x11a170){return _0x2fb72e(_0x11a170- -0x24a,_0x33a86f);}function _0x45c442(_0x1063d2,_0x255036){return _0x33b593(_0x255036-0x11e,_0x1063d2);}if(!this['show'])return;this[_0x127033(0x443,0x3b1)][_0x127033(0x3af,0x33f)](this['options']),this[_0x45c442(0x3f9,0x37e)]();}['update'](){function _0x533ea1(_0x589437,_0x4f3194){return _0x2fb72e(_0x4f3194- -0x59d,_0x589437);}function _0x19eb08(_0x26e3c6,_0x10bbb7){return _0x33b593(_0x10bbb7- -0x12c,_0x26e3c6);}if(this['_updateIng'])return;this[_0x533ea1(0x26,0x51)]=!![];if(this[_0x533ea1(-0x2a,0x24)])this[_0x19eb08(0x21f,0x1f1)][_0x533ea1(-0xc4,-0x5f)]();else{const _0x6d036f=this[_0x533ea1(0xa2,0x5e)]['getParticles']();this[_0x533ea1(0xd,0x45)](_0x6d036f);}this[_0x19eb08(0x247,0x1e4)]=![];}['_drawLines'](_0x287c94){this['canvasContext'][_0x1abd69(0x2f,0xb6)]='destination-in';function _0x21a59b(_0x569804,_0x1fb240){return _0x33b593(_0x569804- -0x417,_0x1fb240);}this['canvasContext']['fillRect'](0x0,0x0,this['canvasWidth'],this[_0x21a59b(-0x1e4,-0x246)]),this['canvasContext'][_0x1abd69(0x2f,-0x8)]=_0x21a59b(-0x1aa,-0x17d),this[_0x1abd69(0x3e,0x69)][_0x1abd69(0x43,0x17)]=0.9;const _0x68b156=this['_map']['scene']['mode']!==Cesium[_0x1abd69(0x4,0x5a)][_0x21a59b(-0x119,-0xef)],_0x529ad6=this[_0x1abd69(0xd0,0x13c)]*0.25;function _0x1abd69(_0xe45ba7,_0xe24acc){return _0x33b593(_0xe45ba7- -0x265,_0xe24acc);}if(this[_0x1abd69(-0x38,-0x5c)])for(let _0x42e3db=0x0,_0x54c0d8=_0x287c94['length'];_0x42e3db<_0x54c0d8;_0x42e3db++){const _0xc0fa87=_0x287c94[_0x42e3db],_0x5b1cb1=this['_tomap'](_0xc0fa87['lng'],_0xc0fa87['lat'],_0xc0fa87),_0x47d4c0=this['_tomap'](_0xc0fa87[_0x21a59b(-0x14e,-0x1c6)],_0xc0fa87['tlat'],_0xc0fa87);if(!_0x5b1cb1||!_0x47d4c0)continue;if(_0x68b156&&Math['abs'](_0x5b1cb1[0x0]-_0x47d4c0[0x0])>=_0x529ad6)continue;this['canvasContext'][_0x21a59b(-0x1cf,-0x13f)](),this['canvasContext']['lineWidth']=this[_0x21a59b(-0x12a,-0x130)],this['canvasContext'][_0x1abd69(0x72,0xfb)]=this['_colorRamp']['getColor'](_0xc0fa87[_0x1abd69(0xbb,0x35)]),this['canvasContext'][_0x21a59b(-0x19e,-0x1df)](_0x5b1cb1[0x0],_0x5b1cb1[0x1]),this['canvasContext']['lineTo'](_0x47d4c0[0x0],_0x47d4c0[0x1]),this['canvasContext'][_0x21a59b(-0x1e9,-0x230)]();}else{this['canvasContext']['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext']['strokeStyle']=this['color'];for(let _0x11113c=0x0,_0x1600bf=_0x287c94['length'];_0x11113c<_0x1600bf;_0x11113c++){const _0x4f1eb3=_0x287c94[_0x11113c],_0x221cb0=this[_0x1abd69(-0x24,-0x8c)](_0x4f1eb3[_0x1abd69(0x96,0x41)],_0x4f1eb3['lat'],_0x4f1eb3),_0x2976ed=this['_tomap'](_0x4f1eb3['tlng'],_0x4f1eb3['tlat'],_0x4f1eb3);if(!_0x221cb0||!_0x2976ed)continue;if(_0x68b156&&Math['abs'](_0x221cb0[0x0]-_0x2976ed[0x0])>=_0x529ad6)continue;this[_0x21a59b(-0x174,-0x1fe)][_0x21a59b(-0x19e,-0x144)](_0x221cb0[0x0],_0x221cb0[0x1]),this['canvasContext'][_0x21a59b(-0x198,-0x220)](_0x2976ed[0x0],_0x2976ed[0x1]);}this['canvasContext'][_0x21a59b(-0x1e9,-0x1ee)]();}}['_tomap'](_0x3ea988,_0x2e866d,_0x299dff){const _0xad2c9a=Cesium[_0x1208ed(0x43e,0x3fd)][_0x4f9282(0x590,0x5d8)](_0x3ea988,_0x2e866d,this['fixedHeight']),_0x322f37=this[_0x1208ed(0x4a6,0x447)]['scene'];if(_0x322f37['mode']===Cesium[_0x4f9282(0x52c,0x57d)][_0x1208ed(0x51f,0x4d1)]){const _0x532608=new Cesium['EllipsoidalOccluder'](_0x322f37['globe']['ellipsoid'],_0x322f37[_0x1208ed(0x442,0x4c7)]['positionWC']),_0x1a3a38=_0x532608[_0x4f9282(0x537,0x507)](_0xad2c9a);if(!_0x1a3a38)return _0x299dff['age']=0x0,null;}function _0x4f9282(_0x313d8c,_0x1dcd12){return _0x2fb72e(_0x313d8c- -0x1b,_0x1dcd12);}const _0x33fd6b=Cesium['SceneTransforms']['worldToWindowCoordinates'](this['_map'][_0x4f9282(0x55a,0x4fe)],_0xad2c9a);function _0x1208ed(_0x26cb54,_0x177810){return _0x33b593(_0x26cb54-0x221,_0x177810);}return _0x33fd6b?[_0x33fd6b['x'],_0x33fd6b['y']]:null;}[_0x2fb72e(0x594,0x563)](){this['windField']['clear'](),delete this['windData'];}[_0x2fb72e(0x60a,0x5c0)](){function _0x5cc871(_0xfea2c1,_0x26c2d6){return _0x33b593(_0xfea2c1- -0x1f6,_0x26c2d6);}this['worker']=new Worker(this[_0x24b81f(0x38b,0x41c)]['worker']);function _0x24b81f(_0x5a025d,_0x3c6a7e){return _0x33b593(_0x5a025d-0xb1,_0x3c6a7e);}this[_0x5cc871(0xed,0x109)][_0x5cc871(0x55,0xa4)]=_0x14f9a4=>{function _0x55cb29(_0x368609,_0x285179){return _0x24b81f(_0x368609-0x5,_0x285179);}this['_drawLines'](_0x14f9a4[_0x1c217f(0x49c,0x43f)][_0x55cb29(0x397,0x321)]);function _0x1c217f(_0x4b79c9,_0x2ec017){return _0x5cc871(_0x2ec017-0x329,_0x4b79c9);}this['_updateIng2']=![];},this['windField']={'init':_0x4ac9e0=>{function _0x31ad58(_0x324a6a,_0x46e54e){return _0x24b81f(_0x324a6a- -0x427,_0x46e54e);}const _0x86f19e={};function _0x2b475c(_0x548f12,_0x50920a){return _0x24b81f(_0x548f12- -0x2ee,_0x50920a);}_0x86f19e[_0x2b475c(0x56,0x43)]='init',_0x86f19e[_0x31ad58(-0x9c,-0xaa)]=_0x4ac9e0,this['worker']['postMessage'](_0x86f19e);},'setOptions':_0x286575=>{const _0x575a8e={};function _0x22ea24(_0x462d67,_0x4f0468){return _0x5cc871(_0x462d67-0x60,_0x4f0468);}_0x575a8e['type']='setOptions';function _0x1f8622(_0x12b1cd,_0x45c278){return _0x24b81f(_0x12b1cd-0x250,_0x45c278);}_0x575a8e[_0x1f8622(0x5db,0x585)]=_0x286575,this['worker'][_0x22ea24(0x16a,0x199)](_0x575a8e);},'setDate':_0x115f17=>{const _0x4acc66={};_0x4acc66['type']='setDate',_0x4acc66[_0x3627ba(0x1d2,0x25a)]=_0x115f17;function _0x3627ba(_0xb7824d,_0x247291){return _0x5cc871(_0xb7824d-0xbc,_0x247291);}function _0x2bfeca(_0x19bba2,_0x52fd4c){return _0x5cc871(_0x52fd4c-0x234,_0x19bba2);}this['worker'][_0x3627ba(0x1c6,0x17b)](_0x4acc66);},'update':()=>{function _0x585417(_0x395189,_0x54d98a){return _0x5cc871(_0x54d98a-0x2d8,_0x395189);}if(this['_updateIng2'])return;function _0x5dae5e(_0x3fcce7,_0x8992c5){return _0x5cc871(_0x3fcce7-0x180,_0x8992c5);}this['_updateIng2']=!![];const _0x89db39={};_0x89db39['type']=_0x5dae5e(0x1ea,0x1ca),this['worker'][_0x585417(0x45f,0x3e2)](_0x89db39);},'clear':()=>{const _0x403649={};function _0x3e5e66(_0x33cbcb,_0x252d35){return _0x5cc871(_0x33cbcb- -0x12f,_0x252d35);}_0x403649['type']=_0x3a0e5f(-0xcb,-0x49);function _0x3a0e5f(_0x78ac2c,_0x2712f1){return _0x24b81f(_0x78ac2c- -0x432,_0x2712f1);}this['worker'][_0x3a0e5f(-0x81,-0xda)](_0x403649);}},this[_0x5cc871(0x127,0xb7)]['init'](this[_0x24b81f(0x38b,0x304)]);}}mars3d__namespace[_0x33b593(0x2e7,0x2db)][_0x33b593(0x2e5,0x35a)]('canvasWind',CanvasWindLayer),mars3d__namespace[_0x2fb72e(0x569,0x5e1)]['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace['CanvasWindField']=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports['WindLayer']=WindLayer,exports['WindUtil']=WindUtil;const _0x114c4c={};_0x114c4c[_0x33b593(0x305,0x28a)]=!![],Object[_0x33b593(0x280,0x29b)](exports,'__esModule',_0x114c4c);
}));
