/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.10
 * 编译日期：2023-10-23 17:28:33
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0xe8cae4=_0xe045;function _0xe045(_0x546cfe,_0x591da9){const _0x1e4fcc=_0x1e4f();return _0xe045=function(_0xe045b9,_0x35a8ae){_0xe045b9=_0xe045b9-0x1c4;let _0x2d6cda=_0x1e4fcc[_0xe045b9];return _0x2d6cda;},_0xe045(_0x546cfe,_0x591da9);}(function(_0x1d3ca0,_0x195b01){const _0x3e5fd4={_0x2f29bf:0x1d8,_0x5f017a:0x1dd,_0x25d7f9:0x1ca,_0x508e19:0x1cc,_0x4532b8:0x1e2,_0x20cc53:0x1cf,_0x308051:0x1fb},_0x25001e=_0xe045,_0x3324b3=_0x1d3ca0();while(!![]){try{const _0x423655=-parseInt(_0x25001e(_0x3e5fd4._0x2f29bf))/0x1+parseInt(_0x25001e(0x1c7))/0x2+parseInt(_0x25001e(_0x3e5fd4._0x5f017a))/0x3+parseInt(_0x25001e(_0x3e5fd4._0x25d7f9))/0x4*(parseInt(_0x25001e(0x1cb))/0x5)+-parseInt(_0x25001e(_0x3e5fd4._0x508e19))/0x6*(parseInt(_0x25001e(0x1c5))/0x7)+-parseInt(_0x25001e(_0x3e5fd4._0x4532b8))/0x8*(parseInt(_0x25001e(_0x3e5fd4._0x20cc53))/0x9)+parseInt(_0x25001e(_0x3e5fd4._0x308051))/0xa;if(_0x423655===_0x195b01)break;else _0x3324b3['push'](_0x3324b3['shift']());}catch(_0x51831b){_0x3324b3['push'](_0x3324b3['shift']());}}}(_0x1e4f,0xf293b));function _0x1e4f(){const _0x126b27=['BoundingRect','scheduler','_setOptionsHook','Rectangle','api','_createChartOverlay','_pointerEvents','init','style','registerCoordinateSystem','visible','__esModule','top','mars3dMap','echartsAutoHeight','get','16177190unTtHa','isFormat','scene','height','moveHandler','_mapOffset','_mars3d_scene','absolute','default','lat','clientWidth','globe','mars3dMapRoam','none','hasOwnProperty','create','defineProperty','container','div','28IWtFPM','register','1545442zGzyRg','canvas','fixedHeight','20pLyAst','1030970KJLMgU','1915140DWnqwh','onByQuery','pointerEvents','9NYWPRv','getHeight','_echartsContainer','Cartographic','off','zIndex','hidden','matrix','_mountedHook','200179zYGWgd','echarts','setMapOffset','clear','_showHook','2097123dssLYg','echartsDepthTest','value','mode','extendComponentView','13199336ZrdkCF','visibility','SceneMode','painter','_echartsInstance','__mapOffset','options','isPointVisible','coords'];_0x1e4f=function(){return _0x126b27;};return _0x1e4f();}function _interopNamespace(_0x2484f8){const _0x189858={_0x3e4765:0x1f6},_0x4f8932={_0x4d558a:0x203},_0x3b4619=_0xe045;if(_0x2484f8&&_0x2484f8[_0x3b4619(_0x189858._0x3e4765)])return _0x2484f8;var _0x46cd2d=Object['create'](null);return _0x2484f8&&Object['keys'](_0x2484f8)['forEach'](function(_0x247e4c){const _0x1aa705=_0x3b4619;if(_0x247e4c!==_0x1aa705(_0x4f8932._0x4d558a)){var _0x42208f=Object['getOwnPropertyDescriptor'](_0x2484f8,_0x247e4c);Object['defineProperty'](_0x46cd2d,_0x247e4c,_0x42208f['get']?_0x42208f:{'enumerable':!![],'get':function(){return _0x2484f8[_0x247e4c];}});}}),_0x46cd2d[_0x3b4619(0x203)]=_0x2484f8,_0x46cd2d;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x58ee45,_0x2d1f78){this['_mars3d_scene']=_0x58ee45,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x2d1f78;}[_0xe8cae4(0x1da)](_0x4a4237){this['_mapOffset']=_0x4a4237;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0xe34bba){const _0x4f8b7e={_0x448e69:0x201,_0x535aba:0x206,_0x236821:0x1d2,_0x46cefa:0x1e4,_0x50529b:0x1e9},_0x4031e5=_0xe8cae4,_0x1179b9=this[_0x4031e5(_0x4f8b7e._0x448e69)],_0x258c20=[NaN,NaN];let _0x2a06c4=_0x1179b9['echartsFixedHeight'];_0x1179b9[_0x4031e5(0x1f9)]&&(_0x2a06c4=_0x1179b9[_0x4031e5(_0x4f8b7e._0x535aba)][_0x4031e5(0x1d0)](Cesium$1[_0x4031e5(_0x4f8b7e._0x236821)]['fromDegrees'](_0xe34bba[0x0],_0xe34bba[0x1])));const _0x5b52e6=Cesium$1['Cartesian3']['fromDegrees'](_0xe34bba[0x0],_0xe34bba[0x1],_0x2a06c4);if(!_0x5b52e6)return _0x258c20;const _0x1cef65=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x1179b9,_0x5b52e6);if(!_0x1cef65)return _0x258c20;if(_0x1179b9['echartsDepthTest']&&_0x1179b9[_0x4031e5(0x1e0)]===Cesium$1[_0x4031e5(_0x4f8b7e._0x46cefa)]['SCENE3D']){const _0x1c51a3=new Cesium$1['EllipsoidalOccluder'](_0x1179b9['globe']['ellipsoid'],_0x1179b9['camera']['positionWC']),_0x114076=_0x1c51a3[_0x4031e5(_0x4f8b7e._0x50529b)](_0x5b52e6);if(!_0x114076)return _0x258c20;}return[_0x1cef65['x']-this[_0x4031e5(0x200)][0x0],_0x1cef65['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0xa3ade5={_0x1a61ac:0x1eb,_0x5646fb:0x1d0},_0x240d8d=_0xe8cae4,_0x1dd27b=this['_api'];return new echarts__namespace['graphic'][(_0x240d8d(_0xa3ade5._0x1a61ac))](0x0,0x0,_0x1dd27b['getWidth'](),_0x1dd27b[_0x240d8d(_0xa3ade5._0x5646fb)]());}['getRoamTransform'](){const _0xb7fd0=_0xe8cae4;return echarts__namespace[_0xb7fd0(0x1d6)]['create']();}}CompositeCoordinateSystem['dimensions']=['lng',_0xe8cae4(0x204)],CompositeCoordinateSystem[_0xe8cae4(0x20a)]=function(_0x11c679,_0x5c70e5){const _0x28d3d4={_0x3d8478:0x1fa},_0x275cd8={_0x5c9bf4:0x1da};let _0x4acc5f;const _0x54559c=_0x11c679['scheduler']['ecInstance']['_mars3d_scene'];_0x11c679['eachComponent']('mars3dMap',function(_0x5864ee){const _0x2c7fdd=_0xe045,_0x3e8e57=_0x5c70e5['getZr']()[_0x2c7fdd(0x1e5)];if(!_0x3e8e57)return;!_0x4acc5f&&(_0x4acc5f=new CompositeCoordinateSystem(_0x54559c,_0x5c70e5)),_0x5864ee['coordinateSystem']=_0x4acc5f,_0x4acc5f[_0x2c7fdd(_0x275cd8._0x5c9bf4)](_0x5864ee[_0x2c7fdd(0x1e7)]||[0x0,0x0]);}),_0x11c679['eachSeries'](function(_0x50a449){const _0x188e42=_0xe045;_0x50a449[_0x188e42(_0x28d3d4._0x3d8478)]('coordinateSystem')==='mars3dMap'&&(!_0x4acc5f&&(_0x4acc5f=new CompositeCoordinateSystem(_0x54559c,_0x5c70e5)),_0x50a449['coordinateSystem']=_0x4acc5f);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace[_0xe8cae4(0x1f2)])echarts__namespace[_0xe8cae4(0x1f4)](_0xe8cae4(0x1f8),CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':_0xe8cae4(0x207),'event':'mars3dMapRoam','update':'updateLayout'},function(_0x7a669c,_0x16533c){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0xe8cae4(0x1e1)]({'type':_0xe8cae4(0x1f8),'init':function(_0x214ac4,_0x26005f){const _0x156b52=_0xe8cae4;this['api']=_0x26005f,this['scene']=_0x214ac4[_0x156b52(0x1ec)]['ecInstance']['_mars3d_scene'],this[_0x156b52(0x1fd)]['postRender']['addEventListener'](this[_0x156b52(0x1ff)],this);},'moveHandler':function(_0x42bfb9,_0x2e9923){const _0x58b912=_0xe8cae4;this[_0x58b912(0x1ef)]['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x5b7256,_0x5f1f61,_0x496477){},'dispose':function(_0x4e02d6){const _0x56eaf9={_0x1ab206:0x1fd},_0x52c77d=_0xe8cae4;this[_0x52c77d(_0x56eaf9._0x1ab206)]['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x198b9c={}){super(_0x198b9c),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get[_0xe8cae4(0x1ce)](){const _0x3dd106=_0xe8cae4;return this[_0x3dd106(0x1f1)];}set['pointerEvents'](_0x3f68bb){const _0x244c8c={_0x276dd0:0x1d1,_0x26b5f7:0x208},_0x211d44=_0xe8cae4;this['_pointerEvents']=_0x3f68bb,this[_0x211d44(_0x244c8c._0x276dd0)]&&(_0x3f68bb?this['_echartsContainer']['style'][_0x211d44(0x1ce)]='all':this[_0x211d44(0x1d1)][_0x211d44(0x1f3)]['pointerEvents']=_0x211d44(_0x244c8c._0x26b5f7));}[_0xe8cae4(0x1ed)](_0x1692d6,_0x4ee0f1){this['setEchartsOption'](_0x1692d6);}[_0xe8cae4(0x1dc)](_0x17ca1a){const _0x3d0212={_0x597b67:0x1f3,_0x40edbc:0x1f5,_0x2d5efa:0x1e3},_0x5e8699=_0xe8cae4;_0x17ca1a?this['_echartsContainer'][_0x5e8699(_0x3d0212._0x597b67)][_0x5e8699(0x1e3)]=_0x5e8699(_0x3d0212._0x40edbc):this[_0x5e8699(0x1d1)]['style'][_0x5e8699(_0x3d0212._0x2d5efa)]=_0x5e8699(0x1d5);}[_0xe8cae4(0x1d7)](){const _0x1ad950={_0x42c4ce:0x1fd,_0x3d5d7c:0x1e8,_0x7454b8:0x1fd,_0xa3bb03:0x1e8,_0x3d4c5f:0x1c9},_0x50ec72=_0xe8cae4;this['_map'][_0x50ec72(_0x1ad950._0x42c4ce)][_0x50ec72(0x1de)]=this['options']['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this[_0x50ec72(_0x1ad950._0x3d5d7c)]['clampToGround']??![],this['_map'][_0x50ec72(_0x1ad950._0x7454b8)]['echartsFixedHeight']=this[_0x50ec72(_0x1ad950._0xa3bb03)][_0x50ec72(_0x1ad950._0x3d4c5f)]??0x0;}['_addedHook'](){const _0x291676={_0x5eab14:0x1d1,_0x41bcba:0x1f2,_0x438059:0x201},_0x556ed6=_0xe8cae4;this[_0x556ed6(_0x291676._0x5eab14)]=this[_0x556ed6(0x1f0)](),this[_0x556ed6(0x1e6)]=echarts__namespace[_0x556ed6(_0x291676._0x41bcba)](this['_echartsContainer']),this['_echartsInstance'][_0x556ed6(_0x291676._0x438059)]=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x14fecf={_0x22a036:0x1db,_0x39a95f:0x1d1,_0x29c58d:0x20c},_0x631339=_0xe8cae4;this['_echartsInstance']&&(this['_echartsInstance'][_0x631339(_0x14fecf._0x22a036)](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this[_0x631339(_0x14fecf._0x39a95f)]&&(this['_map'][_0x631339(_0x14fecf._0x29c58d)]['removeChild'](this['_echartsContainer']),delete this[_0x631339(0x1d1)]);}['_createChartOverlay'](){const _0x133b53={_0x931416:0x1c4,_0xd766ea:0x202,_0x58d0d0:0x1f3,_0x1ded7e:0x205,_0x5908e4:0x1e8},_0x48fc95=_0xe8cae4,_0x2eb77f=mars3d__namespace['DomUtil']['create'](_0x48fc95(_0x133b53._0x931416),'mars3d-echarts',this['_map']['container']);return _0x2eb77f['id']=this['id'],_0x2eb77f['style']['position']=_0x48fc95(_0x133b53._0xd766ea),_0x2eb77f[_0x48fc95(_0x133b53._0x58d0d0)][_0x48fc95(0x1f7)]='0px',_0x2eb77f['style']['left']='0px',_0x2eb77f['style']['width']=this['_map']['scene']['canvas'][_0x48fc95(_0x133b53._0x1ded7e)]+'px',_0x2eb77f['style']['height']=this['_map'][_0x48fc95(0x1fd)]['canvas']['clientHeight']+'px',_0x2eb77f['style']['pointerEvents']=this['_pointerEvents']?'all':'none',_0x2eb77f[_0x48fc95(_0x133b53._0x58d0d0)]['zIndex']=this[_0x48fc95(_0x133b53._0x5908e4)][_0x48fc95(0x1d4)]??0x9,_0x2eb77f;}['resize'](){const _0x3d3365={_0x3b35dc:0x1e6,_0x3decb9:0x1c8,_0x22a2be:0x1fe},_0xaf76b2=_0xe8cae4;if(!this[_0xaf76b2(_0x3d3365._0x3b35dc)])return;this[_0xaf76b2(0x1d1)]['style']['width']=this['_map']['scene'][_0xaf76b2(_0x3d3365._0x3decb9)]['clientWidth']+'px',this['_echartsContainer'][_0xaf76b2(0x1f3)][_0xaf76b2(_0x3d3365._0x22a2be)]=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x3545d1,_0x1c43f8,_0x2b8d35){const _0x4e3c4a={_0x3d655f:0x1f8},_0x71416d=_0xe8cae4;this[_0x71416d(0x1e6)]&&(_0x3545d1['mars3dMap']=_0x3545d1[_0x71416d(_0x4e3c4a._0x3d655f)]||{},this['_echartsInstance']['setOption'](_0x3545d1,_0x1c43f8,_0x2b8d35));}['getRectangle'](_0x253528){const _0x250940={_0x5da103:0x1e8},_0x188df5=_0xe8cae4;let _0x4a3eb2,_0x1a38a4,_0x7b1ce1,_0x2f0ea3;function _0x2ee1c1(_0x35d16a){if(!Array['isArray'](_0x35d16a))return;const _0x15a465=_0x35d16a[0x0]||0x0,_0x542c3e=_0x35d16a[0x1]||0x0;_0x15a465!==0x0&&_0x542c3e!==0x0&&(_0x4a3eb2===undefined?(_0x4a3eb2=_0x15a465,_0x1a38a4=_0x15a465,_0x7b1ce1=_0x542c3e,_0x2f0ea3=_0x542c3e):(_0x4a3eb2=Math['min'](_0x4a3eb2,_0x15a465),_0x1a38a4=Math['max'](_0x1a38a4,_0x15a465),_0x7b1ce1=Math['min'](_0x7b1ce1,_0x542c3e),_0x2f0ea3=Math['max'](_0x2f0ea3,_0x542c3e)));}const _0x245f8d=this[_0x188df5(_0x250940._0x5da103)]['series'];_0x245f8d&&_0x245f8d['forEach'](_0x3ebca8=>{const _0x5e4c79={_0x8cb1c8:0x1ea};_0x3ebca8['data']&&_0x3ebca8['data']['forEach'](_0x1612b4=>{const _0x3aac76=_0xe045;if(_0x1612b4[_0x3aac76(0x1df)])_0x2ee1c1(_0x1612b4['value']);else _0x1612b4[_0x3aac76(_0x5e4c79._0x8cb1c8)]&&_0x1612b4['coords']['forEach'](_0x367548=>{_0x2ee1c1(_0x367548);});});});if(_0x4a3eb2===0x0&&_0x7b1ce1===0x0&&_0x1a38a4===0x0&&_0x2f0ea3===0x0)return null;return _0x253528!==null&&_0x253528!==void 0x0&&_0x253528[_0x188df5(0x1fc)]?{'xmin':_0x4a3eb2,'xmax':_0x1a38a4,'ymin':_0x7b1ce1,'ymax':_0x2f0ea3}:Cesium[_0x188df5(0x1ee)]['fromDegrees'](_0x4a3eb2,_0x7b1ce1,_0x1a38a4,_0x2f0ea3);}['on'](_0xc9c823,_0x5c1e06,_0x3319b6){return this['_echartsInstance']['on'](_0xc9c823,_0x5c1e06,_0x3319b6||this),this;}[_0xe8cae4(0x1cd)](_0x3c4cde,_0x341783,_0x5987fc,_0x20ff3d){return this['_echartsInstance']['on'](_0x3c4cde,_0x341783,_0x5987fc,_0x20ff3d||this),this;}['off'](_0x3a9ecf,_0x3ead23,_0x1a7581){const _0x5dc946={_0x251b81:0x1d3},_0x2fd7f9=_0xe8cae4;return this['_echartsInstance'][_0x2fd7f9(_0x5dc946._0x251b81)](_0x3a9ecf,_0x3ead23,_0x1a7581||this),this;}}mars3d__namespace['LayerUtil'][_0xe8cae4(0x1c6)]('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace[_0xe8cae4(0x1d9)]=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x26d5fb){const _0xe6672f=_0xe8cae4;if(_0x26d5fb!==_0xe6672f(0x203)&&!exports[_0xe6672f(0x209)](_0x26d5fb))Object[_0xe6672f(0x20b)](exports,_0x26d5fb,{'enumerable':!![],'get':function(){return echarts[_0x26d5fb];}});}),Object[_0xe8cae4(0x20b)](exports,'__esModule',{'value':!![]});
}));
