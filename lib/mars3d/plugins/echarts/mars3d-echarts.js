/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.16
 * 编译日期：2023-12-10 22:08:48
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';function _0x3bf2(_0x40f878,_0x4982c3){const _0x536be7=_0x536b();return _0x3bf2=function(_0x3bf231,_0x3a5c5a){_0x3bf231=_0x3bf231-0x10d;let _0x443979=_0x536be7[_0x3bf231];return _0x443979;},_0x3bf2(_0x40f878,_0x4982c3);}const _0x3a2bf6=_0x3bf2;(function(_0xab8109,_0x262c06){const _0x5e0675={_0x130790:0x11b,_0x3e6d02:0x119,_0x78091:0x131,_0x5dd381:0x129,_0x215e3c:0x13c,_0x64a4dc:0x126,_0x5cfa1b:0x125},_0x3f718a=_0x3bf2,_0x41ce46=_0xab8109();while(!![]){try{const _0x4ce703=-parseInt(_0x3f718a(_0x5e0675._0x130790))/0x1+parseInt(_0x3f718a(_0x5e0675._0x3e6d02))/0x2+-parseInt(_0x3f718a(_0x5e0675._0x78091))/0x3*(-parseInt(_0x3f718a(0x13f))/0x4)+-parseInt(_0x3f718a(0x130))/0x5*(-parseInt(_0x3f718a(_0x5e0675._0x5dd381))/0x6)+-parseInt(_0x3f718a(_0x5e0675._0x215e3c))/0x7+parseInt(_0x3f718a(0x12d))/0x8*(parseInt(_0x3f718a(_0x5e0675._0x64a4dc))/0x9)+-parseInt(_0x3f718a(0x144))/0xa*(-parseInt(_0x3f718a(_0x5e0675._0x5cfa1b))/0xb);if(_0x4ce703===_0x262c06)break;else _0x41ce46['push'](_0x41ce46['shift']());}catch(_0x562d92){_0x41ce46['push'](_0x41ce46['shift']());}}}(_0x536b,0x8c050));function _interopNamespace(_0x57cf0f){const _0x43534d={_0x3af077:0x10f},_0x5cc60a={_0x2b6b62:0x133,_0x1f5c18:0x117},_0x2e8351=_0x3bf2;if(_0x57cf0f&&_0x57cf0f['__esModule'])return _0x57cf0f;var _0x1d86c8=Object['create'](null);return _0x57cf0f&&Object['keys'](_0x57cf0f)[_0x2e8351(_0x43534d._0x3af077)](function(_0x271c9b){const _0x2bb043=_0x2e8351;if(_0x271c9b!==_0x2bb043(_0x5cc60a._0x2b6b62)){var _0x25e65f=Object['getOwnPropertyDescriptor'](_0x57cf0f,_0x271c9b);Object['defineProperty'](_0x1d86c8,_0x271c9b,_0x25e65f[_0x2bb043(_0x5cc60a._0x1f5c18)]?_0x25e65f:{'enumerable':!![],'get':function(){return _0x57cf0f[_0x271c9b];}});}}),_0x1d86c8['default']=_0x57cf0f,_0x1d86c8;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x3a2bf6(0x11f)];class CompositeCoordinateSystem{constructor(_0x8897cc,_0x3212b8){const _0x4f928a=_0x3a2bf6;this['_mars3d_scene']=_0x8897cc,this[_0x4f928a(0x115)]=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x3212b8;}[_0x3a2bf6(0x147)](_0xd257bd){this['_mapOffset']=_0xd257bd;}['getBMap'](){const _0x2262c0={_0x1ec797:0x11e},_0x276ea5=_0x3a2bf6;return this[_0x276ea5(_0x2262c0._0x1ec797)];}['dataToPoint'](_0x33f89f){const _0x24c9bf={_0x459aea:0x145},_0x5be6d7=_0x3a2bf6,_0xb3b022=this['_mars3d_scene'],_0x21ac78=[NaN,NaN];let _0x454b7e=_0xb3b022['echartsFixedHeight'];_0xb3b022['echartsAutoHeight']&&(_0x454b7e=_0xb3b022['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x33f89f[0x0],_0x33f89f[0x1])));const _0x4433da=Cesium$1['Cartesian3'][_0x5be6d7(_0x24c9bf._0x459aea)](_0x33f89f[0x0],_0x33f89f[0x1],_0x454b7e);if(!_0x4433da)return _0x21ac78;const _0x22af82=Cesium$1[_0x5be6d7(0x116)][_0x5be6d7(0x124)](_0xb3b022,_0x4433da);if(!_0x22af82)return _0x21ac78;if(_0xb3b022['echartsDepthTest']&&_0xb3b022[_0x5be6d7(0x112)]===Cesium$1['SceneMode']['SCENE3D']){const _0xfefd40=new Cesium$1['EllipsoidalOccluder'](_0xb3b022['globe']['ellipsoid'],_0xb3b022['camera']['positionWC']),_0x28ef94=_0xfefd40['isPointVisible'](_0x4433da);if(!_0x28ef94)return _0x21ac78;}return[_0x22af82['x']-this['_mapOffset'][0x0],_0x22af82['y']-this[_0x5be6d7(0x13d)][0x1]];}[_0x3a2bf6(0x13b)](){const _0x4f4786={_0x310f4b:0x148,_0x3f5b4d:0x10e},_0x56cd10=_0x3a2bf6,_0xe24ab5=this['_api'];return new echarts__namespace[(_0x56cd10(_0x4f4786._0x310f4b))][(_0x56cd10(_0x4f4786._0x3f5b4d))](0x0,0x0,_0xe24ab5['getWidth'](),_0xe24ab5['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem[_0x3a2bf6(0x115)]=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x5f0206,_0x578e45){const _0x4baefb={_0xd17da9:0x12b},_0x25acd8=_0x3a2bf6;let _0x15ebaa;const _0x4b9525=_0x5f0206['scheduler'][_0x25acd8(0x146)][_0x25acd8(0x11e)];_0x5f0206['eachComponent'](_0x25acd8(_0x4baefb._0xd17da9),function(_0x2df9af){const _0x221536=_0x25acd8,_0x45266e=_0x578e45['getZr']()[_0x221536(0x122)];if(!_0x45266e)return;!_0x15ebaa&&(_0x15ebaa=new CompositeCoordinateSystem(_0x4b9525,_0x578e45)),_0x2df9af['coordinateSystem']=_0x15ebaa,_0x15ebaa['setMapOffset'](_0x2df9af['__mapOffset']||[0x0,0x0]);}),_0x5f0206['eachSeries'](function(_0x5508fd){const _0x10bd7a=_0x25acd8;_0x5508fd['get']('coordinateSystem')==='mars3dMap'&&(!_0x15ebaa&&(_0x15ebaa=new CompositeCoordinateSystem(_0x4b9525,_0x578e45)),_0x5508fd[_0x10bd7a(0x135)]=_0x15ebaa);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':_0x3a2bf6(0x111),'update':'updateLayout'},function(_0x5435a6,_0x4cf8f6){}),echarts__namespace[_0x3a2bf6(0x12a)]({'type':'mars3dMap','getBMap':function(){const _0xf4420=_0x3a2bf6;return this[_0xf4420(0x11e)];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':_0x3a2bf6(0x12b),'init':function(_0xc9a13c,_0x2c2731){const _0x4517d7=_0x3a2bf6;this['api']=_0x2c2731,this['scene']=_0xc9a13c['scheduler']['ecInstance']['_mars3d_scene'],this[_0x4517d7(0x110)]['postRender'][_0x4517d7(0x128)](this['moveHandler'],this);},'moveHandler':function(_0x531645,_0x59081c){const _0x2f5cec=_0x3a2bf6;this['api'][_0x2f5cec(0x11a)]({'type':'mars3dMapRoam'});},'render':function(_0xf0fc18,_0xe97535,_0x3ad8ee){},'dispose':function(_0x412371){const _0x4000fe={_0x57b793:0x13a},_0x57a093=_0x3a2bf6;this[_0x57a093(0x110)]['postRender'][_0x57a093(_0x4000fe._0x57b793)](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x4484fd={}){const _0x59cc07={_0x937667:0x12f},_0x1c6f48=_0x3a2bf6;super(_0x4484fd),this['_pointerEvents']=this[_0x1c6f48(_0x59cc07._0x937667)]['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get[_0x3a2bf6(0x138)](){return this['_pointerEvents'];}set['pointerEvents'](_0x500496){const _0x377bd6=_0x3a2bf6;this['_pointerEvents']=_0x500496,this['_echartsContainer']&&(_0x500496?this['_echartsContainer']['style'][_0x377bd6(0x138)]='all':this[_0x377bd6(0x134)]['style']['pointerEvents']='none');}['_setOptionsHook'](_0x19a03b,_0x40dfd8){const _0x2f5427={_0x4667c8:0x132},_0x2e0cc7=_0x3a2bf6;this[_0x2e0cc7(_0x2f5427._0x4667c8)](_0x19a03b);}[_0x3a2bf6(0x141)](_0x2c6073){const _0x2c7c52={_0x38f493:0x134,_0x287432:0x11c},_0x1925f8=_0x3a2bf6;_0x2c6073?this['_echartsContainer']['style']['visibility']='visible':this[_0x1925f8(_0x2c7c52._0x38f493)]['style']['visibility']=_0x1925f8(_0x2c7c52._0x287432);}['_mountedHook'](){const _0x77682e={_0x164dcc:0x10d},_0x15dad3=_0x3a2bf6;this['_map']['scene'][_0x15dad3(_0x77682e._0x164dcc)]=this['options']['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map']['scene']['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x1e027f=_0x3a2bf6;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this[_0x1e027f(0x134)]),this['_echartsInstance'][_0x1e027f(0x11e)]=this['_map'][_0x1e027f(0x110)],this[_0x1e027f(0x132)](this['options']);}['_removedHook'](){const _0x4d7e10={_0x5ac2ee:0x136},_0xfcb0de=_0x3a2bf6;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this[_0xfcb0de(_0x4d7e10._0x5ac2ee)]['container']['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x3b6cf9={_0x444029:0x139,_0x1c887f:0x120,_0x557a34:0x11d,_0x129820:0x138},_0x1422e5=_0x3a2bf6,_0x1cb3e0=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this[_0x1422e5(0x136)][_0x1422e5(_0x3b6cf9._0x444029)]);return _0x1cb3e0['id']=this['id'],_0x1cb3e0['style']['position']='absolute',_0x1cb3e0[_0x1422e5(_0x3b6cf9._0x1c887f)]['top']='0px',_0x1cb3e0['style']['left']='0px',_0x1cb3e0['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',_0x1cb3e0[_0x1422e5(_0x3b6cf9._0x1c887f)][_0x1422e5(_0x3b6cf9._0x557a34)]=this['_map']['scene']['canvas']['clientHeight']+'px',_0x1cb3e0[_0x1422e5(0x120)][_0x1422e5(_0x3b6cf9._0x129820)]=this['_pointerEvents']?'all':_0x1422e5(0x12e),_0x1cb3e0['style']['zIndex']=this['options'][_0x1422e5(0x137)]??0x9,_0x1cb3e0;}['resize'](){const _0x3854fb={_0x5bb281:0x134,_0x5df08a:0x136},_0x12e210=_0x3a2bf6;if(!this['_echartsInstance'])return;this[_0x12e210(_0x3854fb._0x5bb281)][_0x12e210(0x120)][_0x12e210(0x121)]=this[_0x12e210(_0x3854fb._0x5df08a)]['scene'][_0x12e210(0x13e)][_0x12e210(0x142)]+'px',this[_0x12e210(0x134)][_0x12e210(0x120)]['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance']['resize']();}[_0x3a2bf6(0x132)](_0x4e1e6a,_0x2ac026,_0x50dcf0){const _0x2d8064={_0x45eedd:0x149},_0x679ee8=_0x3a2bf6;this[_0x679ee8(0x149)]&&(_0x4e1e6a={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x4e1e6a,{'onlySimpleType':!![]})},delete _0x4e1e6a['eventParent'],this[_0x679ee8(_0x2d8064._0x45eedd)]['setOption'](_0x4e1e6a,_0x2ac026,_0x50dcf0));}['getRectangle'](_0x3f3f8c){const _0x5a9292={_0x1a2975:0x145},_0x2fd430=_0x3a2bf6;let _0x589603,_0x565ecf,_0x34d97e,_0x5d367c;function _0x3b6d6d(_0x160b5b){const _0x5526fe=_0x3bf2;if(!Array[_0x5526fe(0x127)](_0x160b5b))return;const _0x5a847f=_0x160b5b[0x0]||0x0,_0x325189=_0x160b5b[0x1]||0x0;_0x5a847f!==0x0&&_0x325189!==0x0&&(_0x589603===undefined?(_0x589603=_0x5a847f,_0x565ecf=_0x5a847f,_0x34d97e=_0x325189,_0x5d367c=_0x325189):(_0x589603=Math['min'](_0x589603,_0x5a847f),_0x565ecf=Math['max'](_0x565ecf,_0x5a847f),_0x34d97e=Math['min'](_0x34d97e,_0x325189),_0x5d367c=Math['max'](_0x5d367c,_0x325189)));}const _0xe66b53=this['options']['series'];_0xe66b53&&_0xe66b53['forEach'](_0x19737a=>{const _0x125df6={_0x27a9df:0x118},_0x5f4752=_0x3bf2;_0x19737a[_0x5f4752(0x123)]&&_0x19737a['data']['forEach'](_0x318bfc=>{const _0x5200eb=_0x5f4752;if(_0x318bfc[_0x5200eb(0x143)])_0x3b6d6d(_0x318bfc['value']);else _0x318bfc['coords']&&_0x318bfc[_0x5200eb(_0x125df6._0x27a9df)][_0x5200eb(0x10f)](_0x513664=>{_0x3b6d6d(_0x513664);});});});if(_0x589603===0x0&&_0x34d97e===0x0&&_0x565ecf===0x0&&_0x5d367c===0x0)return null;return _0x3f3f8c!==null&&_0x3f3f8c!==void 0x0&&_0x3f3f8c[_0x2fd430(0x140)]?{'xmin':_0x589603,'xmax':_0x565ecf,'ymin':_0x34d97e,'ymax':_0x5d367c}:Cesium['Rectangle'][_0x2fd430(_0x5a9292._0x1a2975)](_0x589603,_0x34d97e,_0x565ecf,_0x5d367c);}['on'](_0x4f4a81,_0x22f5a7,_0x204ffc){return this['_echartsInstance']['on'](_0x4f4a81,_0x22f5a7,_0x204ffc||this),this;}['onByQuery'](_0x253d0e,_0x456f50,_0x598ba4,_0x3a6ae0){return this['_echartsInstance']['on'](_0x253d0e,_0x456f50,_0x598ba4,_0x3a6ae0||this),this;}[_0x3a2bf6(0x114)](_0x34a032,_0xb29cb9,_0xf5871c){const _0x30fddd=_0x3a2bf6;return this['_echartsInstance'][_0x30fddd(0x114)](_0x34a032,_0xb29cb9,_0xf5871c||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace[_0x3a2bf6(0x12c)]['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object[_0x3a2bf6(0x113)](echarts)[_0x3a2bf6(0x10f)](function(_0x85bc94){const _0x54942c=_0x3a2bf6;if(_0x85bc94!==_0x54942c(0x133)&&!exports['hasOwnProperty'](_0x85bc94))Object['defineProperty'](exports,_0x85bc94,{'enumerable':!![],'get':function(){return echarts[_0x85bc94];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});function _0x536b(){const _0x3930cf=['width','painter','data','wgs84ToWindowCoordinates','20031LCwHso','9NGfGpd','isArray','addEventListener','1765266PfLTql','extendComponentModel','mars3dMap','layer','3926576sypifV','none','options','5SPYnoI','72588CekzNn','setEchartsOption','default','_echartsContainer','coordinateSystem','_map','zIndex','pointerEvents','container','removeEventListener','getViewRect','5218871PTlwzO','_mapOffset','canvas','44VewBdy','isFormat','_showHook','clientWidth','value','2650IhhQpc','fromDegrees','ecInstance','setMapOffset','graphic','_echartsInstance','echartsDepthTest','BoundingRect','forEach','scene','mars3dMapRoam','mode','keys','off','dimensions','SceneTransforms','get','coords','1241120oyAhWo','dispatchAction','835241SINuCp','hidden','height','_mars3d_scene','Cesium','style'];_0x536b=function(){return _0x3930cf;};return _0x536b();}
}));
