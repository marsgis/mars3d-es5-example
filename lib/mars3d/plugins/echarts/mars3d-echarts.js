/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.17
 * 编译日期：2023-12-17 23:57:42
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x21436f=_0x42e7;(function(_0x1b0eea,_0x51a228){const _0x5de387={_0x5b0f74:0xfb,_0x3c0f22:0xd8,_0x3db602:0xe8,_0x6880d1:0xe2,_0x354642:0x118,_0x4d5853:0xef,_0x1b53b5:0xdd,_0x425470:0x10c},_0x421712=_0x42e7,_0x74737a=_0x1b0eea();while(!![]){try{const _0x3bbed5=parseInt(_0x421712(_0x5de387._0x5b0f74))/0x1*(parseInt(_0x421712(0x10d))/0x2)+-parseInt(_0x421712(_0x5de387._0x3c0f22))/0x3*(parseInt(_0x421712(_0x5de387._0x3db602))/0x4)+-parseInt(_0x421712(0xea))/0x5*(-parseInt(_0x421712(_0x5de387._0x6880d1))/0x6)+parseInt(_0x421712(0x11c))/0x7*(-parseInt(_0x421712(_0x5de387._0x354642))/0x8)+parseInt(_0x421712(_0x5de387._0x4d5853))/0x9+parseInt(_0x421712(0xfd))/0xa+-parseInt(_0x421712(_0x5de387._0x1b53b5))/0xb*(parseInt(_0x421712(_0x5de387._0x425470))/0xc);if(_0x3bbed5===_0x51a228)break;else _0x74737a['push'](_0x74737a['shift']());}catch(_0x13e097){_0x74737a['push'](_0x74737a['shift']());}}}(_0x1258,0xc39bb));function _interopNamespace(_0x25d61){const _0x13d4ad={_0x5abe2d:0x115,_0x539f94:0xf9},_0x3e9e7b=_0x42e7;if(_0x25d61&&_0x25d61['__esModule'])return _0x25d61;var _0x16e57e=Object['create'](null);return _0x25d61&&Object['keys'](_0x25d61)['forEach'](function(_0x9211f3){const _0x35b7de=_0x42e7;if(_0x9211f3!=='default'){var _0x433909=Object['getOwnPropertyDescriptor'](_0x25d61,_0x9211f3);Object[_0x35b7de(_0x13d4ad._0x5abe2d)](_0x16e57e,_0x9211f3,_0x433909[_0x35b7de(_0x13d4ad._0x539f94)]?_0x433909:{'enumerable':!![],'get':function(){return _0x25d61[_0x9211f3];}});}}),_0x16e57e[_0x3e9e7b(0x110)]=_0x25d61,_0x16e57e;}function _0x42e7(_0xe27039,_0xb45b1a){const _0x1258da=_0x1258();return _0x42e7=function(_0x42e73a,_0x272519){_0x42e73a=_0x42e73a-0xd6;let _0xc0ac5b=_0x1258da[_0x42e73a];return _0xc0ac5b;},_0x42e7(_0xe27039,_0xb45b1a);}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x387cf0,_0x41f60b){const _0x4e6cb8=_0x42e7;this['_mars3d_scene']=_0x387cf0,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this[_0x4e6cb8(0xe4)]=_0x41f60b;}['setMapOffset'](_0x1e5a52){const _0x4a5225=_0x42e7;this[_0x4a5225(0xdb)]=_0x1e5a52;}[_0x21436f(0xe6)](){return this['_mars3d_scene'];}[_0x21436f(0xe5)](_0x3342e6){const _0x767bba={_0x34c19a:0x113,_0x2eedbc:0xdf},_0x500d7a=_0x21436f,_0x2ccb53=this[_0x500d7a(0x112)],_0x400a3b=[NaN,NaN];let _0xdd7736=_0x2ccb53[_0x500d7a(_0x767bba._0x34c19a)];_0x2ccb53[_0x500d7a(0x11a)]&&(_0xdd7736=_0x2ccb53['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x3342e6[0x0],_0x3342e6[0x1])));const _0x4dfa51=Cesium$1['Cartesian3']['fromDegrees'](_0x3342e6[0x0],_0x3342e6[0x1],_0xdd7736);if(!_0x4dfa51)return _0x400a3b;const _0x80ba28=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x2ccb53,_0x4dfa51);if(!_0x80ba28)return _0x400a3b;if(_0x2ccb53['echartsDepthTest']&&_0x2ccb53['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x1af60c=new Cesium$1[(_0x500d7a(0xf2))](_0x2ccb53['globe'][_0x500d7a(_0x767bba._0x2eedbc)],_0x2ccb53['camera'][_0x500d7a(0x106)]),_0x19406e=_0x1af60c[_0x500d7a(0xf5)](_0x4dfa51);if(!_0x19406e)return _0x400a3b;}return[_0x80ba28['x']-this['_mapOffset'][0x0],_0x80ba28['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x257a41=_0x21436f,_0x398c70=this['_api'];return new echarts__namespace[(_0x257a41(0x10a))][(_0x257a41(0xe3))](0x0,0x0,_0x398c70['getWidth'](),_0x398c70['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem[_0x21436f(0x11b)]=function(_0x32ab10,_0x3049ea){const _0x28b72f={_0x17c5ae:0x107},_0x3d012e={_0x31b502:0xf7},_0x394ede=_0x21436f;let _0x5f36e0;const _0x150bcb=_0x32ab10['scheduler']['ecInstance']['_mars3d_scene'];_0x32ab10[_0x394ede(_0x28b72f._0x17c5ae)]('mars3dMap',function(_0x55c109){const _0x45f455=_0x3049ea['getZr']()['painter'];if(!_0x45f455)return;!_0x5f36e0&&(_0x5f36e0=new CompositeCoordinateSystem(_0x150bcb,_0x3049ea)),_0x55c109['coordinateSystem']=_0x5f36e0,_0x5f36e0['setMapOffset'](_0x55c109['__mapOffset']||[0x0,0x0]);}),_0x32ab10['eachSeries'](function(_0x44d460){const _0xe2bc19=_0x394ede;_0x44d460['get']('coordinateSystem')===_0xe2bc19(_0x3d012e._0x31b502)&&(!_0x5f36e0&&(_0x5f36e0=new CompositeCoordinateSystem(_0x150bcb,_0x3049ea)),_0x44d460['coordinateSystem']=_0x5f36e0);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace[_0x21436f(0x105)]('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x21436f(0x10f)]({'type':'mars3dMapRoam','event':_0x21436f(0xfa),'update':'updateLayout'},function(_0x51a52b,_0x505b0a){}),echarts__namespace['extendComponentModel']({'type':_0x21436f(0xf7),'getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x584165,_0x3c2d5e){const _0x2108ab={_0x51e387:0xdc},_0x5be0fe=_0x21436f;this[_0x5be0fe(0xee)]=_0x3c2d5e,this['scene']=_0x584165['scheduler']['ecInstance']['_mars3d_scene'],this['scene'][_0x5be0fe(_0x2108ab._0x51e387)]['addEventListener'](this[_0x5be0fe(0xed)],this);},'moveHandler':function(_0x29f12e,_0xf6fa50){const _0x58a3d4=_0x21436f;this[_0x58a3d4(0xee)][_0x58a3d4(0xd7)]({'type':'mars3dMapRoam'});},'render':function(_0x332ae1,_0x406d88,_0x3a2fb2){},'dispose':function(_0x35259d){const _0x5f0289={_0x29ec68:0xdc},_0x45e04a=_0x21436f;this['scene'][_0x45e04a(_0x5f0289._0x29ec68)]['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];function _0x1258(){const _0x51aca2=['_api','dataToPoint','getBMap','none','1631660felMhs','data','5tGCPZz','coords','min','moveHandler','api','1552653EPdzQt','_pointerEvents','zIndex','EllipsoidalOccluder','layer','_mountedHook','isPointVisible','hidden','mars3dMap','div','get','mars3dMapRoam','1401982maRTin','container','6879200rvTkSI','_map','keys','style','series','canvas','_createChartOverlay','scene','registerCoordinateSystem','positionWC','eachComponent','position','Rectangle','graphic','value','1404MtBrJg','2LPBzcY','getRectangle','registerAction','default','width','_mars3d_scene','echartsFixedHeight','fixedHeight','defineProperty','init','all','16NPWeRF','_removedHook','echartsAutoHeight','create','52619QCyhgp','_echartsInstance','EchartsLayer','dispatchAction','3oZMffR','pointerEvents','absolute','_mapOffset','postRender','128491KgjrPo','options','ellipsoid','height','setEchartsOption','1970508gWUSGU','BoundingRect'];_0x1258=function(){return _0x51aca2;};return _0x1258();}class EchartsLayer extends BaseLayer{constructor(_0x4bd135={}){super(_0x4bd135),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x21436f(0xd9)](_0x936b72){const _0x193afa=_0x21436f;this[_0x193afa(0xf0)]=_0x936b72,this['_echartsContainer']&&(_0x936b72?this['_echartsContainer'][_0x193afa(0x100)]['pointerEvents']=_0x193afa(0x117):this['_echartsContainer']['style']['pointerEvents']='none');}['_setOptionsHook'](_0x41345e,_0x200898){const _0x816ea8={_0x522649:0xe1},_0x97848c=_0x21436f;this[_0x97848c(_0x816ea8._0x522649)](_0x41345e);}['_showHook'](_0x368d00){const _0x3c8bae={_0x5bf718:0x100,_0x24aa9c:0xf6},_0x120a62=_0x21436f;_0x368d00?this['_echartsContainer'][_0x120a62(_0x3c8bae._0x5bf718)]['visibility']='visible':this['_echartsContainer']['style']['visibility']=_0x120a62(_0x3c8bae._0x24aa9c);}[_0x21436f(0xf4)](){const _0x3466e1={_0x53192d:0xfe,_0x55ce38:0x114},_0x3420b2=_0x21436f;this[_0x3420b2(0xfe)]['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this[_0x3420b2(_0x3466e1._0x53192d)][_0x3420b2(0x104)]['echartsFixedHeight']=this['options'][_0x3420b2(_0x3466e1._0x55ce38)]??0x0;}['_addedHook'](){const _0x598ed4={_0x332de8:0x116},_0x946172=_0x21436f;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace[_0x946172(_0x598ed4._0x332de8)](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map']['scene'],this['setEchartsOption'](this[_0x946172(0xde)]);}[_0x21436f(0x119)](){const _0x368895={_0x428a83:0xfc},_0x274219=_0x21436f;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this[_0x274219(0xfe)][_0x274219(_0x368895._0x428a83)]['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}[_0x21436f(0x103)](){const _0xc9b5a3={_0x2c5536:0xf8,_0x3f71a2:0xfc,_0x41ebf6:0x108,_0x1a6874:0x104,_0x4f1f79:0x102,_0x21edf2:0x100,_0x4081a1:0xf1},_0x3f5fc1=_0x21436f,_0x45ccc2=mars3d__namespace['DomUtil']['create'](_0x3f5fc1(_0xc9b5a3._0x2c5536),'mars3d-echarts',this['_map'][_0x3f5fc1(_0xc9b5a3._0x3f71a2)]);return _0x45ccc2['id']=this['id'],_0x45ccc2['style'][_0x3f5fc1(_0xc9b5a3._0x41ebf6)]=_0x3f5fc1(0xda),_0x45ccc2[_0x3f5fc1(0x100)]['top']='0px',_0x45ccc2['style']['left']='0px',_0x45ccc2['style'][_0x3f5fc1(0x111)]=this['_map'][_0x3f5fc1(_0xc9b5a3._0x1a6874)][_0x3f5fc1(_0xc9b5a3._0x4f1f79)]['clientWidth']+'px',_0x45ccc2[_0x3f5fc1(_0xc9b5a3._0x21edf2)]['height']=this[_0x3f5fc1(0xfe)][_0x3f5fc1(0x104)]['canvas']['clientHeight']+'px',_0x45ccc2[_0x3f5fc1(0x100)][_0x3f5fc1(0xd9)]=this['_pointerEvents']?'all':_0x3f5fc1(0xe7),_0x45ccc2['style']['zIndex']=this['options'][_0x3f5fc1(_0xc9b5a3._0x4081a1)]??0x9,_0x45ccc2;}['resize'](){const _0x5746c7={_0x4486fe:0x11d,_0x15fbc6:0xfe,_0x3e2601:0x102},_0x416e07=_0x21436f;if(!this[_0x416e07(_0x5746c7._0x4486fe)])return;this['_echartsContainer'][_0x416e07(0x100)]['width']=this[_0x416e07(_0x5746c7._0x15fbc6)]['scene'][_0x416e07(_0x5746c7._0x3e2601)]['clientWidth']+'px',this['_echartsContainer']['style'][_0x416e07(0xe0)]=this['_map']['scene']['canvas']['clientHeight']+'px',this[_0x416e07(0x11d)]['resize']();}['setEchartsOption'](_0x4b34b8,_0x373076,_0x353b88){const _0x51967d=_0x21436f;this['_echartsInstance']&&(_0x4b34b8={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x4b34b8,{'onlySimpleType':!![]})},delete _0x4b34b8['eventParent'],this[_0x51967d(0x11d)]['setOption'](_0x4b34b8,_0x373076,_0x353b88));}[_0x21436f(0x10e)](_0x219745){const _0x147de1={_0x12494c:0xe9},_0x59cb43=_0x21436f;let _0x2c7359,_0x1aa281,_0x85e5bf,_0x3f3295;function _0x8d599a(_0xd1e863){const _0x33167c=_0x42e7;if(!Array['isArray'](_0xd1e863))return;const _0x28e570=_0xd1e863[0x0]||0x0,_0x38c570=_0xd1e863[0x1]||0x0;_0x28e570!==0x0&&_0x38c570!==0x0&&(_0x2c7359===undefined?(_0x2c7359=_0x28e570,_0x1aa281=_0x28e570,_0x85e5bf=_0x38c570,_0x3f3295=_0x38c570):(_0x2c7359=Math['min'](_0x2c7359,_0x28e570),_0x1aa281=Math['max'](_0x1aa281,_0x28e570),_0x85e5bf=Math[_0x33167c(0xec)](_0x85e5bf,_0x38c570),_0x3f3295=Math['max'](_0x3f3295,_0x38c570)));}const _0x81f78a=this['options'][_0x59cb43(0x101)];_0x81f78a&&_0x81f78a['forEach'](_0x364a75=>{const _0x1c8069={_0x44df03:0x10b,_0x5e989a:0xeb},_0x524d51=_0x59cb43;_0x364a75[_0x524d51(_0x147de1._0x12494c)]&&_0x364a75['data']['forEach'](_0x2b8b40=>{const _0x554703=_0x524d51;if(_0x2b8b40['value'])_0x8d599a(_0x2b8b40[_0x554703(_0x1c8069._0x44df03)]);else _0x2b8b40['coords']&&_0x2b8b40[_0x554703(_0x1c8069._0x5e989a)]['forEach'](_0x4fe6ff=>{_0x8d599a(_0x4fe6ff);});});});if(_0x2c7359===0x0&&_0x85e5bf===0x0&&_0x1aa281===0x0&&_0x3f3295===0x0)return null;return _0x219745!==null&&_0x219745!==void 0x0&&_0x219745['isFormat']?{'xmin':_0x2c7359,'xmax':_0x1aa281,'ymin':_0x85e5bf,'ymax':_0x3f3295}:Cesium[_0x59cb43(0x109)]['fromDegrees'](_0x2c7359,_0x85e5bf,_0x1aa281,_0x3f3295);}['on'](_0x148c9d,_0x46e54f,_0x466bfb){return this['_echartsInstance']['on'](_0x148c9d,_0x46e54f,_0x466bfb||this),this;}['onByQuery'](_0x1e6f4a,_0xad9c,_0x562f41,_0x17cd06){return this['_echartsInstance']['on'](_0x1e6f4a,_0xad9c,_0x562f41,_0x17cd06||this),this;}['off'](_0x18b081,_0x35b947,_0x16669f){const _0x47c2ff=_0x21436f;return this[_0x47c2ff(0x11d)]['off'](_0x18b081,_0x35b947,_0x16669f||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace[_0x21436f(0xf3)][_0x21436f(0xd6)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x21436f(0xd6)]=EchartsLayer,Object[_0x21436f(0xff)](echarts)['forEach'](function(_0x1917cc){if(_0x1917cc!=='default'&&!exports['hasOwnProperty'](_0x1917cc))Object['defineProperty'](exports,_0x1917cc,{'enumerable':!![],'get':function(){return echarts[_0x1917cc];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
