/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.11
 * 编译日期：2023-11-02 17:47:11
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x3945e2=_0x2123;(function(_0x39431a,_0x41bb2e){const _0x3acf59={_0x32bd73:0xdf,_0x4a3c94:0xc3,_0x370463:0xe7,_0x4c0108:0xc8,_0x575a0e:0xeb},_0x34ffa8=_0x2123,_0x47c94f=_0x39431a();while(!![]){try{const _0x2400ec=parseInt(_0x34ffa8(0xea))/0x1*(-parseInt(_0x34ffa8(_0x3acf59._0x32bd73))/0x2)+-parseInt(_0x34ffa8(_0x3acf59._0x4a3c94))/0x3+parseInt(_0x34ffa8(0xee))/0x4+parseInt(_0x34ffa8(0xe5))/0x5+-parseInt(_0x34ffa8(0xd9))/0x6*(parseInt(_0x34ffa8(_0x3acf59._0x370463))/0x7)+-parseInt(_0x34ffa8(0xc9))/0x8*(parseInt(_0x34ffa8(_0x3acf59._0x4c0108))/0x9)+parseInt(_0x34ffa8(_0x3acf59._0x575a0e))/0xa;if(_0x2400ec===_0x41bb2e)break;else _0x47c94f['push'](_0x47c94f['shift']());}catch(_0x39c106){_0x47c94f['push'](_0x47c94f['shift']());}}}(_0x1e89,0x7b85d));function _0x1e89(){const _0x231444=['layer','globe','width','2dsUpxX','_mars3d_scene','forEach','style','resize','value','4257785jrNrKP','data','1520995pxJscd','all','pointerEvents','44171oRTOHn','8328430uAvAQP','registerAction','depthTest','732356VZgngr','mode','scheduler','fromDegrees','create','_createChartOverlay','register','_map','coordinateSystem','_pointerEvents','echartsFixedHeight','camera','getRectangle','ecInstance','off','max','lng','matrix','echartsAutoHeight','left','clientWidth','559323JoseWS','coords','__esModule','container','eachSeries','9ulbzyC','5570864GRCAQS','mars3dMap','options','DomUtil','init','isArray','lat','height','scene','keys','none','_echartsContainer','dimensions','_api','_echartsInstance','_addedHook','12BsvDnz','default','eachComponent'];_0x1e89=function(){return _0x231444;};return _0x1e89();}function _interopNamespace(_0x51d09c){const _0x1633be={_0x3cebb3:0xda},_0x1c8cea=_0x2123;if(_0x51d09c&&_0x51d09c['__esModule'])return _0x51d09c;var _0x1f3597=Object['create'](null);return _0x51d09c&&Object['keys'](_0x51d09c)[_0x1c8cea(0xe1)](function(_0x4573ca){const _0x3396ab=_0x1c8cea;if(_0x4573ca!==_0x3396ab(0xda)){var _0x5aaa99=Object['getOwnPropertyDescriptor'](_0x51d09c,_0x4573ca);Object['defineProperty'](_0x1f3597,_0x4573ca,_0x5aaa99['get']?_0x5aaa99:{'enumerable':!![],'get':function(){return _0x51d09c[_0x4573ca];}});}}),_0x1f3597[_0x1c8cea(_0x1633be._0x3cebb3)]=_0x51d09c,_0x1f3597;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x1933d5,_0x38190a){const _0x45d053={_0x7893e5:0xd5},_0x1a0dbf=_0x2123;this[_0x1a0dbf(0xe0)]=_0x1933d5,this[_0x1a0dbf(_0x45d053._0x7893e5)]=['lng',_0x1a0dbf(0xcf)],this['_mapOffset']=[0x0,0x0],this['_api']=_0x38190a;}['setMapOffset'](_0x2a272f){this['_mapOffset']=_0x2a272f;}['getBMap'](){const _0x17c769=_0x2123;return this[_0x17c769(0xe0)];}['dataToPoint'](_0x3acff2){const _0x50335b={_0x3b0eaa:0xdd},_0xc50b60=_0x2123,_0x10e6d3=this['_mars3d_scene'],_0x10acdf=[NaN,NaN];let _0x3757c1=_0x10e6d3['echartsFixedHeight'];_0x10e6d3[_0xc50b60(0xc0)]&&(_0x3757c1=_0x10e6d3[_0xc50b60(_0x50335b._0x3b0eaa)]['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x3acff2[0x0],_0x3acff2[0x1])));const _0x3d19fc=Cesium$1['Cartesian3'][_0xc50b60(0xb1)](_0x3acff2[0x0],_0x3acff2[0x1],_0x3757c1);if(!_0x3d19fc)return _0x10acdf;const _0x2d73fe=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x10e6d3,_0x3d19fc);if(!_0x2d73fe)return _0x10acdf;if(_0x10e6d3['echartsDepthTest']&&_0x10e6d3[_0xc50b60(0xef)]===Cesium$1['SceneMode']['SCENE3D']){const _0xbcb24f=new Cesium$1['EllipsoidalOccluder'](_0x10e6d3['globe']['ellipsoid'],_0x10e6d3[_0xc50b60(0xb9)]['positionWC']),_0x7824e1=_0xbcb24f['isPointVisible'](_0x3d19fc);if(!_0x7824e1)return _0x10acdf;}return[_0x2d73fe['x']-this['_mapOffset'][0x0],_0x2d73fe['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x11980a={_0xeeffa:0xd6},_0x1292a2=_0x2123,_0x1df417=this[_0x1292a2(_0x11980a._0xeeffa)];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x1df417['getWidth'](),_0x1df417['getHeight']());}['getRoamTransform'](){const _0x10c2c6={_0x586914:0xbf},_0x2c73c1=_0x2123;return echarts__namespace[_0x2c73c1(_0x10c2c6._0x586914)]['create']();}}CompositeCoordinateSystem['dimensions']=[_0x3945e2(0xbe),'lat'],CompositeCoordinateSystem[_0x3945e2(0xb2)]=function(_0x3e994a,_0x1b7474){const _0x9c2e70={_0x1e7278:0xbb,_0x45ac6a:0xe0,_0x10e1e7:0xc7},_0x2b3188={_0x33f847:0xb6},_0x56174f=_0x3945e2;let _0x4a54d2;const _0x196de5=_0x3e994a[_0x56174f(0xb0)][_0x56174f(_0x9c2e70._0x1e7278)][_0x56174f(_0x9c2e70._0x45ac6a)];_0x3e994a[_0x56174f(0xdb)](_0x56174f(0xca),function(_0x504601){const _0x4c28f4=_0x56174f,_0x27f8bd=_0x1b7474['getZr']()['painter'];if(!_0x27f8bd)return;!_0x4a54d2&&(_0x4a54d2=new CompositeCoordinateSystem(_0x196de5,_0x1b7474)),_0x504601[_0x4c28f4(_0x2b3188._0x33f847)]=_0x4a54d2,_0x4a54d2['setMapOffset'](_0x504601['__mapOffset']||[0x0,0x0]);}),_0x3e994a[_0x56174f(_0x9c2e70._0x10e1e7)](function(_0x4efd0f){const _0x43a7fa=_0x56174f;_0x4efd0f['get']('coordinateSystem')==='mars3dMap'&&(!_0x4a54d2&&(_0x4a54d2=new CompositeCoordinateSystem(_0x196de5,_0x1b7474)),_0x4efd0f[_0x43a7fa(0xb6)]=_0x4a54d2);});};function _0x2123(_0x1993b1,_0x25b7e9){const _0x1e8906=_0x1e89();return _0x2123=function(_0x21236e,_0x5bae19){_0x21236e=_0x21236e-0xb0;let _0x54dd72=_0x1e8906[_0x21236e];return _0x54dd72;},_0x2123(_0x1993b1,_0x25b7e9);}if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace[_0x3945e2(0xcd)])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x3945e2(0xec)]({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x3397c0,_0x145fa9){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':_0x3945e2(0xca),'init':function(_0x15a28f,_0x7f1d0){this['api']=_0x7f1d0,this['scene']=_0x15a28f['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x5c4a21,_0x2ccbdc){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0xb86374,_0x2c9de6,_0x3a6c54){},'dispose':function(_0x1346ac){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x3945e2(0xdc)]['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x47a6ab={}){const _0x451a7b={_0x3715d3:0xcb,_0x123fc5:0xe9},_0x5e1bdc=_0x3945e2;super(_0x47a6ab),this['_pointerEvents']=this[_0x5e1bdc(_0x451a7b._0x3715d3)][_0x5e1bdc(_0x451a7b._0x123fc5)];}get[_0x3945e2(0xdc)](){const _0x5147d6=_0x3945e2;return this[_0x5147d6(0xd7)];}get['pointerEvents'](){const _0x3aff4b=_0x3945e2;return this[_0x3aff4b(0xb7)];}set['pointerEvents'](_0x1019f8){const _0xde6bdd=_0x3945e2;this['_pointerEvents']=_0x1019f8,this['_echartsContainer']&&(_0x1019f8?this['_echartsContainer']['style']['pointerEvents']=_0xde6bdd(0xe8):this['_echartsContainer']['style']['pointerEvents']='none');}['_setOptionsHook'](_0x2abcd5,_0x582adf){this['setEchartsOption'](_0x2abcd5);}['_showHook'](_0x1dae3b){const _0x21bcee=_0x3945e2;_0x1dae3b?this[_0x21bcee(0xd4)][_0x21bcee(0xe2)]['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x1616f8={_0x4bdf8:0xd1,_0x286462:0xed},_0x5c0e07=_0x3945e2;this[_0x5c0e07(0xb5)][_0x5c0e07(_0x1616f8._0x4bdf8)]['echartsDepthTest']=this['options'][_0x5c0e07(_0x1616f8._0x286462)]??!![],this['_map'][_0x5c0e07(0xd1)]['echartsAutoHeight']=this['options']['clampToGround']??![],this[_0x5c0e07(0xb5)]['scene'][_0x5c0e07(0xb8)]=this['options']['fixedHeight']??0x0;}[_0x3945e2(0xd8)](){const _0x25e81a={_0x778708:0xb3,_0x395351:0xcd,_0x3672dd:0xd4,_0x1b4966:0xe0},_0x2f2e36=_0x3945e2;this[_0x2f2e36(0xd4)]=this[_0x2f2e36(_0x25e81a._0x778708)](),this['_echartsInstance']=echarts__namespace[_0x2f2e36(_0x25e81a._0x395351)](this[_0x2f2e36(_0x25e81a._0x3672dd)]),this['_echartsInstance'][_0x2f2e36(_0x25e81a._0x1b4966)]=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x216b3e={_0x4aff51:0xd7,_0x14dfbf:0xd4,_0x3da1d3:0xb5,_0x1cee26:0xc6},_0x39cc5b=_0x3945e2;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this[_0x39cc5b(_0x216b3e._0x4aff51)]),this[_0x39cc5b(_0x216b3e._0x14dfbf)]&&(this[_0x39cc5b(_0x216b3e._0x3da1d3)][_0x39cc5b(_0x216b3e._0x1cee26)]['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x4a7e53={_0x6f6008:0xcc,_0x270074:0xc1,_0x39daed:0xde,_0x36eb18:0xd0},_0x34f264=_0x3945e2,_0x316b61=mars3d__namespace[_0x34f264(_0x4a7e53._0x6f6008)]['create']('div','mars3d-echarts',this['_map']['container']);return _0x316b61['id']=this['id'],_0x316b61['style']['position']='absolute',_0x316b61['style']['top']='0px',_0x316b61[_0x34f264(0xe2)][_0x34f264(_0x4a7e53._0x270074)]='0px',_0x316b61[_0x34f264(0xe2)][_0x34f264(_0x4a7e53._0x39daed)]=this['_map']['scene']['canvas'][_0x34f264(0xc2)]+'px',_0x316b61['style'][_0x34f264(_0x4a7e53._0x36eb18)]=this['_map']['scene']['canvas']['clientHeight']+'px',_0x316b61[_0x34f264(0xe2)]['pointerEvents']=this['_pointerEvents']?_0x34f264(0xe8):_0x34f264(0xd3),_0x316b61['style']['zIndex']=this['options']['zIndex']??0x9,_0x316b61;}['resize'](){const _0x12c792={_0x33f0ed:0xc2},_0x1573ab=_0x3945e2;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map'][_0x1573ab(0xd1)]['canvas'][_0x1573ab(_0x12c792._0x33f0ed)]+'px',this['_echartsContainer']['style']['height']=this['_map'][_0x1573ab(0xd1)]['canvas']['clientHeight']+'px',this[_0x1573ab(0xd7)][_0x1573ab(0xe3)]();}['setEchartsOption'](_0x29c986,_0x5817b1,_0x3ccf91){this['_echartsInstance']&&(_0x29c986['mars3dMap']=_0x29c986['mars3dMap']||{},this['_echartsInstance']['setOption'](_0x29c986,_0x5817b1,_0x3ccf91));}[_0x3945e2(0xba)](_0x2761c3){const _0x537f2f={_0x2d8fed:0xe6,_0x59cef7:0xe1},_0x3aec3a={_0x760a34:0xbd},_0x1c8f73=_0x3945e2;let _0x51b86e,_0x41f72a,_0x5393e5,_0x164a43;function _0x36968d(_0x554ed7){const _0x1a6ca5=_0x2123;if(!Array[_0x1a6ca5(0xce)](_0x554ed7))return;const _0x521618=_0x554ed7[0x0]||0x0,_0x132762=_0x554ed7[0x1]||0x0;_0x521618!==0x0&&_0x132762!==0x0&&(_0x51b86e===undefined?(_0x51b86e=_0x521618,_0x41f72a=_0x521618,_0x5393e5=_0x132762,_0x164a43=_0x132762):(_0x51b86e=Math['min'](_0x51b86e,_0x521618),_0x41f72a=Math['max'](_0x41f72a,_0x521618),_0x5393e5=Math['min'](_0x5393e5,_0x132762),_0x164a43=Math[_0x1a6ca5(_0x3aec3a._0x760a34)](_0x164a43,_0x132762)));}const _0x1f45d2=this['options']['series'];_0x1f45d2&&_0x1f45d2[_0x1c8f73(0xe1)](_0x4b14de=>{const _0xe56284={_0x54e561:0xc4},_0x527b6f=_0x1c8f73;_0x4b14de['data']&&_0x4b14de[_0x527b6f(_0x537f2f._0x2d8fed)][_0x527b6f(_0x537f2f._0x59cef7)](_0x2b2e36=>{const _0x5418cf=_0x527b6f;if(_0x2b2e36[_0x5418cf(0xe4)])_0x36968d(_0x2b2e36['value']);else _0x2b2e36[_0x5418cf(_0xe56284._0x54e561)]&&_0x2b2e36['coords'][_0x5418cf(0xe1)](_0x4231c6=>{_0x36968d(_0x4231c6);});});});if(_0x51b86e===0x0&&_0x5393e5===0x0&&_0x41f72a===0x0&&_0x164a43===0x0)return null;return _0x2761c3!==null&&_0x2761c3!==void 0x0&&_0x2761c3['isFormat']?{'xmin':_0x51b86e,'xmax':_0x41f72a,'ymin':_0x5393e5,'ymax':_0x164a43}:Cesium['Rectangle']['fromDegrees'](_0x51b86e,_0x5393e5,_0x41f72a,_0x164a43);}['on'](_0x53d562,_0x3257c7,_0x53232c){return this['_echartsInstance']['on'](_0x53d562,_0x3257c7,_0x53232c||this),this;}['onByQuery'](_0x568412,_0xa72adc,_0x10cacb,_0x33343b){return this['_echartsInstance']['on'](_0x568412,_0xa72adc,_0x10cacb,_0x33343b||this),this;}[_0x3945e2(0xbc)](_0x4f3090,_0x31c501,_0x40947c){return this['_echartsInstance']['off'](_0x4f3090,_0x31c501,_0x40947c||this),this;}}mars3d__namespace['LayerUtil'][_0x3945e2(0xb4)]('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object[_0x3945e2(0xd2)](echarts)['forEach'](function(_0x2f089e){const _0x198174={_0x521288:0xda},_0x5986bd=_0x3945e2;if(_0x2f089e!==_0x5986bd(_0x198174._0x521288)&&!exports['hasOwnProperty'](_0x2f089e))Object['defineProperty'](exports,_0x2f089e,{'enumerable':!![],'get':function(){return echarts[_0x2f089e];}});}),Object['defineProperty'](exports,_0x3945e2(0xc5),{'value':!![]});
}));
