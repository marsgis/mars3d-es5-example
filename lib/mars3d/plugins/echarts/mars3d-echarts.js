/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.12
 * 编译日期：2024-05-06 21:30:44
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x19fe73=_0x4e01;(function(_0x1a3dbe,_0x3cf1dd){const _0x445fc6={_0xfe4c56:0x1a5,_0x59c988:0x1aa,_0x5aa63b:0x1ab,_0x5d3a95:0x17b,_0x1f2075:0x19f},_0x5e7c9f=_0x4e01,_0x17f546=_0x1a3dbe();while(!![]){try{const _0x46555a=parseInt(_0x5e7c9f(0x175))/0x1+parseInt(_0x5e7c9f(_0x445fc6._0xfe4c56))/0x2+parseInt(_0x5e7c9f(0x1a3))/0x3*(-parseInt(_0x5e7c9f(_0x445fc6._0x59c988))/0x4)+parseInt(_0x5e7c9f(0x1a8))/0x5+-parseInt(_0x5e7c9f(0x18a))/0x6*(-parseInt(_0x5e7c9f(_0x445fc6._0x5aa63b))/0x7)+-parseInt(_0x5e7c9f(_0x445fc6._0x5d3a95))/0x8+parseInt(_0x5e7c9f(_0x445fc6._0x1f2075))/0x9*(-parseInt(_0x5e7c9f(0x171))/0xa);if(_0x46555a===_0x3cf1dd)break;else _0x17f546['push'](_0x17f546['shift']());}catch(_0xb65677){_0x17f546['push'](_0x17f546['shift']());}}}(_0x5b2f,0x73e73));function _0x4e01(_0x37a023,_0x3234b3){const _0x5b2f1f=_0x5b2f();return _0x4e01=function(_0x4e01fd,_0x4c3cbf){_0x4e01fd=_0x4e01fd-0x16e;let _0x421fcc=_0x5b2f1f[_0x4e01fd];if(_0x4e01['NGCKam']===undefined){var _0x212fcf=function(_0x5a8f95){const _0x58a8bd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x984063='',_0x3aadcd='';for(let _0x112c76=0x0,_0x1e4725,_0x99b868,_0x16b8ed=0x0;_0x99b868=_0x5a8f95['charAt'](_0x16b8ed++);~_0x99b868&&(_0x1e4725=_0x112c76%0x4?_0x1e4725*0x40+_0x99b868:_0x99b868,_0x112c76++%0x4)?_0x984063+=String['fromCharCode'](0xff&_0x1e4725>>(-0x2*_0x112c76&0x6)):0x0){_0x99b868=_0x58a8bd['indexOf'](_0x99b868);}for(let _0x337459=0x0,_0x1dc38c=_0x984063['length'];_0x337459<_0x1dc38c;_0x337459++){_0x3aadcd+='%'+('00'+_0x984063['charCodeAt'](_0x337459)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3aadcd);};_0x4e01['jzVeTV']=_0x212fcf,_0x37a023=arguments,_0x4e01['NGCKam']=!![];}const _0x5640f5=_0x5b2f1f[0x0],_0x53f820=_0x4e01fd+_0x5640f5,_0x33a945=_0x37a023[_0x53f820];return!_0x33a945?(_0x421fcc=_0x4e01['jzVeTV'](_0x421fcc),_0x37a023[_0x53f820]=_0x421fcc):_0x421fcc=_0x33a945,_0x421fcc;},_0x4e01(_0x37a023,_0x3234b3);}function _interopNamespace(_0x5a8f95){const _0x1288b6={_0x4153cf:0x199},_0x4cab12=_0x4e01;if(_0x5a8f95&&_0x5a8f95['__esModule'])return _0x5a8f95;var _0x58a8bd=Object['create'](null);return _0x5a8f95&&Object['keys'](_0x5a8f95)['forEach'](function(_0x984063){if(_0x984063!=='default'){var _0x3aadcd=Object['getOwnPropertyDescriptor'](_0x5a8f95,_0x984063);Object['defineProperty'](_0x58a8bd,_0x984063,_0x3aadcd['get']?_0x3aadcd:{'enumerable':!![],'get':function(){return _0x5a8f95[_0x984063];}});}}),_0x58a8bd[_0x4cab12(_0x1288b6._0x4153cf)]=_0x5a8f95,_0x58a8bd;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);function _0x5b2f(){const _0x12d45c=['z2v0v2LKDgG','Cg9ZDfjLBMrLCG','x2vJAgfYDhndB250ywLUzxi','zwnOyxj0CW','x21HCNmZzf9Zy2vUzq','ndjcteLbre4','D2LKDgG','x3nOB3DiB29R','qM91BMrPBMDszwn0','zgf0yq','AgvPz2H0','yxbP','x21HCe9MzNnLDa','z2v0wNi','z2v0vMLLD1jLy3q','u2nLBMvuCMfUC2zVCM1Z','x2vJAgfYDhnjBNn0yw5Jzq','zgvMAw5LuhjVCgvYDhK','x3bVAw50zxjfDMvUDhm','zgf0yvrVug9PBNq','zgvMyxvSDa','BgvMDa','C2v0rwnOyxj0C09WDgLVBG','q2vZAxvT','zNjVBurLz3jLzxm','rwnOyxj0C0XHEwvY','mtm5nujzuwf5qq','C3r5Bgu','x19LC01VzhvSzq','BwfYCZnKtwfW','nJncwezoDxG','x3jLBw92zwriB29R','odaYntG2AeHgwuXf','B3b0Aw9UCW','zgLZCgf0y2Hby3rPB24','mJy3nZC3mhHXyu10wa','B25cEvf1zxj5','mteZote2qxb0DKvl','mJa5mZe0CNDeDxjz','Bwf4','C2nLBMu','Bgf5zxi','Bg5N','Cg9ZAxrPB24','y2fUDMfZ','y29VCMrPBMf0zvn5C3rLBq','mtq3meDjz1zcAq','rg9TvxrPBa','y3jLyxrL','C2v0twfWt2zMC2v0','mtG4ndu5B1zoueTW','x21HCa','Cg9PBNrLCKv2zw50CW','z2v0qxr0CLzHBa','DMfSDwu','zwnOyxj0C0zPEgvKsgvPz2H0','mtKXmJi5nLnyEe9fuG','Dg9W','zM9YrwfJAa','zwnOyxj0C0f1Dg9izwLNAhq','uMvJDgfUz2XL','BwLU','A2v5CW','C2nOzwr1BgvY','q2fYDg9NCMfWAgLJ','y2XPzw50sgvPz2H0'];_0x5b2f=function(){return _0x12d45c;};return _0x5b2f();}const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x112c76,_0x1e4725){const _0x365820=_0x4e01;this[_0x365820(0x189)]=_0x112c76,this['dimensions']=['lng','lat'],this[_0x365820(0x191)]=[0x0,0x0],this['_api']=_0x1e4725;}[_0x19fe73(0x174)](_0x99b868){this['_mapOffset']=_0x99b868;}['getBMap'](){return this['_mars3d_scene'];}[_0x19fe73(0x198)](_0x16b8ed){const _0x1b0bf8={_0x3aff80:0x183,_0x15fa98:0x191},_0x18e8b1=_0x19fe73,_0x337459=this[_0x18e8b1(0x189)],_0x1dc38c=[NaN,NaN];let _0x5e337a=_0x337459['echartsFixedHeight'];_0x337459['echartsAutoHeight']&&(_0x5e337a=_0x337459['getHeight'](Cesium$1[_0x18e8b1(_0x1b0bf8._0x3aff80)]['fromDegrees'](_0x16b8ed[0x0],_0x16b8ed[0x1])));const _0x308369=Cesium$1['Cartesian3'][_0x18e8b1(0x19d)](_0x16b8ed[0x0],_0x16b8ed[0x1],_0x5e337a);if(!_0x308369)return _0x1dc38c;const _0x513b3a=Cesium$1[_0x18e8b1(0x194)]['wgs84ToWindowCoordinates'](_0x337459,_0x308369);if(!_0x513b3a)return _0x1dc38c;if(_0x337459['echartsDepthTest']&&_0x337459['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x4f7ade=new Cesium$1['EllipsoidalOccluder'](_0x337459['globe']['ellipsoid'],_0x337459['camera']['positionWC']),_0x1f357e=_0x4f7ade['isPointVisible'](_0x308369);if(!_0x1f357e)return _0x1dc38c;}return[_0x513b3a['x']-this[_0x18e8b1(_0x1b0bf8._0x15fa98)][0x0],_0x513b3a['y']-this['_mapOffset'][0x1]];}[_0x19fe73(0x193)](){const _0x3ee38b={_0x36ad20:0x185},_0x1719a6=_0x19fe73,_0x3074c1=this['_api'];return new echarts__namespace['graphic'][(_0x1719a6(0x18d))](0x0,0x0,_0x3074c1[_0x1719a6(_0x3ee38b._0x36ad20)](),_0x3074c1['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=[_0x19fe73(0x1af),'lat'],CompositeCoordinateSystem[_0x19fe73(0x173)]=function(_0x3b5f51,_0xa22ab0){const _0x59ca8a={_0x5dd4f8:0x182,_0x473987:0x1a2},_0x317e3c=_0x19fe73;let _0x24876a;const _0x230bed=_0x3b5f51[_0x317e3c(_0x59ca8a._0x5dd4f8)]['ecInstance']['_mars3d_scene'];_0x3b5f51['eachComponent'](_0x317e3c(_0x59ca8a._0x473987),function(_0x16ca10){const _0x2f96cf=_0x317e3c,_0x4fa06f=_0xa22ab0[_0x2f96cf(0x192)]()['painter'];if(!_0x4fa06f)return;!_0x24876a&&(_0x24876a=new CompositeCoordinateSystem(_0x230bed,_0xa22ab0)),_0x16ca10['coordinateSystem']=_0x24876a,_0x24876a['setMapOffset'](_0x16ca10['__mapOffset']||[0x0,0x0]);}),_0x3b5f51['eachSeries'](function(_0x1db2d1){const _0x2100c9=_0x317e3c;_0x1db2d1['get']('coordinateSystem')===_0x2100c9(0x1a2)&&(!_0x24876a&&(_0x24876a=new CompositeCoordinateSystem(_0x230bed,_0xa22ab0)),_0x1db2d1[_0x2100c9(0x170)]=_0x24876a);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x2fc9af,_0x532899){}),echarts__namespace['extendComponentModel']({'type':_0x19fe73(0x1a2),'getBMap':function(){const _0x4c86a1={_0x2a5f56:0x189},_0x5e3858=_0x19fe73;return this[_0x5e3858(_0x4c86a1._0x2a5f56)];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x3210a6,_0x5d0323){const _0x14d0ea={_0x1fc98d:0x190},_0x48fbf5=_0x19fe73;this[_0x48fbf5(_0x14d0ea._0x1fc98d)]=_0x5d0323,this[_0x48fbf5(0x1ad)]=_0x3210a6['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x5b0ac7,_0x1b5392){const _0x1c3c08={_0x164c80:0x1a7},_0x1c65d6=_0x19fe73;this['api'][_0x1c65d6(_0x1c3c08._0x164c80)]({'type':'mars3dMapRoam'});},'render':function(_0x433f1b,_0x353dc3,_0xaf2cda){},'dispose':function(_0x4739d0){const _0x494f23={_0x3246ea:0x186},_0x1e0a97=_0x19fe73;this['scene'][_0x1e0a97(_0x494f23._0x3246ea)]['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace[_0x19fe73(0x19c)],BaseLayer=mars3d__namespace[_0x19fe73(0x1ae)]['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x2dd5fc={}){super(_0x2dd5fc),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){const _0x469785=_0x19fe73;return this[_0x469785(0x195)];}get[_0x19fe73(0x177)](){const _0x4f9aed=_0x19fe73;return this[_0x4f9aed(0x197)];}set['pointerEvents'](_0x54dac8){this['_pointerEvents']=_0x54dac8,this['_echartsContainer']&&(_0x54dac8?this['_echartsContainer']['style']['pointerEvents']='all':this['_echartsContainer']['style']['pointerEvents']='none');}['_setOptionsHook'](_0x5e0699,_0x35938b){this['setEchartsOption'](_0x5e0699);}[_0x19fe73(0x18c)](_0x3f4c2e){const _0x5b1b04={_0xa1f67e:0x1a0},_0x19dd83=_0x19fe73;_0x3f4c2e?this['_echartsContainer'][_0x19dd83(_0x5b1b04._0xa1f67e)]['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x37ff77={_0x6e09cb:0x17a,_0x2e3315:0x1a6},_0x14e4ab=_0x19fe73;this['_map']['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this['_map'][_0x14e4ab(0x1ad)][_0x14e4ab(0x17e)]=this['options']['clampToGround']??![],this['_map']['scene'][_0x14e4ab(_0x37ff77._0x6e09cb)]=this[_0x14e4ab(_0x37ff77._0x2e3315)]['fixedHeight']??0x0;}['_addedHook'](){const _0x1f56a8={_0x3e600c:0x19b},_0x43d880=_0x19fe73;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this[_0x43d880(0x176)]['scene'],this[_0x43d880(_0x1f56a8._0x3e600c)](this['options']);}[_0x19fe73(0x1a4)](){const _0x1c5053={_0x508645:0x187},_0x2afd3e=_0x19fe73;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this[_0x2afd3e(_0x1c5053._0x508645)]&&(this['_map']['container']['removeChild'](this[_0x2afd3e(0x187)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x25e29b={_0x5c0f3c:0x16e,_0x17057d:0x17c,_0x3b6556:0x19a,_0x2616e6:0x176,_0x433c1e:0x16f,_0x332dc7:0x1a0,_0x1f8523:0x18f,_0xe72594:0x184},_0x1c5fc4=_0x19fe73,_0x296095=mars3d__namespace[_0x1c5fc4(0x172)]['create']('div','mars3d-echarts',this['_map']['container']);return _0x296095['id']=this['id'],_0x296095['style'][_0x1c5fc4(_0x25e29b._0x5c0f3c)]='absolute',_0x296095['style'][_0x1c5fc4(_0x25e29b._0x17057d)]='0px',_0x296095['style'][_0x1c5fc4(_0x25e29b._0x3b6556)]='0px',_0x296095['style'][_0x1c5fc4(0x18b)]=this[_0x1c5fc4(_0x25e29b._0x2616e6)]['scene'][_0x1c5fc4(_0x25e29b._0x433c1e)]['clientWidth']+'px',_0x296095[_0x1c5fc4(_0x25e29b._0x332dc7)][_0x1c5fc4(_0x25e29b._0x1f8523)]=this['_map']['scene']['canvas'][_0x1c5fc4(_0x25e29b._0xe72594)]+'px',_0x296095['style']['pointerEvents']=this[_0x1c5fc4(0x197)]?'all':'none',_0x296095['style']['zIndex']=this[_0x1c5fc4(0x1a6)]['zIndex']??0x9,_0x296095;}['resize'](){const _0x54e27d={_0x19d098:0x195,_0x4bb2af:0x176,_0x247d69:0x16f,_0x3434de:0x1a0,_0x5437df:0x184},_0x3ac1d2=_0x19fe73;if(!this[_0x3ac1d2(_0x54e27d._0x19d098)])return;this['_echartsContainer'][_0x3ac1d2(0x1a0)][_0x3ac1d2(0x18b)]=this[_0x3ac1d2(_0x54e27d._0x4bb2af)]['scene'][_0x3ac1d2(_0x54e27d._0x247d69)]['clientWidth']+'px',this['_echartsContainer'][_0x3ac1d2(_0x54e27d._0x3434de)]['height']=this['_map']['scene']['canvas'][_0x3ac1d2(_0x54e27d._0x5437df)]+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x2ec4e2,_0x187f21,_0x2685ee){const _0x629656=_0x19fe73;this['_echartsInstance']&&(_0x2ec4e2={'mars3dMap':{},...mars3d__namespace['Util'][_0x629656(0x178)](_0x2ec4e2,{'onlySimpleType':!![]})},delete _0x2ec4e2['eventParent'],this['_echartsInstance']['setOption'](_0x2ec4e2,_0x187f21,_0x2685ee));}['getRectangle'](_0x198321){const _0x3322aa={_0xe96272:0x18e},_0x4c5f48={_0x15b22b:0x179},_0x2d6a1d={_0x4f774b:0x180},_0x379c6f=_0x19fe73;let _0x4e085b,_0x5c4d21,_0x294d6d,_0x341d2b;function _0x25293d(_0x50b99a){const _0x2809b7=_0x4e01;if(!Array['isArray'](_0x50b99a))return;const _0x37b360=_0x50b99a[0x0]||0x0,_0x100843=_0x50b99a[0x1]||0x0;_0x37b360!==0x0&&_0x100843!==0x0&&(_0x4e085b===undefined?(_0x4e085b=_0x37b360,_0x5c4d21=_0x37b360,_0x294d6d=_0x100843,_0x341d2b=_0x100843):(_0x4e085b=Math['min'](_0x4e085b,_0x37b360),_0x5c4d21=Math['max'](_0x5c4d21,_0x37b360),_0x294d6d=Math[_0x2809b7(_0x2d6a1d._0x4f774b)](_0x294d6d,_0x100843),_0x341d2b=Math[_0x2809b7(0x1ac)](_0x341d2b,_0x100843)));}const _0x459332=this['options']['series'];_0x459332&&_0x459332['forEach'](_0x558cdb=>{const _0x4dffd4=_0x4e01;_0x558cdb['data']&&_0x558cdb[_0x4dffd4(_0x3322aa._0xe96272)]['forEach'](_0x4382e7=>{const _0x4d2e0c=_0x4dffd4;if(_0x4382e7['value'])_0x25293d(_0x4382e7[_0x4d2e0c(_0x4c5f48._0x15b22b)]);else _0x4382e7['coords']&&_0x4382e7['coords']['forEach'](_0x5abe8c=>{_0x25293d(_0x5abe8c);});});});if(_0x4e085b===0x0&&_0x294d6d===0x0&&_0x5c4d21===0x0&&_0x341d2b===0x0)return null;return _0x198321!==null&&_0x198321!==void 0x0&&_0x198321['isFormat']?{'xmin':_0x4e085b,'xmax':_0x5c4d21,'ymin':_0x294d6d,'ymax':_0x341d2b}:Cesium[_0x379c6f(0x17f)]['fromDegrees'](_0x4e085b,_0x294d6d,_0x5c4d21,_0x341d2b);}['on'](_0x1a2087,_0x20098f,_0x4da43f){const _0x3872f7={_0x5abe18:0x195},_0x26050d=_0x19fe73;return this[_0x26050d(_0x3872f7._0x5abe18)]['on'](_0x1a2087,_0x20098f,_0x4da43f||this),this;}[_0x19fe73(0x1a9)](_0x5ed267,_0x3aa5f3,_0x5415bb,_0xf63235){return this['_echartsInstance']['on'](_0x5ed267,_0x3aa5f3,_0x5415bb,_0xf63235||this),this;}['off'](_0x3cb037,_0x3b04f9,_0x44a016){const _0x3c9029=_0x19fe73;return this[_0x3c9029(0x195)]['off'](_0x3cb037,_0x3b04f9,_0x44a016||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace[_0x19fe73(0x1ae)][_0x19fe73(0x19e)]=EchartsLayer,mars3d__namespace[_0x19fe73(0x188)]=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object[_0x19fe73(0x181)](echarts)[_0x19fe73(0x17d)](function(_0x120157){const _0x5b0b00={_0x16a87d:0x199},_0x313055=_0x19fe73;if(_0x120157!==_0x313055(_0x5b0b00._0x16a87d)&&!exports['hasOwnProperty'](_0x120157))Object[_0x313055(0x196)](exports,_0x120157,{'enumerable':!![],'get':function(){return echarts[_0x120157];}});}),Object['defineProperty'](exports,_0x19fe73(0x1a1),{'value':!![]});
}));
