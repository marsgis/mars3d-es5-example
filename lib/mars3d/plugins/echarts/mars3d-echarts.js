/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.9
 * 编译日期：2023-10-15 21:14:06
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x517325=_0x4554;(function(_0x16edb6,_0x343fcd){const _0x21c95c={_0x2c3429:0xae,_0x581052:0xca,_0x34dc74:0xc8,_0x18abe7:0xb7,_0x4f7815:0xbc,_0x285628:0xea},_0x5a58a6=_0x4554,_0x2587ce=_0x16edb6();while(!![]){try{const _0x5d84cf=parseInt(_0x5a58a6(_0x21c95c._0x2c3429))/0x1+parseInt(_0x5a58a6(_0x21c95c._0x581052))/0x2+-parseInt(_0x5a58a6(_0x21c95c._0x34dc74))/0x3*(-parseInt(_0x5a58a6(0xf2))/0x4)+-parseInt(_0x5a58a6(0xec))/0x5*(-parseInt(_0x5a58a6(_0x21c95c._0x18abe7))/0x6)+parseInt(_0x5a58a6(0xf7))/0x7*(parseInt(_0x5a58a6(0xc7))/0x8)+parseInt(_0x5a58a6(_0x21c95c._0x4f7815))/0x9+-parseInt(_0x5a58a6(_0x21c95c._0x285628))/0xa;if(_0x5d84cf===_0x343fcd)break;else _0x2587ce['push'](_0x2587ce['shift']());}catch(_0x44325e){_0x2587ce['push'](_0x2587ce['shift']());}}}(_0x5ca0,0x44c09));function _interopNamespace(_0x4a4f7c){const _0x52105f={_0x553020:0xd0},_0x499000={_0x1d8820:0xbd},_0x23ec06=_0x4554;if(_0x4a4f7c&&_0x4a4f7c[_0x23ec06(_0x52105f._0x553020)])return _0x4a4f7c;var _0x164bc2=Object['create'](null);return _0x4a4f7c&&Object['keys'](_0x4a4f7c)[_0x23ec06(0xd2)](function(_0x601af7){const _0x5afbf5=_0x23ec06;if(_0x601af7!==_0x5afbf5(_0x499000._0x1d8820)){var _0x2d7b1e=Object['getOwnPropertyDescriptor'](_0x4a4f7c,_0x601af7);Object['defineProperty'](_0x164bc2,_0x601af7,_0x2d7b1e['get']?_0x2d7b1e:{'enumerable':!![],'get':function(){return _0x4a4f7c[_0x601af7];}});}}),_0x164bc2['default']=_0x4a4f7c,_0x164bc2;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);function _0x5ca0(){const _0x100e48=['438tERNaW','max','hidden','getHeight','LayerUtil','3971007jVivrS','default','pointerEvents','globe','echartsFixedHeight','off','BaseLayer','Cesium','_echartsInstance','DomUtil','style','3679448GAXuSh','885759zpaTvJ','fixedHeight','787416GgzpER','coordinateSystem','lng','data','isArray','getWidth','__esModule','dimensions','forEach','getZr','coords','getViewRect','_api','EchartsLayer','absolute','_echartsContainer','scene','echarts','_map','dispatchAction','mars3dMapRoam','0px','value','onByQuery','SCENE3D','_mountedHook','_pointerEvents','clampToGround','options','scheduler','fromDegrees','top','17265140pMWOIf','_mars3d_scene','15180brnLlK','_addedHook','create','_mapOffset','isFormat','canvas','4ShftQf','setOption','none','请引入\x20echarts\x20库\x20','BoundingRect','7QvJDts','dataToPoint','all','Cartographic','camera','196380kURPHy','init','setMapOffset','postRender','mars3dMap','SceneMode','height','SceneTransforms','api'];_0x5ca0=function(){return _0x100e48;};return _0x5ca0();}const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x379d4a,_0xf06002){const _0x19862e={_0xb55aca:0xd1},_0x58df23=_0x4554;this['_mars3d_scene']=_0x379d4a,this[_0x58df23(_0x19862e._0xb55aca)]=[_0x58df23(0xcc),'lat'],this['_mapOffset']=[0x0,0x0],this[_0x58df23(0xd6)]=_0xf06002;}[_0x517325(0xb0)](_0x3e0307){this['_mapOffset']=_0x3e0307;}['getBMap'](){return this['_mars3d_scene'];}[_0x517325(0xaa)](_0x1223e2){const _0x276f82={_0x42c8fd:0xba,_0x10655a:0xac,_0x242527:0xe8,_0x1d3dea:0xb5},_0xe14d09=_0x517325,_0x5857ba=this[_0xe14d09(0xeb)],_0x48128c=[NaN,NaN];let _0xc59252=_0x5857ba['echartsFixedHeight'];_0x5857ba['echartsAutoHeight']&&(_0xc59252=_0x5857ba[_0xe14d09(0xbf)][_0xe14d09(_0x276f82._0x42c8fd)](Cesium$1[_0xe14d09(_0x276f82._0x10655a)]['fromDegrees'](_0x1223e2[0x0],_0x1223e2[0x1])));const _0x4deae8=Cesium$1['Cartesian3'][_0xe14d09(_0x276f82._0x242527)](_0x1223e2[0x0],_0x1223e2[0x1],_0xc59252);if(!_0x4deae8)return _0x48128c;const _0x42665e=Cesium$1[_0xe14d09(_0x276f82._0x1d3dea)]['wgs84ToWindowCoordinates'](_0x5857ba,_0x4deae8);if(!_0x42665e)return _0x48128c;if(_0x5857ba['echartsDepthTest']&&_0x5857ba['mode']===Cesium$1[_0xe14d09(0xb3)][_0xe14d09(0xe2)]){const _0x4021e5=new Cesium$1['EllipsoidalOccluder'](_0x5857ba['globe']['ellipsoid'],_0x5857ba[_0xe14d09(0xad)]['positionWC']),_0x3b01b2=_0x4021e5['isPointVisible'](_0x4deae8);if(!_0x3b01b2)return _0x48128c;}return[_0x42665e['x']-this[_0xe14d09(0xef)][0x0],_0x42665e['y']-this['_mapOffset'][0x1]];}[_0x517325(0xd5)](){const _0x57656d={_0x56999e:0xf6},_0x5e149c=_0x517325,_0x11e4bc=this['_api'];return new echarts__namespace['graphic'][(_0x5e149c(_0x57656d._0x56999e))](0x0,0x0,_0x11e4bc[_0x5e149c(0xcf)](),_0x11e4bc['getHeight']());}['getRoamTransform'](){const _0x50ae35=_0x517325;return echarts__namespace['matrix'][_0x50ae35(0xee)]();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x119c24,_0x577071){const _0xfe6387={_0x4133c8:0xcb},_0x9ef753={_0x5a4d72:0xd3};let _0x36bea7;const _0x1d6aa0=_0x119c24['scheduler']['ecInstance']['_mars3d_scene'];_0x119c24['eachComponent']('mars3dMap',function(_0x5ab81a){const _0x311b6c=_0x4554,_0x519ea9=_0x577071[_0x311b6c(_0x9ef753._0x5a4d72)]()['painter'];if(!_0x519ea9)return;!_0x36bea7&&(_0x36bea7=new CompositeCoordinateSystem(_0x1d6aa0,_0x577071)),_0x5ab81a['coordinateSystem']=_0x36bea7,_0x36bea7['setMapOffset'](_0x5ab81a['__mapOffset']||[0x0,0x0]);}),_0x119c24['eachSeries'](function(_0x5e7758){const _0x233234=_0x4554;_0x5e7758['get'](_0x233234(_0xfe6387._0x4133c8))==='mars3dMap'&&(!_0x36bea7&&(_0x36bea7=new CompositeCoordinateSystem(_0x1d6aa0,_0x577071)),_0x5e7758[_0x233234(0xcb)]=_0x36bea7);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x12dee8,_0xc53b27){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x52117d,_0x3cf59a){const _0x3d9cba={_0x31d6d6:0xb6,_0x5a1dd3:0xda,_0x40dc20:0xe7,_0x5d9913:0xb1},_0x4dc17f=_0x517325;this[_0x4dc17f(_0x3d9cba._0x31d6d6)]=_0x3cf59a,this[_0x4dc17f(_0x3d9cba._0x5a1dd3)]=_0x52117d[_0x4dc17f(_0x3d9cba._0x40dc20)]['ecInstance']['_mars3d_scene'],this['scene'][_0x4dc17f(_0x3d9cba._0x5d9913)]['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x5d943b,_0x237a1e){const _0x35d2d3={_0x1fa90f:0xde},_0x4ec365=_0x517325;this['api'][_0x4ec365(0xdd)]({'type':_0x4ec365(_0x35d2d3._0x1fa90f)});},'render':function(_0x26087c,_0x2b11cf,_0x309ce2){},'dispose':function(_0x5704ac){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x517325(0xf5));function _0x4554(_0x351400,_0x3beb1b){const _0x5ca0fd=_0x5ca0();return _0x4554=function(_0x45540d,_0x2c2278){_0x45540d=_0x45540d-0xaa;let _0x389aa4=_0x5ca0fd[_0x45540d];return _0x389aa4;},_0x4554(_0x351400,_0x3beb1b);}const Cesium=mars3d__namespace[_0x517325(0xc3)],BaseLayer=mars3d__namespace['layer'][_0x517325(0xc2)];class EchartsLayer extends BaseLayer{constructor(_0x675844={}){const _0x5d4690={_0x339f10:0xe6},_0x5939e3=_0x517325;super(_0x675844),this['_pointerEvents']=this[_0x5939e3(_0x5d4690._0x339f10)]['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get[_0x517325(0xbe)](){return this['_pointerEvents'];}set['pointerEvents'](_0x582dc2){const _0xd650e6={_0x47771c:0xc6},_0x524a15=_0x517325;this['_pointerEvents']=_0x582dc2,this['_echartsContainer']&&(_0x582dc2?this['_echartsContainer'][_0x524a15(_0xd650e6._0x47771c)]['pointerEvents']=_0x524a15(0xab):this['_echartsContainer'][_0x524a15(0xc6)]['pointerEvents']='none');}['_setOptionsHook'](_0x2cb5dc,_0x34375a){this['setEchartsOption'](_0x2cb5dc);}['_showHook'](_0x6d12d3){const _0x5b6a2c={_0x314633:0xd9,_0x50ef3d:0xb9},_0x5e30fc=_0x517325;_0x6d12d3?this[_0x5e30fc(_0x5b6a2c._0x314633)]['style']['visibility']='visible':this['_echartsContainer']['style']['visibility']=_0x5e30fc(_0x5b6a2c._0x50ef3d);}[_0x517325(0xe3)](){const _0x1095d8={_0x19533f:0xe6,_0x1472d0:0xe5,_0xb5f0ce:0xdc},_0x1b9c78=_0x517325;this['_map']['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this['_map'][_0x1b9c78(0xda)]['echartsAutoHeight']=this[_0x1b9c78(_0x1095d8._0x19533f)][_0x1b9c78(_0x1095d8._0x1472d0)]??![],this[_0x1b9c78(_0x1095d8._0xb5f0ce)]['scene'][_0x1b9c78(0xc0)]=this['options'][_0x1b9c78(0xc9)]??0x0;}[_0x517325(0xed)](){const _0x47f903=_0x517325;this['_echartsContainer']=this['_createChartOverlay'](),this[_0x47f903(0xc4)]=echarts__namespace[_0x47f903(0xaf)](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0xbdf333={_0x20c35c:0xc4,_0x2a6508:0xdc,_0x306824:0xd9},_0x58ff27=_0x517325;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this[_0x58ff27(_0xbdf333._0x20c35c)]['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this[_0x58ff27(_0xbdf333._0x2a6508)]['container']['removeChild'](this[_0x58ff27(_0xbdf333._0x306824)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x5d0398={_0x4cafc2:0xe9,_0x4b97ac:0xdf,_0x34f693:0xda,_0x1ee6cb:0xe4},_0x1c37d6=_0x517325,_0x5d78de=mars3d__namespace[_0x1c37d6(0xc5)]['create']('div','mars3d-echarts',this['_map']['container']);return _0x5d78de['id']=this['id'],_0x5d78de['style']['position']=_0x1c37d6(0xd8),_0x5d78de[_0x1c37d6(0xc6)][_0x1c37d6(_0x5d0398._0x4cafc2)]='0px',_0x5d78de['style']['left']=_0x1c37d6(_0x5d0398._0x4b97ac),_0x5d78de['style']['width']=this[_0x1c37d6(0xdc)]['scene']['canvas']['clientWidth']+'px',_0x5d78de['style']['height']=this['_map'][_0x1c37d6(_0x5d0398._0x34f693)]['canvas']['clientHeight']+'px',_0x5d78de[_0x1c37d6(0xc6)]['pointerEvents']=this[_0x1c37d6(_0x5d0398._0x1ee6cb)]?'all':_0x1c37d6(0xf4),_0x5d78de['style']['zIndex']=this['options']['zIndex']??0x9,_0x5d78de;}['resize'](){const _0x3bacf6={_0x528264:0xdc,_0x3f1a4a:0xb4,_0x430aa4:0xf1},_0x3e2215=_0x517325;if(!this['_echartsInstance'])return;this[_0x3e2215(0xd9)]['style']['width']=this[_0x3e2215(_0x3bacf6._0x528264)]['scene']['canvas']['clientWidth']+'px',this['_echartsContainer']['style'][_0x3e2215(_0x3bacf6._0x3f1a4a)]=this[_0x3e2215(_0x3bacf6._0x528264)]['scene'][_0x3e2215(_0x3bacf6._0x430aa4)]['clientHeight']+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x3d95df,_0xcf2a0c,_0x5b78d5){const _0x3640ef={_0x47ca29:0xc4,_0x120953:0xb2,_0x131fc4:0xf3},_0x7714d8=_0x517325;this[_0x7714d8(_0x3640ef._0x47ca29)]&&(_0x3d95df[_0x7714d8(_0x3640ef._0x120953)]=_0x3d95df['mars3dMap']||{},this['_echartsInstance'][_0x7714d8(_0x3640ef._0x131fc4)](_0x3d95df,_0xcf2a0c,_0x5b78d5));}['getRectangle'](_0x3f06f7){const _0x103072={_0x12d5c7:0xf0},_0x59b9a4={_0x51c34e:0xcd},_0x155608={_0x21af0b:0xd2},_0x19ed9e=_0x517325;let _0x36c382,_0x1c811a,_0xfcaff4,_0x5a527f;function _0x9fef16(_0x4a48e4){const _0x10d283=_0x4554;if(!Array[_0x10d283(0xce)](_0x4a48e4))return;const _0x4bda39=_0x4a48e4[0x0]||0x0,_0x4c6d8b=_0x4a48e4[0x1]||0x0;_0x4bda39!==0x0&&_0x4c6d8b!==0x0&&(_0x36c382===undefined?(_0x36c382=_0x4bda39,_0x1c811a=_0x4bda39,_0xfcaff4=_0x4c6d8b,_0x5a527f=_0x4c6d8b):(_0x36c382=Math['min'](_0x36c382,_0x4bda39),_0x1c811a=Math[_0x10d283(0xb8)](_0x1c811a,_0x4bda39),_0xfcaff4=Math['min'](_0xfcaff4,_0x4c6d8b),_0x5a527f=Math['max'](_0x5a527f,_0x4c6d8b)));}const _0x1c403e=this['options']['series'];_0x1c403e&&_0x1c403e['forEach'](_0x1772c7=>{const _0x5045ba=_0x4554;_0x1772c7[_0x5045ba(_0x59b9a4._0x51c34e)]&&_0x1772c7['data']['forEach'](_0x6c2803=>{const _0x5f3346=_0x5045ba;if(_0x6c2803['value'])_0x9fef16(_0x6c2803[_0x5f3346(0xe0)]);else _0x6c2803[_0x5f3346(0xd4)]&&_0x6c2803['coords'][_0x5f3346(_0x155608._0x21af0b)](_0x33e9be=>{_0x9fef16(_0x33e9be);});});});if(_0x36c382===0x0&&_0xfcaff4===0x0&&_0x1c811a===0x0&&_0x5a527f===0x0)return null;return _0x3f06f7!==null&&_0x3f06f7!==void 0x0&&_0x3f06f7[_0x19ed9e(_0x103072._0x12d5c7)]?{'xmin':_0x36c382,'xmax':_0x1c811a,'ymin':_0xfcaff4,'ymax':_0x5a527f}:Cesium['Rectangle']['fromDegrees'](_0x36c382,_0xfcaff4,_0x1c811a,_0x5a527f);}['on'](_0x17e4f5,_0x528811,_0x5d5d5f){const _0x47b214=_0x517325;return this[_0x47b214(0xc4)]['on'](_0x17e4f5,_0x528811,_0x5d5d5f||this),this;}[_0x517325(0xe1)](_0x55b729,_0x21fd00,_0x29f8b2,_0x8df26e){const _0x23008e=_0x517325;return this[_0x23008e(0xc4)]['on'](_0x55b729,_0x21fd00,_0x29f8b2,_0x8df26e||this),this;}[_0x517325(0xc1)](_0x3a0fcf,_0x100c06,_0x81ab0e){return this['_echartsInstance']['off'](_0x3a0fcf,_0x100c06,_0x81ab0e||this),this;}}mars3d__namespace[_0x517325(0xbb)]['register'](_0x517325(0xdb),EchartsLayer),mars3d__namespace['layer'][_0x517325(0xd7)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x27f946){if(_0x27f946!=='default'&&!exports['hasOwnProperty'](_0x27f946))Object['defineProperty'](exports,_0x27f946,{'enumerable':!![],'get':function(){return echarts[_0x27f946];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
