/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.3
 * 编译日期：2024-02-05 13:29:31
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x3f6d53=_0x8af0;(function(_0x56f7eb,_0x5e77fd){const _0x312205={_0x2b33e2:0x18f,_0x2bbc9d:0x189,_0x1f2576:0x15c,_0x186edf:0x18e,_0x47cdcd:0x16c,_0xd8749c:0x187,_0x363716:0x15f},_0x186cd3=_0x8af0,_0x53b11e=_0x56f7eb();while(!![]){try{const _0x28ce4a=-parseInt(_0x186cd3(_0x312205._0x2b33e2))/0x1*(-parseInt(_0x186cd3(_0x312205._0x2bbc9d))/0x2)+parseInt(_0x186cd3(0x172))/0x3*(parseInt(_0x186cd3(_0x312205._0x1f2576))/0x4)+parseInt(_0x186cd3(0x157))/0x5+-parseInt(_0x186cd3(_0x312205._0x186edf))/0x6+parseInt(_0x186cd3(_0x312205._0x47cdcd))/0x7*(-parseInt(_0x186cd3(0x184))/0x8)+parseInt(_0x186cd3(0x177))/0x9*(-parseInt(_0x186cd3(_0x312205._0xd8749c))/0xa)+-parseInt(_0x186cd3(_0x312205._0x363716))/0xb*(-parseInt(_0x186cd3(0x18c))/0xc);if(_0x28ce4a===_0x5e77fd)break;else _0x53b11e['push'](_0x53b11e['shift']());}catch(_0x5b57ab){_0x53b11e['push'](_0x53b11e['shift']());}}}(_0x43b4,0xaf4a7));function _0x8af0(_0x45a7b4,_0x21d27f){const _0x43b494=_0x43b4();return _0x8af0=function(_0x8af0c1,_0x807508){_0x8af0c1=_0x8af0c1-0x155;let _0x5a7b0c=_0x43b494[_0x8af0c1];return _0x5a7b0c;},_0x8af0(_0x45a7b4,_0x21d27f);}function _interopNamespace(_0xbe2d59){const _0x17073f={_0x294d77:0x161,_0x379ffa:0x18b},_0x566184={_0x131f66:0x166},_0x57e0ba=_0x8af0;if(_0xbe2d59&&_0xbe2d59[_0x57e0ba(_0x17073f._0x294d77)])return _0xbe2d59;var _0x190df4=Object['create'](null);return _0xbe2d59&&Object[_0x57e0ba(_0x17073f._0x379ffa)](_0xbe2d59)['forEach'](function(_0x1408d8){const _0x35a8a8=_0x57e0ba;if(_0x1408d8!=='default'){var _0x501cca=Object['getOwnPropertyDescriptor'](_0xbe2d59,_0x1408d8);Object[_0x35a8a8(_0x566184._0x131f66)](_0x190df4,_0x1408d8,_0x501cca['get']?_0x501cca:{'enumerable':!![],'get':function(){return _0xbe2d59[_0x1408d8];}});}}),_0x190df4['default']=_0xbe2d59,_0x190df4;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x7867ac,_0x137c2f){this['_mars3d_scene']=_0x7867ac,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x137c2f;}['setMapOffset'](_0x41bfed){this['_mapOffset']=_0x41bfed;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x5c1c63){const _0x2840ce={_0x990e92:0x186,_0x58a2bb:0x179,_0x373495:0x16f,_0x28f5f7:0x162},_0x3b512f=_0x8af0,_0x3995a2=this[_0x3b512f(_0x2840ce._0x990e92)],_0x1c2d92=[NaN,NaN];let _0x122da4=_0x3995a2[_0x3b512f(0x156)];_0x3995a2['echartsAutoHeight']&&(_0x122da4=_0x3995a2['getHeight'](Cesium$1[_0x3b512f(_0x2840ce._0x58a2bb)]['fromDegrees'](_0x5c1c63[0x0],_0x5c1c63[0x1])));const _0x50ff36=Cesium$1['Cartesian3']['fromDegrees'](_0x5c1c63[0x0],_0x5c1c63[0x1],_0x122da4);if(!_0x50ff36)return _0x1c2d92;const _0x2d3b8f=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x3995a2,_0x50ff36);if(!_0x2d3b8f)return _0x1c2d92;if(_0x3995a2[_0x3b512f(0x176)]&&_0x3995a2[_0x3b512f(_0x2840ce._0x373495)]===Cesium$1['SceneMode']['SCENE3D']){const _0x7aecfb=new Cesium$1['EllipsoidalOccluder'](_0x3995a2['globe']['ellipsoid'],_0x3995a2['camera']['positionWC']),_0x25ee1a=_0x7aecfb[_0x3b512f(_0x2840ce._0x28f5f7)](_0x50ff36);if(!_0x25ee1a)return _0x1c2d92;}return[_0x2d3b8f['x']-this['_mapOffset'][0x0],_0x2d3b8f['y']-this[_0x3b512f(0x155)][0x1]];}['getViewRect'](){const _0x2f7513={_0x5a2dee:0x170,_0x1807f0:0x165},_0xdebf02=_0x8af0,_0x583197=this['_api'];return new echarts__namespace['graphic'][(_0xdebf02(_0x2f7513._0x5a2dee))](0x0,0x0,_0x583197[_0xdebf02(0x185)](),_0x583197[_0xdebf02(_0x2f7513._0x1807f0)]());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x3be320,_0x4108c2){const _0x14bc60=_0x8af0;let _0x221176;const _0x328f20=_0x3be320['scheduler']['ecInstance']['_mars3d_scene'];_0x3be320['eachComponent']('mars3dMap',function(_0x249588){const _0x2c42e8=_0x4108c2['getZr']()['painter'];if(!_0x2c42e8)return;!_0x221176&&(_0x221176=new CompositeCoordinateSystem(_0x328f20,_0x4108c2)),_0x249588['coordinateSystem']=_0x221176,_0x221176['setMapOffset'](_0x249588['__mapOffset']||[0x0,0x0]);}),_0x3be320[_0x14bc60(0x168)](function(_0x4988f7){const _0x629866=_0x14bc60;_0x4988f7['get']('coordinateSystem')==='mars3dMap'&&(!_0x221176&&(_0x221176=new CompositeCoordinateSystem(_0x328f20,_0x4108c2)),_0x4988f7[_0x629866(0x181)]=_0x221176);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':_0x3f6d53(0x178),'event':_0x3f6d53(0x178),'update':'updateLayout'},function(_0x389f6d,_0x547a3c){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x39fe1a,_0x169f4e){this['api']=_0x169f4e,this['scene']=_0x39fe1a['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x20695c,_0x1a1ab1){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x3af043,_0x716c32,_0x4599a2){},'dispose':function(_0x40253f){const _0x4131ac={_0x20f896:0x17a,_0x33a11b:0x164},_0x23b720=_0x3f6d53;this[_0x23b720(_0x4131ac._0x20f896)]['postRender'][_0x23b720(_0x4131ac._0x33a11b)](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');function _0x43b4(){const _0x3e64c8=['width','layer','echartsDepthTest','261oEJOsA','mars3dMapRoam','Cartographic','scene','left','LayerUtil','dispose','visible','hasOwnProperty','all','coordinateSystem','options','pointerEvents','2602864UmJgYS','getWidth','_mars3d_scene','474530FYqwCc','clientWidth','268HcHbXk','max','keys','12PNlPEG','canvas','5241474OysPOQ','421pulftO','_mapOffset','echartsFixedHeight','3188060FUQrtM','_createChartOverlay','0px','_map','_echartsInstance','208iMeWIA','_echartsContainer','_pointerEvents','31413833rsjwPA','style','__esModule','isPointVisible','position','removeEventListener','getHeight','defineProperty','fromDegrees','eachSeries','series','container','off','21EbwZSv','none','resize','mode','BoundingRect','min','22728dViZmP','Util'];_0x43b4=function(){return _0x3e64c8;};return _0x43b4();}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x177960={}){super(_0x177960),this['_pointerEvents']=this['options']['pointerEvents'];}get[_0x3f6d53(0x175)](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x374708){const _0x46e1da={_0x2feaa8:0x160,_0x25e6d1:0x183},_0x3ba5dc=_0x3f6d53;this['_pointerEvents']=_0x374708,this['_echartsContainer']&&(_0x374708?this['_echartsContainer']['style']['pointerEvents']='all':this['_echartsContainer'][_0x3ba5dc(_0x46e1da._0x2feaa8)][_0x3ba5dc(_0x46e1da._0x25e6d1)]='none');}['_setOptionsHook'](_0x1bbc1a,_0x21ad60){this['setEchartsOption'](_0x1bbc1a);}['_showHook'](_0x110a9a){const _0x2c2745={_0x5bd41d:0x17e},_0x13c789=_0x3f6d53;_0x110a9a?this['_echartsContainer']['style']['visibility']=_0x13c789(_0x2c2745._0x5bd41d):this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x25154d=_0x3f6d53;this['_map']['scene'][_0x25154d(0x176)]=this['options']['depthTest']??!![],this[_0x25154d(0x15a)]['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x25154d(0x17a)]['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x4d27e5={_0x454795:0x186},_0x5446c1=_0x3f6d53;this['_echartsContainer']=this[_0x5446c1(0x158)](),this[_0x5446c1(0x15b)]=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance'][_0x5446c1(_0x4d27e5._0x454795)]=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0xaee733={_0x17764c:0x15b,_0x5ccc05:0x17d},_0x47c27e=_0x3f6d53;this['_echartsInstance']&&(this[_0x47c27e(_0xaee733._0x17764c)]['clear'](),this['_echartsInstance'][_0x47c27e(_0xaee733._0x5ccc05)](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x3084c5={_0x1bff43:0x163,_0x56f227:0x174,_0x4e81a3:0x18d,_0x5bade0:0x17a,_0x49133e:0x160,_0x1b25bd:0x15e,_0x3b3818:0x180},_0x348462=_0x3f6d53,_0x2c2252=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this['_map'][_0x348462(0x16a)]);return _0x2c2252['id']=this['id'],_0x2c2252['style'][_0x348462(_0x3084c5._0x1bff43)]='absolute',_0x2c2252['style']['top']='0px',_0x2c2252['style'][_0x348462(0x17b)]=_0x348462(0x159),_0x2c2252['style'][_0x348462(_0x3084c5._0x56f227)]=this['_map']['scene'][_0x348462(_0x3084c5._0x4e81a3)]['clientWidth']+'px',_0x2c2252['style']['height']=this[_0x348462(0x15a)][_0x348462(_0x3084c5._0x5bade0)]['canvas']['clientHeight']+'px',_0x2c2252[_0x348462(_0x3084c5._0x49133e)]['pointerEvents']=this[_0x348462(_0x3084c5._0x1b25bd)]?_0x348462(_0x3084c5._0x3b3818):_0x348462(0x16d),_0x2c2252[_0x348462(_0x3084c5._0x49133e)]['zIndex']=this[_0x348462(0x182)]['zIndex']??0x9,_0x2c2252;}['resize'](){const _0x1c2f5d={_0x10a46f:0x15a,_0x20c7e8:0x15b,_0x2b1d03:0x16e},_0x5ab030=_0x3f6d53;if(!this[_0x5ab030(0x15b)])return;this['_echartsContainer']['style']['width']=this['_map']['scene'][_0x5ab030(0x18d)][_0x5ab030(0x188)]+'px',this[_0x5ab030(0x15d)]['style']['height']=this[_0x5ab030(_0x1c2f5d._0x10a46f)]['scene']['canvas']['clientHeight']+'px',this[_0x5ab030(_0x1c2f5d._0x20c7e8)][_0x5ab030(_0x1c2f5d._0x2b1d03)]();}['setEchartsOption'](_0x2dbbc5,_0x1762cc,_0x54dd07){const _0x13d66e=_0x3f6d53;this['_echartsInstance']&&(_0x2dbbc5={'mars3dMap':{},...mars3d__namespace[_0x13d66e(0x173)]['getAttrVal'](_0x2dbbc5,{'onlySimpleType':!![]})},delete _0x2dbbc5['eventParent'],this['_echartsInstance']['setOption'](_0x2dbbc5,_0x1762cc,_0x54dd07));}['getRectangle'](_0x32cf86){const _0x122df0={_0x4ea552:0x167},_0x4baffa={_0x4296e4:0x171},_0x232428=_0x3f6d53;let _0xe00873,_0x452c9f,_0x23a6f6,_0x311ec6;function _0x194140(_0x5e33b2){const _0x54fd40=_0x8af0;if(!Array['isArray'](_0x5e33b2))return;const _0x10ec0f=_0x5e33b2[0x0]||0x0,_0x1ff00a=_0x5e33b2[0x1]||0x0;_0x10ec0f!==0x0&&_0x1ff00a!==0x0&&(_0xe00873===undefined?(_0xe00873=_0x10ec0f,_0x452c9f=_0x10ec0f,_0x23a6f6=_0x1ff00a,_0x311ec6=_0x1ff00a):(_0xe00873=Math[_0x54fd40(_0x4baffa._0x4296e4)](_0xe00873,_0x10ec0f),_0x452c9f=Math['max'](_0x452c9f,_0x10ec0f),_0x23a6f6=Math[_0x54fd40(0x171)](_0x23a6f6,_0x1ff00a),_0x311ec6=Math[_0x54fd40(0x18a)](_0x311ec6,_0x1ff00a)));}const _0x4745ea=this['options'][_0x232428(0x169)];_0x4745ea&&_0x4745ea['forEach'](_0x563a5a=>{_0x563a5a['data']&&_0x563a5a['data']['forEach'](_0x1d13cd=>{if(_0x1d13cd['value'])_0x194140(_0x1d13cd['value']);else _0x1d13cd['coords']&&_0x1d13cd['coords']['forEach'](_0x21eaa7=>{_0x194140(_0x21eaa7);});});});if(_0xe00873===0x0&&_0x23a6f6===0x0&&_0x452c9f===0x0&&_0x311ec6===0x0)return null;return _0x32cf86!==null&&_0x32cf86!==void 0x0&&_0x32cf86['isFormat']?{'xmin':_0xe00873,'xmax':_0x452c9f,'ymin':_0x23a6f6,'ymax':_0x311ec6}:Cesium['Rectangle'][_0x232428(_0x122df0._0x4ea552)](_0xe00873,_0x23a6f6,_0x452c9f,_0x311ec6);}['on'](_0x4c6c0b,_0xf57370,_0x3568db){const _0x144ef5={_0x5b1fc7:0x15b},_0x17607e=_0x3f6d53;return this[_0x17607e(_0x144ef5._0x5b1fc7)]['on'](_0x4c6c0b,_0xf57370,_0x3568db||this),this;}['onByQuery'](_0xb75a91,_0x59e258,_0xbe6d4d,_0x3bc46e){return this['_echartsInstance']['on'](_0xb75a91,_0x59e258,_0xbe6d4d,_0x3bc46e||this),this;}[_0x3f6d53(0x16b)](_0x122151,_0x503154,_0x28d0cf){const _0x4979ee={_0x1d7a19:0x15b},_0x55e1f8=_0x3f6d53;return this[_0x55e1f8(_0x4979ee._0x1d7a19)]['off'](_0x122151,_0x503154,_0x28d0cf||this),this;}}mars3d__namespace[_0x3f6d53(0x17c)]['register']('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x3bb6ff){const _0x4f48fc={_0x214abf:0x17f},_0x37a729=_0x3f6d53;if(_0x3bb6ff!=='default'&&!exports[_0x37a729(_0x4f48fc._0x214abf)](_0x3bb6ff))Object['defineProperty'](exports,_0x3bb6ff,{'enumerable':!![],'get':function(){return echarts[_0x3bb6ff];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
