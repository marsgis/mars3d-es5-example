/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.12
 * 编译日期：2023-11-07 21:56:03
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';function _0x3b3d(_0x599551,_0x4c7a39){const _0x45c53e=_0x45c5();return _0x3b3d=function(_0x3b3dda,_0x43e72e){_0x3b3dda=_0x3b3dda-0x1ca;let _0x134137=_0x45c53e[_0x3b3dda];return _0x134137;},_0x3b3d(_0x599551,_0x4c7a39);}const _0x419907=_0x3b3d;(function(_0x47be55,_0x22b173){const _0x2b8966={_0x2ef037:0x1d9,_0x1013df:0x1f0,_0x3dd13d:0x1d2,_0x3908be:0x1dc,_0x1e6635:0x1d5,_0xd8b3a8:0x1ff},_0x720b3c=_0x3b3d,_0x356ae7=_0x47be55();while(!![]){try{const _0x214467=-parseInt(_0x720b3c(0x20c))/0x1*(parseInt(_0x720b3c(_0x2b8966._0x2ef037))/0x2)+-parseInt(_0x720b3c(_0x2b8966._0x1013df))/0x3*(-parseInt(_0x720b3c(_0x2b8966._0x3dd13d))/0x4)+parseInt(_0x720b3c(0x1ee))/0x5*(parseInt(_0x720b3c(0x1cc))/0x6)+-parseInt(_0x720b3c(0x205))/0x7*(parseInt(_0x720b3c(0x1ce))/0x8)+-parseInt(_0x720b3c(_0x2b8966._0x3908be))/0x9+-parseInt(_0x720b3c(0x1f7))/0xa*(parseInt(_0x720b3c(_0x2b8966._0x1e6635))/0xb)+parseInt(_0x720b3c(_0x2b8966._0xd8b3a8))/0xc;if(_0x214467===_0x22b173)break;else _0x356ae7['push'](_0x356ae7['shift']());}catch(_0x5a756f){_0x356ae7['push'](_0x356ae7['shift']());}}}(_0x45c5,0x9b1db));function _0x45c5(){const _0x949c63=['542356HXTIlr','clampToGround','lat','40073xkFodQ','matrix','defineProperty','addEventListener','2RyOdQJ','registerAction','_api','11012346oTYXZq','_echartsContainer','style','_echartsInstance','EchartsLayer','default','pointerEvents','position','container','top','_mapOffset','api','create','Rectangle','mars3dMap','getViewRect','请引入\x20echarts\x20库\x20','layer','10055bpBYiG','options','27bdZuuA','postRender','resize','_pointerEvents','hidden','registerCoordinateSystem','data','1910LTGMMV','height','echartsFixedHeight','forEach','all','setOption','init','value','15291540JoytQN','mars3dMapRoam','_createChartOverlay','scene','_setOptionsHook','_map','3501981vMHezR','extendComponentView','setEchartsOption','Cesium','visibility','mars3d-echarts','getHeight','219819aFqsKf','fromDegrees','off','2328jJWThv','eachSeries','8aFnZni','max','echartsAutoHeight','globe'];_0x45c5=function(){return _0x949c63;};return _0x45c5();}function _interopNamespace(_0x4e2f73){const _0x5cbacf=_0x3b3d;if(_0x4e2f73&&_0x4e2f73['__esModule'])return _0x4e2f73;var _0x42c326=Object[_0x5cbacf(0x1e8)](null);return _0x4e2f73&&Object['keys'](_0x4e2f73)['forEach'](function(_0x2f11c5){const _0x4f679e=_0x5cbacf;if(_0x2f11c5!==_0x4f679e(0x1e1)){var _0x556a12=Object['getOwnPropertyDescriptor'](_0x4e2f73,_0x2f11c5);Object['defineProperty'](_0x42c326,_0x2f11c5,_0x556a12['get']?_0x556a12:{'enumerable':!![],'get':function(){return _0x4e2f73[_0x2f11c5];}});}}),_0x42c326['default']=_0x4e2f73,_0x42c326;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x419907(0x208)];class CompositeCoordinateSystem{constructor(_0x18fc6d,_0x54a0ff){const _0x4d648d={_0x77e598:0x1d4,_0x40154c:0x1e6},_0x3ef758=_0x419907;this['_mars3d_scene']=_0x18fc6d,this['dimensions']=['lng',_0x3ef758(_0x4d648d._0x77e598)],this[_0x3ef758(_0x4d648d._0x40154c)]=[0x0,0x0],this[_0x3ef758(0x1db)]=_0x54a0ff;}['setMapOffset'](_0x4bcb8d){const _0x1433e9={_0x2ef660:0x1e6},_0x49fdd4=_0x419907;this[_0x49fdd4(_0x1433e9._0x2ef660)]=_0x4bcb8d;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x667fc0){const _0x236ae4={_0x1c2cf2:0x1ca},_0x894f00=_0x419907,_0x2c2810=this['_mars3d_scene'],_0x333076=[NaN,NaN];let _0x294a81=_0x2c2810['echartsFixedHeight'];_0x2c2810['echartsAutoHeight']&&(_0x294a81=_0x2c2810[_0x894f00(0x1d1)]['getHeight'](Cesium$1['Cartographic'][_0x894f00(_0x236ae4._0x1c2cf2)](_0x667fc0[0x0],_0x667fc0[0x1])));const _0x455db2=Cesium$1['Cartesian3'][_0x894f00(0x1ca)](_0x667fc0[0x0],_0x667fc0[0x1],_0x294a81);if(!_0x455db2)return _0x333076;const _0x355f9e=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x2c2810,_0x455db2);if(!_0x355f9e)return _0x333076;if(_0x2c2810['echartsDepthTest']&&_0x2c2810['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x558d82=new Cesium$1['EllipsoidalOccluder'](_0x2c2810['globe']['ellipsoid'],_0x2c2810['camera']['positionWC']),_0x16ef69=_0x558d82['isPointVisible'](_0x455db2);if(!_0x16ef69)return _0x333076;}return[_0x355f9e['x']-this['_mapOffset'][0x0],_0x355f9e['y']-this[_0x894f00(0x1e6)][0x1]];}[_0x419907(0x1eb)](){const _0x477644=_0x419907,_0x4f8fff=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x4f8fff['getWidth'](),_0x4f8fff[_0x477644(0x20b)]());}['getRoamTransform'](){const _0x4d5757={_0x16f332:0x1d6},_0x5e426e=_0x419907;return echarts__namespace[_0x5e426e(_0x4d5757._0x16f332)]['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0xacaa6a,_0x3eeccf){const _0x51b40c={_0x563723:0x1ea},_0x2e8b27=_0x419907;let _0x1f0450;const _0x350223=_0xacaa6a['scheduler']['ecInstance']['_mars3d_scene'];_0xacaa6a['eachComponent'](_0x2e8b27(0x1ea),function(_0x5e7ab8){const _0x3dde60=_0x3eeccf['getZr']()['painter'];if(!_0x3dde60)return;!_0x1f0450&&(_0x1f0450=new CompositeCoordinateSystem(_0x350223,_0x3eeccf)),_0x5e7ab8['coordinateSystem']=_0x1f0450,_0x1f0450['setMapOffset'](_0x5e7ab8['__mapOffset']||[0x0,0x0]);}),_0xacaa6a[_0x2e8b27(0x1cd)](function(_0x5cd4d1){const _0x2945c6=_0x2e8b27;_0x5cd4d1['get']('coordinateSystem')===_0x2945c6(_0x51b40c._0x563723)&&(!_0x1f0450&&(_0x1f0450=new CompositeCoordinateSystem(_0x350223,_0x3eeccf)),_0x5cd4d1['coordinateSystem']=_0x1f0450);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace[_0x419907(0x1fd)])echarts__namespace[_0x419907(0x1f5)]('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x419907(0x1da)]({'type':_0x419907(0x200),'event':_0x419907(0x200),'update':'updateLayout'},function(_0x54b217,_0xcbfc8){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x419907(0x206)]({'type':'mars3dMap','init':function(_0x4f1a86,_0x5537c2){const _0x579685={_0x5846b9:0x1f1},_0xd09452=_0x419907;this['api']=_0x5537c2,this['scene']=_0x4f1a86['scheduler']['ecInstance']['_mars3d_scene'],this['scene'][_0xd09452(_0x579685._0x5846b9)][_0xd09452(0x1d8)](this['moveHandler'],this);},'moveHandler':function(_0xb89cf5,_0x2cac41){const _0x3a92b0=_0x419907;this[_0x3a92b0(0x1e7)]['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x3af746,_0x462927,_0x45e287){},'dispose':function(_0x37f72b){const _0x81ed91={_0x491f2c:0x202},_0x52e204=_0x419907;this[_0x52e204(_0x81ed91._0x491f2c)][_0x52e204(0x1f1)]['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x419907(0x1ec));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x419907(0x1ed)]['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x4ef1aa={}){const _0xee9ad3={_0x45f164:0x1f3,_0x238453:0x1e2},_0x1b89b5=_0x419907;super(_0x4ef1aa),this[_0x1b89b5(_0xee9ad3._0x45f164)]=this['options'][_0x1b89b5(_0xee9ad3._0x238453)];}get['layer'](){const _0x216623=_0x419907;return this[_0x216623(0x1df)];}get['pointerEvents'](){const _0x1d4c8a=_0x419907;return this[_0x1d4c8a(0x1f3)];}set['pointerEvents'](_0x2123d3){const _0x468260={_0x43bdff:0x1e2},_0x400ca2=_0x419907;this['_pointerEvents']=_0x2123d3,this['_echartsContainer']&&(_0x2123d3?this['_echartsContainer']['style']['pointerEvents']=_0x400ca2(0x1fb):this['_echartsContainer']['style'][_0x400ca2(_0x468260._0x43bdff)]='none');}[_0x419907(0x203)](_0x98125,_0x64185a){this['setEchartsOption'](_0x98125);}['_showHook'](_0x341a23){const _0x334fb8={_0x151170:0x1dd},_0x3898e7=_0x419907;_0x341a23?this[_0x3898e7(_0x334fb8._0x151170)]['style']['visibility']='visible':this['_echartsContainer']['style'][_0x3898e7(0x209)]=_0x3898e7(0x1f4);}['_mountedHook'](){const _0x463379={_0x1901c5:0x1ef,_0x3ed886:0x1d0,_0x3a1a78:0x202,_0x824e3c:0x1f9},_0x6e179f=_0x419907;this['_map']['scene']['echartsDepthTest']=this[_0x6e179f(_0x463379._0x1901c5)]['depthTest']??!![],this[_0x6e179f(0x204)]['scene'][_0x6e179f(_0x463379._0x3ed886)]=this['options'][_0x6e179f(0x1d3)]??![],this['_map'][_0x6e179f(_0x463379._0x3a1a78)][_0x6e179f(_0x463379._0x824e3c)]=this[_0x6e179f(0x1ef)]['fixedHeight']??0x0;}['_addedHook'](){const _0x3cb797={_0x29c812:0x1fd,_0x4f1138:0x1df,_0x622cb1:0x207},_0x490a48=_0x419907;this['_echartsContainer']=this['_createChartOverlay'](),this[_0x490a48(0x1df)]=echarts__namespace[_0x490a48(_0x3cb797._0x29c812)](this[_0x490a48(0x1dd)]),this[_0x490a48(_0x3cb797._0x4f1138)]['_mars3d_scene']=this['_map']['scene'],this[_0x490a48(_0x3cb797._0x622cb1)](this[_0x490a48(0x1ef)]);}['_removedHook'](){const _0x4188be={_0x58db5f:0x1dd},_0xa057ad=_0x419907;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this[_0xa057ad(_0x4188be._0x58db5f)]),delete this['_echartsContainer']);}[_0x419907(0x201)](){const _0x222e99={_0x5138b8:0x20a,_0x5c0367:0x1e5,_0x450469:0x1f8,_0x326816:0x202},_0x1c03fe=_0x419907,_0x5a54d3=mars3d__namespace['DomUtil']['create']('div',_0x1c03fe(_0x222e99._0x5138b8),this['_map'][_0x1c03fe(0x1e4)]);return _0x5a54d3['id']=this['id'],_0x5a54d3['style'][_0x1c03fe(0x1e3)]='absolute',_0x5a54d3['style'][_0x1c03fe(_0x222e99._0x5c0367)]='0px',_0x5a54d3['style']['left']='0px',_0x5a54d3['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',_0x5a54d3['style'][_0x1c03fe(_0x222e99._0x450469)]=this['_map'][_0x1c03fe(_0x222e99._0x326816)]['canvas']['clientHeight']+'px',_0x5a54d3['style']['pointerEvents']=this['_pointerEvents']?_0x1c03fe(0x1fb):'none',_0x5a54d3['style']['zIndex']=this[_0x1c03fe(0x1ef)]['zIndex']??0x9,_0x5a54d3;}['resize'](){const _0x5f396a={_0x1efbc7:0x1de,_0x1413eb:0x1f2},_0x42c622=_0x419907;if(!this['_echartsInstance'])return;this['_echartsContainer'][_0x42c622(_0x5f396a._0x1efbc7)]['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this['_echartsContainer']['style']['height']=this['_map'][_0x42c622(0x202)]['canvas']['clientHeight']+'px',this['_echartsInstance'][_0x42c622(_0x5f396a._0x1413eb)]();}['setEchartsOption'](_0x37f377,_0x500353,_0x199f8b){const _0x405be4={_0x1c7d6e:0x1fc},_0x511b7d=_0x419907;this[_0x511b7d(0x1df)]&&(_0x37f377={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x37f377,{'onlySimpleType':!![]})},delete _0x37f377['eventParent'],this['_echartsInstance'][_0x511b7d(_0x405be4._0x1c7d6e)](_0x37f377,_0x500353,_0x199f8b));}['getRectangle'](_0x4535b7){const _0xecfc5c={_0x2b4658:0x1ca},_0x2a3222={_0x34cebb:0x1cf},_0xcba972=_0x419907;let _0x25d103,_0x1d961a,_0x17e142,_0x4e8921;function _0xfcff8(_0x2b98b1){const _0x122124=_0x3b3d;if(!Array['isArray'](_0x2b98b1))return;const _0xf36e92=_0x2b98b1[0x0]||0x0,_0x12bac2=_0x2b98b1[0x1]||0x0;_0xf36e92!==0x0&&_0x12bac2!==0x0&&(_0x25d103===undefined?(_0x25d103=_0xf36e92,_0x1d961a=_0xf36e92,_0x17e142=_0x12bac2,_0x4e8921=_0x12bac2):(_0x25d103=Math['min'](_0x25d103,_0xf36e92),_0x1d961a=Math[_0x122124(_0x2a3222._0x34cebb)](_0x1d961a,_0xf36e92),_0x17e142=Math['min'](_0x17e142,_0x12bac2),_0x4e8921=Math['max'](_0x4e8921,_0x12bac2)));}const _0x3ab05b=this['options']['series'];_0x3ab05b&&_0x3ab05b['forEach'](_0x61de4d=>{const _0x29aea7={_0x6ea916:0x1fe},_0x331e79=_0x3b3d;_0x61de4d['data']&&_0x61de4d[_0x331e79(0x1f6)]['forEach'](_0x5e99d0=>{const _0x3edc9f=_0x331e79;if(_0x5e99d0[_0x3edc9f(_0x29aea7._0x6ea916)])_0xfcff8(_0x5e99d0['value']);else _0x5e99d0['coords']&&_0x5e99d0['coords'][_0x3edc9f(0x1fa)](_0x22161c=>{_0xfcff8(_0x22161c);});});});if(_0x25d103===0x0&&_0x17e142===0x0&&_0x1d961a===0x0&&_0x4e8921===0x0)return null;return _0x4535b7!==null&&_0x4535b7!==void 0x0&&_0x4535b7['isFormat']?{'xmin':_0x25d103,'xmax':_0x1d961a,'ymin':_0x17e142,'ymax':_0x4e8921}:Cesium[_0xcba972(0x1e9)][_0xcba972(_0xecfc5c._0x2b4658)](_0x25d103,_0x17e142,_0x1d961a,_0x4e8921);}['on'](_0x2a0e47,_0x2e3023,_0xe3cecd){const _0x42692b=_0x419907;return this[_0x42692b(0x1df)]['on'](_0x2a0e47,_0x2e3023,_0xe3cecd||this),this;}['onByQuery'](_0x12d3ee,_0x383c35,_0x4e38b2,_0x25f251){return this['_echartsInstance']['on'](_0x12d3ee,_0x383c35,_0x4e38b2,_0x25f251||this),this;}['off'](_0x4d4da2,_0x3e9449,_0x358807){const _0x3e24b8={_0x4e6392:0x1cb},_0x141763=_0x419907;return this['_echartsInstance'][_0x141763(_0x3e24b8._0x4e6392)](_0x4d4da2,_0x3e9449,_0x358807||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace['layer'][_0x419907(0x1e0)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x419907(0x1fa)](function(_0xb7d419){const _0x5afac3={_0x5a9903:0x1e1},_0x1f1134=_0x419907;if(_0xb7d419!==_0x1f1134(_0x5afac3._0x5a9903)&&!exports['hasOwnProperty'](_0xb7d419))Object['defineProperty'](exports,_0xb7d419,{'enumerable':!![],'get':function(){return echarts[_0xb7d419];}});}),Object[_0x419907(0x1d7)](exports,'__esModule',{'value':!![]});
}));
