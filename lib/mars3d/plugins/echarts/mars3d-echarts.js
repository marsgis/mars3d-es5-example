/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.18
 * 编译日期：2023-12-28 21:28:49
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x3a57af=_0x1819;(function(_0x1caf21,_0x43f68e){const _0x333774={_0x36308c:0xa4,_0xdfdd3f:0x90},_0x4e66a1=_0x1819,_0x555156=_0x1caf21();while(!![]){try{const _0x4e455b=-parseInt(_0x4e66a1(0x72))/0x1*(parseInt(_0x4e66a1(0x7b))/0x2)+parseInt(_0x4e66a1(0x69))/0x3+-parseInt(_0x4e66a1(0x7d))/0x4*(parseInt(_0x4e66a1(_0x333774._0x36308c))/0x5)+-parseInt(_0x4e66a1(0x8d))/0x6+parseInt(_0x4e66a1(0x9c))/0x7+parseInt(_0x4e66a1(0x75))/0x8+parseInt(_0x4e66a1(_0x333774._0xdfdd3f))/0x9*(parseInt(_0x4e66a1(0xa5))/0xa);if(_0x4e455b===_0x43f68e)break;else _0x555156['push'](_0x555156['shift']());}catch(_0x581732){_0x555156['push'](_0x555156['shift']());}}}(_0x396c,0x79dcc));function _0x396c(){const _0x1b3522=['get','coords','952096FPhTNn','container','depthTest','min','_api','isArray','38082fAUbxC','_createChartOverlay','1870796CMsbXl','keys','off','_echartsInstance','options','removeEventListener','height','_echartsContainer','EchartsLayer','getAttrVal','clientWidth','setOption','coordinateSystem','fromDegrees','_pointerEvents','onByQuery','2691114kBuYjD','visibility','scene','419499mZiJRf','getRoamTransform','canvas','moveHandler','__esModule','_removedHook','0px','api','forEach','pointerEvents','dataToPoint','ecInstance','4394481qRWaGN','_map','all','graphic','mars3dMapRoam','clear','dimensions','defineProperty','10AFhLit','90lBMquJ','style','2607297ybasvj','mars3dMap','registerAction','请引入\x20echarts\x20库\x20','dispose','SceneMode','lat','layer','zIndex','8iEKSWW'];_0x396c=function(){return _0x1b3522;};return _0x396c();}function _interopNamespace(_0x347988){const _0x4de861={_0x2668df:0x7e},_0x5f15b9=_0x1819;if(_0x347988&&_0x347988['__esModule'])return _0x347988;var _0x4f6cca=Object['create'](null);return _0x347988&&Object[_0x5f15b9(_0x4de861._0x2668df)](_0x347988)['forEach'](function(_0x219a76){const _0xfe9c56=_0x5f15b9;if(_0x219a76!=='default'){var _0x4e67e7=Object['getOwnPropertyDescriptor'](_0x347988,_0x219a76);Object['defineProperty'](_0x4f6cca,_0x219a76,_0x4e67e7[_0xfe9c56(0x73)]?_0x4e67e7:{'enumerable':!![],'get':function(){return _0x347988[_0x219a76];}});}}),_0x4f6cca['default']=_0x347988,_0x4f6cca;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x1db21d,_0x323ecd){const _0x13e0a1={_0x35be5d:0xa2},_0xaadbe7=_0x1819;this['_mars3d_scene']=_0x1db21d,this[_0xaadbe7(_0x13e0a1._0x35be5d)]=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x323ecd;}['setMapOffset'](_0x1e0443){this['_mapOffset']=_0x1e0443;}['getBMap'](){return this['_mars3d_scene'];}[_0x3a57af(0x9a)](_0x52a016){const _0x9b1eba={_0x157c22:0x8a,_0x1ef142:0x6e},_0x4b2210=_0x3a57af,_0x155605=this['_mars3d_scene'],_0x4468c4=[NaN,NaN];let _0x5a3783=_0x155605['echartsFixedHeight'];_0x155605['echartsAutoHeight']&&(_0x5a3783=_0x155605['globe']['getHeight'](Cesium$1['Cartographic'][_0x4b2210(_0x9b1eba._0x157c22)](_0x52a016[0x0],_0x52a016[0x1])));const _0x563cd6=Cesium$1['Cartesian3'][_0x4b2210(0x8a)](_0x52a016[0x0],_0x52a016[0x1],_0x5a3783);if(!_0x563cd6)return _0x4468c4;const _0x202e59=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x155605,_0x563cd6);if(!_0x202e59)return _0x4468c4;if(_0x155605['echartsDepthTest']&&_0x155605['mode']===Cesium$1[_0x4b2210(_0x9b1eba._0x1ef142)]['SCENE3D']){const _0x5b7743=new Cesium$1['EllipsoidalOccluder'](_0x155605['globe']['ellipsoid'],_0x155605['camera']['positionWC']),_0x54628a=_0x5b7743['isPointVisible'](_0x563cd6);if(!_0x54628a)return _0x4468c4;}return[_0x202e59['x']-this['_mapOffset'][0x0],_0x202e59['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x376928={_0x27b442:0x79},_0x1149f2=_0x3a57af,_0x1ec164=this[_0x1149f2(_0x376928._0x27b442)];return new echarts__namespace[(_0x1149f2(0x9f))]['BoundingRect'](0x0,0x0,_0x1ec164['getWidth'](),_0x1ec164['getHeight']());}[_0x3a57af(0x91)](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng',_0x3a57af(0x6f)],CompositeCoordinateSystem['create']=function(_0x387824,_0x13f029){const _0x57111b={_0x2e46f8:0x9b},_0x4ac365={_0x52ff4d:0x89},_0x431fb5=_0x3a57af;let _0x50f712;const _0x493661=_0x387824['scheduler'][_0x431fb5(_0x57111b._0x2e46f8)]['_mars3d_scene'];_0x387824['eachComponent']('mars3dMap',function(_0x94c37){const _0x36dd93=_0x431fb5,_0x3f45c1=_0x13f029['getZr']()['painter'];if(!_0x3f45c1)return;!_0x50f712&&(_0x50f712=new CompositeCoordinateSystem(_0x493661,_0x13f029)),_0x94c37[_0x36dd93(_0x4ac365._0x52ff4d)]=_0x50f712,_0x50f712['setMapOffset'](_0x94c37['__mapOffset']||[0x0,0x0]);}),_0x387824['eachSeries'](function(_0x5aab07){_0x5aab07['get']('coordinateSystem')==='mars3dMap'&&(!_0x50f712&&(_0x50f712=new CompositeCoordinateSystem(_0x493661,_0x13f029)),_0x5aab07['coordinateSystem']=_0x50f712);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem'](_0x3a57af(0x6a),CompositeCoordinateSystem),echarts__namespace[_0x3a57af(0x6b)]({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x166863,_0xabfe88){}),echarts__namespace['extendComponentModel']({'type':_0x3a57af(0x6a),'getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x427bf7,_0x3f7584){const _0x20372f={_0x3feaa2:0x9b},_0x1eb797=_0x3a57af;this[_0x1eb797(0x97)]=_0x3f7584,this[_0x1eb797(0x8f)]=_0x427bf7['scheduler'][_0x1eb797(_0x20372f._0x3feaa2)]['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x25d284,_0x458a1d){const _0x4acdb9=_0x3a57af;this['api']['dispatchAction']({'type':_0x4acdb9(0xa0)});},'render':function(_0x5b2952,_0x1e5a71,_0x452b81){},'dispose':function(_0x52c696){const _0x39cb04={_0x457d60:0x8f,_0x50e1f1:0x93},_0x2463be=_0x3a57af;this[_0x2463be(_0x39cb04._0x457d60)]['postRender'][_0x2463be(0x82)](this[_0x2463be(_0x39cb04._0x50e1f1)],this);}});else throw new Error(_0x3a57af(0x6c));function _0x1819(_0x2aae2d,_0x4df255){const _0x396c8e=_0x396c();return _0x1819=function(_0x1819cd,_0x3fc2ce){_0x1819cd=_0x1819cd-0x68;let _0x2c092b=_0x396c8e[_0x1819cd];return _0x2c092b;},_0x1819(_0x2aae2d,_0x4df255);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x4c508c={}){super(_0x4c508c),this['_pointerEvents']=this['options']['pointerEvents'];}get[_0x3a57af(0x70)](){return this['_echartsInstance'];}get[_0x3a57af(0x99)](){const _0x374e54={_0x2608e1:0x8b},_0x23f267=_0x3a57af;return this[_0x23f267(_0x374e54._0x2608e1)];}set['pointerEvents'](_0x40fd3e){const _0x3aeaaa={_0x3045b0:0x84},_0x82b944=_0x3a57af;this['_pointerEvents']=_0x40fd3e,this[_0x82b944(_0x3aeaaa._0x3045b0)]&&(_0x40fd3e?this['_echartsContainer']['style']['pointerEvents']=_0x82b944(0x9e):this[_0x82b944(0x84)]['style']['pointerEvents']='none');}['_setOptionsHook'](_0x4119d0,_0x32d43e){this['setEchartsOption'](_0x4119d0);}['_showHook'](_0x120219){const _0x2d49d6={_0x1292d3:0x68},_0x37da2a=_0x3a57af;_0x120219?this[_0x37da2a(0x84)][_0x37da2a(_0x2d49d6._0x1292d3)][_0x37da2a(0x8e)]='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x3d89e0={_0x3eb7bc:0x77},_0x4dfe9a=_0x3a57af;this['_map']['scene']['echartsDepthTest']=this[_0x4dfe9a(0x81)][_0x4dfe9a(_0x3d89e0._0x3eb7bc)]??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map']['scene']['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x27bd61={_0x2335e3:0x80},_0x51552c=_0x3a57af;this['_echartsContainer']=this[_0x51552c(0x7c)](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this[_0x51552c(_0x27bd61._0x2335e3)]['_mars3d_scene']=this['_map']['scene'],this['setEchartsOption'](this['options']);}[_0x3a57af(0x95)](){const _0x1e49f8={_0x404693:0x6d,_0xa62dc4:0x9d},_0xe42448=_0x3a57af;this['_echartsInstance']&&(this['_echartsInstance'][_0xe42448(0xa1)](),this['_echartsInstance'][_0xe42448(_0x1e49f8._0x404693)](),delete this[_0xe42448(0x80)]),this['_echartsContainer']&&(this[_0xe42448(_0x1e49f8._0xa62dc4)]['container']['removeChild'](this['_echartsContainer']),delete this[_0xe42448(0x84)]);}['_createChartOverlay'](){const _0x36e2d4={_0x1ac918:0x9d,_0x4c8763:0x76,_0xefe263:0x8f,_0x1dec73:0x92,_0x1ad755:0x87,_0x4567a7:0x9e},_0xbd80cb=_0x3a57af,_0x34c429=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this[_0xbd80cb(_0x36e2d4._0x1ac918)][_0xbd80cb(_0x36e2d4._0x4c8763)]);return _0x34c429['id']=this['id'],_0x34c429['style']['position']='absolute',_0x34c429['style']['top']='0px',_0x34c429['style']['left']=_0xbd80cb(0x96),_0x34c429['style']['width']=this['_map'][_0xbd80cb(_0x36e2d4._0xefe263)][_0xbd80cb(_0x36e2d4._0x1dec73)][_0xbd80cb(_0x36e2d4._0x1ad755)]+'px',_0x34c429['style'][_0xbd80cb(0x83)]=this['_map']['scene'][_0xbd80cb(0x92)]['clientHeight']+'px',_0x34c429['style']['pointerEvents']=this[_0xbd80cb(0x8b)]?_0xbd80cb(_0x36e2d4._0x4567a7):'none',_0x34c429['style'][_0xbd80cb(0x71)]=this['options'][_0xbd80cb(0x71)]??0x9,_0x34c429;}['resize'](){const _0x53f382=_0x3a57af;if(!this['_echartsInstance'])return;this[_0x53f382(0x84)]['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this[_0x53f382(0x84)]['style']['height']=this['_map']['scene'][_0x53f382(0x92)]['clientHeight']+'px',this[_0x53f382(0x80)]['resize']();}['setEchartsOption'](_0x5b8da8,_0x4cec76,_0x3ebbce){const _0x57eeee=_0x3a57af;this['_echartsInstance']&&(_0x5b8da8={'mars3dMap':{},...mars3d__namespace['Util'][_0x57eeee(0x86)](_0x5b8da8,{'onlySimpleType':!![]})},delete _0x5b8da8['eventParent'],this[_0x57eeee(0x80)][_0x57eeee(0x88)](_0x5b8da8,_0x4cec76,_0x3ebbce));}['getRectangle'](_0x4eeec6){const _0x47b4d1={_0x267d66:0x8a},_0x1d5cbd={_0x482e5c:0x98},_0x32b16b={_0x37b795:0x78},_0x3e29bc=_0x3a57af;let _0x4374db,_0x7ccce3,_0x7dfb76,_0x26010f;function _0x2f6fe6(_0x27aaec){const _0x2fb9e4=_0x1819;if(!Array[_0x2fb9e4(0x7a)](_0x27aaec))return;const _0x165cc5=_0x27aaec[0x0]||0x0,_0x35719a=_0x27aaec[0x1]||0x0;_0x165cc5!==0x0&&_0x35719a!==0x0&&(_0x4374db===undefined?(_0x4374db=_0x165cc5,_0x7ccce3=_0x165cc5,_0x7dfb76=_0x35719a,_0x26010f=_0x35719a):(_0x4374db=Math['min'](_0x4374db,_0x165cc5),_0x7ccce3=Math['max'](_0x7ccce3,_0x165cc5),_0x7dfb76=Math[_0x2fb9e4(_0x32b16b._0x37b795)](_0x7dfb76,_0x35719a),_0x26010f=Math['max'](_0x26010f,_0x35719a)));}const _0x5e981c=this['options']['series'];_0x5e981c&&_0x5e981c['forEach'](_0x4b8a36=>{const _0x40911a={_0x481cfc:0x98},_0x10808f=_0x1819;_0x4b8a36['data']&&_0x4b8a36['data'][_0x10808f(_0x1d5cbd._0x482e5c)](_0x30b07d=>{const _0x28e6c6=_0x10808f;if(_0x30b07d['value'])_0x2f6fe6(_0x30b07d['value']);else _0x30b07d['coords']&&_0x30b07d[_0x28e6c6(0x74)][_0x28e6c6(_0x40911a._0x481cfc)](_0xf23e83=>{_0x2f6fe6(_0xf23e83);});});});if(_0x4374db===0x0&&_0x7dfb76===0x0&&_0x7ccce3===0x0&&_0x26010f===0x0)return null;return _0x4eeec6!==null&&_0x4eeec6!==void 0x0&&_0x4eeec6['isFormat']?{'xmin':_0x4374db,'xmax':_0x7ccce3,'ymin':_0x7dfb76,'ymax':_0x26010f}:Cesium['Rectangle'][_0x3e29bc(_0x47b4d1._0x267d66)](_0x4374db,_0x7dfb76,_0x7ccce3,_0x26010f);}['on'](_0x4c883e,_0x4d0e60,_0x58ad1a){return this['_echartsInstance']['on'](_0x4c883e,_0x4d0e60,_0x58ad1a||this),this;}[_0x3a57af(0x8c)](_0x3a658c,_0x5402ba,_0x521e1d,_0x5d03d1){const _0x49eab9=_0x3a57af;return this[_0x49eab9(0x80)]['on'](_0x3a658c,_0x5402ba,_0x521e1d,_0x5d03d1||this),this;}[_0x3a57af(0x7f)](_0x32b409,_0x546b40,_0xdee3de){return this['_echartsInstance']['off'](_0x32b409,_0x546b40,_0xdee3de||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace[_0x3a57af(0x70)][_0x3a57af(0x85)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x3a57af(0x98)](function(_0xf3f82c){const _0x1a4348=_0x3a57af;if(_0xf3f82c!=='default'&&!exports['hasOwnProperty'](_0xf3f82c))Object[_0x1a4348(0xa3)](exports,_0xf3f82c,{'enumerable':!![],'get':function(){return echarts[_0xf3f82c];}});}),Object[_0x3a57af(0xa3)](exports,_0x3a57af(0x94),{'value':!![]});
}));
