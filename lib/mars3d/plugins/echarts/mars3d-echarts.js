/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.9
 * 编译日期：2024-04-06 21:26:44
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x5728bd=_0x3c94;(function(_0x2973a2,_0x41da4a){const _0x5d94b7={_0x2a7d16:0x1dd,_0x4e1c87:0x210,_0x454242:0x1e7,_0x53a3e6:0x1e6},_0x1be742=_0x3c94,_0x525263=_0x2973a2();while(!![]){try{const _0x4be567=parseInt(_0x1be742(0x1fc))/0x1*(parseInt(_0x1be742(_0x5d94b7._0x2a7d16))/0x2)+-parseInt(_0x1be742(0x20d))/0x3*(parseInt(_0x1be742(_0x5d94b7._0x4e1c87))/0x4)+parseInt(_0x1be742(0x1fa))/0x5*(parseInt(_0x1be742(0x1f3))/0x6)+-parseInt(_0x1be742(0x1f7))/0x7+parseInt(_0x1be742(0x1e0))/0x8*(-parseInt(_0x1be742(_0x5d94b7._0x454242))/0x9)+-parseInt(_0x1be742(0x212))/0xa+parseInt(_0x1be742(_0x5d94b7._0x53a3e6))/0xb*(parseInt(_0x1be742(0x1fe))/0xc);if(_0x4be567===_0x41da4a)break;else _0x525263['push'](_0x525263['shift']());}catch(_0x49e6f3){_0x525263['push'](_0x525263['shift']());}}}(_0x3ebe,0xb747f));function _interopNamespace(_0x43c636){const _0x4617ea={_0x42f224:0x1e2},_0x52ac14=_0x3c94;if(_0x43c636&&_0x43c636[_0x52ac14(0x217)])return _0x43c636;var _0xeaab7f=Object[_0x52ac14(0x21b)](null);return _0x43c636&&Object['keys'](_0x43c636)['forEach'](function(_0xc4c91){const _0x3d3fe4=_0x52ac14;if(_0xc4c91!=='default'){var _0x126305=Object[_0x3d3fe4(_0x4617ea._0x42f224)](_0x43c636,_0xc4c91);Object[_0x3d3fe4(0x215)](_0xeaab7f,_0xc4c91,_0x126305['get']?_0x126305:{'enumerable':!![],'get':function(){return _0x43c636[_0xc4c91];}});}}),_0xeaab7f[_0x52ac14(0x205)]=_0x43c636,_0xeaab7f;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);function _0x3ebe(){const _0x184c77=['_map','fromDegrees','div','default','coords','scheduler','SCENE3D','_echartsContainer','scene','dispatchAction','fixedHeight','3fKVxob','LayerUtil','lat','4052812bhjhVl','registerAction','8678150xiRAZU','0px','moveHandler','defineProperty','SceneMode','__esModule','lng','options','Cesium','create','width','_echartsInstance','echartsAutoHeight','isFormat','mars3dMap','canvas','echarts','max','mars3d-echarts','setEchartsOption','EchartsLayer','_mars3d_scene','58162jFHMmd','dispose','isPointVisible','24YiNldH','removeChild','getOwnPropertyDescriptor','BoundingRect','coordinateSystem','graphic','10789537VDoKdp','728199aUZIdQ','container','_pointerEvents','_mapOffset','mars3dMapRoam','get','register','data','pointerEvents','forEach','_removedHook','all','6911634KcwhTt','zIndex','addEventListener','dataToPoint','5542194yKHeHg','none','style','5zWJxvP','min','19xtTwnh','absolute','24hdkHvU','getBMap','visibility','Cartesian3'];_0x3ebe=function(){return _0x184c77;};return _0x3ebe();}const Cesium$1=mars3d__namespace[_0x5728bd(0x21a)];class CompositeCoordinateSystem{constructor(_0x2b246e,_0x456af4){const _0x222495=_0x5728bd;this['_mars3d_scene']=_0x2b246e,this['dimensions']=['lng','lat'],this[_0x222495(0x1ea)]=[0x0,0x0],this['_api']=_0x456af4;}['setMapOffset'](_0x436641){this['_mapOffset']=_0x436641;}[_0x5728bd(0x1ff)](){return this['_mars3d_scene'];}[_0x5728bd(0x1f6)](_0x25cdea){const _0x1199ac={_0x48f18c:0x201,_0x2d9dff:0x208,_0x24868c:0x1ea},_0x551a7f=_0x5728bd,_0x3a39c1=this['_mars3d_scene'],_0x556ab3=[NaN,NaN];let _0xa9d29e=_0x3a39c1['echartsFixedHeight'];_0x3a39c1[_0x551a7f(0x21e)]&&(_0xa9d29e=_0x3a39c1['getHeight'](Cesium$1['Cartographic'][_0x551a7f(0x203)](_0x25cdea[0x0],_0x25cdea[0x1])));const _0x29dba3=Cesium$1[_0x551a7f(_0x1199ac._0x48f18c)]['fromDegrees'](_0x25cdea[0x0],_0x25cdea[0x1],_0xa9d29e);if(!_0x29dba3)return _0x556ab3;const _0x390312=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x3a39c1,_0x29dba3);if(!_0x390312)return _0x556ab3;if(_0x3a39c1['echartsDepthTest']&&_0x3a39c1['mode']===Cesium$1[_0x551a7f(0x216)][_0x551a7f(_0x1199ac._0x2d9dff)]){const _0x126277=new Cesium$1['EllipsoidalOccluder'](_0x3a39c1['globe']['ellipsoid'],_0x3a39c1['camera']['positionWC']),_0x348eb1=_0x126277[_0x551a7f(0x1df)](_0x29dba3);if(!_0x348eb1)return _0x556ab3;}return[_0x390312['x']-this[_0x551a7f(_0x1199ac._0x24868c)][0x0],_0x390312['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x4b845b={_0x47c625:0x1e3},_0x346960=_0x5728bd,_0x428b8d=this['_api'];return new echarts__namespace[(_0x346960(0x1e5))][(_0x346960(_0x4b845b._0x47c625))](0x0,0x0,_0x428b8d['getWidth'](),_0x428b8d['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=[_0x5728bd(0x218),_0x5728bd(0x20f)],CompositeCoordinateSystem['create']=function(_0x27ef30,_0x136a48){const _0x5f1663={_0x3a6172:0x1ec,_0x329f39:0x1e4},_0x81eda0=_0x5728bd;let _0x27186e;const _0x48345f=_0x27ef30[_0x81eda0(0x207)]['ecInstance']['_mars3d_scene'];_0x27ef30['eachComponent']('mars3dMap',function(_0x31b5fc){const _0x1eceee=_0x136a48['getZr']()['painter'];if(!_0x1eceee)return;!_0x27186e&&(_0x27186e=new CompositeCoordinateSystem(_0x48345f,_0x136a48)),_0x31b5fc['coordinateSystem']=_0x27186e,_0x27186e['setMapOffset'](_0x31b5fc['__mapOffset']||[0x0,0x0]);}),_0x27ef30['eachSeries'](function(_0x229a69){const _0x4f6078=_0x81eda0;_0x229a69[_0x4f6078(_0x5f1663._0x3a6172)]('coordinateSystem')==='mars3dMap'&&(!_0x27186e&&(_0x27186e=new CompositeCoordinateSystem(_0x48345f,_0x136a48)),_0x229a69[_0x4f6078(_0x5f1663._0x329f39)]=_0x27186e);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem'](_0x5728bd(0x220),CompositeCoordinateSystem),echarts__namespace[_0x5728bd(0x211)]({'type':_0x5728bd(0x1eb),'event':'mars3dMapRoam','update':'updateLayout'},function(_0xfb6b39,_0x22df00){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){const _0x24464d=_0x5728bd;return this[_0x24464d(0x1dc)];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x585c89,_0x1b14d3){const _0x56042d={_0x30b1e:0x1f5},_0x53b3c5=_0x5728bd;this['api']=_0x1b14d3,this['scene']=_0x585c89['scheduler']['ecInstance']['_mars3d_scene'],this[_0x53b3c5(0x20a)]['postRender'][_0x53b3c5(_0x56042d._0x30b1e)](this['moveHandler'],this);},'moveHandler':function(_0x5d0559,_0x3625ef){const _0x4081d3={_0x4e1b4a:0x20b},_0x2a0a7a=_0x5728bd;this['api'][_0x2a0a7a(_0x4081d3._0x4e1b4a)]({'type':'mars3dMapRoam'});},'render':function(_0x280a08,_0x568dff,_0x56900f){},'dispose':function(_0x5e9431){const _0x880ba2=_0x5728bd;this['scene']['postRender']['removeEventListener'](this[_0x880ba2(0x214)],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace[_0x5728bd(0x21a)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0xa99776={}){const _0x30e2c6={_0x556b1c:0x219},_0x3e4f5f=_0x5728bd;super(_0xa99776),this['_pointerEvents']=this[_0x3e4f5f(_0x30e2c6._0x556b1c)]['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get[_0x5728bd(0x1ef)](){const _0x20f114=_0x5728bd;return this[_0x20f114(0x1e9)];}set['pointerEvents'](_0x3f4500){const _0x4cefb3={_0x55c3dc:0x209,_0x2720dd:0x209},_0xe577a6=_0x5728bd;this['_pointerEvents']=_0x3f4500,this[_0xe577a6(0x209)]&&(_0x3f4500?this[_0xe577a6(_0x4cefb3._0x55c3dc)][_0xe577a6(0x1f9)]['pointerEvents']='all':this[_0xe577a6(_0x4cefb3._0x2720dd)]['style']['pointerEvents']=_0xe577a6(0x1f8));}['_setOptionsHook'](_0x2ad761,_0x26c415){this['setEchartsOption'](_0x2ad761);}['_showHook'](_0x229ff5){const _0x10f4b3={_0x30f491:0x200,_0xdfd796:0x200},_0x274c47=_0x5728bd;_0x229ff5?this['_echartsContainer']['style'][_0x274c47(_0x10f4b3._0x30f491)]='visible':this['_echartsContainer']['style'][_0x274c47(_0x10f4b3._0xdfd796)]='hidden';}['_mountedHook'](){const _0x2a3f56=_0x5728bd;this['_map']['scene']['echartsDepthTest']=this[_0x2a3f56(0x219)]['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map']['scene']['echartsFixedHeight']=this['options'][_0x2a3f56(0x20c)]??0x0;}['_addedHook'](){const _0x3652e9={_0x29e4c9:0x202},_0x4068be=_0x5728bd;this['_echartsContainer']=this['_createChartOverlay'](),this[_0x4068be(0x21d)]=echarts__namespace['init'](this[_0x4068be(0x209)]),this[_0x4068be(0x21d)]['_mars3d_scene']=this[_0x4068be(_0x3652e9._0x29e4c9)][_0x4068be(0x20a)],this['setEchartsOption'](this['options']);}[_0x5728bd(0x1f1)](){const _0x289200={_0x148236:0x21d,_0x3e61b6:0x1de,_0x11cb6b:0x209,_0x230764:0x1e1,_0x3104e1:0x209},_0x38577d=_0x5728bd;this[_0x38577d(_0x289200._0x148236)]&&(this[_0x38577d(0x21d)]['clear'](),this[_0x38577d(0x21d)][_0x38577d(_0x289200._0x3e61b6)](),delete this['_echartsInstance']),this[_0x38577d(_0x289200._0x11cb6b)]&&(this['_map']['container'][_0x38577d(_0x289200._0x230764)](this['_echartsContainer']),delete this[_0x38577d(_0x289200._0x3104e1)]);}['_createChartOverlay'](){const _0x5291e3={_0x375395:0x1d9,_0x1b93fc:0x1fd,_0x279fa7:0x213,_0x1ceb9a:0x21c,_0x118485:0x202,_0x2f9f43:0x219},_0x1de619=_0x5728bd,_0x3eb3f0=mars3d__namespace['DomUtil']['create'](_0x1de619(0x204),_0x1de619(_0x5291e3._0x375395),this['_map'][_0x1de619(0x1e8)]);return _0x3eb3f0['id']=this['id'],_0x3eb3f0[_0x1de619(0x1f9)]['position']=_0x1de619(_0x5291e3._0x1b93fc),_0x3eb3f0['style']['top']=_0x1de619(0x213),_0x3eb3f0['style']['left']=_0x1de619(_0x5291e3._0x279fa7),_0x3eb3f0['style'][_0x1de619(_0x5291e3._0x1ceb9a)]=this[_0x1de619(_0x5291e3._0x118485)]['scene']['canvas']['clientWidth']+'px',_0x3eb3f0[_0x1de619(0x1f9)]['height']=this[_0x1de619(0x202)][_0x1de619(0x20a)][_0x1de619(0x221)]['clientHeight']+'px',_0x3eb3f0['style']['pointerEvents']=this['_pointerEvents']?_0x1de619(0x1f2):_0x1de619(0x1f8),_0x3eb3f0['style'][_0x1de619(0x1f4)]=this[_0x1de619(_0x5291e3._0x2f9f43)]['zIndex']??0x9,_0x3eb3f0;}['resize'](){const _0x2cecd6={_0xb47fcb:0x21d},_0x8be404=_0x5728bd;if(!this[_0x8be404(_0x2cecd6._0xb47fcb)])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this[_0x8be404(0x209)]['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance']['resize']();}[_0x5728bd(0x1da)](_0x37e182,_0xb8f53,_0x375084){this['_echartsInstance']&&(_0x37e182={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x37e182,{'onlySimpleType':!![]})},delete _0x37e182['eventParent'],this['_echartsInstance']['setOption'](_0x37e182,_0xb8f53,_0x375084));}['getRectangle'](_0x118849){const _0x5a7937={_0x2ec5be:0x1ee},_0x4cd4ec={_0x4a23ab:0x223},_0x4c40a9=_0x5728bd;let _0x446350,_0xc96fd5,_0x258e9d,_0x411065;function _0x3694b1(_0x10dba5){const _0x4b90cf=_0x3c94;if(!Array['isArray'](_0x10dba5))return;const _0x306a1c=_0x10dba5[0x0]||0x0,_0x535aff=_0x10dba5[0x1]||0x0;_0x306a1c!==0x0&&_0x535aff!==0x0&&(_0x446350===undefined?(_0x446350=_0x306a1c,_0xc96fd5=_0x306a1c,_0x258e9d=_0x535aff,_0x411065=_0x535aff):(_0x446350=Math[_0x4b90cf(0x1fb)](_0x446350,_0x306a1c),_0xc96fd5=Math[_0x4b90cf(_0x4cd4ec._0x4a23ab)](_0xc96fd5,_0x306a1c),_0x258e9d=Math['min'](_0x258e9d,_0x535aff),_0x411065=Math['max'](_0x411065,_0x535aff)));}const _0x3f3ba6=this['options']['series'];_0x3f3ba6&&_0x3f3ba6['forEach'](_0x1ab530=>{const _0x17fbda=_0x3c94;_0x1ab530['data']&&_0x1ab530[_0x17fbda(_0x5a7937._0x2ec5be)]['forEach'](_0x37ae2c=>{const _0x52de47=_0x17fbda;if(_0x37ae2c['value'])_0x3694b1(_0x37ae2c['value']);else _0x37ae2c['coords']&&_0x37ae2c[_0x52de47(0x206)][_0x52de47(0x1f0)](_0x36ca40=>{_0x3694b1(_0x36ca40);});});});if(_0x446350===0x0&&_0x258e9d===0x0&&_0xc96fd5===0x0&&_0x411065===0x0)return null;return _0x118849!==null&&_0x118849!==void 0x0&&_0x118849[_0x4c40a9(0x21f)]?{'xmin':_0x446350,'xmax':_0xc96fd5,'ymin':_0x258e9d,'ymax':_0x411065}:Cesium['Rectangle']['fromDegrees'](_0x446350,_0x258e9d,_0xc96fd5,_0x411065);}['on'](_0x1766f5,_0x256d28,_0x47e836){return this['_echartsInstance']['on'](_0x1766f5,_0x256d28,_0x47e836||this),this;}['onByQuery'](_0x30a49d,_0x2e2dca,_0x51f824,_0x16c4ec){return this['_echartsInstance']['on'](_0x30a49d,_0x2e2dca,_0x51f824,_0x16c4ec||this),this;}['off'](_0x161dd9,_0x5eed0a,_0x5e9f10){return this['_echartsInstance']['off'](_0x161dd9,_0x5eed0a,_0x5e9f10||this),this;}}function _0x3c94(_0x45f6ef,_0x50d112){const _0x3ebeab=_0x3ebe();return _0x3c94=function(_0x3c9442,_0x268b26){_0x3c9442=_0x3c9442-0x1d9;let _0x2c4318=_0x3ebeab[_0x3c9442];return _0x2c4318;},_0x3c94(_0x45f6ef,_0x50d112);}mars3d__namespace[_0x5728bd(0x20e)][_0x5728bd(0x1ed)](_0x5728bd(0x222),EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x5728bd(0x1db)]=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x522d20){const _0x38139d=_0x5728bd;if(_0x522d20!==_0x38139d(0x205)&&!exports['hasOwnProperty'](_0x522d20))Object['defineProperty'](exports,_0x522d20,{'enumerable':!![],'get':function(){return echarts[_0x522d20];}});}),Object[_0x5728bd(0x215)](exports,'__esModule',{'value':!![]});
}));
