/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.4
 * 编译日期：2024-02-20 13:37:34
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x238113=_0x1cc9;(function(_0x3cefdf,_0x1a1f19){const _0x16a87f={_0x4f929c:0x221,_0x2f281e:0x20a,_0x3326ee:0x1f7},_0x244690=_0x1cc9,_0x1aff24=_0x3cefdf();while(!![]){try{const _0x27ada6=parseInt(_0x244690(0x21e))/0x1+-parseInt(_0x244690(_0x16a87f._0x4f929c))/0x2*(-parseInt(_0x244690(0x229))/0x3)+parseInt(_0x244690(0x21d))/0x4+parseInt(_0x244690(0x1f4))/0x5*(parseInt(_0x244690(_0x16a87f._0x2f281e))/0x6)+-parseInt(_0x244690(0x1fc))/0x7+-parseInt(_0x244690(0x222))/0x8*(parseInt(_0x244690(_0x16a87f._0x3326ee))/0x9)+-parseInt(_0x244690(0x232))/0xa;if(_0x27ada6===_0x1a1f19)break;else _0x1aff24['push'](_0x1aff24['shift']());}catch(_0x40d1b6){_0x1aff24['push'](_0x1aff24['shift']());}}}(_0x1fdd,0x53e0f));function _interopNamespace(_0xed56c2){const _0x27b1ae={_0x8564c3:0x202,_0x499c6b:0x1f6},_0x1b8819=_0x1cc9;if(_0xed56c2&&_0xed56c2['__esModule'])return _0xed56c2;var _0x2322a7=Object['create'](null);return _0xed56c2&&Object[_0x1b8819(_0x27b1ae._0x8564c3)](_0xed56c2)[_0x1b8819(_0x27b1ae._0x499c6b)](function(_0x21885f){const _0x5c2f76=_0x1b8819;if(_0x21885f!=='default'){var _0x4d2126=Object['getOwnPropertyDescriptor'](_0xed56c2,_0x21885f);Object[_0x5c2f76(0x228)](_0x2322a7,_0x21885f,_0x4d2126['get']?_0x4d2126:{'enumerable':!![],'get':function(){return _0xed56c2[_0x21885f];}});}}),_0x2322a7['default']=_0xed56c2,_0x2322a7;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x238113(0x20e)];class CompositeCoordinateSystem{constructor(_0xb0b202,_0xeddee8){const _0x31782f=_0x238113;this[_0x31782f(0x205)]=_0xb0b202,this['dimensions']=['lng','lat'],this[_0x31782f(0x213)]=[0x0,0x0],this['_api']=_0xeddee8;}[_0x238113(0x22f)](_0x2bd5fc){const _0x414cc2={_0x2e1dae:0x213},_0x4e4392=_0x238113;this[_0x4e4392(_0x414cc2._0x2e1dae)]=_0x2bd5fc;}['getBMap'](){const _0x493379=_0x238113;return this[_0x493379(0x205)];}['dataToPoint'](_0x34d2a8){const _0x64823c={_0x2cc0ca:0x204},_0x49b4f6=_0x238113,_0x221441=this['_mars3d_scene'],_0x531e87=[NaN,NaN];let _0x6b5a81=_0x221441['echartsFixedHeight'];_0x221441[_0x49b4f6(0x212)]&&(_0x6b5a81=_0x221441[_0x49b4f6(0x235)](Cesium$1['Cartographic'][_0x49b4f6(0x204)](_0x34d2a8[0x0],_0x34d2a8[0x1])));const _0x3a8291=Cesium$1['Cartesian3'][_0x49b4f6(_0x64823c._0x2cc0ca)](_0x34d2a8[0x0],_0x34d2a8[0x1],_0x6b5a81);if(!_0x3a8291)return _0x531e87;const _0x364bdc=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x221441,_0x3a8291);if(!_0x364bdc)return _0x531e87;if(_0x221441['echartsDepthTest']&&_0x221441['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x255a26=new Cesium$1['EllipsoidalOccluder'](_0x221441['globe']['ellipsoid'],_0x221441['camera']['positionWC']),_0x26d35e=_0x255a26['isPointVisible'](_0x3a8291);if(!_0x26d35e)return _0x531e87;}return[_0x364bdc['x']-this['_mapOffset'][0x0],_0x364bdc['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x164d0c={_0x30a1ee:0x223},_0x19dc08=_0x238113,_0x4cab73=this['_api'];return new echarts__namespace[(_0x19dc08(_0x164d0c._0x30a1ee))]['BoundingRect'](0x0,0x0,_0x4cab73['getWidth'](),_0x4cab73[_0x19dc08(0x235)]());}[_0x238113(0x22e)](){const _0x10a681={_0x8c9fbc:0x1f5},_0x25c7ce=_0x238113;return echarts__namespace[_0x25c7ce(_0x10a681._0x8c9fbc)]['create']();}}CompositeCoordinateSystem[_0x238113(0x231)]=['lng',_0x238113(0x226)],CompositeCoordinateSystem['create']=function(_0x7b3f4,_0x2f6708){const _0x2892e6={_0x177992:0x1f2,_0xf38ce1:0x214},_0x45901a={_0x226563:0x216,_0x2b20c9:0x219,_0x17fc9a:0x21c},_0x416960={_0x31e401:0x201},_0x139ffc=_0x238113;let _0x30a0e1;const _0x2d6d05=_0x7b3f4[_0x139ffc(_0x2892e6._0x177992)]['ecInstance']['_mars3d_scene'];_0x7b3f4[_0x139ffc(_0x2892e6._0xf38ce1)]('mars3dMap',function(_0x3ff914){const _0x50d3df=_0x139ffc,_0x3eb5f5=_0x2f6708['getZr']()['painter'];if(!_0x3eb5f5)return;!_0x30a0e1&&(_0x30a0e1=new CompositeCoordinateSystem(_0x2d6d05,_0x2f6708)),_0x3ff914['coordinateSystem']=_0x30a0e1,_0x30a0e1[_0x50d3df(0x22f)](_0x3ff914[_0x50d3df(_0x416960._0x31e401)]||[0x0,0x0]);}),_0x7b3f4[_0x139ffc(0x230)](function(_0x165720){const _0x487ee4=_0x139ffc;_0x165720[_0x487ee4(_0x45901a._0x226563)](_0x487ee4(_0x45901a._0x2b20c9))===_0x487ee4(_0x45901a._0x17fc9a)&&(!_0x30a0e1&&(_0x30a0e1=new CompositeCoordinateSystem(_0x2d6d05,_0x2f6708)),_0x165720['coordinateSystem']=_0x30a0e1);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x238113(0x1fd)]({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x238113(0x1f3)},function(_0x557d6b,_0x33be49){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x238113(0x209)]({'type':_0x238113(0x21c),'init':function(_0x55c093,_0x35aabc){const _0x4b230f=_0x238113;this['api']=_0x35aabc,this['scene']=_0x55c093['scheduler']['ecInstance'][_0x4b230f(0x205)],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x4755d7,_0x33e737){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x361b67,_0x92fc4d,_0x583859){},'dispose':function(_0x4e740e){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace[_0x238113(0x20e)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];function _0x1cc9(_0xc265e4,_0x31223c){const _0x1fdd6c=_0x1fdd();return _0x1cc9=function(_0x1cc9c1,_0x354a86){_0x1cc9c1=_0x1cc9c1-0x1f2;let _0x18c64c=_0x1fdd6c[_0x1cc9c1];return _0x18c64c;},_0x1cc9(_0xc265e4,_0x31223c);}function _0x1fdd(){const _0x395e3a=['visibility','absolute','coordinateSystem','style','_pointerEvents','mars3dMap','522804QsmKSg','599515TuSDSC','onByQuery','min','25268RuoEnT','24GGBAQd','graphic','options','hasOwnProperty','lat','clampToGround','defineProperty','48mCBeRM','top','container','EchartsLayer','visible','getRoamTransform','setMapOffset','eachSeries','dimensions','2091670cDMICA','pointerEvents','_echartsInstance','getHeight','setEchartsOption','scheduler','updateLayout','2590mxbiIp','matrix','forEach','1139256hQieYO','_showHook','data','off','Util','3973214NMfVUu','registerAction','echarts','width','_createChartOverlay','__mapOffset','keys','left','fromDegrees','_mars3d_scene','all','DomUtil','_echartsContainer','extendComponentView','6576GcbamD','position','zIndex','_map','Cesium','resize','clientWidth','scene','echartsAutoHeight','_mapOffset','eachComponent','height','get'];_0x1fdd=function(){return _0x395e3a;};return _0x1fdd();}class EchartsLayer extends BaseLayer{constructor(_0xb7c821={}){const _0x32b403={_0xe14c:0x224},_0x502d69=_0x238113;super(_0xb7c821),this['_pointerEvents']=this[_0x502d69(_0x32b403._0xe14c)]['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){const _0x41164b=_0x238113;return this[_0x41164b(0x21b)];}set['pointerEvents'](_0x1fa9c1){const _0x20b32b={_0x4bfcc3:0x208,_0x24e70f:0x21a},_0x1abcae=_0x238113;this[_0x1abcae(0x21b)]=_0x1fa9c1,this[_0x1abcae(_0x20b32b._0x4bfcc3)]&&(_0x1fa9c1?this['_echartsContainer'][_0x1abcae(0x21a)]['pointerEvents']='all':this['_echartsContainer'][_0x1abcae(_0x20b32b._0x24e70f)]['pointerEvents']='none');}['_setOptionsHook'](_0x5db1b9,_0x5364f2){const _0x5162f4=_0x238113;this[_0x5162f4(0x236)](_0x5db1b9);}[_0x238113(0x1f8)](_0x47381c){const _0x4cf790={_0x5426f2:0x217},_0x4eb1c7=_0x238113;_0x47381c?this['_echartsContainer']['style'][_0x4eb1c7(0x217)]=_0x4eb1c7(0x22d):this['_echartsContainer']['style'][_0x4eb1c7(_0x4cf790._0x5426f2)]='hidden';}['_mountedHook'](){const _0x39cf60={_0x43b3fb:0x20d,_0x585036:0x211},_0x2c749d=_0x238113;this[_0x2c749d(0x20d)]['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this[_0x2c749d(_0x39cf60._0x43b3fb)][_0x2c749d(0x211)]['echartsAutoHeight']=this['options'][_0x2c749d(0x227)]??![],this['_map'][_0x2c749d(_0x39cf60._0x585036)]['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x434bb8={_0x37c4c4:0x208,_0x4b28a3:0x200,_0x5980f9:0x205,_0x14ed35:0x236},_0x3d4a8d=_0x238113;this[_0x3d4a8d(_0x434bb8._0x37c4c4)]=this[_0x3d4a8d(_0x434bb8._0x4b28a3)](),this['_echartsInstance']=echarts__namespace['init'](this[_0x3d4a8d(0x208)]),this['_echartsInstance'][_0x3d4a8d(_0x434bb8._0x5980f9)]=this['_map']['scene'],this[_0x3d4a8d(_0x434bb8._0x14ed35)](this['options']);}['_removedHook'](){const _0x1b91df={_0x1b6706:0x234,_0x42c68c:0x208},_0x464ac0=_0x238113;this[_0x464ac0(_0x1b91df._0x1b6706)]&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this[_0x464ac0(0x234)]),this[_0x464ac0(_0x1b91df._0x42c68c)]&&(this['_map'][_0x464ac0(0x22b)]['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x49ecdd={_0x350ca7:0x207,_0x3bb16d:0x20b,_0x28df8f:0x218,_0x1c73da:0x22a,_0x509814:0x203,_0x4d2c54:0x21a,_0x1e755e:0x211,_0x155d84:0x20d,_0x220e58:0x20c},_0x5ed7bc=_0x238113,_0xe52eea=mars3d__namespace[_0x5ed7bc(_0x49ecdd._0x350ca7)]['create']('div','mars3d-echarts',this['_map']['container']);return _0xe52eea['id']=this['id'],_0xe52eea['style'][_0x5ed7bc(_0x49ecdd._0x3bb16d)]=_0x5ed7bc(_0x49ecdd._0x28df8f),_0xe52eea['style'][_0x5ed7bc(_0x49ecdd._0x1c73da)]='0px',_0xe52eea['style'][_0x5ed7bc(_0x49ecdd._0x509814)]='0px',_0xe52eea[_0x5ed7bc(_0x49ecdd._0x4d2c54)]['width']=this['_map'][_0x5ed7bc(_0x49ecdd._0x1e755e)]['canvas']['clientWidth']+'px',_0xe52eea[_0x5ed7bc(0x21a)][_0x5ed7bc(0x215)]=this[_0x5ed7bc(_0x49ecdd._0x155d84)][_0x5ed7bc(0x211)]['canvas']['clientHeight']+'px',_0xe52eea['style'][_0x5ed7bc(0x233)]=this['_pointerEvents']?_0x5ed7bc(0x206):'none',_0xe52eea['style'][_0x5ed7bc(_0x49ecdd._0x220e58)]=this['options']['zIndex']??0x9,_0xe52eea;}[_0x238113(0x20f)](){const _0x3543ef={_0x2c80f1:0x210},_0x51ffa1=_0x238113;if(!this[_0x51ffa1(0x234)])return;this['_echartsContainer'][_0x51ffa1(0x21a)][_0x51ffa1(0x1ff)]=this['_map']['scene']['canvas'][_0x51ffa1(_0x3543ef._0x2c80f1)]+'px',this['_echartsContainer']['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance'][_0x51ffa1(0x20f)]();}['setEchartsOption'](_0x43f94b,_0x46d6b5,_0x5deaaf){const _0x1e39ac=_0x238113;this['_echartsInstance']&&(_0x43f94b={'mars3dMap':{},...mars3d__namespace[_0x1e39ac(0x1fb)]['getAttrVal'](_0x43f94b,{'onlySimpleType':!![]})},delete _0x43f94b['eventParent'],this[_0x1e39ac(0x234)]['setOption'](_0x43f94b,_0x46d6b5,_0x5deaaf));}['getRectangle'](_0x3e9986){const _0x43ac52={_0x1fb4ed:0x220},_0x508383=_0x238113;let _0x19b6bc,_0x3ba896,_0x3d9d3f,_0x3783e2;function _0x18f18b(_0x5c06a6){const _0x4bc8d6=_0x1cc9;if(!Array['isArray'](_0x5c06a6))return;const _0x3b1d44=_0x5c06a6[0x0]||0x0,_0x790891=_0x5c06a6[0x1]||0x0;_0x3b1d44!==0x0&&_0x790891!==0x0&&(_0x19b6bc===undefined?(_0x19b6bc=_0x3b1d44,_0x3ba896=_0x3b1d44,_0x3d9d3f=_0x790891,_0x3783e2=_0x790891):(_0x19b6bc=Math['min'](_0x19b6bc,_0x3b1d44),_0x3ba896=Math['max'](_0x3ba896,_0x3b1d44),_0x3d9d3f=Math[_0x4bc8d6(_0x43ac52._0x1fb4ed)](_0x3d9d3f,_0x790891),_0x3783e2=Math['max'](_0x3783e2,_0x790891)));}const _0x15ddbf=this['options']['series'];_0x15ddbf&&_0x15ddbf['forEach'](_0x46c09e=>{const _0x5c62b1=_0x1cc9;_0x46c09e[_0x5c62b1(0x1f9)]&&_0x46c09e['data']['forEach'](_0x535397=>{if(_0x535397['value'])_0x18f18b(_0x535397['value']);else _0x535397['coords']&&_0x535397['coords']['forEach'](_0x4cbcf8=>{_0x18f18b(_0x4cbcf8);});});});if(_0x19b6bc===0x0&&_0x3d9d3f===0x0&&_0x3ba896===0x0&&_0x3783e2===0x0)return null;return _0x3e9986!==null&&_0x3e9986!==void 0x0&&_0x3e9986['isFormat']?{'xmin':_0x19b6bc,'xmax':_0x3ba896,'ymin':_0x3d9d3f,'ymax':_0x3783e2}:Cesium['Rectangle'][_0x508383(0x204)](_0x19b6bc,_0x3d9d3f,_0x3ba896,_0x3783e2);}['on'](_0x215eb6,_0x43b5ea,_0x185c6e){const _0x14673e={_0x3c6bdc:0x234},_0x5b13fb=_0x238113;return this[_0x5b13fb(_0x14673e._0x3c6bdc)]['on'](_0x215eb6,_0x43b5ea,_0x185c6e||this),this;}[_0x238113(0x21f)](_0xc42388,_0x561942,_0x4c1094,_0x4cacfa){const _0x24e906={_0x16380d:0x234},_0x2b53fb=_0x238113;return this[_0x2b53fb(_0x24e906._0x16380d)]['on'](_0xc42388,_0x561942,_0x4c1094,_0x4cacfa||this),this;}['off'](_0x160877,_0x1efdd9,_0x1f292d){const _0x56ec06={_0x25f8a2:0x1fa},_0x3c1a5e=_0x238113;return this['_echartsInstance'][_0x3c1a5e(_0x56ec06._0x25f8a2)](_0x160877,_0x1efdd9,_0x1f292d||this),this;}}mars3d__namespace['LayerUtil']['register'](_0x238113(0x1fe),EchartsLayer),mars3d__namespace['layer'][_0x238113(0x22c)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x238113(0x1f6)](function(_0x5a9033){const _0x55ed7d={_0x5628de:0x225},_0x39bbce=_0x238113;if(_0x5a9033!=='default'&&!exports[_0x39bbce(_0x55ed7d._0x5628de)](_0x5a9033))Object['defineProperty'](exports,_0x5a9033,{'enumerable':!![],'get':function(){return echarts[_0x5a9033];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
