/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.9
 * 编译日期：2024-03-28 22:20:03
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x4b9a9d=_0x1eac;(function(_0x512b41,_0x2ae111){const _0x1ffea5={_0xa04efc:0x1d4,_0x3cf3af:0x1eb,_0x49e769:0x1c9,_0x366370:0x1c5},_0x14f201=_0x1eac,_0x35525f=_0x512b41();while(!![]){try{const _0x30c32f=-parseInt(_0x14f201(_0x1ffea5._0xa04efc))/0x1+-parseInt(_0x14f201(0x1ee))/0x2+-parseInt(_0x14f201(0x1d6))/0x3+-parseInt(_0x14f201(_0x1ffea5._0x3cf3af))/0x4+parseInt(_0x14f201(_0x1ffea5._0x49e769))/0x5+parseInt(_0x14f201(_0x1ffea5._0x366370))/0x6*(parseInt(_0x14f201(0x1e7))/0x7)+parseInt(_0x14f201(0x1ce))/0x8;if(_0x30c32f===_0x2ae111)break;else _0x35525f['push'](_0x35525f['shift']());}catch(_0x3f778d){_0x35525f['push'](_0x35525f['shift']());}}}(_0x5dff,0x3e573));function _interopNamespace(_0x5d8c7f){const _0x1adbca={_0x27cfeb:0x1cb},_0x3f36ca=_0x1eac;if(_0x5d8c7f&&_0x5d8c7f['__esModule'])return _0x5d8c7f;var _0x8aa87b=Object[_0x3f36ca(0x1c6)](null);return _0x5d8c7f&&Object[_0x3f36ca(0x1d8)](_0x5d8c7f)['forEach'](function(_0x287cbe){const _0x1618cb=_0x3f36ca;if(_0x287cbe!==_0x1618cb(0x1e0)){var _0x5261b2=Object['getOwnPropertyDescriptor'](_0x5d8c7f,_0x287cbe);Object[_0x1618cb(0x1db)](_0x8aa87b,_0x287cbe,_0x5261b2[_0x1618cb(_0x1adbca._0x27cfeb)]?_0x5261b2:{'enumerable':!![],'get':function(){return _0x5d8c7f[_0x287cbe];}});}}),_0x8aa87b['default']=_0x5d8c7f,_0x8aa87b;}function _0x5dff(){const _0x30971b=['_mountedHook','postRender','0px','15407UXzzgr','_pointerEvents','registerCoordinateSystem','wgs84ToWindowCoordinates','1956560uPkjiw','scene','SCENE3D','354150vKitWW','max','matrix','lng','ellipsoid','off','fromDegrees','SceneTransforms','_echartsInstance','options','container','none','_map','coords','api','addEventListener','isFormat','style','getRectangle','_addedHook','_echartsContainer','resize','init','removeEventListener','getWidth','mars3d-echarts','_mars3d_scene','positionWC','402CmtqTz','create','camera','BoundingRect','485600mzzVtY','dataToPoint','get','min','position','7192776PxcirA','Cesium','clientWidth','EchartsLayer','setMapOffset','getBMap','3864sFKENP','height','654774CKIQfk','pointerEvents','keys','setOption','value','defineProperty','extendComponentView','Util','canvas','all','default','_createChartOverlay','fixedHeight','dispatchAction'];_0x5dff=function(){return _0x30971b;};return _0x5dff();}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x4b9a9d(0x1cf)];class CompositeCoordinateSystem{constructor(_0x12db5b,_0x2f273f){const _0x36d3a3={_0x5380ed:0x208},_0x3c8a36=_0x4b9a9d;this[_0x3c8a36(_0x36d3a3._0x5380ed)]=_0x12db5b,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x2f273f;}[_0x4b9a9d(0x1d2)](_0x54208d){this['_mapOffset']=_0x54208d;}[_0x4b9a9d(0x1d3)](){return this['_mars3d_scene'];}[_0x4b9a9d(0x1ca)](_0x4718ee){const _0x193b97={_0x393cf9:0x208,_0xfd612b:0x1f4,_0x540fba:0x1f5,_0x5d666d:0x1c4},_0x33d0e5=_0x4b9a9d,_0x30d32f=this[_0x33d0e5(_0x193b97._0x393cf9)],_0x420a88=[NaN,NaN];let _0xdaef93=_0x30d32f['echartsFixedHeight'];_0x30d32f['echartsAutoHeight']&&(_0xdaef93=_0x30d32f['getHeight'](Cesium$1['Cartographic'][_0x33d0e5(_0x193b97._0xfd612b)](_0x4718ee[0x0],_0x4718ee[0x1])));const _0x4138d9=Cesium$1['Cartesian3']['fromDegrees'](_0x4718ee[0x0],_0x4718ee[0x1],_0xdaef93);if(!_0x4138d9)return _0x420a88;const _0x19b380=Cesium$1[_0x33d0e5(_0x193b97._0x540fba)][_0x33d0e5(0x1ea)](_0x30d32f,_0x4138d9);if(!_0x19b380)return _0x420a88;if(_0x30d32f['echartsDepthTest']&&_0x30d32f['mode']===Cesium$1['SceneMode'][_0x33d0e5(0x1ed)]){const _0x5dc82b=new Cesium$1['EllipsoidalOccluder'](_0x30d32f['globe'][_0x33d0e5(0x1f2)],_0x30d32f[_0x33d0e5(0x1c7)][_0x33d0e5(_0x193b97._0x5d666d)]),_0x2dfca7=_0x5dc82b['isPointVisible'](_0x4138d9);if(!_0x2dfca7)return _0x420a88;}return[_0x19b380['x']-this['_mapOffset'][0x0],_0x19b380['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x3fa521={_0x14794a:0x206},_0x26f76d=_0x4b9a9d,_0x44c28e=this['_api'];return new echarts__namespace['graphic'][(_0x26f76d(0x1c8))](0x0,0x0,_0x44c28e[_0x26f76d(_0x3fa521._0x14794a)](),_0x44c28e['getHeight']());}['getRoamTransform'](){const _0x2d3a50={_0x261e0f:0x1f0,_0x3db0fc:0x1c6},_0x36188e=_0x4b9a9d;return echarts__namespace[_0x36188e(_0x2d3a50._0x261e0f)][_0x36188e(_0x2d3a50._0x3db0fc)]();}}CompositeCoordinateSystem['dimensions']=[_0x4b9a9d(0x1f1),'lat'],CompositeCoordinateSystem['create']=function(_0x4d7b2f,_0x5418cd){const _0x4ef951={_0x2bb915:0x1cb};let _0x421ab9;const _0x3303b8=_0x4d7b2f['scheduler']['ecInstance']['_mars3d_scene'];_0x4d7b2f['eachComponent']('mars3dMap',function(_0x245414){const _0x262919=_0x5418cd['getZr']()['painter'];if(!_0x262919)return;!_0x421ab9&&(_0x421ab9=new CompositeCoordinateSystem(_0x3303b8,_0x5418cd)),_0x245414['coordinateSystem']=_0x421ab9,_0x421ab9['setMapOffset'](_0x245414['__mapOffset']||[0x0,0x0]);}),_0x4d7b2f['eachSeries'](function(_0x155b11){const _0x39eb4e=_0x1eac;_0x155b11[_0x39eb4e(_0x4ef951._0x2bb915)]('coordinateSystem')==='mars3dMap'&&(!_0x421ab9&&(_0x421ab9=new CompositeCoordinateSystem(_0x3303b8,_0x5418cd)),_0x155b11['coordinateSystem']=_0x421ab9);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace[_0x4b9a9d(0x1e9)]('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x9979c3,_0xb1c081){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){const _0x198cd2={_0xfd23e4:0x208},_0x5381f8=_0x4b9a9d;return this[_0x5381f8(_0x198cd2._0xfd23e4)];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x4b9a9d(0x1dc)]({'type':'mars3dMap','init':function(_0x58aed7,_0x43ba4e){const _0x4b52ab={_0x3e5bb8:0x1ec,_0x42ea0f:0x1e5},_0x5c9831=_0x4b9a9d;this['api']=_0x43ba4e,this['scene']=_0x58aed7['scheduler']['ecInstance'][_0x5c9831(0x208)],this[_0x5c9831(_0x4b52ab._0x3e5bb8)][_0x5c9831(_0x4b52ab._0x42ea0f)][_0x5c9831(0x1fd)](this['moveHandler'],this);},'moveHandler':function(_0x567beb,_0x4a82e2){const _0x57ab02={_0xbea413:0x1fc},_0x356fb3=_0x4b9a9d;this[_0x356fb3(_0x57ab02._0xbea413)][_0x356fb3(0x1e3)]({'type':'mars3dMapRoam'});},'render':function(_0x27b372,_0x5408,_0x12d2e1){},'dispose':function(_0x366677){const _0x2337e9=_0x4b9a9d;this['scene'][_0x2337e9(0x1e5)][_0x2337e9(0x205)](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');function _0x1eac(_0x5bbfe3,_0x2de9b0){const _0x5dfff8=_0x5dff();return _0x1eac=function(_0x1eacbe,_0xb1ac74){_0x1eacbe=_0x1eacbe-0x1c4;let _0x577878=_0x5dfff8[_0x1eacbe];return _0x577878;},_0x1eac(_0x5bbfe3,_0x2de9b0);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x49bdc0={}){super(_0x49bdc0),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get[_0x4b9a9d(0x1d7)](){const _0x27a8f9=_0x4b9a9d;return this[_0x27a8f9(0x1e8)];}set['pointerEvents'](_0x4857f4){const _0x25d92d={_0x38d6b7:0x202,_0x12dd4a:0x1ff,_0x43739e:0x1df,_0x307eef:0x202,_0x2612a8:0x1f9},_0x43c680=_0x4b9a9d;this['_pointerEvents']=_0x4857f4,this['_echartsContainer']&&(_0x4857f4?this[_0x43c680(_0x25d92d._0x38d6b7)][_0x43c680(_0x25d92d._0x12dd4a)]['pointerEvents']=_0x43c680(_0x25d92d._0x43739e):this[_0x43c680(_0x25d92d._0x307eef)][_0x43c680(_0x25d92d._0x12dd4a)]['pointerEvents']=_0x43c680(_0x25d92d._0x2612a8));}['_setOptionsHook'](_0x894d87,_0x248729){this['setEchartsOption'](_0x894d87);}['_showHook'](_0x54aca9){_0x54aca9?this['_echartsContainer']['style']['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}[_0x4b9a9d(0x1e4)](){const _0xd9acf3={_0x2b0263:0x1fa,_0x51bb93:0x1e2},_0x3d50d9=_0x4b9a9d;this[_0x3d50d9(_0xd9acf3._0x2b0263)]['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this[_0x3d50d9(0x1f7)]['clampToGround']??![],this['_map']['scene']['echartsFixedHeight']=this['options'][_0x3d50d9(_0xd9acf3._0x51bb93)]??0x0;}[_0x4b9a9d(0x201)](){const _0xf01415={_0xc6b17f:0x1e1,_0x4e7731:0x1f6,_0xfbe592:0x208},_0x224eb9=_0x4b9a9d;this['_echartsContainer']=this[_0x224eb9(_0xf01415._0xc6b17f)](),this[_0x224eb9(_0xf01415._0x4e7731)]=echarts__namespace[_0x224eb9(0x204)](this['_echartsContainer']),this['_echartsInstance'][_0x224eb9(_0xf01415._0xfbe592)]=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x26e776=_0x4b9a9d;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this[_0x26e776(0x1f6)]['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this[_0x26e776(0x202)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x5c624f={_0x188953:0x207,_0x2f3cca:0x1f8,_0x2e0a7c:0x1e6,_0x5e3ae6:0x1ff,_0x5aae9c:0x1d5},_0x31907b=_0x4b9a9d,_0x19c40f=mars3d__namespace['DomUtil']['create']('div',_0x31907b(_0x5c624f._0x188953),this['_map'][_0x31907b(_0x5c624f._0x2f3cca)]);return _0x19c40f['id']=this['id'],_0x19c40f['style'][_0x31907b(0x1cd)]='absolute',_0x19c40f['style']['top']=_0x31907b(_0x5c624f._0x2e0a7c),_0x19c40f['style']['left']='0px',_0x19c40f[_0x31907b(_0x5c624f._0x5e3ae6)]['width']=this['_map']['scene']['canvas']['clientWidth']+'px',_0x19c40f[_0x31907b(_0x5c624f._0x5e3ae6)][_0x31907b(_0x5c624f._0x5aae9c)]=this['_map'][_0x31907b(0x1ec)]['canvas']['clientHeight']+'px',_0x19c40f['style']['pointerEvents']=this['_pointerEvents']?'all':_0x31907b(0x1f9),_0x19c40f['style']['zIndex']=this['options']['zIndex']??0x9,_0x19c40f;}['resize'](){const _0x27afc7={_0x356167:0x203},_0x28fca1=_0x4b9a9d;if(!this['_echartsInstance'])return;this[_0x28fca1(0x202)]['style']['width']=this['_map'][_0x28fca1(0x1ec)][_0x28fca1(0x1de)][_0x28fca1(0x1d0)]+'px',this['_echartsContainer']['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance'][_0x28fca1(_0x27afc7._0x356167)]();}['setEchartsOption'](_0x638efb,_0x5b012e,_0x385ec4){const _0x49dd2b={_0x5c282e:0x1f6},_0xb0521b=_0x4b9a9d;this['_echartsInstance']&&(_0x638efb={'mars3dMap':{},...mars3d__namespace[_0xb0521b(0x1dd)]['getAttrVal'](_0x638efb,{'onlySimpleType':!![]})},delete _0x638efb['eventParent'],this[_0xb0521b(_0x49dd2b._0x5c282e)][_0xb0521b(0x1d9)](_0x638efb,_0x5b012e,_0x385ec4));}[_0x4b9a9d(0x200)](_0x37aeb9){const _0x20a3e0={_0x34147f:0x1fb,_0x3ca5bf:0x1fb},_0x5b560f={_0x2556c0:0x1ef},_0x371de6=_0x4b9a9d;let _0x38e8a2,_0x3e7136,_0xbd41,_0x14ba08;function _0x3d5554(_0xf22385){const _0x229c04=_0x1eac;if(!Array['isArray'](_0xf22385))return;const _0x56897e=_0xf22385[0x0]||0x0,_0x435b86=_0xf22385[0x1]||0x0;_0x56897e!==0x0&&_0x435b86!==0x0&&(_0x38e8a2===undefined?(_0x38e8a2=_0x56897e,_0x3e7136=_0x56897e,_0xbd41=_0x435b86,_0x14ba08=_0x435b86):(_0x38e8a2=Math['min'](_0x38e8a2,_0x56897e),_0x3e7136=Math[_0x229c04(_0x5b560f._0x2556c0)](_0x3e7136,_0x56897e),_0xbd41=Math[_0x229c04(0x1cc)](_0xbd41,_0x435b86),_0x14ba08=Math['max'](_0x14ba08,_0x435b86)));}const _0x311f06=this['options']['series'];_0x311f06&&_0x311f06['forEach'](_0xce070c=>{_0xce070c['data']&&_0xce070c['data']['forEach'](_0x4a8b44=>{const _0x17596e=_0x1eac;if(_0x4a8b44[_0x17596e(0x1da)])_0x3d5554(_0x4a8b44['value']);else _0x4a8b44[_0x17596e(_0x20a3e0._0x34147f)]&&_0x4a8b44[_0x17596e(_0x20a3e0._0x3ca5bf)]['forEach'](_0x46090c=>{_0x3d5554(_0x46090c);});});});if(_0x38e8a2===0x0&&_0xbd41===0x0&&_0x3e7136===0x0&&_0x14ba08===0x0)return null;return _0x37aeb9!==null&&_0x37aeb9!==void 0x0&&_0x37aeb9[_0x371de6(0x1fe)]?{'xmin':_0x38e8a2,'xmax':_0x3e7136,'ymin':_0xbd41,'ymax':_0x14ba08}:Cesium['Rectangle']['fromDegrees'](_0x38e8a2,_0xbd41,_0x3e7136,_0x14ba08);}['on'](_0xcc363e,_0x1e7380,_0x50f078){const _0x372655=_0x4b9a9d;return this[_0x372655(0x1f6)]['on'](_0xcc363e,_0x1e7380,_0x50f078||this),this;}['onByQuery'](_0xe2b997,_0xdae52a,_0x4d8445,_0x28acff){const _0x29f7d0={_0x22c1ad:0x1f6},_0x4d415b=_0x4b9a9d;return this[_0x4d415b(_0x29f7d0._0x22c1ad)]['on'](_0xe2b997,_0xdae52a,_0x4d8445,_0x28acff||this),this;}[_0x4b9a9d(0x1f3)](_0x185f40,_0x5c0ecc,_0x205f15){return this['_echartsInstance']['off'](_0x185f40,_0x5c0ecc,_0x205f15||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace['layer'][_0x4b9a9d(0x1d1)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x4b9a9d(0x1d1)]=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x24bb76){if(_0x24bb76!=='default'&&!exports['hasOwnProperty'](_0x24bb76))Object['defineProperty'](exports,_0x24bb76,{'enumerable':!![],'get':function(){return echarts[_0x24bb76];}});}),Object[_0x4b9a9d(0x1db)](exports,'__esModule',{'value':!![]});
}));
