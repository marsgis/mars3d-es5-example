/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.0
 * 编译日期：2024-01-14 21:58:35
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x16eeae=_0x4f39;(function(_0x1bb19a,_0x34ac21){const _0x531bbf={_0x1eec14:0xb5,_0x1a9ecf:0xa5,_0x5a319c:0x87,_0x2dab78:0xa0,_0x1f76d8:0x8e},_0x926873=_0x4f39,_0x4c66cf=_0x1bb19a();while(!![]){try{const _0x324f8f=-parseInt(_0x926873(0xbf))/0x1*(-parseInt(_0x926873(_0x531bbf._0x1eec14))/0x2)+parseInt(_0x926873(0x82))/0x3*(parseInt(_0x926873(0xac))/0x4)+parseInt(_0x926873(_0x531bbf._0x1a9ecf))/0x5+-parseInt(_0x926873(0x9f))/0x6+-parseInt(_0x926873(_0x531bbf._0x5a319c))/0x7+-parseInt(_0x926873(0xc2))/0x8*(-parseInt(_0x926873(_0x531bbf._0x2dab78))/0x9)+-parseInt(_0x926873(_0x531bbf._0x1f76d8))/0xa*(parseInt(_0x926873(0xc0))/0xb);if(_0x324f8f===_0x34ac21)break;else _0x4c66cf['push'](_0x4c66cf['shift']());}catch(_0x10c02b){_0x4c66cf['push'](_0x4c66cf['shift']());}}}(_0x56ec,0x8f075));function _interopNamespace(_0x4117ee){const _0xb5fa7b={_0x42f253:0x90},_0x15e24a=_0x4f39;if(_0x4117ee&&_0x4117ee['__esModule'])return _0x4117ee;var _0x50168b=Object['create'](null);return _0x4117ee&&Object['keys'](_0x4117ee)['forEach'](function(_0x2d43c9){if(_0x2d43c9!=='default'){var _0x19d9f3=Object['getOwnPropertyDescriptor'](_0x4117ee,_0x2d43c9);Object['defineProperty'](_0x50168b,_0x2d43c9,_0x19d9f3['get']?_0x19d9f3:{'enumerable':!![],'get':function(){return _0x4117ee[_0x2d43c9];}});}}),_0x50168b[_0x15e24a(_0xb5fa7b._0x42f253)]=_0x4117ee,_0x50168b;}function _0x56ec(){const _0x19212e=['removeEventListener','default','isArray','setOption','layer','LayerUtil','options','Cartesian3','scene','mode','get','_echartsContainer','top','positionWC','forEach','hasOwnProperty','715668TJOKrH','10291167JJatzF','scheduler','setEchartsOption','style','container','3362160Pkoslc','DomUtil','SCENE3D','depthTest','EchartsLayer','matrix','_mars3d_scene','12TQDgxb','resize','wgs84ToWindowCoordinates','zIndex','_echartsInstance','visibility','ecInstance','clientHeight','_createChartOverlay','244578sMjJSF','none','dataToPoint','coords','pointerEvents','lng','updateLayout','clientWidth','SceneMode','visible','1stqLMU','73634NfiDph','extendComponentView','8uNOdxd','keys','请引入\x20echarts\x20库\x20','__mapOffset','min','echarts','init','isPointVisible','api','1069338OqPGed','_pointerEvents','getZr','EllipsoidalOccluder','off','4074287sYxfcu','echartsFixedHeight','_map','value','canvas','__esModule','camera','2570XKiwMv'];_0x56ec=function(){return _0x19212e;};return _0x56ec();}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];function _0x4f39(_0x168553,_0x282e69){const _0x56ec9e=_0x56ec();return _0x4f39=function(_0x4f39a9,_0x109ea2){_0x4f39a9=_0x4f39a9-0x82;let _0x56a995=_0x56ec9e[_0x4f39a9];return _0x56a995;},_0x4f39(_0x168553,_0x282e69);}class CompositeCoordinateSystem{constructor(_0x34222f,_0x4dc5e6){const _0x402cb1=_0x4f39;this['_mars3d_scene']=_0x34222f,this['dimensions']=[_0x402cb1(0xba),'lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x4dc5e6;}['setMapOffset'](_0x45f8af){this['_mapOffset']=_0x45f8af;}['getBMap'](){return this['_mars3d_scene'];}[_0x16eeae(0xb7)](_0x783f4f){const _0x4caaae={_0x303976:0x96,_0x49b47f:0xbd,_0x4c522d:0xa7,_0x240ccf:0x85},_0x41aab4=_0x16eeae,_0x373fdc=this['_mars3d_scene'],_0x1afc82=[NaN,NaN];let _0x2868f9=_0x373fdc['echartsFixedHeight'];_0x373fdc['echartsAutoHeight']&&(_0x2868f9=_0x373fdc['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x783f4f[0x0],_0x783f4f[0x1])));const _0x5bce2b=Cesium$1[_0x41aab4(_0x4caaae._0x303976)]['fromDegrees'](_0x783f4f[0x0],_0x783f4f[0x1],_0x2868f9);if(!_0x5bce2b)return _0x1afc82;const _0x24077b=Cesium$1['SceneTransforms'][_0x41aab4(0xae)](_0x373fdc,_0x5bce2b);if(!_0x24077b)return _0x1afc82;if(_0x373fdc['echartsDepthTest']&&_0x373fdc[_0x41aab4(0x98)]===Cesium$1[_0x41aab4(_0x4caaae._0x49b47f)][_0x41aab4(_0x4caaae._0x4c522d)]){const _0x4a3151=new Cesium$1[(_0x41aab4(_0x4caaae._0x240ccf))](_0x373fdc['globe']['ellipsoid'],_0x373fdc[_0x41aab4(0x8d)][_0x41aab4(0x9c)]),_0xc9b837=_0x4a3151[_0x41aab4(0xc9)](_0x5bce2b);if(!_0xc9b837)return _0x1afc82;}return[_0x24077b['x']-this['_mapOffset'][0x0],_0x24077b['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x4ba3af=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x4ba3af['getWidth'](),_0x4ba3af['getHeight']());}['getRoamTransform'](){const _0x5eb513={_0x36d73c:0xaa},_0x3b7405=_0x16eeae;return echarts__namespace[_0x3b7405(_0x5eb513._0x36d73c)]['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x3ba8f0,_0x1b2069){const _0x46991e={_0x2b0c61:0x99},_0x105f4d={_0x42963a:0x84,_0x36ea1f:0xc5},_0x25e5ce=_0x16eeae;let _0x30e198;const _0x975d2e=_0x3ba8f0['scheduler'][_0x25e5ce(0xb2)][_0x25e5ce(0xab)];_0x3ba8f0['eachComponent']('mars3dMap',function(_0x232351){const _0x1a63c5=_0x25e5ce,_0x525aa2=_0x1b2069[_0x1a63c5(_0x105f4d._0x42963a)]()['painter'];if(!_0x525aa2)return;!_0x30e198&&(_0x30e198=new CompositeCoordinateSystem(_0x975d2e,_0x1b2069)),_0x232351['coordinateSystem']=_0x30e198,_0x30e198['setMapOffset'](_0x232351[_0x1a63c5(_0x105f4d._0x36ea1f)]||[0x0,0x0]);}),_0x3ba8f0['eachSeries'](function(_0x32eb37){const _0x40bfa3=_0x25e5ce;_0x32eb37[_0x40bfa3(_0x46991e._0x2b0c61)]('coordinateSystem')==='mars3dMap'&&(!_0x30e198&&(_0x30e198=new CompositeCoordinateSystem(_0x975d2e,_0x1b2069)),_0x32eb37['coordinateSystem']=_0x30e198);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x16eeae(0xbb)},function(_0x4b5a,_0x5afcd3){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x16eeae(0xc1)]({'type':'mars3dMap','init':function(_0x5d049f,_0x24731a){const _0x3199fc={_0x20e513:0xca},_0xf2c7af=_0x16eeae;this[_0xf2c7af(_0x3199fc._0x20e513)]=_0x24731a,this['scene']=_0x5d049f[_0xf2c7af(0xa1)]['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x2b54d7,_0x453627){const _0x598826={_0x5dbcd6:0xca},_0x27cfae=_0x16eeae;this[_0x27cfae(_0x598826._0x5dbcd6)]['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x21796c,_0x3112c1,_0x44b7a9){},'dispose':function(_0x1600ee){const _0xdf6ebe={_0x38a39b:0x97,_0x3056ca:0x8f},_0x29c25a=_0x16eeae;this[_0x29c25a(_0xdf6ebe._0x38a39b)]['postRender'][_0x29c25a(_0xdf6ebe._0x3056ca)](this['moveHandler'],this);}});else throw new Error(_0x16eeae(0xc4));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x3c31fa={}){const _0xc3c5f0=_0x16eeae;super(_0x3c31fa),this[_0xc3c5f0(0x83)]=this['options']['pointerEvents'];}get[_0x16eeae(0x93)](){const _0x4aba4f=_0x16eeae;return this[_0x4aba4f(0xb0)];}get['pointerEvents'](){const _0x4166ed={_0x7b127b:0x83},_0x4fe33c=_0x16eeae;return this[_0x4fe33c(_0x4166ed._0x7b127b)];}set['pointerEvents'](_0x1c48f4){const _0x3ad6cc={_0x55f5d9:0x9a},_0x2ab9ad=_0x16eeae;this[_0x2ab9ad(0x83)]=_0x1c48f4,this['_echartsContainer']&&(_0x1c48f4?this[_0x2ab9ad(_0x3ad6cc._0x55f5d9)]['style'][_0x2ab9ad(0xb9)]='all':this[_0x2ab9ad(0x9a)]['style']['pointerEvents']='none');}['_setOptionsHook'](_0x581987,_0x35cbaf){const _0x553bf9=_0x16eeae;this[_0x553bf9(0xa2)](_0x581987);}['_showHook'](_0x3c8931){const _0x4929a8={_0x27015f:0xb1,_0x2c5b52:0xbe},_0x1d14f0=_0x16eeae;_0x3c8931?this['_echartsContainer']['style'][_0x1d14f0(_0x4929a8._0x27015f)]=_0x1d14f0(_0x4929a8._0x2c5b52):this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x59849c=_0x16eeae;this['_map']['scene']['echartsDepthTest']=this['options'][_0x59849c(0xa8)]??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x59849c(0x97)][_0x59849c(0x88)]=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0xe5b8d1={_0xd392e0:0xb0,_0x221d32:0xc8},_0x17c90b=_0x16eeae;this['_echartsContainer']=this['_createChartOverlay'](),this[_0x17c90b(_0xe5b8d1._0xd392e0)]=echarts__namespace[_0x17c90b(_0xe5b8d1._0x221d32)](this['_echartsContainer']),this[_0x17c90b(_0xe5b8d1._0xd392e0)]['_mars3d_scene']=this['_map']['scene'],this['setEchartsOption'](this[_0x17c90b(0x95)]);}['_removedHook'](){const _0x4203e7={_0x37c61c:0xb0,_0x355702:0xa4},_0x2e4b3a=_0x16eeae;this['_echartsInstance']&&(this[_0x2e4b3a(0xb0)]['clear'](),this['_echartsInstance']['dispose'](),delete this[_0x2e4b3a(_0x4203e7._0x37c61c)]),this['_echartsContainer']&&(this['_map'][_0x2e4b3a(_0x4203e7._0x355702)]['removeChild'](this[_0x2e4b3a(0x9a)]),delete this[_0x2e4b3a(0x9a)]);}[_0x16eeae(0xb4)](){const _0x1290bc={_0x2fe4f3:0xa3,_0x430fc1:0x9b,_0x7c2ea0:0xbc,_0x493ced:0xaf},_0x5b9f81=_0x16eeae,_0x3628f4=mars3d__namespace[_0x5b9f81(0xa6)]['create']('div','mars3d-echarts',this[_0x5b9f81(0x89)]['container']);return _0x3628f4['id']=this['id'],_0x3628f4[_0x5b9f81(_0x1290bc._0x2fe4f3)]['position']='absolute',_0x3628f4['style'][_0x5b9f81(_0x1290bc._0x430fc1)]='0px',_0x3628f4['style']['left']='0px',_0x3628f4['style']['width']=this['_map']['scene']['canvas'][_0x5b9f81(_0x1290bc._0x7c2ea0)]+'px',_0x3628f4['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x3628f4['style']['pointerEvents']=this['_pointerEvents']?'all':_0x5b9f81(0xb6),_0x3628f4[_0x5b9f81(0xa3)]['zIndex']=this[_0x5b9f81(0x95)][_0x5b9f81(_0x1290bc._0x493ced)]??0x9,_0x3628f4;}['resize'](){const _0x589cad={_0x318667:0x97,_0x5514b7:0x8b,_0x3931e9:0xb0},_0x237a1d=_0x16eeae;if(!this['_echartsInstance'])return;this['_echartsContainer'][_0x237a1d(0xa3)]['width']=this['_map']['scene'][_0x237a1d(0x8b)][_0x237a1d(0xbc)]+'px',this['_echartsContainer'][_0x237a1d(0xa3)]['height']=this['_map'][_0x237a1d(_0x589cad._0x318667)][_0x237a1d(_0x589cad._0x5514b7)][_0x237a1d(0xb3)]+'px',this[_0x237a1d(_0x589cad._0x3931e9)][_0x237a1d(0xad)]();}['setEchartsOption'](_0x1bbc57,_0x14f682,_0x5f0cc9){const _0x4ef0f3={_0x59179b:0x92},_0x5ad89=_0x16eeae;this[_0x5ad89(0xb0)]&&(_0x1bbc57={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x1bbc57,{'onlySimpleType':!![]})},delete _0x1bbc57['eventParent'],this['_echartsInstance'][_0x5ad89(_0x4ef0f3._0x59179b)](_0x1bbc57,_0x14f682,_0x5f0cc9));}['getRectangle'](_0x2f182d){const _0x18fe52={_0x528baa:0x9d},_0x4d6cbd={_0x16c940:0xb8},_0x3aaa0f={_0x3e1576:0xc6},_0x3f8533=_0x16eeae;let _0x210b55,_0x4c7978,_0x2dbe62,_0x4c0d5c;function _0x416501(_0x3518e8){const _0x58084a=_0x4f39;if(!Array[_0x58084a(0x91)](_0x3518e8))return;const _0x2c9800=_0x3518e8[0x0]||0x0,_0x582560=_0x3518e8[0x1]||0x0;_0x2c9800!==0x0&&_0x582560!==0x0&&(_0x210b55===undefined?(_0x210b55=_0x2c9800,_0x4c7978=_0x2c9800,_0x2dbe62=_0x582560,_0x4c0d5c=_0x582560):(_0x210b55=Math[_0x58084a(_0x3aaa0f._0x3e1576)](_0x210b55,_0x2c9800),_0x4c7978=Math['max'](_0x4c7978,_0x2c9800),_0x2dbe62=Math['min'](_0x2dbe62,_0x582560),_0x4c0d5c=Math['max'](_0x4c0d5c,_0x582560)));}const _0x50ed9f=this['options']['series'];_0x50ed9f&&_0x50ed9f[_0x3f8533(_0x18fe52._0x528baa)](_0x4d66a6=>{_0x4d66a6['data']&&_0x4d66a6['data']['forEach'](_0x341a71=>{const _0x260d30=_0x4f39;if(_0x341a71[_0x260d30(0x8a)])_0x416501(_0x341a71['value']);else _0x341a71['coords']&&_0x341a71[_0x260d30(_0x4d6cbd._0x16c940)]['forEach'](_0x3d487a=>{_0x416501(_0x3d487a);});});});if(_0x210b55===0x0&&_0x2dbe62===0x0&&_0x4c7978===0x0&&_0x4c0d5c===0x0)return null;return _0x2f182d!==null&&_0x2f182d!==void 0x0&&_0x2f182d['isFormat']?{'xmin':_0x210b55,'xmax':_0x4c7978,'ymin':_0x2dbe62,'ymax':_0x4c0d5c}:Cesium['Rectangle']['fromDegrees'](_0x210b55,_0x2dbe62,_0x4c7978,_0x4c0d5c);}['on'](_0x539f2d,_0x536552,_0x35c218){return this['_echartsInstance']['on'](_0x539f2d,_0x536552,_0x35c218||this),this;}['onByQuery'](_0x4f423e,_0x412de8,_0x5c78e6,_0x21a7c2){const _0x29a395={_0x2295d8:0xb0},_0x392060=_0x16eeae;return this[_0x392060(_0x29a395._0x2295d8)]['on'](_0x4f423e,_0x412de8,_0x5c78e6,_0x21a7c2||this),this;}[_0x16eeae(0x86)](_0x5f26a4,_0x56c70c,_0x17b0b2){const _0xa9323f=_0x16eeae;return this[_0xa9323f(0xb0)]['off'](_0x5f26a4,_0x56c70c,_0x17b0b2||this),this;}}mars3d__namespace[_0x16eeae(0x94)]['register'](_0x16eeae(0xc7),EchartsLayer),mars3d__namespace[_0x16eeae(0x93)]['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x16eeae(0xa9)]=EchartsLayer,Object[_0x16eeae(0xc3)](echarts)['forEach'](function(_0x565085){const _0x3f413e=_0x16eeae;if(_0x565085!=='default'&&!exports[_0x3f413e(0x9e)](_0x565085))Object['defineProperty'](exports,_0x565085,{'enumerable':!![],'get':function(){return echarts[_0x565085];}});}),Object['defineProperty'](exports,_0x16eeae(0x8c),{'value':!![]});
}));
