/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.14
 * 编译日期：2023-11-28 09:43:07
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x58a49b=_0x14d9;(function(_0x48245e,_0x142836){const _0x382c31={_0x4a136a:0x171,_0x41cfa6:0x168,_0x34597c:0x180,_0x546cde:0x16d,_0x5b270c:0x174,_0x494278:0x154,_0x4e3da3:0x159,_0x142158:0x14f,_0x30aec1:0x15a},_0x4a0c68=_0x14d9,_0x5abb0d=_0x48245e();while(!![]){try{const _0x4ddfb0=-parseInt(_0x4a0c68(0x184))/0x1*(-parseInt(_0x4a0c68(_0x382c31._0x4a136a))/0x2)+-parseInt(_0x4a0c68(_0x382c31._0x41cfa6))/0x3*(-parseInt(_0x4a0c68(_0x382c31._0x34597c))/0x4)+parseInt(_0x4a0c68(_0x382c31._0x546cde))/0x5+-parseInt(_0x4a0c68(_0x382c31._0x5b270c))/0x6+-parseInt(_0x4a0c68(_0x382c31._0x494278))/0x7*(parseInt(_0x4a0c68(_0x382c31._0x4e3da3))/0x8)+-parseInt(_0x4a0c68(0x176))/0x9+-parseInt(_0x4a0c68(_0x382c31._0x142158))/0xa*(-parseInt(_0x4a0c68(_0x382c31._0x30aec1))/0xb);if(_0x4ddfb0===_0x142836)break;else _0x5abb0d['push'](_0x5abb0d['shift']());}catch(_0x4efe4e){_0x5abb0d['push'](_0x5abb0d['shift']());}}}(_0x41d7,0x960b0));function _interopNamespace(_0x542a8b){const _0x2571cb={_0x1a2f05:0x14e},_0x52d6ca={_0x1a5ab2:0x142},_0x23b746=_0x14d9;if(_0x542a8b&&_0x542a8b['__esModule'])return _0x542a8b;var _0xdd6583=Object['create'](null);return _0x542a8b&&Object['keys'](_0x542a8b)['forEach'](function(_0x4560d1){const _0x5c7666=_0x14d9;if(_0x4560d1!=='default'){var _0x165904=Object[_0x5c7666(0x153)](_0x542a8b,_0x4560d1);Object[_0x5c7666(_0x52d6ca._0x1a5ab2)](_0xdd6583,_0x4560d1,_0x165904['get']?_0x165904:{'enumerable':!![],'get':function(){return _0x542a8b[_0x4560d1];}});}}),_0xdd6583[_0x23b746(_0x2571cb._0x1a2f05)]=_0x542a8b,_0xdd6583;}function _0x14d9(_0x5aaa3f,_0x5d03cc){const _0x41d741=_0x41d7();return _0x14d9=function(_0x14d994,_0x2246c8){_0x14d994=_0x14d994-0x142;let _0xcd253b=_0x41d741[_0x14d994];return _0xcd253b;},_0x14d9(_0x5aaa3f,_0x5d03cc);}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x261a25,_0x55b212){const _0x1526d3=_0x14d9;this['_mars3d_scene']=_0x261a25,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this[_0x1526d3(0x144)]=_0x55b212;}['setMapOffset'](_0x5951a3){this['_mapOffset']=_0x5951a3;}['getBMap'](){return this['_mars3d_scene'];}[_0x58a49b(0x178)](_0x48f392){const _0x509d64={_0x3fbb25:0x151},_0x3bab1d=_0x58a49b,_0xadcbba=this['_mars3d_scene'],_0x5a353a=[NaN,NaN];let _0x5a7d65=_0xadcbba['echartsFixedHeight'];_0xadcbba['echartsAutoHeight']&&(_0x5a7d65=_0xadcbba[_0x3bab1d(0x148)]['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x48f392[0x0],_0x48f392[0x1])));const _0x58661d=Cesium$1['Cartesian3']['fromDegrees'](_0x48f392[0x0],_0x48f392[0x1],_0x5a7d65);if(!_0x58661d)return _0x5a353a;const _0x130df5=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0xadcbba,_0x58661d);if(!_0x130df5)return _0x5a353a;if(_0xadcbba['echartsDepthTest']&&_0xadcbba[_0x3bab1d(_0x509d64._0x3fbb25)]===Cesium$1[_0x3bab1d(0x16b)]['SCENE3D']){const _0xb42b33=new Cesium$1['EllipsoidalOccluder'](_0xadcbba[_0x3bab1d(0x148)]['ellipsoid'],_0xadcbba['camera']['positionWC']),_0x782160=_0xb42b33['isPointVisible'](_0x58661d);if(!_0x782160)return _0x5a353a;}return[_0x130df5['x']-this['_mapOffset'][0x0],_0x130df5['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x3a8f95=_0x58a49b,_0x1f2cc0=this['_api'];return new echarts__namespace[(_0x3a8f95(0x17f))][(_0x3a8f95(0x173))](0x0,0x0,_0x1f2cc0['getWidth'](),_0x1f2cc0['getHeight']());}['getRoamTransform'](){const _0x412342={_0x1186f6:0x17a,_0x24dbad:0x15f},_0x424365=_0x58a49b;return echarts__namespace[_0x424365(_0x412342._0x1186f6)][_0x424365(_0x412342._0x24dbad)]();}}CompositeCoordinateSystem['dimensions']=['lng',_0x58a49b(0x16a)],CompositeCoordinateSystem['create']=function(_0x55194f,_0x5639ef){const _0x260bc4=_0x58a49b;let _0xaa1f3f;const _0x5dfdcf=_0x55194f['scheduler']['ecInstance']['_mars3d_scene'];_0x55194f[_0x260bc4(0x183)]('mars3dMap',function(_0x1ab02a){const _0x24337c=_0x260bc4,_0x273402=_0x5639ef['getZr']()[_0x24337c(0x17b)];if(!_0x273402)return;!_0xaa1f3f&&(_0xaa1f3f=new CompositeCoordinateSystem(_0x5dfdcf,_0x5639ef)),_0x1ab02a['coordinateSystem']=_0xaa1f3f,_0xaa1f3f['setMapOffset'](_0x1ab02a['__mapOffset']||[0x0,0x0]);}),_0x55194f['eachSeries'](function(_0x47a3cf){const _0x3b456c=_0x260bc4;_0x47a3cf['get']('coordinateSystem')===_0x3b456c(0x161)&&(!_0xaa1f3f&&(_0xaa1f3f=new CompositeCoordinateSystem(_0x5dfdcf,_0x5639ef)),_0x47a3cf['coordinateSystem']=_0xaa1f3f);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem'](_0x58a49b(0x161),CompositeCoordinateSystem),echarts__namespace[_0x58a49b(0x15c)]({'type':_0x58a49b(0x162),'event':_0x58a49b(0x162),'update':_0x58a49b(0x181)},function(_0x3afc5c,_0x53f7aa){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x58a49b(0x17d)]({'type':'mars3dMap','init':function(_0x321a40,_0x12a7d9){this['api']=_0x12a7d9,this['scene']=_0x321a40['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0xc75d02,_0x400f82){const _0xc3e321=_0x58a49b;this[_0xc3e321(0x146)]['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x1dae36,_0x53d924,_0x543586){},'dispose':function(_0xd770c0){const _0x58a7f2={_0x2695dc:0x14c},_0x56b90e=_0x58a49b;this[_0x56b90e(_0x58a7f2._0x2695dc)]['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace[_0x58a49b(0x160)],BaseLayer=mars3d__namespace['layer'][_0x58a49b(0x16f)];class EchartsLayer extends BaseLayer{constructor(_0x39c0eb={}){super(_0x39c0eb),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x58a49b(0x145)](_0x2b7edb){const _0x322ed6={_0x2416e5:0x150},_0x563bef=_0x58a49b;this['_pointerEvents']=_0x2b7edb,this['_echartsContainer']&&(_0x2b7edb?this['_echartsContainer']['style']['pointerEvents']='all':this[_0x563bef(_0x322ed6._0x2416e5)]['style']['pointerEvents']='none');}['_setOptionsHook'](_0x5aadb4,_0x4d9139){const _0x4e9271=_0x58a49b;this[_0x4e9271(0x16c)](_0x5aadb4);}['_showHook'](_0x581cba){const _0x118ba1=_0x58a49b;_0x581cba?this[_0x118ba1(0x150)][_0x118ba1(0x175)]['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}[_0x58a49b(0x177)](){const _0x2c987b={_0x204fbb:0x156},_0x4395a8=_0x58a49b;this['_map']['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this[_0x4395a8(_0x2c987b._0x204fbb)]['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map']['scene']['echartsFixedHeight']=this[_0x4395a8(0x147)][_0x4395a8(0x182)]??0x0;}['_addedHook'](){const _0x5dc957={_0x284cf4:0x14a,_0x2fe30a:0x16c},_0xcfb486=_0x58a49b;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace[_0xcfb486(_0x5dc957._0x284cf4)](this['_echartsContainer']),this[_0xcfb486(0x17e)]['_mars3d_scene']=this['_map']['scene'],this[_0xcfb486(_0x5dc957._0x2fe30a)](this['options']);}[_0x58a49b(0x15b)](){const _0x4d2301={_0x443469:0x150},_0xfbd4a=_0x58a49b;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance'][_0xfbd4a(0x179)](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this[_0xfbd4a(_0x4d2301._0x443469)]),delete this[_0xfbd4a(_0x4d2301._0x443469)]);}['_createChartOverlay'](){const _0x233bb9={_0x5571ea:0x14d,_0x4298ea:0x165,_0x14d8b1:0x15e,_0x5f0991:0x175,_0x2b4fc2:0x149,_0x18af4b:0x143},_0x2b7266=_0x58a49b,_0x511fe9=mars3d__namespace[_0x2b7266(_0x233bb9._0x5571ea)][_0x2b7266(0x15f)]('div',_0x2b7266(_0x233bb9._0x4298ea),this[_0x2b7266(0x156)][_0x2b7266(_0x233bb9._0x14d8b1)]);return _0x511fe9['id']=this['id'],_0x511fe9['style'][_0x2b7266(0x15d)]='absolute',_0x511fe9['style']['top']='0px',_0x511fe9[_0x2b7266(_0x233bb9._0x5f0991)]['left']=_0x2b7266(_0x233bb9._0x2b4fc2),_0x511fe9['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',_0x511fe9['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x511fe9[_0x2b7266(0x175)]['pointerEvents']=this[_0x2b7266(0x17c)]?'all':_0x2b7266(0x14b),_0x511fe9['style'][_0x2b7266(0x143)]=this['options'][_0x2b7266(_0x233bb9._0x18af4b)]??0x9,_0x511fe9;}[_0x58a49b(0x158)](){const _0x5cfc29={_0x5ed897:0x150,_0x4d001b:0x175,_0x97f0e:0x16e,_0x46113e:0x150,_0x185627:0x17e},_0x2e3cf7=_0x58a49b;if(!this['_echartsInstance'])return;this[_0x2e3cf7(_0x5cfc29._0x5ed897)][_0x2e3cf7(_0x5cfc29._0x4d001b)]['width']=this['_map']['scene'][_0x2e3cf7(_0x5cfc29._0x97f0e)][_0x2e3cf7(0x185)]+'px',this[_0x2e3cf7(_0x5cfc29._0x46113e)]['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this[_0x2e3cf7(_0x5cfc29._0x185627)]['resize']();}[_0x58a49b(0x16c)](_0x2b5907,_0x29cb4b,_0x54a0db){const _0x22dbb7={_0x7a3cb7:0x157,_0x34b800:0x163,_0x1c0f02:0x17e},_0x44434d=_0x58a49b;this[_0x44434d(0x17e)]&&(_0x2b5907={'mars3dMap':{},...mars3d__namespace[_0x44434d(0x169)][_0x44434d(_0x22dbb7._0x7a3cb7)](_0x2b5907,{'onlySimpleType':!![]})},delete _0x2b5907[_0x44434d(_0x22dbb7._0x34b800)],this[_0x44434d(_0x22dbb7._0x1c0f02)]['setOption'](_0x2b5907,_0x29cb4b,_0x54a0db));}['getRectangle'](_0x587276){const _0x131b61={_0x42c514:0x147},_0x38aeca={_0x3a309f:0x155,_0x27c3fd:0x167},_0x3ddd1f={_0x529100:0x166},_0x132f72=_0x58a49b;let _0x3d4126,_0x49cf31,_0x54624e,_0x3f5e8e;function _0x1b896b(_0x37d320){const _0x1165a0=_0x14d9;if(!Array['isArray'](_0x37d320))return;const _0x57355b=_0x37d320[0x0]||0x0,_0x8e8c65=_0x37d320[0x1]||0x0;_0x57355b!==0x0&&_0x8e8c65!==0x0&&(_0x3d4126===undefined?(_0x3d4126=_0x57355b,_0x49cf31=_0x57355b,_0x54624e=_0x8e8c65,_0x3f5e8e=_0x8e8c65):(_0x3d4126=Math['min'](_0x3d4126,_0x57355b),_0x49cf31=Math[_0x1165a0(_0x3ddd1f._0x529100)](_0x49cf31,_0x57355b),_0x54624e=Math[_0x1165a0(0x152)](_0x54624e,_0x8e8c65),_0x3f5e8e=Math['max'](_0x3f5e8e,_0x8e8c65)));}const _0x7a20d5=this[_0x132f72(_0x131b61._0x42c514)]['series'];_0x7a20d5&&_0x7a20d5['forEach'](_0x3cf07d=>{const _0x228624=_0x132f72;_0x3cf07d[_0x228624(_0x38aeca._0x3a309f)]&&_0x3cf07d[_0x228624(_0x38aeca._0x3a309f)][_0x228624(_0x38aeca._0x27c3fd)](_0x1ec4a9=>{const _0x1095b5=_0x228624;if(_0x1ec4a9['value'])_0x1b896b(_0x1ec4a9['value']);else _0x1ec4a9['coords']&&_0x1ec4a9['coords'][_0x1095b5(0x167)](_0x2e6632=>{_0x1b896b(_0x2e6632);});});});if(_0x3d4126===0x0&&_0x54624e===0x0&&_0x49cf31===0x0&&_0x3f5e8e===0x0)return null;return _0x587276!==null&&_0x587276!==void 0x0&&_0x587276['isFormat']?{'xmin':_0x3d4126,'xmax':_0x49cf31,'ymin':_0x54624e,'ymax':_0x3f5e8e}:Cesium['Rectangle']['fromDegrees'](_0x3d4126,_0x54624e,_0x49cf31,_0x3f5e8e);}['on'](_0x45a7a7,_0x48dfee,_0x2b9817){const _0x5101b1={_0x4a1e6d:0x17e},_0x497dc6=_0x58a49b;return this[_0x497dc6(_0x5101b1._0x4a1e6d)]['on'](_0x45a7a7,_0x48dfee,_0x2b9817||this),this;}[_0x58a49b(0x186)](_0x532ec6,_0x45a9fb,_0x5a0ab9,_0x4d642b){return this['_echartsInstance']['on'](_0x532ec6,_0x45a9fb,_0x5a0ab9,_0x4d642b||this),this;}['off'](_0x3d8599,_0x78443c,_0xf065c5){const _0x4352dd={_0x229d84:0x17e},_0x2f3547=_0x58a49b;return this[_0x2f3547(_0x4352dd._0x229d84)]['off'](_0x3d8599,_0x78443c,_0xf065c5||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace[_0x58a49b(0x164)]['EchartsLayer']=EchartsLayer,mars3d__namespace[_0x58a49b(0x170)]=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x2e43bb){const _0x1631cf={_0x131116:0x172},_0x5afd2b=_0x58a49b;if(_0x2e43bb!=='default'&&!exports[_0x5afd2b(_0x1631cf._0x131116)](_0x2e43bb))Object['defineProperty'](exports,_0x2e43bb,{'enumerable':!![],'get':function(){return echarts[_0x2e43bb];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});function _0x41d7(){const _0x1a0759=['DomUtil','default','595590qGLGUT','_echartsContainer','mode','min','getOwnPropertyDescriptor','270935zDSdbu','data','_map','getAttrVal','resize','152ObyPjK','231XjKlmU','_removedHook','registerAction','position','container','create','Cesium','mars3dMap','mars3dMapRoam','eventParent','layer','mars3d-echarts','max','forEach','123IFrUVK','Util','lat','SceneMode','setEchartsOption','1627735BOGmsx','canvas','BaseLayer','echarts','1436168eQEQiv','hasOwnProperty','BoundingRect','4675122jyvRwa','style','6354756rvqWlM','_mountedHook','dataToPoint','dispose','matrix','painter','_pointerEvents','extendComponentView','_echartsInstance','graphic','52768nmzMJJ','updateLayout','fixedHeight','eachComponent','1wvjUYK','clientWidth','onByQuery','defineProperty','zIndex','_api','pointerEvents','api','options','globe','0px','init','none','scene'];_0x41d7=function(){return _0x1a0759;};return _0x41d7();}
}));
