/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.2
 * 编译日期：2024-01-29 17:15:45
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x44e3cd=_0x4483;(function(_0x5d0371,_0x5963f4){const _0x4f2dd6={_0x48aeb7:0x10b,_0xf2580a:0xe5,_0x1cefd9:0xda,_0x58c8db:0xdc,_0x1704a9:0xde,_0x170537:0x107},_0x42edd8=_0x4483,_0x212b18=_0x5d0371();while(!![]){try{const _0x956532=parseInt(_0x42edd8(_0x4f2dd6._0x48aeb7))/0x1*(parseInt(_0x42edd8(_0x4f2dd6._0xf2580a))/0x2)+-parseInt(_0x42edd8(0xd8))/0x3+-parseInt(_0x42edd8(_0x4f2dd6._0x1cefd9))/0x4+parseInt(_0x42edd8(0xf3))/0x5*(-parseInt(_0x42edd8(_0x4f2dd6._0x58c8db))/0x6)+parseInt(_0x42edd8(_0x4f2dd6._0x1704a9))/0x7+parseInt(_0x42edd8(0xe9))/0x8+parseInt(_0x42edd8(_0x4f2dd6._0x170537))/0x9;if(_0x956532===_0x5963f4)break;else _0x212b18['push'](_0x212b18['shift']());}catch(_0x3d1304){_0x212b18['push'](_0x212b18['shift']());}}}(_0xd3eb,0xb2d02));function _interopNamespace(_0x291ff7){if(_0x291ff7&&_0x291ff7['__esModule'])return _0x291ff7;var _0x2c5434=Object['create'](null);return _0x291ff7&&Object['keys'](_0x291ff7)['forEach'](function(_0x4e027d){if(_0x4e027d!=='default'){var _0x52989a=Object['getOwnPropertyDescriptor'](_0x291ff7,_0x4e027d);Object['defineProperty'](_0x2c5434,_0x4e027d,_0x52989a['get']?_0x52989a:{'enumerable':!![],'get':function(){return _0x291ff7[_0x4e027d];}});}}),_0x2c5434['default']=_0x291ff7,_0x2c5434;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x44e3cd(0xe3)];class CompositeCoordinateSystem{constructor(_0x455263,_0x3afcc1){const _0x514954={_0x289681:0xeb},_0x376918=_0x44e3cd;this[_0x376918(0xd4)]=_0x455263,this[_0x376918(0xd5)]=[_0x376918(0xe4),'lat'],this['_mapOffset']=[0x0,0x0],this[_0x376918(_0x514954._0x289681)]=_0x3afcc1;}[_0x44e3cd(0xf8)](_0x3befab){this['_mapOffset']=_0x3befab;}[_0x44e3cd(0xee)](){return this['_mars3d_scene'];}['dataToPoint'](_0x25ce6e){const _0x39b24f={_0x4766a9:0xe7,_0x511666:0xf7},_0xd0ac65=_0x44e3cd,_0x3d5039=this['_mars3d_scene'],_0x27f013=[NaN,NaN];let _0x2a4d1f=_0x3d5039['echartsFixedHeight'];_0x3d5039[_0xd0ac65(_0x39b24f._0x4766a9)]&&(_0x2a4d1f=_0x3d5039['globe'][_0xd0ac65(0xfb)](Cesium$1[_0xd0ac65(0x106)]['fromDegrees'](_0x25ce6e[0x0],_0x25ce6e[0x1])));const _0x2b0336=Cesium$1['Cartesian3']['fromDegrees'](_0x25ce6e[0x0],_0x25ce6e[0x1],_0x2a4d1f);if(!_0x2b0336)return _0x27f013;const _0x1163be=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x3d5039,_0x2b0336);if(!_0x1163be)return _0x27f013;if(_0x3d5039['echartsDepthTest']&&_0x3d5039[_0xd0ac65(0xd6)]===Cesium$1['SceneMode'][_0xd0ac65(0xf2)]){const _0x3c9283=new Cesium$1[(_0xd0ac65(_0x39b24f._0x511666))](_0x3d5039['globe']['ellipsoid'],_0x3d5039['camera']['positionWC']),_0x183841=_0x3c9283['isPointVisible'](_0x2b0336);if(!_0x183841)return _0x27f013;}return[_0x1163be['x']-this['_mapOffset'][0x0],_0x1163be['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x2c7006={_0x55f1be:0xfb},_0x410e63=_0x44e3cd,_0x36154a=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x36154a['getWidth'](),_0x36154a[_0x410e63(_0x2c7006._0x55f1be)]());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}function _0xd3eb(){const _0x4cb6ab=['echartsAutoHeight','clampToGround','9622192LlIEFe','extendComponentModel','_api','depthTest','default','getBMap','_map','pointerEvents','canvas','SCENE3D','111845PvOedV','top','mars3dMapRoam','dispose','EllipsoidalOccluder','setMapOffset','zIndex','onByQuery','getHeight','defineProperty','postRender','echartsDepthTest','_echartsInstance','absolute','painter','_echartsContainer','max','resize','style','Cartographic','6473421eSJnBw','echarts','scene','__mapOffset','766DFAcRk','BaseLayer','0px','registerCoordinateSystem','clientWidth','init','container','_mars3d_scene','dimensions','mode','left','4105935FCMzzp','moveHandler','1816532JBsbtW','mars3dMap','102eAtxtM','_pointerEvents','6037668ZsEzFy','create','div','removeEventListener','data','Cesium','lng','394rEpmqG','extendComponentView'];_0xd3eb=function(){return _0x4cb6ab;};return _0xd3eb();}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x2e3a9a,_0x355641){const _0x2d3489={_0x255cb7:0x10a};let _0x31f864;const _0x4f8849=_0x2e3a9a['scheduler']['ecInstance']['_mars3d_scene'];_0x2e3a9a['eachComponent']('mars3dMap',function(_0x1bacd2){const _0x2a764c=_0x4483,_0xee9eb0=_0x355641['getZr']()[_0x2a764c(0x101)];if(!_0xee9eb0)return;!_0x31f864&&(_0x31f864=new CompositeCoordinateSystem(_0x4f8849,_0x355641)),_0x1bacd2['coordinateSystem']=_0x31f864,_0x31f864['setMapOffset'](_0x1bacd2[_0x2a764c(_0x2d3489._0x255cb7)]||[0x0,0x0]);}),_0x2e3a9a['eachSeries'](function(_0x186805){_0x186805['get']('coordinateSystem')==='mars3dMap'&&(!_0x31f864&&(_0x31f864=new CompositeCoordinateSystem(_0x4f8849,_0x355641)),_0x186805['coordinateSystem']=_0x31f864);});};function _0x4483(_0xf6fcda,_0xc00fd5){const _0xd3ebf=_0xd3eb();return _0x4483=function(_0x44836d,_0x536659){_0x44836d=_0x44836d-0xd2;let _0x42834d=_0xd3ebf[_0x44836d];return _0x42834d;},_0x4483(_0xf6fcda,_0xc00fd5);}if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace[_0x44e3cd(0x10e)](_0x44e3cd(0xdb),CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':_0x44e3cd(0xf5),'event':'mars3dMapRoam','update':'updateLayout'},function(_0x2eb149,_0x1e063a){}),echarts__namespace[_0x44e3cd(0xea)]({'type':'mars3dMap','getBMap':function(){const _0x4ea49f={_0x4bd421:0xd4},_0xa6350b=_0x44e3cd;return this[_0xa6350b(_0x4ea49f._0x4bd421)];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x44e3cd(0xe6)]({'type':'mars3dMap','init':function(_0xe3f626,_0x1c2c66){this['api']=_0x1c2c66,this['scene']=_0xe3f626['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x988a86,_0xc84a16){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0xdf2d14,_0x40eb95,_0x2dc184){},'dispose':function(_0xa6a6ca){const _0x3003c3={_0x158298:0xe1},_0x45781d=_0x44e3cd;this['scene'][_0x45781d(0xfd)][_0x45781d(_0x3003c3._0x158298)](this[_0x45781d(0xd9)],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x44e3cd(0x10c)];class EchartsLayer extends BaseLayer{constructor(_0x5e0ec8={}){super(_0x5e0ec8),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get[_0x44e3cd(0xf0)](){return this['_pointerEvents'];}set['pointerEvents'](_0x26e55b){const _0x5335ef=_0x44e3cd;this['_pointerEvents']=_0x26e55b,this[_0x5335ef(0x102)]&&(_0x26e55b?this['_echartsContainer']['style']['pointerEvents']='all':this['_echartsContainer']['style'][_0x5335ef(0xf0)]='none');}['_setOptionsHook'](_0x48877a,_0x5b2a36){this['setEchartsOption'](_0x48877a);}['_showHook'](_0x5ece6e){const _0x59673c=_0x44e3cd;_0x5ece6e?this['_echartsContainer']['style']['visibility']='visible':this[_0x59673c(0x102)]['style']['visibility']='hidden';}['_mountedHook'](){const _0x32bff9={_0x40a895:0xec,_0x20007f:0xef},_0x3f80c5=_0x44e3cd;this['_map']['scene'][_0x3f80c5(0xfe)]=this['options'][_0x3f80c5(_0x32bff9._0x40a895)]??!![],this[_0x3f80c5(_0x32bff9._0x20007f)]['scene']['echartsAutoHeight']=this['options'][_0x3f80c5(0xe8)]??![],this[_0x3f80c5(0xef)]['scene']['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x30723c={_0x5293d7:0xd2,_0x1491e8:0xff},_0x39e076=_0x44e3cd;this[_0x39e076(0x102)]=this['_createChartOverlay'](),this[_0x39e076(0xff)]=echarts__namespace[_0x39e076(_0x30723c._0x5293d7)](this['_echartsContainer']),this[_0x39e076(_0x30723c._0x1491e8)]['_mars3d_scene']=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x21222e={_0x1aa7da:0xff,_0x3b87c1:0xf6},_0x3f9a4d=_0x44e3cd;this[_0x3f9a4d(_0x21222e._0x1aa7da)]&&(this['_echartsInstance']['clear'](),this['_echartsInstance'][_0x3f9a4d(_0x21222e._0x3b87c1)](),delete this[_0x3f9a4d(0xff)]),this['_echartsContainer']&&(this['_map'][_0x3f9a4d(0xd3)]['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x34a444={_0x38ac9e:0xdf,_0xd02b91:0xe0,_0x3b831c:0x105,_0xdae747:0x10d,_0xf655ba:0xd7,_0xb6f10:0xf1,_0x5efa94:0xdd,_0x8fca47:0xf9},_0x162f1a=_0x44e3cd,_0x16c268=mars3d__namespace['DomUtil'][_0x162f1a(_0x34a444._0x38ac9e)](_0x162f1a(_0x34a444._0xd02b91),'mars3d-echarts',this[_0x162f1a(0xef)]['container']);return _0x16c268['id']=this['id'],_0x16c268[_0x162f1a(0x105)]['position']=_0x162f1a(0x100),_0x16c268[_0x162f1a(_0x34a444._0x3b831c)][_0x162f1a(0xf4)]=_0x162f1a(_0x34a444._0xdae747),_0x16c268[_0x162f1a(0x105)][_0x162f1a(_0x34a444._0xf655ba)]=_0x162f1a(0x10d),_0x16c268['style']['width']=this['_map']['scene'][_0x162f1a(_0x34a444._0xb6f10)]['clientWidth']+'px',_0x16c268[_0x162f1a(_0x34a444._0x3b831c)]['height']=this[_0x162f1a(0xef)]['scene']['canvas']['clientHeight']+'px',_0x16c268['style']['pointerEvents']=this[_0x162f1a(_0x34a444._0x5efa94)]?'all':'none',_0x16c268['style'][_0x162f1a(_0x34a444._0x8fca47)]=this['options']['zIndex']??0x9,_0x16c268;}[_0x44e3cd(0x104)](){const _0x2bfdbb={_0x290424:0x109,_0x30ece5:0x10f,_0x4ed2d:0xf1,_0x28bfd1:0x104},_0x53a352=_0x44e3cd;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this[_0x53a352(0xef)][_0x53a352(_0x2bfdbb._0x290424)]['canvas'][_0x53a352(_0x2bfdbb._0x30ece5)]+'px',this[_0x53a352(0x102)][_0x53a352(0x105)]['height']=this['_map']['scene'][_0x53a352(_0x2bfdbb._0x4ed2d)]['clientHeight']+'px',this['_echartsInstance'][_0x53a352(_0x2bfdbb._0x28bfd1)]();}['setEchartsOption'](_0x2e521b,_0x298359,_0x44102f){const _0x1ad0bd={_0x1cfe3a:0xff,_0x544220:0xff},_0xd97cf3=_0x44e3cd;this[_0xd97cf3(_0x1ad0bd._0x1cfe3a)]&&(_0x2e521b={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x2e521b,{'onlySimpleType':!![]})},delete _0x2e521b['eventParent'],this[_0xd97cf3(_0x1ad0bd._0x544220)]['setOption'](_0x2e521b,_0x298359,_0x44102f));}['getRectangle'](_0x34efc0){const _0x482815={_0x40ffd9:0xe2},_0x586d5c={_0x1fc316:0x103};let _0x38683a,_0x3cb03b,_0x5ecda8,_0x358ad3;function _0x5d86ea(_0x4ec059){const _0x12494d=_0x4483;if(!Array['isArray'](_0x4ec059))return;const _0xeb8626=_0x4ec059[0x0]||0x0,_0xa2dd9=_0x4ec059[0x1]||0x0;_0xeb8626!==0x0&&_0xa2dd9!==0x0&&(_0x38683a===undefined?(_0x38683a=_0xeb8626,_0x3cb03b=_0xeb8626,_0x5ecda8=_0xa2dd9,_0x358ad3=_0xa2dd9):(_0x38683a=Math['min'](_0x38683a,_0xeb8626),_0x3cb03b=Math[_0x12494d(_0x586d5c._0x1fc316)](_0x3cb03b,_0xeb8626),_0x5ecda8=Math['min'](_0x5ecda8,_0xa2dd9),_0x358ad3=Math['max'](_0x358ad3,_0xa2dd9)));}const _0x4711f6=this['options']['series'];_0x4711f6&&_0x4711f6['forEach'](_0x1526b4=>{const _0x4aef21=_0x4483;_0x1526b4[_0x4aef21(_0x482815._0x40ffd9)]&&_0x1526b4[_0x4aef21(0xe2)]['forEach'](_0xe06b0b=>{if(_0xe06b0b['value'])_0x5d86ea(_0xe06b0b['value']);else _0xe06b0b['coords']&&_0xe06b0b['coords']['forEach'](_0x289b47=>{_0x5d86ea(_0x289b47);});});});if(_0x38683a===0x0&&_0x5ecda8===0x0&&_0x3cb03b===0x0&&_0x358ad3===0x0)return null;return _0x34efc0!==null&&_0x34efc0!==void 0x0&&_0x34efc0['isFormat']?{'xmin':_0x38683a,'xmax':_0x3cb03b,'ymin':_0x5ecda8,'ymax':_0x358ad3}:Cesium['Rectangle']['fromDegrees'](_0x38683a,_0x5ecda8,_0x3cb03b,_0x358ad3);}['on'](_0x2e4131,_0x419122,_0x529212){return this['_echartsInstance']['on'](_0x2e4131,_0x419122,_0x529212||this),this;}[_0x44e3cd(0xfa)](_0x4aa682,_0x363b43,_0x4011e2,_0x11e989){return this['_echartsInstance']['on'](_0x4aa682,_0x363b43,_0x4011e2,_0x11e989||this),this;}['off'](_0x4bf598,_0x295bc8,_0x2c2e42){return this['_echartsInstance']['off'](_0x4bf598,_0x295bc8,_0x2c2e42||this),this;}}mars3d__namespace['LayerUtil']['register']('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace[_0x44e3cd(0x108)]=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x4e8465){const _0x4fd009=_0x44e3cd;if(_0x4e8465!==_0x4fd009(0xed)&&!exports['hasOwnProperty'](_0x4e8465))Object['defineProperty'](exports,_0x4e8465,{'enumerable':!![],'get':function(){return echarts[_0x4e8465];}});}),Object[_0x44e3cd(0xfc)](exports,'__esModule',{'value':!![]});
}));
