/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.15
 * 编译日期：2023-12-04 17:36:02
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';function _0x5d1f(_0x3e1c3c,_0x3f2d88){const _0x532b01=_0x532b();return _0x5d1f=function(_0x5d1f39,_0x3bd1f9){_0x5d1f39=_0x5d1f39-0x1ba;let _0x93fd6f=_0x532b01[_0x5d1f39];return _0x93fd6f;},_0x5d1f(_0x3e1c3c,_0x3f2d88);}const _0x1322ef=_0x5d1f;(function(_0x59735a,_0x55a081){const _0x5d6579={_0x1db047:0x1c6},_0x23cd59=_0x5d1f,_0x43b173=_0x59735a();while(!![]){try{const _0x2588ed=parseInt(_0x23cd59(0x1c4))/0x1*(parseInt(_0x23cd59(0x1c8))/0x2)+parseInt(_0x23cd59(_0x5d6579._0x1db047))/0x3+parseInt(_0x23cd59(0x1fd))/0x4+parseInt(_0x23cd59(0x1e3))/0x5+-parseInt(_0x23cd59(0x1f7))/0x6+-parseInt(_0x23cd59(0x1f5))/0x7*(parseInt(_0x23cd59(0x1e1))/0x8)+-parseInt(_0x23cd59(0x1be))/0x9;if(_0x2588ed===_0x55a081)break;else _0x43b173['push'](_0x43b173['shift']());}catch(_0xfb429e){_0x43b173['push'](_0x43b173['shift']());}}}(_0x532b,0xefef1));function _interopNamespace(_0x5545f7){const _0x5751f7={_0x1d8df5:0x1fe},_0x50f447=_0x5d1f;if(_0x5545f7&&_0x5545f7[_0x50f447(_0x5751f7._0x1d8df5)])return _0x5545f7;var _0x5b1f6c=Object['create'](null);return _0x5545f7&&Object['keys'](_0x5545f7)['forEach'](function(_0x3e48e3){const _0x451ed7=_0x50f447;if(_0x3e48e3!=='default'){var _0x4182ba=Object['getOwnPropertyDescriptor'](_0x5545f7,_0x3e48e3);Object[_0x451ed7(0x1d5)](_0x5b1f6c,_0x3e48e3,_0x4182ba['get']?_0x4182ba:{'enumerable':!![],'get':function(){return _0x5545f7[_0x3e48e3];}});}}),_0x5b1f6c['default']=_0x5545f7,_0x5b1f6c;}function _0x532b(){const _0x5bb811=['_mapOffset','defineProperty','canvas','scene','default','moveHandler','_removedHook','eachComponent','dataToPoint','dispatchAction','LayerUtil','_pointerEvents','lng','4200vSzOJK','api','5532120BqAoaa','fixedHeight','_echartsContainer','_setOptionsHook','isArray','visibility','resize','echarts','isPointVisible','getWidth','coordinateSystem','scheduler','_addedHook','left','getAttrVal','updateLayout','_createChartOverlay','pointerEvents','1491IMSJmL','all','3012870PFcRYI','options','SCENE3D','getZr','coords','setMapOffset','6590508HweNCP','__esModule','create','min','addEventListener','setOption','26762913rDYWBM','echartsFixedHeight','forEach','Cartesian3','_mars3d_scene','clear','5HxiAUX','_mountedHook','3619260hmSjtl','camera','243970spGZqw','echartsDepthTest','getHeight','painter','_echartsInstance','div','getBMap','echartsAutoHeight','style','fromDegrees','mars3dMap','_map'];_0x532b=function(){return _0x5bb811;};return _0x532b();}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x4a83d3,_0x39b55c){const _0x49c2dd={_0x184e05:0x1c2},_0x2ba553=_0x5d1f;this[_0x2ba553(_0x49c2dd._0x184e05)]=_0x4a83d3,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x39b55c;}[_0x1322ef(0x1fc)](_0x580556){this['_mapOffset']=_0x580556;}[_0x1322ef(0x1ce)](){return this['_mars3d_scene'];}[_0x1322ef(0x1dc)](_0x30e0dd){const _0x5d89cd={_0x1a72d3:0x1d1,_0x490b97:0x1c9,_0x2f3b7b:0x1d4},_0x5bd2ac=_0x1322ef,_0x5bf043=this['_mars3d_scene'],_0x58469f=[NaN,NaN];let _0x5dc5df=_0x5bf043['echartsFixedHeight'];_0x5bf043['echartsAutoHeight']&&(_0x5dc5df=_0x5bf043['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x30e0dd[0x0],_0x30e0dd[0x1])));const _0x1e5f48=Cesium$1[_0x5bd2ac(0x1c1)][_0x5bd2ac(_0x5d89cd._0x1a72d3)](_0x30e0dd[0x0],_0x30e0dd[0x1],_0x5dc5df);if(!_0x1e5f48)return _0x58469f;const _0x3eeb9b=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x5bf043,_0x1e5f48);if(!_0x3eeb9b)return _0x58469f;if(_0x5bf043[_0x5bd2ac(_0x5d89cd._0x490b97)]&&_0x5bf043['mode']===Cesium$1['SceneMode'][_0x5bd2ac(0x1f9)]){const _0x12a1e8=new Cesium$1['EllipsoidalOccluder'](_0x5bf043['globe']['ellipsoid'],_0x5bf043[_0x5bd2ac(0x1c7)]['positionWC']),_0x1e954b=_0x12a1e8[_0x5bd2ac(0x1eb)](_0x1e5f48);if(!_0x1e954b)return _0x58469f;}return[_0x3eeb9b['x']-this[_0x5bd2ac(_0x5d89cd._0x2f3b7b)][0x0],_0x3eeb9b['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x18e625={_0x1f33f7:0x1ec,_0x1dbe39:0x1ca},_0x59e07f=_0x1322ef,_0x53be3d=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x53be3d[_0x59e07f(_0x18e625._0x1f33f7)](),_0x53be3d[_0x59e07f(_0x18e625._0x1dbe39)]());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=[_0x1322ef(0x1e0),'lat'],CompositeCoordinateSystem[_0x1322ef(0x1ba)]=function(_0x15fa30,_0x410f26){const _0x4c1de2={_0x11ac6b:0x1c2},_0x26ecb7=_0x1322ef;let _0x49651f;const _0x4180e3=_0x15fa30[_0x26ecb7(0x1ee)]['ecInstance'][_0x26ecb7(_0x4c1de2._0x11ac6b)];_0x15fa30[_0x26ecb7(0x1db)]('mars3dMap',function(_0x3bdcd7){const _0x25c506=_0x26ecb7,_0xa3a651=_0x410f26[_0x25c506(0x1fa)]()[_0x25c506(0x1cb)];if(!_0xa3a651)return;!_0x49651f&&(_0x49651f=new CompositeCoordinateSystem(_0x4180e3,_0x410f26)),_0x3bdcd7[_0x25c506(0x1ed)]=_0x49651f,_0x49651f['setMapOffset'](_0x3bdcd7['__mapOffset']||[0x0,0x0]);}),_0x15fa30['eachSeries'](function(_0x263994){_0x263994['get']('coordinateSystem')==='mars3dMap'&&(!_0x49651f&&(_0x49651f=new CompositeCoordinateSystem(_0x4180e3,_0x410f26)),_0x263994['coordinateSystem']=_0x49651f);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x1322ef(0x1f2)},function(_0x58557b,_0x3191e1){}),echarts__namespace['extendComponentModel']({'type':_0x1322ef(0x1d2),'getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x1556bf,_0x530123){const _0x769857={_0x18df8a:0x1ee,_0xc0a8e8:0x1d9},_0x1a4d45=_0x1322ef;this['api']=_0x530123,this['scene']=_0x1556bf[_0x1a4d45(_0x769857._0x18df8a)]['ecInstance']['_mars3d_scene'],this['scene']['postRender'][_0x1a4d45(0x1bc)](this[_0x1a4d45(_0x769857._0xc0a8e8)],this);},'moveHandler':function(_0x2eb6d6,_0x2cbc0b){const _0x2006be=_0x1322ef;this[_0x2006be(0x1e2)][_0x2006be(0x1dd)]({'type':'mars3dMapRoam'});},'render':function(_0x12829e,_0x23d095,_0x7f612c){},'dispose':function(_0x3fde13){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x4a966d={}){const _0x1ced89={_0x530639:0x1f8},_0x54ddef=_0x1322ef;super(_0x4a966d),this['_pointerEvents']=this[_0x54ddef(_0x1ced89._0x530639)]['pointerEvents'];}get['layer'](){const _0x3f5372=_0x1322ef;return this[_0x3f5372(0x1cc)];}get[_0x1322ef(0x1f4)](){return this['_pointerEvents'];}set['pointerEvents'](_0x2ca75c){const _0x23d046={_0x5dc0dc:0x1d0,_0x3390e0:0x1f4},_0x15b209=_0x1322ef;this['_pointerEvents']=_0x2ca75c,this['_echartsContainer']&&(_0x2ca75c?this['_echartsContainer'][_0x15b209(_0x23d046._0x5dc0dc)]['pointerEvents']='all':this[_0x15b209(0x1e5)]['style'][_0x15b209(_0x23d046._0x3390e0)]='none');}[_0x1322ef(0x1e6)](_0x59f6d0,_0x3ddc75){this['setEchartsOption'](_0x59f6d0);}['_showHook'](_0x3470f9){const _0x4457b0={_0x4d1bb0:0x1e8},_0x2a3131=_0x1322ef;_0x3470f9?this['_echartsContainer']['style'][_0x2a3131(_0x4457b0._0x4d1bb0)]='visible':this['_echartsContainer'][_0x2a3131(0x1d0)]['visibility']='hidden';}[_0x1322ef(0x1c5)](){const _0x4697d7={_0x4de192:0x1d3,_0xe1a748:0x1cf,_0x2c24e1:0x1bf},_0x614c9c=_0x1322ef;this[_0x614c9c(_0x4697d7._0x4de192)]['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this['_map']['scene'][_0x614c9c(_0x4697d7._0xe1a748)]=this[_0x614c9c(0x1f8)]['clampToGround']??![],this['_map']['scene'][_0x614c9c(_0x4697d7._0x2c24e1)]=this['options'][_0x614c9c(0x1e4)]??0x0;}[_0x1322ef(0x1ef)](){const _0x345b09={_0x578845:0x1e5,_0x41fcbe:0x1d3},_0x4cd19b=_0x1322ef;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this[_0x4cd19b(_0x345b09._0x578845)]),this['_echartsInstance']['_mars3d_scene']=this[_0x4cd19b(_0x345b09._0x41fcbe)]['scene'],this['setEchartsOption'](this[_0x4cd19b(0x1f8)]);}[_0x1322ef(0x1da)](){const _0x2ad641={_0x2917da:0x1c3,_0x558187:0x1e5},_0x582441=_0x1322ef;this['_echartsInstance']&&(this['_echartsInstance'][_0x582441(_0x2ad641._0x2917da)](),this['_echartsInstance']['dispose'](),delete this[_0x582441(0x1cc)]),this[_0x582441(_0x2ad641._0x558187)]&&(this['_map']['container']['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}[_0x1322ef(0x1f3)](){const _0x4e0820={_0x23d07e:0x1cd,_0x124dc0:0x1d3},_0x4edbc0=_0x1322ef,_0x575f72=mars3d__namespace['DomUtil']['create'](_0x4edbc0(_0x4e0820._0x23d07e),'mars3d-echarts',this['_map']['container']);return _0x575f72['id']=this['id'],_0x575f72['style']['position']='absolute',_0x575f72['style']['top']='0px',_0x575f72['style'][_0x4edbc0(0x1f0)]='0px',_0x575f72['style']['width']=this[_0x4edbc0(_0x4e0820._0x124dc0)][_0x4edbc0(0x1d7)]['canvas']['clientWidth']+'px',_0x575f72['style']['height']=this[_0x4edbc0(0x1d3)]['scene']['canvas']['clientHeight']+'px',_0x575f72['style']['pointerEvents']=this[_0x4edbc0(0x1df)]?_0x4edbc0(0x1f6):'none',_0x575f72[_0x4edbc0(0x1d0)]['zIndex']=this['options']['zIndex']??0x9,_0x575f72;}[_0x1322ef(0x1e9)](){const _0x5c34bf={_0x1a0637:0x1d7},_0x328743=_0x1322ef;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map']['scene'][_0x328743(0x1d6)]['clientWidth']+'px',this['_echartsContainer']['style']['height']=this[_0x328743(0x1d3)][_0x328743(_0x5c34bf._0x1a0637)]['canvas']['clientHeight']+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0xf90ca7,_0xbd64f2,_0x1a340b){const _0x31f56f={_0x2ef4a0:0x1f1},_0x2218ed=_0x1322ef;this['_echartsInstance']&&(_0xf90ca7={'mars3dMap':{},...mars3d__namespace['Util'][_0x2218ed(_0x31f56f._0x2ef4a0)](_0xf90ca7,{'onlySimpleType':!![]})},delete _0xf90ca7['eventParent'],this['_echartsInstance'][_0x2218ed(0x1bd)](_0xf90ca7,_0xbd64f2,_0x1a340b));}['getRectangle'](_0x57dcca){const _0x3b55a5={_0x5e8efe:0x1e7,_0x51be09:0x1bb},_0x4e6dc8=_0x1322ef;let _0x25e636,_0x5de09,_0x26ff6e,_0x335a07;function _0x3505a8(_0x5a0a6c){const _0x485e53=_0x5d1f;if(!Array[_0x485e53(_0x3b55a5._0x5e8efe)](_0x5a0a6c))return;const _0x1bb7a9=_0x5a0a6c[0x0]||0x0,_0x593bc2=_0x5a0a6c[0x1]||0x0;_0x1bb7a9!==0x0&&_0x593bc2!==0x0&&(_0x25e636===undefined?(_0x25e636=_0x1bb7a9,_0x5de09=_0x1bb7a9,_0x26ff6e=_0x593bc2,_0x335a07=_0x593bc2):(_0x25e636=Math[_0x485e53(_0x3b55a5._0x51be09)](_0x25e636,_0x1bb7a9),_0x5de09=Math['max'](_0x5de09,_0x1bb7a9),_0x26ff6e=Math['min'](_0x26ff6e,_0x593bc2),_0x335a07=Math['max'](_0x335a07,_0x593bc2)));}const _0x14e592=this['options']['series'];_0x14e592&&_0x14e592['forEach'](_0x1897b2=>{const _0x2a16ec=_0x5d1f;_0x1897b2['data']&&_0x1897b2['data'][_0x2a16ec(0x1c0)](_0x4062fb=>{const _0x39ee57=_0x2a16ec;if(_0x4062fb['value'])_0x3505a8(_0x4062fb['value']);else _0x4062fb[_0x39ee57(0x1fb)]&&_0x4062fb[_0x39ee57(0x1fb)]['forEach'](_0x1633ca=>{_0x3505a8(_0x1633ca);});});});if(_0x25e636===0x0&&_0x26ff6e===0x0&&_0x5de09===0x0&&_0x335a07===0x0)return null;return _0x57dcca!==null&&_0x57dcca!==void 0x0&&_0x57dcca['isFormat']?{'xmin':_0x25e636,'xmax':_0x5de09,'ymin':_0x26ff6e,'ymax':_0x335a07}:Cesium['Rectangle'][_0x4e6dc8(0x1d1)](_0x25e636,_0x26ff6e,_0x5de09,_0x335a07);}['on'](_0x1056e9,_0x23a566,_0x41c1ee){return this['_echartsInstance']['on'](_0x1056e9,_0x23a566,_0x41c1ee||this),this;}['onByQuery'](_0xf179c5,_0x3c7d13,_0x4837d8,_0x16b0d7){return this['_echartsInstance']['on'](_0xf179c5,_0x3c7d13,_0x4837d8,_0x16b0d7||this),this;}['off'](_0x2cd8b8,_0x3a1f9d,_0x27fb9f){return this['_echartsInstance']['off'](_0x2cd8b8,_0x3a1f9d,_0x27fb9f||this),this;}}mars3d__namespace[_0x1322ef(0x1de)]['register']('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace[_0x1322ef(0x1ea)]=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x1322ef(0x1c0)](function(_0x1f49dc){const _0x50a447={_0x2e6eae:0x1d8},_0x29358d=_0x1322ef;if(_0x1f49dc!==_0x29358d(_0x50a447._0x2e6eae)&&!exports['hasOwnProperty'](_0x1f49dc))Object['defineProperty'](exports,_0x1f49dc,{'enumerable':!![],'get':function(){return echarts[_0x1f49dc];}});}),Object[_0x1322ef(0x1d5)](exports,'__esModule',{'value':!![]});
}));
