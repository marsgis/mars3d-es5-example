/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.13
 * 编译日期：2023-11-20 21:13:43
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x38b622=_0x7f09;(function(_0x4717e2,_0x122381){const _0x248077={_0x4ac7da:0x117,_0x3dc9ce:0x12d,_0x337a4a:0x133,_0x1f32aa:0x119,_0x185209:0x141,_0x47d04f:0x121,_0x1b54a6:0x145},_0x29a977=_0x7f09,_0x201c32=_0x4717e2();while(!![]){try{const _0x41d69d=parseInt(_0x29a977(_0x248077._0x4ac7da))/0x1+parseInt(_0x29a977(_0x248077._0x3dc9ce))/0x2*(-parseInt(_0x29a977(_0x248077._0x337a4a))/0x3)+parseInt(_0x29a977(_0x248077._0x1f32aa))/0x4+parseInt(_0x29a977(_0x248077._0x185209))/0x5+parseInt(_0x29a977(0x125))/0x6*(-parseInt(_0x29a977(0x138))/0x7)+parseInt(_0x29a977(_0x248077._0x47d04f))/0x8+-parseInt(_0x29a977(_0x248077._0x1b54a6))/0x9;if(_0x41d69d===_0x122381)break;else _0x201c32['push'](_0x201c32['shift']());}catch(_0x46cd53){_0x201c32['push'](_0x201c32['shift']());}}}(_0x5992,0xadfb5));function _0x5992(){const _0x149b7e=['register','5233680zWeheN','_mars3d_scene','mars3dMap','pointerEvents','__mapOffset','api','coordinateSystem','EchartsLayer','4508096aAgvHL','create','forEach','height','1446akrxFl','_mapOffset','SceneTransforms','none','getHeight','scene','init','SCENE3D','2762ulUCxV','getBMap','_pointerEvents','addEventListener','_echartsContainer','defineProperty','741gFEQhy','clear','style','options','Cartesian3','30548hMyiof','off','top','zIndex','0px','clientHeight','default','resize','postRender','1311570JgjgCp','lat','layer','_map','4178646wYftQJ','_echartsInstance','LayerUtil','dimensions','registerAction','canvas','max','SceneMode','435508WbGakB'];_0x5992=function(){return _0x149b7e;};return _0x5992();}function _interopNamespace(_0x503381){const _0x4fc6c8={_0x4223d1:0x13e,_0x5c9399:0x132},_0x1d5f8d=_0x7f09;if(_0x503381&&_0x503381['__esModule'])return _0x503381;var _0x28f10b=Object[_0x1d5f8d(0x122)](null);return _0x503381&&Object['keys'](_0x503381)['forEach'](function(_0x100e6d){const _0x2e3e52=_0x1d5f8d;if(_0x100e6d!==_0x2e3e52(_0x4fc6c8._0x4223d1)){var _0x5c555e=Object['getOwnPropertyDescriptor'](_0x503381,_0x100e6d);Object[_0x2e3e52(_0x4fc6c8._0x5c9399)](_0x28f10b,_0x100e6d,_0x5c555e['get']?_0x5c555e:{'enumerable':!![],'get':function(){return _0x503381[_0x100e6d];}});}}),_0x28f10b['default']=_0x503381,_0x28f10b;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];function _0x7f09(_0x146dd6,_0x4e4ecf){const _0x599204=_0x5992();return _0x7f09=function(_0x7f0965,_0x411387){_0x7f0965=_0x7f0965-0x111;let _0x1816a5=_0x599204[_0x7f0965];return _0x1816a5;},_0x7f09(_0x146dd6,_0x4e4ecf);}class CompositeCoordinateSystem{constructor(_0x1cbe00,_0x470926){const _0x27497f={_0x5ab371:0x11a,_0x28fab9:0x112},_0x4a4dbd=_0x7f09;this[_0x4a4dbd(_0x27497f._0x5ab371)]=_0x1cbe00,this[_0x4a4dbd(_0x27497f._0x28fab9)]=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x470926;}['setMapOffset'](_0x1024d3){const _0x108657=_0x7f09;this[_0x108657(0x126)]=_0x1024d3;}[_0x38b622(0x12e)](){return this['_mars3d_scene'];}['dataToPoint'](_0x145a78){const _0x309b5f={_0x2ce029:0x137,_0x460547:0x12c},_0x234d4e=_0x38b622,_0x3f2f19=this['_mars3d_scene'],_0x268134=[NaN,NaN];let _0x472dfa=_0x3f2f19['echartsFixedHeight'];_0x3f2f19['echartsAutoHeight']&&(_0x472dfa=_0x3f2f19['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x145a78[0x0],_0x145a78[0x1])));const _0x49d83e=Cesium$1[_0x234d4e(_0x309b5f._0x2ce029)]['fromDegrees'](_0x145a78[0x0],_0x145a78[0x1],_0x472dfa);if(!_0x49d83e)return _0x268134;const _0x533ff8=Cesium$1[_0x234d4e(0x127)]['wgs84ToWindowCoordinates'](_0x3f2f19,_0x49d83e);if(!_0x533ff8)return _0x268134;if(_0x3f2f19['echartsDepthTest']&&_0x3f2f19['mode']===Cesium$1[_0x234d4e(0x116)][_0x234d4e(_0x309b5f._0x460547)]){const _0x13c067=new Cesium$1['EllipsoidalOccluder'](_0x3f2f19['globe']['ellipsoid'],_0x3f2f19['camera']['positionWC']),_0xbe678d=_0x13c067['isPointVisible'](_0x49d83e);if(!_0xbe678d)return _0x268134;}return[_0x533ff8['x']-this['_mapOffset'][0x0],_0x533ff8['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x3c16cd={_0x40dfe4:0x129},_0x7493ee=_0x38b622,_0x22ba57=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x22ba57['getWidth'](),_0x22ba57[_0x7493ee(_0x3c16cd._0x40dfe4)]());}['getRoamTransform'](){const _0x4fc58e=_0x38b622;return echarts__namespace['matrix'][_0x4fc58e(0x122)]();}}CompositeCoordinateSystem['dimensions']=['lng',_0x38b622(0x142)],CompositeCoordinateSystem['create']=function(_0x20dd1a,_0x14f232){const _0x453902={_0x1e1cc5:0x11f,_0x14cfc2:0x11b};let _0x47aa89;const _0x2c4771=_0x20dd1a['scheduler']['ecInstance']['_mars3d_scene'];_0x20dd1a['eachComponent']('mars3dMap',function(_0x2c0282){const _0x42387c=_0x7f09,_0x4f35f6=_0x14f232['getZr']()['painter'];if(!_0x4f35f6)return;!_0x47aa89&&(_0x47aa89=new CompositeCoordinateSystem(_0x2c4771,_0x14f232)),_0x2c0282['coordinateSystem']=_0x47aa89,_0x47aa89['setMapOffset'](_0x2c0282[_0x42387c(0x11d)]||[0x0,0x0]);}),_0x20dd1a['eachSeries'](function(_0x26db07){const _0x303846=_0x7f09;_0x26db07['get'](_0x303846(_0x453902._0x1e1cc5))===_0x303846(_0x453902._0x14cfc2)&&(!_0x47aa89&&(_0x47aa89=new CompositeCoordinateSystem(_0x2c4771,_0x14f232)),_0x26db07[_0x303846(_0x453902._0x1e1cc5)]=_0x47aa89);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace[_0x38b622(0x12b)])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x38b622(0x113)]({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0x55e5a9,_0x32e07c){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){const _0x428c92={_0x502933:0x11a},_0xa7d01=_0x38b622;return this[_0xa7d01(_0x428c92._0x502933)];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x3e4d67,_0x835d6a){const _0x4ada64={_0xfaca5a:0x11e},_0x12eef6=_0x38b622;this[_0x12eef6(_0x4ada64._0xfaca5a)]=_0x835d6a,this[_0x12eef6(0x12a)]=_0x3e4d67['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender'][_0x12eef6(0x130)](this['moveHandler'],this);},'moveHandler':function(_0x30a348,_0x5e59f1){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0xcf31c1,_0x5614ce,_0x4f1866){},'dispose':function(_0x4bbab7){const _0x327316=_0x38b622;this['scene'][_0x327316(0x140)]['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x3fc8bd={}){const _0x543627={_0xe1c646:0x136},_0x2fc5c0=_0x38b622;super(_0x3fc8bd),this['_pointerEvents']=this[_0x2fc5c0(_0x543627._0xe1c646)]['pointerEvents'];}get['layer'](){const _0x131473=_0x38b622;return this[_0x131473(0x146)];}get[_0x38b622(0x11c)](){return this['_pointerEvents'];}set['pointerEvents'](_0x5d5973){const _0x5ea8ab={_0x3a5b8c:0x131,_0xdbd583:0x11c},_0xae8b7=_0x38b622;this[_0xae8b7(0x12f)]=_0x5d5973,this[_0xae8b7(_0x5ea8ab._0x3a5b8c)]&&(_0x5d5973?this['_echartsContainer']['style']['pointerEvents']='all':this['_echartsContainer']['style'][_0xae8b7(_0x5ea8ab._0xdbd583)]='none');}['_setOptionsHook'](_0x330dfb,_0x3bc545){this['setEchartsOption'](_0x330dfb);}['_showHook'](_0x387bf4){_0x387bf4?this['_echartsContainer']['style']['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x18f286={_0x4d2103:0x136},_0x350a51=_0x38b622;this['_map'][_0x350a51(0x12a)]['echartsDepthTest']=this['options']['depthTest']??!![],this[_0x350a51(0x144)]['scene']['echartsAutoHeight']=this[_0x350a51(_0x18f286._0x4d2103)]['clampToGround']??![],this[_0x350a51(0x144)]['scene']['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x4d160d={_0x2f52cf:0x136},_0x3077c1=_0x38b622;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance'][_0x3077c1(0x11a)]=this['_map']['scene'],this['setEchartsOption'](this[_0x3077c1(_0x4d160d._0x2f52cf)]);}['_removedHook'](){const _0x2661af={_0x25a45c:0x146,_0xeea84:0x134,_0x4f2943:0x146,_0x43deb7:0x131,_0x21f0ef:0x144},_0x34dacf=_0x38b622;this[_0x34dacf(0x146)]&&(this[_0x34dacf(_0x2661af._0x25a45c)][_0x34dacf(_0x2661af._0xeea84)](),this[_0x34dacf(_0x2661af._0x4f2943)]['dispose'](),delete this['_echartsInstance']),this[_0x34dacf(_0x2661af._0x43deb7)]&&(this[_0x34dacf(_0x2661af._0x21f0ef)]['container']['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x5ad905={_0x34b3f6:0x13c,_0x5d909d:0x135,_0x358120:0x11c,_0x507e46:0x136,_0x446f2c:0x13b},_0x5a655f=_0x38b622,_0x53a8b1=mars3d__namespace['DomUtil'][_0x5a655f(0x122)]('div','mars3d-echarts',this['_map']['container']);return _0x53a8b1['id']=this['id'],_0x53a8b1['style']['position']='absolute',_0x53a8b1['style'][_0x5a655f(0x13a)]=_0x5a655f(_0x5ad905._0x34b3f6),_0x53a8b1['style']['left']='0px',_0x53a8b1['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',_0x53a8b1['style'][_0x5a655f(0x124)]=this['_map']['scene']['canvas']['clientHeight']+'px',_0x53a8b1[_0x5a655f(_0x5ad905._0x5d909d)][_0x5a655f(_0x5ad905._0x358120)]=this['_pointerEvents']?'all':_0x5a655f(0x128),_0x53a8b1['style'][_0x5a655f(0x13b)]=this[_0x5a655f(_0x5ad905._0x507e46)][_0x5a655f(_0x5ad905._0x446f2c)]??0x9,_0x53a8b1;}[_0x38b622(0x13f)](){const _0x248a9e={_0x4431fc:0x13d},_0x498472=_0x38b622;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this['_echartsContainer'][_0x498472(0x135)]['height']=this[_0x498472(0x144)]['scene'][_0x498472(0x114)][_0x498472(_0x248a9e._0x4431fc)]+'px',this[_0x498472(0x146)]['resize']();}['setEchartsOption'](_0x3a8040,_0x2bc7f3,_0x2f075f){this['_echartsInstance']&&(_0x3a8040={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x3a8040,{'onlySimpleType':!![]})},delete _0x3a8040['eventParent'],this['_echartsInstance']['setOption'](_0x3a8040,_0x2bc7f3,_0x2f075f));}['getRectangle'](_0x43b7d6){let _0x11430d,_0x4edb2a,_0x43b92d,_0x5777f2;function _0x42194d(_0x22f27c){const _0x401b5e=_0x7f09;if(!Array['isArray'](_0x22f27c))return;const _0x38a736=_0x22f27c[0x0]||0x0,_0xb078ac=_0x22f27c[0x1]||0x0;_0x38a736!==0x0&&_0xb078ac!==0x0&&(_0x11430d===undefined?(_0x11430d=_0x38a736,_0x4edb2a=_0x38a736,_0x43b92d=_0xb078ac,_0x5777f2=_0xb078ac):(_0x11430d=Math['min'](_0x11430d,_0x38a736),_0x4edb2a=Math['max'](_0x4edb2a,_0x38a736),_0x43b92d=Math['min'](_0x43b92d,_0xb078ac),_0x5777f2=Math[_0x401b5e(0x115)](_0x5777f2,_0xb078ac)));}const _0x35c80e=this['options']['series'];_0x35c80e&&_0x35c80e['forEach'](_0x1777d0=>{const _0x32fd15={_0x5ab680:0x123};_0x1777d0['data']&&_0x1777d0['data']['forEach'](_0x2253d8=>{const _0x297a44=_0x7f09;if(_0x2253d8['value'])_0x42194d(_0x2253d8['value']);else _0x2253d8['coords']&&_0x2253d8['coords'][_0x297a44(_0x32fd15._0x5ab680)](_0x235c44=>{_0x42194d(_0x235c44);});});});if(_0x11430d===0x0&&_0x43b92d===0x0&&_0x4edb2a===0x0&&_0x5777f2===0x0)return null;return _0x43b7d6!==null&&_0x43b7d6!==void 0x0&&_0x43b7d6['isFormat']?{'xmin':_0x11430d,'xmax':_0x4edb2a,'ymin':_0x43b92d,'ymax':_0x5777f2}:Cesium['Rectangle']['fromDegrees'](_0x11430d,_0x43b92d,_0x4edb2a,_0x5777f2);}['on'](_0x2b9010,_0x8820ee,_0x17106e){return this['_echartsInstance']['on'](_0x2b9010,_0x8820ee,_0x17106e||this),this;}['onByQuery'](_0xb9358c,_0x392faf,_0x295c05,_0x521d02){const _0x476dc9=_0x38b622;return this[_0x476dc9(0x146)]['on'](_0xb9358c,_0x392faf,_0x295c05,_0x521d02||this),this;}['off'](_0x4824e6,_0x4e488c,_0x5f1897){const _0x5cfdff={_0x31c737:0x139},_0x391c96=_0x38b622;return this['_echartsInstance'][_0x391c96(_0x5cfdff._0x31c737)](_0x4824e6,_0x4e488c,_0x5f1897||this),this;}}mars3d__namespace[_0x38b622(0x111)][_0x38b622(0x118)]('echarts',EchartsLayer),mars3d__namespace[_0x38b622(0x143)][_0x38b622(0x120)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x50ff12){const _0x464180={_0x2afd1e:0x132},_0x52eb9c=_0x38b622;if(_0x50ff12!==_0x52eb9c(0x13e)&&!exports['hasOwnProperty'](_0x50ff12))Object[_0x52eb9c(_0x464180._0x2afd1e)](exports,_0x50ff12,{'enumerable':!![],'get':function(){return echarts[_0x50ff12];}});}),Object[_0x38b622(0x132)](exports,'__esModule',{'value':!![]});
}));
