/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.12
 * 编译日期：2024-05-03 15:00:45
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x54b4bb=_0x2b64;(function(_0x136135,_0x5335b3){const _0x1e9478={_0x4a28cf:0x15e,_0x24b519:0x166,_0x3fbba9:0x136,_0x1771eb:0x171},_0x5493b1=_0x2b64,_0x5c055e=_0x136135();while(!![]){try{const _0x18c753=parseInt(_0x5493b1(_0x1e9478._0x4a28cf))/0x1*(-parseInt(_0x5493b1(0x13f))/0x2)+parseInt(_0x5493b1(_0x1e9478._0x24b519))/0x3+-parseInt(_0x5493b1(0x14d))/0x4+parseInt(_0x5493b1(_0x1e9478._0x3fbba9))/0x5+parseInt(_0x5493b1(0x170))/0x6*(parseInt(_0x5493b1(0x174))/0x7)+-parseInt(_0x5493b1(_0x1e9478._0x1771eb))/0x8+-parseInt(_0x5493b1(0x145))/0x9;if(_0x18c753===_0x5335b3)break;else _0x5c055e['push'](_0x5c055e['shift']());}catch(_0x50d1e4){_0x5c055e['push'](_0x5c055e['shift']());}}}(_0x134e,0xdc7f4));function _0x2b64(_0x41358f,_0x7b9a29){const _0x134e9a=_0x134e();return _0x2b64=function(_0x2b6440,_0x585149){_0x2b6440=_0x2b6440-0x135;let _0x36ad72=_0x134e9a[_0x2b6440];if(_0x2b64['QshYNx']===undefined){var _0x4074ee=function(_0x54fa11){const _0x49768a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x26f203='',_0x1cc5b2='';for(let _0x36c724=0x0,_0x3666d1,_0x5e02a8,_0x4241ba=0x0;_0x5e02a8=_0x54fa11['charAt'](_0x4241ba++);~_0x5e02a8&&(_0x3666d1=_0x36c724%0x4?_0x3666d1*0x40+_0x5e02a8:_0x5e02a8,_0x36c724++%0x4)?_0x26f203+=String['fromCharCode'](0xff&_0x3666d1>>(-0x2*_0x36c724&0x6)):0x0){_0x5e02a8=_0x49768a['indexOf'](_0x5e02a8);}for(let _0x20c325=0x0,_0x26de44=_0x26f203['length'];_0x20c325<_0x26de44;_0x20c325++){_0x1cc5b2+='%'+('00'+_0x26f203['charCodeAt'](_0x20c325)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1cc5b2);};_0x2b64['LWQvqd']=_0x4074ee,_0x41358f=arguments,_0x2b64['QshYNx']=!![];}const _0x783313=_0x134e9a[0x0],_0x3b9b46=_0x2b6440+_0x783313,_0xa22e19=_0x41358f[_0x3b9b46];return!_0xa22e19?(_0x36ad72=_0x2b64['LWQvqd'](_0x36ad72),_0x41358f[_0x3b9b46]=_0x36ad72):_0x36ad72=_0xa22e19,_0x36ad72;},_0x2b64(_0x41358f,_0x7b9a29);}function _interopNamespace(_0x54fa11){const _0x14d9de={_0x389523:0x13d};if(_0x54fa11&&_0x54fa11['__esModule'])return _0x54fa11;var _0x49768a=Object['create'](null);return _0x54fa11&&Object['keys'](_0x54fa11)['forEach'](function(_0x26f203){const _0x2507aa=_0x2b64;if(_0x26f203!==_0x2507aa(_0x14d9de._0x389523)){var _0x1cc5b2=Object['getOwnPropertyDescriptor'](_0x54fa11,_0x26f203);Object['defineProperty'](_0x49768a,_0x26f203,_0x1cc5b2['get']?_0x1cc5b2:{'enumerable':!![],'get':function(){return _0x54fa11[_0x26f203];}});}}),_0x49768a['default']=_0x54fa11,_0x49768a;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);function _0x134e(){const _0x5830e9=['CMvZAxPL','x21HCNmZzf9Zy2vUzq','mty5ntq2nhbOrLbfDa','BwfYCZnKlwvJAgfYDhm','x2fKzgvKsg9VAW','yxbP','C3r5Bgu','y29VCMrPBMf0zvn5C3rLBq','DMfSDwu','Bw92zuHHBMrSzxi','x2vJAgfYDhndB250ywLUzxi','Bg5N','C2nLBMu','y2XPzw50sgvPz2H0','x21VDw50zwriB29R','qM91BMrPBMDszwn0','x21HCa','zwnOyxj0C0f1Dg9izwLNAhq','y2XPzw50v2LKDgG','m0D0ugLtuq','BwLU','zxzLBNrqyxjLBNq','x2vJAgfYDhnjBNn0yw5Jzq','BwfYCZnKtwfWuM9HBq','x3nLDe9WDgLVBNniB29R','DMLZAwjSzq','rwnOyxj0C0XHEwvY','ntaZmtCWmNzuqwzeEq','D2DZodruB1DPBMrVD0nVB3jKAw5HDgvZ','CMvTB3zLrxzLBNrmAxn0zw5LCG','x3bVAw50zxjfDMvUDhm','y3jLyxrL','zNjVBurLz3jLzxm','zgLTzw5ZAw9UCW','D2LKDgG','x19TyxbpzMzZzxq','zgL2','nJb2t1bNBeS','nJG0nJa1nKXlA21zuW','C2nOzwr1BgvY','B2zM','otiXnJm0EuvYzwnx','AxngB3jTyxq','EKLUzgv4','y2XLyxi','mJmXmZeWmfz6t2nyra','C2v0twfWt2zMC2v0','B3b0Aw9UCW','x21HCe9MzNnLDa','zgvMAw5LuhjVCgvYDhK','y29VCMrZ','uMvJDgfUz2XL','zgvMyxvSDa','C2v0t3b0Aw9U','ntKYodC0BvrdBxfq','Bgf0','zM9YrwfJAa','zgLZCg9Zzq','u2nLBMvuCMfUC2zVCM1Z','zxH0zw5Kq29TCg9Uzw50tw9KzwW','mZq1otq1nKDSwKLKzW','y2fUDMfZ','BM9Uzq','AxnbCNjHEq','CgfPBNrLCG','CMvNAxn0zxi'];_0x134e=function(){return _0x5830e9;};return _0x134e();}const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x36c724,_0x3666d1){const _0x4eff86={_0x4f3bca:0x14c,_0x43812c:0x156,_0x3310dd:0x139},_0x3644e6=_0x2b64;this[_0x3644e6(_0x4eff86._0x4f3bca)]=_0x36c724,this[_0x3644e6(0x16c)]=[_0x3644e6(_0x4eff86._0x43812c),_0x3644e6(0x140)],this[_0x3644e6(_0x4eff86._0x3310dd)]=[0x0,0x0],this['_api']=_0x3666d1;}[_0x54b4bb(0x137)](_0x5e02a8){this['_mapOffset']=_0x5e02a8;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x4241ba){const _0x1d9aba={_0x2fe958:0x14c},_0xab649=_0x54b4bb,_0x20c325=this[_0xab649(_0x1d9aba._0x2fe958)],_0x26de44=[NaN,NaN];let _0x17ce5a=_0x20c325['echartsFixedHeight'];_0x20c325[_0xab649(0x15c)]&&(_0x17ce5a=_0x20c325['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x4241ba[0x0],_0x4241ba[0x1])));const _0xa84ea7=Cesium$1['Cartesian3'][_0xab649(0x16b)](_0x4241ba[0x0],_0x4241ba[0x1],_0x17ce5a);if(!_0xa84ea7)return _0x26de44;const _0x9b4e56=Cesium$1[_0xab649(0x143)][_0xab649(0x167)](_0x20c325,_0xa84ea7);if(!_0x9b4e56)return _0x26de44;if(_0x20c325['echartsDepthTest']&&_0x20c325['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x320ad3=new Cesium$1['EllipsoidalOccluder'](_0x20c325['globe']['ellipsoid'],_0x20c325['camera']['positionWC']),_0x25acbb=_0x320ad3['isPointVisible'](_0xa84ea7);if(!_0x25acbb)return _0x26de44;}return[_0x9b4e56['x']-this['_mapOffset'][0x0],_0x9b4e56['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x4a739c=_0x54b4bb,_0xdf4b13=this['_api'];return new echarts__namespace['graphic'][(_0x4a739c(0x15a))](0x0,0x0,_0xdf4b13['getWidth'](),_0xdf4b13['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=[_0x54b4bb(0x156),_0x54b4bb(0x140)],CompositeCoordinateSystem[_0x54b4bb(0x16a)]=function(_0x159d4b,_0x598cf6){const _0x2c5705={_0xc92d74:0x172},_0x42248b={_0x28dd86:0x16e},_0x52cd30=_0x54b4bb;let _0x5930d0;const _0x3ac55a=_0x159d4b[_0x52cd30(_0x2c5705._0xc92d74)]['ecInstance']['_mars3d_scene'];_0x159d4b['eachComponent']('mars3dMap',function(_0x399bf8){const _0x13ea03=_0x52cd30,_0x2e5dd1=_0x598cf6['getZr']()[_0x13ea03(0x149)];if(!_0x2e5dd1)return;!_0x5930d0&&(_0x5930d0=new CompositeCoordinateSystem(_0x3ac55a,_0x598cf6)),_0x399bf8['coordinateSystem']=_0x5930d0,_0x5930d0['setMapOffset'](_0x399bf8[_0x13ea03(_0x42248b._0x28dd86)]||[0x0,0x0]);}),_0x159d4b['eachSeries'](function(_0x1de9d2){const _0x36f39b=_0x52cd30;_0x1de9d2['get'](_0x36f39b(0x152))==='mars3dMap'&&(!_0x5930d0&&(_0x5930d0=new CompositeCoordinateSystem(_0x3ac55a,_0x598cf6)),_0x1de9d2['coordinateSystem']=_0x5930d0);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':_0x54b4bb(0x162),'update':'updateLayout'},function(_0x1402df,_0x3d4d5f){}),echarts__namespace[_0x54b4bb(0x144)]({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x4a0379,_0x365aa4){const _0x364a03={_0x154477:0x150,_0x1f0924:0x157},_0x4c64d0=_0x54b4bb;this[_0x4c64d0(_0x364a03._0x154477)]=_0x365aa4,this['scene']=_0x4a0379['scheduler']['ecInstance']['_mars3d_scene'],this[_0x4c64d0(_0x364a03._0x1f0924)]['postRender']['addEventListener'](this[_0x4c64d0(0x154)],this);},'moveHandler':function(_0x119a1c,_0x54aea5){const _0x6d48b9={_0x342ff4:0x150},_0x4f598d=_0x54b4bb;this[_0x4f598d(_0x6d48b9._0x342ff4)]['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x4d3f82,_0x10b501,_0x32aac0){},'dispose':function(_0x1e3e91){const _0x245c7f={_0x2c86bf:0x157,_0xfea0ce:0x154},_0x1ecd1d=_0x54b4bb;this[_0x1ecd1d(_0x245c7f._0x2c86bf)]['postRender'][_0x1ecd1d(0x168)](this[_0x1ecd1d(_0x245c7f._0xfea0ce)],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x9c21b6={}){const _0xaf58e8=_0x54b4bb;super(_0x9c21b6),this[_0xaf58e8(0x169)]=this[_0xaf58e8(0x138)]['pointerEvents'];}get['layer'](){const _0x4c57a1=_0x54b4bb;return this[_0x4c57a1(0x161)];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x276388){const _0x5e723a={_0x3872cf:0x169,_0x38c312:0x147},_0x5589be=_0x54b4bb;this[_0x5589be(_0x5e723a._0x3872cf)]=_0x276388,this['_echartsContainer']&&(_0x276388?this['_echartsContainer'][_0x5589be(0x151)]['pointerEvents']='all':this['_echartsContainer']['style']['pointerEvents']=_0x5589be(_0x5e723a._0x38c312));}[_0x54b4bb(0x163)](_0x1c0d02,_0x12b191){this['setEchartsOption'](_0x1c0d02);}['_showHook'](_0x407739){const _0x12b05b={_0x446e5d:0x164},_0x155d65=_0x54b4bb;_0x407739?this['_echartsContainer']['style']['visibility']=_0x155d65(_0x12b05b._0x446e5d):this['_echartsContainer']['style']['visibility']='hidden';}[_0x54b4bb(0x159)](){const _0x188828=_0x54b4bb;this[_0x188828(0x15b)]['scene']['echartsDepthTest']=this[_0x188828(0x138)]['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x188828(0x157)]['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}[_0x54b4bb(0x14f)](){this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x48cf93={_0xa3d9f1:0x142},_0x2b32d0=_0x54b4bb;this['_echartsInstance']&&(this[_0x2b32d0(0x161)][_0x2b32d0(0x135)](),this['_echartsInstance'][_0x2b32d0(_0x48cf93._0xa3d9f1)](),delete this['_echartsInstance']),this['_echartsContainer']&&(this[_0x2b32d0(0x15b)]['container']['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x3c9e9e={_0x2f60de:0x16f,_0x5be722:0x146,_0x479999:0x176},_0x1b3071=_0x54b4bb,_0x463f35=mars3d__namespace['DomUtil']['create'](_0x1b3071(_0x3c9e9e._0x2f60de),_0x1b3071(0x14e),this['_map']['container']);return _0x463f35['id']=this['id'],_0x463f35['style']['position']='absolute',_0x463f35['style']['top']='0px',_0x463f35[_0x1b3071(0x151)]['left']='0px',_0x463f35[_0x1b3071(0x151)]['width']=this['_map']['scene'][_0x1b3071(_0x3c9e9e._0x5be722)]['clientWidth']+'px',_0x463f35['style']['height']=this[_0x1b3071(0x15b)]['scene']['canvas'][_0x1b3071(0x158)]+'px',_0x463f35['style']['pointerEvents']=this[_0x1b3071(0x169)]?'all':'none',_0x463f35['style'][_0x1b3071(_0x3c9e9e._0x479999)]=this['options']['zIndex']??0x9,_0x463f35;}[_0x54b4bb(0x14b)](){const _0x24ad4d={_0x423989:0x161,_0x1b92f1:0x155,_0x110350:0x16d,_0x466fce:0x15d},_0x16254d=_0x54b4bb;if(!this[_0x16254d(_0x24ad4d._0x423989)])return;this[_0x16254d(_0x24ad4d._0x1b92f1)]['style'][_0x16254d(_0x24ad4d._0x110350)]=this['_map']['scene']['canvas'][_0x16254d(_0x24ad4d._0x466fce)]+'px',this['_echartsContainer']['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0xc4bf77,_0x8753d6,_0x4822c8){const _0x424243={_0x50a3ed:0x13e},_0x537e36=_0x54b4bb;this[_0x537e36(0x161)]&&(_0xc4bf77={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0xc4bf77,{'onlySimpleType':!![]})},delete _0xc4bf77[_0x537e36(0x160)],this[_0x537e36(0x161)][_0x537e36(_0x424243._0x50a3ed)](_0xc4bf77,_0x8753d6,_0x4822c8));}['getRectangle'](_0x4115ad){const _0x4b0c16={_0x10f02d:0x175,_0x3de3cd:0x13c},_0x12d6a2={_0x2a79b7:0x141},_0x3616bd={_0x159f2c:0x153},_0x425f77=_0x54b4bb;let _0x1b66f4,_0x4609a9,_0x5207c4,_0x48c6e8;function _0x2c0441(_0x2e4fa2){const _0x4490e1=_0x2b64;if(!Array[_0x4490e1(0x148)](_0x2e4fa2))return;const _0x20f037=_0x2e4fa2[0x0]||0x0,_0x141d50=_0x2e4fa2[0x1]||0x0;_0x20f037!==0x0&&_0x141d50!==0x0&&(_0x1b66f4===undefined?(_0x1b66f4=_0x20f037,_0x4609a9=_0x20f037,_0x5207c4=_0x141d50,_0x48c6e8=_0x141d50):(_0x1b66f4=Math['min'](_0x1b66f4,_0x20f037),_0x4609a9=Math['max'](_0x4609a9,_0x20f037),_0x5207c4=Math[_0x4490e1(0x15f)](_0x5207c4,_0x141d50),_0x48c6e8=Math['max'](_0x48c6e8,_0x141d50)));}const _0x4f7f44=this['options']['series'];_0x4f7f44&&_0x4f7f44['forEach'](_0x19d01c=>{const _0x1832e5=_0x2b64;_0x19d01c['data']&&_0x19d01c['data'][_0x1832e5(_0x12d6a2._0x2a79b7)](_0x1123a4=>{const _0x26c466=_0x1832e5;if(_0x1123a4[_0x26c466(_0x3616bd._0x159f2c)])_0x2c0441(_0x1123a4['value']);else _0x1123a4['coords']&&_0x1123a4[_0x26c466(0x13b)]['forEach'](_0x366736=>{_0x2c0441(_0x366736);});});});if(_0x1b66f4===0x0&&_0x5207c4===0x0&&_0x4609a9===0x0&&_0x48c6e8===0x0)return null;return _0x4115ad!==null&&_0x4115ad!==void 0x0&&_0x4115ad[_0x425f77(_0x4b0c16._0x10f02d)]?{'xmin':_0x1b66f4,'xmax':_0x4609a9,'ymin':_0x5207c4,'ymax':_0x48c6e8}:Cesium[_0x425f77(_0x4b0c16._0x3de3cd)]['fromDegrees'](_0x1b66f4,_0x5207c4,_0x4609a9,_0x48c6e8);}['on'](_0x416190,_0x135314,_0x5f2230){return this['_echartsInstance']['on'](_0x416190,_0x135314,_0x5f2230||this),this;}['onByQuery'](_0x2f642e,_0x17a755,_0x2f0ae7,_0x5c13e6){return this['_echartsInstance']['on'](_0x2f642e,_0x17a755,_0x2f0ae7,_0x5c13e6||this),this;}['off'](_0xa7d335,_0x613dad,_0xc7e09c){const _0x5c545d=_0x54b4bb;return this[_0x5c545d(0x161)][_0x5c545d(0x173)](_0xa7d335,_0x613dad,_0xc7e09c||this),this;}}mars3d__namespace['LayerUtil'][_0x54b4bb(0x14a)]('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x54b4bb(0x165)]=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x218da6){if(_0x218da6!=='default'&&!exports['hasOwnProperty'](_0x218da6))Object['defineProperty'](exports,_0x218da6,{'enumerable':!![],'get':function(){return echarts[_0x218da6];}});}),Object[_0x54b4bb(0x13a)](exports,'__esModule',{'value':!![]});
}));
