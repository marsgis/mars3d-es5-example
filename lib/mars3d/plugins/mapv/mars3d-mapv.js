/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.7.2
 * 编译日期：2024-01-29 17:15:45
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2024-01-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';const _0x1efbca=_0x216a;(function(_0x9368bf,_0x570b6f){const _0x58ce55={_0x379a3f:0x126,_0x1897e1:0xfa,_0x40302a:0xc1,_0x19b590:0x103,_0x33a0fa:0x10d,_0xf3a39e:0x130,_0x49d581:0xd0},_0x21e858=_0x216a,_0xf29f90=_0x9368bf();while(!![]){try{const _0x52189d=-parseInt(_0x21e858(0x10a))/0x1+parseInt(_0x21e858(_0x58ce55._0x379a3f))/0x2*(-parseInt(_0x21e858(_0x58ce55._0x1897e1))/0x3)+parseInt(_0x21e858(_0x58ce55._0x40302a))/0x4*(parseInt(_0x21e858(_0x58ce55._0x19b590))/0x5)+-parseInt(_0x21e858(_0x58ce55._0x33a0fa))/0x6*(parseInt(_0x21e858(_0x58ce55._0xf3a39e))/0x7)+parseInt(_0x21e858(0xd9))/0x8*(-parseInt(_0x21e858(0xd6))/0x9)+parseInt(_0x21e858(0xce))/0xa*(-parseInt(_0x21e858(_0x58ce55._0x49d581))/0xb)+parseInt(_0x21e858(0x124))/0xc;if(_0x52189d===_0x570b6f)break;else _0xf29f90['push'](_0xf29f90['shift']());}catch(_0x2df186){_0xf29f90['push'](_0xf29f90['shift']());}}}(_0x92ce,0x7d07b));function _0x92ce(){const _0x1ed366=['_onMoveEndEvent','stopAniamation','initDataRange','windowPosition','_cache_event','height','steps','keys','mousemoveEvent','MapVLayer','SCENE3D','defineProperty','dataSet','processData','getHeight','_onMapClick','28855968tQIMHq','__proto__','54052bDwVNd','getContext','animator','resize','absolute','FeatureCollection','left','_coordinates','style','0px','7pcuXZq','clear','_pointerEvents','_createCanvas','MultiLineString','add','_dataCache','zIndex','12EYSbvT','isFormat','fillStyle','devicePixelRatio','__esModule','draw','camera','mouseMove','Rectangle','init','clearData','setZIndex','Cesium','162830uOwTKG','layer','99ndbsEF','_onMapMouseMove','create','addAnimatorEvent','fixedHeight','postRender','9HCRjlT','prototype','ymin','6388496gzjJZZ','cameraMoveEnd','Cartesian3','canvas','xmax','initDevicePixelRatio','parentElement','context','removeData','default','size','unbindEvent','_onMoveStartEvent','_reset','_mapVRenderer','options','mars3d-mapv','canvasLayer','cartesianToCanvasCoordinates','mapvDepthTest','mousemove','set','MultiPolygon','_map','mapvFixedHeight','DataSet','ymax','render','drawContext','depthTest','get','scene','push','54BbrjnR','_addedHook','bind','Util','xmin','EventType','pointerEvents','_showHook','baiduMapLayer','1245670pBVLZU','width','off','step','updateCallback','start','argCheck','690703xUISPS','container','_data','3105978SNeqYc','methods','click','mouseDown','display','update','updateData'];_0x92ce=function(){return _0x1ed366;};return _0x92ce();}function _interopNamespace(_0x3f172a){const _0x22064e={_0x364365:0xe2},_0x262d1f=_0x216a;if(_0x3f172a&&_0x3f172a[_0x262d1f(0xc5)])return _0x3f172a;var _0x23750c=Object['create'](null);return _0x3f172a&&Object[_0x262d1f(0x11b)](_0x3f172a)['forEach'](function(_0x357d1f){const _0x1f2b3b=_0x262d1f;if(_0x357d1f!=='default'){var _0x53f827=Object['getOwnPropertyDescriptor'](_0x3f172a,_0x357d1f);Object['defineProperty'](_0x23750c,_0x357d1f,_0x53f827[_0x1f2b3b(0xf7)]?_0x53f827:{'enumerable':!![],'get':function(){return _0x3f172a[_0x357d1f];}});}}),_0x23750c[_0x262d1f(_0x22064e._0x364365)]=_0x3f172a,_0x23750c;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);function _0x216a(_0x3766e6,_0x2a007e){const _0x92ce66=_0x92ce();return _0x216a=function(_0x216afa,_0x30fe66){_0x216afa=_0x216afa-0xbe;let _0x4fe739=_0x92ce66[_0x216afa];return _0x4fe739;},_0x216a(_0x3766e6,_0x2a007e);}const Cesium$1=mars3d__namespace[_0x1efbca(0xcd)],baiduMapLayer=mapv__namespace?mapv__namespace[_0x1efbca(0x102)]:null,BaseLayer$1=baiduMapLayer?baiduMapLayer[_0x1efbca(0x125)]:Function;class MapVRenderer extends BaseLayer$1{constructor(_0x2c27c2,_0x1fcc86,_0x4a0bbd,_0x1d1b4d){const _0x38a976={_0x1db0a2:0x109},_0x52059f=_0x1efbca;super(_0x2c27c2,_0x1fcc86,_0x4a0bbd);if(!BaseLayer$1)return;this['map']=_0x2c27c2,this['scene']=_0x2c27c2['scene'],this['dataSet']=_0x1fcc86,_0x4a0bbd=_0x4a0bbd||{},this[_0x52059f(0xca)](_0x4a0bbd),this[_0x52059f(_0x38a976._0x1db0a2)](_0x4a0bbd),this['initDevicePixelRatio'](),this['canvasLayer']=_0x1d1b4d,this['stopAniamation']=!0x1,this['animation']=_0x4a0bbd['animation'];}['initDevicePixelRatio'](){const _0xeb0f20={_0x53972a:0xc4},_0x5d47e2=_0x1efbca;this[_0x5d47e2(_0xeb0f20._0x53972a)]=window['devicePixelRatio']||0x1;}[_0x1efbca(0xd3)](){}['animatorMovestartEvent'](){const _0x2f2d66={_0x317241:0x128,_0x295dc6:0x11a},_0x672ca7=_0x1efbca,_0x262393=this['options']['animation'];this['isEnabledTime']()&&this[_0x672ca7(_0x2f2d66._0x317241)]&&(this[_0x672ca7(_0x2f2d66._0x295dc6)][_0x672ca7(0x106)]=_0x262393['stepsRange'][_0x672ca7(0x108)]);}['animatorMoveendEvent'](){this['isEnabledTime']()&&this['animator'];}['getContext'](){return this['canvasLayer']['canvas']['getContext'](this['context']);}['init'](_0x1db816){const _0x32b282={_0x37fa1f:0x116,_0x5cf0da:0xe0,_0x4ff6b4:0xea,_0x3cc49c:0xc0},_0x3ffbc6=_0x1efbca;this['options']=_0x1db816,this[_0x3ffbc6(_0x32b282._0x37fa1f)](_0x1db816),this[_0x3ffbc6(_0x32b282._0x5cf0da)]=this['options'][_0x3ffbc6(0xe0)]||'2d',Cesium$1['defined'](this['options']['zIndex'])&&this['canvasLayer']&&this['canvasLayer'][_0x3ffbc6(0xcc)]&&this[_0x3ffbc6(_0x32b282._0x4ff6b4)][_0x3ffbc6(0xcc)](this['options'][_0x3ffbc6(_0x32b282._0x3cc49c)]),this['initAnimator']();}['_canvasUpdate'](_0x43704d){const _0x3ea1b4={_0x5f3f09:0x131,_0x58cf7e:0xe3,_0x384b52:0xeb,_0x4ca108:0xf5,_0x348cae:0xe8},_0x4d1ba5={_0x1c5c70:0xf1,_0x566553:0xc7},_0x41a5c1=_0x1efbca,_0x9ea0b0=this['scene'];if(this['canvasLayer']&&!this[_0x41a5c1(0x115)]){const _0x37c0f0=this['options']['animation'],_0x2ec3ac=this['getContext']();if(this['isEnabledTime']()){if(void 0x0===_0x43704d)return void this[_0x41a5c1(0x131)](_0x2ec3ac);this['context']==='2d'&&(_0x2ec3ac['save'](),_0x2ec3ac['globalCompositeOperation']='destination-out',_0x2ec3ac[_0x41a5c1(0xc3)]='rgba(0,\x200,\x200,\x20.1)',_0x2ec3ac['fillRect'](0x0,0x0,_0x2ec3ac['canvas']['width'],_0x2ec3ac['canvas']['height']),_0x2ec3ac['restore']());}else this[_0x41a5c1(_0x3ea1b4._0x5f3f09)](_0x2ec3ac);if(this['context']==='2d')for(const _0x4f4c0d in this['options']){_0x2ec3ac[_0x4f4c0d]=this['options'][_0x4f4c0d];}else _0x2ec3ac[_0x41a5c1(0x131)](_0x2ec3ac['COLOR_BUFFER_BIT']);const _0x4daa78={'transferCoordinate':function(_0x9a59b9){const _0x18e88f=_0x41a5c1,_0x1cc5da=null;let _0xfd4420=_0x9ea0b0[_0x18e88f(_0x4d1ba5._0x1c5c70)];_0x9ea0b0['mapvAutoHeight']&&(_0xfd4420=_0x9ea0b0['globe'][_0x18e88f(0x122)](Cesium$1['Cartographic']['fromDegrees'](_0x9a59b9[0x0],_0x9a59b9[0x1])));const _0x56e307=Cesium$1[_0x18e88f(0xdb)]['fromDegrees'](_0x9a59b9[0x0],_0x9a59b9[0x1],_0xfd4420);if(!_0x56e307)return _0x1cc5da;const _0x15873b=_0x9ea0b0[_0x18e88f(0xeb)](_0x56e307);if(!_0x15873b)return _0x1cc5da;if(_0x9ea0b0[_0x18e88f(0xec)]&&_0x9ea0b0['mode']===Cesium$1['SceneMode'][_0x18e88f(0x11e)]){const _0x6ca96c=new Cesium$1['EllipsoidalOccluder'](_0x9ea0b0['globe']['ellipsoid'],_0x9ea0b0[_0x18e88f(_0x4d1ba5._0x566553)]['positionWC']),_0x49f268=_0x6ca96c['isPointVisible'](_0x56e307);if(!_0x49f268)return _0x1cc5da;}return[_0x15873b['x'],_0x15873b['y']];}};void 0x0!==_0x43704d&&(_0x4daa78['filter']=function(_0x15edde){const _0x4d6ab0=_0x37c0f0['trails']||0xa;return!!(_0x43704d&&_0x15edde['time']>_0x43704d-_0x4d6ab0&&_0x15edde['time']<_0x43704d);});const _0xd2becc=this['dataSet']['get'](_0x4daa78);this[_0x41a5c1(0x121)](_0xd2becc),this['options']['unit']==='m'&&this[_0x41a5c1(0xe8)][_0x41a5c1(0xe3)],this['options']['_size']=this['options'][_0x41a5c1(_0x3ea1b4._0x58cf7e)];const _0x12462a=_0x9ea0b0[_0x41a5c1(_0x3ea1b4._0x384b52)](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x12462a)return;this[_0x41a5c1(_0x3ea1b4._0x4ca108)](_0x2ec3ac,new mapv__namespace[(_0x41a5c1(0xf2))](_0xd2becc),this[_0x41a5c1(0xe8)],_0x12462a),this[_0x41a5c1(_0x3ea1b4._0x348cae)][_0x41a5c1(0x107)]&&this['options'][_0x41a5c1(0x107)](_0x43704d);}}['updateData'](_0x16d503,_0x5ee684){const _0x26846e={_0x48233b:0x120},_0x54b48c=_0x1efbca;let _0x24a5c7=_0x16d503;_0x24a5c7&&_0x24a5c7['get']&&(_0x24a5c7=_0x24a5c7[_0x54b48c(0xf7)]()),void 0x0!==_0x24a5c7&&this[_0x54b48c(_0x26846e._0x48233b)]['set'](_0x24a5c7),super['update']({'options':_0x5ee684});}['addData'](_0x2cbf27,_0x440aec){const _0x165ef2={_0x2e5bf2:0xf7},_0x5ef52f=_0x1efbca;let _0x149353=_0x2cbf27;_0x2cbf27&&_0x2cbf27['get']&&(_0x149353=_0x2cbf27[_0x5ef52f(_0x165ef2._0x2e5bf2)]()),this[_0x5ef52f(0x120)][_0x5ef52f(0xbe)](_0x149353),this[_0x5ef52f(0x112)]({'options':_0x440aec});}['getData'](){const _0x30252b={_0x17fd3c:0x120},_0x1f62f7=_0x1efbca;return this[_0x1f62f7(_0x30252b._0x17fd3c)];}['removeData'](_0x1ca733){const _0x56b716=_0x1efbca;if(this['dataSet']){const _0x3cfd0b=this['dataSet']['get']({'filter':function(_0x4a7ab5){return _0x1ca733==null||typeof _0x1ca733!=='function'||!_0x1ca733(_0x4a7ab5);}});this['dataSet'][_0x56b716(0xee)](_0x3cfd0b),this['update']({'options':null});}}['clearData'](){const _0xb95d31=_0x1efbca;this[_0xb95d31(0x120)]&&this['dataSet']['clear'](),this['update']({'options':null});}['draw'](){this['canvasLayer']['draw']();}['clear'](_0x32718d){const _0x298685=_0x1efbca;_0x32718d&&_0x32718d['clearRect']&&_0x32718d['clearRect'](0x0,0x0,_0x32718d['canvas']['width'],_0x32718d['canvas'][_0x298685(0x119)]);}['destroy'](){const _0x398c99={_0x49edef:0x131,_0x3d85a4:0xcb,_0x4942e0:0x128},_0x5c12d7=_0x1efbca;this[_0x5c12d7(_0x398c99._0x49edef)](this['getContext']()),this[_0x5c12d7(_0x398c99._0x3d85a4)](),this['animator']&&this[_0x5c12d7(_0x398c99._0x4942e0)]['stop'](),this['animator']=null,this['canvasLayer']=null;}}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace[_0x1efbca(0xf2)][_0x1efbca(0xd7)]['transferCoordinate']=function(_0x17b6e9,_0x142617,_0x4d9212,_0x738a53){const _0x1d489c={_0x37701d:0xef},_0x1db990=_0x1efbca;_0x738a53=_0x738a53||_0x1db990(0x12d),_0x4d9212=_0x4d9212||'coordinates';for(let _0x4e53ac=0x0;_0x4e53ac<_0x17b6e9['length'];_0x4e53ac++){const _0x3353a4=_0x17b6e9[_0x4e53ac]['geometry'],_0xea3dcd=_0x3353a4[_0x4d9212];switch(_0x3353a4['type']){case'Point':{const _0x15f579=_0x142617(_0xea3dcd);_0x15f579?_0x3353a4[_0x738a53]=_0x15f579:_0x3353a4[_0x738a53]=[-0x3e7,-0x3e7];}break;case'LineString':{const _0xef64df=[];for(let _0x34ae8c=0x0;_0x34ae8c<_0xea3dcd['length'];_0x34ae8c++){const _0x1215c3=_0x142617(_0xea3dcd[_0x34ae8c]);_0x1215c3&&_0xef64df['push'](_0x1215c3);}_0x3353a4[_0x738a53]=_0xef64df;}break;case _0x1db990(0x134):case'Polygon':{const _0x5cea1d=_0x40b2e2(_0xea3dcd);_0x3353a4[_0x738a53]=_0x5cea1d;}break;case _0x1db990(_0x1d489c._0x37701d):{const _0x24459b=[];for(let _0x2b7050=0x0;_0x2b7050<_0xea3dcd['length'];_0x2b7050++){const _0x4a5fc2=_0x40b2e2(_0xea3dcd[_0x2b7050]);_0x4a5fc2['length']>0x0&&_0x24459b[_0x1db990(0xf9)](_0x4a5fc2);}_0x3353a4[_0x738a53]=_0x24459b;}break;}}function _0x40b2e2(_0x4505b2){const _0x20b2c6=_0x1db990,_0x325b55=[];for(let _0xeedc8b=0x0;_0xeedc8b<_0x4505b2['length'];_0xeedc8b++){const _0x1044bb=_0x4505b2[_0xeedc8b],_0x3442b5=[];for(let _0x4f3cb4=0x0;_0x4f3cb4<_0x1044bb['length'];_0x4f3cb4++){const _0x3c2c6f=_0x142617(_0x1044bb[_0x4f3cb4]);_0x3c2c6f&&_0x3442b5['push'](_0x3c2c6f);}_0x3442b5['length']>0x0&&_0x325b55[_0x20b2c6(0xf9)](_0x3442b5);}return _0x325b55;}return _0x17b6e9;};else throw new Error('请引入\x20mapv\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class MapVLayer extends BaseLayer{constructor(_0x244e68,_0x35f674){const _0x52a197={_0x110198:0x132,_0x41865a:0x120},_0x38c77b=_0x1efbca;super(_0x244e68),this[_0x38c77b(_0x52a197._0x110198)]=this[_0x38c77b(0xe8)]['pointerEvents'],this[_0x38c77b(_0x52a197._0x41865a)]=_0x35f674||new mapv__namespace[(_0x38c77b(0xf2))](_0x244e68['data']),this['canvas']=null;}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x1efbca(0x100)](_0x1270bb){const _0xf683e5=_0x1efbca;this[_0xf683e5(0x132)]=_0x1270bb,this['canvas']&&(_0x1270bb?this[_0xf683e5(0xdc)]['style']['pointerEvents']='all':this['canvas'][_0xf683e5(0x12e)]['pointerEvents']='none');}[_0x1efbca(0x101)](_0x52c649){const _0x349945={_0x4bd555:0xdc,_0x1a45b1:0x111},_0x2cbc87=_0x1efbca;_0x52c649?this[_0x2cbc87(0xdc)]['style'][_0x2cbc87(0x111)]='block':this[_0x2cbc87(_0x349945._0x4bd555)]['style'][_0x2cbc87(_0x349945._0x1a45b1)]='none';}['_mountedHook'](){const _0x1370c1={_0x41ec1e:0xf0,_0x566387:0xec,_0xac5916:0xf6,_0x551440:0xe8,_0x3cabc0:0xd4},_0x44631b=_0x1efbca;this[_0x44631b(_0x1370c1._0x41ec1e)][_0x44631b(0xf8)][_0x44631b(_0x1370c1._0x566387)]=this['options'][_0x44631b(_0x1370c1._0xac5916)]??!![],this['_map'][_0x44631b(0xf8)]['mapvAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x44631b(0xf8)]['mapvFixedHeight']=this[_0x44631b(_0x1370c1._0x551440)][_0x44631b(_0x1370c1._0x3cabc0)]??0x0;}[_0x1efbca(0xfb)](){const _0x12d941={_0x463fd7:0x10c,_0xdde4e3:0xde,_0x46a6e6:0xdc,_0x2220cc:0xf4},_0x237886=_0x1efbca;this['dataSet']&&(!this[_0x237886(0x120)][_0x237886(_0x12d941._0x463fd7)]||this['dataSet']['_data']['length']===0x0)&&(this['dataSet']['_data']=[]['concat'](this['dataSet'][_0x237886(0xbf)])),this['_mapVRenderer']=new MapVRenderer(this['_map'],this['dataSet'],this['options'],this),this[_0x237886(_0x12d941._0xdde4e3)](),this[_0x237886(_0x12d941._0x46a6e6)]=this['_createCanvas'](),this['render']=this[_0x237886(_0x12d941._0x2220cc)]['bind'](this),this['bindEvent'](),this['_reset']();}['_removedHook'](){const _0xed049={_0xd6b8e0:0xe7,_0x2f94e3:0xdc,_0x153063:0xdf},_0x4df285=_0x1efbca;this['unbindEvent'](),this[_0x4df285(_0xed049._0xd6b8e0)]&&(this[_0x4df285(0xe7)]['destroy'](),this[_0x4df285(0xe7)]=null),this[_0x4df285(_0xed049._0x2f94e3)][_0x4df285(_0xed049._0x153063)]['removeChild'](this['canvas']);}['initDevicePixelRatio'](){const _0x2db494=_0x1efbca;this['devicePixelRatio']=window[_0x2db494(0xc4)]||0x1;}['bindEvent'](){const _0x55832e={_0x2922c9:0xe5,_0x4263df:0xe5,_0x4446f5:0x10e},_0x5621b4=_0x1efbca;var _0x208071,_0x4e6761;this['_map']['on'](mars3d__namespace['EventType'][_0x5621b4(0x110)],this[_0x5621b4(_0x55832e._0x2922c9)],this),this[_0x5621b4(0xf0)]['on'](mars3d__namespace[_0x5621b4(0xff)]['cameraMoveStart'],this[_0x5621b4(_0x55832e._0x4263df)],this),this['_map']['on'](mars3d__namespace['EventType'][_0x5621b4(0xda)],this['_onMoveEndEvent'],this),(_0x208071=this['options'])!==null&&_0x208071!==void 0x0&&(_0x208071=_0x208071[_0x5621b4(_0x55832e._0x4446f5)])!==null&&_0x208071!==void 0x0&&_0x208071['click']&&this['_map']['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x4e6761=this['options'])!==null&&_0x4e6761!==void 0x0&&(_0x4e6761=_0x4e6761['methods'])!==null&&_0x4e6761!==void 0x0&&_0x4e6761['mousemove']&&this[_0x5621b4(0xf0)]['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this);}[_0x1efbca(0xe4)](){const _0xc977f3={_0x1504e1:0x110,_0x44742a:0x10f,_0x3bb2a8:0x123,_0x3c00ba:0xed,_0xe97108:0xf0,_0x13360e:0xff},_0x14dc51=_0x1efbca;var _0x1627c3,_0x73cc52;this[_0x14dc51(0xf0)]['off'](mars3d__namespace['EventType'][_0x14dc51(_0xc977f3._0x1504e1)],this['_onMoveStartEvent'],this),this['_map']['off'](mars3d__namespace[_0x14dc51(0xff)]['cameraMoveStart'],this['_onMoveStartEvent'],this),this['_map'][_0x14dc51(0x105)](mars3d__namespace['EventType']['cameraMoveEnd'],this[_0x14dc51(0x114)],this),this['_map'][_0x14dc51(0x105)](mars3d__namespace[_0x14dc51(0xff)]['postRender'],this['_reset'],this),(_0x1627c3=this['options'])!==null&&_0x1627c3!==void 0x0&&(_0x1627c3=_0x1627c3[_0x14dc51(0x10e)])!==null&&_0x1627c3!==void 0x0&&_0x1627c3[_0x14dc51(_0xc977f3._0x44742a)]&&this['_map']['off'](mars3d__namespace['EventType'][_0x14dc51(0x10f)],this[_0x14dc51(_0xc977f3._0x3bb2a8)],this),(_0x73cc52=this[_0x14dc51(0xe8)])!==null&&_0x73cc52!==void 0x0&&(_0x73cc52=_0x73cc52['methods'])!==null&&_0x73cc52!==void 0x0&&_0x73cc52[_0x14dc51(_0xc977f3._0x3c00ba)]&&this[_0x14dc51(_0xc977f3._0xe97108)]['off'](mars3d__namespace[_0x14dc51(_0xc977f3._0x13360e)]['mouseMove'],this['_onMapMouseMove'],this);}['_onMoveStartEvent'](){const _0x1ed559={_0x11985a:0xd5},_0x3059e4=_0x1efbca;this['_mapVRenderer']&&(this['_mapVRenderer']['animatorMovestartEvent'](),this['_map']['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x3059e4(_0x1ed559._0x11985a)],this['_reset'],this));}['_onMoveEndEvent'](){const _0x446ef2={_0x3ec2bd:0xff,_0x51477f:0xd5},_0x3445c2=_0x1efbca;this['_mapVRenderer']&&(this['_map']['off'](mars3d__namespace[_0x3445c2(_0x446ef2._0x3ec2bd)][_0x3445c2(_0x446ef2._0x51477f)],this['_reset'],this),this['_mapVRenderer']['animatorMoveendEvent'](),this[_0x3445c2(0xe6)]());}['_setOptionsHook'](_0x2a2609,_0x5c2a26){const _0x43ef7f=_0x1efbca;this['_removedHook'](),this[_0x43ef7f(0xfb)]();}['addData'](_0x4a912a){this['_mapVRenderer']&&this['_mapVRenderer']['addData'](_0x4a912a,this['options']);}['updateData'](_0x5d2c4d){const _0x3e39e5=_0x1efbca;this['_mapVRenderer']&&this['_mapVRenderer'][_0x3e39e5(0x113)](_0x5d2c4d,this['options']);}['getData'](){const _0x3ef265=_0x1efbca;return this['_mapVRenderer']&&(this['dataSet']=this[_0x3ef265(0xe7)]['getData']()),this['dataSet'];}['removeData'](_0x583440){const _0x53821e={_0x27a47f:0xe1},_0x4f8121=_0x1efbca;this['_mapVRenderer']&&this['_mapVRenderer'][_0x4f8121(_0x53821e._0x27a47f)](_0x583440);}['removeAllData'](){const _0x4f761e={_0x4f99d5:0xe7},_0x213d34=_0x1efbca;this['_mapVRenderer']&&this[_0x213d34(_0x4f761e._0x4f99d5)][_0x213d34(0xcb)]();}[_0x1efbca(0x133)](){const _0x43036e={_0x580705:0x12c,_0x5f23d8:0xf0,_0x558e4d:0x104,_0x28cd9f:0x12e,_0xd51c94:0x127},_0x1caba5=_0x1efbca,_0x53fc94=mars3d__namespace['DomUtil'][_0x1caba5(0xd2)]('canvas',_0x1caba5(0xe9),this['_map'][_0x1caba5(0x10b)]);_0x53fc94['id']=this['id'],_0x53fc94['style']['position']=_0x1caba5(0x12a),_0x53fc94['style']['top']=_0x1caba5(0x12f),_0x53fc94['style'][_0x1caba5(_0x43036e._0x580705)]='0px',_0x53fc94['width']=parseInt(this[_0x1caba5(_0x43036e._0x5f23d8)]['canvas']['width']),_0x53fc94['height']=parseInt(this['_map']['canvas']['height']),_0x53fc94['style'][_0x1caba5(_0x43036e._0x558e4d)]=this['_map']['canvas']['style']['width'],_0x53fc94[_0x1caba5(_0x43036e._0x28cd9f)]['height']=this['_map']['canvas']['style']['height'],_0x53fc94['style']['pointerEvents']=this['_pointerEvents']?'auto':'none',_0x53fc94['style']['zIndex']=this['options']['zIndex']??0x9;if(this['options']['context']==='2d'){const _0x144535=this['devicePixelRatio'];_0x53fc94[_0x1caba5(_0x43036e._0xd51c94)](this[_0x1caba5(0xe8)]['context'])['scale'](_0x144535,_0x144535);}return _0x53fc94;}['_reset'](){const _0x18d6b1=_0x1efbca;this['resize'](),this[_0x18d6b1(0xf4)]();}[_0x1efbca(0xc6)](){this['_reset']();}['remove'](){const _0x3de3ea=_0x1efbca;this['_mapVRenderer']&&(this['_mapVRenderer']['destroy'](),this[_0x3de3ea(0xe7)]=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}[_0x1efbca(0xf4)](){this['_mapVRenderer']['_canvasUpdate']();}[_0x1efbca(0x129)](){const _0x8596ea={_0x307deb:0xdc,_0x5c2fc7:0xf0,_0x6ccc96:0x119},_0x29a522=_0x1efbca;if(this[_0x29a522(_0x8596ea._0x307deb)]){const _0x51bf75=this['canvas'];_0x51bf75['style']['position']=_0x29a522(0x12a),_0x51bf75['style']['top']='0px',_0x51bf75[_0x29a522(0x12e)][_0x29a522(0x12c)]='0px',_0x51bf75['width']=parseInt(this['_map'][_0x29a522(_0x8596ea._0x307deb)][_0x29a522(0x104)]),_0x51bf75['height']=parseInt(this['_map']['canvas']['height']),_0x51bf75['style']['width']=this[_0x29a522(_0x8596ea._0x5c2fc7)]['canvas']['style']['width'],_0x51bf75['style'][_0x29a522(_0x8596ea._0x6ccc96)]=this['_map'][_0x29a522(0xdc)]['style']['height'];}}['getRectangle'](_0x385bb6){const _0x59a5d5={_0x1fbc5f:0xfd,_0x137be7:0x12b,_0x2fa6c8:0xc9,_0x2696c3:0xfe,_0x425a8f:0xdd,_0x62ff67:0xf3},_0x282e82=_0x1efbca;if(!this['dataSet']||!this['dataSet']['_data'])return;const _0xd2b731=mars3d__namespace[_0x282e82(_0x59a5d5._0x1fbc5f)]['getExtentByGeoJSON']({'type':_0x282e82(_0x59a5d5._0x137be7),'features':this['dataSet'][_0x282e82(0x10c)]});if(!_0xd2b731)return;return _0x385bb6!==null&&_0x385bb6!==void 0x0&&_0x385bb6[_0x282e82(0xc2)]?_0xd2b731:Cesium[_0x282e82(_0x59a5d5._0x2fa6c8)]['fromDegrees'](_0xd2b731[_0x282e82(_0x59a5d5._0x2696c3)],_0xd2b731[_0x282e82(0xd8)],_0xd2b731[_0x282e82(_0x59a5d5._0x425a8f)],_0xd2b731[_0x282e82(_0x59a5d5._0x62ff67)]);}['_onMapClick'](_0x5b37ca){this['_cache_event']=_0x5b37ca,this['_mapVRenderer']&&this['_mapVRenderer']['clickEvent'](_0x5b37ca['windowPosition'],_0x5b37ca);}[_0x1efbca(0xd1)](_0x55130f){const _0x804f3a={_0x191c0f:0x118,_0xb9b389:0xe7},_0x253c24=_0x1efbca;this[_0x253c24(_0x804f3a._0x191c0f)]=_0x55130f,this['_mapVRenderer']&&this[_0x253c24(_0x804f3a._0xb9b389)][_0x253c24(0x11c)](_0x55130f[_0x253c24(0x117)],_0x55130f);}['on'](_0x4c7da9,_0x418ee4,_0x420137){const _0x3f260e={_0x51b32a:0x123,_0x4ab73f:0xff,_0xf6de8:0xc8},_0x16465c=_0x1efbca;this['options']['methods']=this['options']['methods']||{};if(_0x4c7da9===mars3d__namespace['EventType']['click'])this['options']['methods']['click']=_0x2d3fcf=>{const _0x3aa71a=_0x216a;_0x2d3fcf&&_0x418ee4[_0x3aa71a(0xfc)](_0x420137)({...this['_cache_event'],'layer':this,'data':_0x2d3fcf});},this['_map']['on'](mars3d__namespace['EventType'][_0x16465c(0x10f)],this[_0x16465c(_0x3f260e._0x51b32a)],this);else _0x4c7da9===mars3d__namespace[_0x16465c(_0x3f260e._0x4ab73f)]['mouseMove']&&(this['options']['methods']['mousemove']=_0x26bbcb=>{_0x26bbcb&&_0x418ee4['bind'](_0x420137)({...this['_cache_event'],'layer':this,'data':_0x26bbcb});},this['_map']['on'](mars3d__namespace['EventType'][_0x16465c(_0x3f260e._0xf6de8)],this['_onMapMouseMove'],this));return this;}['off'](_0x5a5cfc,_0x24cb3d){const _0x99296e={_0x5ef717:0xe8,_0x58ded9:0x10e,_0xf6bd64:0xf0,_0x1c3b66:0x10e},_0x2dbf39=_0x1efbca;if(_0x5a5cfc==='click'){var _0x4aaecc;this['_map']['off'](_0x5a5cfc,this['_onMapClick'],this),(_0x4aaecc=this[_0x2dbf39(_0x99296e._0x5ef717)][_0x2dbf39(_0x99296e._0x58ded9)])!==null&&_0x4aaecc!==void 0x0&&_0x4aaecc['mousemove']&&delete this['options'][_0x2dbf39(_0x99296e._0x58ded9)][_0x2dbf39(0x10f)];}else{if(_0x5a5cfc==='mouseMove'){var _0x4d60e0;this[_0x2dbf39(_0x99296e._0xf6bd64)]['off'](_0x5a5cfc,this['_onMapMouseMove'],this),(_0x4d60e0=this['options'][_0x2dbf39(_0x99296e._0x1c3b66)])!==null&&_0x4d60e0!==void 0x0&&_0x4d60e0['mousemove']&&delete this['options'][_0x2dbf39(_0x99296e._0x58ded9)]['mousemove'];}}return this;}}mars3d__namespace['LayerUtil']['register']('mapv',MapVLayer),mars3d__namespace[_0x1efbca(0xcf)]['MapVLayer']=MapVLayer,mars3d__namespace['mapv']=mapv__namespace,exports[_0x1efbca(0x11d)]=MapVLayer,Object['keys'](mapv)['forEach'](function(_0x2ede9e){const _0x805a04={_0x39b147:0xe2},_0xbe1c29=_0x1efbca;if(_0x2ede9e!==_0xbe1c29(_0x805a04._0x39b147)&&!exports['hasOwnProperty'](_0x2ede9e))Object[_0xbe1c29(0x11f)](exports,_0x2ede9e,{'enumerable':!![],'get':function(){return mapv[_0x2ede9e];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
