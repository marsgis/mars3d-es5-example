/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.6.10
 * 编译日期：2023-10-23 17:28:33
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';function _0x9d25(_0x155921,_0x2956fc){const _0x5cbf28=_0x5cbf();return _0x9d25=function(_0x9d2560,_0x1e0c8a){_0x9d2560=_0x9d2560-0x19a;let _0x501d5c=_0x5cbf28[_0x9d2560];return _0x501d5c;},_0x9d25(_0x155921,_0x2956fc);}const _0x2cf92b=_0x9d25;function _0x5cbf(){const _0x1dd94c=['positionWC','width','getData','clickEvent','canvasLayer','steps','7517712SQUMEs','BaseLayer','ymax','initDataRange','get','fromDegrees','render','pointerEvents','Cartesian3','size','EllipsoidalOccluder','8265440EgtNDZ','4519161AiYgQL','_onMoveStartEvent','default','scene','animatorMovestartEvent','time','devicePixelRatio','set','9uwgfkX','removeAllData','0px','off','_onMapClick','globalCompositeOperation','EventType','options','22660QeEOMu','draw','restore','301790ebEVCt','setZIndex','style','mouseMove','postRender','processData','initDevicePixelRatio','_map','mouseDown','_cache_event','_mapVRenderer','_canvasUpdate','dataSet','stepsRange','ymin','2990435bYZcjD','unit','1098vLnFnF','424qpFlRq','_reset','isEnabledTime','15798ByXZgS','length','DataSet','layer','zIndex','push','defineProperty','_onMoveEndEvent','absolute','mousemove','addData','_pointerEvents','windowPosition','_onMapMouseMove','clear','getContext','clearData','MultiLineString','init','update','mode','context','animation','_addedHook','height','getOwnPropertyDescriptor','none','methods','click','all','updateData','Rectangle','cartesianToCanvasCoordinates','display','canvas','_removedHook','drawContext','filter','Util'];_0x5cbf=function(){return _0x1dd94c;};return _0x5cbf();}(function(_0x222471,_0x39d316){const _0x5761ad={_0x477331:0x1e7,_0x21ddc2:0x1a6,_0x128316:0x1a3,_0x5c1aa4:0x1de,_0x3be280:0x1a2},_0x2c65cf=_0x9d25,_0xe20fd5=_0x222471();while(!![]){try{const _0x47ce6e=parseInt(_0x2c65cf(_0x5761ad._0x477331))/0x1*(parseInt(_0x2c65cf(_0x5761ad._0x21ddc2))/0x2)+-parseInt(_0x2c65cf(0x1df))/0x3+parseInt(_0x2c65cf(_0x5761ad._0x128316))/0x4*(parseInt(_0x2c65cf(0x1ef))/0x5)+-parseInt(_0x2c65cf(0x1d3))/0x6+parseInt(_0x2c65cf(0x1a0))/0x7+-parseInt(_0x2c65cf(_0x5761ad._0x5c1aa4))/0x8+parseInt(_0x2c65cf(_0x5761ad._0x3be280))/0x9*(parseInt(_0x2c65cf(0x1f2))/0xa);if(_0x47ce6e===_0x39d316)break;else _0xe20fd5['push'](_0xe20fd5['shift']());}catch(_0xd837e8){_0xe20fd5['push'](_0xe20fd5['shift']());}}}(_0x5cbf,0xd3ea7));function _interopNamespace(_0x979940){const _0xacbc37={_0x38cf4f:0x1bf};if(_0x979940&&_0x979940['__esModule'])return _0x979940;var _0x2c5b9a=Object['create'](null);return _0x979940&&Object['keys'](_0x979940)['forEach'](function(_0x40f5e7){const _0x21f4dc=_0x9d25;if(_0x40f5e7!==_0x21f4dc(0x1e1)){var _0x4ffa9d=Object[_0x21f4dc(_0xacbc37._0x38cf4f)](_0x979940,_0x40f5e7);Object['defineProperty'](_0x2c5b9a,_0x40f5e7,_0x4ffa9d['get']?_0x4ffa9d:{'enumerable':!![],'get':function(){return _0x979940[_0x40f5e7];}});}}),_0x2c5b9a['default']=_0x979940,_0x2c5b9a;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer['__proto__']:Function;class MapVRenderer extends BaseLayer$1{constructor(_0x55bd65,_0x5b43b1,_0x2b4eed,_0x26bc21){const _0x4fc585={_0xf764b3:0x1b8},_0x179ffe=_0x9d25;super(_0x55bd65,_0x5b43b1,_0x2b4eed);if(!BaseLayer$1)return;this['map']=_0x55bd65,this['scene']=_0x55bd65['scene'],this['dataSet']=_0x5b43b1,_0x2b4eed=_0x2b4eed||{},this[_0x179ffe(_0x4fc585._0xf764b3)](_0x2b4eed),this['argCheck'](_0x2b4eed),this['initDevicePixelRatio'](),this['canvasLayer']=_0x26bc21,this['stopAniamation']=!0x1,this[_0x179ffe(0x1bc)]=_0x2b4eed['animation'];}[_0x2cf92b(0x1f8)](){const _0x4bc5ee=_0x2cf92b;this[_0x4bc5ee(0x1e5)]=window['devicePixelRatio']||0x1;}['addAnimatorEvent'](){}[_0x2cf92b(0x1e3)](){const _0x42cba9={_0x25cc2e:0x19e},_0x25223b=_0x2cf92b,_0x106a9a=this['options']['animation'];this['isEnabledTime']()&&this['animator']&&(this[_0x25223b(0x1d2)]['step']=_0x106a9a[_0x25223b(_0x42cba9._0x25cc2e)]['start']);}['animatorMoveendEvent'](){this['isEnabledTime']()&&this['animator'];}['getContext'](){const _0x2849dd={_0x334abd:0x1c8},_0x26008a=_0x2cf92b;return this[_0x26008a(0x1d1)][_0x26008a(_0x2849dd._0x334abd)][_0x26008a(0x1b5)](this[_0x26008a(0x1bb)]);}[_0x2cf92b(0x1b8)](_0x1a4f80){const _0x1e16d5={_0x2a1e2c:0x1ee,_0x3b89cc:0x1aa},_0x1b8593=_0x2cf92b;this['options']=_0x1a4f80,this[_0x1b8593(0x1d6)](_0x1a4f80),this['context']=this[_0x1b8593(_0x1e16d5._0x2a1e2c)]['context']||'2d',Cesium$1['defined'](this['options']['zIndex'])&&this['canvasLayer']&&this['canvasLayer'][_0x1b8593(0x1f3)]&&this['canvasLayer']['setZIndex'](this['options'][_0x1b8593(_0x1e16d5._0x3b89cc)]),this['initAnimator']();}[_0x2cf92b(0x19c)](_0x3233b6){const _0x1c7540={_0x2fca86:0x1a5,_0x3de43c:0x1ec,_0x3cfc3b:0x1f1,_0x87320a:0x1cb,_0x5639f9:0x1f7,_0x45656d:0x1a1,_0x43fda3:0x1ee,_0x549fc7:0x1c6,_0x1ed330:0x1db,_0x279add:0x1d8},_0x1f7cbd={_0x25990d:0x1ba,_0x53cd16:0x1dd,_0x5b89d4:0x1cd},_0x59081a=_0x2cf92b,_0x5c5fd8=this['scene'];if(this['canvasLayer']&&!this['stopAniamation']){const _0xafdfe9=this['options']['animation'],_0x233ec5=this['getContext']();if(this[_0x59081a(_0x1c7540._0x2fca86)]()){if(void 0x0===_0x3233b6)return void this['clear'](_0x233ec5);this['context']==='2d'&&(_0x233ec5['save'](),_0x233ec5[_0x59081a(_0x1c7540._0x3de43c)]='destination-out',_0x233ec5['fillStyle']='rgba(0,\x200,\x200,\x20.1)',_0x233ec5['fillRect'](0x0,0x0,_0x233ec5['canvas']['width'],_0x233ec5['canvas']['height']),_0x233ec5[_0x59081a(_0x1c7540._0x3cfc3b)]());}else this['clear'](_0x233ec5);if(this['context']==='2d')for(const _0xd061a6 in this['options']){_0x233ec5[_0xd061a6]=this['options'][_0xd061a6];}else _0x233ec5['clear'](_0x233ec5['COLOR_BUFFER_BIT']);const _0x11c216={'transferCoordinate':function(_0x1867fb){const _0x3fe24e=_0x59081a,_0x39b436=null;let _0x1f2b8f=_0x5c5fd8['mapvFixedHeight'];_0x5c5fd8['mapvAutoHeight']&&(_0x1f2b8f=_0x5c5fd8['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x1867fb[0x0],_0x1867fb[0x1])));const _0x308ea3=Cesium$1['Cartesian3']['fromDegrees'](_0x1867fb[0x0],_0x1867fb[0x1],_0x1f2b8f);if(!_0x308ea3)return _0x39b436;const _0xe24237=_0x5c5fd8['cartesianToCanvasCoordinates'](_0x308ea3);if(!_0xe24237)return _0x39b436;if(_0x5c5fd8['mapvDepthTest']&&_0x5c5fd8[_0x3fe24e(_0x1f7cbd._0x25990d)]===Cesium$1['SceneMode']['SCENE3D']){const _0x4f6648=new Cesium$1[(_0x3fe24e(_0x1f7cbd._0x53cd16))](_0x5c5fd8['globe']['ellipsoid'],_0x5c5fd8['camera'][_0x3fe24e(_0x1f7cbd._0x5b89d4)]),_0x544810=_0x4f6648['isPointVisible'](_0x308ea3);if(!_0x544810)return _0x39b436;}return[_0xe24237['x'],_0xe24237['y']];}};void 0x0!==_0x3233b6&&(_0x11c216[_0x59081a(_0x1c7540._0x87320a)]=function(_0x3b626e){const _0x19994a=_0x59081a,_0x443c3c=_0xafdfe9['trails']||0xa;return!!(_0x3233b6&&_0x3b626e[_0x19994a(0x1e4)]>_0x3233b6-_0x443c3c&&_0x3b626e['time']<_0x3233b6);});const _0x19e4cc=this['dataSet']['get'](_0x11c216);this[_0x59081a(_0x1c7540._0x5639f9)](_0x19e4cc),this['options'][_0x59081a(_0x1c7540._0x45656d)]==='m'&&this[_0x59081a(0x1ee)]['size'],this['options']['_size']=this[_0x59081a(_0x1c7540._0x43fda3)][_0x59081a(0x1dc)];const _0x49c3b7=_0x5c5fd8[_0x59081a(_0x1c7540._0x549fc7)](Cesium$1[_0x59081a(_0x1c7540._0x1ed330)][_0x59081a(_0x1c7540._0x279add)](0x0,0x0));if(!_0x49c3b7)return;this[_0x59081a(0x1ca)](_0x233ec5,new mapv__namespace[(_0x59081a(0x1a8))](_0x19e4cc),this['options'],_0x49c3b7),this['options']['updateCallback']&&this[_0x59081a(_0x1c7540._0x43fda3)]['updateCallback'](_0x3233b6);}}['updateData'](_0x39a1b1,_0x161a3b){const _0x5cb461={_0x38e12d:0x1e6,_0x566c88:0x1b9},_0x31ec1a=_0x2cf92b;let _0x21c20c=_0x39a1b1;_0x21c20c&&_0x21c20c['get']&&(_0x21c20c=_0x21c20c['get']()),void 0x0!==_0x21c20c&&this['dataSet'][_0x31ec1a(_0x5cb461._0x38e12d)](_0x21c20c),super[_0x31ec1a(_0x5cb461._0x566c88)]({'options':_0x161a3b});}[_0x2cf92b(0x1b0)](_0x5273c7,_0x16aaa1){const _0x58e35a=_0x2cf92b;let _0x1ac3c1=_0x5273c7;_0x5273c7&&_0x5273c7['get']&&(_0x1ac3c1=_0x5273c7['get']()),this['dataSet']['add'](_0x1ac3c1),this[_0x58e35a(0x1b9)]({'options':_0x16aaa1});}[_0x2cf92b(0x1cf)](){return this['dataSet'];}['removeData'](_0x5b2fab){const _0x5a424e={_0x3be8c2:0x19d},_0x1e0578=_0x2cf92b;if(this['dataSet']){const _0x4b6851=this[_0x1e0578(_0x5a424e._0x3be8c2)][_0x1e0578(0x1d7)]({'filter':function(_0x4304c4){return _0x5b2fab==null||typeof _0x5b2fab!=='function'||!_0x5b2fab(_0x4304c4);}});this[_0x1e0578(0x19d)]['set'](_0x4b6851),this['update']({'options':null});}}['clearData'](){const _0x5e2635={_0x1883b0:0x1b4},_0x2e9946=_0x2cf92b;this[_0x2e9946(0x19d)]&&this[_0x2e9946(0x19d)][_0x2e9946(_0x5e2635._0x1883b0)](),this['update']({'options':null});}[_0x2cf92b(0x1f0)](){this['canvasLayer']['draw']();}['clear'](_0x3df6a2){const _0x46e35b={_0x19d0c9:0x1c8,_0x6a7c27:0x1be},_0x2f8f15=_0x2cf92b;_0x3df6a2&&_0x3df6a2['clearRect']&&_0x3df6a2['clearRect'](0x0,0x0,_0x3df6a2['canvas']['width'],_0x3df6a2[_0x2f8f15(_0x46e35b._0x19d0c9)][_0x2f8f15(_0x46e35b._0x6a7c27)]);}['destroy'](){const _0x189fae=_0x2cf92b;this['clear'](this[_0x189fae(0x1b5)]()),this[_0x189fae(0x1b6)](),this['animator']&&this['animator']['stop'](),this['animator']=null,this['canvasLayer']=null;}}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace['DataSet']['prototype']['transferCoordinate']=function(_0xa2766d,_0x3bc89e,_0xc08a97,_0x54d510){const _0x22000c={_0xc5e95e:0x1a7,_0x5beb37:0x1a7,_0x122c18:0x1ab},_0x5ddac2=_0x2cf92b;_0x54d510=_0x54d510||'_coordinates',_0xc08a97=_0xc08a97||'coordinates';for(let _0x2e861e=0x0;_0x2e861e<_0xa2766d['length'];_0x2e861e++){const _0x5c40fe=_0xa2766d[_0x2e861e]['geometry'],_0x8caca8=_0x5c40fe[_0xc08a97];switch(_0x5c40fe['type']){case'Point':{const _0x357d56=_0x3bc89e(_0x8caca8);_0x357d56?_0x5c40fe[_0x54d510]=_0x357d56:_0x5c40fe[_0x54d510]=[-0x3e7,-0x3e7];}break;case'LineString':{const _0x5e72e6=[];for(let _0x2ef5cd=0x0;_0x2ef5cd<_0x8caca8[_0x5ddac2(0x1a7)];_0x2ef5cd++){const _0x12c9d6=_0x3bc89e(_0x8caca8[_0x2ef5cd]);_0x12c9d6&&_0x5e72e6['push'](_0x12c9d6);}_0x5c40fe[_0x54d510]=_0x5e72e6;}break;case _0x5ddac2(0x1b7):case'Polygon':{const _0x618b12=_0x1deff2(_0x8caca8);_0x5c40fe[_0x54d510]=_0x618b12;}break;case'MultiPolygon':{const _0x557d6d=[];for(let _0x14603b=0x0;_0x14603b<_0x8caca8['length'];_0x14603b++){const _0x52115f=_0x1deff2(_0x8caca8[_0x14603b]);_0x52115f['length']>0x0&&_0x557d6d['push'](_0x52115f);}_0x5c40fe[_0x54d510]=_0x557d6d;}break;}}function _0x1deff2(_0x5bd705){const _0xafc0f0=_0x5ddac2,_0x244c19=[];for(let _0x124cd3=0x0;_0x124cd3<_0x5bd705['length'];_0x124cd3++){const _0x2d435b=_0x5bd705[_0x124cd3],_0x228ee9=[];for(let _0x595670=0x0;_0x595670<_0x2d435b[_0xafc0f0(_0x22000c._0xc5e95e)];_0x595670++){const _0x190357=_0x3bc89e(_0x2d435b[_0x595670]);_0x190357&&_0x228ee9['push'](_0x190357);}_0x228ee9[_0xafc0f0(_0x22000c._0x5beb37)]>0x0&&_0x244c19[_0xafc0f0(_0x22000c._0x122c18)](_0x228ee9);}return _0x244c19;}return _0xa2766d;};else throw new Error('请引入\x20mapv\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x2cf92b(0x1d4)];class MapVLayer extends BaseLayer{constructor(_0x4895cf,_0xec29d5){const _0x488a7e=_0x2cf92b;super(_0x4895cf),this[_0x488a7e(0x1b1)]=this['options']['pointerEvents'],this[_0x488a7e(0x19d)]=_0xec29d5||new mapv__namespace['DataSet'](_0x4895cf['data']),this['canvas']=null;}get[_0x2cf92b(0x1da)](){return this['_pointerEvents'];}set['pointerEvents'](_0x16a0af){const _0xeceea9={_0x25691b:0x1b1,_0x45623b:0x1f4,_0x5c35f1:0x1c8,_0x5ecf58:0x1c0},_0x1515ad=_0x2cf92b;this[_0x1515ad(_0xeceea9._0x25691b)]=_0x16a0af,this[_0x1515ad(0x1c8)]&&(_0x16a0af?this['canvas'][_0x1515ad(_0xeceea9._0x45623b)]['pointerEvents']=_0x1515ad(0x1c3):this[_0x1515ad(_0xeceea9._0x5c35f1)]['style'][_0x1515ad(0x1da)]=_0x1515ad(_0xeceea9._0x5ecf58));}['_showHook'](_0x13593d){const _0x75d129={_0x46c3bd:0x1c7,_0x5c1f33:0x1c7},_0x11e62a=_0x2cf92b;_0x13593d?this[_0x11e62a(0x1c8)]['style'][_0x11e62a(_0x75d129._0x46c3bd)]='block':this['canvas']['style'][_0x11e62a(_0x75d129._0x5c1f33)]='none';}['_mountedHook'](){const _0x2720fe=_0x2cf92b;this['_map'][_0x2720fe(0x1e2)]['mapvDepthTest']=this['options']['depthTest']??!![],this['_map']['scene']['mapvAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x2720fe(0x1e2)]['mapvFixedHeight']=this['options']['fixedHeight']??0x0;}[_0x2cf92b(0x1bd)](){const _0x406588={_0xf198c:0x19d,_0xc9446c:0x1c8,_0x332278:0x1d9},_0x38767d=_0x2cf92b;this[_0x38767d(0x19d)]&&(!this[_0x38767d(_0x406588._0xf198c)]['_data']||this['dataSet']['_data'][_0x38767d(0x1a7)]===0x0)&&(this[_0x38767d(0x19d)]['_data']=[]['concat'](this['dataSet']['_dataCache'])),this['_mapVRenderer']=new MapVRenderer(this['_map'],this['dataSet'],this['options'],this),this['initDevicePixelRatio'](),this[_0x38767d(_0x406588._0xc9446c)]=this['_createCanvas'](),this[_0x38767d(_0x406588._0x332278)]=this[_0x38767d(0x1d9)]['bind'](this),this['bindEvent'](),this['_reset']();}[_0x2cf92b(0x1c9)](){const _0x13e016=_0x2cf92b;this['unbindEvent'](),this['_mapVRenderer']&&(this['_mapVRenderer']['destroy'](),this[_0x13e016(0x19b)]=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}['initDevicePixelRatio'](){const _0x8586fd={_0x3ad7c2:0x1e5},_0x87f4c4=_0x2cf92b;this[_0x87f4c4(0x1e5)]=window[_0x87f4c4(_0x8586fd._0x3ad7c2)]||0x1;}['bindEvent'](){const _0x1945d0={_0x22229d:0x1fa,_0x3b40bb:0x1e0,_0x242089:0x1ad,_0x166cf3:0x1ee,_0x883605:0x1c1},_0x1f28be=_0x2cf92b;var _0x967684,_0x950ef4;this['_map']['on'](mars3d__namespace['EventType'][_0x1f28be(_0x1945d0._0x22229d)],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace['EventType']['cameraMoveStart'],this[_0x1f28be(_0x1945d0._0x3b40bb)],this),this['_map']['on'](mars3d__namespace[_0x1f28be(0x1ed)]['cameraMoveEnd'],this[_0x1f28be(_0x1945d0._0x242089)],this),(_0x967684=this['options'])!==null&&_0x967684!==void 0x0&&(_0x967684=_0x967684['methods'])!==null&&_0x967684!==void 0x0&&_0x967684['click']&&this['_map']['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x950ef4=this[_0x1f28be(_0x1945d0._0x166cf3)])!==null&&_0x950ef4!==void 0x0&&(_0x950ef4=_0x950ef4[_0x1f28be(_0x1945d0._0x883605)])!==null&&_0x950ef4!==void 0x0&&_0x950ef4['mousemove']&&this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this);}['unbindEvent'](){const _0x54afa7={_0x13b442:0x1e0,_0x27ca82:0x1ad,_0x317056:0x1ed,_0x12979b:0x1c1},_0x39a327=_0x2cf92b;var _0x39e007,_0x41696f;this['_map'][_0x39a327(0x1ea)](mars3d__namespace['EventType']['mouseDown'],this['_onMoveStartEvent'],this),this['_map'][_0x39a327(0x1ea)](mars3d__namespace['EventType']['cameraMoveStart'],this[_0x39a327(_0x54afa7._0x13b442)],this),this[_0x39a327(0x1f9)]['off'](mars3d__namespace[_0x39a327(0x1ed)]['cameraMoveEnd'],this[_0x39a327(_0x54afa7._0x27ca82)],this),this['_map']['off'](mars3d__namespace[_0x39a327(_0x54afa7._0x317056)][_0x39a327(0x1f6)],this['_reset'],this),(_0x39e007=this['options'])!==null&&_0x39e007!==void 0x0&&(_0x39e007=_0x39e007['methods'])!==null&&_0x39e007!==void 0x0&&_0x39e007['click']&&this['_map']['off'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x41696f=this[_0x39a327(0x1ee)])!==null&&_0x41696f!==void 0x0&&(_0x41696f=_0x41696f[_0x39a327(_0x54afa7._0x12979b)])!==null&&_0x41696f!==void 0x0&&_0x41696f[_0x39a327(0x1af)]&&this['_map']['off'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this);}['_onMoveStartEvent'](){const _0x4751b1={_0x3242b6:0x1f9,_0x2248ec:0x1f6},_0x3a15fb=_0x2cf92b;this['_mapVRenderer']&&(this['_mapVRenderer']['animatorMovestartEvent'](),this['_map']['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),this[_0x3a15fb(_0x4751b1._0x3242b6)]['on'](mars3d__namespace['EventType'][_0x3a15fb(_0x4751b1._0x2248ec)],this['_reset'],this));}['_onMoveEndEvent'](){const _0x2467d0={_0x5ab90c:0x19b,_0x2a71c2:0x1ed,_0x11a043:0x1a4},_0x299148=_0x2cf92b;this[_0x299148(_0x2467d0._0x5ab90c)]&&(this[_0x299148(0x1f9)]['off'](mars3d__namespace[_0x299148(_0x2467d0._0x2a71c2)]['postRender'],this['_reset'],this),this['_mapVRenderer']['animatorMoveendEvent'](),this[_0x299148(_0x2467d0._0x11a043)]());}['_setOptionsHook'](_0x1a3913,_0x19ab0d){this['_removedHook'](),this['_addedHook']();}['addData'](_0x39be0a){const _0x4c9bf8=_0x2cf92b;this[_0x4c9bf8(0x19b)]&&this[_0x4c9bf8(0x19b)][_0x4c9bf8(0x1b0)](_0x39be0a,this['options']);}[_0x2cf92b(0x1c4)](_0x662f89){this['_mapVRenderer']&&this['_mapVRenderer']['updateData'](_0x662f89,this['options']);}['getData'](){const _0x3f93f1={_0x3e3411:0x19d,_0x44256f:0x19b,_0x323e81:0x19d},_0x198b11=_0x2cf92b;return this['_mapVRenderer']&&(this[_0x198b11(_0x3f93f1._0x3e3411)]=this[_0x198b11(_0x3f93f1._0x44256f)]['getData']()),this[_0x198b11(_0x3f93f1._0x323e81)];}['removeData'](_0x30bec4){this['_mapVRenderer']&&this['_mapVRenderer']['removeData'](_0x30bec4);}[_0x2cf92b(0x1e8)](){this['_mapVRenderer']&&this['_mapVRenderer']['clearData']();}['_createCanvas'](){const _0x274af={_0xbe3cc5:0x1ae,_0x5e49cb:0x1c8,_0x44aa3d:0x1f9,_0x5b5a94:0x1be,_0x175f4c:0x1f4,_0x243f32:0x1aa},_0x54e4e3=_0x2cf92b,_0x411920=mars3d__namespace['DomUtil']['create'](_0x54e4e3(0x1c8),'mars3d-mapv',this['_map']['container']);_0x411920['id']=this['id'],_0x411920['style']['position']=_0x54e4e3(_0x274af._0xbe3cc5),_0x411920['style']['top']='0px',_0x411920['style']['left']=_0x54e4e3(0x1e9),_0x411920['width']=parseInt(this['_map'][_0x54e4e3(_0x274af._0x5e49cb)]['width']),_0x411920[_0x54e4e3(0x1be)]=parseInt(this[_0x54e4e3(_0x274af._0x44aa3d)]['canvas'][_0x54e4e3(_0x274af._0x5b5a94)]),_0x411920['style']['width']=this['_map']['canvas']['style'][_0x54e4e3(0x1ce)],_0x411920['style'][_0x54e4e3(_0x274af._0x5b5a94)]=this['_map']['canvas']['style']['height'],_0x411920['style']['pointerEvents']=this[_0x54e4e3(0x1b1)]?'auto':'none',_0x411920[_0x54e4e3(_0x274af._0x175f4c)]['zIndex']=this['options'][_0x54e4e3(_0x274af._0x243f32)]??0x9;if(this['options']['context']==='2d'){const _0x11758a=this['devicePixelRatio'];_0x411920['getContext'](this['options']['context'])['scale'](_0x11758a,_0x11758a);}return _0x411920;}['_reset'](){this['resize'](),this['render']();}['draw'](){this['_reset']();}['remove'](){const _0x542ccf={_0xf3d5ad:0x19b,_0x316e1d:0x19b},_0x39effc=_0x2cf92b;this[_0x39effc(_0x542ccf._0xf3d5ad)]&&(this[_0x39effc(_0x542ccf._0x316e1d)]['destroy'](),this[_0x39effc(0x19b)]=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}['render'](){this['_mapVRenderer']['_canvasUpdate']();}['resize'](){const _0xd38082={_0x2e0ed8:0x1f4,_0x46114a:0x1ce,_0x4bb37b:0x1ce,_0x47f158:0x1c8,_0x1eee7c:0x1be},_0x2a988d=_0x2cf92b;if(this['canvas']){const _0x4b69f5=this['canvas'];_0x4b69f5[_0x2a988d(0x1f4)]['position']='absolute',_0x4b69f5['style']['top']='0px',_0x4b69f5[_0x2a988d(_0xd38082._0x2e0ed8)]['left']='0px',_0x4b69f5[_0x2a988d(_0xd38082._0x46114a)]=parseInt(this['_map']['canvas'][_0x2a988d(0x1ce)]),_0x4b69f5['height']=parseInt(this['_map']['canvas'][_0x2a988d(0x1be)]),_0x4b69f5['style'][_0x2a988d(_0xd38082._0x4bb37b)]=this['_map'][_0x2a988d(_0xd38082._0x47f158)]['style'][_0x2a988d(_0xd38082._0x46114a)],_0x4b69f5['style']['height']=this['_map']['canvas']['style'][_0x2a988d(_0xd38082._0x1eee7c)];}}['getRectangle'](_0x4c2881){const _0x239449={_0x5944b6:0x19f},_0x213886=_0x2cf92b;if(!this[_0x213886(0x19d)]||!this['dataSet']['_data'])return;const _0x3388aa=mars3d__namespace[_0x213886(0x1cc)]['getExtentByGeoJSON']({'type':'FeatureCollection','features':this['dataSet']['_data']});if(!_0x3388aa)return;return _0x4c2881!==null&&_0x4c2881!==void 0x0&&_0x4c2881['isFormat']?_0x3388aa:Cesium[_0x213886(0x1c5)]['fromDegrees'](_0x3388aa['xmin'],_0x3388aa[_0x213886(_0x239449._0x5944b6)],_0x3388aa['xmax'],_0x3388aa[_0x213886(0x1d5)]);}[_0x2cf92b(0x1eb)](_0x226473){const _0x1fdab7={_0x20374c:0x19a},_0x5479b5=_0x2cf92b;this[_0x5479b5(_0x1fdab7._0x20374c)]=_0x226473,this['_mapVRenderer']&&this['_mapVRenderer'][_0x5479b5(0x1d0)](_0x226473[_0x5479b5(0x1b2)],_0x226473);}['_onMapMouseMove'](_0x10df60){const _0x1d09f8={_0x100c46:0x19b,_0x3d88e6:0x1b2},_0x472580=_0x2cf92b;this['_cache_event']=_0x10df60,this[_0x472580(_0x1d09f8._0x100c46)]&&this['_mapVRenderer']['mousemoveEvent'](_0x10df60[_0x472580(_0x1d09f8._0x3d88e6)],_0x10df60);}['on'](_0x47e7f9,_0xaca574,_0x689a0a){const _0x1bda4d={_0xb8c459:0x1c2,_0x19da7c:0x1ee,_0x2b80ff:0x1b3},_0x2b897a=_0x2cf92b;this[_0x2b897a(0x1ee)]['methods']=this['options'][_0x2b897a(0x1c1)]||{};if(_0x47e7f9===mars3d__namespace['EventType']['click'])this['options']['methods'][_0x2b897a(_0x1bda4d._0xb8c459)]=_0x639c78=>{const _0x1a9091=_0x2b897a;_0x639c78&&_0xaca574['bind'](_0x689a0a)({...this[_0x1a9091(0x19a)],'layer':this,'data':_0x639c78});},this[_0x2b897a(0x1f9)]['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this);else _0x47e7f9===mars3d__namespace['EventType'][_0x2b897a(0x1f5)]&&(this[_0x2b897a(_0x1bda4d._0x19da7c)]['methods']['mousemove']=_0x4d07f8=>{_0x4d07f8&&_0xaca574['bind'](_0x689a0a)({...this['_cache_event'],'layer':this,'data':_0x4d07f8});},this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x2b897a(_0x1bda4d._0x2b80ff)],this));return this;}[_0x2cf92b(0x1ea)](_0x13baa3,_0xcd9e0d){const _0x33bfb3={_0x16783c:0x1ea,_0x25ec34:0x1eb,_0x384593:0x1ee,_0x336091:0x1f9,_0x2ba9a6:0x1af,_0xf8e8e8:0x1ee},_0x1be2fa=_0x2cf92b;if(_0x13baa3==='click'){var _0x9d1ef0;this['_map'][_0x1be2fa(_0x33bfb3._0x16783c)](_0x13baa3,this[_0x1be2fa(_0x33bfb3._0x25ec34)],this),(_0x9d1ef0=this['options']['methods'])!==null&&_0x9d1ef0!==void 0x0&&_0x9d1ef0[_0x1be2fa(0x1af)]&&delete this[_0x1be2fa(_0x33bfb3._0x384593)]['methods']['click'];}else{if(_0x13baa3==='mouseMove'){var _0xa02421;this[_0x1be2fa(_0x33bfb3._0x336091)][_0x1be2fa(0x1ea)](_0x13baa3,this[_0x1be2fa(0x1b3)],this),(_0xa02421=this['options']['methods'])!==null&&_0xa02421!==void 0x0&&_0xa02421[_0x1be2fa(_0x33bfb3._0x2ba9a6)]&&delete this[_0x1be2fa(_0x33bfb3._0xf8e8e8)][_0x1be2fa(0x1c1)][_0x1be2fa(0x1af)];}}return this;}}mars3d__namespace['LayerUtil']['register']('mapv',MapVLayer),mars3d__namespace[_0x2cf92b(0x1a9)]['MapVLayer']=MapVLayer,mars3d__namespace['mapv']=mapv__namespace,exports['MapVLayer']=MapVLayer,Object['keys'](mapv)['forEach'](function(_0x5ecbdf){const _0x332699=_0x2cf92b;if(_0x5ecbdf!=='default'&&!exports['hasOwnProperty'](_0x5ecbdf))Object[_0x332699(0x1ac)](exports,_0x5ecbdf,{'enumerable':!![],'get':function(){return mapv[_0x5ecbdf];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
